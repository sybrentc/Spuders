import{g as Ed}from"./_commonjsHelpers-CqkleIqs.js";var af={exports:{}},Bh;function Ld(){return Bh||(Bh=1,function(Nh,Od){/*! For license information please see plotly.min.js.LICENSE.txt */(function(of,Cu){Nh.exports=Cu()})(self,function(){return function(){var of={79288:function(ee,z,e){var M=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in k){var T=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,k[o])}},86712:function(ee,z,e){ee.exports=e(84224)},37240:function(ee,z,e){ee.exports=e(51132)},29744:function(ee,z,e){ee.exports=e(94456)},29352:function(ee,z,e){ee.exports=e(67244)},96144:function(ee,z,e){ee.exports=e(97776)},53219:function(ee,z,e){ee.exports=e(61712)},4624:function(ee,z,e){ee.exports=e(95856)},54543:function(ee,z,e){ee.exports=e(54272)},45e3:function(ee,z,e){ee.exports=e(85404)},62300:function(ee,z,e){ee.exports=e(26048)},6920:function(ee,z,e){ee.exports=e(66240)},10264:function(ee,z,e){ee.exports=e(40448)},32016:function(ee,z,e){ee.exports=e(64884)},27528:function(ee,z,e){ee.exports=e(15088)},75556:function(ee,z,e){ee.exports=e(76744)},39204:function(ee,z,e){ee.exports=e(94704)},73996:function(ee,z,e){ee.exports=e(62396)},16489:function(ee,z,e){ee.exports=e(32028)},5e3:function(ee,z,e){ee.exports=e(81932)},77280:function(ee,z,e){ee.exports=e(45536)},33992:function(ee,z,e){ee.exports=e(42600)},17600:function(ee,z,e){ee.exports=e(21536)},49116:function(ee,z,e){ee.exports=e(65664)},46808:function(ee,z,e){ee.exports=e(29044)},36168:function(ee,z,e){ee.exports=e(48928)},13792:function(ee,z,e){var M=e(32016);M.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),ee.exports=M},3920:function(ee,z,e){ee.exports=e(43480)},25120:function(ee,z,e){ee.exports=e(6296)},4340:function(ee,z,e){ee.exports=e(7404)},86152:function(ee,z,e){ee.exports=e(65456)},56816:function(ee,z,e){ee.exports=e(22020)},89296:function(ee,z,e){ee.exports=e(29928)},20260:function(ee,z,e){ee.exports=e(75792)},32140:function(ee,z,e){ee.exports=e(156)},84764:function(ee,z,e){ee.exports=e(45499)},48824:function(ee,z,e){ee.exports=e(3296)},69967:function(ee,z,e){ee.exports=e(4184)},8363:function(ee,z,e){ee.exports=e(36952)},86636:function(ee,z,e){ee.exports=e(38983)},70192:function(ee,z,e){ee.exports=e(11572)},81604:function(ee,z,e){ee.exports=e(76924)},63796:function(ee,z,e){ee.exports=e(62944)},89336:function(ee,z,e){ee.exports=e(95443)},67484:function(ee,z,e){ee.exports=e(34864)},97312:function(ee,z,e){ee.exports=e(76272)},42192:function(ee,z,e){ee.exports=e(97924)},29800:function(ee,z,e){ee.exports=e(15436)},63560:function(ee,z,e){ee.exports=e(5621)},89904:function(ee,z,e){ee.exports=e(91304)},50248:function(ee,z,e){ee.exports=e(41724)},65832:function(ee,z,e){ee.exports=e(31991)},79440:function(ee,z,e){ee.exports=e(22869)},13752:function(ee,z,e){ee.exports=e(67776)},83096:function(ee,z,e){ee.exports=e(95952)},72196:function(ee){ee.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(ee,z,e){var M=e(72196),k=e(25376),o=e(33816),T=e(31780).templatedArray;e(36208),ee.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(ee,z,e){var M=e(3400),k=e(54460),o=e(23816).draw;function T(h){var s=h._fullLayout;M.filterVisible(s.annotations).forEach(function(t){var a=k.getFromId(h,t.xref),n=k.getFromId(h,t.yref),r=k.getRefType(t.xref),i=k.getRefType(t.yref);t._extremes={},r==="range"&&b(t,a),i==="range"&&b(t,n)})}function b(h,s){var t,a=s._id,n=a.charAt(0),r=h[n],i=h["a"+n],l=h[n+"ref"],u=h["a"+n+"ref"],p=h["_"+n+"padplus"],c=h["_"+n+"padminus"],x={x:1,y:-1}[n]*h[n+"shift"],d=3*h.arrowsize*h.arrowwidth||0,g=d+x,v=d-x,y=3*h.startarrowsize*h.arrowwidth||0,m=y+x,_=y-x;if(u===l){var f=k.findExtremes(s,[s.r2c(r)],{ppadplus:g,ppadminus:v}),S=k.findExtremes(s,[s.r2c(i)],{ppadplus:Math.max(p,m),ppadminus:Math.max(c,_)});t={min:[f.min[0],S.min[0]],max:[f.max[0],S.max[0]]}}else m=i?m+i:m,_=i?_-i:_,t=k.findExtremes(s,[s.r2c(r)],{ppadplus:Math.max(p,g,m),ppadminus:Math.max(c,v,_)});h._extremes[a]=t}ee.exports=function(h){var s=h._fullLayout;if(M.filterVisible(s.annotations).length&&h._fullData.length)return M.syncOrAsync([o,T],h)}},42300:function(ee,z,e){var M=e(3400),k=e(24040),o=e(31780).arrayEditor;function T(h,s){var t,a,n,r,i,l,u,p=h._fullLayout.annotations,c=[],x=[],d=[],g=(s||[]).length;for(t=0;t<p.length;t++)if(r=(n=p[t]).clicktoshow){for(a=0;a<g;a++)if(l=(i=s[a]).xaxis,u=i.yaxis,l._id===n.xref&&u._id===n.yref&&l.d2r(i.x)===b(n._xclick,l)&&u.d2r(i.y)===b(n._yclick,u)){(n.visible?r==="onout"?x:d:c).push(t);break}a===g&&n.visible&&r==="onout"&&x.push(t)}return{on:c,off:x,explicitOff:d}}function b(h,s){return s.type==="log"?s.l2r(h):s.d2r(h)}ee.exports={hasClickToShow:function(h,s){var t=T(h,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(h,s){var t,a,n=T(h,s),r=n.on,i=n.off.concat(n.explicitOff),l={},u=h._fullLayout.annotations;if(r.length||i.length){for(t=0;t<r.length;t++)(a=o(h.layout,"annotations",u[r[t]])).modifyItem("visible",!0),M.extendFlat(l,a.getUpdateObj());for(t=0;t<i.length;t++)(a=o(h.layout,"annotations",u[i[t]])).modifyItem("visible",!1),M.extendFlat(l,a.getUpdateObj());return k.call("update",h,{},l)}}}},87192:function(ee,z,e){var M=e(3400),k=e(76308);ee.exports=function(o,T,b,h){h("opacity");var s=h("bgcolor"),t=h("bordercolor"),a=k.opacity(t);h("borderpad");var n=h("borderwidth"),r=h("showarrow");if(h("text",r?" ":b._dfltTitle.annotation),h("textangle"),M.coerceFont(h,"font",b.font),h("width"),h("align"),h("height")&&h("valign"),r){var i,l,u=h("arrowside");u.indexOf("end")!==-1&&(i=h("arrowhead"),l=h("arrowsize")),u.indexOf("start")!==-1&&(h("startarrowhead",i),h("startarrowsize",l)),h("arrowcolor",a?T.bordercolor:k.defaultLine),h("arrowwidth",2*(a&&n||1)),h("standoff"),h("startstandoff")}var p=h("hovertext"),c=b.hoverlabel||{};if(p){var x=h("hoverlabel.bgcolor",c.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),d=h("hoverlabel.bordercolor",c.bordercolor||k.contrast(x)),g=M.extendFlat({},c.font);g.color||(g.color=d),M.coerceFont(h,"hoverlabel.font",g)}h("captureevents",!!p)}},26828:function(ee,z,e){var M=e(38248),k=e(36896);ee.exports=function(o,T,b,h){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t)for(var a,n,r=o._fullLayout.annotations,i=T._id.charAt(0),l=0;l<r.length;l++)a=r[l],n="annotations["+l+"].",a[i+"ref"]===T._id&&u(i),a["a"+i+"ref"]===T._id&&u("a"+i);function u(p){var c=a[p],x=null;x=s?k(c,T.range):Math.pow(10,c),M(x)||(x=null),h(n+p,x)}}},45216:function(ee,z,e){var M=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(13916);function h(s,t,a){function n(S,w){return M.coerce(s,t,b,S,w)}var r=n("visible"),i=n("clicktoshow");if(r||i){T(s,t,a,n);for(var l=t.showarrow,u=["x","y"],p=[-10,-30],c={_fullLayout:a},x=0;x<2;x++){var d=u[x],g=k.coerceRef(s,t,c,d,"","paper");if(g!=="paper"&&k.getFromId(c,g)._annIndices.push(t._index),k.coercePosition(t,c,n,g,d,.5),l){var v="a"+d,y=k.coerceRef(s,t,c,v,"pixel",["pixel","paper"]);y!=="pixel"&&y!==g&&(y=t[v]="pixel");var m=y==="pixel"?p[x]:.4;k.coercePosition(t,c,n,y,v,m)}n(d+"anchor"),n(d+"shift")}if(M.noneOrAll(s,t,["x","y"]),l&&M.noneOrAll(s,t,["ax","ay"]),i){var _=n("xclick"),f=n("yclick");t._xclick=_===void 0?t.x:k.cleanPosition(_,c,t.xref),t._yclick=f===void 0?t.y:k.cleanPosition(f,c,t.yref)}}}ee.exports=function(s,t){o(s,t,{name:"annotations",handleItemDefaults:h})}},23816:function(ee,z,e){var M=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,h=e(54460),s=e(76308),t=e(43616),a=e(93024),n=e(72736),r=e(93972),i=e(86476),l=e(31780).arrayEditor,u=e(33652);function p(d,g){var v=d._fullLayout.annotations[g]||{},y=h.getFromId(d,v.xref),m=h.getFromId(d,v.yref);y&&y.setScale(),m&&m.setScale(),x(d,v,g,!1,y,m)}function c(d,g,v,y,m){var _=m[v],f=m[v+"ref"],S=v.indexOf("y")!==-1,w=h.getRefType(f)==="domain",E=S?y.h:y.w;return d?w?_+(S?-g:g)/d._length:d.p2r(d.r2p(_)+g):_+(S?-g:g)/E}function x(d,g,v,y,m,_){var f,S,w=d._fullLayout,E=d._fullLayout._size,O=d._context.edits;y?(f="annotation-"+y,S=y+".annotations"):(f="annotation",S="annotations");var C=l(d.layout,S,g),P=C.modifyBase,R=C.modifyItem,j=C.getUpdateObj;w._infolayer.selectAll("."+f+'[data-index="'+v+'"]').remove();var D="clip"+w._uid+"_ann"+v;if(g._input&&g.visible!==!1){var N={x:{},y:{}},W=+g.textangle||0,F=w._infolayer.append("g").classed(f,!0).attr("data-index",String(v)).style("opacity",g.opacity),V=F.append("g").classed("annotation-text-g",!0),U=O[g.showarrow?"annotationTail":"annotationPosition"],te=g.captureevents||O.annotationText||U,J=V.append("g").style("pointer-events",te?"all":null).call(r,"pointer").on("click",function(){d._dragging=!1,d.emit("plotly_clickannotation",pe(M.event))});g.hovertext&&J.on("mouseover",function(){var ve=g.hoverlabel,ge=ve.font,we=this.getBoundingClientRect(),_e=d.getBoundingClientRect();a.loneHover({x0:we.left-_e.left,x1:we.right-_e.left,y:(we.top+we.bottom)/2-_e.top,text:g.hovertext,color:ve.bgcolor,borderColor:ve.bordercolor,fontFamily:ge.family,fontSize:ge.size,fontColor:ge.color,fontWeight:ge.weight,fontStyle:ge.style,fontVariant:ge.variant},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:d})}).on("mouseout",function(){a.loneUnhover(w._hoverlayer.node())});var X=g.borderwidth,K=g.borderpad,Q=X+K,Z=J.append("rect").attr("class","bg").style("stroke-width",X+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),re=g.width||g.height,oe=w._topclips.selectAll("#"+D).data(re?[0]:[]);oe.enter().append("clipPath").classed("annclip",!0).attr("id",D).append("rect"),oe.exit().remove();var ae=g.font,ce=w._meta?T.templateString(g.text,w._meta):g.text,he=J.append("text").classed("annotation-text",!0).text(ce);O.annotationText?he.call(n.makeEditable,{delegate:J,gd:d}).call(xe).on("edit",function(ve){g.text=ve,this.call(xe),R("text",ve),m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0),k.call("_guiRelayout",d,j())}):he.call(xe)}else M.selectAll("#"+D).remove();function pe(ve){var ge={index:v,annotation:g._input,fullAnnotation:g,event:ve};return y&&(ge.subplotId=y),ge}function xe(ve){return ve.call(t.font,ae).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),n.convertToTspans(ve,d,be),ve}function be(){var ve=he.selectAll("a");ve.size()===1&&ve.text()===he.text()&&J.insert("a",":first-child").attr({"xlink:xlink:href":ve.attr("xlink:href"),"xlink:xlink:show":ve.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Z.node());var ge=J.select(".annotation-text-math-group"),we=!ge.empty(),_e=t.bBox((we?ge:he).node()),se=_e.width,ie=_e.height,fe=g.width||se,Ee=g.height||ie,Te=Math.round(fe+2*Q),Ae=Math.round(Ee+2*Q);function Se(gt,ut){return ut==="auto"&&(ut=gt<.3333333333333333?"left":gt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ut]}for(var Oe=!1,De=["x","y"],de=0;de<De.length;de++){var me,Me,ze,Pe,Ne,Ve=De[de],Ye=g[Ve+"ref"]||Ve,at=g["a"+Ve+"ref"],rt={x:m,y:_}[Ve],dt=(W+(Ve==="x"?0:-90))*Math.PI/180,vt=Te*Math.cos(dt),ht=Ae*Math.sin(dt),et=Math.abs(vt)+Math.abs(ht),$e=g[Ve+"anchor"],wt=g[Ve+"shift"]*(Ve==="x"?1:-1),Pt=N[Ve],Ot=h.getRefType(Ye);if(rt&&Ot!=="domain"){var At=rt.r2fraction(g[Ve]);(At<0||At>1)&&(at===Ye?((At=rt.r2fraction(g["a"+Ve]))<0||At>1)&&(Oe=!0):Oe=!0),me=rt._offset+rt.r2p(g[Ve]),Pe=.5}else{var He=Ot==="domain";Ve==="x"?(ze=g[Ve],me=He?rt._offset+rt._length*ze:me=E.l+E.w*ze):(ze=1-g[Ve],me=He?rt._offset+rt._length*ze:me=E.t+E.h*ze),Pe=g.showarrow?.5:ze}if(g.showarrow){Pt.head=me;var Ze=g["a"+Ve];if(Ne=vt*Se(.5,g.xanchor)-ht*Se(.5,g.yanchor),at===Ye){var Be=h.getRefType(at);Be==="domain"?(Ve==="y"&&(Ze=1-Ze),Pt.tail=rt._offset+rt._length*Ze):Be==="paper"?Ve==="y"?(Ze=1-Ze,Pt.tail=E.t+E.h*Ze):Pt.tail=E.l+E.w*Ze:Pt.tail=rt._offset+rt.r2p(Ze),Me=Ne}else Pt.tail=me+Ze,Me=Ne+Ze;Pt.text=Pt.tail+Ne;var Ge=w[Ve==="x"?"width":"height"];if(Ye==="paper"&&(Pt.head=T.constrain(Pt.head,1,Ge-1)),at==="pixel"){var it=-Math.max(Pt.tail-3,Pt.text),tt=Math.min(Pt.tail+3,Pt.text)-Ge;it>0?(Pt.tail+=it,Pt.text+=it):tt>0&&(Pt.tail-=tt,Pt.text-=tt)}Pt.tail+=wt,Pt.head+=wt}else Me=Ne=et*Se(Pe,$e),Pt.text=me+Ne;Pt.text+=wt,Ne+=wt,Me+=wt,g["_"+Ve+"padplus"]=et/2+Me,g["_"+Ve+"padminus"]=et/2-Me,g["_"+Ve+"size"]=et,g["_"+Ve+"shift"]=Ne}if(Oe)J.remove();else{var Re=0,Fe=0;if(g.align!=="left"&&(Re=(fe-se)*(g.align==="center"?.5:1)),g.valign!=="top"&&(Fe=(Ee-ie)*(g.valign==="middle"?.5:1)),we)ge.select("svg").attr({x:Q+Re-1,y:Q+Fe}).call(t.setClipUrl,re?D:null,d);else{var nt=Q+Fe-_e.top,We=Q+Re-_e.left;he.call(n.positionText,We,nt).call(t.setClipUrl,re?D:null,d)}oe.select("rect").call(t.setRect,Q,Q,fe,Ee),Z.call(t.setRect,X/2,X/2,Te-X,Ae-X),J.call(t.setTranslate,Math.round(N.x.text-Te/2),Math.round(N.y.text-Ae/2)),V.attr({transform:"rotate("+W+","+N.x.text+","+N.y.text+")"});var ct,pt=function(gt,ut){F.selectAll(".annotation-arrow-g").remove();var kt=N.x.head,yt=N.y.head,Mt=N.x.tail+gt,Lt=N.y.tail+ut,Ct=N.x.text+gt,It=N.y.text+ut,Wt=T.rotationXYMatrix(W,Ct,It),Nt=T.apply2DTransform(Wt),Bt=T.apply2DTransform2(Wt),Ht=+Z.attr("width"),Qt=+Z.attr("height"),Cn=Ct-.5*Ht,Tn=Cn+Ht,hn=It-.5*Qt,Zt=hn+Qt,an=[[Cn,hn,Cn,Zt],[Cn,Zt,Tn,Zt],[Tn,Zt,Tn,hn],[Tn,hn,Cn,hn]].map(Bt);if(!an.reduce(function(er,Wn){return er^!!T.segmentsIntersect(kt,yt,kt+1e6,yt+1e6,Wn[0],Wn[1],Wn[2],Wn[3])},!1)){an.forEach(function(er){var Wn=T.segmentsIntersect(Mt,Lt,kt,yt,er[0],er[1],er[2],er[3]);Wn&&(Mt=Wn.x,Lt=Wn.y)});var $t=g.arrowwidth,ln=g.arrowcolor,mn=g.arrowside,xn=F.append("g").style({opacity:s.opacity(ln)}).classed("annotation-arrow-g",!0),Pn=xn.append("path").attr("d","M"+Mt+","+Lt+"L"+kt+","+yt).style("stroke-width",$t+"px").call(s.stroke,s.rgb(ln));if(u(Pn,mn,g),O.annotationPosition&&Pn.node().parentNode&&!y){var Mn=kt,_n=yt;if(g.standoff){var Rn=Math.sqrt(Math.pow(kt-Mt,2)+Math.pow(yt-Lt,2));Mn+=g.standoff*(Mt-kt)/Rn,_n+=g.standoff*(Lt-yt)/Rn}var In,Vn,tr=xn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Mt-Mn)+","+(Lt-_n),transform:b(Mn,_n)}).style("stroke-width",$t+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");i.init({element:tr.node(),gd:d,prepFn:function(){var er=t.getTranslate(J);In=er.x,Vn=er.y,m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0)},moveFn:function(er,Wn){var or=Nt(In,Vn),Jt=or[0]+er,en=or[1]+Wn;J.call(t.setTranslate,Jt,en),R("x",c(m,er,"x",E,g)),R("y",c(_,Wn,"y",E,g)),g.axref===g.xref&&R("ax",c(m,er,"ax",E,g)),g.ayref===g.yref&&R("ay",c(_,Wn,"ay",E,g)),xn.attr("transform",b(er,Wn)),V.attr({transform:"rotate("+W+","+Jt+","+en+")"})},doneFn:function(){k.call("_guiRelayout",d,j());var er=document.querySelector(".js-notes-box-panel");er&&er.redraw(er.selectedObj)}})}}};g.showarrow&&pt(0,0),U&&i.init({element:J.node(),gd:d,prepFn:function(){ct=V.attr("transform")},moveFn:function(gt,ut){var kt="pointer";if(g.showarrow)g.axref===g.xref?R("ax",c(m,gt,"ax",E,g)):R("ax",g.ax+gt),g.ayref===g.yref?R("ay",c(_,ut,"ay",E.w,g)):R("ay",g.ay+ut),pt(gt,ut);else{if(y)return;var yt,Mt;if(m)yt=c(m,gt,"x",E,g);else{var Lt=g._xsize/E.w,Ct=g.x+(g._xshift-g.xshift)/E.w-Lt/2;yt=i.align(Ct+gt/E.w,Lt,0,1,g.xanchor)}if(_)Mt=c(_,ut,"y",E,g);else{var It=g._ysize/E.h,Wt=g.y-(g._yshift+g.yshift)/E.h-It/2;Mt=i.align(Wt-ut/E.h,It,0,1,g.yanchor)}R("x",yt),R("y",Mt),m&&_||(kt=i.getCursor(m?.5:yt,_?.5:Mt,g.xanchor,g.yanchor))}V.attr({transform:b(gt,ut)+ct}),r(J,kt)},clickFn:function(gt,ut){g.captureevents&&d.emit("plotly_clickannotation",pe(ut))},doneFn:function(){r(J),k.call("_guiRelayout",d,j());var gt=document.querySelector(".js-notes-box-panel");gt&&gt.redraw(gt.selectedObj)}})}}}ee.exports={draw:function(d){var g=d._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var v=0;v<g.annotations.length;v++)g.annotations[v].visible&&p(d,v);return o.previousPromises(d)},drawOne:p,drawRaw:x}},33652:function(ee,z,e){var M=e(33428),k=e(76308),o=e(72196),T=e(3400),b=T.strScale,h=T.strRotate,s=T.strTranslate;ee.exports=function(t,a,n){var r,i,l,u,p=t.node(),c=o[n.arrowhead||0],x=o[n.startarrowhead||0],d=(n.arrowwidth||1)*(n.arrowsize||1),g=(n.arrowwidth||1)*(n.startarrowsize||1),v=a.indexOf("start")>=0,y=a.indexOf("end")>=0,m=c.backoff*d+n.standoff,_=x.backoff*g+n.startstandoff;if(p.nodeName==="line"){r={x:+t.attr("x1"),y:+t.attr("y1")},i={x:+t.attr("x2"),y:+t.attr("y2")};var f=r.x-i.x,S=r.y-i.y;if(u=(l=Math.atan2(S,f))+Math.PI,m&&_&&m+_>Math.sqrt(f*f+S*S))return void F();if(m){if(m*m>f*f+S*S)return void F();var w=m*Math.cos(l),E=m*Math.sin(l);i.x+=w,i.y+=E,t.attr({x2:i.x,y2:i.y})}if(_){if(_*_>f*f+S*S)return void F();var O=_*Math.cos(l),C=_*Math.sin(l);r.x-=O,r.y-=C,t.attr({x1:r.x,y1:r.y})}}else if(p.nodeName==="path"){var P=p.getTotalLength(),R="";if(P<m+_)return void F();var j=p.getPointAtLength(0),D=p.getPointAtLength(.1);l=Math.atan2(j.y-D.y,j.x-D.x),r=p.getPointAtLength(Math.min(_,P)),R="0px,"+_+"px,";var N=p.getPointAtLength(P),W=p.getPointAtLength(P-.1);u=Math.atan2(N.y-W.y,N.x-W.x),i=p.getPointAtLength(Math.max(0,P-m)),R+=P-(R?_+m:m)+"px,"+P+"px",t.style("stroke-dasharray",R)}function F(){t.style("stroke-dasharray","0px,100px")}function V(U,te,J,X){U.path&&(U.noRotate&&(J=0),M.select(p.parentNode).append("path").attr({class:t.attr("class"),d:U.path,transform:s(te.x,te.y)+h(180*J/Math.PI)+b(X)}).style({fill:k.rgb(n.arrowcolor),"stroke-width":0}))}v&&V(x,r,l,g),y&&V(c,i,u,d)}},79180:function(ee,z,e){var M=e(23816),k=e(42300);ee.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(ee,z,e){var M=e(13916),k=e(67824).overrideAll,o=e(31780).templatedArray;ee.exports=k(o("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},42456:function(ee,z,e){var M=e(3400),k=e(54460);function o(T,b){var h=b.fullSceneLayout.domain,s=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=s.l+h.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(h.x[1]-h.x[0])},T._ya={},M.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=s.t+(1-h.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(h.y[1]-h.y[0])}}ee.exports=function(T){for(var b=T.fullSceneLayout.annotations,h=0;h<b.length;h++)o(b[h],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(ee,z,e){var M=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(45899);function h(s,t,a,n){function r(l,u){return M.coerce(s,t,b,l,u)}function i(l){var u=l+"axis",p={_fullLayout:{}};return p._fullLayout[u]=a[u],k.coercePosition(t,p,r,l,l,.5)}r("visible")&&(T(s,t,n.fullLayout,r),i("x"),i("y"),i("z"),M.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",r("ax",-10),r("ay",-30),M.noneOrAll(s,t,["ax","ay"])))}ee.exports=function(s,t,a){o(s,t,{name:"annotations",handleItemDefaults:h,fullLayout:a.fullLayout})}},71836:function(ee,z,e){var M=e(23816).drawRaw,k=e(94424),o=["x","y","z"];ee.exports=function(T){for(var b=T.fullSceneLayout,h=T.dataScale,s=b.annotations,t=0;t<s.length;t++){for(var a=s[t],n=!1,r=0;r<3;r++){var i=o[r],l=a[i],u=b[i+"axis"].r2fraction(l);if(u<0||u>1){n=!0;break}}n?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(a._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(a.x)*h[0],b.yaxis.r2l(a.y)*h[1],b.zaxis.r2l(a.z)*h[2]]),M(T.graphDiv,a,t,T.id,a._xa,a._ya))}}},56864:function(ee,z,e){var M=e(24040),k=e(3400);ee.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(o,T){var b=M.subplotsRegistry.gl3d;if(b)for(var h=b.attrRegex,s=Object.keys(o),t=0;t<s.length;t++){var a=s[t];h.test(a)&&(o[a].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,a))}},convert:e(42456),draw:e(71836)}},54976:function(ee,z,e){ee.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(ee,z,e){var M=e(54976),k=e(3400),o=e(39032),T=o.EPOCHJD,b=o.ONEDAY,h={valType:"enumerated",values:k.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},s=function(d,g,v,y){var m={};return m[v]=h,k.coerce(d,g,m,v,y)},t="##",a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function r(d){var g=n[d];return g||(n[d]=M.instance(d))}function i(d){return k.extendFlat({},h,{description:d})}function l(d){return"Sets the calendar system to use with `"+d+"` date data."}var u={xcalendar:i(l("x"))},p=k.extendFlat({},u,{ycalendar:i(l("y"))}),c=k.extendFlat({},p,{zcalendar:i(l("z"))}),x=i(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ee.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:c,surface:c,mesh3d:c,scattergl:p,ohlc:u,candlestick:u},layout:{calendar:i(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:i(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:i(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:h,handleDefaults:s,handleTraceDefaults:function(d,g,v,y){for(var m=0;m<v.length;m++)s(d,g,v[m]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(d,g,v){for(var y,m,_,f,S,w=Math.floor((g+.05)/b)+T,E=r(v).fromJD(w),O=0;(O=d.indexOf("%",O))!==-1;)(y=d.charAt(O+1))==="0"||y==="-"||y==="_"?(_=3,m=d.charAt(O+2),y==="_"&&(y="-")):(m=y,y="0",_=2),(f=a[m])?(S=f===t?t:E.formatDate(f[y]),d=d.substr(0,O)+S+d.substr(O+_),O+=S.length):O+=_;return d}}},22548:function(ee,z){z.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],z.defaultLine="#444",z.lightLine="#eee",z.background="#fff",z.borderLine="#BEC8D9",z.lightFraction=90.9090909090909},76308:function(ee,z,e){var M=e(49760),k=e(38248),o=e(38116).isTypedArray,T=ee.exports={},b=e(22548);T.defaults=b.defaults;var h=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var s=T.background=b.background;function t(a){if(k(a)||typeof a!="string")return a;var n=a.trim();if(n.substr(0,3)!=="rgb")return a;var r=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return a;var i=r[1].trim().split(/\s*[\s,]\s*/),l=n.charAt(3)==="a"&&i.length===4;if(!l&&i.length!==3)return a;for(var u=0;u<i.length;u++){if(!i[u].length||(i[u]=Number(i[u]),!(i[u]>=0)))return a;if(u===3)i[u]>1&&(i[u]=1);else if(i[u]>=1)return a}var p=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return l?"rgba("+p+", "+i[3]+")":"rgb("+p+")"}T.tinyRGB=function(a){var n=a.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},T.rgb=function(a){return T.tinyRGB(M(a))},T.opacity=function(a){return a?M(a).getAlpha():0},T.addOpacity=function(a,n){var r=M(a).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+n+")"},T.combine=function(a,n){var r=M(a).toRgb();if(r.a===1)return M(a).toRgbString();var i=M(n||s).toRgb(),l=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},u={r:l.r*(1-r.a)+r.r*r.a,g:l.g*(1-r.a)+r.g*r.a,b:l.b*(1-r.a)+r.b*r.a};return M(u).toRgbString()},T.interpolate=function(a,n,r){var i=M(a).toRgb(),l=M(n).toRgb(),u={r:r*i.r+(1-r)*l.r,g:r*i.g+(1-r)*l.g,b:r*i.b+(1-r)*l.b};return M(u).toRgbString()},T.contrast=function(a,n,r){var i=M(a);return i.getAlpha()!==1&&(i=M(T.combine(a,s))),(i.isDark()?n?i.lighten(n):s:r?i.darken(r):h).toString()},T.stroke=function(a,n){var r=M(n);a.style({stroke:T.tinyRGB(r),"stroke-opacity":r.getAlpha()})},T.fill=function(a,n){var r=M(n);a.style({fill:T.tinyRGB(r),"fill-opacity":r.getAlpha()})},T.clean=function(a){if(a&&typeof a=="object"){var n,r,i,l,u=Object.keys(a);for(n=0;n<u.length;n++)if(l=a[i=u[n]],i.substr(i.length-5)==="color")if(Array.isArray(l))for(r=0;r<l.length;r++)l[r]=t(l[r]);else a[i]=t(l);else if(i.substr(i.length-10)==="colorscale"&&Array.isArray(l))for(r=0;r<l.length;r++)Array.isArray(l[r])&&(l[r][1]=t(l[r][1]));else if(Array.isArray(l)){var p=l[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(r=0;r<l.length;r++)T.clean(l[r])}else l&&typeof l=="object"&&!o(l)&&T.clean(l)}}},42996:function(ee,z,e){var M=e(94724),k=e(25376),o=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:o({},M.ticks,{dflt:""}),ticklabeloverflow:o({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:k({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(ee){ee.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(ee,z,e){var M=e(3400),k=e(31780),o=e(26332),T=e(25404),b=e(95936),h=e(42568),s=e(42996);ee.exports=function(t,a,n){var r=k.newContainer(a,"colorbar"),i=t.colorbar||{};function l(R,j){return M.coerce(i,r,s,R,j)}var u=n.margin||{t:0,b:0,l:0,r:0},p=n.width-u.l-u.r,c=n.height-u.t-u.b,x=l("orientation")==="v",d=l("thicknessmode");l("thickness",d==="fraction"?30/(x?p:c):30);var g=l("lenmode");l("len",g==="fraction"?1:x?c:p);var v,y,m,_=l("yref")==="paper",f=l("xref")==="paper",S="left";x?(m="middle",S=f?"left":"right",v=f?1.02:1,y=.5):(m=_?"bottom":"top",S="center",v=.5,y=_?1.02:1),M.coerce(i,r,{x:{valType:"number",min:f?-2:0,max:f?3:1,dflt:v}},"x"),M.coerce(i,r,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:y}},"y"),l("xanchor",S),l("xpad"),l("yanchor",m),l("ypad"),M.noneOrAll(i,r,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var w=M.coerce(i,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),o(i,r,l,"linear");var E=n.font,O={noAutotickangles:!0,outerTicks:!1,font:E};w.indexOf("inside")!==-1&&(O.bgColor="black"),h(i,r,l,"linear",O),b(i,r,l,"linear",O),T(i,r,l,"linear",O),l("title.text",n._dfltTitle.colorbar);var C=r.showticklabels?r.tickfont:E,P=M.extendFlat({},C,{weight:E.weight,style:E.style,variant:E.variant,color:E.color,size:M.bigFont(C.size)});M.coerceFont(l,"title.font",P),l("title.side",x?"top":"right")}},37848:function(ee,z,e){var M=e(33428),k=e(49760),o=e(7316),T=e(24040),b=e(54460),h=e(86476),s=e(3400),t=s.strTranslate,a=e(92880).extendFlat,n=e(93972),r=e(43616),i=e(76308),l=e(81668),u=e(72736),p=e(94288).flipScale,c=e(28336),x=e(37668),d=e(94724),g=e(84284),v=g.LINE_SPACING,y=g.FROM_TL,m=g.FROM_BR,_=e(63964).cn;ee.exports={draw:function(f){var S=f._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(w){var E,O,C,P,R=w._fullLayout,j=w.calcdata,D=[];function N(re){return a(re,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function W(){typeof P.calc=="function"?P.calc(w,C,E):(E._fillgradient=O.reversescale?p(O.colorscale):O.colorscale,E._zrange=[O[P.min],O[P.max]])}for(var F=0;F<j.length;F++){var V=j[F];if((C=V[0].trace)._module){var U=C._module.colorbar;if(C.visible===!0&&U)for(var te=Array.isArray(U),J=te?U:[U],X=0;X<J.length;X++){var K=(P=J[X]).container;(O=K?C[K]:C)&&O.showscale&&((E=N(O.colorbar))._id="cb"+C.uid+(te&&K?"-"+K:""),E._traceIndex=C.index,E._propPrefix=(K?K+".":"")+"colorbar.",E._meta=C._meta,W(),D.push(E))}}}for(var Q in R._colorAxes)if((O=R[Q]).showscale){var Z=R._colorAxes[Q];(E=N(O.colorbar))._id="cb"+Q,E._propPrefix=Q+".colorbar.",E._meta=R._meta,P={min:"cmin",max:"cmax"},Z[0]!=="heatmap"&&(C=Z[1],P.calc=C._module.colorbar.calc),W(),D.push(E)}return D}(f),function(w){return w._id});S.enter().append("g").attr("class",function(w){return w._id}).classed(_.colorbar,!0),S.each(function(w){var E=M.select(this);s.ensureSingle(E,"rect",_.cbbg),s.ensureSingle(E,"g",_.cbfills),s.ensureSingle(E,"g",_.cblines),s.ensureSingle(E,"g",_.cbaxis,function(C){C.classed(_.crisp,!0)}),s.ensureSingle(E,"g",_.cbtitleunshift,function(C){C.append("g").classed(_.cbtitle,!0)}),s.ensureSingle(E,"rect",_.cboutline);var O=function(C,P,R){var j=P.orientation==="v",D=P.len,N=P.lenmode,W=P.thickness,F=P.thicknessmode,V=P.outlinewidth,U=P.borderwidth,te=P.bgcolor,J=P.xanchor,X=P.yanchor,K=P.xpad,Q=P.ypad,Z=P.x,re=j?P.y:1-P.y,oe=P.yref==="paper",ae=P.xref==="paper",ce=R._fullLayout,he=ce._size,pe=P._fillcolor,xe=P._line,be=P.title,ve=be.side,ge=P._zrange||M.extent((typeof pe=="function"?pe:xe.color).domain()),we=typeof xe.color=="function"?xe.color:function(){return xe.color},_e=typeof pe=="function"?pe:function(){return pe},se=P._levels,ie=function(Be,Ge,it){var tt,Re,Fe=Ge._levels,nt=[],We=[],ct=Fe.end+Fe.size/100,pt=Fe.size,gt=1.001*it[0]-.001*it[1],ut=1.001*it[1]-.001*it[0];for(Re=0;Re<1e5&&(tt=Fe.start+Re*pt,!(pt>0?tt>=ct:tt<=ct));Re++)tt>gt&&tt<ut&&nt.push(tt);if(Ge._fillgradient)We=[0];else if(typeof Ge._fillcolor=="function"){var kt=Ge._filllevels;if(kt)for(ct=kt.end+kt.size/100,pt=kt.size,Re=0;Re<1e5&&(tt=kt.start+Re*pt,!(pt>0?tt>=ct:tt<=ct));Re++)tt>it[0]&&tt<it[1]&&We.push(tt);else(We=nt.map(function(yt){return yt-Fe.size/2})).push(We[We.length-1]+Fe.size)}else Ge._fillcolor&&typeof Ge._fillcolor=="string"&&(We=[0]);return Fe.size<0&&(nt.reverse(),We.reverse()),{line:nt,fill:We}}(0,P,ge),fe=ie.fill,Ee=ie.line,Te=Math.round(W*(F==="fraction"?j?he.w:he.h:1)),Ae=Te/(j?he.w:he.h),Se=Math.round(D*(N==="fraction"?j?he.h:he.w:1)),Oe=Se/(j?he.h:he.w),De=ae?he.w:R._fullLayout.width,de=oe?he.h:R._fullLayout.height,me=Math.round(j?Z*De+K:re*de+Q),Me={center:.5,right:1}[J]||0,ze={top:1,middle:.5}[X]||0,Pe=j?Z-Me*Ae:re-ze*Ae,Ne=j?re-ze*Oe:Z-Me*Oe,Ve=Math.round(j?de*(1-Ne):De*Ne);P._lenFrac=Oe,P._thickFrac=Ae,P._uFrac=Pe,P._vFrac=Ne;var Ye=P._axis=function(Be,Ge,it){var tt=Be._fullLayout,Re=Ge.orientation==="v",Fe={type:"linear",range:it,tickmode:Ge.tickmode,nticks:Ge.nticks,tick0:Ge.tick0,dtick:Ge.dtick,tickvals:Ge.tickvals,ticktext:Ge.ticktext,ticks:Ge.ticks,ticklen:Ge.ticklen,tickwidth:Ge.tickwidth,tickcolor:Ge.tickcolor,showticklabels:Ge.showticklabels,labelalias:Ge.labelalias,ticklabelposition:Ge.ticklabelposition,ticklabeloverflow:Ge.ticklabeloverflow,ticklabelstep:Ge.ticklabelstep,tickfont:Ge.tickfont,tickangle:Ge.tickangle,tickformat:Ge.tickformat,exponentformat:Ge.exponentformat,minexponent:Ge.minexponent,separatethousands:Ge.separatethousands,showexponent:Ge.showexponent,showtickprefix:Ge.showtickprefix,tickprefix:Ge.tickprefix,showticksuffix:Ge.showticksuffix,ticksuffix:Ge.ticksuffix,title:Ge.title,showline:!0,anchor:"free",side:Re?"right":"bottom",position:1},nt=Re?"y":"x",We={type:"linear",_id:nt+Ge._id},ct={letter:nt,font:tt.font,noAutotickangles:nt==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:tt.calendar};function pt(gt,ut){return s.coerce(Fe,We,d,gt,ut)}return c(Fe,We,pt,ct,tt),x(Fe,We,pt,ct),We}(R,P,ge);Ye.position=Ae+(j?Z+K/he.w:re+Q/he.h);var at=["top","bottom"].indexOf(ve)!==-1;if(j&&at&&(Ye.title.side=ve,Ye.titlex=Z+K/he.w,Ye.titley=Ne+(be.side==="top"?Oe-Q/he.h:Q/he.h)),j||at||(Ye.title.side=ve,Ye.titley=re+Q/he.h,Ye.titlex=Ne+K/he.w),xe.color&&P.tickmode==="auto"){Ye.tickmode="linear",Ye.tick0=se.start;var rt=se.size,dt=s.constrain(Se/50,4,15)+1,vt=(ge[1]-ge[0])/((P.nticks||dt)*rt);if(vt>1){var ht=Math.pow(10,Math.floor(Math.log(vt)/Math.LN10));rt*=ht*s.roundUp(vt/ht,[2,5,10]),(Math.abs(se.start)/se.size+1e-6)%1<2e-6&&(Ye.tick0=0)}Ye.dtick=rt}Ye.domain=j?[Ne+Q/he.h,Ne+Oe-Q/he.h]:[Ne+K/he.w,Ne+Oe-K/he.w],Ye.setScale(),C.attr("transform",t(Math.round(he.l),Math.round(he.t)));var et,$e=C.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(he.l),-Math.round(he.t))),wt=Ye.ticklabelposition,Pt=Ye.title.font.size,Ot=C.select("."+_.cbaxis),At=0,He=0;function Ze(Be,Ge){var it={propContainer:Ye,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:ce._dfltTitle.colorbar,containerGroup:C.select("."+_.cbtitle)},tt=Be.charAt(0)==="h"?Be.substr(1):"h"+Be;C.selectAll("."+tt+",."+tt+"-math-group").remove(),l.draw(R,Be,a(it,Ge||{}))}return s.syncOrAsync([o.previousPromises,function(){var Be,Ge;(j&&at||!j&&!at)&&(ve==="top"&&(Be=K+he.l+De*Z,Ge=Q+he.t+de*(1-Ne-Oe)+3+.75*Pt),ve==="bottom"&&(Be=K+he.l+De*Z,Ge=Q+he.t+de*(1-Ne)-3-.25*Pt),ve==="right"&&(Ge=Q+he.t+de*re+3+.75*Pt,Be=K+he.l+De*Ne),Ze(Ye._id+"title",{attributes:{x:Be,y:Ge,"text-anchor":j?"start":"middle"}}))},function(){if(!j&&!at||j&&at){var Be,Ge=C.select("."+_.cbtitle),it=Ge.select("text"),tt=[-V/2,V/2],Re=Ge.select(".h"+Ye._id+"title-math-group").node(),Fe=15.6;if(it.node()&&(Fe=parseInt(it.node().style.fontSize,10)*v),Re?(Be=r.bBox(Re),He=Be.width,(At=Be.height)>Fe&&(tt[1]-=(At-Fe)/2)):it.node()&&!it.classed(_.jsPlaceholder)&&(Be=r.bBox(it.node()),He=Be.width,At=Be.height),j){if(At){if(At+=5,ve==="top")Ye.domain[1]-=At/he.h,tt[1]*=-1;else{Ye.domain[0]+=At/he.h;var nt=u.lineCount(it);tt[1]+=(1-nt)*Fe}Ge.attr("transform",t(tt[0],tt[1])),Ye.setScale()}}else He&&(ve==="right"&&(Ye.domain[0]+=(He+Pt/2)/he.w),Ge.attr("transform",t(tt[0],tt[1])),Ye.setScale())}C.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",j?t(0,Math.round(he.h*(1-Ye.domain[1]))):t(Math.round(he.w*Ye.domain[0]),0)),Ot.attr("transform",j?t(0,Math.round(-he.t)):t(Math.round(-he.l),0));var We=C.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(fe);We.enter().append("rect").classed(_.cbfill,!0).attr("style",""),We.exit().remove();var ct=ge.map(Ye.c2p).map(Math.round).sort(function(yt,Mt){return yt-Mt});We.each(function(yt,Mt){var Lt=[Mt===0?ge[0]:(fe[Mt]+fe[Mt-1])/2,Mt===fe.length-1?ge[1]:(fe[Mt]+fe[Mt+1])/2].map(Ye.c2p).map(Math.round);j&&(Lt[1]=s.constrain(Lt[1]+(Lt[1]>Lt[0])?1:-1,ct[0],ct[1]));var Ct=M.select(this).attr(j?"x":"y",me).attr(j?"y":"x",M.min(Lt)).attr(j?"width":"height",Math.max(Te,2)).attr(j?"height":"width",Math.max(M.max(Lt)-M.min(Lt),2));if(P._fillgradient)r.gradient(Ct,R,P._id,j?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var It=_e(yt).replace("e-","");Ct.attr("fill",k(It).toHexString())}});var pt=C.select("."+_.cblines).selectAll("path."+_.cbline).data(xe.color&&xe.width?Ee:[]);pt.enter().append("path").classed(_.cbline,!0),pt.exit().remove(),pt.each(function(yt){var Mt=me,Lt=Math.round(Ye.c2p(yt))+xe.width/2%1;M.select(this).attr("d","M"+(j?Mt+","+Lt:Lt+","+Mt)+(j?"h":"v")+Te).call(r.lineGroupStyle,xe.width,we(yt),xe.dash)}),Ot.selectAll("g."+Ye._id+"tick,path").remove();var gt=me+Te+(V||0)/2-(P.ticks==="outside"?1:0),ut=b.calcTicks(Ye),kt=b.getTickSigns(Ye)[2];return b.drawTicks(R,Ye,{vals:Ye.ticks==="inside"?b.clipEnds(Ye,ut):ut,layer:Ot,path:b.makeTickPath(Ye,gt,kt),transFn:b.makeTransTickFn(Ye)}),b.drawLabels(R,Ye,{vals:ut,layer:Ot,transFn:b.makeTransTickLabelFn(Ye),labelFns:b.makeLabelFns(Ye,gt)})},function(){if(j&&!at||!j&&at){var Be,Ge,it=Ye.position||0,tt=Ye._offset+Ye._length/2;if(ve==="right")Ge=tt,Be=he.l+De*it+10+Pt*(Ye.showticklabels?1:.5);else if(Be=tt,ve==="bottom"&&(Ge=he.t+de*it+10+(wt.indexOf("inside")===-1?Ye.tickfont.size:0)+(Ye.ticks!=="intside"&&P.ticklen||0)),ve==="top"){var Re=be.text.split("<br>").length;Ge=he.t+de*it+10-Te-v*Pt*Re}Ze((j?"h":"v")+Ye._id+"title",{avoid:{selection:M.select(R).selectAll("g."+Ye._id+"tick"),side:ve,offsetTop:j?0:he.t,offsetLeft:j?he.l:0,maxShift:j?ce.width:ce.height},attributes:{x:Be,y:Ge,"text-anchor":"middle"},transform:{rotate:j?-90:0,offset:0}})}},o.previousPromises,function(){var Be,Ge=Te+V/2;wt.indexOf("inside")===-1&&(Be=r.bBox(Ot.node()),Ge+=j?Be.width:Be.height),et=$e.select("text");var it=0,tt=j&&ve==="top",Re=!j&&ve==="right",Fe=0;if(et.node()&&!et.classed(_.jsPlaceholder)){var nt,We=$e.select(".h"+Ye._id+"title-math-group").node();We&&(j&&at||!j&&!at)?(it=(Be=r.bBox(We)).width,nt=Be.height):(it=(Be=r.bBox($e.node())).right-he.l-(j?me:Ve),nt=Be.bottom-he.t-(j?Ve:me),j||ve!=="top"||(Ge+=Be.height,Fe=Be.height)),Re&&(et.attr("transform",t(it/2+Pt/2,0)),it*=2),Ge=Math.max(Ge,j?it:nt)}var ct=2*(j?K:Q)+Ge+U+V/2,pt=0;!j&&be.text&&X==="bottom"&&re<=0&&(ct+=pt=ct/2,Fe+=pt),ce._hColorbarMoveTitle=pt,ce._hColorbarMoveCBTitle=Fe;var gt=U+V,ut=(j?me:Ve)-gt/2-(j?K:0),kt=(j?Ve:me)-(j?Se:Q+Fe-pt);C.select("."+_.cbbg).attr("x",ut).attr("y",kt).attr(j?"width":"height",Math.max(ct-pt,2)).attr(j?"height":"width",Math.max(Se+gt,2)).call(i.fill,te).call(i.stroke,P.bordercolor).style("stroke-width",U);var yt=Re?Math.max(it-10,0):0;C.selectAll("."+_.cboutline).attr("x",(j?me:Ve+K)+yt).attr("y",(j?Ve+Q-Se:me)+(tt?At:0)).attr(j?"width":"height",Math.max(Te,2)).attr(j?"height":"width",Math.max(Se-(j?2*Q+At:2*K+yt),2)).call(i.stroke,P.outlinecolor).style({fill:"none","stroke-width":V});var Mt=j?Me*ct:0,Lt=j?0:(1-ze)*ct-Fe;if(Mt=ae?he.l-Mt:-Mt,Lt=oe?he.t-Lt:-Lt,C.attr("transform",t(Mt,Lt)),!j&&(U||k(te).getAlpha()&&!k.equals(ce.paper_bgcolor,te))){var Ct=Ot.selectAll("text"),It=Ct[0].length,Wt=C.select("."+_.cbbg).node(),Nt=r.bBox(Wt),Bt=r.getTranslate(C);Ct.each(function(mn,xn){var Pn=It-1;if(xn===0||xn===Pn){var Mn,_n=r.bBox(this),Rn=r.getTranslate(this);if(xn===Pn){var In=_n.right+Rn.x;(Mn=Nt.right+Bt.x+Ve-U-2+Z-In)>0&&(Mn=0)}else if(xn===0){var Vn=_n.left+Rn.x;(Mn=Nt.left+Bt.x+Ve+U+2-Vn)<0&&(Mn=0)}Mn&&(It<3?this.setAttribute("transform","translate("+Mn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ht={},Qt=y[J],Cn=m[J],Tn=y[X],hn=m[X],Zt=ct-Te;j?(N==="pixels"?(Ht.y=re,Ht.t=Se*Tn,Ht.b=Se*hn):(Ht.t=Ht.b=0,Ht.yt=re+D*Tn,Ht.yb=re-D*hn),F==="pixels"?(Ht.x=Z,Ht.l=ct*Qt,Ht.r=ct*Cn):(Ht.l=Zt*Qt,Ht.r=Zt*Cn,Ht.xl=Z-W*Qt,Ht.xr=Z+W*Cn)):(N==="pixels"?(Ht.x=Z,Ht.l=Se*Qt,Ht.r=Se*Cn):(Ht.l=Ht.r=0,Ht.xl=Z+D*Qt,Ht.xr=Z-D*Cn),F==="pixels"?(Ht.y=1-re,Ht.t=ct*Tn,Ht.b=ct*hn):(Ht.t=Zt*Tn,Ht.b=Zt*hn,Ht.yt=re-W*Tn,Ht.yb=re+W*hn));var an=P.y<.5?"b":"t",$t=P.x<.5?"l":"r";R._fullLayout._reservedMargin[P._id]={};var ln={r:ce.width-ut-Mt,l:ut+Ht.r,b:ce.height-kt-Lt,t:kt+Ht.b};ae&&oe?o.autoMargin(R,P._id,Ht):ae?R._fullLayout._reservedMargin[P._id][an]=ln[an]:oe||j?R._fullLayout._reservedMargin[P._id][$t]=ln[$t]:R._fullLayout._reservedMargin[P._id][an]=ln[an]}],R)}(E,w,f);O&&O.then&&(f._promises||[]).push(O),f._context.edits.colorbarPosition&&function(C,P,R){var j,D,N,W=P.orientation==="v",F=R._fullLayout._size;h.init({element:C.node(),gd:R,prepFn:function(){j=C.attr("transform"),n(C)},moveFn:function(V,U){C.attr("transform",j+t(V,U)),D=h.align((W?P._uFrac:P._vFrac)+V/F.w,W?P._thickFrac:P._lenFrac,0,1,P.xanchor),N=h.align((W?P._vFrac:1-P._uFrac)-U/F.h,W?P._lenFrac:P._thickFrac,0,1,P.yanchor);var te=h.getCursor(D,N,P.xanchor,P.yanchor);n(C,te)},doneFn:function(){if(n(C),D!==void 0&&N!==void 0){var V={};V[P._propPrefix+"x"]=D,V[P._propPrefix+"y"]=N,P._traceIndex!==void 0?T.call("_guiRestyle",R,V,P._traceIndex):T.call("_guiRelayout",R,V)}}})}(E,w,f)}),S.exit().each(function(w){o.autoMargin(f,w._id)}).remove(),S.order()}}},90553:function(ee,z,e){var M=e(3400);ee.exports=function(k){return M.isPlainObject(k.colorbar)}},55080:function(ee,z,e){ee.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(ee,z,e){var M=e(42996),k=e(53756).counter,o=e(95376),T=e(88304).scales;function b(h){return"`"+h+"`"}o(T),ee.exports=function(h,s){h=h||"";var t,a=(s=s||{}).cLetter||"c",n=("onlyIfNumerical"in s&&s.onlyIfNumerical,"noScale"in s?s.noScale:h==="marker.line"),r="showScaleDflt"in s?s.showScaleDflt:a==="z",i=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,l=s.editTypeOverride||"",u=h?h+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):b(u+(t={z:"z",c:"color"}[a]));var p=a+"auto",c=a+"min",x=a+"max",d=a+"mid",g={};g[c]=g[x]=void 0;var v={};v[p]=!1;var y={};return t==="color"&&(y.color={valType:"color",arrayOk:!0,editType:l||"style"},s.anim&&(y.color.anim=!0)),y[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},y[c]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v},y[x]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v},y[d]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},y.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},y.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},y.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(y.showscale={valType:"boolean",dflt:r,editType:"calc"},y.colorbar=M),s.noColorAxis||(y.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),y}},47128:function(ee,z,e){var M=e(38248),k=e(3400),o=e(94288).extractOpts;ee.exports=function(T,b,h){var s,t=T._fullLayout,a=h.vals,n=h.containerStr,r=n?k.nestedProperty(b,n).get():b,i=o(r),l=i.auto!==!1,u=i.min,p=i.max,c=i.mid,x=function(){return k.aggNums(Math.min,null,a)},d=function(){return k.aggNums(Math.max,null,a)};u===void 0?u=x():l&&(u=r._colorAx&&M(u)?Math.min(u,x()):x()),p===void 0?p=d():l&&(p=r._colorAx&&M(p)?Math.max(p,d()):d()),l&&c!==void 0&&(p-c>c-u?u=c-(p-c):p-c<c-u&&(p=c+(c-u))),u===p&&(u-=.5,p+=.5),i._sync("min",u),i._sync("max",p),i.autocolorscale&&(s=u*p<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,i._sync("colorscale",s))}},95504:function(ee,z,e){var M=e(3400),k=e(94288).hasColorscale,o=e(94288).extractOpts;ee.exports=function(T,b){function h(l,u){var p=l["_"+u];p!==void 0&&(l[u]=p)}function s(l,u){var p=u.container?M.nestedProperty(l,u.container).get():l;if(p)if(p.coloraxis)p._colorAx=b[p.coloraxis];else{var c=o(p),x=c.auto;(x||c.min===void 0)&&h(p,u.min),(x||c.max===void 0)&&h(p,u.max),c.autocolorscale&&h(p,"colorscale")}}for(var t=0;t<T.length;t++){var a=T[t],n=a._module.colorbar;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)s(a,n[r]);else s(a,n);k(a,"marker.line")&&s(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in b._colorAxes)s(b[i],{min:"cmin",max:"cmax"})}},27260:function(ee,z,e){var M=e(38248),k=e(3400),o=e(90553),T=e(64013),b=e(88304).isValid,h=e(24040).traceIs;function s(t,a){var n=a.slice(0,a.length-1);return a?k.nestedProperty(t,n).get()||{}:t}ee.exports=function t(a,n,r,i,l){var u=l.prefix,p=l.cLetter,c="_module"in n,x=s(a,u),d=s(n,u),g=s(n._template||{},u)||{},v=function(){return delete a.coloraxis,delete n.coloraxis,t(a,n,r,i,l)};if(c){var y=r._colorAxes||{},m=i(u+"coloraxis");if(m){var _=h(n,"contour")&&k.nestedProperty(n,"contours.coloring").get()||"heatmap",f=y[m];return void(f?(f[2].push(v),f[0]!==_&&(f[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[m]=[_,n,[v]])}}var S=x[p+"min"],w=x[p+"max"],E=M(S)&&M(w)&&S<w;i(u+p+"auto",!E)?i(u+p+"mid"):(i(u+p+"min"),i(u+p+"max"));var O,C,P=x.colorscale,R=g.colorscale;P!==void 0&&(O=!b(P)),R!==void 0&&(O=!b(R)),i(u+"autocolorscale",O),i(u+"colorscale"),i(u+"reversescale"),u!=="marker.line."&&(u&&c&&(C=o(x)),i(u+"showscale",C)&&(u&&g&&(d._template=g),T(x,d,r)))}},94288:function(ee,z,e){var M=e(33428),k=e(49760),o=e(38248),T=e(3400),b=e(76308),h=e(88304).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function a(u){var p,c,x,d=u._colorAx,g=d||u,v={};for(c=0;c<s.length;c++)v[x=s[c]]=g[x];if(d)for(p="c",c=0;c<t.length;c++)v[x=t[c]]=g["c"+x];else{var y;for(c=0;c<t.length;c++)((y="c"+(x=t[c]))in g||(y="z"+x)in g)&&(v[x]=g[y]);p=y.charAt(0)}return v._sync=function(m,_){var f=t.indexOf(m)!==-1?p+m:m;g[f]=g["_"+f]=_},v}function n(u){for(var p=a(u),c=p.min,x=p.max,d=p.reversescale?r(p.colorscale):p.colorscale,g=d.length,v=new Array(g),y=new Array(g),m=0;m<g;m++){var _=d[m];v[m]=c+_[0]*(x-c),y[m]=_[1]}return{domain:v,range:y}}function r(u){for(var p=u.length,c=new Array(p),x=p-1,d=0;x>=0;x--,d++){var g=u[x];c[d]=[1-g[0],g[1]]}return c}function i(u,p){p=p||{};for(var c=u.domain,x=u.range,d=x.length,g=new Array(d),v=0;v<d;v++){var y=k(x[v]).toRgb();g[v]=[y.r,y.g,y.b,y.a]}var m,_=M.scale.linear().domain(c).range(g).clamp(!0),f=p.noNumericCheck,S=p.returnArray;return(m=f&&S?_:f?function(w){return l(_(w))}:S?function(w){return o(w)?_(w):k(w).isValid()?w:b.defaultLine}:function(w){return o(w)?l(_(w)):k(w).isValid()?w:b.defaultLine}).domain=_.domain,m.range=function(){return x},m}function l(u){var p={r:u[0],g:u[1],b:u[2],a:u[3]};return k(p).toRgbString()}ee.exports={hasColorscale:function(u,p,c){var x=p?T.nestedProperty(u,p).get()||{}:u,d=x[c||"color"];d&&d._inputArray&&(d=d._inputArray);var g=!1;if(T.isArrayOrTypedArray(d)){for(var v=0;v<d.length;v++)if(o(d[v])){g=!0;break}}return T.isPlainObject(x)&&(g||x.showscale===!0||o(x.cmin)&&o(x.cmax)||h(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:a,extractScale:n,flipScale:r,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(u,p){return i(n(u),p)}}},8932:function(ee,z,e){var M=e(88304),k=e(94288);ee.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(ee,z,e){var M=e(92880).extendFlat,k=e(49084),o=e(88304).scales;ee.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(ee,z,e){var M=e(3400),k=e(31780),o=e(92332),T=e(27260);ee.exports=function(b,h){function s(p,c){return M.coerce(b,h,o,p,c)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,a,n=h._colorAxes;function r(p,c){return M.coerce(t,a,o.coloraxis,p,c)}for(var i in n){var l=n[i];if(l[0])t=b[i]||{},(a=k.newContainer(h,i,"coloraxis"))._name=i,T(t,a,h,r,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete h._colorAxes[i]}}}},88304:function(ee,z,e){var M=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=k.RdBu;function T(b){var h=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var s=0;s<b.length;s++){var t=b[s];if(t.length!==2||+t[0]<h||!M(t[1]).isValid())return!1;h=+t[0]}return!0}ee.exports={scales:k,defaultScale:o,get:function(b,h){if(h||(h=o),!b)return h;function s(){try{b=k[b]||JSON.parse(b)}catch{b=h}}return typeof b=="string"&&(s(),typeof b=="string"&&s()),T(b)?b:h},isValid:function(b){return k[b]!==void 0||T(b)}}},78316:function(ee){ee.exports=function(z,e,M,k,o){var T=(z-M)/(k-M),b=T+e/(k-M),h=(T+b)/2;return o==="left"||o==="bottom"?T:o==="center"||o==="middle"?h:o==="right"||o==="top"?b:T<.6666666666666666-h?T:b>1.3333333333333333-h?b:h}},67416:function(ee,z,e){var M=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ee.exports=function(o,T,b,h){return o=b==="left"?0:b==="center"?1:b==="right"?2:M.constrain(Math.floor(3*o),0,2),T=h==="bottom"?0:h==="middle"?1:h==="top"?2:M.constrain(Math.floor(3*T),0,2),k[T][o]}},72760:function(ee,z){z.selectMode=function(e){return e==="lasso"||e==="select"},z.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},z.openMode=function(e){return e==="drawline"||e==="drawopenpath"},z.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},z.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},z.selectingOrDrawing=function(e){return z.freeMode(e)||z.rectMode(e)}},86476:function(ee,z,e){var M=e(29128),k=e(52264),o=e(89184),T=e(3400).removeElement,b=e(33816),h=ee.exports={};h.align=e(78316),h.getCursor=e(67416);var s=e(2616);function t(){var n=document.createElement("div");n.className="dragcover";var r=n.style;return r.position="fixed",r.left=0,r.right=0,r.top=0,r.bottom=0,r.zIndex=999999999,r.background="none",document.body.appendChild(n),n}function a(n){return M(n.changedTouches?n.changedTouches[0]:n,document.body)}h.unhover=s.wrapped,h.unhoverRaw=s.raw,h.init=function(n){var r,i,l,u,p,c,x,d,g=n.gd,v=1,y=g._context.doubleClickDelay,m=n.element;g._mouseDownTime||(g._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=f,o?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=f,m.addEventListener("touchstart",f,{passive:!1})):m.ontouchstart=f;var _=n.clampFn||function(E,O,C){return Math.abs(E)<C&&(E=0),Math.abs(O)<C&&(O=0),[E,O]};function f(E){g._dragged=!1,g._dragging=!0;var O=a(E);r=O[0],i=O[1],x=E.target,c=E,d=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=r,E.clientY=i),(l=new Date().getTime())-g._mouseDownTime<y?v+=1:(v=1,g._mouseDownTime=l),n.prepFn&&n.prepFn(E,r,i),k&&!d?(p=t()).style.cursor=window.getComputedStyle(m).cursor:k||(p=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),n.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var O=a(E),C=n.minDrag||b.MINDRAG,P=_(O[0]-r,O[1]-i,C),R=P[0],j=P[1];(R||j)&&(g._dragged=!0,h.unhover(g,E)),g._dragged&&n.moveFn&&!d&&(g._dragdata={element:m,dx:R,dy:j},n.moveFn(R,j))}function w(E){if(delete g._dragdata,n.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(p):u&&(p.documentElement.style.cursor=u,u=null),g._dragging){if(g._dragging=!1,new Date().getTime()-g._mouseDownTime>y&&(v=Math.max(v-1,1)),g._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(v,c),!d){var O;try{O=new MouseEvent("click",E)}catch{var C=a(E);(O=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(O)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},h.coverSlip=t},2616:function(ee,z,e){var M=e(95924),k=e(91200),o=e(52200).getGraphDiv,T=e(92456),b=ee.exports={};b.wrapped=function(h,s,t){(h=o(h))._fullLayout&&k.clear(h._fullLayout._uid+T.HOVERID),b.raw(h,s,t)},b.raw=function(h,s){var t=h._fullLayout,a=h._hoverdata;s||(s={}),s.target&&!h._dragged&&M.triggerHandler(h,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),h._hoverdata=void 0,s.target&&a&&h.emit("plotly_unhover",{event:s,points:a}))}},98192:function(ee,z){z.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},z.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(ee,z,e){var M=e(33428),k=e(3400),o=k.numberFormat,T=e(38248),b=e(49760),h=e(24040),s=e(76308),t=e(8932),a=k.strTranslate,n=e(72736),r=e(9616),i=e(84284).LINE_SPACING,l=e(13448).DESELECTDIM,u=e(43028),p=e(7152),c=e(10624).appendArrayPointValue,x=ee.exports={};function d(ge,we,_e,se){var ie=we.fillpattern,fe=we.fillgradient,Ee=ie&&x.getPatternAttr(ie.shape,0,"");if(Ee){var Te=x.getPatternAttr(ie.bgcolor,0,null),Ae=x.getPatternAttr(ie.fgcolor,0,null),Se=ie.fgopacity,Oe=x.getPatternAttr(ie.size,0,8),De=x.getPatternAttr(ie.solidity,0,.3),de=we.uid;x.pattern(ge,"point",_e,de,Ee,Oe,De,void 0,ie.fillmode,Te,Ae,Se)}else if(fe&&fe.type!=="none"){var me,Me,ze=fe.type,Pe="scatterfill-"+we.uid;se&&(Pe="legendfill-"+we.uid),se||fe.start===void 0&&fe.stop===void 0?(ze==="horizontal"&&(ze+="reversed"),ge.call(x.gradient,_e,Pe,ze,fe.colorscale,"fill")):(ze==="horizontal"?(me={x:fe.start,y:0},Me={x:fe.stop,y:0}):ze==="vertical"&&(me={x:0,y:fe.start},Me={x:0,y:fe.stop}),me.x=we._xA.c2p(me.x===void 0?we._extremes.x.min[0].val:me.x,!0),me.y=we._yA.c2p(me.y===void 0?we._extremes.y.min[0].val:me.y,!0),Me.x=we._xA.c2p(Me.x===void 0?we._extremes.x.max[0].val:Me.x,!0),Me.y=we._yA.c2p(Me.y===void 0?we._extremes.y.max[0].val:Me.y,!0),ge.call(f,_e,Pe,"linear",fe.colorscale,"fill",me,Me,!0,!1))}else we.fillcolor&&ge.call(s.fill,we.fillcolor)}x.font=function(ge,we,_e,se,ie,fe,Ee){k.isPlainObject(we)&&(Ee=we.variant,fe=we.style,ie=we.weight,se=we.color,_e=we.size,we=we.family),we&&ge.style("font-family",we),_e+1&&ge.style("font-size",_e+"px"),se&&ge.call(s.fill,se),ie&&ge.style("font-weight",ie),fe&&ge.style("font-style",fe),Ee&&ge.style("font-variant",Ee)},x.setPosition=function(ge,we,_e){ge.attr("x",we).attr("y",_e)},x.setSize=function(ge,we,_e){ge.attr("width",we).attr("height",_e)},x.setRect=function(ge,we,_e,se,ie){ge.call(x.setPosition,we,_e).call(x.setSize,se,ie)},x.translatePoint=function(ge,we,_e,se){var ie=_e.c2p(ge.x),fe=se.c2p(ge.y);return!!(T(ie)&&T(fe)&&we.node())&&(we.node().nodeName==="text"?we.attr("x",ie).attr("y",fe):we.attr("transform",a(ie,fe)),!0)},x.translatePoints=function(ge,we,_e){ge.each(function(se){var ie=M.select(this);x.translatePoint(se,ie,we,_e)})},x.hideOutsideRangePoint=function(ge,we,_e,se,ie,fe){we.attr("display",_e.isPtWithinRange(ge,ie)&&se.isPtWithinRange(ge,fe)?null:"none")},x.hideOutsideRangePoints=function(ge,we){if(we._hasClipOnAxisFalse){var _e=we.xaxis,se=we.yaxis;ge.each(function(ie){var fe=ie[0].trace,Ee=fe.xcalendar,Te=fe.ycalendar,Ae=h.traceIs(fe,"bar-like")?".bartext":".point,.textpoint";ge.selectAll(Ae).each(function(Se){x.hideOutsideRangePoint(Se,M.select(this),_e,se,Ee,Te)})})}},x.crispRound=function(ge,we,_e){return we&&T(we)?ge._context.staticPlot?we:we<1?1:Math.round(we):_e||0},x.singleLineStyle=function(ge,we,_e,se,ie){we.style("fill","none");var fe=(((ge||[])[0]||{}).trace||{}).line||{},Ee=_e||fe.width||0,Te=ie||fe.dash||"";s.stroke(we,se||fe.color),x.dashLine(we,Te,Ee)},x.lineGroupStyle=function(ge,we,_e,se){ge.style("fill","none").each(function(ie){var fe=(((ie||[])[0]||{}).trace||{}).line||{},Ee=we||fe.width||0,Te=se||fe.dash||"";M.select(this).call(s.stroke,_e||fe.color).call(x.dashLine,Te,Ee)})},x.dashLine=function(ge,we,_e){_e=+_e||0,we=x.dashStyle(we,_e),ge.style({"stroke-dasharray":we,"stroke-width":_e+"px"})},x.dashStyle=function(ge,we){we=+we||1;var _e=Math.max(we,3);return ge==="solid"?ge="":ge==="dot"?ge=_e+"px,"+_e+"px":ge==="dash"?ge=3*_e+"px,"+3*_e+"px":ge==="longdash"?ge=5*_e+"px,"+5*_e+"px":ge==="dashdot"?ge=3*_e+"px,"+_e+"px,"+_e+"px,"+_e+"px":ge==="longdashdot"&&(ge=5*_e+"px,"+2*_e+"px,"+_e+"px,"+2*_e+"px"),ge},x.singleFillStyle=function(ge,we){var _e=M.select(ge.node());d(ge,((_e.data()[0]||[])[0]||{}).trace||{},we,!1)},x.fillGroupStyle=function(ge,we,_e){ge.style("stroke-width",0).each(function(se){var ie=M.select(this);se[0].trace&&d(ie,se[0].trace,we,_e)})};var g=e(71984);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(g).forEach(function(ge){var we=g[ge],_e=we.n;x.symbolList.push(_e,String(_e),ge,_e+100,String(_e+100),ge+"-open"),x.symbolNames[_e]=ge,x.symbolFuncs[_e]=we.f,x.symbolBackOffs[_e]=we.backoff||0,we.needLine&&(x.symbolNeedLines[_e]=!0),we.noDot?x.symbolNoDot[_e]=!0:x.symbolList.push(_e+200,String(_e+200),ge+"-dot",_e+300,String(_e+300),ge+"-open-dot"),we.noFill&&(x.symbolNoFill[_e]=!0)});var v=x.symbolNames.length;function y(ge,we,_e,se){var ie=ge%100;return x.symbolFuncs[ie](we,_e,se)+(ge>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(ge){if(T(ge))ge=+ge;else if(typeof ge=="string"){var we=0;ge.indexOf("-open")>0&&(we=100,ge=ge.replace("-open","")),ge.indexOf("-dot")>0&&(we+=200,ge=ge.replace("-dot","")),(ge=x.symbolNames.indexOf(ge))>=0&&(ge+=we)}return ge%100>=v||ge>=400?0:Math.floor(Math.max(ge,0))};var m=o("~f"),_={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function f(ge,we,_e,se,ie,fe,Ee,Te,Ae,Se){var Oe,De=ie.length;se==="linear"?Oe={node:"linearGradient",attrs:{x1:Ee.x,y1:Ee.y,x2:Te.x,y2:Te.y,gradientUnits:Ae?"userSpaceOnUse":"objectBoundingBox"},reversed:Se}:se==="radial"&&(Oe={node:"radialGradient",reversed:Se});for(var de=new Array(De),me=0;me<De;me++)Oe.reversed?de[De-1-me]=[m(100*(1-ie[me][0])),ie[me][1]]:de[me]=[m(100*ie[me][0]),ie[me][1]];var Me=we._fullLayout,ze="g"+Me._uid+"-"+_e,Pe=Me._defs.select(".gradients").selectAll("#"+ze).data([se+de.join(";")],k.identity);Pe.exit().remove(),Pe.enter().append(Oe.node).each(function(){var Ne=M.select(this);Oe.attrs&&Ne.attr(Oe.attrs),Ne.attr("id",ze);var Ve=Ne.selectAll("stop").data(de);Ve.exit().remove(),Ve.enter().append("stop"),Ve.each(function(Ye){var at=b(Ye[1]);M.select(this).attr({offset:Ye[0]+"%","stop-color":s.tinyRGB(at),"stop-opacity":at.getAlpha()})})}),ge.style(fe,te(ze,we)).style(fe+"-opacity",null),ge.classed("gradient_filled",!0)}x.gradient=function(ge,we,_e,se,ie,fe){var Ee=_[se];return f(ge,we,_e,Ee.type,ie,fe,Ee.start,Ee.stop,!1,Ee.reversed)},x.pattern=function(ge,we,_e,se,ie,fe,Ee,Te,Ae,Se,Oe,De){var de=we==="legend";Te&&(Ae==="overlay"?(Se=Te,Oe=s.contrast(Se)):(Se=void 0,Oe=Te));var me,Me,ze,Pe,Ne,Ve,Ye,at,rt,dt=_e._fullLayout,vt="p"+dt._uid+"-"+se,ht={},et=b(Oe),$e=s.tinyRGB(et),wt=De*et.getAlpha();switch(ie){case"/":me=fe*Math.sqrt(2),Me=fe*Math.sqrt(2),Ve="path",ht={d:ze="M-"+me/4+","+Me/4+"l"+me/2+",-"+Me/2+"M0,"+Me+"L"+me+",0M"+me/4*3+","+Me/4*5+"l"+me/2+",-"+Me/2,opacity:wt,stroke:$e,"stroke-width":(Pe=Ee*fe)+"px"};break;case"\\":me=fe*Math.sqrt(2),Me=fe*Math.sqrt(2),Ve="path",ht={d:ze="M"+me/4*3+",-"+Me/4+"l"+me/2+","+Me/2+"M0,0L"+me+","+Me+"M-"+me/4+","+Me/4*3+"l"+me/2+","+Me/2,opacity:wt,stroke:$e,"stroke-width":(Pe=Ee*fe)+"px"};break;case"x":me=fe*Math.sqrt(2),Me=fe*Math.sqrt(2),ze="M-"+me/4+","+Me/4+"l"+me/2+",-"+Me/2+"M0,"+Me+"L"+me+",0M"+me/4*3+","+Me/4*5+"l"+me/2+",-"+Me/2+"M"+me/4*3+",-"+Me/4+"l"+me/2+","+Me/2+"M0,0L"+me+","+Me+"M-"+me/4+","+Me/4*3+"l"+me/2+","+Me/2,Pe=fe-fe*Math.sqrt(1-Ee),Ve="path",ht={d:ze,opacity:wt,stroke:$e,"stroke-width":Pe+"px"};break;case"|":Ve="path",Ve="path",ht={d:ze="M"+(me=fe)/2+",0L"+me/2+","+(Me=fe),opacity:wt,stroke:$e,"stroke-width":(Pe=Ee*fe)+"px"};break;case"-":Ve="path",Ve="path",ht={d:ze="M0,"+(Me=fe)/2+"L"+(me=fe)+","+Me/2,opacity:wt,stroke:$e,"stroke-width":(Pe=Ee*fe)+"px"};break;case"+":Ve="path",ze="M"+(me=fe)/2+",0L"+me/2+","+(Me=fe)+"M0,"+Me/2+"L"+me+","+Me/2,Pe=fe-fe*Math.sqrt(1-Ee),Ve="path",ht={d:ze,opacity:wt,stroke:$e,"stroke-width":Pe+"px"};break;case".":me=fe,Me=fe,Ee<Math.PI/4?Ne=Math.sqrt(Ee*fe*fe/Math.PI):(Ye=Ee,at=Math.PI/4,Ne=(rt=fe/2)+(fe/Math.sqrt(2)-rt)*(Ye-at)/(1-at)),Ve="circle",ht={cx:me/2,cy:Me/2,r:Ne,opacity:wt,fill:$e}}var Pt=[ie||"noSh",Se||"noBg",Oe||"noFg",fe,Ee].join(";"),Ot=dt._defs.select(".patterns").selectAll("#"+vt).data([Pt],k.identity);Ot.exit().remove(),Ot.enter().append("pattern").each(function(){var At=M.select(this);if(At.attr({id:vt,width:me+"px",height:Me+"px",patternUnits:"userSpaceOnUse",patternTransform:de?"scale(0.8)":""}),Se){var He=b(Se),Ze=s.tinyRGB(He),Be=He.getAlpha(),Ge=At.selectAll("rect").data([0]);Ge.exit().remove(),Ge.enter().append("rect").attr({width:me+"px",height:Me+"px",fill:Ze,"fill-opacity":Be})}var it=At.selectAll(Ve).data([0]);it.exit().remove(),it.enter().append(Ve).attr(ht)}),ge.style("fill",te(vt,_e)).style("fill-opacity",null),ge.classed("pattern_filled",!0)},x.initGradients=function(ge){var we=ge._fullLayout;k.ensureSingle(we._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(ge).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(ge){var we=ge._fullLayout;k.ensureSingle(we._defs,"g","patterns").selectAll("pattern").remove(),M.select(ge).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(ge,we,_e){return ge&&k.isArrayOrTypedArray(ge)?we<ge.length?ge[we]:_e:ge},x.pointStyle=function(ge,we,_e,se){if(ge.size()){var ie=x.makePointStyleFns(we);ge.each(function(fe){x.singlePointStyle(fe,M.select(this),we,ie,_e,se)})}},x.singlePointStyle=function(ge,we,_e,se,ie,fe){var Ee=_e.marker,Te=Ee.line;if(fe&&fe.i>=0&&ge.i===void 0&&(ge.i=fe.i),we.style("opacity",se.selectedOpacityFn?se.selectedOpacityFn(ge):ge.mo===void 0?Ee.opacity:ge.mo),se.ms2mrc){var Ae;Ae=ge.ms==="various"||Ee.size==="various"?3:se.ms2mrc(ge.ms),ge.mrc=Ae,se.selectedSizeFn&&(Ae=ge.mrc=se.selectedSizeFn(ge));var Se=x.symbolNumber(ge.mx||Ee.symbol)||0;ge.om=Se%200>=100;var Oe=ve(ge,_e),De=K(ge,_e);we.attr("d",y(Se,Ae,Oe,De))}var de,me,Me,ze=!1;if(ge.so)Me=Te.outlierwidth,me=Te.outliercolor,de=Ee.outliercolor;else{var Pe=(Te||{}).width;Me=(ge.mlw+1||Pe+1||(ge.trace?(ge.trace.marker.line||{}).width:0)+1)-1||0,me="mlc"in ge?ge.mlcc=se.lineScale(ge.mlc):k.isArrayOrTypedArray(Te.color)?s.defaultLine:Te.color,k.isArrayOrTypedArray(Ee.color)&&(de=s.defaultLine,ze=!0),de="mc"in ge?ge.mcc=se.markerScale(ge.mc):Ee.color||Ee.colors||"rgba(0,0,0,0)",se.selectedColorFn&&(de=se.selectedColorFn(ge))}if(ge.om)we.call(s.stroke,de).style({"stroke-width":(Me||1)+"px",fill:"none"});else{we.style("stroke-width",(ge.isBlank?0:Me)+"px");var Ne=Ee.gradient,Ve=ge.mgt;Ve?ze=!0:Ve=Ne&&Ne.type,k.isArrayOrTypedArray(Ve)&&(Ve=Ve[0],_[Ve]||(Ve=0));var Ye=Ee.pattern,at=Ye&&x.getPatternAttr(Ye.shape,ge.i,"");if(Ve&&Ve!=="none"){var rt=ge.mgc;rt?ze=!0:rt=Ne.color;var dt=_e.uid;ze&&(dt+="-"+ge.i),x.gradient(we,ie,dt,Ve,[[0,rt],[1,de]],"fill")}else if(at){var vt=!1,ht=Ye.fgcolor;!ht&&fe&&fe.color&&(ht=fe.color,vt=!0);var et=x.getPatternAttr(ht,ge.i,fe&&fe.color||null),$e=x.getPatternAttr(Ye.bgcolor,ge.i,null),wt=Ye.fgopacity,Pt=x.getPatternAttr(Ye.size,ge.i,8),Ot=x.getPatternAttr(Ye.solidity,ge.i,.3);vt=vt||ge.mcc||k.isArrayOrTypedArray(Ye.shape)||k.isArrayOrTypedArray(Ye.bgcolor)||k.isArrayOrTypedArray(Ye.fgcolor)||k.isArrayOrTypedArray(Ye.size)||k.isArrayOrTypedArray(Ye.solidity);var At=_e.uid;vt&&(At+="-"+ge.i),x.pattern(we,"point",ie,At,at,Pt,Ot,ge.mcc,Ye.fillmode,$e,et,wt)}else k.isArrayOrTypedArray(de)?s.fill(we,de[ge.i]):s.fill(we,de);Me&&s.stroke(we,me)}},x.makePointStyleFns=function(ge){var we={},_e=ge.marker;return we.markerScale=x.tryColorscale(_e,""),we.lineScale=x.tryColorscale(_e,"line"),h.traceIs(ge,"symbols")&&(we.ms2mrc=u.isBubble(ge)?p(ge):function(){return(_e.size||6)/2}),ge.selectedpoints&&k.extendFlat(we,x.makeSelectedPointStyleFns(ge)),we},x.makeSelectedPointStyleFns=function(ge){var we={},_e=ge.selected||{},se=ge.unselected||{},ie=ge.marker||{},fe=_e.marker||{},Ee=se.marker||{},Te=ie.opacity,Ae=fe.opacity,Se=Ee.opacity,Oe=Ae!==void 0,De=Se!==void 0;(k.isArrayOrTypedArray(Te)||Oe||De)&&(we.selectedOpacityFn=function(at){var rt=at.mo===void 0?ie.opacity:at.mo;return at.selected?Oe?Ae:rt:De?Se:l*rt});var de=ie.color,me=fe.color,Me=Ee.color;(me||Me)&&(we.selectedColorFn=function(at){var rt=at.mcc||de;return at.selected?me||rt:Me||rt});var ze=ie.size,Pe=fe.size,Ne=Ee.size,Ve=Pe!==void 0,Ye=Ne!==void 0;return h.traceIs(ge,"symbols")&&(Ve||Ye)&&(we.selectedSizeFn=function(at){var rt=at.mrc||ze/2;return at.selected?Ve?Pe/2:rt:Ye?Ne/2:rt}),we},x.makeSelectedTextStyleFns=function(ge){var we={},_e=ge.selected||{},se=ge.unselected||{},ie=ge.textfont||{},fe=_e.textfont||{},Ee=se.textfont||{},Te=ie.color,Ae=fe.color,Se=Ee.color;return we.selectedTextColorFn=function(Oe){var De=Oe.tc||Te;return Oe.selected?Ae||De:Se||(Ae?De:s.addOpacity(De,l))},we},x.selectedPointStyle=function(ge,we){if(ge.size()&&we.selectedpoints){var _e=x.makeSelectedPointStyleFns(we),se=we.marker||{},ie=[];_e.selectedOpacityFn&&ie.push(function(fe,Ee){fe.style("opacity",_e.selectedOpacityFn(Ee))}),_e.selectedColorFn&&ie.push(function(fe,Ee){s.fill(fe,_e.selectedColorFn(Ee))}),_e.selectedSizeFn&&ie.push(function(fe,Ee){var Te=Ee.mx||se.symbol||0,Ae=_e.selectedSizeFn(Ee);fe.attr("d",y(x.symbolNumber(Te),Ae,ve(Ee,we),K(Ee,we))),Ee.mrc2=Ae}),ie.length&&ge.each(function(fe){for(var Ee=M.select(this),Te=0;Te<ie.length;Te++)ie[Te](Ee,fe)})}},x.tryColorscale=function(ge,we){var _e=we?k.nestedProperty(ge,we).get():ge;if(_e){var se=_e.color;if((_e.colorscale||_e._colorAx)&&k.isArrayOrTypedArray(se))return t.makeColorScaleFuncFromTrace(_e)}return k.identity};var S,w,E={start:1,end:-1,middle:0,bottom:1,top:-1};function O(ge,we,_e,se,ie){var fe=M.select(ge.node().parentNode),Ee=we.indexOf("top")!==-1?"top":we.indexOf("bottom")!==-1?"bottom":"middle",Te=we.indexOf("left")!==-1?"end":we.indexOf("right")!==-1?"start":"middle",Ae=se?se/.8+1:0,Se=(n.lineCount(ge)-1)*i+1,Oe=E[Te]*Ae,De=.75*_e+E[Ee]*Ae+(E[Ee]-1)*Se*_e/2;ge.attr("text-anchor",Te),ie||fe.attr("transform",a(Oe,De))}function C(ge,we){var _e=ge.ts||we.textfont.size;return T(_e)&&_e>0?_e:0}function P(ge,we,_e){return _e&&(ge=F(ge)),we?j(ge[1]):R(ge[0])}function R(ge){var we=M.round(ge,2);return S=we,we}function j(ge){var we=M.round(ge,2);return w=we,we}function D(ge,we,_e,se){var ie=ge[0]-we[0],fe=ge[1]-we[1],Ee=_e[0]-we[0],Te=_e[1]-we[1],Ae=Math.pow(ie*ie+fe*fe,.25),Se=Math.pow(Ee*Ee+Te*Te,.25),Oe=(Se*Se*ie-Ae*Ae*Ee)*se,De=(Se*Se*fe-Ae*Ae*Te)*se,de=3*Se*(Ae+Se),me=3*Ae*(Ae+Se);return[[R(we[0]+(de&&Oe/de)),j(we[1]+(de&&De/de))],[R(we[0]-(me&&Oe/me)),j(we[1]-(me&&De/me))]]}x.textPointStyle=function(ge,we,_e){if(ge.size()){var se;if(we.selectedpoints){var ie=x.makeSelectedTextStyleFns(we);se=ie.selectedTextColorFn}var fe=we.texttemplate,Ee=_e._fullLayout;ge.each(function(Te){var Ae=M.select(this),Se=fe?k.extractOption(Te,we,"txt","texttemplate"):k.extractOption(Te,we,"tx","text");if(Se||Se===0){if(fe){var Oe=we._module.formatLabels,De=Oe?Oe(Te,we,Ee):{},de={};c(de,we,Te.i);var me=we._meta||{};Se=k.texttemplateString(Se,De,Ee._d3locale,de,Te,me)}var Me=Te.tp||we.textposition,ze=C(Te,we),Pe=se?se(Te):Te.tc||we.textfont.color;Ae.call(x.font,{family:Te.tf||we.textfont.family,weight:Te.tw||we.textfont.weight,style:Te.ty||we.textfont.style,variant:Te.tv||we.textfont.variant,size:ze,color:Pe}).text(Se).call(n.convertToTspans,_e).call(O,Me,ze,Te.mrc)}else Ae.remove()})}},x.selectedTextStyle=function(ge,we){if(ge.size()&&we.selectedpoints){var _e=x.makeSelectedTextStyleFns(we);ge.each(function(se){var ie=M.select(this),fe=_e.selectedTextColorFn(se),Ee=se.tp||we.textposition,Te=C(se,we);s.fill(ie,fe);var Ae=h.traceIs(we,"bar-like");O(ie,Ee,Te,se.mrc2||se.mrc,Ae)})}},x.smoothopen=function(ge,we){if(ge.length<3)return"M"+ge.join("L");var _e,se="M"+ge[0],ie=[];for(_e=1;_e<ge.length-1;_e++)ie.push(D(ge[_e-1],ge[_e],ge[_e+1],we));for(se+="Q"+ie[0][0]+" "+ge[1],_e=2;_e<ge.length-1;_e++)se+="C"+ie[_e-2][1]+" "+ie[_e-1][0]+" "+ge[_e];return se+"Q"+ie[ge.length-3][1]+" "+ge[ge.length-1]},x.smoothclosed=function(ge,we){if(ge.length<3)return"M"+ge.join("L")+"Z";var _e,se="M"+ge[0],ie=ge.length-1,fe=[D(ge[ie],ge[0],ge[1],we)];for(_e=1;_e<ie;_e++)fe.push(D(ge[_e-1],ge[_e],ge[_e+1],we));for(fe.push(D(ge[ie-1],ge[ie],ge[0],we)),_e=1;_e<=ie;_e++)se+="C"+fe[_e-1][1]+" "+fe[_e][0]+" "+ge[_e];return se+"C"+fe[ie][1]+" "+fe[0][0]+" "+ge[0]+"Z"};var N={hv:function(ge,we,_e){return"H"+R(we[0])+"V"+P(we,1,_e)},vh:function(ge,we,_e){return"V"+j(we[1])+"H"+P(we,0,_e)},hvh:function(ge,we,_e){return"H"+R((ge[0]+we[0])/2)+"V"+j(we[1])+"H"+P(we,0,_e)},vhv:function(ge,we,_e){return"V"+j((ge[1]+we[1])/2)+"H"+R(we[0])+"V"+P(we,1,_e)}},W=function(ge,we,_e){return"L"+P(we,0,_e)+","+P(we,1,_e)};function F(ge,we){var _e=ge.backoff,se=ge.trace,ie=ge.d,fe=ge.i;if(_e&&se&&se.marker&&se.marker.angle%360==0&&se.line&&se.line.shape!=="spline"){var Ee=k.isArrayOrTypedArray(_e),Te=ge,Ae=we?we[0]:S||0,Se=we?we[1]:w||0,Oe=Te[0],De=Te[1],de=Oe-Ae,me=De-Se,Me=Math.atan2(me,de),ze=Ee?_e[fe]:_e;if(ze==="auto"){var Pe=Te.i;se.type==="scatter"&&Pe--;var Ne=Te.marker,Ve=Ne.symbol;k.isArrayOrTypedArray(Ve)&&(Ve=Ve[Pe]);var Ye=Ne.size;k.isArrayOrTypedArray(Ye)&&(Ye=Ye[Pe]),ze=Ne?x.symbolBackOffs[x.symbolNumber(Ve)]*Ye:0,ze+=x.getMarkerStandoff(ie[Pe],se)||0}var at=Oe-ze*Math.cos(Me),rt=De-ze*Math.sin(Me);(at<=Oe&&at>=Ae||at>=Oe&&at<=Ae)&&(rt<=De&&rt>=Se||rt>=De&&rt<=Se)&&(ge=[at,rt])}return ge}x.steps=function(ge){var we=N[ge]||W;return function(_e){for(var se="M"+R(_e[0][0])+","+j(_e[0][1]),ie=_e.length,fe=1;fe<ie;fe++)se+=we(_e[fe-1],_e[fe],fe===ie-1);return se}},x.applyBackoff=F,x.makeTester=function(){var ge=k.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(_e){_e.attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),we=k.ensureSingle(ge,"path","js-reference-point",function(_e){_e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=ge,x.testref=we},x.savedBBoxes={};var V=0;function U(ge){var we=ge.getAttribute("data-unformatted");if(we!==null)return we+ge.getAttribute("data-math")+ge.getAttribute("text-anchor")+ge.getAttribute("style")}function te(ge,we){if(!ge)return null;var _e=we._context,se=_e._exportedPlot?"":_e._baseUrl||"";return se?"url('"+se+"#"+ge+"')":"url(#"+ge+")"}x.bBox=function(ge,we,_e){var se,ie,fe;if(_e||(_e=U(ge)),_e){if(se=x.savedBBoxes[_e])return k.extendFlat({},se)}else if(ge.childNodes.length===1){var Ee=ge.childNodes[0];if(_e=U(Ee)){var Te=+Ee.getAttribute("x")||0,Ae=+Ee.getAttribute("y")||0,Se=Ee.getAttribute("transform");if(!Se){var Oe=x.bBox(Ee,!1,_e);return Te&&(Oe.left+=Te,Oe.right+=Te),Ae&&(Oe.top+=Ae,Oe.bottom+=Ae),Oe}if(_e+="~"+Te+"~"+Ae+"~"+Se,se=x.savedBBoxes[_e])return k.extendFlat({},se)}}we?ie=ge:(fe=x.tester.node(),ie=ge.cloneNode(!0),fe.appendChild(ie)),M.select(ie).attr("transform",null).call(n.positionText,0,0);var De=ie.getBoundingClientRect(),de=x.testref.node().getBoundingClientRect();we||fe.removeChild(ie);var me={height:De.height,width:De.width,left:De.left-de.left,top:De.top-de.top,right:De.right-de.left,bottom:De.bottom-de.top};return V>=1e4&&(x.savedBBoxes={},V=0),_e&&(x.savedBBoxes[_e]=me),V++,k.extendFlat({},me)},x.setClipUrl=function(ge,we,_e){ge.attr("clip-path",te(we,_e))},x.getTranslate=function(ge){var we=(ge[ge.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(_e,se,ie){return[se,ie].join(" ")}).split(" ");return{x:+we[0]||0,y:+we[1]||0}},x.setTranslate=function(ge,we,_e){var se=ge.attr?"attr":"getAttribute",ie=ge.attr?"attr":"setAttribute",fe=ge[se]("transform")||"";return we=we||0,_e=_e||0,fe=fe.replace(/(\btranslate\(.*?\);?)/,"").trim(),fe=(fe+=a(we,_e)).trim(),ge[ie]("transform",fe),fe},x.getScale=function(ge){var we=(ge[ge.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(_e,se,ie){return[se,ie].join(" ")}).split(" ");return{x:+we[0]||1,y:+we[1]||1}},x.setScale=function(ge,we,_e){var se=ge.attr?"attr":"getAttribute",ie=ge.attr?"attr":"setAttribute",fe=ge[se]("transform")||"";return we=we||1,_e=_e||1,fe=fe.replace(/(\bscale\(.*?\);?)/,"").trim(),fe=(fe+="scale("+we+","+_e+")").trim(),ge[ie]("transform",fe),fe};var J=/\s*sc.*/;x.setPointGroupScale=function(ge,we,_e){if(we=we||1,_e=_e||1,ge){var se=we===1&&_e===1?"":"scale("+we+","+_e+")";ge.each(function(){var ie=(this.getAttribute("transform")||"").replace(J,"");ie=(ie+=se).trim(),this.setAttribute("transform",ie)})}};var X=/translate\([^)]*\)\s*$/;function K(ge,we){var _e;return ge&&(_e=ge.mf),_e===void 0&&(_e=we.marker&&we.marker.standoff||0),we._geo||we._xA?_e:-_e}x.setTextPointsScale=function(ge,we,_e){ge&&ge.each(function(){var se,ie=M.select(this),fe=ie.select("text");if(fe.node()){var Ee=parseFloat(fe.attr("x")||0),Te=parseFloat(fe.attr("y")||0),Ae=(ie.attr("transform")||"").match(X);se=we===1&&_e===1?[]:[a(Ee,Te),"scale("+we+","+_e+")",a(-Ee,-Te)],Ae&&se.push(Ae),ie.attr("transform",se.join(""))}})},x.getMarkerStandoff=K;var Q,Z,re,oe,ae,ce,he=Math.atan2,pe=Math.cos,xe=Math.sin;function be(ge,we){var _e=we[0],se=we[1];return[_e*pe(ge)-se*xe(ge),_e*xe(ge)+se*pe(ge)]}function ve(ge,we){var _e,se,ie=ge.ma;ie===void 0&&((ie=we.marker.angle)&&!k.isArrayOrTypedArray(ie)||(ie=0));var fe=we.marker.angleref;if(fe==="previous"||fe==="north"){if(we._geo){var Ee=we._geo.project(ge.lonlat);_e=Ee[0],se=Ee[1]}else{var Te=we._xA,Ae=we._yA;if(!Te||!Ae)return 90;_e=Te.c2p(ge.x),se=Ae.c2p(ge.y)}if(we._geo){var Se,Oe=ge.lonlat[0],De=ge.lonlat[1],de=we._geo.project([Oe,De+1e-5]),me=we._geo.project([Oe+1e-5,De]),Me=he(me[1]-se,me[0]-_e),ze=he(de[1]-se,de[0]-_e);if(fe==="north")Se=ie/180*Math.PI;else if(fe==="previous"){var Pe=Oe/180*Math.PI,Ne=De/180*Math.PI,Ve=Q/180*Math.PI,Ye=Z/180*Math.PI,at=Ve-Pe,rt=pe(Ye)*xe(at),dt=xe(Ye)*pe(Ne)-pe(Ye)*xe(Ne)*pe(at);Se=-he(rt,dt)-Math.PI,Q=Oe,Z=De}var vt=be(Me,[pe(Se),0]),ht=be(ze,[xe(Se),0]);ie=he(vt[1]+ht[1],vt[0]+ht[0])/Math.PI*180,fe!=="previous"||ce===we.uid&&ge.i===ae+1||(ie=null)}if(fe==="previous"&&!we._geo)if(ce===we.uid&&ge.i===ae+1&&T(_e)&&T(se)){var et=_e-re,$e=se-oe,wt=we.line&&we.line.shape||"",Pt=wt.slice(wt.length-1);Pt==="h"&&($e=0),Pt==="v"&&(et=0),ie+=he($e,et)/Math.PI*180+90}else ie=null}return re=_e,oe=se,ae=ge.i,ce=we.uid,ie}x.getMarkerAngle=ve},71984:function(ee,z,e){var M,k,o,T,b=e(21984),h=e(33428).round,s="M0,0Z",t=Math.sqrt(2),a=Math.sqrt(3),n=Math.PI,r=Math.cos,i=Math.sin;function l(p){return p===null}function u(p,c,x){if(!(p&&p%360!=0||c))return x;if(o===p&&T===c&&M===x)return k;function d(R,j){var D=r(R),N=i(R),W=j[0],F=j[1]+(c||0);return[W*D-F*N,W*N+F*D]}o=p,T=c,M=x;for(var g=p/180*n,v=0,y=0,m=b(x),_="",f=0;f<m.length;f++){var S=m[f],w=S[0],E=v,O=y;if(w==="M"||w==="L")v=+S[1],y=+S[2];else if(w==="m"||w==="l")v+=+S[1],y+=+S[2];else if(w==="H")v=+S[1];else if(w==="h")v+=+S[1];else if(w==="V")y=+S[1];else if(w==="v")y+=+S[1];else if(w==="A"){v=+S[1],y=+S[2];var C=d(g,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+p}w!=="H"&&w!=="V"||(w="L"),w!=="h"&&w!=="v"||(w="l"),w!=="m"&&w!=="l"||(v-=E,y-=O);var P=d(g,[v,y]);w!=="H"&&w!=="V"||(w="L"),w!=="M"&&w!=="L"&&w!=="m"&&w!=="l"||(S[1]=P[0],S[2]=P[1]),S[0]=w,_+=S[0]+S.slice(1).join(",")}return k=_,_}ee.exports={circle:{n:0,f:function(p,c,x){if(l(c))return s;var d=h(p,2),g="M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z";return x?u(c,x,g):g}},square:{n:1,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")}},diamond:{n:2,f:function(p,c,x){if(l(c))return s;var d=h(1.3*p,2);return u(c,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"Z")}},cross:{n:3,f:function(p,c,x){if(l(c))return s;var d=h(.4*p,2),g=h(1.2*p,2);return u(c,x,"M"+g+","+d+"H"+d+"V"+g+"H-"+d+"V"+d+"H-"+g+"V-"+d+"H-"+d+"V-"+g+"H"+d+"V-"+d+"H"+g+"Z")}},x:{n:4,f:function(p,c,x){if(l(c))return s;var d=h(.8*p/t,2),g="l"+d+","+d,v="l"+d+",-"+d,y="l-"+d+",-"+d,m="l-"+d+","+d;return u(c,x,"M0,"+d+g+v+y+v+y+m+y+m+g+m+g+"Z")}},"triangle-up":{n:5,f:function(p,c,x){if(l(c))return s;var d=h(2*p/a,2);return u(c,x,"M-"+d+","+h(p/2,2)+"H"+d+"L0,-"+h(p,2)+"Z")}},"triangle-down":{n:6,f:function(p,c,x){if(l(c))return s;var d=h(2*p/a,2);return u(c,x,"M-"+d+",-"+h(p/2,2)+"H"+d+"L0,"+h(p,2)+"Z")}},"triangle-left":{n:7,f:function(p,c,x){if(l(c))return s;var d=h(2*p/a,2);return u(c,x,"M"+h(p/2,2)+",-"+d+"V"+d+"L-"+h(p,2)+",0Z")}},"triangle-right":{n:8,f:function(p,c,x){if(l(c))return s;var d=h(2*p/a,2);return u(c,x,"M-"+h(p/2,2)+",-"+d+"V"+d+"L"+h(p,2)+",0Z")}},"triangle-ne":{n:9,f:function(p,c,x){if(l(c))return s;var d=h(.6*p,2),g=h(1.2*p,2);return u(c,x,"M-"+g+",-"+d+"H"+d+"V"+g+"Z")}},"triangle-se":{n:10,f:function(p,c,x){if(l(c))return s;var d=h(.6*p,2),g=h(1.2*p,2);return u(c,x,"M"+d+",-"+g+"V"+d+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(p,c,x){if(l(c))return s;var d=h(.6*p,2),g=h(1.2*p,2);return u(c,x,"M"+g+","+d+"H-"+d+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(p,c,x){if(l(c))return s;var d=h(.6*p,2),g=h(1.2*p,2);return u(c,x,"M-"+d+","+g+"V-"+d+"H"+g+"Z")}},pentagon:{n:13,f:function(p,c,x){if(l(c))return s;var d=h(.951*p,2),g=h(.588*p,2),v=h(-p,2),y=h(-.309*p,2);return u(c,x,"M"+d+","+y+"L"+g+","+h(.809*p,2)+"H-"+g+"L-"+d+","+y+"L0,"+v+"Z")}},hexagon:{n:14,f:function(p,c,x){if(l(c))return s;var d=h(p,2),g=h(p/2,2),v=h(p*a/2,2);return u(c,x,"M"+v+",-"+g+"V"+g+"L0,"+d+"L-"+v+","+g+"V-"+g+"L0,-"+d+"Z")}},hexagon2:{n:15,f:function(p,c,x){if(l(c))return s;var d=h(p,2),g=h(p/2,2),v=h(p*a/2,2);return u(c,x,"M-"+g+","+v+"H"+g+"L"+d+",0L"+g+",-"+v+"H-"+g+"L-"+d+",0Z")}},octagon:{n:16,f:function(p,c,x){if(l(c))return s;var d=h(.924*p,2),g=h(.383*p,2);return u(c,x,"M-"+g+",-"+d+"H"+g+"L"+d+",-"+g+"V"+g+"L"+g+","+d+"H-"+g+"L-"+d+","+g+"V-"+g+"Z")}},star:{n:17,f:function(p,c,x){if(l(c))return s;var d=1.4*p,g=h(.225*d,2),v=h(.951*d,2),y=h(.363*d,2),m=h(.588*d,2),_=h(-d,2),f=h(-.309*d,2),S=h(.118*d,2),w=h(.809*d,2);return u(c,x,"M"+g+","+f+"H"+v+"L"+y+","+S+"L"+m+","+w+"L0,"+h(.382*d,2)+"L-"+m+","+w+"L-"+y+","+S+"L-"+v+","+f+"H-"+g+"L0,"+_+"Z")}},hexagram:{n:18,f:function(p,c,x){if(l(c))return s;var d=h(.66*p,2),g=h(.38*p,2),v=h(.76*p,2);return u(c,x,"M-"+v+",0l-"+g+",-"+d+"h"+v+"l"+g+",-"+d+"l"+g+","+d+"h"+v+"l-"+g+","+d+"l"+g+","+d+"h-"+v+"l-"+g+","+d+"l-"+g+",-"+d+"h-"+v+"Z")}},"star-triangle-up":{n:19,f:function(p,c,x){if(l(c))return s;var d=h(p*a*.8,2),g=h(.8*p,2),v=h(1.6*p,2),y=h(4*p,2),m="A "+y+","+y+" 0 0 1 ";return u(c,x,"M-"+d+","+g+m+d+","+g+m+"0,-"+v+m+"-"+d+","+g+"Z")}},"star-triangle-down":{n:20,f:function(p,c,x){if(l(c))return s;var d=h(p*a*.8,2),g=h(.8*p,2),v=h(1.6*p,2),y=h(4*p,2),m="A "+y+","+y+" 0 0 1 ";return u(c,x,"M"+d+",-"+g+m+"-"+d+",-"+g+m+"0,"+v+m+d+",-"+g+"Z")}},"star-square":{n:21,f:function(p,c,x){if(l(c))return s;var d=h(1.1*p,2),g=h(2*p,2),v="A "+g+","+g+" 0 0 1 ";return u(c,x,"M-"+d+",-"+d+v+"-"+d+","+d+v+d+","+d+v+d+",-"+d+v+"-"+d+",-"+d+"Z")}},"star-diamond":{n:22,f:function(p,c,x){if(l(c))return s;var d=h(1.4*p,2),g=h(1.9*p,2),v="A "+g+","+g+" 0 0 1 ";return u(c,x,"M-"+d+",0"+v+"0,"+d+v+d+",0"+v+"0,-"+d+v+"-"+d+",0Z")}},"diamond-tall":{n:23,f:function(p,c,x){if(l(c))return s;var d=h(.7*p,2),g=h(1.4*p,2);return u(c,x,"M0,"+g+"L"+d+",0L0,-"+g+"L-"+d+",0Z")}},"diamond-wide":{n:24,f:function(p,c,x){if(l(c))return s;var d=h(1.4*p,2),g=h(.7*p,2);return u(c,x,"M0,"+g+"L"+d+",0L0,-"+g+"L-"+d+",0Z")}},hourglass:{n:25,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M"+d+","+d+"H-"+d+"L"+d+",-"+d+"H-"+d+"Z")},noDot:!0},bowtie:{n:26,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M"+d+","+d+"V-"+d+"L-"+d+","+d+"V-"+d+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,c,x){if(l(c))return s;var d=h(p,2),g=h(p/t,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+d+",0A"+d+","+d+" 0 1,1 0,-"+d+"A"+d+","+d+" 0 0,1 "+d+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d+"M"+d+","+d+"H-"+d+"V-"+d+"H"+d+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,c,x){if(l(c))return s;var d=h(1.3*p,2);return u(c,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM0,-"+d+"V"+d+"M-"+d+",0H"+d)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,c,x){if(l(c))return s;var d=h(1.3*p,2),g=h(.65*p,2);return u(c,x,"M"+d+",0L0,"+d+"L-"+d+",0L0,-"+d+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,c,x){if(l(c))return s;var d=h(1.4*p,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M"+d+","+d+"L-"+d+",-"+d+"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,c,x){if(l(c))return s;var d=h(1.2*p,2),g=h(.85*p,2);return u(c,x,"M0,"+d+"V-"+d+"M"+d+",0H-"+d+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,c,x){if(l(c))return s;var d=h(p/2,2),g=h(p,2);return u(c,x,"M"+d+","+g+"V-"+g+"M"+(d-g)+",-"+g+"V"+g+"M"+g+","+d+"H-"+g+"M-"+g+","+(d-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,c,x){if(l(c))return s;var d=h(1.2*p,2),g=h(1.6*p,2),v=h(.8*p,2);return u(c,x,"M-"+d+","+v+"L0,0M"+d+","+v+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,c,x){if(l(c))return s;var d=h(1.2*p,2),g=h(1.6*p,2),v=h(.8*p,2);return u(c,x,"M-"+d+",-"+v+"L0,0M"+d+",-"+v+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,c,x){if(l(c))return s;var d=h(1.2*p,2),g=h(1.6*p,2),v=h(.8*p,2);return u(c,x,"M"+v+","+d+"L0,0M"+v+",-"+d+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,c,x){if(l(c))return s;var d=h(1.2*p,2),g=h(1.6*p,2),v=h(.8*p,2);return u(c,x,"M-"+v+","+d+"L0,0M-"+v+",-"+d+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,c,x){if(l(c))return s;var d=h(1.4*p,2);return u(c,x,"M"+d+",0H-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,c,x){if(l(c))return s;var d=h(1.4*p,2);return u(c,x,"M0,"+d+"V-"+d)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M"+d+",-"+d+"L-"+d+","+d)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M"+d+","+d+"L-"+d+",-"+d)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M0,0L-"+d+","+h(2*p,2)+"H"+d+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M0,0L-"+d+",-"+h(2*p,2)+"H"+d+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,c,x){if(l(c))return s;var d=h(2*p,2),g=h(p,2);return u(c,x,"M0,0L"+d+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,c,x){if(l(c))return s;var d=h(2*p,2),g=h(p,2);return u(c,x,"M0,0L-"+d+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M-"+d+",0H"+d+"M0,0L-"+d+","+h(2*p,2)+"H"+d+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,c,x){if(l(c))return s;var d=h(p,2);return u(c,x,"M-"+d+",0H"+d+"M0,0L-"+d+",-"+h(2*p,2)+"H"+d+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,c,x){if(l(c))return s;var d=h(2*p,2),g=h(p,2);return u(c,x,"M0,-"+g+"V"+g+"M0,0L"+d+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,c,x){if(l(c))return s;var d=h(2*p,2),g=h(p,2);return u(c,x,"M0,-"+g+"V"+g+"M0,0L-"+d+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,c,x){if(l(c))return s;var d=n/2.5,g=2*p*r(d),v=2*p*i(d);return u(c,x,"M0,0L"+-g+","+v+"L"+g+","+v+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,c,x){if(l(c))return s;var d=n/4,g=2*p*r(d),v=2*p*i(d);return u(c,x,"M0,0L"+-g+","+v+"A "+2*p+","+2*p+" 0 0 1 "+g+","+v+"Z")},backoff:.4,noDot:!0}}},97644:function(ee){ee.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(ee,z,e){var M=e(38248),k=e(24040),o=e(54460),T=e(3400),b=e(93792);function h(s,t,a,n){var r=t["error_"+n]||{},i=[];if(r.visible&&["linear","log"].indexOf(a.type)!==-1){for(var l=b(r),u=0;u<s.length;u++){var p=s[u],c=p.i;if(c===void 0)c=u;else if(c===null)continue;var x=p[n];if(M(a.c2l(x))){var d=l(x,c);if(M(d[0])&&M(d[1])){var g=p[n+"s"]=x-d[0],v=p[n+"h"]=x+d[1];i.push(g,v)}}}var y=a._id,m=t._extremes[y],_=o.findExtremes(a,i,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(_.min),m.max=m.max.concat(_.max)}}ee.exports=function(s){for(var t=s.calcdata,a=0;a<t.length;a++){var n=t[a],r=n[0].trace;if(r.visible===!0&&k.traceIs(r,"errorBarsOK")){var i=o.getFromId(s,r.xaxis),l=o.getFromId(s,r.yaxis);h(n,r,i,"x"),h(n,r,l,"y")}}}},93792:function(ee){function z(e,M){return e==="percent"?function(k){return Math.abs(k*M/100)}:e==="constant"?function(){return Math.abs(M)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}ee.exports=function(e){var M=e.type,k=e.symmetric;if(M==="data"){var o=e.array||[];if(k)return function(s,t){var a=+o[t];return[a,a]};var T=e.arrayminus||[];return function(s,t){var a=+o[t],n=+T[t];return isNaN(a)&&isNaN(n)?[NaN,NaN]:[n||0,a||0]}}var b=z(M,e.value),h=z(M,e.valueminus);return k||e.valueminus===void 0?function(s){var t=b(s);return[t,t]}:function(s){return[h(s),b(s)]}}},65200:function(ee,z,e){var M=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(97644);ee.exports=function(h,s,t,a){var n="error_"+a.axis,r=T.newContainer(s,n),i=h[n]||{};function l(x,d){return o.coerce(i,r,b,x,d)}if(l("visible",i.array!==void 0||i.value!==void 0||i.type==="sqrt")!==!1){var u=l("type","array"in i?"data":"percent"),p=!0;u!=="sqrt"&&(p=l("symmetric",!((u==="data"?"arrayminus":"valueminus")in i))),u==="data"?(l("array"),l("traceref"),p||(l("arrayminus"),l("tracerefminus"))):u!=="percent"&&u!=="constant"||(l("value"),p||l("valueminus"));var c="copy_"+a.inherit+"style";a.inherit&&(s["error_"+a.inherit]||{}).visible&&l(c,!(i.color||M(i.thickness)||M(i.width))),a.inherit&&r[c]||(l("color",t),l("thickness"),l("width",k.traceIs(s,"gl3d")?0:4))}}},64968:function(ee,z,e){var M=e(3400),k=e(67824).overrideAll,o=e(97644),T={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o),error_z:M.extendFlat({},o)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,ee.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(h,s,t){(s.error_y||{}).visible&&(t.yerr=h.yh-h.y,s.error_y.symmetric||(t.yerrneg=h.y-h.ys)),(s.error_x||{}).visible&&(t.xerr=h.xh-h.x,s.error_x.symmetric||(t.xerrneg=h.x-h.xs))}}},78512:function(ee,z,e){var M=e(33428),k=e(38248),o=e(43616),T=e(43028);ee.exports=function(b,h,s,t){var a=s.xaxis,n=s.yaxis,r=t&&t.duration>0,i=b._context.staticPlot;h.each(function(l){var u,p=l[0].trace,c=p.error_x||{},x=p.error_y||{};p.ids&&(u=function(y){return y.id});var d=T.hasMarkers(p)&&p.marker.maxdisplayed>0;x.visible||c.visible||(l=[]);var g=M.select(this).selectAll("g.errorbar").data(l,u);if(g.exit().remove(),l.length){c.visible||g.selectAll("path.xerror").remove(),x.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var v=g.enter().append("g").classed("errorbar",!0);r&&v.style("opacity",0).transition().duration(t.duration).style("opacity",1),o.setClipUrl(g,s.layerClipId,b),g.each(function(y){var m=M.select(this),_=function(C,P,R){var j={x:P.c2p(C.x),y:R.c2p(C.y)};return C.yh!==void 0&&(j.yh=R.c2p(C.yh),j.ys=R.c2p(C.ys),k(j.ys)||(j.noYS=!0,j.ys=R.c2p(C.ys,!0))),C.xh!==void 0&&(j.xh=P.c2p(C.xh),j.xs=P.c2p(C.xs),k(j.xs)||(j.noXS=!0,j.xs=P.c2p(C.xs,!0))),j}(y,a,n);if(!d||y.vis){var f,S=m.select("path.yerror");if(x.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var w=x.width;f="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(f+="m-"+w+",0h"+2*w),S.size()?r&&(S=S.transition().duration(t.duration).ease(t.easing)):S=m.append("path").style("vector-effect",i?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",f)}else S.remove();var E=m.select("path.xerror");if(c.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var O=(c.copy_ystyle?x:c).width;f="M"+_.xh+","+(_.y-O)+"v"+2*O+"m0,-"+O+"H"+_.xs,_.noXS||(f+="m0,-"+O+"v"+2*O),E.size()?r&&(E=E.transition().duration(t.duration).ease(t.easing)):E=m.append("path").style("vector-effect",i?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",f)}else E.remove()}})}})}},92036:function(ee,z,e){var M=e(33428),k=e(76308);ee.exports=function(o){o.each(function(T){var b=T[0].trace,h=b.error_y||{},s=b.error_x||{},t=M.select(this);t.selectAll("path.yerror").style("stroke-width",h.thickness+"px").call(k.stroke,h.color),s.copy_ystyle&&(s=h),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},55756:function(ee,z,e){var M=e(25376),k=e(65460).hoverlabel,o=e(92880).extendFlat;ee.exports={hoverlabel:{bgcolor:o({},k.bgcolor,{arrayOk:!0}),bordercolor:o({},k.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:o({},k.align,{arrayOk:!0}),namelength:o({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(ee,z,e){var M=e(3400),k=e(24040);function o(T,b,h,s){s=s||M.identity,Array.isArray(T)&&(b[0][h]=s(T))}ee.exports=function(T){var b=T.calcdata,h=T._fullLayout;function s(i){return function(l){return M.coerceHoverinfo({hoverinfo:l},{_module:i._module},h)}}for(var t=0;t<b.length;t++){var a=b[t],n=a[0].trace;if(!k.traceIs(n,"pie-like")){var r=k.traceIs(n,"2dMap")?o:M.fillArray;r(n.hoverinfo,a,"hi",s(n)),n.hovertemplate&&r(n.hovertemplate,a,"ht"),n.hoverlabel&&(r(n.hoverlabel.bgcolor,a,"hbg"),r(n.hoverlabel.bordercolor,a,"hbc"),r(n.hoverlabel.font.size,a,"hts"),r(n.hoverlabel.font.color,a,"htc"),r(n.hoverlabel.font.family,a,"htf"),r(n.hoverlabel.font.weight,a,"htw"),r(n.hoverlabel.font.style,a,"hty"),r(n.hoverlabel.font.variant,a,"htv"),r(n.hoverlabel.namelength,a,"hnl"),r(n.hoverlabel.align,a,"hta"))}}}},62376:function(ee,z,e){var M=e(24040),k=e(83292).hover;ee.exports=function(o,T,b){var h=M.getComponentMethod("annotations","onClick")(o,o._hoverdata);function s(){o.emit("plotly_click",{points:o._hoverdata,event:T})}b!==void 0&&k(o,T,b,!0),o._hoverdata&&T&&T.target&&(h&&h.then?h.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(ee){ee.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(ee,z,e){var M=e(3400),k=e(55756),o=e(16132);ee.exports=function(T,b,h,s){var t=M.extendFlat({},s.hoverlabel);b.hovertemplate&&(t.namelength=-1),o(T,b,function(a,n){return M.coerce(T,b,k,a,n)},t)}},10624:function(ee,z,e){var M=e(3400);z.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},z.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var a=s.xaxes||[],n=s.yaxes||[],r=0;r<a.length;r++)for(var i=0;i<n.length;i++)if(t.indexOf(a[r]+n[i])!==-1)return!0;return!1}return t.indexOf(z.getSubplot(s))!==-1},z.flat=function(s,t){for(var a=new Array(s.length),n=0;n<s.length;n++)a[n]=t;return a},z.p2c=function(s,t){for(var a=new Array(s.length),n=0;n<s.length;n++)a[n]=s[n].p2c(t);return a},z.getDistanceFunction=function(s,t,a,n){return s==="closest"?n||z.quadrature(t,a):s.charAt(0)==="x"?t:a},z.getClosest=function(s,t,a){if(a.index!==!1)a.index>=0&&a.index<s.length?a.distance=0:a.index=!1;else for(var n=0;n<s.length;n++){var r=t(s[n]);r<=a.distance&&(a.index=n,a.distance=r)}return a},z.inbox=function(s,t,a){return s*t<0||s===0?a:1/0},z.quadrature=function(s,t){return function(a){var n=s(a),r=t(a);return Math.sqrt(n*n+r*r)}},z.makeEventData=function(s,t,a){var n="index"in s?s.index:s.pointNumber,r={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var i=t._indexToPoints[n];i.length===1?r.pointIndex=i[0]:r.pointIndices=i}else r.pointIndex=n;return t._module.eventData?r=t._module.eventData(r,s,t,a,n):("xVal"in s?r.x=s.xVal:"x"in s&&(r.x=s.x),"yVal"in s?r.y=s.yVal:"y"in s&&(r.y=s.y),s.xa&&(r.xaxis=s.xa),s.ya&&(r.yaxis=s.ya),s.zLabelVal!==void 0&&(r.z=s.zLabelVal)),z.appendArrayPointValue(r,t,n),r},z.appendArrayPointValue=function(s,t,a){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var i=n[r],l=o(i);if(s[l]===void 0){var u=T(M.nestedProperty(t,i).get(),a);u!==void 0&&(s[l]=u)}}},z.appendArrayMultiPointValues=function(s,t,a){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var i=n[r],l=o(i);if(s[l]===void 0){for(var u=M.nestedProperty(t,i).get(),p=new Array(a.length),c=0;c<a.length;c++)p[c]=T(u,a[c]);s[l]=p}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(s){return k[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var b={x:!0,y:!0},h={"x unified":!0,"y unified":!0};z.isUnifiedHover=function(s){return typeof s=="string"&&!!h[s]},z.isXYhover=function(s){return typeof s=="string"&&!!b[s]}},83292:function(ee,z,e){var M=e(33428),k=e(38248),o=e(49760),T=e(3400),b=T.pushUnique,h=T.strTranslate,s=T.strRotate,t=e(95924),a=e(72736),n=e(72213),r=e(43616),i=e(76308),l=e(86476),u=e(54460),p=e(24040),c=e(10624),x=e(92456),d=e(77864),g=e(31140),v=x.YANGLE,y=Math.PI*v/180,m=1/Math.sin(y),_=Math.cos(y),f=Math.sin(y),S=x.HOVERARROWSIZE,w=x.HOVERTEXTPAD,E={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function C(Z,re){return Z.distance-re.distance}function P(Z){return[Z.trace.index,Z.index,Z.x0,Z.y0,Z.name,Z.attr,Z.xa?Z.xa._id:"",Z.ya?Z.ya._id:""].join(",")}z.hover=function(Z,re,oe,ae){Z=T.getGraphDiv(Z);var ce=re.target;T.throttle(Z._fullLayout._uid+x.HOVERID,x.HOVERMINTIME,function(){(function(he,pe,xe,be,ve){xe||(xe="xy");var ge,we,_e,se=Array.isArray(xe)?xe:[xe],ie=he._fullLayout,fe=ie.hoversubplots,Ee=ie._plots||[],Te=Ee[xe],Ae=ie._has("cartesian"),Se=pe.hovermode||ie.hovermode,Oe=(Se||"").charAt(0)==="x",De=(Se||"").charAt(0)==="y";if(Ae&&(Oe||De)&&fe==="axis"){for(var de=se.length,me=0;me<de;me++)if(Ee[ge=se[me]]){we=u.getFromId(he,ge,"x"),_e=u.getFromId(he,ge,"y");var Me=(Oe?we:_e)._subplotsWith;if(Me&&Me.length)for(var ze=0;ze<Me.length;ze++)b(se,Me[ze])}}if(Te&&fe!=="single"){var Pe=Te.overlays.map(function(bt){return bt.id});se=se.concat(Pe)}for(var Ne=se.length,Ve=new Array(Ne),Ye=new Array(Ne),at=!1,rt=0;rt<Ne;rt++)if(Ee[ge=se[rt]])at=!0,Ve[rt]=Ee[ge].xaxis,Ye[rt]=Ee[ge].yaxis;else{if(!ie[ge]||!ie[ge]._subplot)return void T.warn("Unrecognized subplot: "+ge);var dt=ie[ge]._subplot;Ve[rt]=dt.xaxis,Ye[rt]=dt.yaxis}if(Se&&!at&&(Se="closest"),["x","y","closest","x unified","y unified"].indexOf(Se)===-1||!he.calcdata||he.querySelector(".zoombox")||he._dragging)return l.unhoverRaw(he,pe);var vt=ie.hoverdistance;vt===-1&&(vt=1/0);var ht=ie.spikedistance;ht===-1&&(ht=1/0);var et,$e,wt,Pt,Ot,At,He,Ze,Be,Ge,it,tt,Re,Fe=[],nt=[],We={hLinePoint:null,vLinePoint:null},ct=!1;if(Array.isArray(pe))for(Se="array",wt=0;wt<pe.length;wt++)(Ot=he.calcdata[pe[wt].curveNumber||0])&&(At=Ot[0].trace,Ot[0].trace.hoverinfo!=="skip"&&(nt.push(Ot),At.orientation==="h"&&(ct=!0)));else{var pt,gt,ut=he.calcdata.slice();for(ut.sort(function(bt,Ut){return(bt[0].trace.zorder||0)-(Ut[0].trace.zorder||0)}),Pt=0;Pt<ut.length;Pt++)Ot=ut[Pt],(At=Ot[0].trace).hoverinfo!=="skip"&&c.isTraceInSubplots(At,se)&&(nt.push(Ot),At.orientation==="h"&&(ct=!0));if(ve){if(t.triggerHandler(he,"plotly_beforehover",pe)===!1)return;var kt=ve.getBoundingClientRect();pt=pe.clientX-kt.left,gt=pe.clientY-kt.top,ie._calcInverseTransform(he);var yt=T.apply3DTransform(ie._invTransform)(pt,gt);if(pt=yt[0],gt=yt[1],pt<0||pt>Ve[0]._length||gt<0||gt>Ye[0]._length)return l.unhoverRaw(he,pe)}else pt="xpx"in pe?pe.xpx:Ve[0]._length/2,gt="ypx"in pe?pe.ypx:Ye[0]._length/2;if(pe.pointerX=pt+Ve[0]._offset,pe.pointerY=gt+Ye[0]._offset,et="xval"in pe?c.flat(se,pe.xval):c.p2c(Ve,pt),$e="yval"in pe?c.flat(se,pe.yval):c.p2c(Ye,gt),!k(et[0])||!k($e[0]))return T.warn("Fx.hover failed",pe,he),l.unhoverRaw(he,pe)}var Mt=1/0;function Lt(bt,Ut){for(Pt=0;Pt<nt.length;Pt++)if((Ot=nt[Pt])&&Ot[0]&&Ot[0].trace&&(At=Ot[0].trace).visible===!0&&At._length!==0&&["carpet","contourcarpet"].indexOf(At._module.name)===-1){if(Be=Se,c.isUnifiedHover(Be)&&(Be=Be.charAt(0)),At.type==="splom"?He=se[Ze=0]:(He=c.getSubplot(At),Ze=se.indexOf(He)),tt={cd:Ot,trace:At,xa:Ve[Ze],ya:Ye[Ze],maxHoverDistance:vt,maxSpikeDistance:ht,index:!1,distance:Math.min(Mt,vt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:i.defaultLine,name:At.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[He]&&(tt.subplot=ie[He]._subplot),ie._splomScenes&&ie._splomScenes[At.uid]&&(tt.scene=ie._splomScenes[At.uid]),Be==="array"){var Kt=pe[Pt];"pointNumber"in Kt?(tt.index=Kt.pointNumber,Be="closest"):(Be="","xval"in Kt&&(Ge=Kt.xval,Be="x"),"yval"in Kt&&(it=Kt.yval,Be=Be?"closest":"y"))}else bt!==void 0&&Ut!==void 0?(Ge=bt,it=Ut):(Ge=et[Ze],it=$e[Ze]);if(Re=Fe.length,vt!==0)if(At._module&&At._module.hoverPoints){var un=At._module.hoverPoints(tt,Ge,it,Be,{finiteRange:!0,hoverLayer:ie._hoverlayer,hoversubplots:fe,gd:he});if(un)for(var cn,vn=0;vn<un.length;vn++)cn=un[vn],k(cn.x0)&&k(cn.y0)&&Fe.push(F(cn,Se))}else T.log("Unrecognized trace type in hover:",At);if(Se==="closest"&&Fe.length>Re&&(Fe.splice(0,Re),Mt=Fe[0].distance),Ae&&ht!==0&&Fe.length===0){tt.distance=ht,tt.index=!1;var tn=At._module.hoverPoints(tt,Ge,it,"closest",{hoverLayer:ie._hoverlayer});if(tn&&(tn=tn.filter(function(An){return An.spikeDistance<=ht})),tn&&tn.length){var Vt,Gt=tn.filter(function(An){return An.xa.showspikes&&An.xa.spikesnap!=="hovered data"});if(Gt.length){var nn=Gt[0];k(nn.x0)&&k(nn.y0)&&(Vt=It(nn),(!We.vLinePoint||We.vLinePoint.spikeDistance>Vt.spikeDistance)&&(We.vLinePoint=Vt))}var sn=tn.filter(function(An){return An.ya.showspikes&&An.ya.spikesnap!=="hovered data"});if(sn.length){var wn=sn[0];k(wn.x0)&&k(wn.y0)&&(Vt=It(wn),(!We.hLinePoint||We.hLinePoint.spikeDistance>Vt.spikeDistance)&&(We.hLinePoint=Vt))}}}}}function Ct(bt,Ut,Kt){for(var un,cn=null,vn=1/0,tn=0;tn<bt.length;tn++)we&&we._id!==bt[tn].xa._id||_e&&_e._id!==bt[tn].ya._id||(un=bt[tn].spikeDistance,Kt&&tn===0&&(un=-1/0),un<=vn&&un<=Ut&&(cn=bt[tn],vn=un));return cn}function It(bt){return bt?{xa:bt.xa,ya:bt.ya,x:bt.xSpike!==void 0?bt.xSpike:(bt.x0+bt.x1)/2,y:bt.ySpike!==void 0?bt.ySpike:(bt.y0+bt.y1)/2,distance:bt.distance,spikeDistance:bt.spikeDistance,curveNumber:bt.trace.index,color:bt.color,pointNumber:bt.index}:null}Lt();var Wt={fullLayout:ie,container:ie._hoverlayer,event:pe};he._spikepoints;var Nt={vLinePoint:We.vLinePoint,hLinePoint:We.hLinePoint};he._spikepoints=Nt;var Bt=function(){var bt=Fe.filter(function(Kt){return we&&we._id===Kt.xa._id&&_e&&_e._id===Kt.ya._id}),Ut=Fe.filter(function(Kt){return!(we&&we._id===Kt.xa._id&&_e&&_e._id===Kt.ya._id)});bt.sort(C),Ut.sort(C),Fe=function(Kt,un){for(var cn=un.charAt(0),vn=[],tn=[],Vt=[],Gt=0;Gt<Kt.length;Gt++){var nn=Kt[Gt];p.traceIs(nn.trace,"bar-like")||p.traceIs(nn.trace,"box-violin")?Vt.push(nn):nn.trace[cn+"period"]?tn.push(nn):vn.push(nn)}return vn.concat(tn).concat(Vt)}(Fe=bt.concat(Ut),Se)};Bt();var Ht=Se.charAt(0),Qt=(Ht==="x"||Ht==="y")&&Fe[0]&&O[Fe[0].trace.type];if(Ae&&ht!==0&&Fe.length!==0){var Cn=Ct(Fe.filter(function(bt){return bt.ya.showspikes}),ht,Qt);We.hLinePoint=It(Cn);var Tn=Ct(Fe.filter(function(bt){return bt.xa.showspikes}),ht,Qt);We.vLinePoint=It(Tn)}if(Fe.length===0){var hn=l.unhoverRaw(he,pe);return!Ae||We.hLinePoint===null&&We.vLinePoint===null||V(he,We,Wt),hn}if(Ae&&U()&&V(he,We,Wt),c.isXYhover(Be)&&Fe[0].length!==0&&Fe[0].trace.type!=="splom"){var Zt=Fe[0],an=(Fe=E[Zt.trace.type]?Fe.filter(function(bt){return bt.trace.index===Zt.trace.index}):[Zt]).length;Lt(J("x",Zt,ie),J("y",Zt,ie));var $t,ln=[],mn={},xn=0,Pn=function(bt){var Ut=E[bt.trace.type]?P(bt):bt.trace.index;if(mn[Ut]){var Kt=mn[Ut]-1,un=ln[Kt];Kt>0&&Math.abs(bt.distance)<Math.abs(un.distance)&&(ln[Kt]=bt)}else xn++,mn[Ut]=xn,ln.push(bt)};for($t=0;$t<an;$t++)Pn(Fe[$t]);for($t=Fe.length-1;$t>an-1;$t--)Pn(Fe[$t]);Fe=ln,Bt()}var Mn=he._hoverdata,_n=[],Rn=X(he),In=K(he);for(wt=0;wt<Fe.length;wt++){var Vn=Fe[wt],tr=c.makeEventData(Vn,Vn.trace,Vn.cd);if(Vn.hovertemplate!==!1){var er=!1;Vn.cd[Vn.index]&&Vn.cd[Vn.index].ht&&(er=Vn.cd[Vn.index].ht),Vn.hovertemplate=er||Vn.trace.hovertemplate||!1}if(Vn.xa&&Vn.ya){var Wn=Vn.x0+Vn.xa._offset,or=Vn.x1+Vn.xa._offset,Jt=Vn.y0+Vn.ya._offset,en=Vn.y1+Vn.ya._offset,En=Math.min(Wn,or),gn=Math.max(Wn,or),Ln=Math.min(Jt,en),Hn=Math.max(Jt,en);tr.bbox={x0:En+In,x1:gn+In,y0:Ln+Rn,y1:Hn+Rn}}Vn.eventData=[tr],_n.push(tr)}he._hoverdata=_n;var Nn=Se==="y"&&(nt.length>1||Fe.length>1)||Se==="closest"&&ct&&Fe.length>1,Yn=i.combine(ie.plot_bgcolor||i.background,ie.paper_bgcolor),fr=j(Fe,{gd:he,hovermode:Se,rotateLabels:Nn,bgColor:Yn,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance}),Xt=fr.hoverLabels;if(c.isUnifiedHover(Se)||(function(bt,Ut,Kt,un){var cn,vn,tn,Vt,Gt,nn,sn,wn=Ut?"xa":"ya",An=Ut?"ya":"xa",zn=0,Fn=1,Xn=bt.size(),jn=new Array(Xn),Qn=0,Jn=un.minX,Zn=un.maxX,ur=un.minY,mr=un.maxY,hr=function(Pr){return Pr*Kt._invScaleX},rr=function(Pr){return Pr*Kt._invScaleY};function gr(Pr){var ha=Pr[0],oi=Pr[Pr.length-1];if(vn=ha.pmin-ha.pos-ha.dp+ha.size,tn=oi.pos+oi.dp+oi.size-ha.pmax,vn>.01){for(Gt=Pr.length-1;Gt>=0;Gt--)Pr[Gt].dp+=vn;cn=!1}if(!(tn<.01)){if(vn<-.01){for(Gt=Pr.length-1;Gt>=0;Gt--)Pr[Gt].dp-=tn;cn=!1}if(cn){var Ya=0;for(Vt=0;Vt<Pr.length;Vt++)(nn=Pr[Vt]).pos+nn.dp+nn.size>ha.pmax&&Ya++;for(Vt=Pr.length-1;Vt>=0&&!(Ya<=0);Vt--)(nn=Pr[Vt]).pos>ha.pmax-1&&(nn.del=!0,Ya--);for(Vt=0;Vt<Pr.length&&!(Ya<=0);Vt++)if((nn=Pr[Vt]).pos<ha.pmin+1)for(nn.del=!0,Ya--,tn=2*nn.size,Gt=Pr.length-1;Gt>=0;Gt--)Pr[Gt].dp-=tn;for(Vt=Pr.length-1;Vt>=0&&!(Ya<=0);Vt--)(nn=Pr[Vt]).pos+nn.dp+nn.size>ha.pmax&&(nn.del=!0,Ya--)}}}for(bt.each(function(Pr){var ha=Pr[wn],oi=Pr[An],Ya=ha._id.charAt(0)==="x",lo=ha.range;Qn===0&&lo&&lo[0]>lo[1]!==Ya&&(Fn=-1);var uo=0,Zi=Ya?Kt.width:Kt.height;if(Kt.hovermode==="x"||Kt.hovermode==="y"){var Za,Xi,ko=N(Pr,Ut),qo=Pr.anchor,Mi=qo==="end"?-1:1;if(qo==="middle")Xi=(Za=Pr.crossPos+(Ya?rr(ko.y-Pr.by/2):hr(Pr.bx/2+Pr.tx2width/2)))+(Ya?rr(Pr.by):hr(Pr.bx));else if(Ya)Xi=(Za=Pr.crossPos+rr(S+ko.y)-rr(Pr.by/2-S))+rr(Pr.by);else{var Si=hr(Mi*S+ko.x),Ki=Si+hr(Mi*Pr.bx);Za=Pr.crossPos+Math.min(Si,Ki),Xi=Pr.crossPos+Math.max(Si,Ki)}Ya?ur!==void 0&&mr!==void 0&&Math.min(Xi,mr)-Math.max(Za,ur)>1&&(oi.side==="left"?(uo=oi._mainLinePosition,Zi=Kt.width):Zi=oi._mainLinePosition):Jn!==void 0&&Zn!==void 0&&Math.min(Xi,Zn)-Math.max(Za,Jn)>1&&(oi.side==="top"?(uo=oi._mainLinePosition,Zi=Kt.height):Zi=oi._mainLinePosition)}jn[Qn++]=[{datum:Pr,traceIndex:Pr.trace.index,dp:0,pos:Pr.pos,posref:Pr.posref,size:Pr.by*(Ya?m:1)/2,pmin:uo,pmax:Zi}]}),jn.sort(function(Pr,ha){return Pr[0].posref-ha[0].posref||Fn*(ha[0].traceIndex-Pr[0].traceIndex)});!cn&&zn<=Xn;){for(zn++,cn=!0,Vt=0;Vt<jn.length-1;){var xr=jn[Vt],Or=jn[Vt+1],aa=xr[xr.length-1],oa=Or[0];if((vn=aa.pos+aa.dp+aa.size-oa.pos-oa.dp+oa.size)>.01&&aa.pmin===oa.pmin&&aa.pmax===oa.pmax){for(Gt=Or.length-1;Gt>=0;Gt--)Or[Gt].dp+=vn;for(xr.push.apply(xr,Or),jn.splice(Vt+1,1),sn=0,Gt=xr.length-1;Gt>=0;Gt--)sn+=xr[Gt].dp;for(tn=sn/xr.length,Gt=xr.length-1;Gt>=0;Gt--)xr[Gt].dp-=tn;cn=!1}else Vt++}jn.forEach(gr)}for(Vt=jn.length-1;Vt>=0;Vt--){var Ua=jn[Vt];for(Gt=Ua.length-1;Gt>=0;Gt--){var ta=Ua[Gt],ka=ta.datum;ka.offset=ta.dp,ka.del=ta.del}}}(Xt,Nn,ie,fr.commonLabelBoundingBox),W(Xt,Nn,ie._invScaleX,ie._invScaleY)),ve&&ve.tagName){var pn=p.getComponentMethod("annotations","hasClickToShow")(he,_n);n(M.select(ve),pn?"pointer":"")}ve&&!be&&function(bt,Ut,Kt){if(!Kt||Kt.length!==bt._hoverdata.length)return!0;for(var un=Kt.length-1;un>=0;un--){var cn=Kt[un],vn=bt._hoverdata[un];if(cn.curveNumber!==vn.curveNumber||String(cn.pointNumber)!==String(vn.pointNumber)||String(cn.pointNumbers)!==String(vn.pointNumbers))return!0}return!1}(he,0,Mn)&&(Mn&&he.emit("plotly_unhover",{event:pe,points:Mn}),he.emit("plotly_hover",{event:pe,points:he._hoverdata,xaxes:Ve,yaxes:Ye,xvals:et,yvals:$e}))})(Z,re,oe,ae,ce)})},z.loneHover=function(Z,re){var oe=!0;Array.isArray(Z)||(oe=!1,Z=[Z]);var ae=re.gd,ce=X(ae),he=K(ae),pe=j(Z.map(function(ve){var ge=ve._x0||ve.x0||ve.x||0,we=ve._x1||ve.x1||ve.x||0,_e=ve._y0||ve.y0||ve.y||0,se=ve._y1||ve.y1||ve.y||0,ie=ve.eventData;if(ie){var fe=Math.min(ge,we),Ee=Math.max(ge,we),Te=Math.min(_e,se),Ae=Math.max(_e,se),Se=ve.trace;if(p.traceIs(Se,"gl3d")){var Oe=ae._fullLayout[Se.scene]._scene.container,De=Oe.offsetLeft,de=Oe.offsetTop;fe+=De,Ee+=De,Te+=de,Ae+=de}ie.bbox={x0:fe+he,x1:Ee+he,y0:Te+ce,y1:Ae+ce},re.inOut_bbox&&re.inOut_bbox.push(ie.bbox)}else ie=!1;return{color:ve.color||i.defaultLine,x0:ve.x0||ve.x||0,x1:ve.x1||ve.x||0,y0:ve.y0||ve.y||0,y1:ve.y1||ve.y||0,xLabel:ve.xLabel,yLabel:ve.yLabel,zLabel:ve.zLabel,text:ve.text,name:ve.name,idealAlign:ve.idealAlign,borderColor:ve.borderColor,fontFamily:ve.fontFamily,fontSize:ve.fontSize,fontColor:ve.fontColor,fontWeight:ve.fontWeight,fontStyle:ve.fontStyle,fontVariant:ve.fontVariant,nameLength:ve.nameLength,textAlign:ve.textAlign,trace:ve.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ve.hovertemplate||!1,hovertemplateLabels:ve.hovertemplateLabels||!1,eventData:ie}}),{gd:ae,hovermode:"closest",rotateLabels:!1,bgColor:re.bgColor||i.background,container:M.select(re.container),outerContainer:re.outerContainer||re.container}).hoverLabels,xe=0,be=0;return pe.sort(function(ve,ge){return ve.y0-ge.y0}).each(function(ve,ge){var we=ve.y0-ve.by/2;ve.offset=we-5<xe?xe-we+5:0,xe=we+ve.by+ve.offset,ge===re.anchorIndex&&(be=ve.offset)}).each(function(ve){ve.offset-=be}),W(pe,!1,ae._fullLayout._invScaleX,ae._fullLayout._invScaleY),oe?pe:pe.node()};var R=/<extra>([\s\S]*)<\/extra>/;function j(Z,re){var oe=re.gd,ae=oe._fullLayout,ce=re.hovermode,he=re.rotateLabels,pe=re.bgColor,xe=re.container,be=re.outerContainer,ve=re.commonLabelOpts||{};if(Z.length===0)return[[]];var ge=re.fontFamily||x.HOVERFONT,we=re.fontSize||x.HOVERFONTSIZE,_e=re.fontWeight||ae.font.weight,se=re.fontStyle||ae.font.style,ie=re.fontVariant||ae.font.variant,fe=Z[0],Ee=fe.xa,Te=fe.ya,Ae=ce.charAt(0),Se=Ae+"Label",Oe=fe[Se];if(Oe===void 0&&Ee.type==="multicategory")for(var De=0;De<Z.length&&(Oe=Z[De][Se])===void 0;De++);var de=Q(oe,be),me=de.top,Me=de.width,ze=de.height,Pe=Oe!==void 0&&fe.distance<=re.hoverdistance&&(ce==="x"||ce==="y");if(Pe){var Ne,Ve,Ye=!0;for(Ne=0;Ne<Z.length;Ne++)if(Ye&&Z[Ne].zLabel===void 0&&(Ye=!1),Ve=Z[Ne].hoverinfo||Z[Ne].trace.hoverinfo){var at=Array.isArray(Ve)?Ve:Ve.split("+");if(at.indexOf("all")===-1&&at.indexOf(ce)===-1){Pe=!1;break}}Ye&&(Pe=!1)}var rt=xe.selectAll("g.axistext").data(Pe?[0]:[]);rt.enter().append("g").classed("axistext",!0),rt.exit().remove();var dt={minX:0,maxX:0,minY:0,maxY:0};if(rt.each(function(){var Nt=M.select(this),Bt=T.ensureSingle(Nt,"path","",function(or){or.style({"stroke-width":"1px"})}),Ht=T.ensureSingle(Nt,"text","",function(or){or.attr("data-notex",1)}),Qt=ve.bgcolor||i.defaultLine,Cn=ve.bordercolor||i.contrast(Qt),Tn=i.contrast(Qt),hn={weight:ve.font.weight||_e,style:ve.font.style||se,variant:ve.font.variant||ie,family:ve.font.family||ge,size:ve.font.size||we,color:ve.font.color||Tn};Bt.style({fill:Qt,stroke:Cn}),Ht.text(Oe).call(r.font,hn).call(a.positionText,0,0).call(a.convertToTspans,oe),Nt.attr("transform","");var Zt,an,$t=Q(oe,Ht.node());if(ce==="x"){var ln=Ee.side==="top"?"-":"";Ht.attr("text-anchor","middle").call(a.positionText,0,Ee.side==="top"?me-$t.bottom-S-w:me-$t.top+S+w),Zt=Ee._offset+(fe.x0+fe.x1)/2,an=Te._offset+(Ee.side==="top"?0:Te._length);var mn=$t.width/2+w,xn=Zt;Zt<mn?xn=mn:Zt>ae.width-mn&&(xn=ae.width-mn),Bt.attr("d","M"+(Zt-xn)+",0L"+(Zt-xn+S)+","+ln+S+"H"+mn+"v"+ln+(2*w+$t.height)+"H"+-mn+"V"+ln+S+"H"+(Zt-xn-S)+"Z"),Zt=xn,dt.minX=Zt-mn,dt.maxX=Zt+mn,Ee.side==="top"?(dt.minY=an-(2*w+$t.height),dt.maxY=an-w):(dt.minY=an+w,dt.maxY=an+(2*w+$t.height))}else{var Pn,Mn,_n;Te.side==="right"?(Pn="start",Mn=1,_n="",Zt=Ee._offset+Ee._length):(Pn="end",Mn=-1,_n="-",Zt=Ee._offset),an=Te._offset+(fe.y0+fe.y1)/2,Ht.attr("text-anchor",Pn),Bt.attr("d","M0,0L"+_n+S+","+S+"V"+(w+$t.height/2)+"h"+_n+(2*w+$t.width)+"V-"+(w+$t.height/2)+"H"+_n+S+"V-"+S+"Z"),dt.minY=an-(w+$t.height/2),dt.maxY=an+(w+$t.height/2),Te.side==="right"?(dt.minX=Zt+S,dt.maxX=Zt+S+(2*w+$t.width)):(dt.minX=Zt-S-(2*w+$t.width),dt.maxX=Zt-S);var Rn,In=$t.height/2,Vn=me-$t.top-In,tr="clip"+ae._uid+"commonlabel"+Te._id;if(Zt<$t.width+2*w+S){Rn="M-"+(S+w)+"-"+In+"h-"+($t.width-w)+"V"+In+"h"+($t.width-w)+"Z";var er=$t.width-Zt+w;a.positionText(Ht,er,Vn),Pn==="end"&&Ht.selectAll("tspan").each(function(){var or=M.select(this),Jt=r.tester.append("text").text(or.text()).call(r.font,hn),en=Q(oe,Jt.node());Math.round(en.width)<Math.round($t.width)&&or.attr("x",er-en.width),Jt.remove()})}else a.positionText(Ht,Mn*(w+S),Vn),Rn=null;var Wn=ae._topclips.selectAll("#"+tr).data(Rn?[0]:[]);Wn.enter().append("clipPath").attr("id",tr).append("path"),Wn.exit().remove(),Wn.select("path").attr("d",Rn),r.setClipUrl(Ht,Rn?tr:null,oe)}Nt.attr("transform",h(Zt,an))}),c.isUnifiedHover(ce)){xe.selectAll("g.hovertext").remove();var vt=Z.filter(function(Nt){return Nt.hoverinfo!=="none"});if(vt.length===0)return[];var ht=ae.hoverlabel,et=ht.font,$e={showlegend:!0,legend:{title:{text:Oe,font:et},font:et,bgcolor:ht.bgcolor,bordercolor:ht.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ae.legend?ae.legend.traceorder:void 0,orientation:"v"}},wt={font:et};d($e,wt,oe._fullData);var Pt=wt.legend;Pt.entries=[];for(var Ot=0;Ot<vt.length;Ot++){var At=vt[Ot];if(At.hoverinfo!=="none"){var He=D(At,!0,ce,ae,Oe),Ze=He[0],Be=He[1];At.name=Be,At.text=Be!==""?Be+" : "+Ze:Ze;var Ge=At.cd[At.index];Ge&&(Ge.mc&&(At.mc=Ge.mc),Ge.mcc&&(At.mc=Ge.mcc),Ge.mlc&&(At.mlc=Ge.mlc),Ge.mlcc&&(At.mlc=Ge.mlcc),Ge.mlw&&(At.mlw=Ge.mlw),Ge.mrc&&(At.mrc=Ge.mrc),Ge.dir&&(At.dir=Ge.dir)),At._distinct=!0,Pt.entries.push([At])}}Pt.entries.sort(function(Nt,Bt){return Nt[0].trace.index-Bt[0].trace.index}),Pt.layer=xe,Pt._inHover=!0,Pt._groupTitleFont=ht.grouptitlefont,g(oe,Pt);var it,tt,Re,Fe,nt=xe.select("g.legend"),We=Q(oe,nt.node()),ct=We.width+2*w,pt=We.height+2*w,gt=vt[0],ut=(gt.x0+gt.x1)/2,kt=(gt.y0+gt.y1)/2,yt=!(p.traceIs(gt.trace,"bar-like")||p.traceIs(gt.trace,"box-violin"));Ae==="y"?yt?(tt=kt-w,it=kt+w):(tt=Math.min.apply(null,vt.map(function(Nt){return Math.min(Nt.y0,Nt.y1)})),it=Math.max.apply(null,vt.map(function(Nt){return Math.max(Nt.y0,Nt.y1)}))):tt=it=T.mean(vt.map(function(Nt){return(Nt.y0+Nt.y1)/2}))-pt/2,Ae==="x"?yt?(Re=ut+w,Fe=ut-w):(Re=Math.max.apply(null,vt.map(function(Nt){return Math.max(Nt.x0,Nt.x1)})),Fe=Math.min.apply(null,vt.map(function(Nt){return Math.min(Nt.x0,Nt.x1)}))):Re=Fe=T.mean(vt.map(function(Nt){return(Nt.x0+Nt.x1)/2}))-ct/2;var Mt,Lt,Ct=Ee._offset,It=Te._offset;return Fe+=Ct-ct,tt+=It-pt,Mt=(Re+=Ct)+ct<Me&&Re>=0?Re:Fe+ct<Me&&Fe>=0?Fe:Ct+ct<Me?Ct:Re-ut<ut-Fe+ct?Me-ct:0,Mt+=w,Lt=(it+=It)+pt<ze&&it>=0?it:tt+pt<ze&&tt>=0?tt:It+pt<ze?It:it-kt<kt-tt+pt?ze-pt:0,Lt+=w,nt.attr("transform",h(Mt-1,Lt-1)),nt}var Wt=xe.selectAll("g.hovertext").data(Z,function(Nt){return P(Nt)});return Wt.enter().append("g").classed("hovertext",!0).each(function(){var Nt=M.select(this);Nt.append("rect").call(i.fill,i.addOpacity(pe,.8)),Nt.append("text").classed("name",!0),Nt.append("path").style("stroke-width","1px"),Nt.append("text").classed("nums",!0).call(r.font,{weight:_e,style:se,variant:ie,family:ge,size:we})}),Wt.exit().remove(),Wt.each(function(Nt){var Bt=M.select(this).attr("transform",""),Ht=Nt.color;Array.isArray(Ht)&&(Ht=Ht[Nt.eventData[0].pointNumber]);var Qt=Nt.bgcolor||Ht,Cn=i.combine(i.opacity(Qt)?Qt:i.defaultLine,pe),Tn=i.combine(i.opacity(Ht)?Ht:i.defaultLine,pe),hn=Nt.borderColor||i.contrast(Cn),Zt=D(Nt,Pe,ce,ae,Oe,Bt),an=Zt[0],$t=Zt[1],ln=Bt.select("text.nums").call(r.font,{family:Nt.fontFamily||ge,size:Nt.fontSize||we,color:Nt.fontColor||hn,weight:Nt.fontWeight||_e,style:Nt.fontStyle||se,variant:Nt.fontVariant||ie}).text(an).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,oe),mn=Bt.select("text.name"),xn=0,Pn=0;if($t&&$t!==an){mn.call(r.font,{family:Nt.fontFamily||ge,size:Nt.fontSize||we,color:Tn,weight:Nt.fontWeight||_e,style:Nt.fontStyle||se,variant:Nt.fontVariant||ie}).text($t).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,oe);var Mn=Q(oe,mn.node());xn=Mn.width+2*w,Pn=Mn.height+2*w}else mn.remove(),Bt.select("rect").remove();Bt.select("path").style({fill:Cn,stroke:hn});var _n=Nt.xa._offset+(Nt.x0+Nt.x1)/2,Rn=Nt.ya._offset+(Nt.y0+Nt.y1)/2,In=Math.abs(Nt.x1-Nt.x0),Vn=Math.abs(Nt.y1-Nt.y0),tr=Q(oe,ln.node()),er=tr.width/ae._invScaleX,Wn=tr.height/ae._invScaleY;Nt.ty0=(me-tr.top)/ae._invScaleY,Nt.bx=er+2*w,Nt.by=Math.max(Wn+2*w,Pn),Nt.anchor="start",Nt.txwidth=er,Nt.tx2width=xn,Nt.offset=0;var or,Jt,en=(er+S+w+xn)*ae._invScaleX;if(he)Nt.pos=_n,or=Rn+Vn/2+en<=ze,Jt=Rn-Vn/2-en>=0,Nt.idealAlign!=="top"&&or||!Jt?or?(Rn+=Vn/2,Nt.anchor="start"):Nt.anchor="middle":(Rn-=Vn/2,Nt.anchor="end"),Nt.crossPos=Rn;else{if(Nt.pos=Rn,or=_n+In/2+en<=Me,Jt=_n-In/2-en>=0,Nt.idealAlign!=="left"&&or||!Jt)if(or)_n+=In/2,Nt.anchor="start";else{Nt.anchor="middle";var En=en/2,gn=_n+En-Me,Ln=_n-En;gn>0&&(_n-=gn),Ln<0&&(_n+=-Ln)}else _n-=In/2,Nt.anchor="end";Nt.crossPos=_n}ln.attr("text-anchor",Nt.anchor),xn&&mn.attr("text-anchor",Nt.anchor),Bt.attr("transform",h(_n,Rn)+(he?s(v):""))}),{hoverLabels:Wt,commonLabelBoundingBox:dt}}function D(Z,re,oe,ae,ce,he){var pe="",xe="";Z.nameOverride!==void 0&&(Z.name=Z.nameOverride),Z.name&&(Z.trace._meta&&(Z.name=T.templateString(Z.name,Z.trace._meta)),pe=te(Z.name,Z.nameLength));var be=oe.charAt(0),ve=be==="x"?"y":"x";Z.zLabel!==void 0?(Z.xLabel!==void 0&&(xe+="x: "+Z.xLabel+"<br>"),Z.yLabel!==void 0&&(xe+="y: "+Z.yLabel+"<br>"),Z.trace.type!=="choropleth"&&Z.trace.type!=="choroplethmapbox"&&(xe+=(xe?"z: ":"")+Z.zLabel)):re&&Z[be+"Label"]===ce?xe=Z[ve+"Label"]||"":Z.xLabel===void 0?Z.yLabel!==void 0&&Z.trace.type!=="scattercarpet"&&(xe=Z.yLabel):xe=Z.yLabel===void 0?Z.xLabel:"("+Z.xLabel+", "+Z.yLabel+")",!Z.text&&Z.text!==0||Array.isArray(Z.text)||(xe+=(xe?"<br>":"")+Z.text),Z.extraText!==void 0&&(xe+=(xe?"<br>":"")+Z.extraText),he&&xe===""&&!Z.hovertemplate&&(pe===""&&he.remove(),xe=pe);var ge=Z.hovertemplate||!1;if(ge){var we=Z.hovertemplateLabels||Z;Z[be+"Label"]!==ce&&(we[be+"other"]=we[be+"Val"],we[be+"otherLabel"]=we[be+"Label"]),xe=(xe=T.hovertemplateString(ge,we,ae._d3locale,Z.eventData[0]||{},Z.trace._meta)).replace(R,function(_e,se){return pe=te(se,Z.nameLength),""})}return[xe,pe]}function N(Z,re){var oe=0,ae=Z.offset;return re&&(ae*=-f,oe=Z.offset*_),{x:oe,y:ae}}function W(Z,re,oe,ae){var ce=function(pe){return pe*oe},he=function(pe){return pe*ae};Z.each(function(pe){var xe=M.select(this);if(pe.del)return xe.remove();var be,ve,ge,we,_e=xe.select("text.nums"),se=pe.anchor,ie=se==="end"?-1:1,fe=(we=(ge=(ve={start:1,end:-1,middle:0}[(be=pe).anchor])*(S+w))+ve*(be.txwidth+w),be.anchor==="middle"&&(ge-=be.tx2width/2,we+=be.txwidth/2+w),{alignShift:ve,textShiftX:ge,text2ShiftX:we}),Ee=N(pe,re),Te=Ee.x,Ae=Ee.y,Se=se==="middle";xe.select("path").attr("d",Se?"M-"+ce(pe.bx/2+pe.tx2width/2)+","+he(Ae-pe.by/2)+"h"+ce(pe.bx)+"v"+he(pe.by)+"h-"+ce(pe.bx)+"Z":"M0,0L"+ce(ie*S+Te)+","+he(S+Ae)+"v"+he(pe.by/2-S)+"h"+ce(ie*pe.bx)+"v-"+he(pe.by)+"H"+ce(ie*S+Te)+"V"+he(Ae-S)+"Z");var Oe=Te+fe.textShiftX,De=Ae+pe.ty0-pe.by/2+w,de=pe.textAlign||"auto";de!=="auto"&&(de==="left"&&se!=="start"?(_e.attr("text-anchor","start"),Oe=Se?-pe.bx/2-pe.tx2width/2+w:-pe.bx-w):de==="right"&&se!=="end"&&(_e.attr("text-anchor","end"),Oe=Se?pe.bx/2-pe.tx2width/2-w:pe.bx+w)),_e.call(a.positionText,ce(Oe),he(De)),pe.tx2width&&(xe.select("text.name").call(a.positionText,ce(fe.text2ShiftX+fe.alignShift*w+Te),he(Ae+pe.ty0-pe.by/2+w)),xe.select("rect").call(r.setRect,ce(fe.text2ShiftX+(fe.alignShift-1)*pe.tx2width/2+Te),he(Ae-pe.by/2-1),ce(pe.tx2width),he(pe.by+2)))})}function F(Z,re){var oe=Z.index,ae=Z.trace||{},ce=Z.cd[0],he=Z.cd[oe]||{};function pe(_e){return _e||k(_e)&&_e===0}var xe=Array.isArray(oe)?function(_e,se){var ie=T.castOption(ce,oe,_e);return pe(ie)?ie:T.extractOption({},ae,"",se)}:function(_e,se){return T.extractOption(he,ae,_e,se)};function be(_e,se,ie){var fe=xe(se,ie);pe(fe)&&(Z[_e]=fe)}if(be("hoverinfo","hi","hoverinfo"),be("bgcolor","hbg","hoverlabel.bgcolor"),be("borderColor","hbc","hoverlabel.bordercolor"),be("fontFamily","htf","hoverlabel.font.family"),be("fontSize","hts","hoverlabel.font.size"),be("fontColor","htc","hoverlabel.font.color"),be("fontWeight","htw","hoverlabel.font.weight"),be("fontStyle","hty","hoverlabel.font.style"),be("fontVariant","htv","hoverlabel.font.variant"),be("nameLength","hnl","hoverlabel.namelength"),be("textAlign","hta","hoverlabel.align"),Z.posref=re==="y"||re==="closest"&&ae.orientation==="h"?Z.xa._offset+(Z.x0+Z.x1)/2:Z.ya._offset+(Z.y0+Z.y1)/2,Z.x0=T.constrain(Z.x0,0,Z.xa._length),Z.x1=T.constrain(Z.x1,0,Z.xa._length),Z.y0=T.constrain(Z.y0,0,Z.ya._length),Z.y1=T.constrain(Z.y1,0,Z.ya._length),Z.xLabelVal!==void 0&&(Z.xLabel="xLabel"in Z?Z.xLabel:u.hoverLabelText(Z.xa,Z.xLabelVal,ae.xhoverformat),Z.xVal=Z.xa.c2d(Z.xLabelVal)),Z.yLabelVal!==void 0&&(Z.yLabel="yLabel"in Z?Z.yLabel:u.hoverLabelText(Z.ya,Z.yLabelVal,ae.yhoverformat),Z.yVal=Z.ya.c2d(Z.yLabelVal)),Z.zLabelVal!==void 0&&Z.zLabel===void 0&&(Z.zLabel=String(Z.zLabelVal)),!(isNaN(Z.xerr)||Z.xa.type==="log"&&Z.xerr<=0)){var ve=u.tickText(Z.xa,Z.xa.c2l(Z.xerr),"hover").text;Z.xerrneg!==void 0?Z.xLabel+=" +"+ve+" / -"+u.tickText(Z.xa,Z.xa.c2l(Z.xerrneg),"hover").text:Z.xLabel+="  "+ve,re==="x"&&(Z.distance+=1)}if(!(isNaN(Z.yerr)||Z.ya.type==="log"&&Z.yerr<=0)){var ge=u.tickText(Z.ya,Z.ya.c2l(Z.yerr),"hover").text;Z.yerrneg!==void 0?Z.yLabel+=" +"+ge+" / -"+u.tickText(Z.ya,Z.ya.c2l(Z.yerrneg),"hover").text:Z.yLabel+="  "+ge,re==="y"&&(Z.distance+=1)}var we=Z.hoverinfo||Z.trace.hoverinfo;return we&&we!=="all"&&((we=Array.isArray(we)?we:we.split("+")).indexOf("x")===-1&&(Z.xLabel=void 0),we.indexOf("y")===-1&&(Z.yLabel=void 0),we.indexOf("z")===-1&&(Z.zLabel=void 0),we.indexOf("text")===-1&&(Z.text=void 0),we.indexOf("name")===-1&&(Z.name=void 0)),Z}function V(Z,re,oe){var ae,ce,he=oe.container,pe=oe.fullLayout,xe=pe._size,be=oe.event,ve=!!re.hLinePoint,ge=!!re.vLinePoint;if(he.selectAll(".spikeline").remove(),ge||ve){var we=i.combine(pe.plot_bgcolor,pe.paper_bgcolor);if(ve){var _e,se,ie=re.hLinePoint;ae=ie&&ie.xa,(ce=ie&&ie.ya).spikesnap==="cursor"?(_e=be.pointerX,se=be.pointerY):(_e=ae._offset+ie.x,se=ce._offset+ie.y);var fe,Ee,Te=o.readability(ie.color,we)<1.5?i.contrast(we):ie.color,Ae=ce.spikemode,Se=ce.spikethickness,Oe=ce.spikecolor||Te,De=u.getPxPosition(Z,ce);if(Ae.indexOf("toaxis")!==-1||Ae.indexOf("across")!==-1){if(Ae.indexOf("toaxis")!==-1&&(fe=De,Ee=_e),Ae.indexOf("across")!==-1){var de=ce._counterDomainMin,me=ce._counterDomainMax;ce.anchor==="free"&&(de=Math.min(de,ce.position),me=Math.max(me,ce.position)),fe=xe.l+de*xe.w,Ee=xe.l+me*xe.w}he.insert("line",":first-child").attr({x1:fe,x2:Ee,y1:se,y2:se,"stroke-width":Se,stroke:Oe,"stroke-dasharray":r.dashStyle(ce.spikedash,Se)}).classed("spikeline",!0).classed("crisp",!0),he.insert("line",":first-child").attr({x1:fe,x2:Ee,y1:se,y2:se,"stroke-width":Se+2,stroke:we}).classed("spikeline",!0).classed("crisp",!0)}Ae.indexOf("marker")!==-1&&he.insert("circle",":first-child").attr({cx:De+(ce.side!=="right"?Se:-Se),cy:se,r:Se,fill:Oe}).classed("spikeline",!0)}if(ge){var Me,ze,Pe=re.vLinePoint;ae=Pe&&Pe.xa,ce=Pe&&Pe.ya,ae.spikesnap==="cursor"?(Me=be.pointerX,ze=be.pointerY):(Me=ae._offset+Pe.x,ze=ce._offset+Pe.y);var Ne,Ve,Ye=o.readability(Pe.color,we)<1.5?i.contrast(we):Pe.color,at=ae.spikemode,rt=ae.spikethickness,dt=ae.spikecolor||Ye,vt=u.getPxPosition(Z,ae);if(at.indexOf("toaxis")!==-1||at.indexOf("across")!==-1){if(at.indexOf("toaxis")!==-1&&(Ne=vt,Ve=ze),at.indexOf("across")!==-1){var ht=ae._counterDomainMin,et=ae._counterDomainMax;ae.anchor==="free"&&(ht=Math.min(ht,ae.position),et=Math.max(et,ae.position)),Ne=xe.t+(1-et)*xe.h,Ve=xe.t+(1-ht)*xe.h}he.insert("line",":first-child").attr({x1:Me,x2:Me,y1:Ne,y2:Ve,"stroke-width":rt,stroke:dt,"stroke-dasharray":r.dashStyle(ae.spikedash,rt)}).classed("spikeline",!0).classed("crisp",!0),he.insert("line",":first-child").attr({x1:Me,x2:Me,y1:Ne,y2:Ve,"stroke-width":rt+2,stroke:we}).classed("spikeline",!0).classed("crisp",!0)}at.indexOf("marker")!==-1&&he.insert("circle",":first-child").attr({cx:Me,cy:vt-(ae.side!=="top"?rt:-rt),r:rt,fill:dt}).classed("spikeline",!0)}}}function U(Z,re){return!0}function te(Z,re){return a.plainText(Z||"",{len:re,allowedTags:["br","sub","sup","b","i","em"]})}function J(Z,re,oe){var ae=re[Z+"a"],ce=re[Z+"Val"],he=re.cd[0];if(ae.type==="category"||ae.type==="multicategory")ce=ae._categoriesMap[ce];else if(ae.type==="date"){var pe=re.trace[Z+"periodalignment"];if(pe){var xe=re.cd[re.index],be=xe[Z+"Start"];be===void 0&&(be=xe[Z]);var ve=xe[Z+"End"];ve===void 0&&(ve=xe[Z]);var ge=ve-be;pe==="end"?ce+=ge:pe==="middle"&&(ce+=ge/2)}ce=ae.d2c(ce)}return he&&he.t&&he.t.posLetter===ae._id&&(oe.boxmode!=="group"&&oe.violinmode!=="group"||(ce+=he.t.dPos)),ce}function X(Z){return Z.offsetTop+Z.clientTop}function K(Z){return Z.offsetLeft+Z.clientLeft}function Q(Z,re){var oe=Z._fullLayout,ae=re.getBoundingClientRect(),ce=ae.left,he=ae.top,pe=ce+ae.width,xe=he+ae.height,be=T.apply3DTransform(oe._invTransform)(ce,he),ve=T.apply3DTransform(oe._invTransform)(pe,xe),ge=be[0],we=be[1],_e=ve[0],se=ve[1];return{x:ge,y:we,width:_e-ge,height:se-we,top:Math.min(we,se),left:Math.min(ge,_e),right:Math.max(ge,_e),bottom:Math.max(we,se)}}},16132:function(ee,z,e){var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover;ee.exports=function(T,b,h,s){s=s||{};var t=b.legend;function a(n){s.font[n]||(s.font[n]=t?b.legend.font[n]:b.font[n])}b&&o(b.hovermode)&&(s.font||(s.font={}),a("size"),a("family"),a("color"),a("weight"),a("style"),a("variant"),t?(s.bgcolor||(s.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),h("hoverlabel.bgcolor",s.bgcolor),h("hoverlabel.bordercolor",s.bordercolor),h("hoverlabel.namelength",s.namelength),M.coerceFont(h,"hoverlabel.font",s.font),h("hoverlabel.align",s.align)}},41008:function(ee,z,e){var M=e(3400),k=e(65460);ee.exports=function(o,T){function b(h,s){return T[h]!==void 0?T[h]:M.coerce(o,T,k,h,s)}return b("clickmode"),b("hoversubplots"),b("hovermode")}},93024:function(ee,z,e){var M=e(33428),k=e(3400),o=e(86476),T=e(10624),b=e(65460),h=e(83292);ee.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:b},attributes:e(55756),layoutAttributes:b,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,a){return k.castOption(s,t,"hoverlabel."+a)},castHoverinfo:function(s,t,a){return k.castOption(s,a,"hoverinfo",function(n){return k.coerceHoverinfo({hoverinfo:n},{_module:s._module},t)})},hover:h.hover,unhover:o.unhover,loneHover:h.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:M.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(ee,z,e){var M=e(92456),k=e(25376),o=k({editType:"none"});o.family.dflt=M.HOVERFONT,o.size.dflt=M.HOVERFONTSIZE,ee.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(ee,z,e){var M=e(3400),k=e(65460),o=e(41008),T=e(16132);ee.exports=function(b,h){function s(r,i){return M.coerce(b,h,k,r,i)}o(b,h)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=h._has("mapbox"),a=h._has("geo"),n=h._basePlotModules.length;h.dragmode==="zoom"&&((t||a)&&n===1||t&&a&&n===2)&&(h.dragmode="pan"),T(b,h,s),M.coerceFont(s,"hoverlabel.grouptitlefont",h.hoverlabel.font)}},81976:function(ee,z,e){var M=e(3400),k=e(16132),o=e(65460);ee.exports=function(T,b){k(T,b,function(h,s){return M.coerce(T,b,o,h,s)})}},12704:function(ee,z,e){var M=e(3400),k=e(53756).counter,o=e(86968).u,T=e(33816).idRegex,b=e(31780),h={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(n,r,i){var l=r[i+"axes"],u=Object.keys((n._splomAxes||{})[i]||{});return Array.isArray(l)?l:u.length?u:void 0}function t(n,r,i,l,u,p){var c=r(n+"gap",i),x=r("domain."+n);r(n+"side",l);for(var d=new Array(u),g=x[0],v=(x[1]-g)/(u-c),y=v*(1-c),m=0;m<u;m++){var _=g+v*m;d[p?u-1-m:m]=[_,_+y]}return d}function a(n,r,i,l,u){var p,c=new Array(i);function x(d,g){r.indexOf(g)!==-1&&l[g]===void 0?(c[d]=g,l[g]=d):c[d]=""}if(Array.isArray(n))for(p=0;p<i;p++)x(p,n[p]);else for(x(0,u),p=1;p<i;p++)x(p,u+(p+1));return c}ee.exports={moduleType:"component",name:"grid",schema:{layout:{grid:h}},layoutAttributes:h,sizeDefaults:function(n,r){var i=n.grid||{},l=s(r,i,"x"),u=s(r,i,"y");if(n.grid||l||u){var p,c,x=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),d=Array.isArray(l),g=Array.isArray(u),v=d&&l!==i.xaxes&&g&&u!==i.yaxes;x?(p=i.subplots.length,c=i.subplots[0].length):(g&&(p=u.length),d&&(c=l.length));var y=b.newContainer(r,"grid"),m=C("rows",p),_=C("columns",c);if(m*_>1){x||d||g||C("pattern")==="independent"&&(x=!0),y._hasSubplotGrid=x;var f,S,w=C("roworder")==="top to bottom",E=x?.2:.1,O=x?.3:.1;v&&r._splomGridDflt&&(f=r._splomGridDflt.xside,S=r._splomGridDflt.yside),y._domains={x:t("x",C,E,f,_),y:t("y",C,O,S,m,w)}}else delete r.grid}function C(P,R){return M.coerce(i,y,h,P,R)}},contentDefaults:function(n,r){var i=r.grid;if(i&&i._domains){var l,u,p,c,x,d,g,v=n.grid||{},y=r._subplots,m=i._hasSubplotGrid,_=i.rows,f=i.columns,S=i.pattern==="independent",w=i._axisMap={};if(m){var E=v.subplots||[];d=i.subplots=new Array(_);var O=1;for(l=0;l<_;l++){var C=d[l]=new Array(f),P=E[l]||[];for(u=0;u<f;u++)if(S?(x=O===1?"xy":"x"+O+"y"+O,O++):x=P[u],C[u]="",y.cartesian.indexOf(x)!==-1){if(g=x.indexOf("y"),p=x.slice(0,g),c=x.slice(g),w[p]!==void 0&&w[p]!==u||w[c]!==void 0&&w[c]!==l)continue;C[u]=x,w[p]=u,w[c]=l}}}else{var R=s(r,v,"x"),j=s(r,v,"y");i.xaxes=a(R,y.xaxis,f,w,"x"),i.yaxes=a(j,y.yaxis,_,w,"y")}var D=i._anchors={},N=i.roworder==="top to bottom";for(var W in w){var F,V,U,te=W.charAt(0),J=i[te+"side"];if(J.length<8)D[W]="free";else if(te==="x"){if(J.charAt(0)==="t"===N?(F=0,V=1,U=_):(F=_-1,V=-1,U=-1),m){var X=w[W];for(l=F;l!==U;l+=V)if((x=d[l][X])&&(g=x.indexOf("y"),x.slice(0,g)===W)){D[W]=x.slice(g);break}}else for(l=F;l!==U;l+=V)if(c=i.yaxes[l],y.cartesian.indexOf(W+c)!==-1){D[W]=c;break}}else if(J.charAt(0)==="l"?(F=0,V=1,U=f):(F=f-1,V=-1,U=-1),m){var K=w[W];for(l=F;l!==U;l+=V)if((x=d[K][l])&&(g=x.indexOf("y"),x.slice(g)===W)){D[W]=x.slice(0,g);break}}else for(l=F;l!==U;l+=V)if(p=i.xaxes[l],y.cartesian.indexOf(p+W)!==-1){D[W]=p;break}}}}}},65760:function(ee,z,e){var M=e(33816),k=e(31780).templatedArray;e(36208),ee.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(ee,z,e){var M=e(38248),k=e(36896);ee.exports=function(o,T,b,h){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t){for(var a,n,r=o._fullLayout.images,i=T._id.charAt(0),l=0;l<r.length;l++)if(n="images["+l+"].",(a=r[l])[i+"ref"]===T._id){var u=a[i],p=a["size"+i],c=null,x=null;if(s){c=k(u,T.range);var d=p/Math.pow(10,c)/2;x=2*Math.log(d+Math.sqrt(1+d*d))/Math.LN10}else x=(c=Math.pow(10,u))*(Math.pow(10,p/2)-Math.pow(10,-p/2));M(c)?M(x)||(x=null):(c=null,x=null),h(n+i,c),h(n+"size"+i,x)}}}},25024:function(ee,z,e){var M=e(3400),k=e(54460),o=e(51272),T=e(65760);function b(h,s,t){function a(c,x){return M.coerce(h,s,T,c,x)}var n=a("source");if(!a("visible",!!n))return s;a("layer"),a("xanchor"),a("yanchor"),a("sizex"),a("sizey"),a("sizing"),a("opacity");for(var r={_fullLayout:t},i=["x","y"],l=0;l<2;l++){var u=i[l],p=k.coerceRef(h,s,r,u,"paper",void 0);p!=="paper"&&k.getFromId(r,p)._imgIndices.push(s._index),k.coercePosition(s,r,a,p,u,0)}return s}ee.exports=function(h,s){o(h,s,{name:"images",handleItemDefaults:b})}},60963:function(ee,z,e){var M=e(33428),k=e(43616),o=e(54460),T=e(79811),b=e(9616);ee.exports=function(h){var s,t,a=h._fullLayout,n=[],r={},i=[];for(t=0;t<a.images.length;t++){var l=a.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){s=T.ref2id(l.xref)+T.ref2id(l.yref);var u=a._plots[s];if(!u){i.push(l);continue}u.mainplot&&(s=u.mainplot.id),r[s]||(r[s]=[]),r[s].push(l)}else l.layer==="above"?n.push(l):i.push(l)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(f){var S=M.select(this);if(this._imgSrc!==f.source)if(S.attr("xmlns",b.svg),f.source&&f.source.slice(0,5)==="data:")S.attr("xlink:href",f.source),this._imgSrc=f.source;else{var w=new Promise((function(E){var O=new Image;function C(){S.remove(),E()}this.img=O,O.setAttribute("crossOrigin","anonymous"),O.onerror=C,O.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var R=P.toDataURL("image/png");S.attr("xlink:href",R),E()},S.on("error",C),O.src=f.source,this._imgSrc=f.source}).bind(this));h._promises.push(w)}}function d(f){var S,w,E=M.select(this),O=o.getFromId(h,f.xref),C=o.getFromId(h,f.yref),P=o.getRefType(f.xref)==="domain",R=o.getRefType(f.yref)==="domain",j=a._size;S=O!==void 0?typeof f.xref=="string"&&P?O._length*f.sizex:Math.abs(O.l2p(f.sizex)-O.l2p(0)):f.sizex*j.w,w=C!==void 0?typeof f.yref=="string"&&R?C._length*f.sizey:Math.abs(C.l2p(f.sizey)-C.l2p(0)):f.sizey*j.h;var D,N,W=S*p[f.xanchor].offset,F=w*c[f.yanchor].offset,V=p[f.xanchor].sizing+c[f.yanchor].sizing;switch(D=O!==void 0?typeof f.xref=="string"&&P?O._length*f.x+O._offset:O.r2p(f.x)+O._offset:f.x*j.w+j.l,D+=W,N=C!==void 0?typeof f.yref=="string"&&R?C._length*(1-f.y)+C._offset:C.r2p(f.y)+C._offset:j.h-f.y*j.h+j.t,N+=F,f.sizing){case"fill":V+=" slice";break;case"stretch":V="none"}E.attr({x:D,y:N,width:S,height:w,preserveAspectRatio:V,opacity:f.opacity});var U=(O&&o.getRefType(f.xref)!=="domain"?O._id:"")+(C&&o.getRefType(f.yref)!=="domain"?C._id:"");k.setClipUrl(E,U?"clip"+a._uid+U:null,h)}var g=a._imageLowerLayer.selectAll("image").data(i),v=a._imageUpperLayer.selectAll("image").data(n);g.enter().append("image"),v.enter().append("image"),g.exit().remove(),v.exit().remove(),g.each(function(f){x.bind(this)(f),d.bind(this)(f)}),v.each(function(f){x.bind(this)(f),d.bind(this)(f)});var y=Object.keys(a._plots);for(t=0;t<y.length;t++){s=y[t];var m=a._plots[s];if(m.imagelayer){var _=m.imagelayer.selectAll("image").data(r[s]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(f){x.bind(this)(f),d.bind(this)(f)})}}}},7402:function(ee,z,e){ee.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(ee,z,e){var M=e(25376),k=e(22548);ee.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(ee){ee.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(ee,z,e){var M=e(24040),k=e(3400),o=e(31780),T=e(45464),b=e(3800),h=e(64859),s=e(42451);function t(a,n,r,i){var l=n[a]||{},u=o.newContainer(r,a);function p(V,U){return k.coerce(l,u,b,V,U)}var c=k.coerceFont(p,"font",r.font);if(p("bgcolor",r.paper_bgcolor),p("bordercolor"),p("visible")){for(var x,d=function(V,U){var te=x._input,J=x;return k.coerce(te,J,T,V,U)},g=r.font||{},v=k.coerceFont(p,"grouptitlefont",k.extendFlat({},g,{size:Math.round(1.1*g.size)})),y=0,m=!1,_="normal",f=(r.shapes||[]).filter(function(V){return V.showlegend}),S=i.concat(f).filter(function(V){return a===(V.legend||"legend")}),w=0;w<S.length;w++)if((x=S[w]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(y++,x.showlegend&&(m=!0,(!E&&M.traceIs(x,"pie-like")||x._input.showlegend===!0)&&y++),k.coerceFont(d,"legendgrouptitle.font",v)),(!E&&M.traceIs(x,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(_=s.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(_=s.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var O=k.coerce(n,r,h,"showlegend",m&&y>(a==="legend"?1:0));if(O===!1&&(r[a]=void 0),(O!==!1||l.uirevision)&&(p("uirevision",r.uirevision),O!==!1)){p("borderwidth");var C,P,R,j=p("orientation")==="h",D=p("yref")==="paper",N=p("xref")==="paper",W="left";if(j?(C=0,M.getComponentMethod("rangeslider","isVisible")(n.xaxis)?D?(P=1.1,R="bottom"):(P=1,R="top"):D?(P=-.1,R="top"):(P=0,R="bottom")):(P=1,R="auto",N?C=1.02:(C=1,W="right")),k.coerce(l,u,{x:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:C}},"x"),k.coerce(l,u,{y:{valType:"number",editType:"legend",min:D?-2:0,max:D?3:1,dflt:P}},"y"),p("traceorder",_),s.isGrouped(r[a])&&p("tracegroupgap"),p("entrywidth"),p("entrywidthmode"),p("indentation"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("xanchor",W),p("yanchor",R),p("valign"),k.noneOrAll(l,u,["x","y"]),p("title.text")){p("title.side",j?"left":"top");var F=k.extendFlat({},c,{size:k.bigFont(c.size)});k.coerceFont(p,"title.font",F)}}}}ee.exports=function(a,n,r){var i,l=r.slice(),u=n.shapes;if(u)for(i=0;i<u.length;i++){var p=u[i];if(p.showlegend){var c={_input:p._input,visible:p.visible,showlegend:p.showlegend,legend:p.legend};l.push(c)}}var x=["legend"];for(i=0;i<l.length;i++)k.pushUnique(x,l[i].legend);for(n._legends=[],i=0;i<x.length;i++){var d=x[i];t(d,a,n,l),n[d]&&n[d].visible&&(n[d]._id=d),n._legends.push(d)}}},31140:function(ee,z,e){var M=e(33428),k=e(3400),o=e(7316),T=e(24040),b=e(95924),h=e(86476),s=e(43616),t=e(76308),a=e(72736),n=e(33048),r=e(65196),i=e(84284),l=i.LINE_SPACING,u=i.FROM_TL,p=i.FROM_BR,c=e(35456),x=e(2012),d=e(42451),g=1,v=/^legend[0-9]*$/;function y(R,j){var D,N,W=j||{},F=R._fullLayout,V=P(W),U=W._inHover;if(U?(N=W.layer,D="hover"):(N=F._infolayer,D=V),N){var te;if(D+=F._uid,R._legendMouseDownTime||(R._legendMouseDownTime=0),U){if(!W.entries)return;te=c(W.entries,W)}else{for(var J=(R.calcdata||[]).slice(),X=F.shapes,K=0;K<X.length;K++){var Q=X[K];if(Q.showlegend){var Z={_isShape:!0,_fullInput:Q,index:Q._index,name:Q.name||Q.label.text||"shape "+Q._index,legend:Q.legend,legendgroup:Q.legendgroup,legendgrouptitle:Q.legendgrouptitle,legendrank:Q.legendrank,legendwidth:Q.legendwidth,showlegend:Q.showlegend,visible:Q.visible,opacity:Q.opacity,mode:Q.type==="line"?"lines":"markers",line:Q.line,marker:{line:Q.line,color:Q.fillcolor,size:12,symbol:Q.type==="rect"?"square":Q.type==="circle"?"circle":"hexagon2"}};J.push([{trace:Z}])}}te=F.showlegend&&c(J,W,F._legends.length>1)}var re=F.hiddenlabels||[];if(!(U||F.showlegend&&te.length))return N.selectAll("."+V).remove(),F._topdefs.select("#"+D).remove(),o.autoMargin(R,V);var oe=k.ensureSingle(N,"g",V,function(we){U||we.attr("pointer-events","all")}),ae=k.ensureSingleById(F._topdefs,"clipPath",D,function(we){we.append("rect")}),ce=k.ensureSingle(oe,"rect","bg",function(we){we.attr("shape-rendering","crispEdges")});ce.call(t.stroke,W.bordercolor).call(t.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px");var he,pe=k.ensureSingle(oe,"g","scrollbox"),xe=W.title;W._titleWidth=0,W._titleHeight=0,xe.text?((he=k.ensureSingle(pe,"text",V+"titletext")).attr("text-anchor","start").call(s.font,xe.font).text(xe.text),E(he,pe,R,W,g)):pe.selectAll("."+V+"titletext").remove();var be=k.ensureSingle(oe,"rect","scrollbar",function(we){we.attr(r.scrollBarEnterAttrs).call(t.fill,r.scrollBarColor)}),ve=pe.selectAll("g.groups").data(te);ve.enter().append("g").attr("class","groups"),ve.exit().remove();var ge=ve.selectAll("g.traces").data(k.identity);ge.enter().append("g").attr("class","traces"),ge.exit().remove(),ge.style("opacity",function(we){var _e=we[0].trace;return T.traceIs(_e,"pie-like")?re.indexOf(we[0].label)!==-1?.5:1:_e.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(f,R,W)}).call(x,R,W).each(function(){U||M.select(this).call(w,R,V)}),k.syncOrAsync([o.previousPromises,function(){return function(we,_e,se,ie){var fe=we._fullLayout,Ee=P(ie);ie||(ie=fe[Ee]);var Te=fe._size,Ae=d.isVertical(ie),Se=d.isGrouped(ie),Oe=ie.entrywidthmode==="fraction",De=ie.borderwidth,de=2*De,me=r.itemGap,Me=ie.indentation+ie.itemwidth+2*me,ze=2*(De+me),Pe=C(ie),Ne=ie.y<0||ie.y===0&&Pe==="top",Ve=ie.y>1||ie.y===1&&Pe==="bottom",Ye=ie.tracegroupgap,at={};ie._maxHeight=Math.max(Ne||Ve?fe.height/2:Te.h,30);var rt=0;ie._width=0,ie._height=0;var dt=function(pt){var gt=0,ut=0,kt=pt.title.side;return kt&&(kt.indexOf("left")!==-1&&(gt=pt._titleWidth),kt.indexOf("top")!==-1&&(ut=pt._titleHeight)),[gt,ut]}(ie);if(Ae)se.each(function(pt){var gt=pt[0].height;s.setTranslate(this,De+dt[0],De+dt[1]+ie._height+gt/2+me),ie._height+=gt,ie._width=Math.max(ie._width,pt[0].width)}),rt=Me+ie._width,ie._width+=me+Me+de,ie._height+=ze,Se&&(_e.each(function(pt,gt){s.setTranslate(this,0,gt*ie.tracegroupgap)}),ie._height+=(ie._lgroupsLength-1)*ie.tracegroupgap);else{var vt=O(ie),ht=ie.x<0||ie.x===0&&vt==="right",et=ie.x>1||ie.x===1&&vt==="left",$e=Ve||Ne,wt=fe.width/2;ie._maxWidth=Math.max(ht?$e&&vt==="left"?Te.l+Te.w:wt:et?$e&&vt==="right"?Te.r+Te.w:wt:Te.w,2*Me);var Pt=0,Ot=0;se.each(function(pt){var gt=m(pt,ie,Me);Pt=Math.max(Pt,gt),Ot+=gt}),rt=null;var At=0;if(Se){var He=0,Ze=0,Be=0;_e.each(function(){var pt=0,gt=0;M.select(this).selectAll("g.traces").each(function(kt){var yt=m(kt,ie,Me),Mt=kt[0].height;s.setTranslate(this,dt[0],dt[1]+De+me+Mt/2+gt),gt+=Mt,pt=Math.max(pt,yt),at[kt[0].trace.legendgroup]=pt});var ut=pt+me;Ze>0&&ut+De+Ze>ie._maxWidth?(At=Math.max(At,Ze),Ze=0,Be+=He+Ye,He=gt):He=Math.max(He,gt),s.setTranslate(this,Ze,Be),Ze+=ut}),ie._width=Math.max(At,Ze)+De,ie._height=Be+He+ze}else{var Ge=se.size(),it=Ot+de+(Ge-1)*me<ie._maxWidth,tt=0,Re=0,Fe=0,nt=0;se.each(function(pt){var gt=pt[0].height,ut=m(pt,ie,Me),kt=it?ut:Pt;Oe||(kt+=me),kt+De+Re-me>=ie._maxWidth&&(At=Math.max(At,nt),Re=0,Fe+=tt,ie._height+=tt,tt=0),s.setTranslate(this,dt[0]+De+Re,dt[1]+De+Fe+gt/2+me),nt=Re+ut+me,Re+=kt,tt=Math.max(tt,gt)}),it?(ie._width=Re+de,ie._height=tt+ze):(ie._width=Math.max(At,nt)+de,ie._height+=tt+ze)}}ie._width=Math.ceil(Math.max(ie._width+dt[0],ie._titleWidth+2*(De+r.titlePad))),ie._height=Math.ceil(Math.max(ie._height+dt[1],ie._titleHeight+2*(De+r.itemGap))),ie._effHeight=Math.min(ie._height,ie._maxHeight);var We=we._context.edits,ct=We.legendText||We.legendPosition;se.each(function(pt){var gt=M.select(this).select("."+Ee+"toggle"),ut=pt[0].height,kt=pt[0].trace.legendgroup,yt=m(pt,ie,Me);Se&&kt!==""&&(yt=at[kt]);var Mt=ct?Me:rt||yt;Ae||Oe||(Mt+=me/2),s.setRect(gt,0,-ut/2,Mt,ut)})}(R,ve,ge,W)},function(){var we,_e,se,ie,fe=F._size,Ee=W.borderwidth,Te=W.xref==="paper",Ae=W.yref==="paper";if(xe.text&&function($e,wt,Pt){if(wt.title.side==="top center"||wt.title.side==="top right"){var Ot=wt.title.font.size*l,At=0,He=$e.node(),Ze=s.bBox(He).width;wt.title.side==="top center"?At=.5*(wt._width-2*Pt-2*r.titlePad-Ze):wt.title.side==="top right"&&(At=wt._width-2*Pt-2*r.titlePad-Ze),a.positionText($e,Pt+r.titlePad+At,Pt+Ot)}}(he,W,Ee),!U){var Se,Oe;Se=Te?fe.l+fe.w*W.x-u[O(W)]*W._width:F.width*W.x-u[O(W)]*W._width,Oe=Ae?fe.t+fe.h*(1-W.y)-u[C(W)]*W._effHeight:F.height*(1-W.y)-u[C(W)]*W._effHeight;var De=function($e,wt,Pt,Ot){var At=$e._fullLayout,He=At[wt],Ze=O(He),Be=C(He),Ge=He.xref==="paper",it=He.yref==="paper";$e._fullLayout._reservedMargin[wt]={};var tt=He.y<.5?"b":"t",Re=He.x<.5?"l":"r",Fe={r:At.width-Pt,l:Pt+He._width,b:At.height-Ot,t:Ot+He._effHeight};if(Ge&&it)return o.autoMargin($e,wt,{x:He.x,y:He.y,l:He._width*u[Ze],r:He._width*p[Ze],b:He._effHeight*p[Be],t:He._effHeight*u[Be]});Ge?$e._fullLayout._reservedMargin[wt][tt]=Fe[tt]:it||He.orientation==="v"?$e._fullLayout._reservedMargin[wt][Re]=Fe[Re]:$e._fullLayout._reservedMargin[wt][tt]=Fe[tt]}(R,V,Se,Oe);if(De)return;if(F.margin.autoexpand){var de=Se,me=Oe;Se=Te?k.constrain(Se,0,F.width-W._width):de,Oe=Ae?k.constrain(Oe,0,F.height-W._effHeight):me,Se!==de&&k.log("Constrain "+V+".x to make legend fit inside graph"),Oe!==me&&k.log("Constrain "+V+".y to make legend fit inside graph")}s.setTranslate(oe,Se,Oe)}if(be.on(".drag",null),oe.on("wheel",null),U||W._height<=W._maxHeight||R._context.staticPlot){var Me=W._effHeight;U&&(Me=W._height),ce.attr({width:W._width-Ee,height:Me-Ee,x:Ee/2,y:Ee/2}),s.setTranslate(pe,0,0),ae.select("rect").attr({width:W._width-2*Ee,height:Me-2*Ee,x:Ee,y:Ee}),s.setClipUrl(pe,D,R),s.setRect(be,0,0,0,0),delete W._scrollY}else{var ze,Pe,Ne,Ve=Math.max(r.scrollBarMinHeight,W._effHeight*W._effHeight/W._height),Ye=W._effHeight-Ve-2*r.scrollBarMargin,at=W._height-W._effHeight,rt=Ye/at,dt=Math.min(W._scrollY||0,at);ce.attr({width:W._width-2*Ee+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-Ee,x:Ee/2,y:Ee/2}),ae.select("rect").attr({width:W._width-2*Ee+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-2*Ee,x:Ee,y:Ee+dt}),s.setClipUrl(pe,D,R),et(dt,Ve,rt),oe.on("wheel",function(){et(dt=k.constrain(W._scrollY+M.event.deltaY/Ye*at,0,at),Ve,rt),dt!==0&&dt!==at&&M.event.preventDefault()});var vt=M.behavior.drag().on("dragstart",function(){var $e=M.event.sourceEvent;ze=$e.type==="touchstart"?$e.changedTouches[0].clientY:$e.clientY,Ne=dt}).on("drag",function(){var $e=M.event.sourceEvent;$e.buttons===2||$e.ctrlKey||(Pe=$e.type==="touchmove"?$e.changedTouches[0].clientY:$e.clientY,dt=function(wt,Pt,Ot){var At=(Ot-Pt)/rt+wt;return k.constrain(At,0,at)}(Ne,ze,Pe),et(dt,Ve,rt))});be.call(vt);var ht=M.behavior.drag().on("dragstart",function(){var $e=M.event.sourceEvent;$e.type==="touchstart"&&(ze=$e.changedTouches[0].clientY,Ne=dt)}).on("drag",function(){var $e=M.event.sourceEvent;$e.type==="touchmove"&&(Pe=$e.changedTouches[0].clientY,dt=function(wt,Pt,Ot){var At=(Pt-Ot)/rt+wt;return k.constrain(At,0,at)}(Ne,ze,Pe),et(dt,Ve,rt))});pe.call(ht)}function et($e,wt,Pt){W._scrollY=R._fullLayout[V]._scrollY=$e,s.setTranslate(pe,0,-$e),s.setRect(be,W._width,r.scrollBarMargin+$e*Pt,r.scrollBarWidth,wt),ae.select("rect").attr("y",Ee+$e)}R._context.edits.legendPosition&&(oe.classed("cursor-move",!0),h.init({element:oe.node(),gd:R,prepFn:function(){var $e=s.getTranslate(oe);se=$e.x,ie=$e.y},moveFn:function($e,wt){var Pt=se+$e,Ot=ie+wt;s.setTranslate(oe,Pt,Ot),we=h.align(Pt,W._width,fe.l,fe.l+fe.w,W.xanchor),_e=h.align(Ot+W._height,-W._height,fe.t+fe.h,fe.t,W.yanchor)},doneFn:function(){if(we!==void 0&&_e!==void 0){var $e={};$e[V+".x"]=we,$e[V+".y"]=_e,T.call("_guiRelayout",R,$e)}},clickFn:function($e,wt){var Pt=N.selectAll("g.traces").filter(function(){var Ot=this.getBoundingClientRect();return wt.clientX>=Ot.left&&wt.clientX<=Ot.right&&wt.clientY>=Ot.top&&wt.clientY<=Ot.bottom});Pt.size()>0&&_(R,oe,Pt,$e,wt)}}))}],R)}}function m(R,j,D){var N=R[0],W=N.width,F=j.entrywidthmode,V=N.trace.legendwidth||j.entrywidth;return F==="fraction"?j._maxWidth*V:D+(V||W)}function _(R,j,D,N,W){var F=D.data()[0][0].trace,V={event:W,node:D.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};F._group&&(V.group=F._group),T.traceIs(F,"pie-like")&&(V.label=D.datum()[0].label);var U=b.triggerHandler(R,"plotly_legendclick",V);if(N===1){if(U===!1)return;j._clickTimeout=setTimeout(function(){R._fullLayout&&n(D,R,N)},R._context.doubleClickDelay)}else N===2&&(j._clickTimeout&&clearTimeout(j._clickTimeout),R._legendMouseDownTime=0,b.triggerHandler(R,"plotly_legenddoubleclick",V)!==!1&&U!==!1&&n(D,R,N))}function f(R,j,D){var N,W,F=P(D),V=R.data()[0][0],U=V.trace,te=T.traceIs(U,"pie-like"),J=!D._inHover&&j._context.edits.legendText&&!te,X=D._maxNameLength;V.groupTitle?(N=V.groupTitle.text,W=V.groupTitle.font):(W=D.font,D.entries?N=V.text:(N=te?V.label:U.name,U._meta&&(N=k.templateString(N,U._meta))));var K=k.ensureSingle(R,"text",F+"text");K.attr("text-anchor","start").call(s.font,W).text(J?S(N,X):N);var Q=D.indentation+D.itemwidth+2*r.itemGap;a.positionText(K,Q,0),J?K.call(a.makeEditable,{gd:j,text:N}).call(E,R,j,D).on("edit",function(Z){this.text(S(Z,X)).call(E,R,j,D);var re=V.trace._fullInput||{},oe={};if(T.hasTransform(re,"groupby")){var ae=T.getTransformIndices(re,"groupby"),ce=ae[ae.length-1],he=k.keyedContainer(re,"transforms["+ce+"].styles","target","value.name");he.set(V.trace._group,Z),oe=he.constructUpdate()}else oe.name=Z;return re._isShape?T.call("_guiRelayout",j,"shapes["+U.index+"].name",oe.name):T.call("_guiRestyle",j,oe,U.index)}):E(K,R,j,D)}function S(R,j){var D=Math.max(4,j);if(R&&R.trim().length>=D/2)return R;for(var N=D-(R=R||"").length;N>0;N--)R+=" ";return R}function w(R,j,D){var N,W=j._context.doubleClickDelay,F=1,V=k.ensureSingle(R,"rect",D+"toggle",function(U){j._context.staticPlot||U.style("cursor","pointer").attr("pointer-events","all"),U.call(t.fill,"rgba(0,0,0,0)")});j._context.staticPlot||(V.on("mousedown",function(){(N=new Date().getTime())-j._legendMouseDownTime<W?F+=1:(F=1,j._legendMouseDownTime=N)}),V.on("mouseup",function(){if(!j._dragged&&!j._editing){var U=j._fullLayout[D];new Date().getTime()-j._legendMouseDownTime>W&&(F=Math.max(F-1,1)),_(j,U,R,F,M.event)}}))}function E(R,j,D,N,W){N._inHover&&R.attr("data-notex",!0),a.convertToTspans(R,D,function(){(function(F,V,U,te){var J=F.data()[0][0];if(U._inHover||!J||J.trace.showlegend){var X=F.select("g[class*=math-group]"),K=X.node(),Q=P(U);U||(U=V._fullLayout[Q]);var Z,re,oe=U.borderwidth,ae=(te===g?U.title.font:J.groupTitle?J.groupTitle.font:U.font).size*l;if(K){var ce=s.bBox(K);Z=ce.height,re=ce.width,te===g?s.setTranslate(X,oe,oe+.75*Z):s.setTranslate(X,0,.25*Z)}else{var he="."+Q+(te===g?"title":"")+"text",pe=F.select(he),xe=a.lineCount(pe),be=pe.node();if(Z=ae*xe,re=be?s.bBox(be).width:0,te===g)U.title.side==="left"&&(re+=2*r.itemGap),a.positionText(pe,oe+r.titlePad,oe+ae);else{var ve=2*r.itemGap+U.indentation+U.itemwidth;J.groupTitle&&(ve=r.itemGap,re-=U.indentation+U.itemwidth),a.positionText(pe,ve,-ae*((xe-1)/2-.3))}}te===g?(U._titleWidth=re,U._titleHeight=Z):(J.lineHeight=ae,J.height=Math.max(Z,16)+3,J.width=re)}else F.remove()})(j,D,N,W)})}function O(R){return k.isRightAnchor(R)?"right":k.isCenterAnchor(R)?"center":"left"}function C(R){return k.isBottomAnchor(R)?"bottom":k.isMiddleAnchor(R)?"middle":"top"}function P(R){return R._id||"legend"}ee.exports=function(R,j){if(j)y(R,j);else{var D=R._fullLayout,N=D._legends;D._infolayer.selectAll('[class^="legend"]').each(function(){var V=M.select(this),U=V.attr("class").split(" ")[0];U.match(v)&&N.indexOf(U)===-1&&V.remove()});for(var W=0;W<N.length;W++){var F=N[W];y(R,R._fullLayout[F])}}}},35456:function(ee,z,e){var M=e(24040),k=e(42451);ee.exports=function(o,T,b){var h,s,t=T._inHover,a=k.isGrouped(T),n=k.isReversed(T),r={},i=[],l=!1,u={},p=0,c=0;function x(N,W,F){if(T.visible!==!1&&(!b||N===T._id))if(W!==""&&k.isGrouped(T))i.indexOf(W)===-1?(i.push(W),l=!0,r[W]=[F]):r[W].push(F);else{var V="~~i"+p;i.push(V),r[V]=[F],p++}}for(h=0;h<o.length;h++){var d=o[h],g=d[0],v=g.trace,y=v.legend,m=v.legendgroup;if(t||v.visible&&v.showlegend)if(M.traceIs(v,"pie-like"))for(u[m]||(u[m]={}),s=0;s<d.length;s++){var _=d[s].label;u[m][_]||(x(y,m,{label:_,color:d[s].color,i:d[s].i,trace:v,pts:d[s].pts}),u[m][_]=!0,c=Math.max(c,(_||"").length))}else x(y,m,g),c=Math.max(c,(v.name||"").length)}if(!i.length)return[];var f=!l||!a,S=[];for(h=0;h<i.length;h++){var w=r[i[h]];f?S.push(w[0]):S.push(w)}for(f&&(S=[S]),h=0;h<S.length;h++){var E=1/0;for(s=0;s<S[h].length;s++){var O=S[h][s].trace.legendrank;E>O&&(E=O)}S[h][0]._groupMinRank=E,S[h][0]._preGroupSort=h}var C=function(N,W){return N.trace.legendrank-W.trace.legendrank||N._preSort-W._preSort};for(S.forEach(function(N,W){N[0]._preGroupSort=W}),S.sort(function(N,W){return N[0]._groupMinRank-W[0]._groupMinRank||N[0]._preGroupSort-W[0]._preGroupSort}),h=0;h<S.length;h++){S[h].forEach(function(N,W){N._preSort=W}),S[h].sort(C);var P=S[h][0].trace,R=null;for(s=0;s<S[h].length;s++){var j=S[h][s].trace.legendgrouptitle;if(j&&j.text){R=j,t&&(j.font=T._groupTitleFont);break}}if(n&&S[h].reverse(),R){var D=!1;for(s=0;s<S[h].length;s++)if(M.traceIs(S[h][s].trace,"pie-like")){D=!0;break}S[h].unshift({i:-1,groupTitle:R,noClick:D,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:T.groupclick==="toggleitem"||P.visible}})}for(s=0;s<S[h].length;s++)S[h][s]=[S[h][s]]}return T._lgroupsLength=S.length,T._maxNameLength=c,S}},33048:function(ee,z,e){var M=e(24040),k=e(3400),o=k.pushUnique,T=!0;ee.exports=function(b,h,s){var t=h._fullLayout;if(!h._dragged&&!h._editing){var a,n=t.legend.itemclick,r=t.legend.itemdoubleclick,i=t.legend.groupclick;if(s===1&&n==="toggle"&&r==="toggleothers"&&T&&h.data&&h._context.showTips&&k.notifier(k._(h,"Double-click on legend to isolate one trace"),"long"),T=!1,s===1?a=n:s===2&&(a=r),a){var l=i==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],p=b.data()[0][0];if(!p.groupTitle||!p.noClick){var c=h._fullData,x=(t.shapes||[]).filter(function(_e){return _e.showlegend}),d=c.concat(x),g=p.trace;g._isShape&&(g=g._fullInput);var v,y,m,_,f,S=g.legendgroup,w={},E=[],O=[],C=[],P=(t.shapes||[]).map(function(_e){return _e._input}),R=!1,j=g.legend,D=g._fullInput;if(D&&D._isShape||!M.traceIs(g,"pie-like")){var N,W=S&&S.length,F=[];if(W)for(v=0;v<d.length;v++)(N=d[v]).visible&&N.legendgroup===S&&F.push(v);if(a==="toggle"){var V;switch(g.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(W)if(l)for(v=0;v<d.length;v++){var U=d[v];U.visible!==!1&&U.legendgroup===S&&we(U,V)}else we(g,V);else we(g,V)}else if(a==="toggleothers"){var te,J,X,K,Q=!0;for(v=0;v<d.length;v++)if(te=(K=d[v])===g,J=K.showlegend!==!0,!(te||J||W&&K.legendgroup===S||K.legend!==j||K.visible!==!0||M.traceIs(K,"notLegendIsolatable"))){Q=!1;break}for(v=0;v<d.length;v++)if((K=d[v]).visible!==!1&&K.legend===j&&!M.traceIs(K,"notLegendIsolatable"))switch(g.visible){case"legendonly":we(K,!0);break;case!0:X=!!Q||"legendonly",te=K===g,J=K.showlegend!==!0&&!K.legendgroup,we(K,!!(te||W&&K.legendgroup===S||J)||X)}}for(v=0;v<O.length;v++)if(m=O[v]){var Z=m.constructUpdate(),re=Object.keys(Z);for(y=0;y<re.length;y++)_=re[y],(w[_]=w[_]||[])[C[v]]=Z[_]}for(f=Object.keys(w),v=0;v<f.length;v++)for(_=f[v],y=0;y<E.length;y++)w[_].hasOwnProperty(y)||(w[_][y]=void 0);R?M.call("_guiUpdate",h,w,{shapes:P},E):M.call("_guiRestyle",h,w,E)}else{var oe=p.label,ae=u.indexOf(oe);if(a==="toggle")ae===-1?u.push(oe):u.splice(ae,1);else if(a==="toggleothers"){var ce=ae!==-1,he=[];for(v=0;v<h.calcdata.length;v++){var pe=h.calcdata[v];for(y=0;y<pe.length;y++){var xe=pe[y].label;j===pe[0].trace.legend&&oe!==xe&&(u.indexOf(xe)===-1&&(ce=!0),o(u,xe),he.push(xe))}}if(!ce)for(var be=0;be<he.length;be++){var ve=u.indexOf(he[be]);ve!==-1&&u.splice(ve,1)}}M.call("_guiRelayout",h,"hiddenlabels",u)}}}}function ge(_e,se){var ie=E.indexOf(_e),fe=w.visible;return fe||(fe=w.visible=[]),E.indexOf(_e)===-1&&(E.push(_e),ie=E.length-1),fe[ie]=se,ie}function we(_e,se){if(!p.groupTitle||l){var ie,fe=_e._fullInput||_e,Ee=fe._isShape,Te=fe.index;if(Te===void 0&&(Te=fe._index),M.hasTransform(fe,"groupby")){var Ae=O[Te];if(!Ae){var Se=M.getTransformIndices(fe,"groupby"),Oe=Se[Se.length-1];Ae=k.keyedContainer(fe,"transforms["+Oe+"].styles","target","value.visible"),O[Te]=Ae}var De=Ae.get(_e._group);De===void 0&&(De=!0),De!==!1&&Ae.set(_e._group,se),C[Te]=ge(Te,fe.visible!==!1)}else{var de=fe.visible!==!1&&se;Ee?(ie=de,P[Te].visible=ie,R=!0):ge(Te,de)}}}}},42451:function(ee,z){z.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},z.isVertical=function(e){return e.orientation!=="h"},z.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(ee,z,e){ee.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(ee,z,e){var M=e(33428),k=e(24040),o=e(3400),T=o.strTranslate,b=e(43616),h=e(76308),s=e(94288).extractOpts,t=e(43028),a=e(10528),n=e(69656).castOption,r=e(65196);function i(p,c){return(c?"radial":"horizontal")+(p?"":"reversed")}function l(p){var c=p[0].trace,x=c.contours,d=t.hasLines(c),g=t.hasMarkers(c),v=c.visible&&c.fill&&c.fill!=="none",y=!1,m=!1;if(x){var _=x.coloring;_==="lines"?y=!0:d=_==="none"||_==="heatmap"||x.showlines,x.type==="constraint"?v=x._operation!=="=":_!=="fill"&&_!=="heatmap"||(m=!0)}return{showMarker:g,showLine:d,showFill:v,showGradientLine:y,showGradientFill:m,anyLine:d||y,anyFill:v||m}}function u(p,c,x){return p&&o.isArrayOrTypedArray(p)?c:p>x?x:p}ee.exports=function(p,c,x){var d=c._fullLayout;x||(x=d.legend);var g=x.itemsizing==="constant",v=x.itemwidth,y=(v+2*r.itemGap)/2,m=T(y,0),_=function(w,E,O,C){var P;if(w+1)P=w;else{if(!(E&&E.width>0))return 0;P=E.width}return g?C:Math.min(P,O)};function f(w,E,O){var C=w[0].trace,P=C.marker||{},R=P.line||{},j=P.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",D=O?C.visible&&C.type===O:k.traceIs(C,"bar"),N=M.select(E).select("g.legendpoints").selectAll("path.legend"+O).data(D?[w]:[]);N.enter().append("path").classed("legend"+O,!0).attr("d",j).attr("transform",m),N.exit().remove(),N.each(function(W){var F=M.select(this),V=W[0],U=_(V.mlw,P.line,5,2);F.style("stroke-width",U+"px");var te=V.mcc;if(!x._inHover&&"mc"in V){var J=s(P),X=J.mid;X===void 0&&(X=(J.max+J.min)/2),te=b.tryColorscale(P,"")(X)}var K=te||V.mc||P.color,Q=P.pattern,Z=Q&&b.getPatternAttr(Q.shape,0,"");if(Z){var re=b.getPatternAttr(Q.bgcolor,0,null),oe=b.getPatternAttr(Q.fgcolor,0,null),ae=Q.fgopacity,ce=u(Q.size,8,10),he=u(Q.solidity,.5,1),pe="legend-"+C.uid;F.call(b.pattern,"legend",c,pe,Z,ce,he,te,Q.fillmode,re,oe,ae)}else F.call(h.fill,K);U&&h.stroke(F,V.mlc||R.color)})}function S(w,E,O){var C=w[0],P=C.trace,R=O?P.visible&&P.type===O:k.traceIs(P,O),j=M.select(E).select("g.legendpoints").selectAll("path.legend"+O).data(R?[w]:[]);if(j.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),j.exit().remove(),j.size()){var D=P.marker||{},N=_(n(D.line.width,C.pts),D.line,5,2),W="pieLike",F=o.minExtend(P,{marker:{line:{width:N}}},W),V=o.minExtend(C,{trace:F},W);a(j,V,F,c)}}p.each(function(w){var E=M.select(this),O=o.ensureSingle(E,"g","layers");O.style("opacity",w[0].trace.opacity);var C=x.indentation,P=x.valign,R=w[0].lineHeight,j=w[0].height;if(P==="middle"&&C===0||!R||!j)O.attr("transform",null);else{var D={top:1,bottom:-1}[P]*(.5*(R-j+3))||0,N=x.indentation;O.attr("transform",T(N,D))}O.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),O.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var W=O.selectAll("g.legendsymbols").data([w]);W.enter().append("g").classed("legendsymbols",!0),W.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,O=w[0].trace,C=[];if(O.visible)switch(O.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(R,j){var D,N=M.select(this),W=s(O),F=W.colorscale,V=W.reversescale;if(F){if(!E){var U=F.length;D=j===0?F[V?U-1:0][1]:j===1?F[V?0:U-1][1]:F[Math.floor((U-1)/2)][1]}}else{var te=O.vertexcolor||O.facecolor||O.color;D=o.isArrayOrTypedArray(te)?te[j]||te[0]:te}N.attr("d",R[0]),D?N.call(h.fill,D):N.call(function(J){if(J.size()){var X="legendfill-"+O.uid;b.gradient(J,c,X,i(V,E==="radial"),F,"fill")}})})}).each(function(w){var E=w[0].trace,O=E.type==="waterfall";if(w[0]._distinct&&O){var C=w[0].trace[w[0].dir].marker;return w[0].mc=C.color,w[0].mlw=C.line.width,w[0].mlc=C.line.color,f(w,this,"waterfall")}var P=[];E.visible&&O&&(P=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var R=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);R.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(j){var D=M.select(this),N=E[j[0]].marker,W=_(void 0,N.line,5,2);D.attr("d",j[1]).style("stroke-width",W+"px").call(h.fill,N.color),W&&D.call(h.stroke,N.line.color)})}).each(function(w){f(w,this,"funnel")}).each(function(w){f(w,this)}).each(function(w){var E=w[0].trace,O=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);O.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),O.exit().remove(),O.each(function(){var C=M.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||h.opacity(E.fillcolor)!==0||h.opacity((E.line||{}).color)!==0){var P=_(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(h.fill,E.fillcolor),P&&h.stroke(C,E.line.color)}else{var R=o.minExtend(E,{marker:{size:g?12:o.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});O.call(b.pointStyle,R,c)}})}).each(function(w){S(w,this,"funnelarea")}).each(function(w){S(w,this,"pie")}).each(function(w){var E,O,C=l(w),P=C.showFill,R=C.showLine,j=C.showGradientLine,D=C.showGradientFill,N=C.anyFill,W=C.anyLine,F=w[0],V=F.trace,U=s(V),te=U.colorscale,J=U.reversescale,X=t.hasMarkers(V)||!N?"M5,0":W?"M5,-2":"M5,-3",K=M.select(this),Q=K.select(".legendfill").selectAll("path").data(P||D?[w]:[]);if(Q.enter().append("path").classed("js-fill",!0),Q.exit().remove(),Q.attr("d",X+"h"+v+"v6h-"+v+"z").call(function(oe){if(oe.size())if(P)b.fillGroupStyle(oe,c,!0);else{var ae="legendfill-"+V.uid;b.gradient(oe,c,ae,i(J),te,"fill")}}),R||j){var Z=_(void 0,V.line,10,5);O=o.minExtend(V,{line:{width:Z}}),E=[o.minExtend(F,{trace:O})]}var re=K.select(".legendlines").selectAll("path").data(R||j?[E]:[]);re.enter().append("path").classed("js-line",!0),re.exit().remove(),re.attr("d",X+(j?"l"+v+",0.0001":"h"+v)).call(R?b.lineGroupStyle:function(oe){if(oe.size()){var ae="legendline-"+V.uid;b.lineGroupStyle(oe),b.gradient(oe,c,ae,i(J),te,"stroke")}})}).each(function(w){var E,O,C=l(w),P=C.anyFill,R=C.anyLine,j=C.showLine,D=C.showMarker,N=w[0],W=N.trace,F=!D&&!R&&!P&&t.hasText(W);function V(re,oe,ae,ce){var he=o.nestedProperty(W,re).get(),pe=o.isArrayOrTypedArray(he)&&oe?oe(he):he;if(g&&pe&&ce!==void 0&&(pe=ce),ae){if(pe<ae[0])return ae[0];if(pe>ae[1])return ae[1]}return pe}function U(re){return N._distinct&&N.index&&re[N.index]?re[N.index]:re[0]}if(D||F||j){var te={},J={};if(D){te.mc=V("marker.color",U),te.mx=V("marker.symbol",U),te.mo=V("marker.opacity",o.mean,[.2,1]),te.mlc=V("marker.line.color",U),te.mlw=V("marker.line.width",o.mean,[0,5],2),J.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var X=V("marker.size",o.mean,[2,16],12);te.ms=X,J.marker.size=X}j&&(J.line={width:V("line.width",U,[0,10],5)}),F&&(te.tx="Aa",te.tp=V("textposition",U),te.ts=10,te.tc=V("textfont.color",U),te.tf=V("textfont.family",U),te.tw=V("textfont.weight",U),te.ty=V("textfont.style",U),te.tv=V("textfont.variant",U)),E=[o.minExtend(N,te)],(O=o.minExtend(W,J)).selectedpoints=null,O.texttemplate=null}var K=M.select(this).select("g.legendpoints"),Q=K.selectAll("path.scatterpts").data(D?E:[]);Q.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),Q.exit().remove(),Q.call(b.pointStyle,O,c),D&&(E[0].mrc=3);var Z=K.selectAll("g.pointtext").data(F?E:[]);Z.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),Z.exit().remove(),Z.selectAll("text").call(b.textPointStyle,O,c)}).each(function(w){var E=w[0].trace,O=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[w,w]:[]);O.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(C,P){var R=M.select(this),j=E[P?"increasing":"decreasing"],D=_(void 0,j.line,5,2);R.style("stroke-width",D+"px").call(h.fill,j.fillcolor),D&&h.stroke(R,j.line.color)})}).each(function(w){var E=w[0].trace,O=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[w,w]:[]);O.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(C,P){var R=M.select(this),j=E[P?"increasing":"decreasing"],D=_(void 0,j.line,5,2);R.style("fill","none").call(b.dashLine,j.line.dash,D),D&&h.stroke(R,j.line.color)})})}},66540:function(ee,z,e){e(76052),ee.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(ee,z,e){var M=e(24040),k=e(7316),o=e(79811),T=e(9224),b=e(4016).eraseActiveShape,h=e(3400),s=h._,t=ee.exports={};function a(d,g){var v,y,m=g.currentTarget,_=m.getAttribute("data-attr"),f=m.getAttribute("data-val")||!0,S=d._fullLayout,w={},E=o.list(d,null,!0),O=S._cartesianSpikesEnabled;if(_==="zoom"){var C,P=f==="in"?.5:2,R=(1+P)/2,j=(1-P)/2;for(y=0;y<E.length;y++)if(!(v=E[y]).fixedrange)if(C=v._name,f==="auto")w[C+".autorange"]=!0;else if(f==="reset")v._rangeInitial0===void 0&&v._rangeInitial1===void 0?w[C+".autorange"]=!0:v._rangeInitial0===void 0?(w[C+".autorange"]=v._autorangeInitial,w[C+".range"]=[null,v._rangeInitial1]):v._rangeInitial1===void 0?(w[C+".range"]=[v._rangeInitial0,null],w[C+".autorange"]=v._autorangeInitial):w[C+".range"]=[v._rangeInitial0,v._rangeInitial1],v._showSpikeInitial!==void 0&&(w[C+".showspikes"]=v._showSpikeInitial,O!=="on"||v._showSpikeInitial||(O="off"));else{var D=[v.r2l(v.range[0]),v.r2l(v.range[1])],N=[R*D[0]+j*D[1],R*D[1]+j*D[0]];w[C+".range[0]"]=v.l2r(N[0]),w[C+".range[1]"]=v.l2r(N[1])}}else _!=="hovermode"||f!=="x"&&f!=="y"||(f=S._isHoriz?"y":"x",m.setAttribute("data-val",f)),w[_]=f;S._cartesianSpikesEnabled=O,M.call("_guiRelayout",d,w)}function n(d,g){for(var v=g.currentTarget,y=v.getAttribute("data-attr"),m=v.getAttribute("data-val")||!0,_=d._fullLayout._subplots.gl3d||[],f={},S=y.split("."),w=0;w<_.length;w++)f[_[w]+"."+S[1]]=m;var E=m==="pan"?m:"zoom";f.dragmode=E,M.call("_guiRelayout",d,f)}function r(d,g){for(var v=g.currentTarget.getAttribute("data-attr"),y=v==="resetLastSave",m=v==="resetDefault",_=d._fullLayout,f=_._subplots.gl3d||[],S={},w=0;w<f.length;w++){var E,O=f[w],C=O+".camera",P=O+".aspectratio",R=O+".aspectmode",j=_[O]._scene;y?(S[C+".up"]=j.viewInitial.up,S[C+".eye"]=j.viewInitial.eye,S[C+".center"]=j.viewInitial.center,E=!0):m&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[P+".x"]=j.viewInitial.aspectratio.x,S[P+".y"]=j.viewInitial.aspectratio.y,S[P+".z"]=j.viewInitial.aspectratio.z,S[R]=j.viewInitial.aspectmode)}M.call("_guiRelayout",d,S)}function i(d,g){var v=g.currentTarget,y=v._previousVal,m=d._fullLayout,_=m._subplots.gl3d||[],f=["xaxis","yaxis","zaxis"],S={},w={};if(y)w=y,v._previousVal=null;else{for(var E=0;E<_.length;E++){var O=_[E],C=m[O],P=O+".hovermode";S[P]=C.hovermode,w[P]=!1;for(var R=0;R<3;R++){var j=f[R],D=O+"."+j+".showspikes";w[D]=!1,S[D]=C[j].showspikes}}v._previousVal=S}return w}function l(d,g){for(var v=g.currentTarget,y=v.getAttribute("data-attr"),m=v.getAttribute("data-val")||!0,_=d._fullLayout,f=_._subplots.geo||[],S=0;S<f.length;S++){var w=f[S],E=_[w];if(y==="zoom"){var O=E.projection.scale,C=m==="in"?2*O:.5*O;M.call("_guiRelayout",d,w+".projection.scale",C)}}y==="reset"&&x(d,"geo")}function u(d){var g=d._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function p(d){var g=u(d);M.call("_guiRelayout",d,"hovermode",g)}function c(d,g){for(var v=g.currentTarget.getAttribute("data-val"),y=d._fullLayout,m=y._subplots.mapbox||[],_={},f=0;f<m.length;f++){var S=m[f],w=y[S].zoom,E=v==="in"?1.05*w:w/1.05;_[S+".zoom"]=E}M.call("_guiRelayout",d,_)}function x(d,g){for(var v=d._fullLayout,y=v._subplots[g]||[],m={},_=0;_<y.length;_++)for(var f=y[_],S=v[f]._subplot.viewInitial,w=Object.keys(S),E=0;E<w.length;E++){var O=w[E];m[f+"."+O]=S[O]}M.call("_guiRelayout",d,m)}t.toImage={name:"toImage",title:function(d){var g=(d._context.toImageButtonOptions||{}).format||"png";return s(d,g==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(d){var g=d._context.toImageButtonOptions,v={format:g.format||"png"};h.notifier(s(d,"Taking snapshot - this may take a few seconds"),"long"),v.format!=="svg"&&h.isIE()&&(h.notifier(s(d,"IE only supports svg.  Changing format to svg."),"long"),v.format="svg"),["filename","width","height","scale"].forEach(function(y){y in g&&(v[y]=g[y])}),M.call("downloadImage",d,v).then(function(y){h.notifier(s(d,"Snapshot succeeded")+" - "+y,"long")}).catch(function(){h.notifier(s(d,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(d){return s(d,"Edit in Chart Studio")},icon:T.disk,click:function(d){k.sendDataToCloud(d)}},t.editInChartStudio={name:"editInChartStudio",title:function(d){return s(d,"Edit in Chart Studio")},icon:T.pencil,click:function(d){k.sendDataToCloud(d)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(d){return s(d,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:a},t.pan2d={name:"pan2d",_cat:"pan",title:function(d){return s(d,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:a},t.select2d={name:"select2d",_cat:"select",title:function(d){return s(d,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:a},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(d){return s(d,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:a},t.drawclosedpath={name:"drawclosedpath",title:function(d){return s(d,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:a},t.drawopenpath={name:"drawopenpath",title:function(d){return s(d,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:a},t.drawline={name:"drawline",title:function(d){return s(d,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:a},t.drawrect={name:"drawrect",title:function(d){return s(d,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:a},t.drawcircle={name:"drawcircle",title:function(d){return s(d,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:a},t.eraseshape={name:"eraseshape",title:function(d){return s(d,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:a},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:a},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(d){return s(d,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:a},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(d){return s(d,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:a},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(d){return s(d,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:a},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(d){return s(d,"Compare data on hover")},attr:"hovermode",val:function(d){return d._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:a},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(d){return s(d,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:n},t.pan3d={name:"pan3d",_cat:"pan",title:function(d){return s(d,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:n},t.orbitRotation={name:"orbitRotation",title:function(d){return s(d,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:n},t.tableRotation={name:"tableRotation",title:function(d){return s(d,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:n},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(d){return s(d,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:r},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(d){return s(d,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:r},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,g){var v=i(d,g);M.call("_guiRelayout",d,v)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(d){return s(d,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:p},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:p},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:p},t.resetViewSankey={name:"resetSankeyGroup",title:function(d){return s(d,"Reset view")},icon:T.home,click:function(d){for(var g={"node.groups":[],"node.x":[],"node.y":[]},v=0;v<d._fullData.length;v++){var y=d._fullData[v]._viewInitial;g["node.groups"].push(y.node.groups.slice()),g["node.x"].push(y.node.x.slice()),g["node.y"].push(y.node.y.slice())}M.call("restyle",d,g)}},t.toggleHover={name:"toggleHover",title:function(d){return s(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(d,g){var v=i(d,g);v.hovermode=u(d),M.call("_guiRelayout",d,v)}},t.resetViews={name:"resetViews",title:function(d){return s(d,"Reset views")},icon:T.home,click:function(d,g){var v=g.currentTarget;v.setAttribute("data-attr","zoom"),v.setAttribute("data-val","reset"),a(d,g),v.setAttribute("data-attr","resetLastSave"),r(d,g),x(d,"geo"),x(d,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(d){return s(d,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(d){var g=d._fullLayout,v=g._cartesianSpikesEnabled;g._cartesianSpikesEnabled=v==="on"?"off":"on",M.call("_guiRelayout",d,function(y){for(var m=y._fullLayout._cartesianSpikesEnabled==="on",_=o.list(y,null,!0),f={},S=0;S<_.length;S++){var w=_[S];f[w._name+".showspikes"]=!!m||w._showSpikeInitial}return f}(d))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(d){return s(d,"Reset view")},attr:"reset",icon:T.home,click:function(d){x(d,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(d){return s(d,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(d){return s(d,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},76052:function(ee,z,e){var M=e(44248),k=Object.keys(M),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),b=[];k.forEach(function(h){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,a=(s._cat||s.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(a)===-1&&b.push(a)}})(M[h])}),b.sort(),ee.exports={DRAW_MODES:o,backButtons:T,foreButtons:b}},90824:function(ee,z,e){var M=e(3400),k=e(76308),o=e(31780),T=e(66540);ee.exports=function(b,h){var s=b.modebar||{},t=o.newContainer(h,"modebar");function a(r,i){return M.coerce(s,t,T,r,i)}a("orientation"),a("bgcolor",k.addOpacity(h.paper_bgcolor,.5));var n=k.contrast(k.rgb(h.modebar.bgcolor));a("color",k.addOpacity(n,.3)),a("activecolor",k.addOpacity(n,.7)),a("uirevision",h.uirevision),a("add"),a("remove")}},45460:function(ee,z,e){ee.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(ee,z,e){var M=e(79811),k=e(43028),o=e(24040),T=e(10624).isUnifiedHover,b=e(66400),h=e(44248),s=e(76052).DRAW_MODES,t=e(3400).extendDeep;ee.exports=function(a){var n=a._fullLayout,r=a._context,i=n._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,u=r.modeBarButtons;l=Array.isArray(u)&&u.length?function(p){for(var c=t([],p),x=0;x<c.length;x++)for(var d=c[x],g=0;g<d.length;g++){var v=d[g];if(typeof v=="string"){if(h[v]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[x][g]=h[v]}}return c}(u):!r.displayModeBar&&r.watermark?[]:function(p){var c=p._fullLayout,x=p._fullData,d=p._context;function g(he,pe){if(typeof pe=="string"){if(pe.toLowerCase()===he.toLowerCase())return!0}else{var xe=pe.name,be=pe._cat||pe.name;if(xe===he||be===he.toLowerCase())return!0}return!1}var v=c.modebar.add;typeof v=="string"&&(v=[v]);var y=c.modebar.remove;typeof y=="string"&&(y=[y]);var m=d.modeBarButtonsToAdd.concat(v.filter(function(he){for(var pe=0;pe<d.modeBarButtonsToRemove.length;pe++)if(g(he,d.modeBarButtonsToRemove[pe]))return!1;return!0})),_=d.modeBarButtonsToRemove.concat(y.filter(function(he){for(var pe=0;pe<d.modeBarButtonsToAdd.length;pe++)if(g(he,d.modeBarButtonsToAdd[pe]))return!1;return!0})),f=c._has("cartesian"),S=c._has("gl3d"),w=c._has("geo"),E=c._has("pie"),O=c._has("funnelarea"),C=c._has("gl2d"),P=c._has("ternary"),R=c._has("mapbox"),j=c._has("polar"),D=c._has("smith"),N=c._has("sankey"),W=function(he){for(var pe=M.list({_fullLayout:he},null,!0),xe=0;xe<pe.length;xe++)if(!pe[xe].fixedrange)return!1;return!0}(c),F=T(c.hovermode),V=[];function U(he){if(he.length){for(var pe=[],xe=0;xe<he.length;xe++){for(var be=he[xe],ve=h[be],ge=ve.name.toLowerCase(),we=(ve._cat||ve.name).toLowerCase(),_e=!1,se=0;se<_.length;se++){var ie=_[se].toLowerCase();if(ie===ge||ie===we){_e=!0;break}}_e||pe.push(h[be])}V.push(pe)}}var te=["toImage"];d.showEditInChartStudio?te.push("editInChartStudio"):d.showSendToCloud&&te.push("sendDataToCloud"),U(te);var J=[],X=[],K=[],Q=[];(f||C||E||O||P)+w+S+R+j+D>1?(X=["toggleHover"],K=["resetViews"]):w?(J=["zoomInGeo","zoomOutGeo"],X=["hoverClosestGeo"],K=["resetGeo"]):S?(X=["hoverClosest3d"],K=["resetCameraDefault3d","resetCameraLastSave3d"]):R?(J=["zoomInMapbox","zoomOutMapbox"],X=["toggleHover"],K=["resetViewMapbox"]):C?X=["hoverClosestGl2d"]:E?X=["hoverClosestPie"]:N?(X=["hoverClosestCartesian","hoverCompareCartesian"],K=["resetViewSankey"]):X=["toggleHover"],f&&(X=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(he){for(var pe=0;pe<he.length;pe++)if(!o.traceIs(he[pe],"noHover"))return!1;return!0}(x)||F)&&(X=[]),!f&&!C||W||(J=["zoomIn2d","zoomOut2d","autoScale2d"],K[0]!=="resetViews"&&(K=["resetScale2d"])),S?Q=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||C)&&!W||P?Q=["zoom2d","pan2d"]:R||w?Q=["pan2d"]:j&&(Q=["zoom2d"]),function(he){for(var pe=!1,xe=0;xe<he.length&&!pe;xe++){var be=he[xe];be._module&&be._module.selectPoints&&(o.traceIs(be,"scatter-like")?(k.hasMarkers(be)||k.hasText(be))&&(pe=!0):o.traceIs(be,"box-violin")&&be.boxpoints!=="all"&&be.points!=="all"||(pe=!0))}return pe}(x)&&Q.push("select2d","lasso2d");var Z=[],re=function(he){Z.indexOf(he)===-1&&X.indexOf(he)!==-1&&Z.push(he)};if(Array.isArray(m)){for(var oe=[],ae=0;ae<m.length;ae++){var ce=m[ae];typeof ce=="string"?(ce=ce.toLowerCase(),s.indexOf(ce)!==-1?(c._has("mapbox")||c._has("cartesian"))&&Q.push(ce):ce==="togglespikelines"?re("toggleSpikelines"):ce==="togglehover"?re("toggleHover"):ce==="hovercompare"?re("hoverCompareCartesian"):ce==="hoverclosest"?(re("hoverClosestCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie")):ce==="v1hovermode"&&(re("toggleHover"),re("hoverClosestCartesian"),re("hoverCompareCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie"))):oe.push(ce)}m=oe}return U(Q),U(J.concat(K)),U(Z),function(he,pe){if(pe.length)if(Array.isArray(pe[0]))for(var xe=0;xe<pe.length;xe++)he.push(pe[xe]);else he.push(pe);return he}(V,m)}(a),i?i.update(a,l):n._modeBar=b(a,l)}else i&&(i.destroy(),delete n._modeBar)}},66400:function(ee,z,e){var M=e(33428),k=e(38248),o=e(3400),T=e(9224),b=e(25788).version,h=new DOMParser;function s(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(a,n){this.graphInfo=a;var r=this.graphInfo._context,i=this.graphInfo._fullLayout,l="modebar-"+i._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var u=i.modebar,p=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(l),o.addRelatedStyleRule(l,p+"#"+l+" .modebar-group","background-color: "+u.bgcolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+u.color),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+u.activecolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(n),x=this.hasLogo!==r.displaylogo,d=this.locale!==r.locale;if(this.locale=r.locale,(c||x||d)&&(this.removeAllButtons(),this.updateButtons(n),r.watermark||r.displaylogo)){var g=this.getLogo();r.watermark&&(g.className=g.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(a){var n=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=n.createGroup();r.forEach(function(l){var u=l.name;if(!u)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");n.buttonsNames.push(u);var p=n.createButton(l);n.buttonElements.push(p),i.appendChild(p)}),n.element.appendChild(i)})},t.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},t.createButton=function(a){var n=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=a.title;i===void 0?i=a.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&r.setAttribute("data-title",i),a.attr!==void 0&&r.setAttribute("data-attr",a.attr);var l=a.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),r.setAttribute("data-val",l)),typeof a.click!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(p){a.click(n.graphInfo,p),n.updateActiveButton(p.currentTarget)}),r.setAttribute("data-toggle",a.toggle||!1),a.toggle&&M.select(r).classed("active",!0);var u=a.icon;return typeof u=="function"?r.appendChild(u()):r.appendChild(this.createIcon(u||T.question)),r.setAttribute("data-gravity",a.gravity||"n"),r},t.createIcon=function(a){var n,r=k(a.height)?Number(a.height):a.ascent-a.descent,i="http://www.w3.org/2000/svg";if(a.path){(n=document.createElementNS(i,"svg")).setAttribute("viewBox",[0,0,a.width,r].join(" ")),n.setAttribute("class","icon");var l=document.createElementNS(i,"path");l.setAttribute("d",a.path),a.transform?l.setAttribute("transform",a.transform):a.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),n.appendChild(l)}return a.svg&&(n=h.parseFromString(a.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(a){var n=this.graphInfo._fullLayout,r=a!==void 0?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var l=i.getAttribute("data-val")||!0,u=i.getAttribute("data-attr"),p=i.getAttribute("data-toggle")==="true",c=M.select(i);if(p)u===r&&c.classed("active",!c.classed("active"));else{var x=u===null?u:o.nestedProperty(n,u).get();c.classed("active",x===l)}})},t.hasButtons=function(a){var n=this.buttons;if(!n||a.length!==n.length)return!1;for(var r=0;r<a.length;++r){if(a[r].length!==n[r].length)return!1;for(var i=0;i<a[r].length;i++)if(a[r][i].name!==n[r][i].name)return!1}return!0},t.getLogo=function(){var a=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(T.newplotlylogo)),a.appendChild(n),a},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},ee.exports=function(a,n){var r=a._fullLayout,i=new s({graphInfo:a,container:r._modebardiv.node(),buttons:n});return r._privateplot&&M.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},26680:function(ee,z,e){var M=e(25376),k=e(22548),o=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ee.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(ee){ee.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(ee,z,e){var M=e(3400),k=e(76308),o=e(31780),T=e(51272),b=e(26680),h=e(85984);function s(t,a,n,r){var i=r.calendar;function l(p,c){return M.coerce(t,a,b.buttons,p,c)}if(l("visible")){var u=l("step");u!=="all"&&(!i||i==="gregorian"||u!=="month"&&u!=="year"?l("stepmode"):a.stepmode="backward",l("count")),l("label")}}ee.exports=function(t,a,n,r,i){var l=t.rangeselector||{},u=o.newContainer(a,"rangeselector");function p(d,g){return M.coerce(l,u,b,d,g)}if(p("visible",T(l,u,{name:"buttons",handleItemDefaults:s,calendar:i}).length>0)){var c=function(d,g,v){for(var y=v.filter(function(S){return g[S].anchor===d._id}),m=0,_=0;_<y.length;_++){var f=g[y[_]].domain;f&&(m=Math.max(f[1],m))}return[d.domain[0],m+h.yPad]}(a,n,r);p("x",c[0]),p("y",c[1]),M.noneOrAll(t,a,["x","y"]),p("xanchor"),p("yanchor"),M.coerceFont(p,"font",n.font);var x=p("bgcolor");p("activecolor",k.contrast(x,h.lightAmount,h.darkAmount)),p("bordercolor"),p("borderwidth")}}},50216:function(ee,z,e){var M=e(33428),k=e(24040),o=e(7316),T=e(76308),b=e(43616),h=e(3400),s=h.strTranslate,t=e(72736),a=e(79811),n=e(84284),r=n.LINE_SPACING,i=n.FROM_TL,l=n.FROM_BR,u=e(85984),p=e(48040);function c(g){return g._id}function x(g,v,y){var m=h.ensureSingle(g,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});m.attr({rx:u.rx,ry:u.ry}),m.call(T.stroke,v.bordercolor).call(T.fill,function(_,f){return f._isActive||f._isHovered?_.activecolor:_.bgcolor}(v,y)).style("stroke-width",v.borderwidth+"px")}function d(g,v,y,m){var _,f;h.ensureSingle(g,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,v.font).text((_=y,f=m._fullLayout._meta,_.label?f?h.templateString(_.label,f):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(S){t.convertToTspans(S,m)})}ee.exports=function(g){var v=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(y){for(var m=a.list(y,"x",!0),_=[],f=0;f<m.length;f++){var S=m[f];S.rangeselector&&S.rangeselector.visible&&_.push(S)}return _}(g),c);v.enter().append("g").classed("rangeselector",!0),v.exit().remove(),v.style({cursor:"pointer","pointer-events":"all"}),v.each(function(y){var m=M.select(this),_=y,f=_.rangeselector,S=m.selectAll("g.button").data(h.filterVisible(f.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(w){var E=M.select(this),O=p(_,w);w._isActive=function(C,P,R){if(P.step==="all")return C.autorange===!0;var j=Object.keys(R);return C.range[0]===R[j[0]]&&C.range[1]===R[j[1]]}(_,w,O),E.call(x,f,w),E.call(d,f,w,g),E.on("click",function(){g._dragged||k.call("_guiRelayout",g,O)}),E.on("mouseover",function(){w._isHovered=!0,E.call(x,f,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(x,f,w)})}),function(w,E,O,C,P){var R=0,j=0,D=O.borderwidth;E.each(function(){var te=M.select(this).select(".selector-text"),J=O.font.size*r,X=Math.max(J*t.lineCount(te),16)+3;j=Math.max(j,X)}),E.each(function(){var te=M.select(this),J=te.select(".selector-rect"),X=te.select(".selector-text"),K=X.node()&&b.bBox(X.node()).width,Q=O.font.size*r,Z=t.lineCount(X),re=Math.max(K+10,u.minButtonWidth);te.attr("transform",s(D+R,D)),J.attr({x:0,y:0,width:re,height:j}),t.positionText(X,re/2,j/2-(Z-1)*Q/2+3),R+=re+5});var N=w._fullLayout._size,W=N.l+N.w*O.x,F=N.t+N.h*(1-O.y),V="left";h.isRightAnchor(O)&&(W-=R,V="right"),h.isCenterAnchor(O)&&(W-=R/2,V="center");var U="top";h.isBottomAnchor(O)&&(F-=j,U="bottom"),h.isMiddleAnchor(O)&&(F-=j/2,U="middle"),R=Math.ceil(R),j=Math.ceil(j),W=Math.round(W),F=Math.round(F),o.autoMargin(w,C+"-range-selector",{x:O.x,y:O.y,l:R*i[V],r:R*l[V],b:j*l[U],t:j*i[U]}),P.attr("transform",s(W,F))}(g,S,f,_._name,m)})}},48040:function(ee,z,e){var M=e(73220),k=e(3400).titleCase;ee.exports=function(o,T){var b=o._name,h={};if(T.step==="all")h[b+".autorange"]=!0;else{var s=function(t,a){var n,r=t.range,i=new Date(t.r2l(r[1])),l=a.step,u=M["utc"+k(l)],p=a.count;switch(a.stepmode){case"backward":n=t.l2r(+u.offset(i,-p));break;case"todate":var c=u.offset(i,-p);n=t.l2r(+u.ceil(c))}return[n,r[1]]}(o,T);h[b+".range[0]"]=s[0],h[b+".range[1]"]=s[1]}return h}},41152:function(ee,z,e){ee.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(ee,z,e){var M=e(22548);ee.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(ee,z,e){var M=e(79811).list,k=e(19280).getAutoRange,o=e(74636);ee.exports=function(T){for(var b=M(T,"x",!0),h=0;h<b.length;h++){var s=b[h],t=s[o.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,s))}}},74636:function(ee){ee.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(ee,z,e){var M=e(3400),k=e(31780),o=e(79811),T=e(11200),b=e(10936);ee.exports=function(h,s,t){var a=h[t],n=s[t];if(a.rangeslider||s._requestRangeslider[n._id]){M.isPlainObject(a.rangeslider)||(a.rangeslider={});var r,i,l=a.rangeslider,u=k.newContainer(n,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!n.isValidRange(l.range)),m("range");var p=s._subplots;if(p)for(var c=p.cartesian.filter(function(f){return f.substr(0,f.indexOf("y"))===o.name2id(t)}).map(function(f){return f.substr(f.indexOf("y"),f.length)}),x=M.simpleMap(c,o.id2name),d=0;d<x.length;d++){var g=x[d];r=l[g]||{},i=k.newContainer(u,g,"yaxis");var v,y=s[g];r.range&&y.isValidRange(r.range)&&(v="fixed"),_("rangemode",v)!=="match"&&_("range",y.range.slice())}u._input=l}}function m(f,S){return M.coerce(l,u,T,f,S)}function _(f,S){return M.coerce(r,i,b,f,S)}}},20060:function(ee,z,e){var M=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,h=e(43616),s=e(76308),t=e(81668),a=e(57952),n=e(79811),r=e(86476),i=e(93972),l=e(74636);function u(y){return typeof y.clientX=="number"?y.clientX:y.touches&&y.touches.length>0?y.touches[0].clientX:0}function p(y,m,_,f){var S=T.ensureSingle(y,"rect",l.bgClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=f.borderwidth%2==0?f.borderwidth:f.borderwidth-1,E=-f._offsetShift,O=h.crispRound(m,f.borderwidth);S.attr({width:f._width+w,height:f._height+w,transform:b(E,E),"stroke-width":O}).call(s.stroke,f.bordercolor).call(s.fill,f.bgcolor)}function c(y,m,_,f){var S=m._fullLayout;T.ensureSingleById(S._topdefs,"clipPath",f._clipId,function(w){w.append("rect").attr({x:0,y:0})}).select("rect").attr({width:f._width,height:f._height})}function x(y,m,_,f){var S,w=m.calcdata,E=y.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,T.identity);E.enter().append("g").attr("class",function(O){return l.rangePlotClassName+" "+O}).call(h.setClipUrl,f._clipId,m),E.order(),E.exit().remove(),E.each(function(O,C){var P=M.select(this),R=C===0,j=n.getFromId(m,O,"y"),D=j._name,N=f[D],W={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:f.range.slice(),calendar:_.calendar},width:f._width,height:f._height,margin:{t:0,b:0,l:0,r:0}},_context:m._context};_.rangebreaks&&(W.layout.xaxis.rangebreaks=_.rangebreaks),W.layout[D]={type:j.type,domain:[0,1],range:N.rangemode!=="match"?N.range.slice():j.range.slice(),calendar:j.calendar},j.rangebreaks&&(W.layout[D].rangebreaks=j.rangebreaks),o.supplyDefaults(W);var F=W._fullLayout.xaxis,V=W._fullLayout[D];F.clearCalc(),F.setScale(),V.clearCalc(),V.setScale();var U={id:O,plotgroup:P,xaxis:F,yaxis:V,isRangePlot:!0};R?S=U:(U.mainplot="xy",U.mainplotinfo=S),a.rangePlot(m,U,function(te,J){for(var X=[],K=0;K<te.length;K++){var Q=te[K],Z=Q[0].trace;Z.xaxis+Z.yaxis===J&&X.push(Q)}return X}(w,O))})}function d(y,m,_,f,S){T.ensureSingle(y,"rect",l.maskMinClassName,function(w){w.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),T.ensureSingle(y,"rect",l.maskMaxClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),S.rangemode!=="match"&&(T.ensureSingle(y,"rect",l.maskMinOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).call(s.fill,l.maskOppAxisColor),T.ensureSingle(y,"rect",l.maskMaxOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).style("border-top",l.maskOppBorder).call(s.fill,l.maskOppAxisColor))}function g(y,m,_,f){m._context.staticPlot||T.ensureSingle(y,"rect",l.slideBoxClassName,function(S){S.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:f._height,fill:l.slideBoxFill})}function v(y,m,_,f){var S=T.ensureSingle(y,"g",l.grabberMinClassName),w=T.ensureSingle(y,"g",l.grabberMaxClassName),E={x:0,width:l.handleWidth,rx:l.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(f._height/4),height:Math.round(f._height/2)};T.ensureSingle(S,"rect",l.handleMinClassName,function(P){P.attr(E)}).attr(O),T.ensureSingle(w,"rect",l.handleMaxClassName,function(P){P.attr(E)}).attr(O);var C={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:m._context.staticPlot?void 0:l.grabAreaCursor};T.ensureSingle(S,"rect",l.grabAreaMinClassName,function(P){P.attr(C)}).attr("height",f._height),T.ensureSingle(w,"rect",l.grabAreaMaxClassName,function(P){P.attr(C)}).attr("height",f._height)}ee.exports=function(y){for(var m=y._fullLayout,_=m._rangeSliderData,f=0;f<_.length;f++){var S=_[f][l.name];S._clipId=S._id+"-"+m._uid}var w=m._infolayer.selectAll("g."+l.containerClassName).data(_,function(E){return E._name});w.exit().each(function(E){var O=E[l.name];m._topdefs.select("#"+O._clipId).remove()}).remove(),_.length!==0&&(w.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),w.each(function(E){var O=M.select(this),C=E[l.name],P=m[n.id2name(E.anchor)],R=C[n.id2name(E.anchor)];if(C.range){var j,D=T.simpleMap(C.range,E.r2l),N=T.simpleMap(E.range,E.r2l);j=N[0]<N[1]?[Math.min(D[0],N[0]),Math.max(D[1],N[1])]:[Math.max(D[0],N[0]),Math.min(D[1],N[1])],C.range=C._input.range=T.simpleMap(j,E.l2r)}E.cleanRange("rangeslider.range");var W=m._size,F=E.domain;C._width=W.w*(F[1]-F[0]);var V=Math.round(W.l+W.w*F[0]),U=Math.round(W.t+W.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+C._offsetShift+l.extraPad);O.attr("transform",b(V,U)),C._rl=T.simpleMap(C.range,E.r2l);var te=C._rl[0],J=C._rl[1],X=J-te;if(C.p2d=function(pe){return pe/C._width*X+te},C.d2p=function(pe){return(pe-te)/X*C._width},E.rangebreaks){var K=E.locateBreaks(te,J);if(K.length){var Q,Z,re=0;for(Q=0;Q<K.length;Q++)re+=(Z=K[Q]).max-Z.min;var oe=C._width/(J-te-re),ae=[-oe*te];for(Q=0;Q<K.length;Q++)Z=K[Q],ae.push(ae[ae.length-1]-oe*(Z.max-Z.min));for(C.d2p=function(pe){for(var xe=ae[0],be=0;be<K.length;be++){var ve=K[be];if(pe>=ve.max)xe=ae[be+1];else if(pe<ve.min)break}return xe+oe*pe},Q=0;Q<K.length;Q++)(Z=K[Q]).pmin=C.d2p(Z.min),Z.pmax=C.d2p(Z.max);C.p2d=function(pe){for(var xe=ae[0],be=0;be<K.length;be++){var ve=K[be];if(pe>=ve.pmax)xe=ae[be+1];else if(pe<ve.pmin)break}return(pe-xe)/oe}}}if(R.rangemode!=="match"){var ce=P.r2l(R.range[0]),he=P.r2l(R.range[1])-ce;C.d2pOppAxis=function(pe){return(pe-ce)/he*C._height}}O.call(p,y,E,C).call(c,y,E,C).call(x,y,E,C).call(d,y,E,C,R).call(g,y,E,C).call(v,y,E,C),function(pe,xe,be,ve){if(!xe._context.staticPlot){var ge=pe.select("rect."+l.slideBoxClassName).node(),we=pe.select("rect."+l.grabAreaMinClassName).node(),_e=pe.select("rect."+l.grabAreaMaxClassName).node();pe.on("mousedown",se),pe.on("touchstart",se)}function se(){var ie=M.event,fe=ie.target,Ee=u(ie),Te=Ee-pe.node().getBoundingClientRect().left,Ae=ve.d2p(be._rl[0]),Se=ve.d2p(be._rl[1]),Oe=r.coverSlip();function De(me){var Me,ze,Pe,Ne=+u(me)-Ee;switch(fe){case ge:if(Pe="ew-resize",Ae+Ne>be._length||Se+Ne<0)return;Me=Ae+Ne,ze=Se+Ne;break;case we:if(Pe="col-resize",Ae+Ne>be._length)return;Me=Ae+Ne,ze=Se;break;case _e:if(Pe="col-resize",Se+Ne<0)return;Me=Ae,ze=Se+Ne;break;default:Pe="ew-resize",Me=Te,ze=Te+Ne}if(ze<Me){var Ve=ze;ze=Me,Me=Ve}ve._pixelMin=Me,ve._pixelMax=ze,i(M.select(Oe),Pe),function(Ye,at,rt,dt){function vt($e){return rt.l2r(T.constrain($e,dt._rl[0],dt._rl[1]))}var ht=vt(dt.p2d(dt._pixelMin)),et=vt(dt.p2d(dt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",at,rt._name+".range",[ht,et])})}(0,xe,be,ve)}function de(){Oe.removeEventListener("mousemove",De),Oe.removeEventListener("mouseup",de),this.removeEventListener("touchmove",De),this.removeEventListener("touchend",de),T.removeElement(Oe)}this.addEventListener("touchmove",De),this.addEventListener("touchend",de),Oe.addEventListener("mousemove",De),Oe.addEventListener("mouseup",de)}}(O,y,E,C),function(pe,xe,be,ve,ge,we){var _e=l.handleWidth/2;function se(me){return T.constrain(me,0,ve._width)}function ie(me){return T.constrain(me,0,ve._height)}function fe(me){return T.constrain(me,-_e,ve._width+_e)}var Ee=se(ve.d2p(be._rl[0])),Te=se(ve.d2p(be._rl[1]));if(pe.select("rect."+l.slideBoxClassName).attr("x",Ee).attr("width",Te-Ee),pe.select("rect."+l.maskMinClassName).attr("width",Ee),pe.select("rect."+l.maskMaxClassName).attr("x",Te).attr("width",ve._width-Te),we.rangemode!=="match"){var Ae=ve._height-ie(ve.d2pOppAxis(ge._rl[1])),Se=ve._height-ie(ve.d2pOppAxis(ge._rl[0]));pe.select("rect."+l.maskMinOppAxisClassName).attr("x",Ee).attr("height",Ae).attr("width",Te-Ee),pe.select("rect."+l.maskMaxOppAxisClassName).attr("x",Ee).attr("y",Se).attr("height",ve._height-Se).attr("width",Te-Ee),pe.select("rect."+l.slideBoxClassName).attr("y",Ae).attr("height",Se-Ae)}var Oe=.5,De=Math.round(fe(Ee-_e))-Oe,de=Math.round(fe(Te-_e))+Oe;pe.select("g."+l.grabberMinClassName).attr("transform",b(De,Oe)),pe.select("g."+l.grabberMaxClassName).attr("transform",b(de,Oe))}(O,0,E,C,P,R),E.side==="bottom"&&t.draw(y,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:m._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:U+C._height+C._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(ee,z,e){var M=e(79811),k=e(72736),o=e(74636),T=e(84284).LINE_SPACING,b=o.name;function h(s){var t=s&&s[b];return t&&t.visible}z.isVisible=h,z.makeData=function(s){var t=M.list({_fullLayout:s},"x",!0),a=s.margin,n=[];if(!s._has("gl2d"))for(var r=0;r<t.length;r++){var i=t[r];if(h(i)){n.push(i);var l=i[b];l._id=b+i._id,l._height=(s.height-a.b-a.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}s._rangeSliderData=n},z.autoMarginOpts=function(s,t){var a=s._fullLayout,n=t[b],r=t._id.charAt(0),i=0,l=0;return t.side==="bottom"&&(i=t._depth,t.title.text!==a._dfltTitle[r]&&(l=1.5*t.title.font.size+10+n._offsetShift,l+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+i+Math.max(a.margin.b,l),pad:o.extraPad+2*n._offsetShift}}},49692:function(ee,z,e){var M=e(3400),k=e(11200),o=e(10936),T=e(97944);ee.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},k,{yaxis:o})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(ee){ee.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(ee,z,e){var M=e(13916),k=e(52904).line,o=e(98192).u,T=e(92880).extendFlat,b=e(67824).overrideAll,h=e(31780).templatedArray;e(36208),ee.exports=b(h("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},M.xref,{}),yref:T({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(ee){ee.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(ee,z,e){var M=e(3400),k=e(54460),o=e(51272),T=e(93956),b=e(65152);function h(s,t,a){function n(E,O){return M.coerce(s,t,T,E,O)}var r=n("path"),i=n("type",r?"path":"rect")!=="path";i&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var l=["x","y"],u=0;u<2;u++){var p,c,x,d=l[u],g={_fullLayout:a},v=k.coerceRef(s,t,g,d);if((p=k.getFromId(g,v))._selectionIndices.push(t._index),x=b.rangeToShapePosition(p),c=b.shapePositionToRange(p),i){var y=d+"0",m=d+"1",_=s[y],f=s[m];s[y]=c(s[y],!0),s[m]=c(s[m],!0),k.coercePosition(t,g,n,v,y),k.coercePosition(t,g,n,v,m);var S=t[y],w=t[m];S!==void 0&&w!==void 0&&(t[y]=x(S),t[m]=x(w),s[y]=_,s[m]=f)}}i&&M.noneOrAll(s,t,["x0","x1","y0","y1"])}ee.exports=function(s,t){o(s,t,{name:"selections",handleItemDefaults:h});for(var a=t.selections,n=0;n<a.length;n++){var r=a[n];r&&r.path===void 0&&(r.x0!==void 0&&r.x1!==void 0&&r.y0!==void 0&&r.y1!==void 0||(t.selections[n]=null))}}},23640:function(ee,z,e){var M=e(9856).readPaths,k=e(55496),o=e(1936).clearOutlineControllers,T=e(76308),b=e(43616),h=e(31780).arrayEditor,s=e(65152),t=s.getPathString;function a(u){var p=u._fullLayout;for(var c in o(u),p._selectionLayer.selectAll("path").remove(),p._plots){var x=p._plots[c].selectionLayer;x&&x.selectAll("path").remove()}for(var d=0;d<p.selections.length;d++)r(u,d)}function n(u){return u._context.editSelection}function r(u,p){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+p+'"]').remove();var c=s.makeSelectionsOptionsAndPlotinfo(u,p),x=c.options,d=c.plotinfo;x._input&&function(g){var v=t(u,x),y={"data-index":p,"fill-rule":"evenodd",d:v},m=x.opacity,_="rgba(0,0,0,0)",f=x.line.color||T.contrast(u._fullLayout.plot_bgcolor),S=x.line.width,w=x.line.dash;S||(S=5,w="solid");var E=n(u)&&u._fullLayout._activeSelectionIndex===p;E&&(_=u._fullLayout.activeselection.fillcolor,m=u._fullLayout.activeselection.opacity);for(var O=[],C=1;C>=0;C--){var P=g.append("path").attr(y).style("opacity",C?.1:m).call(T.stroke,f).call(T.fill,_).call(b.dashLine,C?"solid":w,C?4+S:S);if(i(P,u,x),E){var R=h(u.layout,"selections",x);P.style({cursor:"move"});var j={element:P.node(),plotinfo:d,gd:u,editHelpers:R,isActiveSelection:!0},D=M(v,u);k(D,P,j)}else P.style("pointer-events",C?"all":"none");O[C]=P}var N=O[0];O[1].node().addEventListener("click",function(){return function(W,F){if(n(W)){var V=+F.node().getAttribute("data-index");if(V>=0){if(V===W._fullLayout._activeSelectionIndex)return void l(W);W._fullLayout._activeSelectionIndex=V,W._fullLayout._deactivateSelection=l,a(W)}}}(u,N)})}(u._fullLayout._selectionLayer)}function i(u,p,c){var x=c.xref+c.yref;b.setClipUrl(u,"clip"+p._fullLayout._uid+x,p)}function l(u){n(u)&&u._fullLayout._activeSelectionIndex>=0&&(o(u),delete u._fullLayout._activeSelectionIndex,a(u))}ee.exports={draw:a,drawOne:r,activateLastSelection:function(u){if(n(u)){var p=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=p,u._fullLayout._deactivateSelection=l,a(u)}}}},34200:function(ee,z,e){var M=e(98192).u,k=e(92880).extendFlat;ee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(ee){ee.exports=function(z,e,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},5968:function(ee,z,e){var M=e(72760).selectMode,k=e(1936).clearOutline,o=e(9856),T=o.readPaths,b=o.writePaths,h=o.fixDatesForPaths;ee.exports=function(s,t){if(s.length){var a=s[0][0];if(a){var n=a.getAttribute("d"),r=t.gd,i=r._fullLayout.newselection,l=t.plotinfo,u=l.xaxis,p=l.yaxis,c=t.isActiveSelection,x=t.dragmode,d=(r.layout||{}).selections||[];if(!M(x)&&c!==void 0){var g=r._fullLayout._activeSelectionIndex;if(g<d.length)switch(r._fullLayout.selections[g].type){case"rect":x="select";break;case"path":x="lasso"}}var v,y=T(n,r,l,c),m={xref:u._id,yref:p._id,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};y.length===1&&(v=y[0]),v&&v.length===5&&x==="select"?(m.type="rect",m.x0=v[0][1],m.y0=v[0][2],m.x1=v[2][1],m.y1=v[2][2]):(m.type="path",u&&p&&h(y,u,p),m.path=b(y),v=null),k(r);for(var _=t.editHelpers,f=(_||{}).modifyItem,S=[],w=0;w<d.length;w++){var E=r._fullLayout.selections[w];if(E){if(S[w]=E._input,c!==void 0&&w===r._fullLayout._activeSelectionIndex){var O=m;switch(E.type){case"rect":f("x0",O.x0),f("x1",O.x1),f("y0",O.y0),f("y1",O.y1);break;case"path":f("path",O.path)}}}else S[w]=E}return c===void 0?(S.push(m),S):_?_.getUpdateObj():{}}}}},5840:function(ee,z,e){var M=e(3400).strTranslate;function k(o,T){switch(o.type){case"log":return o.p2d(T);case"date":return o.p2r(T,0,o.calendar);default:return o.p2r(T)}}ee.exports={p2r:k,r2p:function(o,T){switch(o.type){case"log":return o.d2p(T);case"date":return o.r2p(T,0,o.calendar);default:return o.r2p(T)}},axValue:function(o){var T=o._id.charAt(0)==="y"?1:0;return function(b){return k(o,b[T])}},getTransform:function(o){return M(o.xaxis._offset,o.yaxis._offset)}}},22676:function(ee,z,e){var M=e(23640),k=e(43156);ee.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(ee,z,e){var M=e(14756),k=e(61456),o=e(24040),T=e(43616).dashStyle,b=e(76308),h=e(93024),s=e(10624).makeEventData,t=e(72760),a=t.freeMode,n=t.rectMode,r=t.drawMode,i=t.openMode,l=t.selectMode,u=e(65152),p=e(85448),c=e(55496),x=e(1936).clearOutline,d=e(9856),g=d.handleEllipse,v=d.readPaths,y=e(93940).newShapes,m=e(5968),_=e(23640).activateLastSelection,f=e(3400),S=f.sorterAsc,w=e(92065),E=e(91200),O=e(79811).getFromId,C=e(73696),P=e(39172).redrawReglTraces,R=e(83280),j=R.MINSELECT,D=w.filter,N=w.tester,W=e(5840),F=W.p2r,V=W.axValue,U=W.getTransform;function te(De){return De.subplot!==void 0}function J(De,de,me,Me,ze,Pe,Ne){var Ve,Ye,at,rt,dt,vt,ht,et,$e,wt=de._hoverdata,Pt=de._fullLayout.clickmode.indexOf("event")>-1,Ot=[];if(function(Ge){return Ge&&Array.isArray(Ge)&&Ge[0].hoverOnBox!==!0}(wt)){Z(De,de,Pe);var At=function(Ge,it){var tt,Re,Fe=Ge[0],nt=-1,We=[];for(Re=0;Re<it.length;Re++)if(tt=it[Re],Fe.fullData._expandedIndex===tt.cd[0].trace._expandedIndex){if(Fe.hoverOnBox===!0)break;Fe.pointNumber!==void 0?nt=Fe.pointNumber:Fe.binNumber!==void 0&&(nt=Fe.binNumber,We=Fe.pointNumbers);break}return{pointNumber:nt,pointNumbers:We,searchInfo:tt}}(wt,Ve=ae(de,me,Me,ze));if(At.pointNumbers.length>0?function(Ge,it){var tt,Re,Fe,nt=[];for(Fe=0;Fe<Ge.length;Fe++)(tt=Ge[Fe]).cd[0].trace.selectedpoints&&tt.cd[0].trace.selectedpoints.length>0&&nt.push(tt);if(nt.length===1&&nt[0]===it.searchInfo&&(Re=it.searchInfo.cd[0].trace).selectedpoints.length===it.pointNumbers.length){for(Fe=0;Fe<it.pointNumbers.length;Fe++)if(Re.selectedpoints.indexOf(it.pointNumbers[Fe])<0)return!1;return!0}return!1}(Ve,At):function(Ge){var it,tt,Re=0;for(tt=0;tt<Ge.length;tt++)if((it=Ge[tt].cd[0].trace).selectedpoints&&(it.selectedpoints.length>1||(Re+=it.selectedpoints.length)>1))return!1;return Re===1}(Ve)&&(vt=he(At))){for(Ne&&Ne.remove(),$e=0;$e<Ve.length;$e++)(Ye=Ve[$e])._module.selectPoints(Ye,!1);pe(de,Ve),re(Pe),Pt&&Oe(de)}else{for(ht=De.shiftKey&&(vt!==void 0?vt:he(At)),at=function(Ge,it,tt){return{pointNumber:Ge,searchInfo:it,subtract:!!tt}}(At.pointNumber,At.searchInfo,ht),rt=Q(Pe.selectionDefs.concat([at])),$e=0;$e<Ve.length;$e++)if(dt=be(Ve[$e]._module.selectPoints(Ve[$e],rt),Ve[$e]),Ot.length)for(var He=0;He<dt.length;He++)Ot.push(dt[He]);else Ot=dt;if(pe(de,Ve,et={points:Ot}),at&&Pe&&Pe.selectionDefs.push(at),Ne){var Ze=Pe.mergedPolygons,Be=i(Pe.dragmode);c(ve(Ze,Be),Ne,Pe)}Pt&&Se(de,et)}}}function X(De){return"pointNumber"in De&&"searchInfo"in De}function K(De){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(de,me,Me,ze){var Pe=De.searchInfo.cd[0].trace._expandedIndex;return ze.cd[0].trace._expandedIndex===Pe&&Me===De.pointNumber},isRect:!1,degenerate:!1,subtract:!!De.subtract}}function Q(De){if(De.length){for(var de=[],me=X(De[0])?0:De[0][0][0],Me=me,ze=X(De[0])?0:De[0][0][1],Pe=ze,Ne=0;Ne<De.length;Ne++)if(X(De[Ne]))de.push(K(De[Ne]));else{var Ve=N(De[Ne]);Ve.subtract=!!De[Ne].subtract,de.push(Ve),me=Math.min(me,Ve.xmin),Me=Math.max(Me,Ve.xmax),ze=Math.min(ze,Ve.ymin),Pe=Math.max(Pe,Ve.ymax)}return{xmin:me,xmax:Me,ymin:ze,ymax:Pe,pts:[],contains:function(Ye,at,rt,dt){for(var vt=!1,ht=0;ht<de.length;ht++)de[ht].contains(Ye,at,rt,dt)&&(vt=!de[ht].subtract);return vt},isRect:!1,degenerate:!1}}}function Z(De,de,me){var Me=de._fullLayout,ze=me.plotinfo,Pe=me.dragmode,Ne=Me._lastSelectedSubplot&&Me._lastSelectedSubplot===ze.id,Ve=(De.shiftKey||De.altKey)&&!(r(Pe)&&i(Pe));Ne&&Ve&&ze.selection&&ze.selection.selectionDefs&&!me.selectionDefs?(me.selectionDefs=ze.selection.selectionDefs,me.mergedPolygons=ze.selection.mergedPolygons):Ve&&ze.selection||re(me),Ne||(x(de),Me._lastSelectedSubplot=ze.id)}function re(De,de){var me=De.dragmode,Me=De.plotinfo,ze=De.gd;(function(dt){return dt._fullLayout._activeShapeIndex>=0})(ze)&&ze._fullLayout._deactivateShape(ze),function(dt){return dt._fullLayout._activeSelectionIndex>=0}(ze)&&ze._fullLayout._deactivateSelection(ze);var Pe=ze._fullLayout._zoomlayer,Ne=r(me),Ve=l(me);if(Ne||Ve){var Ye,at,rt=Pe.selectAll(".select-outline-"+Me.id);rt&&ze._fullLayout._outlining&&(Ne&&(Ye=y(rt,De)),Ye&&o.call("_guiRelayout",ze,{shapes:Ye}),Ve&&!te(De)&&(at=m(rt,De)),at&&(ze._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ze,{selections:at}).then(function(){de&&_(ze)})),ze._fullLayout._outlining=!1)}Me.selection={},Me.selection.selectionDefs=De.selectionDefs=[],Me.selection.mergedPolygons=De.mergedPolygons=[]}function oe(De){return De._id}function ae(De,de,me,Me){if(!De.calcdata)return[];var ze,Pe,Ne,Ve=[],Ye=de.map(oe),at=me.map(oe);for(Ne=0;Ne<De.calcdata.length;Ne++)if((Pe=(ze=De.calcdata[Ne])[0].trace).visible===!0&&Pe._module&&Pe._module.selectPoints)if(!te({subplot:Me})||Pe.subplot!==Me&&Pe.geo!==Me)if(Pe.type==="splom"){if(Pe._xaxes[Ye[0]]&&Pe._yaxes[at[0]]){var rt=ce(Pe._module,ze,de[0],me[0]);rt.scene=De._fullLayout._splomScenes[Pe.uid],Ve.push(rt)}}else if(Pe.type==="sankey"){var dt=ce(Pe._module,ze,de[0],me[0]);Ve.push(dt)}else{if(!(Ye.indexOf(Pe.xaxis)!==-1||Pe._xA&&Pe._xA.overlaying)||!(at.indexOf(Pe.yaxis)!==-1||Pe._yA&&Pe._yA.overlaying))continue;Ve.push(ce(Pe._module,ze,O(De,Pe.xaxis),O(De,Pe.yaxis)))}else Ve.push(ce(Pe._module,ze,de[0],me[0]));return Ve}function ce(De,de,me,Me){return{_module:De,cd:de,xaxis:me,yaxis:Me}}function he(De){var de=De.searchInfo.cd[0].trace,me=De.pointNumber,Me=De.pointNumbers,ze=Me.length>0?Me[0]:me;return!!de.selectedpoints&&de.selectedpoints.indexOf(ze)>-1}function pe(De,de,me){var Me,ze;for(Me=0;Me<de.length;Me++){var Pe=de[Me].cd[0].trace._fullInput,Ne=De._fullLayout._tracePreGUI[Pe.uid]||{};Ne.selectedpoints===void 0&&(Ne.selectedpoints=Pe._input.selectedpoints||null)}if(me){var Ve=me.points||[];for(Me=0;Me<de.length;Me++)(ze=de[Me].cd[0].trace)._input.selectedpoints=ze._fullInput.selectedpoints=[],ze._fullInput!==ze&&(ze.selectedpoints=[]);for(var Ye=0;Ye<Ve.length;Ye++){var at=Ve[Ye],rt=at.data,dt=at.fullData,vt=at.pointIndex,ht=at.pointIndices;ht?([].push.apply(rt.selectedpoints,ht),ze._fullInput!==ze&&[].push.apply(dt.selectedpoints,ht)):(rt.selectedpoints.push(vt),ze._fullInput!==ze&&dt.selectedpoints.push(vt))}}else for(Me=0;Me<de.length;Me++)delete(ze=de[Me].cd[0].trace).selectedpoints,delete ze._input.selectedpoints,ze._fullInput!==ze&&delete ze._fullInput.selectedpoints;(function(et,$e){for(var wt=!1,Pt=0;Pt<$e.length;Pt++){var Ot=$e[Pt],At=Ot.cd;o.traceIs(At[0].trace,"regl")&&(wt=!0);var He=Ot._module,Ze=He.styleOnSelect||He.style;Ze&&(Ze(et,At,At[0].node3),At[0].nodeRangePlot3&&Ze(et,At,At[0].nodeRangePlot3))}wt&&(C(et),P(et))})(De,de)}function xe(De,de,me){for(var Me=(me?M.difference:M.union)({regions:De},{regions:[de]}).regions.reverse(),ze=0;ze<Me.length;ze++){var Pe=Me[ze];Pe.subtract=fe(Pe,Me.slice(0,ze))}return Me}function be(De,de){if(Array.isArray(De))for(var me=de.cd,Me=de.cd[0].trace,ze=0;ze<De.length;ze++)De[ze]=s(De[ze],Me,me);return De}function ve(De,de){for(var me=[],Me=0;Me<De.length;Me++){me[Me]=[];for(var ze=0;ze<De[Me].length;ze++){me[Me][ze]=[],me[Me][ze][0]=ze?"L":"M";for(var Pe=0;Pe<De[Me][ze].length;Pe++)me[Me][ze].push(De[Me][ze][Pe])}de||me[Me].push(["Z",me[Me][0][1],me[Me][0][2]])}return me}function ge(De,de){for(var me,Me,ze=[],Pe=[],Ne=0;Ne<de.length;Ne++){var Ve=de[Ne];Me=Ve._module.selectPoints(Ve,De),Pe.push(Me),me=be(Me,Ve),ze=ze.concat(me)}return ze}function we(De,de,me,Me,ze){var Pe,Ne,Ve,Ye=!!Me;ze&&(Pe=ze.plotinfo,Ne=ze.xaxes[0]._id,Ve=ze.yaxes[0]._id);var at=[],rt=[],dt=ie(De),vt=De._fullLayout;if(Pe){var ht=vt._zoomlayer,et=vt.dragmode,$e=r(et),wt=l(et);if($e||wt){var Pt=O(De,Ne,"x"),Ot=O(De,Ve,"y");if(Pt&&Ot){var At=ht.selectAll(".select-outline-"+Pe.id);if(At&&De._fullLayout._outlining&&At.length){for(var He=At[0][0].getAttribute("d"),Ze=v(He,De,Pe),Be=[],Ge=0;Ge<Ze.length;Ge++){for(var it=Ze[Ge],tt=[],Re=0;Re<it.length;Re++)tt.push([Ee(Pt,it[Re][1]),Ee(Ot,it[Re][2])]);tt.xref=Ne,tt.yref=Ve,tt.subtract=fe(tt,Be),Be.push(tt)}dt=dt.concat(Be)}}}}var Fe=Ne&&Ve?[Ne+Ve]:vt._subplots.cartesian;(function(Pn){var Mn=Pn.calcdata;if(Mn)for(var _n=0;_n<Mn.length;_n++){var Rn=Mn[_n][0].trace,In=Pn._fullLayout._splomScenes;if(In){var Vn=In[Rn.uid];Vn&&(Vn.selectBatch=[])}}})(De);for(var nt={},We=0;We<Fe.length;We++){var ct=Fe[We],pt=ct.indexOf("y"),gt=ct.slice(0,pt),ut=ct.slice(pt),kt=Ne&&Ve?me:void 0;if(kt=se(dt,gt,ut,kt)){var yt=Me;if(!Ye){var Mt=O(De,gt,"x"),Lt=O(De,ut,"y");yt=ae(De,[Mt],[Lt],ct);for(var Ct=0;Ct<yt.length;Ct++){var It=yt[Ct],Wt=It.cd[0],Nt=Wt.trace;if(It._module.name==="scattergl"&&!Wt.t.xpx){var Bt=Nt.x,Ht=Nt.y,Qt=Nt._length;Wt.t.xpx=[],Wt.t.ypx=[];for(var Cn=0;Cn<Qt;Cn++)Wt.t.xpx[Cn]=Mt.c2p(Bt[Cn]),Wt.t.ypx[Cn]=Lt.c2p(Ht[Cn])}It._module.name==="splom"&&(nt[Nt.uid]||(nt[Nt.uid]=!0))}}var Tn=ge(kt,yt);at=at.concat(Tn),rt=rt.concat(yt)}}var hn={points:at};pe(De,rt,hn);var Zt=vt.clickmode.indexOf("event")>-1&&de;if(!Pe&&de){var an=ie(De,!0);if(an.length){var $t=an[0].xref,ln=an[0].yref;if($t&&ln){var mn=Te(an);Ae([O(De,$t,"x"),O(De,ln,"y")])(hn,mn)}}De._fullLayout._noEmitSelectedAtStart?De._fullLayout._noEmitSelectedAtStart=!1:Zt&&Se(De,hn),vt._reselect=!1}if(!Pe&&vt._deselect){var xn=vt._deselect;(function(Pn,Mn,_n){for(var Rn=0;Rn<_n.length;Rn++){var In=_n[Rn];if(In.xaxis&&In.xaxis._id===Pn&&In.yaxis&&In.yaxis._id===Mn)return!0}return!1})(Ne=xn.xref,Ve=xn.yref,rt)||_e(De,Ne,Ve,Me),Zt&&(hn.points.length?Se(De,hn):Oe(De)),vt._deselect=!1}return{eventData:hn,selectionTesters:me}}function _e(De,de,me,Me){Me=ae(De,[O(De,de,"x")],[O(De,me,"y")],de+me);for(var ze=0;ze<Me.length;ze++){var Pe=Me[ze];Pe._module.selectPoints(Pe,!1)}pe(De,Me)}function se(De,de,me,Me){for(var ze,Pe=0;Pe<De.length;Pe++){var Ne=De[Pe];de===Ne.xref&&me===Ne.yref&&(ze?Me=Q(ze=xe(ze,Ne,!!Ne.subtract)):(ze=[Ne],Me=N(Ne)))}return Me}function ie(De,de){for(var me=[],Me=De._fullLayout,ze=Me.selections,Pe=ze.length,Ne=0;Ne<Pe;Ne++)if(!de||Ne===Me._activeSelectionIndex){var Ve=ze[Ne];if(Ve){var Ye,at,rt,dt,vt,ht=Ve.xref,et=Ve.yref,$e=O(De,ht,"x"),wt=O(De,et,"y");if(Ve.type==="rect"){vt=[];var Pt=Ee($e,Ve.x0),Ot=Ee($e,Ve.x1),At=Ee(wt,Ve.y0),He=Ee(wt,Ve.y1);vt=[[Pt,At],[Pt,He],[Ot,He],[Ot,At]],Ye=Math.min(Pt,Ot),at=Math.max(Pt,Ot),rt=Math.min(At,He),dt=Math.max(At,He),vt.xmin=Ye,vt.xmax=at,vt.ymin=rt,vt.ymax=dt,vt.xref=ht,vt.yref=et,vt.subtract=!1,vt.isRect=!0,me.push(vt)}else if(Ve.type==="path")for(var Ze=Ve.path.split("Z"),Be=[],Ge=0;Ge<Ze.length;Ge++){var it=Ze[Ge];if(it){it+="Z";var tt=u.extractPathCoords(it,p.paramIsX,"raw"),Re=u.extractPathCoords(it,p.paramIsY,"raw");Ye=1/0,at=-1/0,rt=1/0,dt=-1/0,vt=[];for(var Fe=0;Fe<tt.length;Fe++){var nt=Ee($e,tt[Fe]),We=Ee(wt,Re[Fe]);vt.push([nt,We]),Ye=Math.min(nt,Ye),at=Math.max(nt,at),rt=Math.min(We,rt),dt=Math.max(We,dt)}vt.xmin=Ye,vt.xmax=at,vt.ymin=rt,vt.ymax=dt,vt.xref=ht,vt.yref=et,vt.subtract=fe(vt,Be),Be.push(vt),me.push(vt)}}}}return me}function fe(De,de){for(var me=!1,Me=0;Me<de.length;Me++)for(var ze=de[Me],Pe=0;Pe<De.length;Pe++)if(k(De[Pe],ze)){me=!me;break}return me}function Ee(De,de){return De.type==="date"&&(de=de.replace("_"," ")),De.type==="log"?De.c2p(de):De.r2p(de,null,De.calendar)}function Te(De){for(var de=De.length,me=[],Me=0;Me<de;Me++){var ze=De[Me];me=(me=me.concat(ze)).concat([ze[0]])}return(Pe=me).isRect=Pe.length===5&&Pe[0][0]===Pe[4][0]&&Pe[0][1]===Pe[4][1]&&Pe[0][0]===Pe[1][0]&&Pe[2][0]===Pe[3][0]&&Pe[0][1]===Pe[3][1]&&Pe[1][1]===Pe[2][1]||Pe[0][1]===Pe[1][1]&&Pe[2][1]===Pe[3][1]&&Pe[0][0]===Pe[3][0]&&Pe[1][0]===Pe[2][0],Pe.isRect&&(Pe.xmin=Math.min(Pe[0][0],Pe[2][0]),Pe.xmax=Math.max(Pe[0][0],Pe[2][0]),Pe.ymin=Math.min(Pe[0][1],Pe[2][1]),Pe.ymax=Math.max(Pe[0][1],Pe[2][1])),Pe;var Pe}function Ae(De){return function(de,me){for(var Me,ze,Pe=0;Pe<De.length;Pe++){var Ne=De[Pe],Ve=Ne._id,Ye=Ve.charAt(0);if(me.isRect){Me||(Me={});var at=me[Ye+"min"],rt=me[Ye+"max"];at!==void 0&&rt!==void 0&&(Me[Ve]=[F(Ne,at),F(Ne,rt)].sort(S))}else ze||(ze={}),ze[Ve]=me.map(V(Ne))}Me&&(de.range=Me),ze&&(de.lassoPoints=ze)}}function Se(De,de){de&&(de.selections=(De.layout||{}).selections||[]),De.emit("plotly_selected",de)}function Oe(De){De.emit("plotly_deselect",null)}ee.exports={reselect:we,prepSelect:function(De,de,me,Me,ze){var Pe=!te(Me),Ne=a(ze),Ve=n(ze),Ye=i(ze),at=r(ze),rt=l(ze),dt=ze==="drawcircle",vt=ze==="drawline"||dt,ht=Me.gd,et=ht._fullLayout,$e=rt&&et.newselection.mode==="immediate"&&Pe,wt=et._zoomlayer,Pt=Me.element.getBoundingClientRect(),Ot=Me.plotinfo,At=U(Ot),He=de-Pt.left,Ze=me-Pt.top;et._calcInverseTransform(ht);var Be=f.apply3DTransform(et._invTransform)(He,Ze);He=Be[0],Ze=Be[1];var Ge,it,tt,Re,Fe,nt,We,ct=et._invScaleX,pt=et._invScaleY,gt=He,ut=Ze,kt="M"+He+","+Ze,yt=Me.xaxes[0],Mt=Me.yaxes[0],Lt=yt._length,Ct=Mt._length,It=De.altKey&&!(r(ze)&&Ye);Z(De,ht,Me),Ne&&(Ge=D([[He,Ze]],R.BENDPX));var Wt=wt.selectAll("path.select-outline-"+Ot.id).data([1]),Nt=at?et.newshape:et.newselection;at&&(Me.hasText=Nt.label.text||Nt.label.texttemplate);var Bt=at&&!Ye?Nt.fillcolor:"rgba(0,0,0,0)",Ht=Nt.line.color||(Pe?b.contrast(ht._fullLayout.plot_bgcolor):"#7f7f7f");Wt.enter().append("path").attr("class","select-outline select-outline-"+Ot.id).style({opacity:at?Nt.opacity/2:1,"stroke-dasharray":T(Nt.line.dash,Nt.line.width),"stroke-width":Nt.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,Ht).call(b.fill,Bt).attr("fill-rule","evenodd").classed("cursor-move",!!at).attr("transform",At).attr("d",kt+"Z");var Qt=wt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",At).attr("d","M0,0Z");if(at&&Me.hasText){var Cn=wt.select(".label-temp");Cn.empty()&&(Cn=wt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Tn=et._uid+R.SELECTID,hn=[],Zt=ae(ht,Me.xaxes,Me.yaxes,Me.subplot);$e&&!De.shiftKey&&(Me._clearSubplotSelections=function(){if(Pe){var $t=yt._id,ln=Mt._id;_e(ht,$t,ln,Zt);for(var mn=(ht.layout||{}).selections||[],xn=[],Pn=!1,Mn=0;Mn<mn.length;Mn++){var _n=et.selections[Mn];_n.xref!==$t||_n.yref!==ln?xn.push(mn[Mn]):Pn=!0}Pn&&(ht._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ht,{selections:xn}))}});var an=function($t){return $t.plotinfo.fillRangeItems||Ae($t.xaxes.concat($t.yaxes))}(Me);Me.moveFn=function($t,ln){Me._clearSubplotSelections&&(Me._clearSubplotSelections(),Me._clearSubplotSelections=void 0),gt=Math.max(0,Math.min(Lt,ct*$t+He)),ut=Math.max(0,Math.min(Ct,pt*ln+Ze));var mn=Math.abs(gt-He),xn=Math.abs(ut-Ze);if(Ve){var Pn,Mn,_n;if(rt){var Rn=et.selectdirection;switch(Pn=Rn==="any"?xn<Math.min(.6*mn,j)?"h":mn<Math.min(.6*xn,j)?"v":"d":Rn){case"h":Mn=dt?Ct/2:0,_n=Ct;break;case"v":Mn=dt?Lt/2:0,_n=Lt}}if(at)switch(et.newshape.drawdirection){case"vertical":Pn="h",Mn=dt?Ct/2:0,_n=Ct;break;case"horizontal":Pn="v",Mn=dt?Lt/2:0,_n=Lt;break;case"ortho":mn<xn?(Pn="h",Mn=Ze,_n=ut):(Pn="v",Mn=He,_n=gt);break;default:Pn="d"}Pn==="h"?((Re=vt?g(dt,[gt,Mn],[gt,_n]):[[He,Mn],[He,_n],[gt,_n],[gt,Mn]]).xmin=vt?gt:Math.min(He,gt),Re.xmax=vt?gt:Math.max(He,gt),Re.ymin=Math.min(Mn,_n),Re.ymax=Math.max(Mn,_n),Qt.attr("d","M"+Re.xmin+","+(Ze-j)+"h-4v"+2*j+"h4ZM"+(Re.xmax-1)+","+(Ze-j)+"h4v"+2*j+"h-4Z")):Pn==="v"?((Re=vt?g(dt,[Mn,ut],[_n,ut]):[[Mn,Ze],[Mn,ut],[_n,ut],[_n,Ze]]).xmin=Math.min(Mn,_n),Re.xmax=Math.max(Mn,_n),Re.ymin=vt?ut:Math.min(Ze,ut),Re.ymax=vt?ut:Math.max(Ze,ut),Qt.attr("d","M"+(He-j)+","+Re.ymin+"v-4h"+2*j+"v4ZM"+(He-j)+","+(Re.ymax-1)+"v4h"+2*j+"v-4Z")):Pn==="d"&&((Re=vt?g(dt,[He,Ze],[gt,ut]):[[He,Ze],[He,ut],[gt,ut],[gt,Ze]]).xmin=Math.min(He,gt),Re.xmax=Math.max(He,gt),Re.ymin=Math.min(Ze,ut),Re.ymax=Math.max(Ze,ut),Qt.attr("d","M0,0Z"))}else Ne&&(Ge.addPt([gt,ut]),Re=Ge.filtered);if(Me.selectionDefs&&Me.selectionDefs.length?(tt=xe(Me.mergedPolygons,Re,It),Re.subtract=It,it=Q(Me.selectionDefs.concat([Re]))):(tt=[Re],it=N(Re)),c(ve(tt,Ye),Wt,Me),rt){var In,Vn=we(ht,!1),tr=Vn.eventData?Vn.eventData.points.slice():[];Vn=we(ht,!1,it,Zt,Me),it=Vn.selectionTesters,We=Vn.eventData,In=Ge?Ge.filtered:Te(tt),E.throttle(Tn,R.SELECTDELAY,function(){for(var er=(hn=ge(it,Zt)).slice(),Wn=0;Wn<tr.length;Wn++){for(var or=tr[Wn],Jt=!1,en=0;en<er.length;en++)if(er[en].curveNumber===or.curveNumber&&er[en].pointNumber===or.pointNumber){Jt=!0;break}Jt||er.push(or)}er.length&&(We||(We={}),We.points=er),an(We,In),function(En,gn){En.emit("plotly_selecting",gn)}(ht,We)})}},Me.clickFn=function($t,ln){if(Qt.remove(),ht._fullLayout._activeShapeIndex>=0)ht._fullLayout._deactivateShape(ht);else if(!at){var mn=et.clickmode;E.done(Tn).then(function(){if(E.clear(Tn),$t===2){for(Wt.remove(),Fe=0;Fe<Zt.length;Fe++)(nt=Zt[Fe])._module.selectPoints(nt,!1);if(pe(ht,Zt),re(Me),Oe(ht),Zt.length){var xn=Zt[0].xaxis,Pn=Zt[0].yaxis;if(xn&&Pn){for(var Mn=[],_n=ht._fullLayout.selections,Rn=0;Rn<_n.length;Rn++){var In=_n[Rn];In&&(In.xref===xn._id&&In.yref===Pn._id||Mn.push(In))}Mn.length<_n.length&&(ht._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ht,{selections:Mn}))}}}else mn.indexOf("select")>-1&&J(ln,ht,Me.xaxes,Me.yaxes,Me.subplot,Me,Wt),mn==="event"&&Se(ht,void 0);h.click(ht,ln,Ot.id)}).catch(f.error)}},Me.doneFn=function(){Qt.remove(),E.done(Tn).then(function(){E.clear(Tn),!$e&&Re&&Me.selectionDefs&&(Re.subtract=It,Me.selectionDefs.push(Re),Me.mergedPolygons.length=0,[].push.apply(Me.mergedPolygons,tt)),($e||at)&&re(Me,$e),Me.doneFnCompleted&&Me.doneFnCompleted(hn),rt&&Se(ht,We)}).catch(f.error)}},clearOutline:x,clearSelectionsCache:re,selectOnClick:J}},46056:function(ee,z,e){var M=e(13916),k=e(25376),o=e(52904).line,T=e(98192).u,b=e(92880).extendFlat,h=e(31780).templatedArray,s=(e(36208),e(45464)),t=e(21776).ye,a=e(97728);ee.exports=h("shape",{visible:b({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},s.legend,{editType:"calc+arraydraw"}),legendgroup:b({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:b({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},o.color,{editType:"arraydraw"}),width:b({},o.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(a)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(ee,z,e){var M=e(3400),k=e(54460),o=e(85448),T=e(65152);function b(a){return s(a.line.width,a.xsizemode,a.x0,a.x1,a.path,!1)}function h(a){return s(a.line.width,a.ysizemode,a.y0,a.y1,a.path,!0)}function s(a,n,r,i,l,u){var p=a/2,c=u;if(n==="pixel"){var x=l?T.extractPathCoords(l,u?o.paramIsY:o.paramIsX):[r,i],d=M.aggNums(Math.max,null,x),g=M.aggNums(Math.min,null,x),v=g<0?Math.abs(g)+p:p,y=d>0?d+p:p;return{ppad:p,ppadplus:c?v:y,ppadminus:c?y:v}}return{ppad:p}}function t(a,n,r,i,l){var u=a.type==="category"||a.type==="multicategory"?a.r2c:a.d2c;if(n!==void 0)return[u(n),u(r)];if(i){var p,c,x,d,g=1/0,v=-1/0,y=i.match(o.segmentRE);for(a.type==="date"&&(u=T.decodeDate(u)),p=0;p<y.length;p++)(c=l[y[p].charAt(0)].drawn)!==void 0&&(!(x=y[p].substr(1).match(o.paramRE))||x.length<c||((d=u(x[c]))<g&&(g=d),d>v&&(v=d)));return v>=g?[g,v]:void 0}}ee.exports=function(a){var n=a._fullLayout,r=M.filterVisible(n.shapes);if(r.length&&a._fullData.length)for(var i=0;i<r.length;i++){var l,u,p=r[i];p._extremes={};var c=k.getRefType(p.xref),x=k.getRefType(p.yref);if(p.xref!=="paper"&&c!=="domain"){var d=p.xsizemode==="pixel"?p.xanchor:p.x0,g=p.xsizemode==="pixel"?p.xanchor:p.x1;(u=t(l=k.getFromId(a,p.xref),d,g,p.path,o.paramIsX))&&(p._extremes[l._id]=k.findExtremes(l,u,b(p)))}if(p.yref!=="paper"&&x!=="domain"){var v=p.ysizemode==="pixel"?p.yanchor:p.y0,y=p.ysizemode==="pixel"?p.yanchor:p.y1;(u=t(l=k.getFromId(a,p.yref),v,y,p.path,o.paramIsY))&&(p._extremes[l._id]=k.findExtremes(l,u,h(p)))}}}},85448:function(ee){ee.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(ee,z,e){var M=e(3400),k=e(54460),o=e(51272),T=e(46056),b=e(65152);function h(s,t,a){function n(W,F){return M.coerce(s,t,T,W,F)}if(t._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),M.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var r=n("path"),i=n("type",r?"path":"rect"),l=i!=="path";l&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var u=n("xsizemode"),p=n("ysizemode"),c=["x","y"],x=0;x<2;x++){var d,g,v,y=c[x],m=y+"anchor",_=y==="x"?u:p,f={_fullLayout:a},S=k.coerceRef(s,t,f,y,void 0,"paper");if(k.getRefType(S)==="range"?((d=k.getFromId(f,S))._shapeIndices.push(t._index),v=b.rangeToShapePosition(d),g=b.shapePositionToRange(d)):g=v=M.identity,l){var w=y+"0",E=y+"1",O=s[w],C=s[E];s[w]=g(s[w],!0),s[E]=g(s[E],!0),_==="pixel"?(n(w,0),n(E,10)):(k.coercePosition(t,f,n,S,w,.25),k.coercePosition(t,f,n,S,E,.75)),t[w]=v(t[w]),t[E]=v(t[E]),s[w]=O,s[E]=C}if(_==="pixel"){var P=s[m];s[m]=g(s[m],!0),k.coercePosition(t,f,n,S,m,.25),t[m]=v(t[m]),s[m]=P}}l&&M.noneOrAll(s,t,["x0","x1","y0","y1"]);var R,j,D=i==="line";if(l&&(R=n("label.texttemplate")),R||(j=n("label.text")),j||R){n("label.textangle");var N=n("label.textposition",D?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(W,F){return W?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(D,N)),n("label.padding"),M.coerceFont(n,"label.font",a.font)}}}ee.exports=function(s,t){o(s,t,{name:"shapes",handleItemDefaults:h})}},60728:function(ee,z,e){var M=e(3400),k=e(54460),o=e(72736),T=e(43616),b=e(9856).readPaths,h=e(65152),s=h.getPathString,t=e(97728),a=e(84284).FROM_TL;ee.exports=function(n,r,i,l){if(l.selectAll(".shape-label").remove(),i.label.text||i.label.texttemplate){var u;if(i.label.texttemplate){var p={};if(i.type!=="path"){var c=k.getFromId(n,i.xref),x=k.getFromId(n,i.yref);for(var d in t){var g=t[d](i,c,x);g!==void 0&&(p[d]=g)}}u=M.texttemplateStringForShapes(i.label.texttemplate,{},n._fullLayout._d3locale,p)}else u=i.label.text;var v,y,m,_,f={"data-index":r},S=i.label.font,w=l.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(i.path){var E=s(n,i),O=b(E,n);v=1/0,m=1/0,y=-1/0,_=-1/0;for(var C=0;C<O.length;C++)for(var P=0;P<O[C].length;P++)for(var R=O[C][P],j=1;j<R.length;j+=2){var D=R[j],N=R[j+1];v=Math.min(v,D),y=Math.max(y,D),m=Math.min(m,N),_=Math.max(_,N)}}else{var W=k.getFromId(n,i.xref),F=k.getRefType(i.xref),V=k.getFromId(n,i.yref),U=k.getRefType(i.yref),te=h.getDataToPixel(n,W,!1,F),J=h.getDataToPixel(n,V,!0,U);v=te(i.x0),y=te(i.x1),m=J(i.y0),_=J(i.y1)}var X=i.label.textangle;X==="auto"&&(X=i.type==="line"?function(oe,ae,ce,he){var pe,xe;return xe=Math.abs(ce-oe),pe=ce>=oe?ae-he:he-ae,-180/Math.PI*Math.atan2(pe,xe)}(v,m,y,_):0),w.call(function(oe){return oe.call(T.font,S).attr({}),o.convertToTspans(oe,n),oe});var K=function(oe,ae,ce,he,pe,xe,be){var ve,ge,we,_e,se=pe.label.textposition,ie=pe.label.textangle,fe=pe.label.padding,Ee=pe.type,Te=Math.PI/180*xe,Ae=Math.sin(Te),Se=Math.cos(Te),Oe=pe.label.xanchor,De=pe.label.yanchor;if(Ee==="line"){se==="start"?(ve=oe,ge=ae):se==="end"?(ve=ce,ge=he):(ve=(oe+ce)/2,ge=(ae+he)/2),Oe==="auto"&&(Oe=se==="start"?ie==="auto"?ce>oe?"left":ce<oe?"right":"center":ce>oe?"right":ce<oe?"left":"center":se==="end"?ie==="auto"?ce>oe?"right":ce<oe?"left":"center":ce>oe?"left":ce<oe?"right":"center":"center");var de={bottom:-1,middle:0,top:1};if(ie==="auto"){var me=de[De];we=-fe*Ae*me,_e=fe*Se*me}else we=fe*{left:1,center:0,right:-1}[Oe],_e=fe*de[De];ve+=we,ge+=_e}else we=fe+3,se.indexOf("right")!==-1?(ve=Math.max(oe,ce)-we,Oe==="auto"&&(Oe="right")):se.indexOf("left")!==-1?(ve=Math.min(oe,ce)+we,Oe==="auto"&&(Oe="left")):(ve=(oe+ce)/2,Oe==="auto"&&(Oe="center")),ge=se.indexOf("top")!==-1?Math.min(ae,he):se.indexOf("bottom")!==-1?Math.max(ae,he):(ae+he)/2,_e=fe,De==="bottom"?ge-=_e:De==="top"&&(ge+=_e);var Me=a[De],ze=pe.label.font.size,Pe=be.height;return{textx:ve+(Pe*Me-ze)*Ae,texty:ge+-(Pe*Me-ze)*Se,xanchor:Oe}}(v,m,y,_,i,X,T.bBox(w.node())),Q=K.textx,Z=K.texty,re=K.xanchor;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[re],y:Z,x:Q,transform:"rotate("+X+","+Q+","+Z+")"}).call(o.positionText,Q,Z)}}},55496:function(ee,z,e){var M=e(3400).strTranslate,k=e(86476),o=e(72760),T=o.drawMode,b=o.selectMode,h=e(24040),s=e(76308),t=e(7e3),a=t.i000,n=t.i090,r=t.i180,i=t.i270,l=e(1936).clearOutlineControllers,u=e(9856),p=u.pointsOnRectangle,c=u.pointsOnEllipse,x=u.writePaths,d=e(93940).newShapes,g=e(93940).createShapeObj,v=e(5968),y=e(60728);function m(_,f){var S,w,E,O=_[f][1],C=_[f][2],P=_.length;return w=_[S=(f+1)%P][1],E=_[S][2],w===O&&E===C&&(w=_[S=(f+2)%P][1],E=_[S][2]),[S,w,E]}ee.exports=function _(f,S,w,E){E||(E=0);var O=w.gd;function C(){_(f,S,w,E++),(c(f[0])||w.hasText)&&P({redrawing:!0})}function P(pe){var xe={};w.isActiveShape!==void 0&&(w.isActiveShape=!1,xe=d(S,w)),w.isActiveSelection!==void 0&&(w.isActiveSelection=!1,xe=v(S,w),O._fullLayout._reselect=!0),Object.keys(xe).length&&h.call((pe||{}).redrawing?"relayout":"_guiRelayout",O,xe)}var R,j,D,N,W,F=O._fullLayout._zoomlayer,V=w.dragmode,U=T(V),te=b(V);if((U||te)&&(O._fullLayout._outlining=!0),l(O),S.attr("d",x(f)),E||!w.isActiveShape&&!w.isActiveSelection||(W=function(pe,xe){for(var be=0;be<xe.length;be++){var ve=xe[be];pe[be]=[];for(var ge=0;ge<ve.length;ge++){pe[be][ge]=[];for(var we=0;we<ve[ge].length;we++)pe[be][ge][we]=ve[ge][we]}}return pe}([],f),function(pe){R=[];for(var xe=0;xe<f.length;xe++){var be=f[xe],ve=p(be),ge=!ve&&c(be);R[xe]=[];for(var we=be.length,_e=0;_e<we;_e++)if(be[_e][0]!=="Z"&&(!ge||_e===a||_e===n||_e===r||_e===i)){var se,ie=ve&&w.isActiveSelection;ie&&(se=m(be,_e));var fe=be[_e][1],Ee=be[_e][2],Te=pe.append(ie?"rect":"circle").attr("data-i",xe).attr("data-j",_e).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ie){var Ae=se[1]-fe,Se=se[2]-Ee,Oe=Se?5:Math.max(Math.min(25,Math.abs(Ae)-5),5),De=Ae?5:Math.max(Math.min(25,Math.abs(Se)-5),5);Te.classed(Se?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Oe).attr("height",De).attr("x",fe-Oe/2).attr("y",Ee-De/2).attr("transform",M(Ae/2,Se/2))}else Te.classed("cursor-grab",!0).attr("r",5).attr("cx",fe).attr("cy",Ee);R[xe][_e]={element:Te.node(),gd:O,prepFn:K,doneFn:Z,clickFn:re},k.init(R[xe][_e])}}}(F.append("g").attr("class","outline-controllers")),function(){j=[],f.length&&(j[0]={element:S[0][0],gd:O,prepFn:ae,doneFn:ce,clickFn:he},k.init(j[0]))}()),U&&w.hasText){var J=F.select(".label-temp"),X=g(S,w,w.dragmode);y(O,"label-temp",X,J)}function K(pe){D=+pe.srcElement.getAttribute("data-i"),N=+pe.srcElement.getAttribute("data-j"),R[D][N].moveFn=Q}function Q(pe,xe){if(f.length){var be=W[D][N][1],ve=W[D][N][2],ge=f[D],we=ge.length;if(p(ge)){var _e=pe,se=xe;w.isActiveSelection&&(m(ge,N)[1]===ge[N][1]?se=0:_e=0);for(var ie=0;ie<we;ie++)if(ie!==N){var fe=ge[ie];fe[1]===ge[N][1]&&(fe[1]=be+_e),fe[2]===ge[N][2]&&(fe[2]=ve+se)}if(ge[N][1]=be+_e,ge[N][2]=ve+se,!p(ge))for(var Ee=0;Ee<we;Ee++)for(var Te=0;Te<ge[Ee].length;Te++)ge[Ee][Te]=W[D][Ee][Te]}else ge[N][1]=be+pe,ge[N][2]=ve+xe;C()}}function Z(){P()}function re(pe,xe){if(pe===2){D=+xe.srcElement.getAttribute("data-i"),N=+xe.srcElement.getAttribute("data-j");var be=f[D];p(be)||c(be)||function(){if(f.length&&f[D]&&f[D].length){for(var ve=[],ge=0;ge<f[D].length;ge++)ge!==N&&ve.push(f[D][ge]);ve.length>1&&(ve.length!==2||ve[1][0]!=="Z")&&(N===0&&(ve[0][0]="M"),f[D]=ve,C(),P())}}()}}function oe(pe,xe){(function(be,ve){if(f.length)for(var ge=0;ge<f.length;ge++)for(var we=0;we<f[ge].length;we++)for(var _e=0;_e+2<f[ge][we].length;_e+=2)f[ge][we][_e+1]=W[ge][we][_e+1]+be,f[ge][we][_e+2]=W[ge][we][_e+2]+ve})(pe,xe),C()}function ae(pe){(D=+pe.srcElement.getAttribute("data-i"))||(D=0),j[D].moveFn=oe}function ce(){P()}function he(pe){pe===2&&function(xe){if(b(xe._fullLayout.dragmode)){l(xe);var be=xe._fullLayout._activeSelectionIndex,ve=(xe.layout||{}).selections||[];if(be<ve.length){for(var ge=[],we=0;we<ve.length;we++)we!==be&&ge.push(ve[we]);delete xe._fullLayout._activeSelectionIndex;var _e=xe._fullLayout.selections[be];xe._fullLayout._deselect={xref:_e.xref,yref:_e.yref},h.call("_guiRelayout",xe,{selections:ge})}}}(O)}}},4016:function(ee,z,e){var M=e(33428),k=e(24040),o=e(3400),T=e(54460),b=e(9856).readPaths,h=e(55496),s=e(60728),t=e(1936).clearOutlineControllers,a=e(76308),n=e(43616),r=e(31780).arrayEditor,i=e(86476),l=e(93972),u=e(85448),p=e(65152),c=p.getPathString;function x(f){var S=f._fullLayout;for(var w in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var O=0;O<S.shapes.length;O++)S.shapes[O].visible===!0&&v(f,O)}function d(f){return!!f._fullLayout._outlining}function g(f){return!f._context.edits.shapePosition}function v(f,S){f._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=p.makeShapesOptionsAndPlotinfo(f,S),E=w.options,O=w.plotinfo;function C(P){var R=c(f,E),j={"data-index":S,"fill-rule":E.fillrule,d:R},D=E.opacity,N=E.fillcolor,W=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,V=E.line.dash;F||E.editable!==!0||(F=5,V="solid");var U=R[R.length-1]!=="Z",te=g(f)&&E.editable&&f._fullLayout._activeShapeIndex===S;te&&(N=U?"rgba(0,0,0,0)":f._fullLayout.activeshape.fillcolor,D=f._fullLayout.activeshape.opacity);var J,X=P.append("g").classed("shape-group",!0).attr({"data-index":S}),K=X.append("path").attr(j).style("opacity",D).call(a.stroke,W).call(a.fill,N).call(n.dashLine,V,F);if(y(X,f,E),s(f,S,E,X),(te||f._context.edits.shapePosition)&&(J=r(f.layout,"shapes",E)),te){K.style({cursor:"move"});var Q={element:K.node(),plotinfo:O,gd:f,editHelpers:J,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},Z=b(R,f);h(Z,K,Q)}else f._context.edits.shapePosition?function(re,oe,ae,ce,he,pe){var xe,be,ve,ge,we,_e,se,ie,fe,Ee,Te,Ae,Se,Oe,De,de,me=10,Me=10,ze=ae.xsizemode==="pixel",Pe=ae.ysizemode==="pixel",Ne=ae.type==="line",Ve=ae.type==="path",Ye=pe.modifyItem,at=M.select(oe.node().parentNode),rt=T.getFromId(re,ae.xref),dt=T.getRefType(ae.xref),vt=T.getFromId(re,ae.yref),ht=T.getRefType(ae.yref),et=p.getDataToPixel(re,rt,!1,dt),$e=p.getDataToPixel(re,vt,!0,ht),wt=p.getPixelToData(re,rt,!1,dt),Pt=p.getPixelToData(re,vt,!0,ht),Ot=Ne?function(){var tt=10,Re=Math.max(ae.line.width,tt),Fe=he.append("g").attr("data-index",ce).attr("drag-helper",!0);Fe.append("path").attr("d",oe.attr("d")).style({cursor:"move","stroke-width":Re,"stroke-opacity":"0"});var nt={"fill-opacity":"0"},We=Math.max(Re/2,tt);return Fe.append("circle").attr({"data-line-point":"start-point",cx:ze?et(ae.xanchor)+ae.x0:et(ae.x0),cy:Pe?$e(ae.yanchor)-ae.y0:$e(ae.y0),r:We}).style(nt).classed("cursor-grab",!0),Fe.append("circle").attr({"data-line-point":"end-point",cx:ze?et(ae.xanchor)+ae.x1:et(ae.x1),cy:Pe?$e(ae.yanchor)-ae.y1:$e(ae.y1),r:We}).style(nt).classed("cursor-grab",!0),Fe}():oe,At={element:Ot.node(),gd:re,prepFn:function(tt){d(re)||(ze&&(we=et(ae.xanchor)),Pe&&(_e=$e(ae.yanchor)),ae.type==="path"?De=ae.path:(xe=ze?ae.x0:et(ae.x0),be=Pe?ae.y0:$e(ae.y0),ve=ze?ae.x1:et(ae.x1),ge=Pe?ae.y1:$e(ae.y1)),xe<ve?(fe=xe,Se="x0",Ee=ve,Oe="x1"):(fe=ve,Se="x1",Ee=xe,Oe="x0"),!Pe&&be<ge||Pe&&be>ge?(se=be,Te="y0",ie=ge,Ae="y1"):(se=ge,Te="y1",ie=be,Ae="y0"),He(tt),Ge(he,ae),function(Re,Fe,nt){var We=Fe.xref,ct=Fe.yref,pt=T.getFromId(nt,We),gt=T.getFromId(nt,ct),ut="";We==="paper"||pt.autorange||(ut+=We),ct==="paper"||gt.autorange||(ut+=ct),n.setClipUrl(Re,ut?"clip"+nt._fullLayout._uid+ut:null,nt)}(oe,ae,re),At.moveFn=de==="move"?Ze:Be,At.altKey=tt.altKey)},doneFn:function(){d(re)||(l(oe),it(he),y(oe,re,ae),k.call("_guiRelayout",re,pe.getUpdateObj()))},clickFn:function(){d(re)||it(he)}};function He(tt){if(d(re))de=null;else if(Ne)de=tt.target.tagName==="path"?"move":tt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Re=At.element.getBoundingClientRect(),Fe=Re.right-Re.left,nt=Re.bottom-Re.top,We=tt.clientX-Re.left,ct=tt.clientY-Re.top,pt=!Ve&&Fe>me&&nt>Me&&!tt.shiftKey?i.getCursor(We/Fe,1-ct/nt):"move";l(oe,pt),de=pt.split("-")[0]}}function Ze(tt,Re){if(ae.type==="path"){var Fe=function(ct){return ct},nt=Fe,We=Fe;ze?Ye("xanchor",ae.xanchor=wt(we+tt)):(nt=function(ct){return wt(et(ct)+tt)},rt&&rt.type==="date"&&(nt=p.encodeDate(nt))),Pe?Ye("yanchor",ae.yanchor=Pt(_e+Re)):(We=function(ct){return Pt($e(ct)+Re)},vt&&vt.type==="date"&&(We=p.encodeDate(We))),Ye("path",ae.path=m(De,nt,We))}else ze?Ye("xanchor",ae.xanchor=wt(we+tt)):(Ye("x0",ae.x0=wt(xe+tt)),Ye("x1",ae.x1=wt(ve+tt))),Pe?Ye("yanchor",ae.yanchor=Pt(_e+Re)):(Ye("y0",ae.y0=Pt(be+Re)),Ye("y1",ae.y1=Pt(ge+Re)));oe.attr("d",c(re,ae)),Ge(he,ae),s(re,ce,ae,at)}function Be(tt,Re){if(Ve){var Fe=function(Ht){return Ht},nt=Fe,We=Fe;ze?Ye("xanchor",ae.xanchor=wt(we+tt)):(nt=function(Ht){return wt(et(Ht)+tt)},rt&&rt.type==="date"&&(nt=p.encodeDate(nt))),Pe?Ye("yanchor",ae.yanchor=Pt(_e+Re)):(We=function(Ht){return Pt($e(Ht)+Re)},vt&&vt.type==="date"&&(We=p.encodeDate(We))),Ye("path",ae.path=m(De,nt,We))}else if(Ne){if(de==="resize-over-start-point"){var ct=xe+tt,pt=Pe?be-Re:be+Re;Ye("x0",ae.x0=ze?ct:wt(ct)),Ye("y0",ae.y0=Pe?pt:Pt(pt))}else if(de==="resize-over-end-point"){var gt=ve+tt,ut=Pe?ge-Re:ge+Re;Ye("x1",ae.x1=ze?gt:wt(gt)),Ye("y1",ae.y1=Pe?ut:Pt(ut))}}else{var kt=function(Ht){return de.indexOf(Ht)!==-1},yt=kt("n"),Mt=kt("s"),Lt=kt("w"),Ct=kt("e"),It=yt?se+Re:se,Wt=Mt?ie+Re:ie,Nt=Lt?fe+tt:fe,Bt=Ct?Ee+tt:Ee;Pe&&(yt&&(It=se-Re),Mt&&(Wt=ie-Re)),(!Pe&&Wt-It>Me||Pe&&It-Wt>Me)&&(Ye(Te,ae[Te]=Pe?It:Pt(It)),Ye(Ae,ae[Ae]=Pe?Wt:Pt(Wt))),Bt-Nt>me&&(Ye(Se,ae[Se]=ze?Nt:wt(Nt)),Ye(Oe,ae[Oe]=ze?Bt:wt(Bt)))}oe.attr("d",c(re,ae)),Ge(he,ae),s(re,ce,ae,at)}function Ge(tt,Re){(ze||Pe)&&function(){var Fe=Re.type!=="path",nt=tt.selectAll(".visual-cue").data([0]);nt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var We=et(ze?Re.xanchor:o.midRange(Fe?[Re.x0,Re.x1]:p.extractPathCoords(Re.path,u.paramIsX))),ct=$e(Pe?Re.yanchor:o.midRange(Fe?[Re.y0,Re.y1]:p.extractPathCoords(Re.path,u.paramIsY)));if(We=p.roundPositionForSharpStrokeRendering(We,1),ct=p.roundPositionForSharpStrokeRendering(ct,1),ze&&Pe){var pt="M"+(We-1-1)+","+(ct-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";nt.attr("d",pt)}else if(ze){var gt="M"+(We-1-1)+","+(ct-9-1)+"v18 h2 v-18 Z";nt.attr("d",gt)}else{var ut="M"+(We-9-1)+","+(ct-1-1)+"h18 v2 h-18 Z";nt.attr("d",ut)}}()}function it(tt){tt.selectAll(".visual-cue").remove()}i.init(At),Ot.node().onmousemove=He}(f,K,E,S,P,J):E.editable===!0&&K.style("pointer-events",U||a.opacity(N)*D<=.5?"stroke":"all");K.node().addEventListener("click",function(){return function(re,oe){if(g(re)){var ae=+oe.node().getAttribute("data-index");if(ae>=0){if(ae===re._fullLayout._activeShapeIndex)return void _(re);re._fullLayout._activeShapeIndex=ae,re._fullLayout._deactivateShape=_,x(re)}}}(f,K)})}E._input&&E.visible===!0&&(E.layer==="above"?C(f._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?C(f._fullLayout._shapeLowerLayer):E.layer==="between"?C(O.shapelayerBetween):O._hadPlotinfo?C((O.mainplotinfo||O).shapelayer):C(f._fullLayout._shapeLowerLayer))}function y(f,S,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(f,E?"clip"+S._fullLayout._uid+E:null,S)}function m(f,S,w){return f.replace(u.segmentRE,function(E){var O=0,C=E.charAt(0),P=u.paramIsX[C],R=u.paramIsY[C],j=u.numParams[C];return C+E.substr(1).replace(u.paramRE,function(D){return O>=j||(P[O]?D=S(D):R[O]&&(D=w(D)),O++),D})})}function _(f){g(f)&&f._fullLayout._activeShapeIndex>=0&&(t(f),delete f._fullLayout._activeShapeIndex,x(f))}ee.exports={draw:x,drawOne:v,eraseActiveShape:function(f){if(g(f)){t(f);var S=f._fullLayout._activeShapeIndex,w=(f.layout||{}).shapes||[];if(S<w.length){for(var E=[],O=0;O<w.length;O++)O!==S&&E.push(w[O]);return delete f._fullLayout._activeShapeIndex,k.call("_guiRelayout",f,{shapes:E})}}},drawLabel:s}},92872:function(ee,z,e){var M=e(67824).overrideAll,k=e(45464),o=e(25376),T=e(98192).u,b=e(92880).extendFlat,h=e(21776).ye,s=e(97728);ee.exports=M({newshape:{visible:b({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},k.legend,{}),legendgroup:b({},k.legendgroup,{}),legendgrouptitle:{text:b({},k.legendgrouptitle.text,{}),font:o({})},legendrank:b({},k.legendrank,{}),legendwidth:b({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:h({newshape:!0},{keys:Object.keys(s)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(ee){ee.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(ee,z,e){var M=e(76308),k=e(3400);ee.exports=function(o,T,b){if(b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),k.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var h=(o||{}).plot_bgcolor||"#FFF";b("newshape.line.color",M.contrast(h)),b("newshape.line.dash")}var s=o.dragmode==="drawline",t=b("newshape.label.text"),a=b("newshape.label.texttemplate");if(t||a){b("newshape.label.textangle");var n=b("newshape.label.textposition",s?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(r,i){return r?"bottom":i.indexOf("top")!==-1?"top":i.indexOf("bottom")!==-1?"bottom":"middle"}(s,n)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},9856:function(ee,z,e){var M=e(21984),k=e(7e3),o=k.CIRCLE_SIDES,T=k.SQRT2,b=e(5840),h=b.p2r,s=b.r2p,t=[0,3,4,5,6,1,2],a=[0,3,4,1,2];function n(i,l){return Math.abs(i-l)<=1e-6}function r(i,l){var u=l[1]-i[1],p=l[2]-i[2];return Math.sqrt(u*u+p*p)}z.writePaths=function(i){var l=i.length;if(!l)return"M0,0Z";for(var u="",p=0;p<l;p++)for(var c=i[p].length,x=0;x<c;x++){var d=i[p][x][0];if(d==="Z")u+="Z";else for(var g=i[p][x].length,v=0;v<g;v++){var y=v;d==="Q"||d==="S"?y=a[v]:d==="C"&&(y=t[v]),u+=i[p][x][y],v>0&&v<g-1&&(u+=",")}}return u},z.readPaths=function(i,l,u,p){var c,x,d,g=M(i),v=[],y=-1,m=0,_=0,f=function(){x=m,d=_};f();for(var S=0;S<g.length;S++){var w,E,O,C,P=[],R=g[S][0],j=R;switch(R){case"M":v[++y]=[],m=+g[S][1],_=+g[S][2],P.push([j,m,_]),f();break;case"Q":case"S":w=+g[S][1],O=+g[S][2],m=+g[S][3],_=+g[S][4],P.push([j,m,_,w,O]);break;case"C":w=+g[S][1],O=+g[S][2],E=+g[S][3],C=+g[S][4],m=+g[S][5],_=+g[S][6],P.push([j,m,_,w,O,E,C]);break;case"T":case"L":m=+g[S][1],_=+g[S][2],P.push([j,m,_]);break;case"H":j="L",m=+g[S][1],P.push([j,m,_]);break;case"V":j="L",_=+g[S][1],P.push([j,m,_]);break;case"A":j="L";var D=+g[S][1],N=+g[S][2];+g[S][4]||(D=-D,N=-N);var W=m-D,F=_;for(c=1;c<=o/2;c++){var V=2*Math.PI*c/o;P.push([j,W+D*Math.cos(V),F+N*Math.sin(V)])}break;case"Z":m===x&&_===d||(m=x,_=d,P.push([j,m,_]))}for(var U=(u||{}).domain,te=l._fullLayout._size,J=u&&u.xsizemode==="pixel",X=u&&u.ysizemode==="pixel",K=p===!1,Q=0;Q<P.length;Q++){for(c=0;c+2<7;c+=2){var Z=P[Q][c+1],re=P[Q][c+2];Z!==void 0&&re!==void 0&&(m=Z,_=re,u&&(u.xaxis&&u.xaxis.p2r?(K&&(Z-=u.xaxis._offset),Z=J?s(u.xaxis,u.xanchor)+Z:h(u.xaxis,Z)):(K&&(Z-=te.l),U?Z=U.x[0]+Z/te.w:Z/=te.w),u.yaxis&&u.yaxis.p2r?(K&&(re-=u.yaxis._offset),re=X?s(u.yaxis,u.yanchor)-re:h(u.yaxis,re)):(K&&(re-=te.t),re=U?U.y[1]-re/te.h:1-re/te.h)),P[Q][c+1]=Z,P[Q][c+2]=re)}v[y].push(P[Q].slice())}}return v},z.pointsOnRectangle=function(i){if(i.length!==5)return!1;for(var l=1;l<3;l++)if(!n(i[0][l]-i[1][l],i[3][l]-i[2][l])||!n(i[0][l]-i[3][l],i[1][l]-i[2][l]))return!1;return!(!n(i[0][1],i[1][1])&&!n(i[0][1],i[3][1])||!(r(i[0],i[1])*r(i[0],i[3])))},z.pointsOnEllipse=function(i){var l=i.length;if(l!==o+1)return!1;l=o;for(var u=0;u<l;u++){var p=(2*l-u)%l,c=(l/2+p)%l,x=(l/2+u)%l;if(!n(r(i[u],i[x]),r(i[p],i[c])))return!1}return!0},z.handleEllipse=function(i,l,u){if(!i)return[l,u];var p=z.ellipseOver({x0:l[0],y0:l[1],x1:u[0],y1:u[1]}),c=(p.x1+p.x0)/2,x=(p.y1+p.y0)/2,d=(p.x1-p.x0)/2,g=(p.y1-p.y0)/2;d||(d=g/=T),g||(g=d/=T);for(var v=[],y=0;y<o;y++){var m=2*y*Math.PI/o;v.push([c+d*Math.cos(m),x+g*Math.sin(m)])}return v},z.ellipseOver=function(i){var l=i.x0,u=i.y0,p=i.x1,c=i.y1,x=p-l,d=c-u,g=((l-=x)+p)/2,v=((u-=d)+c)/2;return{x0:g-(x*=T),y0:v-(d*=T),x1:g+x,y1:v+d}},z.fixDatesForPaths=function(i,l,u){var p=l.type==="date",c=u.type==="date";if(!p&&!c)return i;for(var x=0;x<i.length;x++)for(var d=0;d<i[x].length;d++)for(var g=0;g+2<i[x][d].length;g+=2)p&&(i[x][d][g+1]=i[x][d][g+1].replace(" ","_")),c&&(i[x][d][g+2]=i[x][d][g+2].replace(" ","_"));return i}},93940:function(ee,z,e){var M=e(72760),k=M.drawMode,o=M.openMode,T=e(7e3),b=T.i000,h=T.i090,s=T.i180,t=T.i270,a=T.cos45,n=T.sin45,r=e(5840),i=r.p2r,l=r.r2p,u=e(1936).clearOutline,p=e(9856),c=p.readPaths,x=p.writePaths,d=p.ellipseOver,g=p.fixDatesForPaths;function v(y,m,_){var f,S=y[0][0],w=m.gd,E=S.getAttribute("d"),O=w._fullLayout.newshape,C=m.plotinfo,P=m.isActiveShape,R=C.xaxis,j=C.yaxis,D=!!C.domain||!C.xaxis,N=!!C.domain||!C.yaxis,W=o(_),F=c(E,w,C,P),V={editable:!0,visible:O.visible,name:O.name,showlegend:O.showlegend,legend:O.legend,legendwidth:O.legendwidth,legendgroup:O.legendgroup,legendgrouptitle:{text:O.legendgrouptitle.text,font:O.legendgrouptitle.font},legendrank:O.legendrank,label:O.label,xref:D?"paper":R._id,yref:N?"paper":j._id,layer:O.layer,opacity:O.opacity,line:{color:O.line.color,width:O.line.width,dash:O.line.dash}};if(W||(V.fillcolor=O.fillcolor,V.fillrule=O.fillrule),F.length===1&&(f=F[0]),f&&f.length===5&&_==="drawrect")V.type="rect",V.x0=f[0][1],V.y0=f[0][2],V.x1=f[2][1],V.y1=f[2][2];else if(f&&_==="drawline")V.type="line",V.x0=f[0][1],V.y0=f[0][2],V.x1=f[1][1],V.y1=f[1][2];else if(f&&_==="drawcircle"){V.type="circle";var U=f[b][1],te=f[h][1],J=f[s][1],X=f[t][1],K=f[b][2],Q=f[h][2],Z=f[s][2],re=f[t][2],oe=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),ae=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");oe&&(U=l(C.xaxis,U),te=l(C.xaxis,te),J=l(C.xaxis,J),X=l(C.xaxis,X)),ae&&(K=l(C.yaxis,K),Q=l(C.yaxis,Q),Z=l(C.yaxis,Z),re=l(C.yaxis,re));var ce=(te+X)/2,he=(K+Z)/2,pe=d({x0:ce,y0:he,x1:ce+(X-te+J-U)/2*a,y1:he+(re-Q+Z-K)/2*n});oe&&(pe.x0=i(C.xaxis,pe.x0),pe.x1=i(C.xaxis,pe.x1)),ae&&(pe.y0=i(C.yaxis,pe.y0),pe.y1=i(C.yaxis,pe.y1)),V.x0=pe.x0,V.y0=pe.y0,V.x1=pe.x1,V.y1=pe.y1}else V.type="path",R&&j&&g(F,R,j),V.path=x(F),f=null;return V}ee.exports={newShapes:function(y,m){if(y.length&&y[0][0]){var _=m.gd,f=m.isActiveShape,S=m.dragmode,w=(_.layout||{}).shapes||[];if(!k(S)&&f!==void 0){var E=_._fullLayout._activeShapeIndex;if(E<w.length)switch(_._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var O=w[E].path||"";S=O[O.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var C=v(y,m,S);u(_);for(var P=m.editHelpers,R=(P||{}).modifyItem,j=[],D=0;D<w.length;D++){var N=_._fullLayout.shapes[D];if(j[D]=N._input,f!==void 0&&D===_._fullLayout._activeShapeIndex){var W=C;switch(N.type){case"line":case"rect":case"circle":R("x0",W.x0),R("x1",W.x1),R("y0",W.y0),R("y1",W.y1);break;case"path":R("path",W.path)}}}return f===void 0?(j.push(C),j):P?P.getUpdateObj():{}}},createShapeObj:v}},1936:function(ee){ee.exports={clearOutlineControllers:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),z._fullLayout._outlining=!1}}},65152:function(ee,z,e){var M=e(85448),k=e(3400),o=e(54460);z.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(b){return b}},z.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(b){return b}},z.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},z.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},z.extractPathCoords=function(T,b,h){var s=[];return T.match(M.segmentRE).forEach(function(t){var a=b[t.charAt(0)].drawn;if(a!==void 0){var n=t.substr(1).match(M.paramRE);if(n&&!(n.length<a)){var r=n[a],i=h?r:k.cleanNumber(r);s.push(i)}}}),s},z.getDataToPixel=function(T,b,h,s){var t,a=T._fullLayout._size;if(b)if(s==="domain")t=function(r){return b._length*(h?1-r:r)+b._offset};else{var n=z.shapePositionToRange(b);t=function(r){return b._offset+b.r2p(n(r,!0))},b.type==="date"&&(t=z.decodeDate(t))}else t=h?function(r){return a.t+a.h*(1-r)}:function(r){return a.l+a.w*r};return t},z.getPixelToData=function(T,b,h,s){var t,a=T._fullLayout._size;if(b)if(s==="domain")t=function(r){var i=(r-b._offset)/b._length;return h?1-i:i};else{var n=z.rangeToShapePosition(b);t=function(r){return n(b.p2r(r-b._offset))}}else t=h?function(r){return 1-(r-a.t)/a.h}:function(r){return(r-a.l)/a.w};return t},z.roundPositionForSharpStrokeRendering=function(T,b){var h=Math.round(b%2)===1,s=Math.round(T);return h?s+.5:s},z.makeShapesOptionsAndPlotinfo=function(T,b){var h=T._fullLayout.shapes[b]||{},s=T._fullLayout._plots[h.xref+h.yref];return s?s._hadPlotinfo=!0:(s={},h.xref&&h.xref!=="paper"&&(s.xaxis=T._fullLayout[h.xref+"axis"]),h.yref&&h.yref!=="paper"&&(s.yaxis=T._fullLayout[h.yref+"axis"])),s.xsizemode=h.xsizemode,s.ysizemode=h.ysizemode,s.xanchor=h.xanchor,s.yanchor=h.yanchor,{options:h,plotinfo:s}},z.makeSelectionsOptionsAndPlotinfo=function(T,b){var h=T._fullLayout.selections[b]||{},s=T._fullLayout._plots[h.xref+h.yref];return s?s._hadPlotinfo=!0:(s={},h.xref&&(s.xaxis=T._fullLayout[h.xref+"axis"]),h.yref&&(s.yaxis=T._fullLayout[h.yref+"axis"])),{options:h,plotinfo:s}},z.getPathString=function(T,b){var h,s,t,a,n,r,i,l,u=b.type,p=o.getRefType(b.xref),c=o.getRefType(b.yref),x=o.getFromId(T,b.xref),d=o.getFromId(T,b.yref),g=T._fullLayout._size;if(x?p==="domain"?s=function(O){return x._offset+x._length*O}:(h=z.shapePositionToRange(x),s=function(O){return x._offset+x.r2p(h(O,!0))}):s=function(O){return g.l+g.w*O},d?c==="domain"?a=function(O){return d._offset+d._length*(1-O)}:(t=z.shapePositionToRange(d),a=function(O){return d._offset+d.r2p(t(O,!0))}):a=function(O){return g.t+g.h*(1-O)},u==="path")return x&&x.type==="date"&&(s=z.decodeDate(s)),d&&d.type==="date"&&(a=z.decodeDate(a)),function(O,C,P){var R=O.path,j=O.xsizemode,D=O.ysizemode,N=O.xanchor,W=O.yanchor;return R.replace(M.segmentRE,function(F){var V=0,U=F.charAt(0),te=M.paramIsX[U],J=M.paramIsY[U],X=M.numParams[U],K=F.substr(1).replace(M.paramRE,function(Q){return te[V]?Q=j==="pixel"?C(N)+Number(Q):C(Q):J[V]&&(Q=D==="pixel"?P(W)-Number(Q):P(Q)),++V>X&&(Q="X"),Q});return V>X&&(K=K.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+F)),U+K})}(b,s,a);if(b.xsizemode==="pixel"){var v=s(b.xanchor);n=v+b.x0,r=v+b.x1}else n=s(b.x0),r=s(b.x1);if(b.ysizemode==="pixel"){var y=a(b.yanchor);i=y-b.y0,l=y-b.y1}else i=a(b.y0),l=a(b.y1);if(u==="line")return"M"+n+","+i+"L"+r+","+l;if(u==="rect")return"M"+n+","+i+"H"+r+"V"+l+"H"+n+"Z";var m=(n+r)/2,_=(i+l)/2,f=Math.abs(m-n),S=Math.abs(_-i),w="A"+f+","+S,E=m+f+","+_;return"M"+E+w+" 0 1,1 "+m+","+(_-S)+w+" 0 0,1 "+E+"Z"}},41592:function(ee,z,e){var M=e(4016);ee.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:M.draw,drawOne:M.drawOne}},97728:function(ee){function z(o,T){return T?T.d2l(o):o}function e(o,T){return T?T.l2d(o):o}function M(o,T){return z(o.x1,T)-z(o.x0,T)}function k(o,T,b){return z(o.y1,b)-z(o.y0,b)}ee.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,T,b){return o.type!=="line"?void 0:k(o,0,b)/M(o,T)},dx:M,dy:k,width:function(o,T){return Math.abs(M(o,T))},height:function(o,T,b){return Math.abs(k(o,0,b))},length:function(o,T,b){return o.type!=="line"?void 0:Math.sqrt(Math.pow(M(o,T),2)+Math.pow(k(o,0,b),2))},xcenter:function(o,T){return e((z(o.x1,T)+z(o.x0,T))/2,T)},ycenter:function(o,T,b){return e((z(o.y1,b)+z(o.y0,b))/2,b)}}},89861:function(ee,z,e){var M=e(25376),k=e(66741),o=e(92880).extendDeepAll,T=e(67824).overrideAll,b=e(85656),h=e(31780).templatedArray,s=e(60876),t=h("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ee.exports=T(h("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(ee){ee.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(ee,z,e){var M=e(3400),k=e(51272),o=e(89861),T=e(60876).name,b=o.steps;function h(t,a,n){function r(c,x){return M.coerce(t,a,o,c,x)}for(var i=k(t,a,{name:"steps",handleItemDefaults:s}),l=0,u=0;u<i.length;u++)i[u].visible&&l++;if(l<2?a.visible=!1:r("visible")){a._stepCount=l;var p=a._visibleSteps=M.filterVisible(i);(i[r("active")]||{}).visible||(a.active=p[0]._index),r("x"),r("y"),M.noneOrAll(t,a,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),M.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),M.coerceFont(r,"currentvalue.font",a.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function s(t,a){function n(i,l){return M.coerce(t,a,b,i,l)}if(t.method==="skip"||Array.isArray(t.args)?n("visible"):a.visible=!1){n("method"),n("args");var r=n("label","step-"+a._index);n("value",r),n("execute")}}ee.exports=function(t,a){k(t,a,{name:T,handleItemDefaults:h})}},79664:function(ee,z,e){var M=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),h=b.strTranslate,s=e(72736),t=e(31780).arrayEditor,a=e(60876),n=e(84284),r=n.LINE_SPACING,i=n.FROM_TL,l=n.FROM_BR;function u(P){return a.autoMarginIdRoot+P._index}function p(P){return P._index}function c(P,R){var j=T.tester.selectAll("g."+a.labelGroupClass).data(R._visibleSteps);j.enter().append("g").classed(a.labelGroupClass,!0);var D=0,N=0;j.each(function(Q){var Z=g(M.select(this),{step:Q},R).node();if(Z){var re=T.bBox(Z);N=Math.max(N,re.height),D=Math.max(D,re.width)}}),j.remove();var W=R._dims={};W.inputAreaWidth=Math.max(a.railWidth,a.gripHeight);var F=P._fullLayout._size;W.lx=F.l+F.w*R.x,W.ly=F.t+F.h*(1-R.y),R.lenmode==="fraction"?W.outerLength=Math.round(F.w*R.len):W.outerLength=R.len,W.inputAreaStart=0,W.inputAreaLength=Math.round(W.outerLength-R.pad.l-R.pad.r);var V=(W.inputAreaLength-2*a.stepInset)/(R._stepCount-1),U=D+a.labelPadding;if(W.labelStride=Math.max(1,Math.ceil(U/V)),W.labelHeight=N,W.currentValueMaxWidth=0,W.currentValueHeight=0,W.currentValueTotalHeight=0,W.currentValueMaxLines=1,R.currentvalue.visible){var te=T.tester.append("g");j.each(function(Q){var Z=x(te,R,Q.label),re=Z.node()&&T.bBox(Z.node())||{width:0,height:0},oe=s.lineCount(Z);W.currentValueMaxWidth=Math.max(W.currentValueMaxWidth,Math.ceil(re.width)),W.currentValueHeight=Math.max(W.currentValueHeight,Math.ceil(re.height)),W.currentValueMaxLines=Math.max(W.currentValueMaxLines,oe)}),W.currentValueTotalHeight=W.currentValueHeight+R.currentvalue.offset,te.remove()}W.height=W.currentValueTotalHeight+a.tickOffset+R.ticklen+a.labelOffset+W.labelHeight+R.pad.t+R.pad.b;var J="left";b.isRightAnchor(R)&&(W.lx-=W.outerLength,J="right"),b.isCenterAnchor(R)&&(W.lx-=W.outerLength/2,J="center");var X="top";b.isBottomAnchor(R)&&(W.ly-=W.height,X="bottom"),b.isMiddleAnchor(R)&&(W.ly-=W.height/2,X="middle"),W.outerLength=Math.ceil(W.outerLength),W.height=Math.ceil(W.height),W.lx=Math.round(W.lx),W.ly=Math.round(W.ly);var K={y:R.y,b:W.height*l[X],t:W.height*i[X]};R.lenmode==="fraction"?(K.l=0,K.xl=R.x-R.len*i[J],K.r=0,K.xr=R.x+R.len*l[J]):(K.x=R.x,K.l=W.outerLength*i[J],K.r=W.outerLength*l[J]),k.autoMargin(P,u(R),K)}function x(P,R,j){if(R.currentvalue.visible){var D,N,W=R._dims;switch(R.currentvalue.xanchor){case"right":D=W.inputAreaLength-a.currentValueInset-W.currentValueMaxWidth,N="left";break;case"center":D=.5*W.inputAreaLength,N="middle";break;default:D=a.currentValueInset,N="left"}var F=b.ensureSingle(P,"text",a.labelClass,function(K){K.attr({"text-anchor":N,"data-notex":1})}),V=R.currentvalue.prefix?R.currentvalue.prefix:"";if(typeof j=="string")V+=j;else{var U=R.steps[R.active].label,te=R._gd._fullLayout._meta;te&&(U=b.templateString(U,te)),V+=U}R.currentvalue.suffix&&(V+=R.currentvalue.suffix),F.call(T.font,R.currentvalue.font).text(V).call(s.convertToTspans,R._gd);var J=s.lineCount(F),X=(W.currentValueMaxLines+1-J)*R.currentvalue.font.size*r;return s.positionText(F,D,X),F}}function d(P,R,j){b.ensureSingle(P,"rect",a.gripRectClass,function(D){D.call(_,R,P,j).style("pointer-events","all")}).attr({width:a.gripWidth,height:a.gripHeight,rx:a.gripRadius,ry:a.gripRadius}).call(o.stroke,j.bordercolor).call(o.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px")}function g(P,R,j){var D=b.ensureSingle(P,"text",a.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),N=R.step.label,W=j._gd._fullLayout._meta;return W&&(N=b.templateString(N,W)),D.call(T.font,j.font).text(N).call(s.convertToTspans,j._gd),D}function v(P,R){var j=b.ensureSingle(P,"g",a.labelsClass),D=R._dims,N=j.selectAll("g."+a.labelGroupClass).data(D.labelSteps);N.enter().append("g").classed(a.labelGroupClass,!0),N.exit().remove(),N.each(function(W){var F=M.select(this);F.call(g,W,R),T.setTranslate(F,w(R,W.fraction),a.tickOffset+R.ticklen+R.font.size*r+a.labelOffset+D.currentValueTotalHeight)})}function y(P,R,j,D,N){var W=Math.round(D*(j._stepCount-1)),F=j._visibleSteps[W]._index;F!==j.active&&m(P,R,j,F,!0,N)}function m(P,R,j,D,N,W){var F=j.active;j.active=D,t(P.layout,a.name,j).applyUpdate("active",D);var V=j.steps[j.active];R.call(S,j,W),R.call(x,j),P.emit("plotly_sliderchange",{slider:j,step:j.steps[j.active],interaction:N,previousActive:F}),V&&V.method&&N&&(R._nextMethod?(R._nextMethod.step=V,R._nextMethod.doCallback=N,R._nextMethod.doTransition=W):(R._nextMethod={step:V,doCallback:N,doTransition:W},R._nextMethodRaf=window.requestAnimationFrame(function(){var U=R._nextMethod.step;U.method&&(U.execute&&k.executeAPICommand(P,U.method,U.args),R._nextMethod=null,R._nextMethodRaf=null)})))}function _(P,R,j){if(!R._context.staticPlot){var D=j.node(),N=M.select(R);P.on("mousedown",F),P.on("touchstart",F)}function W(){return j.data()[0]}function F(){var V=W();R.emit("plotly_sliderstart",{slider:V});var U=j.select("."+a.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),U.call(o.fill,V.activebgcolor);var te=E(V,M.mouse(D)[0]);function J(){var K=W(),Q=E(K,M.mouse(D)[0]);y(R,j,K,Q,!1)}function X(){var K=W();K._dragging=!1,U.call(o.fill,K.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),R.emit("plotly_sliderend",{slider:K,step:K.steps[K.active]})}y(R,j,V,te,!0),V._dragging=!0,N.on("mousemove",J),N.on("touchmove",J),N.on("mouseup",X),N.on("touchend",X)}}function f(P,R){var j=P.selectAll("rect."+a.tickRectClass).data(R._visibleSteps),D=R._dims;j.enter().append("rect").classed(a.tickRectClass,!0),j.exit().remove(),j.attr({width:R.tickwidth+"px","shape-rendering":"crispEdges"}),j.each(function(N,W){var F=W%D.labelStride==0,V=M.select(this);V.attr({height:F?R.ticklen:R.minorticklen}).call(o.fill,R.tickcolor),T.setTranslate(V,w(R,W/(R._stepCount-1))-.5*R.tickwidth,(F?a.tickOffset:a.minorTickOffset)+D.currentValueTotalHeight)})}function S(P,R,j){for(var D=P.select("rect."+a.gripRectClass),N=0,W=0;W<R._stepCount;W++)if(R._visibleSteps[W]._index===R.active){N=W;break}var F=w(R,N/(R._stepCount-1));if(!R._invokingCommand){var V=D;j&&R.transition.duration>0&&(V=V.transition().duration(R.transition.duration).ease(R.transition.easing)),V.attr("transform",h(F-.5*a.gripWidth,R._dims.currentValueTotalHeight))}}function w(P,R){var j=P._dims;return j.inputAreaStart+a.stepInset+(j.inputAreaLength-2*a.stepInset)*Math.min(1,Math.max(0,R))}function E(P,R){var j=P._dims;return Math.min(1,Math.max(0,(R-a.stepInset-j.inputAreaStart)/(j.inputAreaLength-2*a.stepInset-2*j.inputAreaStart)))}function O(P,R,j){var D=j._dims,N=b.ensureSingle(P,"rect",a.railTouchRectClass,function(W){W.call(_,R,P,j).style("pointer-events","all")});N.attr({width:D.inputAreaLength,height:Math.max(D.inputAreaWidth,a.tickOffset+j.ticklen+D.labelHeight)}).call(o.fill,j.bgcolor).attr("opacity",0),T.setTranslate(N,0,D.currentValueTotalHeight)}function C(P,R){var j=R._dims,D=j.inputAreaLength-2*a.railInset,N=b.ensureSingle(P,"rect",a.railRectClass);N.attr({width:D,height:a.railWidth,rx:a.railRadius,ry:a.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,R.bordercolor).call(o.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),T.setTranslate(N,a.railInset,.5*(j.inputAreaWidth-a.railWidth)+j.currentValueTotalHeight)}ee.exports=function(P){var R=P._context.staticPlot,j=P._fullLayout,D=function(te,J){for(var X=te[a.name],K=[],Q=0;Q<X.length;Q++){var Z=X[Q];Z.visible&&(Z._gd=J,K.push(Z))}return K}(j,P),N=j._infolayer.selectAll("g."+a.containerClassName).data(D.length>0?[0]:[]);function W(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),k.autoMargin(P,u(te))}if(N.enter().append("g").classed(a.containerClassName,!0).style("cursor",R?null:"ew-resize"),N.exit().each(function(){M.select(this).selectAll("g."+a.groupClassName).each(W)}).remove(),D.length!==0){var F=N.selectAll("g."+a.groupClassName).data(D,p);F.enter().append("g").classed(a.groupClassName,!0),F.exit().each(W).remove();for(var V=0;V<D.length;V++){var U=D[V];c(P,U)}F.each(function(te){var J=M.select(this);(function(X){var K=X._dims;K.labelSteps=[];for(var Q=X._stepCount,Z=0;Z<Q;Z+=K.labelStride)K.labelSteps.push({fraction:Z/(Q-1),step:X._visibleSteps[Z]})})(te),k.manageCommandObserver(P,te,te._visibleSteps,function(X){var K=J.data()[0];K.active!==X.index&&(K._dragging||m(P,J,K,X.index,!1,!0))}),function(X,K,Q){(Q.steps[Q.active]||{}).visible||(Q.active=Q._visibleSteps[0]._index),K.call(x,Q).call(C,Q).call(v,Q).call(f,Q).call(O,X,Q).call(d,X,Q);var Z=Q._dims;T.setTranslate(K,Z.lx+Q.pad.l,Z.ly+Q.pad.t),K.call(S,Q,!1),K.call(x,Q)}(P,M.select(this),te)})}}},97544:function(ee,z,e){var M=e(60876);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(ee,z,e){var M=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),h=b.strTranslate,s=e(43616),t=e(76308),a=e(72736),n=e(13448),r=e(84284).OPPOSITE_SIDE,i=/ [XY][0-9]* /;ee.exports={draw:function(l,u,p){var c,x=p.propContainer,d=p.propName,g=p.placeholder,v=p.traceIndex,y=p.avoid||{},m=p.attributes,_=p.transform,f=p.containerGroup,S=l._fullLayout,w=1,E=!1,O=x.title,C=(O&&O.text?O.text:"").trim(),P=O&&O.font?O.font:{},R=P.family,j=P.size,D=P.color,N=P.weight,W=P.style,F=P.variant;d==="title.text"?c="titleText":d.indexOf("axis")!==-1?c="axisTitleText":d.indexOf(!0)&&(c="colorbarTitleText");var V=l._context.edits[c];C===""?w=0:C.replace(i," % ")===g.replace(i," % ")&&(w=.2,E=!0,V||(C="")),p._meta?C=b.templateString(C,p._meta):S._meta&&(C=b.templateString(C,S._meta));var U,te=C||V;f||(f=b.ensureSingle(S._infolayer,"g","g-"+u),U=S._hColorbarMoveTitle);var J=f.selectAll("text").data(te?[0]:[]);if(J.enter().append("text"),J.text(C).attr("class",u),J.exit().remove(),!te)return f;function X(Z){b.syncOrAsync([K,Q],Z)}function K(Z){var re;return!_&&U&&(_={}),_?(re="",_.rotate&&(re+="rotate("+[_.rotate,m.x,m.y]+")"),(_.offset||U)&&(re+=h(0,(_.offset||0)-(U||0)))):re=null,Z.attr("transform",re),Z.style({"font-family":R,"font-size":M.round(j,2)+"px",fill:t.rgb(D),opacity:w*t.opacity(D),"font-weight":N,"font-style":W,"font-variant":F}).attr(m).call(a.convertToTspans,l),o.previousPromises(l)}function Q(Z){var re=M.select(Z.node().parentNode);if(y&&y.selection&&y.side&&C){re.attr("transform",null);var oe=r[y.side],ae=y.side==="left"||y.side==="top"?-1:1,ce=k(y.pad)?y.pad:2,he=s.bBox(re.node()),pe={t:0,b:0,l:0,r:0},xe=l._fullLayout._reservedMargin;for(var be in xe)for(var ve in xe[be]){var ge=xe[be][ve];pe[ve]=Math.max(pe[ve],ge)}var we={left:pe.l,top:pe.t,right:S.width-pe.r,bottom:S.height-pe.b},_e=y.maxShift||ae*(we[y.side]-he[y.side]),se=0;if(_e<0)se=_e;else{var ie=y.offsetLeft||0,fe=y.offsetTop||0;he.left-=ie,he.right-=ie,he.top-=fe,he.bottom-=fe,y.selection.each(function(){var Te=s.bBox(this);b.bBoxIntersect(he,Te,ce)&&(se=Math.max(se,ae*(Te[y.side]-he[oe])+ce))}),se=Math.min(_e,se),x._titleScoot=Math.abs(se)}if(se>0||_e<0){var Ee={left:[-se,0],right:[se,0],top:[0,-se],bottom:[0,se]}[y.side];re.attr("transform",h(Ee[0],Ee[1]))}}}return J.call(X),V&&(C?J.on(".opacity",null):(w=0,E=!0,J.text(g).on("mouseover.opacity",function(){M.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})),J.call(a.makeEditable,{gd:l}).on("edit",function(Z){v!==void 0?T.call("_guiRestyle",l,d,Z,v):T.call("_guiRelayout",l,d,Z)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(X)}).on("input",function(Z){this.text(Z||" ").call(a.positionText,m.x,m.y)})),J.classed("js-placeholder",E),f}}},88444:function(ee,z,e){var M=e(25376),k=e(22548),o=e(92880).extendFlat,T=e(67824).overrideAll,b=e(66741),h=e(31780).templatedArray,s=h("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ee.exports=T(h("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(b({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(ee){ee.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},91384:function(ee,z,e){var M=e(3400),k=e(51272),o=e(88444),T=e(73712).name,b=o.buttons;function h(t,a,n){function r(i,l){return M.coerce(t,a,o,i,l)}r("visible",k(t,a,{name:"buttons",handleItemDefaults:s}).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),M.noneOrAll(t,a,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),M.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function s(t,a){function n(r,i){return M.coerce(t,a,b,r,i)}n("visible",t.method==="skip"||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}ee.exports=function(t,a){k(t,a,{name:T,handleItemDefaults:h})}},14420:function(ee,z,e){var M=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),h=e(72736),s=e(31780).arrayEditor,t=e(84284).LINE_SPACING,a=e(73712),n=e(37400);function r(w){return w._index}function i(w,E){return+w.attr(a.menuIndexAttrName)===E._index}function l(w,E,O,C,P,R,j,D){E.active=j,s(w.layout,a.name,E).applyUpdate("active",j),E.type==="buttons"?p(w,C,null,null,E):E.type==="dropdown"&&(P.attr(a.menuIndexAttrName,"-1"),u(w,C,P,R,E),D||p(w,C,P,R,E))}function u(w,E,O,C,P){var R=b.ensureSingle(E,"g",a.headerClassName,function(V){V.style("pointer-events","all")}),j=P._dims,D=P.active,N=P.buttons[D]||a.blankHeaderOpts,W={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},F={width:j.headerWidth,height:j.headerHeight};R.call(c,P,N,w).call(f,P,W,F),b.ensureSingle(E,"text",a.headerArrowClassName,function(V){V.attr("text-anchor","end").call(T.font,P.font).text(a.arrowSymbol[P.direction])}).attr({x:j.headerWidth-a.arrowOffsetX+P.pad.l,y:j.headerHeight/2+a.textOffsetY+P.pad.t}),R.on("click",function(){O.call(S,String(i(O,P)?-1:P._index)),p(w,E,O,C,P)}),R.on("mouseover",function(){R.call(v)}),R.on("mouseout",function(){R.call(y,P)}),T.setTranslate(E,j.lx,j.ly)}function p(w,E,O,C,P){O||(O=E).attr("pointer-events","all");var R=function(K){return+K.attr(a.menuIndexAttrName)==-1}(O)&&P.type!=="buttons"?[]:P.buttons,j=P.type==="dropdown"?a.dropdownButtonClassName:a.buttonClassName,D=O.selectAll("g."+j).data(b.filterVisible(R)),N=D.enter().append("g").classed(j,!0),W=D.exit();P.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),W.transition().attr("opacity","0").remove()):W.remove();var F=0,V=0,U=P._dims,te=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(te?V=U.headerHeight+a.gapButtonHeader:F=U.headerWidth+a.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(V=-a.gapButtonHeader+a.gapButton-U.openHeight),P.type==="dropdown"&&P.direction==="left"&&(F=-a.gapButtonHeader+a.gapButton-U.openWidth);var J={x:U.lx+F+P.pad.l,y:U.ly+V+P.pad.t,yPad:a.gapButton,xPad:a.gapButton,index:0},X={l:J.x+P.borderwidth,t:J.y+P.borderwidth};D.each(function(K,Q){var Z=M.select(this);Z.call(c,P,K,w).call(f,P,J),Z.on("click",function(){M.event.defaultPrevented||(K.execute&&(K.args2&&P.active===Q?(l(w,P,0,E,O,C,-1),k.executeAPICommand(w,K.method,K.args2)):(l(w,P,0,E,O,C,Q),k.executeAPICommand(w,K.method,K.args))),w.emit("plotly_buttonclicked",{menu:P,button:K,active:P.active}))}),Z.on("mouseover",function(){Z.call(v)}),Z.on("mouseout",function(){Z.call(y,P),D.call(g,P)})}),D.call(g,P),te?(X.w=Math.max(U.openWidth,U.headerWidth),X.h=J.y-X.t):(X.w=J.x-X.l,X.h=Math.max(U.openHeight,U.headerHeight)),X.direction=P.direction,C&&(D.size()?function(K,Q,Z,re,oe,ae){var ce,he,pe,xe=oe.direction,be=xe==="up"||xe==="down",ve=oe._dims,ge=oe.active;if(be)for(he=0,pe=0;pe<ge;pe++)he+=ve.heights[pe]+a.gapButton;else for(ce=0,pe=0;pe<ge;pe++)ce+=ve.widths[pe]+a.gapButton;re.enable(ae,ce,he),re.hbar&&re.hbar.attr("opacity","0").transition().attr("opacity","1"),re.vbar&&re.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,X):function(K){var Q=!!K.hbar,Z=!!K.vbar;Q&&K.hbar.transition().attr("opacity","0").each("end",function(){Q=!1,Z||K.disable()}),Z&&K.vbar.transition().attr("opacity","0").each("end",function(){Z=!1,Q||K.disable()})}(C))}function c(w,E,O,C){w.call(x,E).call(d,E,O,C)}function x(w,E){b.ensureSingle(w,"rect",a.itemRectClassName,function(O){O.attr({rx:a.rx,ry:a.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,E.bordercolor).call(o.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function d(w,E,O,C){var P=b.ensureSingle(w,"text",a.itemTextClassName,function(D){D.attr({"text-anchor":"start","data-notex":1})}),R=O.label,j=C._fullLayout._meta;j&&(R=b.templateString(R,j)),P.call(T.font,E.font).text(R).call(h.convertToTspans,C)}function g(w,E){var O=E.active;w.each(function(C,P){var R=M.select(this);P===O&&E.showactive&&R.select("rect."+a.itemRectClassName).call(o.fill,a.activeColor)})}function v(w){w.select("rect."+a.itemRectClassName).call(o.fill,a.hoverColor)}function y(w,E){w.select("rect."+a.itemRectClassName).call(o.fill,E.bgcolor)}function m(w,E){var O=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+a.dropdownButtonClassName).data(b.filterVisible(E.buttons));C.enter().append("g").classed(a.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;C.each(function(F,V){var U=M.select(this);U.call(c,E,F,w);var te=U.select("."+a.itemTextClassName),J=te.node()&&T.bBox(te.node()).width,X=Math.max(J+a.textPadX,a.minWidth),K=E.font.size*t,Q=h.lineCount(te),Z=Math.max(K*Q,a.minHeight)+a.textOffsetY;Z=Math.ceil(Z),X=Math.ceil(X),O.widths[V]=X,O.heights[V]=Z,O.height1=Math.max(O.height1,Z),O.width1=Math.max(O.width1,X),P?(O.totalWidth=Math.max(O.totalWidth,X),O.openWidth=O.totalWidth,O.totalHeight+=Z+a.gapButton,O.openHeight+=Z+a.gapButton):(O.totalWidth+=X+a.gapButton,O.openWidth+=X+a.gapButton,O.totalHeight=Math.max(O.totalHeight,Z),O.openHeight=O.totalHeight)}),P?O.totalHeight-=a.gapButton:O.totalWidth-=a.gapButton,O.headerWidth=O.width1+a.arrowPadX,O.headerHeight=O.height1,E.type==="dropdown"&&(P?(O.width1+=a.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=a.arrowPadX),C.remove();var R=O.totalWidth+E.pad.l+E.pad.r,j=O.totalHeight+E.pad.t+E.pad.b,D=w._fullLayout._size;O.lx=D.l+D.w*E.x,O.ly=D.t+D.h*(1-E.y);var N="left";b.isRightAnchor(E)&&(O.lx-=R,N="right"),b.isCenterAnchor(E)&&(O.lx-=R/2,N="center");var W="top";b.isBottomAnchor(E)&&(O.ly-=j,W="bottom"),b.isMiddleAnchor(E)&&(O.ly-=j/2,W="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),k.autoMargin(w,_(E),{x:E.x,y:E.y,l:R*({right:1,center:.5}[N]||0),r:R*({left:1,center:.5}[N]||0),b:j*({top:1,middle:.5}[W]||0),t:j*({bottom:1,middle:.5}[W]||0)})}function _(w){return a.autoMarginIdRoot+w._index}function f(w,E,O,C){C=C||{};var P=w.select("."+a.itemRectClassName),R=w.select("."+a.itemTextClassName),j=E.borderwidth,D=O.index,N=E._dims;T.setTranslate(w,j+O.x,j+O.y);var W=["up","down"].indexOf(E.direction)!==-1,F=C.height||(W?N.heights[D]:N.height1);P.attr({x:0,y:0,width:C.width||(W?N.width1:N.widths[D]),height:F});var V=E.font.size*t,U=(h.lineCount(R)-1)*V/2;h.positionText(R,a.textOffsetX,F/2-U+a.textOffsetY),W?O.y+=N.heights[D]+O.yPad:O.x+=N.widths[D]+O.xPad,O.index++}function S(w,E){w.attr(a.menuIndexAttrName,E||"-1").selectAll("g."+a.dropdownButtonClassName).remove()}ee.exports=function(w){var E=w._fullLayout,O=b.filterVisible(E[a.name]);function C(V){k.autoMargin(w,_(V))}var P=E._menulayer.selectAll("g."+a.containerClassName).data(O.length>0?[0]:[]);if(P.enter().append("g").classed(a.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){M.select(this).selectAll("g."+a.headerGroupClassName).each(C)}).remove(),O.length!==0){var R=P.selectAll("g."+a.headerGroupClassName).data(O,r);R.enter().append("g").classed(a.headerGroupClassName,!0);for(var j=b.ensureSingle(P,"g",a.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")}),D=0;D<O.length;D++){var N=O[D];m(w,N)}var W="updatemenus"+E._uid,F=new n(w,j,W);R.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(S)),R.exit().each(function(V){j.call(S),C(V)}).remove(),R.each(function(V){var U=M.select(this),te=V.type==="dropdown"?j:null;k.manageCommandObserver(w,V,V.buttons,function(J){l(w,V,V.buttons[J.index],U,te,F,J.index,!0)}),V.type==="dropdown"?(u(w,U,j,F,V),i(j,V)&&p(w,U,j,F,V)):p(w,U,null,null,V)})}}},76908:function(ee,z,e){var M=e(73712);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(ee,z,e){ee.exports=b;var M=e(33428),k=e(76308),o=e(43616),T=e(3400);function b(h,s,t){this.gd=h,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(h,s,t){var a=this.gd._fullLayout,n=a.width,r=a.height;this.position=h;var i,l,u,p,c=this.position.l,x=this.position.w,d=this.position.t,g=this.position.h,v=this.position.direction,y=v==="down",m=v==="left",_=v==="up",f=x,S=g;y||m||v==="right"||_||(this.position.direction="down",y=!0),y||_?(l=(i=c)+f,y?(u=d,S=(p=Math.min(u+S,r))-u):S=(p=d+S)-(u=Math.max(p-S,0))):(p=(u=d)+S,m?f=(l=c+f)-(i=Math.max(l-f,0)):(i=c,f=(l=Math.min(i+f,n))-i)),this._box={l:i,t:u,w:f,h:S};var w=x>f,E=b.barLength+2*b.barPad,O=b.barWidth+2*b.barPad,C=c,P=d+g;P+O>r&&(P=r-O);var R=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),w?(this.hbar=R.attr({rx:b.barRadius,ry:b.barRadius,x:C,y:P,width:E,height:O}),this._hbarXMin=C+E/2,this._hbarTranslateMax=f-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var j=g>S,D=b.barWidth+2*b.barPad,N=b.barLength+2*b.barPad,W=c+x,F=d;W+D>n&&(W=n-D);var V=this.container.selectAll("rect.scrollbar-vertical").data(j?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),j?(this.vbar=V.attr({rx:b.barRadius,ry:b.barRadius,x:W,y:F,width:D,height:N}),this._vbarYMin=F+N/2,this._vbarTranslateMax=S-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var U=this.id,te=i-.5,J=j?l+D+.5:l+.5,X=u-.5,K=w?p+O+.5:p+.5,Q=a._topdefs.selectAll("#"+U).data(w||j?[0]:[]);if(Q.exit().remove(),Q.enter().append("clipPath").attr("id",U).append("rect"),w||j?(this._clipRect=Q.select("rect").attr({x:Math.floor(te),y:Math.floor(X),width:Math.ceil(J)-Math.floor(te),height:Math.ceil(K)-Math.floor(X)}),this.container.call(o.setClipUrl,U,this.gd),this.bg.attr({x:c,y:d,width:x,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),w||j){var Z=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Z);var re=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(re),j&&this.vbar.on(".drag",null).call(re)}this.setTranslate(s,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var h=this.translateX,s=this.translateY;this.hbar&&(h-=M.event.dx),this.vbar&&(s-=M.event.dy),this.setTranslate(h,s)},b.prototype._onBoxWheel=function(){var h=this.translateX,s=this.translateY;this.hbar&&(h+=M.event.deltaY),this.vbar&&(s+=M.event.deltaY),this.setTranslate(h,s)},b.prototype._onBarDrag=function(){var h=this.translateX,s=this.translateY;if(this.hbar){var t=h+this._hbarXMin,a=t+this._hbarTranslateMax;h=(T.constrain(M.event.x,t,a)-t)/(a-t)*(this.position.w-this._box.w)}if(this.vbar){var n=s+this._vbarYMin,r=n+this._vbarTranslateMax;s=(T.constrain(M.event.y,n,r)-n)/(r-n)*(this.position.h-this._box.h)}this.setTranslate(h,s)},b.prototype.setTranslate=function(h,s){var t=this.position.w-this._box.w,a=this.position.h-this._box.h;if(h=T.constrain(h||0,0,t),s=T.constrain(s||0,0,a),this.translateX=h,this.translateY=s,this.container.call(o.setTranslate,this._box.l-this.position.l-h,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+h-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var n=h/t;this.hbar.call(o.setTranslate,h+n*this._hbarTranslateMax,s)}if(this.vbar){var r=s/a;this.vbar.call(o.setTranslate,h,s+r*this._vbarTranslateMax)}}},84284:function(ee){ee.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(ee){ee.exports={axisRefDescription:function(z,e,M){return["If set to a",z,"axis id (e.g. *"+z+"* or","*"+z+"2*), the `"+z+"` position refers to a",z,"coordinate. If set to *paper*, the `"+z+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",z,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+z+"2 domain* refers to the domain of the second",z," axis and a",z,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",z,"axis."].join(" ")}}},48164:function(ee){ee.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},26880:function(ee){ee.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(ee){ee.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(ee){ee.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(ee){ee.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},13448:function(ee){ee.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(ee){ee.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},2264:function(ee,z){z.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],z.STYLE=z.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(ee,z){z.xmlns="http://www.w3.org/2000/xmlns/",z.svg="http://www.w3.org/2000/svg",z.xlink="http://www.w3.org/1999/xlink",z.svgAttrs={xmlns:z.svg,"xmlns:xlink":z.xlink}},64884:function(ee,z,e){z.version=e(25788).version,e(88324),e(79288);for(var M=e(24040),k=z.register=M.register,o=e(22448),T=Object.keys(o),b=0;b<T.length;b++){var h=T[b];h.charAt(0)!=="_"&&(z[h]=o[h]),k({moduleType:"apiMethod",name:h,fn:o[h]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),z.Icons=e(9224);var s=e(93024),t=e(7316);z.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},z.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},z.Snapshot=e(78904),z.PlotSchema=e(73060)},9224:function(ee){ee.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(ee,z){z.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},z.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},z.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},z.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},z.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},z.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(ee,z,e){var M=e(20435),k=M.mod,o=M.modHalf,T=Math.PI,b=2*T;function h(n){return Math.abs(n[1]-n[0])>b-1e-14}function s(n,r){return o(r-n,b)}function t(n,r){if(h(r))return!0;var i,l;r[0]<r[1]?(i=r[0],l=r[1]):(i=r[1],l=r[0]),(i=k(i,b))>(l=k(l,b))&&(l+=b);var u=k(n,b),p=u+b;return u>=i&&u<=l||p>=i&&p<=l}function a(n,r,i,l,u,p,c){u=u||0,p=p||0;var x,d,g,v,y,m=h([i,l]);function _(E,O){return[E*Math.cos(O)+u,p-E*Math.sin(O)]}m?(x=0,d=T,g=b):i<l?(x=i,g=l):(x=l,g=i),n<r?(v=n,y=r):(v=r,y=n);var f,S=Math.abs(g-x)<=T?0:1;function w(E,O,C){return"A"+[E,E]+" "+[0,S,C]+" "+_(E,O)}return m?f=v===null?"M"+_(y,x)+w(y,d,0)+w(y,g,0)+"Z":"M"+_(v,x)+w(v,d,0)+w(v,g,0)+"ZM"+_(y,x)+w(y,d,1)+w(y,g,1)+"Z":v===null?(f="M"+_(y,x)+w(y,g,0),c&&(f+="L0,0Z")):f="M"+_(v,x)+"L"+_(y,x)+w(y,g,0)+"L"+_(v,g)+w(v,x,1)+"Z",f}ee.exports={deg2rad:function(n){return n/180*T},rad2deg:function(n){return n/T*180},angleDelta:s,angleDist:function(n,r){return Math.abs(s(n,r))},isFullCircle:h,isAngleInsideSector:t,isPtInsideSector:function(n,r,i,l){return!!t(r,l)&&(i[0]<i[1]?(u=i[0],p=i[1]):(u=i[1],p=i[0]),n>=u&&n<=p);var u,p},pathArc:function(n,r,i,l,u){return a(null,n,r,i,l,u,0)},pathSector:function(n,r,i,l,u){return a(null,n,r,i,l,u,1)},pathAnnulus:function(n,r,i,l,u,p){return a(n,r,i,l,u,p,1)}}},38116:function(ee,z,e){var M=e(83160).decode,k=e(63620),o=Array.isArray,T=ArrayBuffer,b=DataView;function h(r){return T.isView(r)&&!(r instanceof b)}function s(r){return o(r)||h(r)}z.isTypedArray=h,z.isArrayOrTypedArray=s,z.isArray1D=function(r){return!s(r[0])},z.ensureArray=function(r,i){return o(r)||(r=[]),r.length=i,r};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function a(r){return r.constructor===ArrayBuffer}function n(r,i,l){if(s(r)){if(s(r[0])){for(var u=l,p=0;p<r.length;p++)u=i(u,r[p].length);return u}return r.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,z.isArrayBuffer=a,z.decodeTypedArraySpec=function(r){var i=[],l=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(r),u=l.dtype,p=t[u];if(!p)throw new Error('Error in dtype: "'+u+'"');var c=p.BYTES_PER_ELEMENT,x=l.bdata;a(x)||(x=M(x));var d=l.shape===void 0?[x.byteLength/c]:(""+l.shape).split(",");d.reverse();var g,v,y=d.length,m=+d[0],_=c*m,f=0;if(y===1)i=new p(x);else if(y===2)for(g=+d[1],v=0;v<g;v++)i[v]=new p(x,f,m),f+=_;else{if(y!==3)throw new Error("ndim: "+y+'is not supported with the shape:"'+l.shape+'"');g=+d[1];for(var S=+d[2],w=0;w<S;w++)for(i[w]=[],v=0;v<g;v++)i[w][v]=new p(x,f,m),f+=_}return i.bdata=l.bdata,i.dtype=l.dtype,i.shape=d.reverse().join(","),r._inputArray=i,i},z.isTypedArraySpec=function(r){return k(r)&&r.hasOwnProperty("dtype")&&typeof r.dtype=="string"&&r.hasOwnProperty("bdata")&&(typeof r.bdata=="string"||a(r.bdata))&&(r.shape===void 0||r.hasOwnProperty("shape")&&(typeof r.shape=="string"||typeof r.shape=="number"))},z.concat=function(){var r,i,l,u,p,c,x,d,g=[],v=!0,y=0;for(l=0;l<arguments.length;l++)(c=(u=arguments[l]).length)&&(i?g.push(u):(i=u,p=c),o(u)?r=!1:(v=!1,y?r!==u.constructor&&(r=!1):r=u.constructor),y+=c);if(!y)return[];if(!g.length)return i;if(v)return i.concat.apply(i,g);if(r){for((x=new r(y)).set(i),l=0;l<g.length;l++)u=g[l],x.set(u,p),p+=u.length;return x}for(x=new Array(y),d=0;d<i.length;d++)x[d]=i[d];for(l=0;l<g.length;l++){for(u=g[l],d=0;d<u.length;d++)x[p+d]=u[d];p+=d}return x},z.maxRowLength=function(r){return n(r,Math.max,0)},z.minRowLength=function(r){return n(r,Math.min,1/0)}},54037:function(ee,z,e){var M=e(38248),k=e(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ee.exports=function(T){return typeof T=="string"&&(T=T.replace(o,"")),M(T)?Number(T):k}},73696:function(ee){ee.exports=function(z){var e=z._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},75352:function(ee){ee.exports=function(z){z._responsiveChartHandler&&(window.removeEventListener("resize",z._responsiveChartHandler),delete z._responsiveChartHandler)}},63064:function(ee,z,e){var M=e(38248),k=e(49760),o=e(45464),T=e(88304),b=e(76308),h=e(13448).DESELECTDIM,s=e(22296),t=e(53756).counter,a=e(20435).modHalf,n=e(38116).isArrayOrTypedArray,r=e(38116).isTypedArraySpec,i=e(38116).decodeTypedArraySpec;function l(u,p){var c=z.valObjectMeta[p.valType];if(p.arrayOk&&n(u))return!0;if(c.validateFunction)return c.validateFunction(u,p);var x={},d=x,g={set:function(v){d=v}};return c.coerceFunction(u,g,x,p),d!==x}z.valObjectMeta={data_array:{coerceFunction:function(u,p,c){p.set(n(u)?u:r(u)?i(u):c)}},enumerated:{coerceFunction:function(u,p,c,x){x.coerceNumber&&(u=+u),x.values.indexOf(u)===-1?p.set(c):p.set(u)},validateFunction:function(u,p){p.coerceNumber&&(u=+u);for(var c=p.values,x=0;x<c.length;x++){var d=String(c[x]);if(d.charAt(0)==="/"&&d.charAt(d.length-1)==="/"){if(new RegExp(d.substr(1,d.length-2)).test(u))return!0}else if(u===c[x])return!0}return!1}},boolean:{coerceFunction:function(u,p,c){u===!0||u===!1?p.set(u):p.set(c)}},number:{coerceFunction:function(u,p,c,x){!M(u)||x.min!==void 0&&u<x.min||x.max!==void 0&&u>x.max?p.set(c):p.set(+u)}},integer:{coerceFunction:function(u,p,c,x){u%1||!M(u)||x.min!==void 0&&u<x.min||x.max!==void 0&&u>x.max?p.set(c):p.set(+u)}},string:{coerceFunction:function(u,p,c,x){if(typeof u!="string"){var d=typeof u=="number";x.strict!==!0&&d?p.set(String(u)):p.set(c)}else x.noBlank&&!u?p.set(c):p.set(u)}},color:{coerceFunction:function(u,p,c){k(u).isValid()?p.set(u):p.set(c)}},colorlist:{coerceFunction:function(u,p,c){Array.isArray(u)&&u.length&&u.every(function(x){return k(x).isValid()})?p.set(u):p.set(c)}},colorscale:{coerceFunction:function(u,p,c){p.set(T.get(u,c))}},angle:{coerceFunction:function(u,p,c){u==="auto"?p.set("auto"):M(u)?p.set(a(+u,360)):p.set(c)}},subplotid:{coerceFunction:function(u,p,c,x){var d=x.regex||t(c);typeof u=="string"&&d.test(u)?p.set(u):p.set(c)},validateFunction:function(u,p){var c=p.dflt;return u===c||typeof u=="string"&&!!t(c).test(u)}},flaglist:{coerceFunction:function(u,p,c,x){if((x.extras||[]).indexOf(u)===-1)if(typeof u=="string"){for(var d=u.split("+"),g=0;g<d.length;){var v=d[g];x.flags.indexOf(v)===-1||d.indexOf(v)<g?d.splice(g,1):g++}d.length?p.set(d.join("+")):p.set(c)}else p.set(c);else p.set(u)}},any:{coerceFunction:function(u,p,c){u===void 0?p.set(c):p.set(r(u)?i(u):u)}},info_array:{coerceFunction:function(u,p,c,x){function d(j,D,N){var W,F={set:function(V){W=V}};return N===void 0&&(N=D.dflt),z.valObjectMeta[D.valType].coerceFunction(j,F,N,D),W}if(r(u)&&(u=i(u)),n(u)){var g,v,y,m,_,f,S=x.dimensions===2||x.dimensions==="1-2"&&Array.isArray(u)&&n(u[0]),w=x.items,E=[],O=Array.isArray(w),C=O&&S&&n(w[0]),P=S&&O&&!C,R=O&&!P?w.length:u.length;if(c=Array.isArray(c)?c:[],S)for(g=0;g<R;g++)for(E[g]=[],y=n(u[g])?u[g]:[],_=P?w.length:O?w[g].length:y.length,v=0;v<_;v++)m=P?w[v]:O?w[g][v]:w,(f=d(y[v],m,(c[g]||[])[v]))!==void 0&&(E[g][v]=f);else for(g=0;g<R;g++)(f=d(u[g],O?w[g]:w,c[g]))!==void 0&&(E[g]=f);p.set(E)}else p.set(c)},validateFunction:function(u,p){if(!n(u))return!1;var c=p.items,x=Array.isArray(c),d=p.dimensions===2;if(!p.freeLength&&u.length!==c.length)return!1;for(var g=0;g<u.length;g++)if(d){if(!n(u[g])||!p.freeLength&&u[g].length!==c[g].length)return!1;for(var v=0;v<u[g].length;v++)if(!l(u[g][v],x?c[g][v]:c))return!1}else if(!l(u[g],x?c[g]:c))return!1;return!0}}},z.coerce=function(u,p,c,x,d){var g=s(c,x).get(),v=s(u,x),y=s(p,x),m=v.get(),_=p._template;if(m===void 0&&_&&(m=s(_,x).get(),_=0),d===void 0&&(d=g.dflt),g.arrayOk){if(n(m))return y.set(m),m;if(r(m))return m=i(m),y.set(m),m}var f=z.valObjectMeta[g.valType].coerceFunction;f(m,y,d,g);var S=y.get();return _&&S===d&&!l(m,g)&&(f(m=s(_,x).get(),y,d,g),S=y.get()),S},z.coerce2=function(u,p,c,x,d){var g=s(u,x),v=z.coerce(u,p,c,x,d);return g.get()!=null&&v},z.coerceFont=function(u,p,c,x){x||(x={});var d={};return c=c||{},d.family=u(p+".family",c.family),d.size=u(p+".size",c.size),d.color=u(p+".color",c.color),d.weight=u(p+".weight",c.weight),d.style=u(p+".style",c.style),x.noFontVariant||(d.variant=u(p+".variant",c.variant)),d},z.coercePattern=function(u,p,c,x){if(u(p+".shape")){u(p+".solidity"),u(p+".size");var d=u(p+".fillmode")==="overlay";if(!x){var g=u(p+".bgcolor",d?c:void 0);u(p+".fgcolor",d?b.contrast(g):c)}u(p+".fgopacity",d?.5:1)}},z.coerceHoverinfo=function(u,p,c){var x,d=p._module.attributes,g=d.hoverinfo?d:o,v=g.hoverinfo;if(c._dataLength===1){var y=v.dflt==="all"?v.flags.slice():v.dflt.split("+");y.splice(y.indexOf("name"),1),x=y.join("+")}return z.coerce(u,p,g,"hoverinfo",x)},z.coerceSelectionMarkerOpacity=function(u,p){if(u.marker){var c,x,d=u.marker.opacity;d!==void 0&&(n(d)||u.selected||u.unselected||(c=d,x=h*d),p("selected.marker.opacity",c),p("unselected.marker.opacity",x))}},z.validate=l},67555:function(ee,z,e){var M,k,o=e(94336).Yn,T=e(38248),b=e(24248),h=e(20435).mod,s=e(39032),t=s.BADNUM,a=s.ONEDAY,n=s.ONEHOUR,r=s.ONEMIN,i=s.ONESEC,l=s.EPOCHJD,u=e(24040),p=e(94336).E9,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=new Date().getFullYear()-70;function g(R){return R&&u.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}function v(R,j){return String(R+Math.pow(10,j)).substr(1)}z.dateTick0=function(R,j){var D=function(W,F){return g(W)?F?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[W]:u.getComponentMethod("calendars","CANONICAL_TICK")[W]:F?"2000-01-02":"2000-01-01"}(R,!!j);if(j<2)return D;var N=z.dateTime2ms(D,R);return N+=a*(j-1),z.ms2DateTime(N,0,R)},z.dfltRange=function(R){return g(R)?u.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},z.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"},z.dateTime2ms=function(R,j){if(z.isJSDate(R)){var D=R.getTimezoneOffset()*r,N=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*i+(R.getUTCMilliseconds()-R.getMilliseconds());if(N){var W=3*r;D=D-W/2+h(N-D+W/2,W)}return(R=Number(R)-D)>=M&&R<=k?R:t}if(typeof R!="string"&&typeof R!="number")return t;R=String(R);var F=g(j),V=R.charAt(0);!F||V!=="G"&&V!=="g"||(R=R.substr(1),j="");var U=F&&j.substr(0,7)==="chinese",te=R.match(U?x:c);if(!te)return t;var J=te[1],X=te[3]||"1",K=Number(te[5]||1),Q=Number(te[7]||0),Z=Number(te[9]||0),re=Number(te[11]||0);if(F){if(J.length===2)return t;var oe;J=Number(J);try{var ae=u.getComponentMethod("calendars","getCal")(j);if(U){var ce=X.charAt(X.length-1)==="i";X=parseInt(X,10),oe=ae.newDate(J,ae.toMonthIndex(J,X,ce),K)}else oe=ae.newDate(J,Number(X),K)}catch{return t}return oe?(oe.toJD()-l)*a+Q*n+Z*r+re*i:t}J=J.length===2?(Number(J)+2e3-d)%100+d:Number(J),X-=1;var he=new Date(Date.UTC(2e3,X,K,Q,Z));return he.setUTCFullYear(J),he.getUTCMonth()!==X||he.getUTCDate()!==K?t:he.getTime()+re*i},M=z.MIN_MS=z.dateTime2ms("-9999"),k=z.MAX_MS=z.dateTime2ms("9999-12-31 23:59:59.9999"),z.isDateTime=function(R,j){return z.dateTime2ms(R,j)!==t};var y=90*a,m=3*n,_=5*r;function f(R,j,D,N,W){if((j||D||N||W)&&(R+=" "+v(j,2)+":"+v(D,2),(N||W)&&(R+=":"+v(N,2),W))){for(var F=4;W%10==0;)F-=1,W/=10;R+="."+v(W,F)}return R}z.ms2DateTime=function(R,j,D){if(typeof R!="number"||!(R>=M&&R<=k))return t;j||(j=0);var N,W,F,V,U,te,J=Math.floor(10*h(R+.05,1)),X=Math.round(R-J/10);if(g(D)){var K=Math.floor(X/a)+l,Q=Math.floor(h(R,a));try{N=u.getComponentMethod("calendars","getCal")(D).fromJD(K).formatDate("yyyy-mm-dd")}catch{N=p("G%Y-%m-%d")(new Date(X))}if(N.charAt(0)==="-")for(;N.length<11;)N="-0"+N.substr(1);else for(;N.length<10;)N="0"+N;W=j<y?Math.floor(Q/n):0,F=j<y?Math.floor(Q%n/r):0,V=j<m?Math.floor(Q%r/i):0,U=j<_?Q%i*10+J:0}else te=new Date(X),N=p("%Y-%m-%d")(te),W=j<y?te.getUTCHours():0,F=j<y?te.getUTCMinutes():0,V=j<m?te.getUTCSeconds():0,U=j<_?10*te.getUTCMilliseconds()+J:0;return f(N,W,F,V,U)},z.ms2DateTimeLocal=function(R){if(!(R>=M+a&&R<=k-a))return t;var j=Math.floor(10*h(R+.05,1)),D=new Date(Math.round(R-j/10));return f(o("%Y-%m-%d")(D),D.getHours(),D.getMinutes(),D.getSeconds(),10*D.getUTCMilliseconds()+j)},z.cleanDate=function(R,j,D){if(R===t)return j;if(z.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(g(D))return b.error("JS Dates and milliseconds are incompatible with world calendars",R),j;if(!(R=z.ms2DateTimeLocal(+R))&&j!==void 0)return j}else if(!z.isDateTime(R,D))return b.error("unrecognized date",R),j;return R};var S=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function O(R,j,D,N){R=R.replace(S,function(F){var V=Math.min(+F.charAt(1)||6,6);return(j/1e3%1+2).toFixed(V).substr(2).replace(/0+$/,"")||"0"});var W=new Date(Math.floor(j+.05));if(R=R.replace(w,function(){return E[D("%q")(W)]}),g(N))try{R=u.getComponentMethod("calendars","worldCalFmt")(R,j,N)}catch{return"Invalid"}return D(R)(W)}var C=[59,59.9,59.99,59.999,59.9999];z.formatDate=function(R,j,D,N,W,F){if(W=g(W)&&W,!j)if(D==="y")j=F.year;else if(D==="m")j=F.month;else{if(D!=="d")return function(V,U){var te=h(V+.05,a),J=v(Math.floor(te/n),2)+":"+v(h(Math.floor(te/r),60),2);if(U!=="M"){T(U)||(U=0);var X=(100+Math.min(h(V/i,60),C[U])).toFixed(U).substr(1);U>0&&(X=X.replace(/0+$/,"").replace(/[\.]$/,"")),J+=":"+X}return J}(R,D)+`
`+O(F.dayMonthYear,R,N,W);j=F.dayMonth+`
`+F.year}return O(j,R,N,W)};var P=3*a;z.incrementMonth=function(R,j,D){D=g(D)&&D;var N=h(R,a);if(R=Math.round(R-N),D)try{var W=Math.round(R/a)+l,F=u.getComponentMethod("calendars","getCal")(D),V=F.fromJD(W);return j%12?F.add(V,j,"m"):F.add(V,j/12,"y"),(V.toJD()-l)*a+N}catch{b.error("invalid ms "+R+" in calendar "+D)}var U=new Date(R+P);return U.setUTCMonth(U.getUTCMonth()+j)+N-P},z.findExactDates=function(R,j){for(var D,N,W=0,F=0,V=0,U=0,te=g(j)&&u.getComponentMethod("calendars","getCal")(j),J=0;J<R.length;J++)if(N=R[J],T(N)){if(!(N%a))if(te)try{(D=te.fromJD(N/a+l)).day()===1?D.month()===1?W++:F++:V++}catch{}else(D=new Date(N)).getUTCDate()===1?D.getUTCMonth()===0?W++:F++:V++}else U++;V+=F+=W;var X=R.length-U;return{exactYears:W/X,exactMonths:F/X,exactDays:V/X}}},52200:function(ee,z,e){var M=e(33428),k=e(24248),o=e(52248),T=e(36524);function b(n){var r=n&&n.parentNode;r&&r.removeChild(n)}function h(n,r,i){var l="plotly.js-style-"+n,u=document.getElementById(l);u||((u=document.createElement("style")).setAttribute("id",l),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var p=u.sheet;p.insertRule?p.insertRule(r+"{"+i+"}",0):p.addRule?p.addRule(r,i,0):k.warn("addStyleRule failed")}function s(n){var r=window.getComputedStyle(n,null),i=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");return i==="none"?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(n){for(var r=[];a(n);)r.push(n),n=n.parentNode;return r}function a(n){return n&&(n instanceof Element||n instanceof HTMLElement)}ee.exports={getGraphDiv:function(n){var r;if(typeof n=="string"){if((r=document.getElementById(n))===null)throw new Error("No DOM element with id '"+n+"' exists on the page.");return r}if(n==null)throw new Error("DOM element provided is null or undefined");return n},isPlotDiv:function(n){var r=M.select(n);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(n,r){h("global",n,r)},addRelatedStyleRule:h,deleteRelatedStyleRule:function(n){var r="plotly.js-style-"+n,i=document.getElementById(r);i&&b(i)},getFullTransformMatrix:function(n){var r=t(n),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return r.forEach(function(l){var u=s(l);if(u){var p=o.convertCssMatrix(u);i=T.multiply(i,i,p)}}),i},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(n,r){return n&&r&&n.top===r.top&&n.left===r.left&&n.right===r.right&&n.bottom===r.bottom}}},95924:function(ee,z,e){var M=e(61252).EventEmitter,k={init:function(o){if(o._ev instanceof M)return o;var T=new M,b=new M;return o._ev=T,o._internalEv=b,o.on=T.on.bind(T),o.once=T.once.bind(T),o.removeListener=T.removeListener.bind(T),o.removeAllListeners=T.removeAllListeners.bind(T),o._internalOn=b.on.bind(b),o._internalOnce=b.once.bind(b),o._removeInternalListener=b.removeListener.bind(b),o._removeAllInternalListeners=b.removeAllListeners.bind(b),o.emit=function(h,s){typeof jQuery<"u"&&jQuery(o).trigger(h,s),T.emit(h,s),b.emit(h,s)},o},triggerHandler:function(o,T,b){var h,s;typeof jQuery<"u"&&(h=jQuery(o).triggerHandler(T,b));var t=o._ev;if(!t)return h;var a,n=t._events[T];if(!n)return h;function r(i){return i.listener?(t.removeListener(T,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(t,[b]))):i.apply(t,[b])}for(n=Array.isArray(n)?n:[n],a=0;a<n.length-1;a++)r(n[a]);return s=r(n[a]),h!==void 0?h:s},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}};ee.exports=k},92880:function(ee,z,e){var M=e(63620),k=Array.isArray;function o(T,b,h,s){var t,a,n,r,i,l,u,p=T[0],c=T.length;if(c===2&&k(p)&&k(T[1])&&p.length===0){if(u=function(d,g){var v,y;for(v=0;v<d.length;v++){if((y=d[v])!==null&&typeof y=="object")return!1;y!==void 0&&(g[v]=y)}return!0}(T[1],p),u)return p;p.splice(0,p.length)}for(var x=1;x<c;x++)for(a in t=T[x])n=p[a],r=t[a],s&&k(r)?p[a]=r:b&&r&&(M(r)||(i=k(r)))?(i?(i=!1,l=n&&k(n)?n:[]):l=n&&M(n)?n:{},p[a]=o([l,r],b,h,s)):(r!==void 0||h)&&(p[a]=r);return p}z.extendFlat=function(){return o(arguments,!1,!1,!1)},z.extendDeep=function(){return o(arguments,!0,!1,!1)},z.extendDeepAll=function(){return o(arguments,!0,!0,!1)},z.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(ee){ee.exports=function(z){for(var e={},M=[],k=0,o=0;o<z.length;o++){var T=z[o];e[T]!==1&&(e[T]=1,M[k++]=T)}return M}},43880:function(ee){function z(M){return M.visible===!0}function e(M){var k=M[0].trace;return k.visible===!0&&k._length!==0}ee.exports=function(M){for(var k,o=(k=M,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:z),T=[],b=0;b<M.length;b++){var h=M[b];o(h)&&T.push(h)}return T}},27144:function(ee,z,e){var M=e(33428),k=e(36116),o=e(40440),T=e(77844),b=e(42428),h=e(35536),s=e(24248),t=e(63620),a=e(22296),n=e(92065),r=Object.keys(k),i={"ISO-3":h,"USA-states":h,"country names":function(u){for(var p=0;p<r.length;p++){var c=r[p];if(new RegExp(k[c]).test(u.trim().toLowerCase()))return c}return s.log("Unrecognized country name: "+u+"."),!1}};function l(u){var p=u.geojson,c=window.PlotlyGeoAssets||{},x=typeof p=="string"?c[p]:p;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+p),!1)}ee.exports={locationToFeature:function(u,p,c){if(!p||typeof p!="string")return!1;var x,d,g,v=i[u](p);if(v){if(u==="USA-states")for(x=[],g=0;g<c.length;g++)(d=c[g]).properties&&d.properties.gu&&d.properties.gu==="USA"&&x.push(d);else x=c;for(g=0;g<x.length;g++)if((d=x[g]).id===v)return d;s.log(["Location with id",v,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var p,c,x,d,g=u.geometry,v=g.coordinates,y=u.id,m=[];function _(f){for(var S=0;S<f.length-1;S++)if(f[S][0]>0&&f[S+1][0]<0)return S;return null}switch(p=y==="RUS"||y==="FJI"?function(f){var S;if(_(f)===null)S=f;else for(S=new Array(f.length),d=0;d<f.length;d++)S[d]=[f[d][0]<0?f[d][0]+360:f[d][0],f[d][1]];m.push(n.tester(S))}:y==="ATA"?function(f){var S=_(f);if(S===null)return m.push(n.tester(f));var w=new Array(f.length+1),E=0;for(d=0;d<f.length;d++)d>S?w[E++]=[f[d][0]+360,f[d][1]]:d===S?(w[E++]=f[d],w[E++]=[f[d][0],-90]):w[E++]=f[d];var O=n.tester(w);O.pts.pop(),m.push(O)}:function(f){m.push(n.tester(f))},g.type){case"MultiPolygon":for(c=0;c<v.length;c++)for(x=0;x<v[c].length;x++)p(v[c][x]);break;case"Polygon":for(c=0;c<v.length;c++)p(v[c])}return m},getTraceGeojson:l,extractTraceFeature:function(u){var p=u[0].trace,c=l(p);if(!c)return!1;var x,d={},g=[];for(x=0;x<p._length;x++){var v=u[x];(v.loc||v.loc===0)&&(d[v.loc]=v)}function y(f){var S=a(f,p.featureidkey||"id").get(),w=d[S];if(w){var E=f.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var O={type:"Feature",id:S,geometry:E,properties:{}};O.properties.ct=function(C){var P,R=C.geometry;if(R.type==="MultiPolygon")for(var j=R.coordinates,D=0,N=0;N<j.length;N++){var W={type:"Polygon",coordinates:j[N]},F=o.default(W);F>D&&(D=F,P=W)}else P=R;return T.default(P).geometry.coordinates}(O),w.fIn=f,w.fOut=O,g.push(O)}else s.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete d[S]}switch(c.type){case"FeatureCollection":var m=c.features;for(x=0;x<m.length;x++)y(m[x]);break;case"Feature":y(c);break;default:return s.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in d)s.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(u){var p=window.PlotlyGeoAssets||{},c=[];function x(y){return new Promise(function(m,_){M.json(y,function(f,S){if(f){delete p[y];var w=f.status===404?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y;return _(new Error(w))}return p[y]=S,m(S)})})}function d(y){return new Promise(function(m,_){var f=0,S=setInterval(function(){return p[y]&&p[y]!=="pending"?(clearInterval(S),m(p[y])):f>100?(clearInterval(S),_("Unexpected error while fetching from "+y)):void f++},50)})}for(var g=0;g<u.length;g++){var v=u[g][0].trace.geojson;typeof v=="string"&&(p[v]?p[v]==="pending"&&c.push(d(v)):(p[v]="pending",c.push(x(v))))}return c},computeBbox:function(u){return b.default(u)}}},44808:function(ee,z,e){var M=e(39032).BADNUM;z.calcTraceToLineCoords=function(k){for(var o=k[0].trace.connectgaps,T=[],b=[],h=0;h<k.length;h++){var s=k[h].lonlat;s[0]!==M?b.push(s):!o&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},z.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},z.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var o=new Array(k.length),T=0;T<k.length;T++)o[T]=[k[T]];return{type:"MultiPolygon",coordinates:o}},z.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(ee,z,e){var M,k,o,T=e(20435).mod;function b(s,t,a,n,r,i,l,u){var p=a-s,c=r-s,x=l-r,d=n-t,g=i-t,v=u-i,y=p*v-x*d;if(y===0)return null;var m=(c*v-x*g)/y,_=(c*d-p*g)/y;return _<0||_>1||m<0||m>1?null:{x:s+p*m,y:t+d*m}}function h(s,t,a,n,r){var i=n*s+r*t;if(i<0)return n*n+r*r;if(i>a){var l=n-s,u=r-t;return l*l+u*u}var p=n*t-r*s;return p*p/a}z.segmentsIntersect=b,z.segmentDistance=function(s,t,a,n,r,i,l,u){if(b(s,t,a,n,r,i,l,u))return 0;var p=a-s,c=n-t,x=l-r,d=u-i,g=p*p+c*c,v=x*x+d*d,y=Math.min(h(p,c,g,r-s,i-t),h(p,c,g,l-s,u-t),h(x,d,v,s-r,t-i),h(x,d,v,a-r,n-i));return Math.sqrt(y)},z.getTextLocation=function(s,t,a,n){if(s===k&&n===o||(M={},k=s,o=n),M[a])return M[a];var r=s.getPointAtLength(T(a-n/2,t)),i=s.getPointAtLength(T(a+n/2,t)),l=Math.atan((i.y-r.y)/(i.x-r.x)),u=s.getPointAtLength(T(a,t)),p={x:(4*u.x+r.x+i.x)/6,y:(4*u.y+r.y+i.y)/6,theta:l};return M[a]=p,p},z.clearLocationCache=function(){k=null},z.getVisibleSegment=function(s,t,a){var n,r,i=t.left,l=t.right,u=t.top,p=t.bottom,c=0,x=s.getTotalLength(),d=x;function g(y){var m=s.getPointAtLength(y);y===0?n=m:y===x&&(r=m);var _=m.x<i?i-m.x:m.x>l?m.x-l:0,f=m.y<u?u-m.y:m.y>p?m.y-p:0;return Math.sqrt(_*_+f*f)}for(var v=g(c);v;){if((c+=v+a)>d)return;v=g(c)}for(v=g(d);v;){if(c>(d-=v+a))return;v=g(d)}return{min:c,max:d,len:d-c,total:x,isClosed:c===0&&d===x&&Math.abs(n.x-r.x)<.1&&Math.abs(n.y-r.y)<.1}},z.findPointOnPath=function(s,t,a,n){for(var r,i,l,u=(n=n||{}).pathLength||s.getTotalLength(),p=n.tolerance||.001,c=n.iterationLimit||30,x=s.getPointAtLength(0)[a]>s.getPointAtLength(u)[a]?-1:1,d=0,g=0,v=u;d<c;){if(r=(g+v)/2,l=(i=s.getPointAtLength(r))[a]-t,Math.abs(l)<p)return i;x*l>0?v=r:g=r,d++}return i}},33040:function(ee,z,e){var M=e(38248),k=e(49760),o=e(72160),T=e(8932),b=e(22548).defaultLine,h=e(38116).isArrayOrTypedArray,s=o(b);function t(r,i){var l=r;return l[3]*=i,l}function a(r){if(M(r))return s;var i=o(r);return i.length?i:s}function n(r){return M(r)?r:1}ee.exports={formatColor:function(r,i,l){var u=r.color;u&&u._inputArray&&(u=u._inputArray);var p,c,x,d,g,v=h(u),y=h(i),m=T.extractOpts(r),_=[];if(p=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(r):a,c=v?function(S,w){return S[w]===void 0?s:o(p(S[w]))}:a,x=y?function(S,w){return S[w]===void 0?1:n(S[w])}:n,v||y)for(var f=0;f<l;f++)d=c(u,f),g=x(i,f),_[f]=t(d,g);else _=t(o(u),i);return _},parseColorScale:function(r){var i=T.extractOpts(r),l=i.colorscale;return i.reversescale&&(l=T.flipScale(i.colorscale)),l.map(function(u){var p=u[0],c=k(u[1]).toRgb();return{index:p,rgb:[c.r,c.g,c.b,c.a]}})}}},71688:function(ee,z,e){var M=e(35536);function k(o){return[o]}ee.exports={keyFun:function(o){return o.key},repeat:k,descend:M,wrap:k,unwrap:function(o){return o[0]}}},35536:function(ee){ee.exports=function(z){return z}},1396:function(ee){ee.exports=function(z,e){if(!e)return z;var M=1/Math.abs(e),k=M>1?(M*z+M*e)/M:z+e,o=String(k).length;if(o>16){var T=String(e).length;if(o>=String(z).length+T){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},3400:function(ee,z,e){var M=e(33428),k=e(94336).E9,o=e(57624).E9,T=e(38248),b=e(39032),h=b.FP_SAFE,s=-h,t=b.BADNUM,a=ee.exports={};a.adjustFormat=function(Q){return!Q||/^\d[.]\df/.test(Q)||/[.]\d%/.test(Q)?Q:Q==="0.f"?"~f":/^\d%/.test(Q)?"~%":/^\ds/.test(Q)?"~s":!/^[~,.0$]/.test(Q)&&/[&fps]/.test(Q)?"~"+Q:Q};var n={};a.warnBadFormat=function(Q){var Z=String(Q);n[Z]||(n[Z]=1,a.warn('encountered bad format: "'+Z+'"'))},a.noFormat=function(Q){return String(Q)},a.numberFormat=function(Q){var Z;try{Z=o(a.adjustFormat(Q))}catch{return a.warnBadFormat(Q),a.noFormat}return Z},a.nestedProperty=e(22296),a.keyedContainer=e(37804),a.relativeAttr=e(23193),a.isPlainObject=e(63620),a.toLogRange=e(36896),a.relinkPrivateKeys=e(51528);var r=e(38116);a.isArrayBuffer=r.isArrayBuffer,a.isTypedArray=r.isTypedArray,a.isArrayOrTypedArray=r.isArrayOrTypedArray,a.isArray1D=r.isArray1D,a.ensureArray=r.ensureArray,a.concat=r.concat,a.maxRowLength=r.maxRowLength,a.minRowLength=r.minRowLength;var i=e(20435);a.mod=i.mod,a.modHalf=i.modHalf;var l=e(63064);a.valObjectMeta=l.valObjectMeta,a.coerce=l.coerce,a.coerce2=l.coerce2,a.coerceFont=l.coerceFont,a.coercePattern=l.coercePattern,a.coerceHoverinfo=l.coerceHoverinfo,a.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,a.validate=l.validate;var u=e(67555);a.dateTime2ms=u.dateTime2ms,a.isDateTime=u.isDateTime,a.ms2DateTime=u.ms2DateTime,a.ms2DateTimeLocal=u.ms2DateTimeLocal,a.cleanDate=u.cleanDate,a.isJSDate=u.isJSDate,a.formatDate=u.formatDate,a.incrementMonth=u.incrementMonth,a.dateTick0=u.dateTick0,a.dfltRange=u.dfltRange,a.findExactDates=u.findExactDates,a.MIN_MS=u.MIN_MS,a.MAX_MS=u.MAX_MS;var p=e(14952);a.findBin=p.findBin,a.sorterAsc=p.sorterAsc,a.sorterDes=p.sorterDes,a.distinctVals=p.distinctVals,a.roundUp=p.roundUp,a.sort=p.sort,a.findIndexOfMin=p.findIndexOfMin,a.sortObjectKeys=e(95376);var c=e(63084);a.aggNums=c.aggNums,a.len=c.len,a.mean=c.mean,a.median=c.median,a.midRange=c.midRange,a.variance=c.variance,a.stdev=c.stdev,a.interp=c.interp;var x=e(52248);a.init2dArray=x.init2dArray,a.transposeRagged=x.transposeRagged,a.dot=x.dot,a.translationMatrix=x.translationMatrix,a.rotationMatrix=x.rotationMatrix,a.rotationXYMatrix=x.rotationXYMatrix,a.apply3DTransform=x.apply3DTransform,a.apply2DTransform=x.apply2DTransform,a.apply2DTransform2=x.apply2DTransform2,a.convertCssMatrix=x.convertCssMatrix,a.inverseTransformMatrix=x.inverseTransformMatrix;var d=e(11864);a.deg2rad=d.deg2rad,a.rad2deg=d.rad2deg,a.angleDelta=d.angleDelta,a.angleDist=d.angleDist,a.isFullCircle=d.isFullCircle,a.isAngleInsideSector=d.isAngleInsideSector,a.isPtInsideSector=d.isPtInsideSector,a.pathArc=d.pathArc,a.pathSector=d.pathSector,a.pathAnnulus=d.pathAnnulus;var g=e(98308);a.isLeftAnchor=g.isLeftAnchor,a.isCenterAnchor=g.isCenterAnchor,a.isRightAnchor=g.isRightAnchor,a.isTopAnchor=g.isTopAnchor,a.isMiddleAnchor=g.isMiddleAnchor,a.isBottomAnchor=g.isBottomAnchor;var v=e(92348);a.segmentsIntersect=v.segmentsIntersect,a.segmentDistance=v.segmentDistance,a.getTextLocation=v.getTextLocation,a.clearLocationCache=v.clearLocationCache,a.getVisibleSegment=v.getVisibleSegment,a.findPointOnPath=v.findPointOnPath;var y=e(92880);a.extendFlat=y.extendFlat,a.extendDeep=y.extendDeep,a.extendDeepAll=y.extendDeepAll,a.extendDeepNoArrays=y.extendDeepNoArrays;var m=e(24248);a.log=m.log,a.warn=m.warn,a.error=m.error;var _=e(53756);a.counterRegex=_.counter;var f=e(91200);a.throttle=f.throttle,a.throttleDone=f.done,a.clearThrottle=f.clear;var S=e(52200);function w(Q){var Z={};for(var re in Q)for(var oe=Q[re],ae=0;ae<oe.length;ae++)Z[oe[ae]]=+re;return Z}a.getGraphDiv=S.getGraphDiv,a.isPlotDiv=S.isPlotDiv,a.removeElement=S.removeElement,a.addStyleRule=S.addStyleRule,a.addRelatedStyleRule=S.addRelatedStyleRule,a.deleteRelatedStyleRule=S.deleteRelatedStyleRule,a.getFullTransformMatrix=S.getFullTransformMatrix,a.getElementTransformMatrix=S.getElementTransformMatrix,a.getElementAndAncestors=S.getElementAndAncestors,a.equalDomRects=S.equalDomRects,a.clearResponsive=e(75352),a.preserveDrawingBuffer=e(34296),a.makeTraceGroups=e(30988),a._=e(98356),a.notifier=e(41792),a.filterUnique=e(68944),a.filterVisible=e(43880),a.pushUnique=e(52416),a.increment=e(1396),a.cleanNumber=e(54037),a.ensureNumber=function(Q){return T(Q)?(Q=Number(Q))>h||Q<s?t:Q:t},a.isIndex=function(Q,Z){return!(Z!==void 0&&Q>=Z)&&T(Q)&&Q>=0&&Q%1==0},a.noop=e(16628),a.identity=e(35536),a.repeat=function(Q,Z){for(var re=new Array(Z),oe=0;oe<Z;oe++)re[oe]=Q;return re},a.swapAttrs=function(Q,Z,re,oe){re||(re="x"),oe||(oe="y");for(var ae=0;ae<Z.length;ae++){var ce=Z[ae],he=a.nestedProperty(Q,ce.replace("?",re)),pe=a.nestedProperty(Q,ce.replace("?",oe)),xe=he.get();he.set(pe.get()),pe.set(xe)}},a.raiseToTop=function(Q){Q.parentNode.appendChild(Q)},a.cancelTransition=function(Q){return Q.transition().duration(0)},a.constrain=function(Q,Z,re){return Z>re?Math.max(re,Math.min(Z,Q)):Math.max(Z,Math.min(re,Q))},a.bBoxIntersect=function(Q,Z,re){return re=re||0,Q.left<=Z.right+re&&Z.left<=Q.right+re&&Q.top<=Z.bottom+re&&Z.top<=Q.bottom+re},a.simpleMap=function(Q,Z,re,oe,ae){for(var ce=Q.length,he=new Array(ce),pe=0;pe<ce;pe++)he[pe]=Z(Q[pe],re,oe,ae);return he},a.randstr=function Q(Z,re,oe,ae){if(oe||(oe=16),re===void 0&&(re=24),re<=0)return"0";var ce,he,pe=Math.log(Math.pow(2,re))/Math.log(oe),xe="";for(ce=2;pe===1/0;ce*=2)pe=Math.log(Math.pow(2,re/ce))/Math.log(oe)*ce;var be=pe-Math.floor(pe);for(ce=0;ce<Math.floor(pe);ce++)xe=Math.floor(Math.random()*oe).toString(oe)+xe;be&&(he=Math.pow(oe,be),xe=Math.floor(Math.random()*he).toString(oe)+xe);var ve=parseInt(xe,oe);return Z&&Z[xe]||ve!==1/0&&ve>=Math.pow(2,re)?ae>10?(a.warn("randstr failed uniqueness"),xe):Q(Z,re,oe,(ae||0)+1):xe},a.OptionControl=function(Q,Z){Q||(Q={}),Z||(Z="opt");var re={optionList:[],_newoption:function(oe){oe[Z]=Q,re[oe.name]=oe,re.optionList.push(oe)}};return re["_"+Z]=Q,re},a.smooth=function(Q,Z){if((Z=Math.round(Z)||0)<2)return Q;var re,oe,ae,ce,he=Q.length,pe=2*he,xe=2*Z-1,be=new Array(xe),ve=new Array(he);for(re=0;re<xe;re++)be[re]=(1-Math.cos(Math.PI*(re+1)/Z))/(2*Z);for(re=0;re<he;re++){for(ce=0,oe=0;oe<xe;oe++)(ae=re+oe+1-Z)<-he?ae-=pe*Math.round(ae/pe):ae>=pe&&(ae-=pe*Math.floor(ae/pe)),ae<0?ae=-1-ae:ae>=he&&(ae=pe-1-ae),ce+=Q[ae]*be[oe];ve[re]=ce}return ve},a.syncOrAsync=function(Q,Z,re){var oe;function ae(){return a.syncOrAsync(Q,Z,re)}for(;Q.length;)if((oe=(0,Q.splice(0,1)[0])(Z))&&oe.then)return oe.then(ae);return re&&re(Z)},a.stripTrailingSlash=function(Q){return Q.substr(-1)==="/"?Q.substr(0,Q.length-1):Q},a.noneOrAll=function(Q,Z,re){if(Q){var oe,ae=!1,ce=!0;for(oe=0;oe<re.length;oe++)Q[re[oe]]!=null?ae=!0:ce=!1;if(ae&&!ce)for(oe=0;oe<re.length;oe++)Q[re[oe]]=Z[re[oe]]}},a.mergeArray=function(Q,Z,re,oe){var ae=typeof oe=="function";if(a.isArrayOrTypedArray(Q))for(var ce=Math.min(Q.length,Z.length),he=0;he<ce;he++){var pe=Q[he];Z[he][re]=ae?oe(pe):pe}},a.mergeArrayCastPositive=function(Q,Z,re){return a.mergeArray(Q,Z,re,function(oe){var ae=+oe;return isFinite(ae)&&ae>0?ae:0})},a.fillArray=function(Q,Z,re,oe){if(oe=oe||a.identity,a.isArrayOrTypedArray(Q))for(var ae=0;ae<Z.length;ae++)Z[ae][re]=oe(Q[ae])},a.castOption=function(Q,Z,re,oe){oe=oe||a.identity;var ae=a.nestedProperty(Q,re).get();return a.isArrayOrTypedArray(ae)?Array.isArray(Z)&&a.isArrayOrTypedArray(ae[Z[0]])?oe(ae[Z[0]][Z[1]]):oe(ae[Z]):ae},a.extractOption=function(Q,Z,re,oe){if(re in Q)return Q[re];var ae=a.nestedProperty(Z,oe).get();return Array.isArray(ae)?void 0:ae},a.tagSelected=function(Q,Z,re){var oe,ae,ce=Z.selectedpoints,he=Z._indexToPoints;he&&(oe=w(he));for(var pe=0;pe<ce.length;pe++){var xe=ce[pe];if(a.isIndex(xe)||a.isArrayOrTypedArray(xe)&&a.isIndex(xe[0])&&a.isIndex(xe[1])){var be=oe?oe[xe]:xe,ve=re?re[be]:be;(ae=ve)!==void 0&&ae<Q.length&&(Q[ve].selected=1)}}},a.selIndices2selPoints=function(Q){var Z=Q.selectedpoints,re=Q._indexToPoints;if(re){for(var oe=w(re),ae=[],ce=0;ce<Z.length;ce++){var he=Z[ce];if(a.isIndex(he)){var pe=oe[he];a.isIndex(pe)&&ae.push(pe)}}return ae}return Z},a.getTargetArray=function(Q,Z){var re=Z.target;if(typeof re=="string"&&re){var oe=a.nestedProperty(Q,re).get();return!!a.isArrayOrTypedArray(oe)&&oe}return!!a.isArrayOrTypedArray(re)&&re},a.minExtend=function Q(Z,re,oe){var ae={};typeof re!="object"&&(re={});var ce,he,pe,xe=oe==="pieLike"?-1:3,be=Object.keys(Z);for(ce=0;ce<be.length;ce++)pe=Z[he=be[ce]],he.charAt(0)!=="_"&&typeof pe!="function"&&(he==="module"?ae[he]=pe:Array.isArray(pe)?ae[he]=he==="colorscale"||xe===-1?pe.slice():pe.slice(0,xe):a.isTypedArray(pe)?ae[he]=xe===-1?pe.subarray():pe.subarray(0,xe):ae[he]=pe&&typeof pe=="object"?Q(Z[he],re[he],oe):pe);for(be=Object.keys(re),ce=0;ce<be.length;ce++)typeof(pe=re[he=be[ce]])=="object"&&he in ae&&typeof ae[he]=="object"||(ae[he]=pe);return ae},a.titleCase=function(Q){return Q.charAt(0).toUpperCase()+Q.substr(1)},a.containsAny=function(Q,Z){for(var re=0;re<Z.length;re++)if(Q.indexOf(Z[re])!==-1)return!0;return!1},a.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;a.isSafari=function(){return E.test(window.navigator.userAgent)};var O=/iPad|iPhone|iPod/;a.isIOS=function(){return O.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;a.getFirefoxVersion=function(){var Q=C.exec(window.navigator.userAgent);if(Q&&Q.length===2){var Z=parseInt(Q[1]);if(!isNaN(Z))return Z}return null},a.isD3Selection=function(Q){return Q instanceof M.selection},a.ensureSingle=function(Q,Z,re,oe){var ae=Q.select(Z+(re?"."+re:""));if(ae.size())return ae;var ce=Q.append(Z);return re&&ce.classed(re,!0),oe&&ce.call(oe),ce},a.ensureSingleById=function(Q,Z,re,oe){var ae=Q.select(Z+"#"+re);if(ae.size())return ae;var ce=Q.append(Z).attr("id",re);return oe&&ce.call(oe),ce},a.objectFromPath=function(Q,Z){for(var re,oe=Q.split("."),ae=re={},ce=0;ce<oe.length;ce++){var he=oe[ce],pe=null,xe=oe[ce].match(/(.*)\[([0-9]+)\]/);xe?(he=xe[1],pe=xe[2],re=re[he]=[],ce===oe.length-1?re[pe]=Z:re[pe]={},re=re[pe]):(ce===oe.length-1?re[he]=Z:re[he]={},re=re[he])}return ae};var P=/^([^\[\.]+)\.(.+)?/,R=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function j(Q){return Q.slice(0,2)==="__"}a.expandObjectPaths=function(Q){var Z,re,oe,ae,ce,he,pe;if(typeof Q=="object"&&!Array.isArray(Q)){for(re in Q)if(Q.hasOwnProperty(re))if(Z=re.match(P)){if(ae=Q[re],j(oe=Z[1]))continue;delete Q[re],Q[oe]=a.extendDeepNoArrays(Q[oe]||{},a.objectFromPath(re,a.expandObjectPaths(ae))[oe])}else if(Z=re.match(R)){if(ae=Q[re],j(oe=Z[1]))continue;if(ce=parseInt(Z[2]),delete Q[re],Q[oe]=Q[oe]||[],Z[3]===".")pe=Z[4],he=Q[oe][ce]=Q[oe][ce]||{},a.extendDeepNoArrays(he,a.objectFromPath(pe,a.expandObjectPaths(ae)));else{if(j(oe))continue;Q[oe][ce]=a.expandObjectPaths(ae)}}else{if(j(re))continue;Q[re]=a.expandObjectPaths(Q[re])}}return Q},a.numSeparate=function(Q,Z,re){if(re||(re=!1),typeof Z!="string"||Z.length===0)throw new Error("Separator string required for formatting!");typeof Q=="number"&&(Q=String(Q));var oe=/(\d+)(\d{3})/,ae=Z.charAt(0),ce=Z.charAt(1),he=Q.split("."),pe=he[0],xe=he.length>1?ae+he[1]:"";if(ce&&(he.length>1||pe.length>4||re))for(;oe.test(pe);)pe=pe.replace(oe,"$1"+ce+"$2");return pe+xe},a.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;a.templateString=function(Q,Z){var re={};return Q.replace(a.TEMPLATE_STRING_REGEX,function(oe,ae){var ce;return D.test(ae)?ce=Z[ae]:(re[ae]=re[ae]||a.nestedProperty(Z,ae).get,ce=re[ae]()),a.isValidTextValue(ce)?ce:""})};var N={max:10,count:0,name:"hovertemplate"};a.hovertemplateString=function(){return te.apply(N,arguments)};var W={max:10,count:0,name:"texttemplate"};a.texttemplateString=function(){return te.apply(W,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,V={max:10,count:0,name:"texttemplate",parseMultDiv:!0};a.texttemplateStringForShapes=function(){return te.apply(V,arguments)};var U=/^[:|\|]/;function te(Q,Z,re){var oe=this,ae=arguments;Z||(Z={});var ce={};return Q.replace(a.TEMPLATE_STRING_REGEX,function(he,pe,xe){var be=pe==="_xother"||pe==="_yother",ve=pe==="_xother_"||pe==="_yother_",ge=pe==="xother_"||pe==="yother_",we=pe==="xother"||pe==="yother"||be||ge||ve,_e=pe;(be||ve)&&(_e=_e.substring(1)),(ge||ve)&&(_e=_e.substring(0,_e.length-1));var se,ie,fe,Ee=null,Te=null;if(oe.parseMultDiv){var Ae=function(de){var me=de.match(F);return me?{key:me[1],op:me[2],number:Number(me[3])}:{key:de,op:null,number:null}}(_e);_e=Ae.key,Ee=Ae.op,Te=Ae.number}if(we){if((se=Z[_e])===void 0)return""}else for(fe=3;fe<ae.length;fe++)if(ie=ae[fe]){if(ie.hasOwnProperty(_e)){se=ie[_e];break}if(D.test(_e)||(se=a.nestedProperty(ie,_e).get(),(se=ce[_e]||a.nestedProperty(ie,_e).get())&&(ce[_e]=se)),se!==void 0)break}if(se!==void 0&&(Ee==="*"&&(se*=Te),Ee==="/"&&(se/=Te)),se===void 0&&oe)return oe.count<oe.max&&(a.warn("Variable '"+_e+"' in "+oe.name+" could not be found!"),se=he),oe.count===oe.max&&a.warn("Too many "+oe.name+" warnings - additional warnings will be suppressed"),oe.count++,he;if(xe){var Se;if(xe[0]===":"&&(Se=re?re.numberFormat:a.numberFormat,se!==""&&(se=Se(xe.replace(U,""))(se))),xe[0]==="|"){Se=re?re.timeFormat:k;var Oe=a.dateTime2ms(se);se=a.formatDate(Oe,xe.replace(U,""),!1,Se)}}else{var De=_e+"Label";Z.hasOwnProperty(De)&&(se=Z[De])}return we&&(se="("+se+")",(be||ve)&&(se=" "+se),(ge||ve)&&(se+=" ")),se})}a.subplotSort=function(Q,Z){for(var re=Math.min(Q.length,Z.length)+1,oe=0,ae=0,ce=0;ce<re;ce++){var he=Q.charCodeAt(ce)||0,pe=Z.charCodeAt(ce)||0,xe=he>=48&&he<=57,be=pe>=48&&pe<=57;if(xe&&(oe=10*oe+he-48),be&&(ae=10*ae+pe-48),!xe||!be){if(oe!==ae)return oe-ae;if(he!==pe)return he-pe}}return ae-oe};var J=2e9;a.seedPseudoRandom=function(){J=2e9},a.pseudoRandom=function(){var Q=J;return J=(69069*J+1)%4294967296,Math.abs(J-Q)<429496729?a.pseudoRandom():J/4294967296},a.fillText=function(Q,Z,re){var oe=Array.isArray(re)?function(he){re.push(he)}:function(he){re.text=he},ae=a.extractOption(Q,Z,"htx","hovertext");if(a.isValidTextValue(ae))return oe(ae);var ce=a.extractOption(Q,Z,"tx","text");return a.isValidTextValue(ce)?oe(ce):void 0},a.isValidTextValue=function(Q){return Q||Q===0},a.formatPercent=function(Q,Z){Z=Z||0;for(var re=(Math.round(100*Q*Math.pow(10,Z))*Math.pow(.1,Z)).toFixed(Z)+"%",oe=0;oe<Z;oe++)re.indexOf(".")!==-1&&(re=(re=re.replace("0%","%")).replace(".%","%"));return re},a.isHidden=function(Q){var Z=window.getComputedStyle(Q).display;return!Z||Z==="none"},a.strTranslate=function(Q,Z){return Q||Z?"translate("+Q+","+Z+")":""},a.strRotate=function(Q){return Q?"rotate("+Q+")":""},a.strScale=function(Q){return Q!==1?"scale("+Q+")":""},a.getTextTransform=function(Q){var Z=Q.noCenter,re=Q.textX,oe=Q.textY,ae=Q.targetX,ce=Q.targetY,he=Q.anchorX||0,pe=Q.anchorY||0,xe=Q.rotate,be=Q.scale;return be?be>1&&(be=1):be=0,a.strTranslate(ae-be*(re+he),ce-be*(oe+pe))+a.strScale(be)+(xe?"rotate("+xe+(Z?"":" "+re+" "+oe)+")":"")},a.setTransormAndDisplay=function(Q,Z){Q.attr("transform",a.getTextTransform(Z)),Q.style("display",Z.scale?null:"none")},a.ensureUniformFontSize=function(Q,Z){var re=a.extendFlat({},Z);return re.size=Math.max(Z.size,Q._fullLayout.uniformtext.minsize||0),re},a.join2=function(Q,Z,re){var oe=Q.length;return oe>1?Q.slice(0,-1).join(Z)+re+Q[oe-1]:Q.join(Z)},a.bigFont=function(Q){return Math.round(1.2*Q)};var X=a.getFirefoxVersion(),K=X!==null&&X<86;a.getPositionFromD3Event=function(){return K?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},63620:function(ee){ee.exports=function(z){return window&&window.process&&window.process.versions?Object.prototype.toString.call(z)==="[object Object]":Object.prototype.toString.call(z)==="[object Object]"&&Object.getPrototypeOf(z).hasOwnProperty("hasOwnProperty")}},37804:function(ee,z,e){var M=e(22296),k=/^\w*$/;ee.exports=function(o,T,b,h){var s,t,a;b=b||"name",h=h||"value";var n={};T&&T.length?(a=M(o,T),t=a.get()):t=o,T=T||"";var r={};if(t)for(s=0;s<t.length;s++)r[t[s][b]]=s;var i=k.test(h),l={set:function(u,p){var c=p===null?4:0;if(!t){if(!a||c===4)return;t=[],a.set(t)}var x=r[u];if(x===void 0){if(c===4)return;c|=3,x=t.length,r[u]=x}else p!==(i?t[x][h]:M(t[x],h).get())&&(c|=2);var d=t[x]=t[x]||{};return d[b]=u,i?d[h]=p:M(d,h).set(p),p!==null&&(c&=-5),n[x]=n[x]|c,l},get:function(u){if(t){var p=r[u];return p===void 0?void 0:i?t[p][h]:M(t[p],h).get()}},rename:function(u,p){var c=r[u];return c===void 0||(n[c]=1|n[c],r[p]=c,delete r[u],t[c][b]=p),l},remove:function(u){var p=r[u];if(p===void 0)return l;var c=t[p];if(Object.keys(c).length>2)return n[p]=2|n[p],l.set(u,null);if(i){for(s=p;s<t.length;s++)n[s]=3|n[s];for(s=p;s<t.length;s++)r[t[s][b]]--;t.splice(p,1),delete r[u]}else M(c,h).set(null),n[p]=6|n[p];return l},constructUpdate:function(){for(var u,p,c={},x=Object.keys(n),d=0;d<x.length;d++)p=x[d],u=T+"["+p+"]",t[p]?(1&n[p]&&(c[u+"."+b]=t[p][b]),2&n[p]&&(c[u+"."+h]=i?4&n[p]?null:t[p][h]:4&n[p]?null:M(t[p],h).get())):c[u]=null;return c}};return l}},98356:function(ee,z,e){var M=e(24040);ee.exports=function(k,o){for(var T=k._context.locale,b=0;b<2;b++){for(var h=k._context.locales,s=0;s<2;s++){var t=(h[T]||{}).dictionary;if(t){var a=t[o];if(a)return a}h=M.localeRegistry}var n=T.split("-")[0];if(n===T)break;T=n}return o}},24248:function(ee,z,e){var M=e(20556).dfltConfig,k=e(41792),o=ee.exports={};o.log=function(){var T;if(M.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>1){var h=[];for(T=0;T<arguments.length;T++)h.push(arguments[T]);k(h.join("<br>"),"long")}},o.warn=function(){var T;if(M.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>0){var h=[];for(T=0;T<arguments.length;T++)h.push(arguments[T]);k(h.join("<br>"),"stick")}},o.error=function(){var T;if(M.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(M.notifyOnLogging>0){var h=[];for(T=0;T<arguments.length;T++)h.push(arguments[T]);k(h.join("<br>"),"stick")}}},30988:function(ee,z,e){var M=e(33428);ee.exports=function(k,o,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(o,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var h=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][h]=M.select(this)}),b}},52248:function(ee,z,e){var M=e(36524);z.init2dArray=function(k,o){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(o);return T},z.transposeRagged=function(k){var o,T,b=0,h=k.length;for(o=0;o<h;o++)b=Math.max(b,k[o].length);var s=new Array(b);for(o=0;o<b;o++)for(s[o]=new Array(h),T=0;T<h;T++)s[o][T]=k[T][o];return s},z.dot=function(k,o){if(!k.length||!o.length||k.length!==o.length)return null;var T,b,h=k.length;if(k[0].length)for(T=new Array(h),b=0;b<h;b++)T[b]=z.dot(k[b],o);else if(o[0].length){var s=z.transposeRagged(o);for(T=new Array(s.length),b=0;b<s.length;b++)T[b]=z.dot(k,s[b])}else for(T=0,b=0;b<h;b++)T+=k[b]*o[b];return T},z.translationMatrix=function(k,o){return[[1,0,k],[0,1,o],[0,0,1]]},z.rotationMatrix=function(k){var o=k*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},z.rotationXYMatrix=function(k,o,T){return z.dot(z.dot(z.translationMatrix(o,T),z.rotationMatrix(k)),z.translationMatrix(-o,-T))},z.apply3DTransform=function(k){return function(){var o=arguments,T=arguments.length===1?o[0]:[o[0],o[1],o[2]||0];return z.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},z.apply2DTransform=function(k){return function(){var o=arguments;o.length===3&&(o=o[0]);var T=arguments.length===1?o[0]:[o[0],o[1]];return z.dot(k,[T[0],T[1],1]).slice(0,2)}},z.apply2DTransform2=function(k){var o=z.apply2DTransform(k);return function(T){return o(T.slice(0,2)).concat(o(T.slice(2,4)))}},z.convertCssMatrix=function(k){if(k){var o=k.length;if(o===16)return k;if(o===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},z.inverseTransformMatrix=function(k){var o=[];return M.invert(o,k),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(ee){ee.exports={mod:function(z,e){var M=z%e;return M<0?M+e:M},modHalf:function(z,e){return Math.abs(z)>e/2?z-Math.round(z/e)*e:z}}},22296:function(ee,z,e){var M=e(38248),k=e(38116).isArrayOrTypedArray;function o(n,r){return function(){var i,l,u,p,c,x=n;for(p=0;p<r.length-1;p++){if((i=r[p])===-1){for(l=!0,u=[],c=0;c<x.length;c++)u[c]=o(x[c],r.slice(p+1))(),u[c]!==u[0]&&(l=!1);return l?u[0]:u}if(typeof i=="number"&&!k(x)||typeof(x=x[i])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[r[p]])!==null)return u}}ee.exports=function(n,r){if(M(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var i,l,u,p,c=r.split(".");for(p=0;p<c.length;p++)if(String(c[p]).slice(0,2)==="__")throw"bad property string";for(p=0;p<c.length;){if(i=String(c[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])c[p]=i[1];else{if(p!==0)throw"bad property string";c.splice(0,1)}for(l=i[2].substr(1,i[2].length-2).split("]["),u=0;u<l.length;u++)p++,c.splice(p,0,Number(l[u]))}p++}return typeof n!="object"?function(x,d,g){return{set:function(){throw"bad container"},get:function(){},astr:d,parts:g,obj:x}}(n,r,c):{set:h(n,c,r),get:o(n,c),astr:r,parts:c,obj:n}};var T=/(^|\.)args\[/;function b(n,r){return n===void 0||n===null&&!r.match(T)}function h(n,r,i){return function(l){var u,p,c=n,x="",d=b(l,i);for(p=0;p<r.length-1;p++){if(typeof(u=r[p])=="number"&&!k(c))throw"array index but container is not an array";if(u===-1){if(d=!t(c,r.slice(p+1),l,i))break;return}if(!a(c,u,r[p+1],d))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";x=s(x,u)}if(d){if(p===r.length-1&&(delete c[r[p]],Array.isArray(c)&&+r[p]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[r[p]]=l}}function s(n,r){var i=r;return M(r)?i="["+r+"]":n&&(i="."+r),n+i}function t(n,r,i,l){var u,p=k(i),c=!0,x=i,d=l.replace("-1",0),g=!p&&b(i,d),v=r[0];for(u=0;u<n.length;u++)d=l.replace("-1",u),p&&(g=b(x=i[u%i.length],d)),g&&(c=!1),a(n,u,v,g)&&h(n[u],r,l.replace("-1",u))(x);return c}function a(n,r,i,l){if(n[r]===void 0){if(l)return!1;n[r]=typeof i=="number"?[]:{}}return!0}},16628:function(ee){ee.exports=function(){}},41792:function(ee,z,e){var M=e(33428),k=e(38248),o=[];ee.exports=function(T,b){if(o.indexOf(T)===-1){o.push(T);var h=1e3;k(b)?h=b:b==="long"&&(h=3e3);var s=M.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var n=M.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(t)});for(var r=n.append("p"),i=a.split(/<br\s*\/?>/g),l=0;l<i.length;l++)l&&r.append("br"),r.append("span").text(i[l]);b==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(h).call(t)})}function t(a){a.duration(700).style("opacity",0).each("end",function(n){var r=o.indexOf(n);r!==-1&&o.splice(r,1),M.select(this).remove()})}}},72213:function(ee,z,e){var M=e(93972),k="data-savedcursor";ee.exports=function(o,T){var b=o.attr(k);if(T){if(!b){for(var h=(o.attr("class")||"").split(" "),s=0;s<h.length;s++){var t=h[s];t.indexOf("cursor-")===0&&o.attr(k,t.substr(7)).classed(t,!1)}o.attr(k)||o.attr(k,"!!")}M(o,T)}else b&&(o.attr(k,null),b==="!!"?M(o):M(o,b))}},92065:function(ee,z,e){var M=e(52248).dot,k=e(39032).BADNUM,o=ee.exports={};o.tester=function(T){var b,h=T.slice(),s=h[0][0],t=s,a=h[0][1],n=a;for(h[h.length-1][0]===h[0][0]&&h[h.length-1][1]===h[0][1]||h.push(h[0]),b=1;b<h.length;b++)s=Math.min(s,h[b][0]),t=Math.max(t,h[b][0]),a=Math.min(a,h[b][1]),n=Math.max(n,h[b][1]);var r,i=!1;h.length===5&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(i=!0,r=function(p){return p[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(i=!0,r=function(p){return p[1]===h[0][1]}));var l=!0,u=h[0];for(b=1;b<h.length;b++)if(u[0]!==h[b][0]||u[1]!==h[b][1]){l=!1;break}return{xmin:s,xmax:t,ymin:a,ymax:n,pts:h,contains:i?function(p,c){var x=p[0],d=p[1];return!(x===k||x<s||x>t||d===k||d<a||d>n||c&&r(p))}:function(p,c){var x=p[0],d=p[1];if(x===k||x<s||x>t||d===k||d<a||d>n)return!1;var g,v,y,m,_,f=h.length,S=h[0][0],w=h[0][1],E=0;for(g=1;g<f;g++)if(v=S,y=w,S=h[g][0],w=h[g][1],!(x<(m=Math.min(v,S))||x>Math.max(v,S)||d>Math.max(y,w)))if(d<Math.min(y,w))x!==m&&E++;else{if(d===(_=S===v?d:y+(x-v)*(w-y)/(S-v)))return g!==1||!c;d<=_&&x!==m&&E++}return E%2==1},isRect:i,degenerate:l}},o.isSegmentBent=function(T,b,h,s){var t,a,n,r=T[b],i=[T[h][0]-r[0],T[h][1]-r[1]],l=M(i,i),u=Math.sqrt(l),p=[-i[1]/u,i[0]/u];for(t=b+1;t<h;t++)if(a=[T[t][0]-r[0],T[t][1]-r[1]],(n=M(a,i))<0||n>l||Math.abs(M(a,p))>s)return!0;return!1},o.filter=function(T,b){var h=[T[0]],s=0,t=0;function a(n){T.push(n);var r=h.length,i=s;h.splice(t+1);for(var l=i+1;l<T.length;l++)(l===T.length-1||o.isSegmentBent(T,i,l+1,b))&&(h.push(T[l]),h.length<r-2&&(s=l,t=h.length-1),i=l)}return T.length>1&&a(T.pop()),{addPt:a,raw:T,filtered:h}}},5048:function(ee,z,e){var M=e(16576),k=e(28624);ee.exports=function(o,T,b){var h=o._fullLayout,s=!0;return h._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||h._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:o._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(a){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:a,layer:t.key})},!1)}}),s||M({container:h._glcontainer.node()}),s}},34296:function(ee,z,e){var M=e(38248),k=e(25928);ee.exports=function(o){var T;if(typeof(T=o&&o.hasOwnProperty("userAgent")?o.userAgent:function(){var r;return typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),r}())!="string")return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b){for(var h=T.split(" "),s=1;s<h.length;s++)if(h[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var a=h[t];if(a.substr(0,8)==="Version/"){var n=a.substr(8).split(".")[0];if(M(n)&&(n=+n),n>=13)return!0}}}return b}},52416:function(ee){ee.exports=function(z,e){if(e instanceof RegExp){for(var M=e.toString(),k=0;k<z.length;k++)if(z[k]instanceof RegExp&&z[k].toString()===M)return z;z.push(e)}else!e&&e!==0||z.indexOf(e)!==-1||z.push(e);return z}},94552:function(ee,z,e){var M=e(3400),k=e(20556).dfltConfig,o={add:function(T,b,h,s,t){var a,n;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},n=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(n,T.undoQueue.queue.length-n,a),T.undoQueue.index+=1):a=T.undoQueue.queue[n-1],T.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(b),a.undo.args.unshift(h),a.redo.calls.push(s),a.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,h;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,h=0;h<b.undo.calls.length;h++)o.plotDo(T,b.undo.calls[h],b.undo.args[h]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,h;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,h=0;h<b.redo.calls.length;h++)o.plotDo(T,b.redo.calls[h],b.redo.args[h]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,h){T.autoplay=!0,h=function(s,t){for(var a,n=[],r=0;r<t.length;r++)a=t[r],n[r]=a===s?a:typeof a=="object"?Array.isArray(a)?M.extendDeep([],a):M.extendDeepAll({},a):a;return n}(T,h),b.apply(null,h)}};ee.exports=o},53756:function(ee,z){z.counter=function(e,M,k,o){var T=(M||"")+(k?"":"$"),b=o===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(ee){var z=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;ee.exports=function(M,k){for(;k;){var o=M.match(z);if(o)M=o[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,k]);M=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return M&&k.charAt(0)!=="["?M+"."+k:M+k}},51528:function(ee,z,e){var M=e(38116).isArrayOrTypedArray,k=e(63620);ee.exports=function o(T,b){for(var h in b){var s=b[h],t=T[h];if(t!==s)if(h.charAt(0)==="_"||typeof s=="function"){if(h in T)continue;T[h]=s}else if(M(s)&&M(t)&&k(s[0])){if(h==="customdata"||h==="ids")continue;for(var a=Math.min(s.length,t.length),n=0;n<a;n++)t[n]!==s[n]&&k(s[n])&&k(t[n])&&o(t[n],s[n])}else k(s)&&k(t)&&(o(t,s),Object.keys(t).length||delete T[h])}}},14952:function(ee,z,e){var M=e(38248),k=e(24248),o=e(35536),T=e(39032).BADNUM,b=1e-9;function h(n,r){return n<r}function s(n,r){return n<=r}function t(n,r){return n>r}function a(n,r){return n>=r}z.findBin=function(n,r,i){if(M(r.start))return i?Math.ceil((n-r.start)/r.size-b)-1:Math.floor((n-r.start)/r.size+b);var l,u,p=0,c=r.length,x=0,d=c>1?(r[c-1]-r[0])/(c-1):1;for(u=d>=0?i?h:s:i?a:t,n+=d*b*(i?-1:1)*(d>=0?1:-1);p<c&&x++<100;)u(r[l=Math.floor((p+c)/2)],n)?p=l+1:c=l;return x>90&&k.log("Long binary search..."),p-1},z.sorterAsc=function(n,r){return n-r},z.sorterDes=function(n,r){return r-n},z.distinctVals=function(n){var r,i=n.slice();for(i.sort(z.sorterAsc),r=i.length-1;r>-1&&i[r]===T;r--);for(var l,u=i[r]-i[0]||1,p=u/(r||1)/1e4,c=[],x=0;x<=r;x++){var d=i[x],g=d-l;l===void 0?(c.push(d),l=d):g>p&&(u=Math.min(u,g),c.push(d),l=d)}return{vals:c,minDiff:u}},z.roundUp=function(n,r,i){for(var l,u=0,p=r.length-1,c=0,x=i?0:1,d=i?1:0,g=i?Math.ceil:Math.floor;u<p&&c++<100;)r[l=g((u+p)/2)]<=n?u=l+x:p=l-d;return r[u]},z.sort=function(n,r){for(var i=0,l=0,u=1;u<n.length;u++){var p=r(n[u],n[u-1]);if(p<0?i=1:p>0&&(l=1),i&&l)return n.sort(r)}return l?n:n.reverse()},z.findIndexOfMin=function(n,r){r=r||o;for(var i,l=1/0,u=0;u<n.length;u++){var p=r(n[u]);p<l&&(l=p,i=u)}return i}},93972:function(ee){ee.exports=function(z,e){(z.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&z.classed(M,!1)}),e&&z.classed("cursor-"+e,!0)}},16576:function(ee,z,e){var M=e(76308),k=function(){};ee.exports=function(o){for(var T in o)typeof o[T]=="function"&&(o[T]=k);o.destroy=function(){o.container.parentNode.removeChild(o.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=M.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=M.lightLine,b.style["z-index"]=30;var h=document.createElement("p");return h.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",h.style.position="relative",h.style.top="50%",h.style.left="50%",h.style.height="30%",h.style.width="50%",h.style.margin="-15% 0 0 -25%",b.appendChild(h),o.container.appendChild(b),o.container.style.background="#FFFFFF",o.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(ee){ee.exports=function(z){return Object.keys(z).sort()}},63084:function(ee,z,e){var M=e(38248),k=e(38116).isArrayOrTypedArray;z.aggNums=function(o,T,b,h){var s,t;if((!h||h>b.length)&&(h=b.length),M(T)||(T=!1),k(b[0])){for(t=new Array(h),s=0;s<h;s++)t[s]=z.aggNums(o,T,b[s]);b=t}for(s=0;s<h;s++)M(T)?M(b[s])&&(T=o(+T,+b[s])):T=b[s];return T},z.len=function(o){return z.aggNums(function(T){return T+1},0,o)},z.mean=function(o,T){return T||(T=z.len(o)),z.aggNums(function(b,h){return b+h},0,o)/T},z.midRange=function(o){if(o!==void 0&&o.length!==0)return(z.aggNums(Math.max,null,o)+z.aggNums(Math.min,null,o))/2},z.variance=function(o,T,b){return T||(T=z.len(o)),M(b)||(b=z.mean(o,T)),z.aggNums(function(h,s){return h+Math.pow(s-b,2)},0,o)/T},z.stdev=function(o,T,b){return Math.sqrt(z.variance(o,T,b))},z.median=function(o){var T=o.slice().sort();return z.interp(T,.5)},z.interp=function(o,T){if(!M(T))throw"n should be a finite number";if((T=T*o.length-.5)<0)return o[0];if(T>o.length-1)return o[o.length-1];var b=T%1;return b*o[Math.ceil(T)]+(1-b)*o[Math.floor(T)]}},43080:function(ee,z,e){var M=e(72160);ee.exports=function(k){return k?M(k):[0,0,0,1]}},9188:function(ee,z,e){var M=e(2264),k=e(43616),o=e(3400),T=null;ee.exports=function(){if(T!==null)return T;T=!1;var b=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!b){var h=Array.from(M.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")T=h.some(function(n){return s.apply(null,n)});else{var t=k.tester.append("image").attr("style",M.STYLE),a=window.getComputedStyle(t.node()).imageRendering;T=h.some(function(n){var r=n[1];return a===r||a===r.toLowerCase()}),t.remove()}}return T}},72736:function(ee,z,e){var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(84284).LINE_SPACING,h=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;z.convertToTspans=function(R,j,D){var N=R.text(),W=!R.attr("data-notex")&&j&&j._context.typesetMath&&typeof MathJax<"u"&&N.match(h),F=M.select(R.node().parentNode);if(!F.empty()){var V=R.attr("class")?R.attr("class").split(" ")[0]:"text";return V+="-math",F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove(),R.style("display",null).attr({"data-unformatted":N,"data-math":"N"}),W?(j&&j._promises||[]).push(new Promise(function(te){R.style("display","none");var J=parseInt(R.node().style.fontSize,10),X={fontSize:J};(function(K,Q,Z){var re,oe,ae,ce,he=parseInt((MathJax.version||"").split(".")[0]);if(he===2||he===3){var pe=function(){var be="math-output-"+k.randstr({},64),ve=(ce=M.select("body").append("div").attr({id:be}).style({visibility:"hidden",position:"absolute","font-size":Q.fontSize+"px"}).text(K.replace(s,"\\lt ").replace(t,"\\gt "))).node();return he===2?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},xe=function(){var be=ce.select(he===2?".MathJax_SVG":".MathJax"),ve=!be.empty()&&ce.select("svg").node();if(ve){var ge,we=ve.getBoundingClientRect();ge=he===2?M.select("body").select("#MathJax_SVG_glyphs"):be.select("defs"),Z(be,ge,we)}else k.log("There was an error in the tex syntax.",K),Z();ce.remove()};he===2?MathJax.Hub.Queue(function(){return oe=k.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:a},displayAlign:"left"})},function(){if((re=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},pe,xe,function(){if(re!=="SVG")return MathJax.Hub.setRenderer(re)},function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(oe)}):he===3&&(oe=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=a,(re=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){pe(),xe(),re!=="svg"&&(MathJax.config.startup.output=re),MathJax.config=oe}))}else k.warn("No MathJax version:",MathJax.version)})(W[2],X,function(K,Q,Z){F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove();var re=K&&K.select("svg");if(!re||!re.node())return U(),void te();var oe=F.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":N,"data-math":"Y"});oe.node().appendChild(re.node()),Q&&Q.node()&&re.node().insertBefore(Q.node().cloneNode(!0),re.node().firstChild);var ae=Z.width,ce=Z.height;re.attr({class:V,height:ce,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var he=R.node().style.fill||"black",pe=re.select("g");pe.attr({fill:he,stroke:he});var xe=pe.node().getBoundingClientRect(),be=xe.width,ve=xe.height;(be>ae||ve>ce)&&(re.style("overflow","hidden"),be=(xe=re.node().getBoundingClientRect()).width,ve=xe.height);var ge=+R.attr("x"),we=+R.attr("y"),_e=-(J||R.node().getBoundingClientRect().height)/4;if(V[0]==="y")oe.attr({transform:"rotate("+[-90,ge,we]+")"+o(-be/2,_e-ve/2)});else if(V[0]==="l")we=_e-ve/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)ge=0,we=_e;else{var se=R.attr("text-anchor");ge-=be*(se==="middle"?.5:se==="end"?1:0),we=we+_e-ve/2}re.attr({x:ge,y:we}),D&&D.call(R,oe),te(oe)})})):U(),R}function U(){F.empty()||(V=R.attr("class")+"-math",F.select("svg."+V).remove()),R.text("").style("white-space","pre");var te=function(J,X){X=X.replace(p," ");var K,Q=!1,Z=[],re=-1;function oe(){re++;var Te=document.createElementNS(T.svg,"tspan");M.select(Te).attr({class:"line",dy:re*b+"em"}),J.appendChild(Te),K=Te;var Ae=Z;if(Z=[{node:Te}],Ae.length>1)for(var Se=1;Se<Ae.length;Se++)ae(Ae[Se])}function ae(Te){var Ae,Se=Te.type,Oe={};if(Se==="a"){Ae="a";var De=Te.target,de=Te.href,me=Te.popup;de&&(Oe={"xlink:xlink:show":De==="_blank"||De.charAt(0)!=="_"?"new":"replace",target:De,"xlink:xlink:href":de},me&&(Oe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+me+'");return false;'))}else Ae="tspan";Te.style&&(Oe.style=Te.style);var Me=document.createElementNS(T.svg,Ae);if(Se==="sup"||Se==="sub"){ce(K,l),K.appendChild(Me);var ze=document.createElementNS(T.svg,"tspan");ce(ze,l),M.select(ze).attr("dy",i[Se]),Oe.dy=r[Se],K.appendChild(Me),K.appendChild(ze)}else K.appendChild(Me);M.select(Me).attr(Oe),K=Te.node=Me,Z.push(Te)}function ce(Te,Ae){Te.appendChild(document.createTextNode(Ae))}function he(Te){if(Z.length!==1){var Ae=Z.pop();Te!==Ae.type&&k.log("Start tag <"+Ae.type+"> doesnt match end tag <"+Te+">. Pretending it did match.",X),K=Z[Z.length-1].node}else k.log("Ignoring unexpected end tag </"+Te+">.",X)}d.test(X)?oe():(K=J,Z=[{node:J}]);for(var pe=X.split(c),xe=0;xe<pe.length;xe++){var be=pe[xe],ve=be.match(x),ge=ve&&ve[2].toLowerCase(),we=n[ge];if(ge==="br")oe();else if(we===void 0)ce(K,E(be));else if(ve[1])he(ge);else{var _e=ve[4],se={type:ge},ie=_(_e,g);if(ie?(ie=ie.replace(f,"$1 fill:"),we&&(ie+=";"+we)):we&&(ie=we),ie&&(se.style=ie),ge==="a"){Q=!0;var fe=_(_e,v);if(fe){var Ee=O(fe);Ee&&(se.href=Ee,se.target=_(_e,y)||"_blank",se.popup=_(_e,m))}}ae(se)}}return Q}(R.node(),N);te&&R.style("pointer-events","all"),z.positionText(R),D&&D.call(R)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,a=[["$","$"],["\\(","\\)"]],n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},i={sub:"-0.21em",sup:"0.42em"},l="",u=["http:","https:","mailto:","",void 0,":"],p=z.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;z.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,v=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(R,j){if(!R)return null;var D=R.match(j),N=D&&(D[3]||D[4]);return N&&E(N)}var f=/(^|;)\s*color:/;z.plainText=function(R,j){for(var D=(j=j||{}).len!==void 0&&j.len!==-1?j.len:1/0,N=j.allowedTags!==void 0?j.allowedTags:["br"],W=R.split(c),F=[],V="",U=0,te=0;te<W.length;te++){var J=W[te],X=J.match(x),K=X&&X[2].toLowerCase();if(K)N.indexOf(K)!==-1&&(F.push(J),V=K);else{var Q=J.length;if(U+Q<D)F.push(J),U+=Q;else if(U<D){var Z=D-U;V&&(V!=="br"||Z<=3||Q<=3)&&F.pop(),D>3?F.push(J.substr(0,Z-3)+"..."):F.push(J.substr(0,Z));break}V=""}}return F.join("")};var S={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(R){return R.replace(w,function(j,D){return(D.charAt(0)==="#"?function(N){if(!(N>1114111)){var W=String.fromCodePoint;if(W)return W(N);var F=String.fromCharCode;return N<=65535?F(N):F(55232+(N>>10),N%1024+56320)}}(D.charAt(1)==="x"?parseInt(D.substr(2),16):parseInt(D.substr(1),10)):S[D])||j})}function O(R){var j=encodeURI(decodeURI(R)),D=document.createElement("a"),N=document.createElement("a");D.href=R,N.href=j;var W=D.protocol,F=N.protocol;return u.indexOf(W)!==-1&&u.indexOf(F)!==-1?j:""}function C(R,j,D){var N,W,F,V=D.horizontalAlign,U=D.verticalAlign||"top",te=R.node().getBoundingClientRect(),J=j.node().getBoundingClientRect();return W=U==="bottom"?function(){return te.bottom-N.height}:U==="middle"?function(){return te.top+(te.height-N.height)/2}:function(){return te.top},F=V==="right"?function(){return te.right-N.width}:V==="center"?function(){return te.left+(te.width-N.width)/2}:function(){return te.left},function(){N=this.node().getBoundingClientRect();var X=F()-J.left,K=W()-J.top,Q=D.gd||{};if(D.gd){Q._fullLayout._calcInverseTransform(Q);var Z=k.apply3DTransform(Q._fullLayout._invTransform)(X,K);X=Z[0],K=Z[1]}return this.style({top:K+"px",left:X+"px","z-index":1e3}),this}}z.convertEntities=E,z.sanitizeHTML=function(R){R=R.replace(p," ");for(var j=document.createElement("p"),D=j,N=[],W=R.split(c),F=0;F<W.length;F++){var V=W[F],U=V.match(x),te=U&&U[2].toLowerCase();if(te in n)if(U[1])N.length&&(D=N.pop());else{var J=U[4],X=_(J,g),K=X?{style:X}:{};if(te==="a"){var Q=_(J,v);if(Q){var Z=O(Q);if(Z){K.href=Z;var re=_(J,y);re&&(K.target=re)}}}var oe=document.createElement(te);D.appendChild(oe),M.select(oe).attr(K),D=oe,N.push(oe)}else D.appendChild(document.createTextNode(E(V)))}return j.innerHTML},z.lineCount=function(R){return R.selectAll("tspan.line").size()||1},z.positionText=function(R,j,D){return R.each(function(){var N=M.select(this);function W(U,te){return te===void 0?(te=N.attr(U))===null&&(N.attr(U,0),te=0):N.attr(U,te),te}var F=W("x",j),V=W("y",D);this.nodeName==="text"&&N.selectAll("tspan.line").attr({x:F,y:V})})};var P="1px ";z.makeTextShadow=function(R){return P+P+P+R+", -"+P+"-"+P+P+R+", "+P+"-"+P+P+R+", -"+P+P+P+R},z.makeEditable=function(R,j){var D=j.gd,N=j.delegate,W=M.dispatch("edit","input","cancel"),F=N||R;if(R.style({"pointer-events":N?"none":"all"}),R.size()!==1)throw new Error("boo");function V(){var te,J,X,K,Q;te=M.select(D).select(".svg-container"),J=te.append("div"),X=R.node().style,K=parseFloat(X.fontSize||12),(Q=j.text)===void 0&&(Q=R.attr("data-unformatted")),J.classed("plugin-editable editable",!0).style({position:"absolute","font-family":X.fontFamily||"Arial","font-size":K,color:j.fill||X.fill||"black",opacity:1,"background-color":j.background||"transparent",outline:"#ffffff33 1px solid",margin:[-K/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Q).call(C(R,te,j)).on("blur",function(){D._editing=!1,R.text(this.textContent).style({opacity:1});var oe,ae=M.select(this).attr("class");(oe=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(R.node().parentNode).select(oe).style({opacity:0});var ce=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),W.edit.call(R,ce)}).on("focus",function(){var oe=this;D._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===oe)return!1;document.activeElement===J.node()&&J.node().blur()})}).on("keyup",function(){M.event.which===27?(D._editing=!1,R.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),W.cancel.call(R,this.textContent)):(W.input.call(R,this.textContent),M.select(this).call(C(R,te,j)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(U),R.style({opacity:0});var Z,re=F.attr("class");(Z=re?"."+re.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(R.node().parentNode).select(Z).style({opacity:0})}function U(te){var J=te.node(),X=document.createRange();X.selectNodeContents(J);var K=window.getSelection();K.removeAllRanges(),K.addRange(X),J.focus()}return j.immediate?V():F.on("click",V),M.rebind(R,W,"on")}},91200:function(ee,z){var e={};function M(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}z.throttle=function(k,o,T){var b=e[k],h=Date.now();if(!b){for(var s in e)e[s].ts<h-6e4&&delete e[s];b=e[k]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}M(b),h>b.ts+o?t():b.timer=setTimeout(function(){t(),b.timer=null},o)},z.done=function(k){var o=e[k];return o&&o.timer?new Promise(function(T){var b=o.onDone;o.onDone=function(){b&&b(),T(),o.onDone=null}}):Promise.resolve()},z.clear=function(k){if(k)M(e[k]),delete e[k];else for(var o in e)z.clear(o)}},36896:function(ee,z,e){var M=e(38248);ee.exports=function(k,o){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(o[0],o[1]))/Math.LN10;return M(T)||(T=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),T}},59972:function(ee,z,e){var M=ee.exports={},k=e(79552).locationmodeToLayer,o=e(55712).NO;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,b){return T+b+".json"},M.getTopojsonFeatures=function(T,b){var h=k[T.locationmode],s=b.objects[h];return o(b,s).features}},11680:function(ee){ee.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(ee){ee.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(ee,z,e){var M=e(24040);ee.exports=function(k){for(var o,T,b=M.layoutArrayContainers,h=M.layoutArrayRegexes,s=k.split("[")[0],t=0;t<h.length;t++)if((T=k.match(h[t]))&&T.index===0){o=T[0];break}if(o||(o=b[b.indexOf(s)]),!o)return!1;var a=k.substr(o.length);return a?!!(T=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(T[1]),property:T[3]||""}:{array:o,index:"",property:""}}},67824:function(ee,z,e){var M=e(92880).extendFlat,k=e(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=o.flags.slice().concat(["fullReplot"]),h=T.flags.slice().concat("layoutReplot");function s(n){for(var r={},i=0;i<n.length;i++)r[n[i]]=!1;return r}function t(n,r,i){var l=M({},n);for(var u in l){var p=l[u];k(p)&&(l[u]=a(p,r,0,u))}return i==="from-root"&&(l.editType=r),l}function a(n,r,i,l){if(n.valType){var u=M({},n);if(u.editType=r,Array.isArray(n.items)){u.items=new Array(n.items.length);for(var p=0;p<n.items.length;p++)u.items[p]=a(n.items[p],r)}return u}return t(n,r,l.charAt(0)==="_"?"nested":"from-root")}ee.exports={traces:o,layout:T,traceFlags:function(){return s(b)},layoutFlags:function(){return s(h)},update:function(n,r){var i=r.editType;if(i&&i!=="none")for(var l=i.split("+"),u=0;u<l.length;u++)n[l[u]]=!0},overrideAll:t}},93404:function(ee,z,e){var M=e(38248),k=e(61784),o=e(24040),T=e(3400),b=e(7316),h=e(79811),s=e(76308),t=h.cleanId,a=h.getFromTrace,n=o.traceIs;function r(v,y){var m=v[y],_=y.charAt(0);m&&m!=="paper"&&(v[y]=t(m,_,!0))}function i(v){function y(m,_){var f=v[m],S=v.title&&v.title[_];f&&!S&&(v.title||(v.title={}),v.title[_]=v[m],delete v[m])}v&&(typeof v.title!="string"&&typeof v.title!="number"||(v.title={text:v.title}),y("titlefont","font"),y("titleposition","position"),y("titleside","side"),y("titleoffset","offset"))}function l(v){if(!T.isPlainObject(v))return!1;var y=v.name;return delete v.name,delete v.showlegend,(typeof y=="string"||typeof y=="number")&&String(y)}function u(v,y,m,_){if(m&&!_)return v;if(_&&!m||!v.trim())return y;if(!y.trim())return v;var f,S=Math.min(v.length,y.length);for(f=0;f<S&&v.charAt(f)===y.charAt(f);f++);return v.substr(0,f).trim()}function p(v){var y="middle",m="center";return typeof v=="string"&&(v.indexOf("top")!==-1?y="top":v.indexOf("bottom")!==-1&&(y="bottom"),v.indexOf("left")!==-1?m="left":v.indexOf("right")!==-1&&(m="right")),y+" "+m}function c(v,y){return y in v&&typeof v[y]=="object"&&Object.keys(v[y]).length===0}z.clearPromiseQueue=function(v){Array.isArray(v._promises)&&v._promises.length>0&&T.log("Clearing previous rejected promises from queue."),v._promises=[]},z.cleanLayout=function(v){var y,m;v||(v={}),v.xaxis1&&(v.xaxis||(v.xaxis=v.xaxis1),delete v.xaxis1),v.yaxis1&&(v.yaxis||(v.yaxis=v.yaxis1),delete v.yaxis1),v.scene1&&(v.scene||(v.scene=v.scene1),delete v.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,f=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,w=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(v);for(y=0;y<E.length;y++){var O=E[y];if(_&&_.test(O)){var C=v[O];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),C.insiderange&&delete C.range,delete C.islog,delete C.isdate,delete C.categories,c(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),i(C)}else if(f&&f.test(O))i(v[O].radialaxis);else if(S&&S.test(O)){var P=v[O];i(P.aaxis),i(P.baxis),i(P.caxis)}else if(w&&w.test(O)){var R=v[O],j=R.cameraposition;if(Array.isArray(j)&&j[0].length===4){var D=j[0],N=j[1],W=j[2],F=k([],D),V=[];for(m=0;m<3;++m)V[m]=N[m]+W*F[2+4*m];R.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}i(R.xaxis),i(R.yaxis),i(R.zaxis)}}var U=Array.isArray(v.annotations)?v.annotations.length:0;for(y=0;y<U;y++){var te=v.annotations[y];T.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),r(te,"xref"),r(te,"yref"))}var J=Array.isArray(v.shapes)?v.shapes.length:0;for(y=0;y<J;y++){var X=v.shapes[y];T.isPlainObject(X)&&(r(X,"xref"),r(X,"yref"))}var K=Array.isArray(v.images)?v.images.length:0;for(y=0;y<K;y++){var Q=v.images[y];T.isPlainObject(Q)&&(r(Q,"xref"),r(Q,"yref"))}var Z=v.legend;return Z&&(Z.x>3?(Z.x=1.02,Z.xanchor="left"):Z.x<-2&&(Z.x=-.02,Z.xanchor="right"),Z.y>3?(Z.y=1.02,Z.yanchor="bottom"):Z.y<-2&&(Z.y=-.02,Z.yanchor="top")),i(v),v.dragmode==="rotate"&&(v.dragmode="orbit"),s.clean(v),v.template&&v.template.layout&&z.cleanLayout(v.template.layout),v},z.cleanData=function(v){for(var y=0;y<v.length;y++){var m,_=v[y];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var f=s.defaults,S=_.error_y.color||(n(_,"bar")?s.defaultLine:f[y%f.length]);_.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!n(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",z.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&z.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),n(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!n(_,"pie-like")&&!n(_,"bar-like"))if(Array.isArray(_.textposition))for(m=0;m<_.textposition.length;m++)_.textposition[m]=p(_.textposition[m]);else _.textposition&&(_.textposition=p(_.textposition));var w=o.getModule(_);if(w&&w.colorbar){var E=w.colorbar.container,O=E?_[E]:_;O&&O.colorscale&&(O.colorscale==="YIGnBu"&&(O.colorscale="YlGnBu"),O.colorscale==="YIOrRd"&&(O.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=_.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var R=(_.increasing||{}).showlegend!==!1,j=(_.decreasing||{}).showlegend!==!1,D=l(_.increasing),N=l(_.decreasing);if(D!==!1&&N!==!1){var W=u(D,N,R,j);W&&(_.name=W)}else!D&&!N||_.name||(_.name=D||N)}if(Array.isArray(_.transforms)){var F=_.transforms;for(m=0;m<F.length;m++){var V=F[m];if(T.isPlainObject(V))switch(V.type){case"filter":V.filtersrc&&(V.target=V.filtersrc,delete V.filtersrc),V.calendar&&(V.valuecalendar||(V.valuecalendar=V.calendar),delete V.calendar);break;case"groupby":if(V.styles=V.styles||V.style,V.styles&&!Array.isArray(V.styles)){var U=V.styles,te=Object.keys(U);V.styles=[];for(var J=0;J<te.length;J++)V.styles.push({target:te[J],value:U[te[J]]})}}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),s.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),i(_),_.colorbar&&i(_.colorbar),_.marker&&_.marker.colorbar&&i(_.marker.colorbar),_.line&&_.line.colorbar&&i(_.line.colorbar),_.aaxis&&i(_.aaxis),_.baxis&&i(_.baxis)}},z.swapXYData=function(v){var y;if(T.swapAttrs(v,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(v.z)&&Array.isArray(v.z[0])&&(v.transpose?delete v.transpose:v.transpose=!0),v.error_x&&v.error_y){var m=v.error_y,_="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(v,["error_?.copy_ystyle"]),_&&T.swapAttrs(v,["error_?.color","error_?.thickness","error_?.width"])}if(typeof v.hoverinfo=="string"){var f=v.hoverinfo.split("+");for(y=0;y<f.length;y++)f[y]==="x"?f[y]="y":f[y]==="y"&&(f[y]="x");v.hoverinfo=f.join("+")}},z.coerceTraceIndices=function(v,y){if(M(y))return[y];if(!Array.isArray(y)||!y.length)return v.data.map(function(f,S){return S});if(Array.isArray(y)){for(var m=[],_=0;_<y.length;_++)T.isIndex(y[_],v.data.length)?m.push(y[_]):T.warn("trace index (",y[_],") is not a number or is out of bounds");return m}return y},z.manageArrayContainers=function(v,y,m){var _=v.obj,f=v.parts,S=f.length,w=f[S-1],E=M(w);if(E&&y===null){var O=f.slice(0,S-1).join(".");T.nestedProperty(_,O).get().splice(w,1)}else E&&v.get()===void 0&&v.get()===void 0&&(m[v.astr]=null),v.set(y)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function d(v){var y=v.search(x);if(y>0)return v.substr(0,y)}z.hasParent=function(v,y){for(var m=d(y);m;){if(m in v)return!0;m=d(m)}return!1};var g=["x","y","z"];z.clearAxisTypes=function(v,y,m){for(var _=0;_<y.length;_++)for(var f=v._fullData[_],S=0;S<3;S++){var w=a(v,f,g[S]);if(w&&w.type!=="log"){var E=w._name,O=w._id.substr(1);if(O.substr(0,5)==="scene"){if(m[O]!==void 0)continue;E=O+"."+E}var C=E+".type";m[E]===void 0&&m[C]===void 0&&T.nestedProperty(v.layout,C).set(null)}}}},22448:function(ee,z,e){var M=e(36424);z._doPlot=M._doPlot,z.newPlot=M.newPlot,z.restyle=M.restyle,z.relayout=M.relayout,z.redraw=M.redraw,z.update=M.update,z._guiRestyle=M._guiRestyle,z._guiRelayout=M._guiRelayout,z._guiUpdate=M._guiUpdate,z._storeDirectGUIEdit=M._storeDirectGUIEdit,z.react=M.react,z.extendTraces=M.extendTraces,z.prependTraces=M.prependTraces,z.addTraces=M.addTraces,z.deleteTraces=M.deleteTraces,z.moveTraces=M.moveTraces,z.purge=M.purge,z.addFrames=M.addFrames,z.deleteFrames=M.deleteFrames,z.animate=M.animate,z.setPlotConfig=M.setPlotConfig;var k=e(52200).getGraphDiv,o=e(4016).eraseActiveShape;z.deleteActiveShape=function(b){return o(k(b))},z.toImage=e(67024),z.validate=e(21480),z.downloadImage=e(39792);var T=e(94828);z.makeTemplate=T.makeTemplate,z.validateTemplate=T.validateTemplate},17680:function(ee,z,e){var M=e(63620),k=e(16628),o=e(24248),T=e(14952).sorterAsc,b=e(24040);z.containerArrayMatch=e(69820);var h=z.isAddVal=function(t){return t==="add"||M(t)},s=z.isRemoveVal=function(t){return t===null||t==="remove"};z.applyContainerArrayChanges=function(t,a,n,r,i){var l=a.astr,u=b.getComponentMethod(l,"supplyLayoutDefaults"),p=b.getComponentMethod(l,"draw"),c=b.getComponentMethod(l,"drawOne"),x=r.replot||r.recalc||u===k||p===k,d=t.layout,g=t._fullLayout;if(n[""]){Object.keys(n).length>1&&o.warn("Full array edits are incompatible with other edits",l);var v=n[""][""];if(s(v))a.set(null);else{if(!Array.isArray(v))return o.warn("Unrecognized full array edit value",l,v),!0;a.set(v)}return!x&&(u(d,g),p(t),!0)}var y,m,_,f,S,w,E,O,C=Object.keys(n).map(Number).sort(T),P=a.get(),R=P||[],j=i(g,l).get(),D=[],N=-1,W=R.length;for(y=0;y<C.length;y++)if(f=n[_=C[y]],S=Object.keys(f),w=f[""],E=h(w),_<0||_>R.length-(E?0:1))o.warn("index out of range",l,_);else if(w!==void 0)S.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",l,_),s(w)?D.push(_):E?(w==="add"&&(w={}),R.splice(_,0,w),j&&j.splice(_,0,{})):o.warn("Unrecognized full object edit value",l,_,w),N===-1&&(N=_);else for(m=0;m<S.length;m++)O=l+"["+_+"].",i(R[_],S[m],O).set(f[S[m]]);for(y=D.length-1;y>=0;y--)R.splice(D[y],1),j&&j.splice(D[y],1);if(R.length?P||a.set(R):a.set(null),x)return!1;if(u(d,g),c!==k){var F;if(N===-1)F=C;else{for(W=Math.max(R.length,W),F=[],y=0;y<C.length&&!((_=C[y])>=N);y++)F.push(_);for(y=N;y<W;y++)F.push(y)}for(y=0;y<F.length;y++)c(t,F[y])}else p(t);return!0}},36424:function(ee,z,e){var M=e(33428),k=e(38248),o=e(52264),T=e(3400),b=T.nestedProperty,h=e(95924),s=e(94552),t=e(24040),a=e(73060),n=e(7316),r=e(54460),i=e(96312),l=e(94724),u=e(43616),p=e(76308),c=e(42464).initInteractions,x=e(9616),d=e(22676).clearOutline,g=e(20556).dfltConfig,v=e(17680),y=e(93404),m=e(39172),_=e(67824),f=e(33816).AX_NAME_PATTERN,S=0;function w(Te){var Ae=Te._fullLayout;Ae._redrawFromAutoMarginCount?Ae._redrawFromAutoMarginCount--:Te.emit("plotly_afterplot")}function E(Te,Ae){try{Te._fullLayout._paper.style("background",Ae)}catch(Se){T.error(Se)}}function O(Te,Ae){E(Te,p.combine(Ae,"white"))}function C(Te,Ae){if(!Te._context){Te._context=T.extendDeep({},g);var Se=M.select("base");Te._context._baseUrl=Se.size()&&Se.attr("href")?window.location.href.split("#")[0]:""}var Oe,De,de,me=Te._context;if(Ae){for(De=Object.keys(Ae),Oe=0;Oe<De.length;Oe++)(de=De[Oe])!=="editable"&&de!=="edits"&&de in me&&(de==="setBackground"&&Ae[de]==="opaque"?me[de]=O:me[de]=Ae[de]);Ae.plot3dPixelRatio&&!me.plotGlPixelRatio&&(me.plotGlPixelRatio=me.plot3dPixelRatio);var Me=Ae.editable;if(Me!==void 0)for(me.editable=Me,De=Object.keys(me.edits),Oe=0;Oe<De.length;Oe++)me.edits[De[Oe]]=Me;if(Ae.edits)for(De=Object.keys(Ae.edits),Oe=0;Oe<De.length;Oe++)(de=De[Oe])in me.edits&&(me.edits[de]=Ae.edits[de]);me._exportedPlot=Ae._exportedPlot}me.staticPlot&&(me.editable=!1,me.edits={},me.autosizable=!1,me.scrollZoom=!1,me.doubleClick=!1,me.showTips=!1,me.showLink=!1,me.displayModeBar=!1),me.displayModeBar!=="hover"||o||(me.displayModeBar=!0),me.setBackground!=="transparent"&&typeof me.setBackground=="function"||(me.setBackground=E),me._hasZeroHeight=me._hasZeroHeight||Te.clientHeight===0,me._hasZeroWidth=me._hasZeroWidth||Te.clientWidth===0;var ze=me.scrollZoom,Pe=me._scrollZoom={};if(ze===!0)Pe.cartesian=1,Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1;else if(typeof ze=="string"){var Ne=ze.split("+");for(Oe=0;Oe<Ne.length;Oe++)Pe[Ne[Oe]]=1}else ze!==!1&&(Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1)}function P(Te,Ae){var Se,Oe,De=Ae+1,de=[];for(Se=0;Se<Te.length;Se++)(Oe=Te[Se])<0?de.push(De+Oe):de.push(Oe);return de}function R(Te,Ae,Se){var Oe,De;for(Oe=0;Oe<Ae.length;Oe++){if((De=Ae[Oe])!==parseInt(De,10))throw new Error("all values in "+Se+" must be integers");if(De>=Te.data.length||De<-Te.data.length)throw new Error(Se+" must be valid indices for gd.data.");if(Ae.indexOf(De,Oe+1)>-1||De>=0&&Ae.indexOf(-Te.data.length+De)>-1||De<0&&Ae.indexOf(Te.data.length+De)>-1)throw new Error("each index in "+Se+" must be unique.")}}function j(Te,Ae,Se){if(!Array.isArray(Te.data))throw new Error("gd.data must be an array.");if(Ae===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(Ae)||(Ae=[Ae]),R(Te,Ae,"currentIndices"),Se===void 0||Array.isArray(Se)||(Se=[Se]),Se!==void 0&&R(Te,Se,"newIndices"),Se!==void 0&&Ae.length!==Se.length)throw new Error("current and new indices must be of equal length.")}function D(Te,Ae,Se,Oe,De){(function(Ye,at,rt,dt){var vt=T.isPlainObject(dt);if(!Array.isArray(Ye.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(at))throw new Error("update must be a key:value object");if(rt===void 0)throw new Error("indices must be an integer or array of integers");for(var ht in R(Ye,rt,"indices"),at){if(!Array.isArray(at[ht])||at[ht].length!==rt.length)throw new Error("attribute "+ht+" must be an array of length equal to indices array length");if(vt&&(!(ht in dt)||!Array.isArray(dt[ht])||dt[ht].length!==at[ht].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(Te,Ae,Se,Oe);for(var de=function(Ye,at,rt,dt){var vt,ht,et,$e,wt,Pt=T.isPlainObject(dt),Ot=[];for(var At in Array.isArray(rt)||(rt=[rt]),rt=P(rt,Ye.data.length-1),at)for(var He=0;He<rt.length;He++){if(vt=Ye.data[rt[He]],ht=(et=b(vt,At)).get(),$e=at[At][He],!T.isArrayOrTypedArray($e))throw new Error("attribute: "+At+" index: "+He+" must be an array");if(!T.isArrayOrTypedArray(ht))throw new Error("cannot extend missing or non-array attribute: "+At);if(ht.constructor!==$e.constructor)throw new Error("cannot extend array with an array of a different type: "+At);wt=Pt?dt[At][He]:dt,k(wt)||(wt=-1),Ot.push({prop:et,target:ht,insert:$e,maxp:Math.floor(wt)})}return Ot}(Te,Ae,Se,Oe),me={},Me={},ze=0;ze<de.length;ze++){var Pe=de[ze].prop,Ne=de[ze].maxp,Ve=De(de[ze].target,de[ze].insert,Ne);Pe.set(Ve[0]),Array.isArray(me[Pe.astr])||(me[Pe.astr]=[]),me[Pe.astr].push(Ve[1]),Array.isArray(Me[Pe.astr])||(Me[Pe.astr]=[]),Me[Pe.astr].push(de[ze].target.length)}return{update:me,maxPoints:Me}}function N(Te,Ae){var Se=new Te.constructor(Te.length+Ae.length);return Se.set(Te),Se.set(Ae,Te.length),Se}function W(Te,Ae,Se,Oe){Te=T.getGraphDiv(Te),y.clearPromiseQueue(Te);var De={};if(typeof Ae=="string")De[Ae]=Se;else{if(!T.isPlainObject(Ae))return T.warn("Restyle fail.",Ae,Se,Oe),Promise.reject();De=T.extendFlat({},Ae),Oe===void 0&&(Oe=Se)}Object.keys(De).length&&(Te.changed=!0);var de=y.coerceTraceIndices(Te,Oe),me=te(Te,De,de),Me=me.flags;Me.calc&&(Te.calcdata=void 0),Me.clearAxisTypes&&y.clearAxisTypes(Te,de,{});var ze=[];Me.fullReplot?ze.push(z._doPlot):(ze.push(n.previousPromises),n.supplyDefaults(Te),Me.markerSize&&(n.doCalcdata(Te),Q(ze)),Me.style&&ze.push(m.doTraceStyle),Me.colorbars&&ze.push(m.doColorBars),ze.push(w)),ze.push(n.rehover,n.redrag,n.reselect),s.add(Te,W,[Te,me.undoit,me.traces],W,[Te,me.redoit,me.traces]);var Pe=T.syncOrAsync(ze,Te);return Pe&&Pe.then||(Pe=Promise.resolve()),Pe.then(function(){return Te.emit("plotly_restyle",me.eventData),Te})}function F(Te){return Te===void 0?null:Te}function V(Te,Ae){return Ae?function(Se,Oe,De){var de=b(Se,Oe),me=de.set;return de.set=function(Me){U((De||"")+Oe,de.get(),Me,Te),me(Me)},de}:b}function U(Te,Ae,Se,Oe){if(Array.isArray(Ae)||Array.isArray(Se))for(var De=Array.isArray(Ae)?Ae:[],de=Array.isArray(Se)?Se:[],me=Math.max(De.length,de.length),Me=0;Me<me;Me++)U(Te+"["+Me+"]",De[Me],de[Me],Oe);else if(T.isPlainObject(Ae)||T.isPlainObject(Se)){var ze=T.isPlainObject(Ae)?Ae:{},Pe=T.isPlainObject(Se)?Se:{},Ne=T.extendFlat({},ze,Pe);for(var Ve in Ne)U(Te+"."+Ve,ze[Ve],Pe[Ve],Oe)}else Oe[Te]===void 0&&(Oe[Te]=F(Ae))}function te(Te,Ae,Se){var Oe,De=Te._fullLayout,de=Te._fullData,me=Te.data,Me=De._guiEditing,ze=V(De._preGUI,Me),Pe=T.extendDeepAll({},Ae);J(Ae);var Ne,Ve=_.traceFlags(),Ye={},at={};function rt(){return Se.map(function(){})}function dt(Bt){var Ht=r.id2name(Bt);Ne.indexOf(Ht)===-1&&Ne.push(Ht)}function vt(Bt){return"LAYOUT"+Bt+".autorange"}function ht(Bt){return"LAYOUT"+Bt+".range"}function et(Bt){for(var Ht=Bt;Ht<de.length;Ht++)if(de[Ht]._input===me[Bt])return de[Ht]}function $e(Bt,Ht,Qt){if(Array.isArray(Bt))Bt.forEach(function(hn){$e(hn,Ht,Qt)});else if(!(Bt in Ae)&&!y.hasParent(Ae,Bt)){var Cn;if(Bt.substr(0,6)==="LAYOUT")Cn=ze(Te.layout,Bt.replace("LAYOUT",""));else{var Tn=Se[Qt];Cn=V(De._tracePreGUI[et(Tn)._fullInput.uid],Me)(me[Tn],Bt)}Bt in at||(at[Bt]=rt()),at[Bt][Qt]===void 0&&(at[Bt][Qt]=F(Cn.get())),Ht!==void 0&&Cn.set(Ht)}}function wt(Bt){return function(Ht){return de[Ht][Bt]}}function Pt(Bt){return function(Ht,Qt){return Ht===!1?de[Se[Qt]][Bt]:null}}for(var Ot in Ae){if(y.hasParent(Ae,Ot))throw new Error("cannot set "+Ot+" and a parent attribute simultaneously");var At,He,Ze,Be,Ge,it,tt=Ae[Ot];if(Ot!=="autobinx"&&Ot!=="autobiny"||(Ot=Ot.charAt(Ot.length-1)+"bins",tt=Array.isArray(tt)?tt.map(Pt(Ot)):tt===!1?Se.map(wt(Ot)):null),Ye[Ot]=tt,Ot.substr(0,6)!=="LAYOUT"){for(at[Ot]=rt(),Oe=0;Oe<Se.length;Oe++)if(At=me[Se[Oe]],He=et(Se[Oe]),Be=(Ze=V(De._tracePreGUI[He._fullInput.uid],Me)(At,Ot)).get(),(Ge=Array.isArray(tt)?tt[Oe%tt.length]:tt)!==void 0){var Re=Ze.parts[Ze.parts.length-1],Fe=Ot.substr(0,Ot.length-Re.length-1),nt=Fe?Fe+".":"",We=Fe?b(He,Fe).get():He;if((it=a.getTraceValObject(He,Ze.parts))&&it.impliedEdits&&Ge!==null)for(var ct in it.impliedEdits)$e(T.relativeAttr(Ot,ct),it.impliedEdits[ct],Oe);else if(Re!=="thicknessmode"&&Re!=="lenmode"||Be===Ge||Ge!=="fraction"&&Ge!=="pixels"||!We){if(Ot==="type"&&(Ge==="pie"!=(Be==="pie")||Ge==="funnelarea"!=(Be==="funnelarea"))){var pt="x",gt="y";Ge!=="bar"&&Be!=="bar"||At.orientation!=="h"||(pt="y",gt="x"),T.swapAttrs(At,["?","?src"],"labels",pt),T.swapAttrs(At,["d?","?0"],"label",pt),T.swapAttrs(At,["?","?src"],"values",gt),Be==="pie"||Be==="funnelarea"?(b(At,"marker.color").set(b(At,"marker.colors").get()),De._pielayer.selectAll("g.trace").remove()):t.traceIs(At,"cartesian")&&b(At,"marker.colors").set(b(At,"marker.color").get())}}else{var ut=De._size,kt=We.orient,yt=kt==="top"||kt==="bottom";if(Re==="thicknessmode"){var Mt=yt?ut.h:ut.w;$e(nt+"thickness",We.thickness*(Ge==="fraction"?1/Mt:Mt),Oe)}else{var Lt=yt?ut.w:ut.h;$e(nt+"len",We.len*(Ge==="fraction"?1/Lt:Lt),Oe)}}if(at[Ot][Oe]=F(Be),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ot)!==-1){if(Ot==="orientation"){Ze.set(Ge);var Ct=At.x&&!At.y?"h":"v";if((Ze.get()||Ct)===He.orientation)continue}else Ot==="orientationaxes"&&(At.orientation={v:"h",h:"v"}[He.orientation]);y.swapXYData(At),Ve.calc=Ve.clearAxisTypes=!0}else n.dataArrayContainers.indexOf(Ze.parts[0])!==-1?(y.manageArrayContainers(Ze,Ge,at),Ve.calc=!0):(it?it.arrayOk&&!t.traceIs(He,"regl")&&(T.isArrayOrTypedArray(Ge)||T.isArrayOrTypedArray(Be))?Ve.calc=!0:_.update(Ve,it):Ve.calc=!0,Ze.set(Ge))}if(["swapxyaxes","orientationaxes"].indexOf(Ot)!==-1&&r.swap(Te,Se),Ot==="orientationaxes"){var It=b(Te.layout,"hovermode"),Wt=It.get();Wt==="x"?It.set("y"):Wt==="y"?It.set("x"):Wt==="x unified"?It.set("y unified"):Wt==="y unified"&&It.set("x unified")}if(["orientation","type"].indexOf(Ot)!==-1){for(Ne=[],Oe=0;Oe<Se.length;Oe++){var Nt=me[Se[Oe]];t.traceIs(Nt,"cartesian")&&(dt(Nt.xaxis||"x"),dt(Nt.yaxis||"y"))}$e(Ne.map(vt),!0,0),$e(Ne.map(ht),[0,1],0)}}else Ze=ze(Te.layout,Ot.replace("LAYOUT","")),at[Ot]=[F(Ze.get())],Ze.set(Array.isArray(tt)?tt[0]:tt),Ve.calc=!0}return(Ve.calc||Ve.plot)&&(Ve.fullReplot=!0),{flags:Ve,undoit:at,redoit:Ye,traces:Se,eventData:T.extendDeepNoArrays([],[Pe,Se])}}function J(Te){var Ae,Se,Oe,De=T.counterRegex("axis",".title",!1,!1),de=/colorbar\.title$/,me=Object.keys(Te);for(Ae=0;Ae<me.length;Ae++)Se=me[Ae],Oe=Te[Se],Se!=="title"&&!De.test(Se)&&!de.test(Se)||typeof Oe!="string"&&typeof Oe!="number"?Se.indexOf("titlefont")>-1&&Se.indexOf("grouptitlefont")===-1?Me(Se,Se.replace("titlefont","title.font")):Se.indexOf("titleposition")>-1?Me(Se,Se.replace("titleposition","title.position")):Se.indexOf("titleside")>-1?Me(Se,Se.replace("titleside","title.side")):Se.indexOf("titleoffset")>-1&&Me(Se,Se.replace("titleoffset","title.offset")):Me(Se,Se.replace("title","title.text"));function Me(ze,Pe){Te[Pe]=Te[ze],delete Te[ze]}}function X(Te,Ae,Se){Te=T.getGraphDiv(Te),y.clearPromiseQueue(Te);var Oe={};if(typeof Ae=="string")Oe[Ae]=Se;else{if(!T.isPlainObject(Ae))return T.warn("Relayout fail.",Ae,Se),Promise.reject();Oe=T.extendFlat({},Ae)}Object.keys(Oe).length&&(Te.changed=!0);var De=ae(Te,Oe),de=De.flags;de.calc&&(Te.calcdata=void 0);var me=[n.previousPromises];de.layoutReplot?me.push(m.layoutReplot):Object.keys(Oe).length&&(K(Te,de,De)||n.supplyDefaults(Te),de.legend&&me.push(m.doLegend),de.layoutstyle&&me.push(m.layoutStyles),de.axrange&&Q(me,De.rangesAltered),de.ticks&&me.push(m.doTicksRelayout),de.modebar&&me.push(m.doModeBar),de.camera&&me.push(m.doCamera),de.colorbars&&me.push(m.doColorBars),me.push(w)),me.push(n.rehover,n.redrag,n.reselect),s.add(Te,X,[Te,De.undoit],X,[Te,De.redoit]);var Me=T.syncOrAsync(me,Te);return Me&&Me.then||(Me=Promise.resolve(Te)),Me.then(function(){return Te.emit("plotly_relayout",De.eventData),Te})}function K(Te,Ae,Se){var Oe,De,de=Te._fullLayout;if(!Ae.axrange)return!1;for(var me in Ae)if(me!=="axrange"&&Ae[me])return!1;var Me=function(at,rt){return T.coerce(Oe,De,l,at,rt)},ze={};for(var Pe in Se.rangesAltered){var Ne=r.id2name(Pe);if(Oe=Te.layout[Ne],De=de[Ne],i(Oe,De,Me,ze),De._matchGroup){for(var Ve in De._matchGroup)if(Ve!==Pe){var Ye=de[r.id2name(Ve)];Ye.autorange=De.autorange,Ye.range=De.range.slice(),Ye._input.range=De.range.slice()}}}return!0}function Q(Te,Ae){var Se=Ae?function(Oe){var De=[];for(var de in Ae){var me=r.getFromId(Oe,de);if(De.push(de),(me.ticklabelposition||"").indexOf("inside")!==-1&&me._anchorAxis&&De.push(me._anchorAxis._id),me._matchGroup)for(var Me in me._matchGroup)Ae[Me]||De.push(Me)}return r.draw(Oe,De,{skipTitle:!0})}:function(Oe){return r.draw(Oe,"redraw")};Te.push(d,m.doAutoRangeAndConstraints,Se,m.drawData,m.finalDraw)}var Z=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,re=/^[xyz]axis[0-9]*\.autorange$/,oe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ae(Te,Ae){var Se,Oe,De,de=Te.layout,me=Te._fullLayout,Me=me._guiEditing,ze=V(me._preGUI,Me),Pe=Object.keys(Ae),Ne=r.list(Te),Ve=T.extendDeepAll({},Ae),Ye={};for(J(Ae),Pe=Object.keys(Ae),Oe=0;Oe<Pe.length;Oe++)if(Pe[Oe].indexOf("allaxes")===0){for(De=0;De<Ne.length;De++){var at=Ne[De]._id.substr(1),rt=at.indexOf("scene")!==-1?at+".":"",dt=Pe[Oe].replace("allaxes",rt+Ne[De]._name);Ae[dt]||(Ae[dt]=Ae[Pe[Oe]])}delete Ae[Pe[Oe]]}var vt=_.layoutFlags(),ht={},et={};function $e(hn,Zt){if(Array.isArray(hn))hn.forEach(function($t){$e($t,Zt)});else if(!(hn in Ae)&&!y.hasParent(Ae,hn)){var an=ze(de,hn);hn in et||(et[hn]=F(an.get())),Zt!==void 0&&an.set(Zt)}}var wt,Pt={};function Ot(hn){var Zt=r.name2id(hn.split(".")[0]);return Pt[Zt]=1,Zt}for(var At in Ae){if(y.hasParent(Ae,At))throw new Error("cannot set "+At+" and a parent attribute simultaneously");for(var He=ze(de,At),Ze=Ae[At],Be=He.parts.length-1;Be>0&&typeof He.parts[Be]!="string";)Be--;var Ge=He.parts[Be],it=He.parts[Be-1]+"."+Ge,tt=He.parts.slice(0,Be).join("."),Re=b(Te.layout,tt).get(),Fe=b(me,tt).get(),nt=He.get();if(Ze!==void 0){ht[At]=Ze,et[At]=Ge==="reverse"?Ze:F(nt);var We=a.getLayoutValObject(me,He.parts);if(We&&We.impliedEdits&&Ze!==null)for(var ct in We.impliedEdits)$e(T.relativeAttr(At,ct),We.impliedEdits[ct]);if(["width","height"].indexOf(At)!==-1)if(Ze){$e("autosize",null);var pt=At==="height"?"width":"height";$e(pt,me[pt])}else me[At]=Te._initialAutoSize[At];else if(At==="autosize")$e("width",Ze?null:me.width),$e("height",Ze?null:me.height);else if(it.match(Z))Ot(it),b(me,tt+"._inputRange").set(null);else if(it.match(re)){Ot(it),b(me,tt+"._inputRange").set(null);var gt=b(me,tt).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else it.match(oe)&&b(me,tt+"._inputDomain").set(null);if(Ge==="type"){wt=Re;var ut=Fe.type==="linear"&&Ze==="log",kt=Fe.type==="log"&&Ze==="linear";if(ut||kt){if(wt&&wt.range)if(Fe.autorange)ut&&(wt.range=wt.range[1]>wt.range[0]?[1,2]:[2,1]);else{var yt=wt.range[0],Mt=wt.range[1];ut?(yt<=0&&Mt<=0&&$e(tt+".autorange",!0),yt<=0?yt=Mt/1e6:Mt<=0&&(Mt=yt/1e6),$e(tt+".range[0]",Math.log(yt)/Math.LN10),$e(tt+".range[1]",Math.log(Mt)/Math.LN10)):($e(tt+".range[0]",Math.pow(10,yt)),$e(tt+".range[1]",Math.pow(10,Mt)))}else $e(tt+".autorange",!0);Array.isArray(me._subplots.polar)&&me._subplots.polar.length&&me[He.parts[0]]&&He.parts[1]==="radialaxis"&&delete me[He.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(Te,Fe,Ze,$e),t.getComponentMethod("images","convertCoords")(Te,Fe,Ze,$e)}else $e(tt+".autorange",!0),$e(tt+".range",null);b(me,tt+"._inputRange").set(null)}else if(Ge.match(f)){var Lt=b(me,At).get(),Ct=(Ze||{}).type;Ct&&Ct!=="-"||(Ct="linear"),t.getComponentMethod("annotations","convertCoords")(Te,Lt,Ct,$e),t.getComponentMethod("images","convertCoords")(Te,Lt,Ct,$e)}var It=v.containerArrayMatch(At);if(It){Se=It.array,Oe=It.index;var Wt=It.property,Nt=We||{editType:"calc"};Oe!==""&&Wt===""&&(v.isAddVal(Ze)?et[At]=null:v.isRemoveVal(Ze)?et[At]=(b(de,Se).get()||[])[Oe]:T.warn("unrecognized full object value",Ae)),_.update(vt,Nt),Ye[Se]||(Ye[Se]={});var Bt=Ye[Se][Oe];Bt||(Bt=Ye[Se][Oe]={}),Bt[Wt]=Ze,delete Ae[At]}else Ge==="reverse"?(Re.range?Re.range.reverse():($e(tt+".autorange",!0),Re.range=[1,0]),Fe.autorange?vt.calc=!0:vt.plot=!0):(At==="dragmode"&&(Ze===!1&&nt!==!1||Ze!==!1&&nt===!1)||me._has("scatter-like")&&me._has("regl")&&At==="dragmode"&&(Ze==="lasso"||Ze==="select")&&nt!=="lasso"&&nt!=="select"||me._has("gl2d")?vt.plot=!0:We?_.update(vt,We):vt.calc=!0,He.set(Ze))}}for(Se in Ye)v.applyContainerArrayChanges(Te,ze(de,Se),Ye[Se],vt,ze)||(vt.plot=!0);for(var Ht in Pt){var Qt=(wt=r.getFromId(Te,Ht))&&wt._constraintGroup;if(Qt)for(var Cn in vt.calc=!0,Qt)Pt[Cn]||(r.getFromId(Te,Cn)._constraintShrinkable=!0)}(ce(Te)||Ae.height||Ae.width)&&(vt.plot=!0);var Tn=me.shapes;for(Oe=0;Oe<Tn.length;Oe++)if(Tn[Oe].showlegend){vt.calc=!0;break}return(vt.plot||vt.calc)&&(vt.layoutReplot=!0),{flags:vt,rangesAltered:Pt,undoit:et,redoit:ht,eventData:Ve}}function ce(Te){var Ae=Te._fullLayout,Se=Ae.width,Oe=Ae.height;return Te.layout.autosize&&n.plotAutoSize(Te,Te.layout,Ae),Ae.width!==Se||Ae.height!==Oe}function he(Te,Ae,Se,Oe){Te=T.getGraphDiv(Te),y.clearPromiseQueue(Te),T.isPlainObject(Ae)||(Ae={}),T.isPlainObject(Se)||(Se={}),Object.keys(Ae).length&&(Te.changed=!0),Object.keys(Se).length&&(Te.changed=!0);var De=y.coerceTraceIndices(Te,Oe),de=te(Te,T.extendFlat({},Ae),De),me=de.flags,Me=ae(Te,T.extendFlat({},Se)),ze=Me.flags;(me.calc||ze.calc)&&(Te.calcdata=void 0),me.clearAxisTypes&&y.clearAxisTypes(Te,De,Se);var Pe=[];ze.layoutReplot?Pe.push(m.layoutReplot):me.fullReplot?Pe.push(z._doPlot):(Pe.push(n.previousPromises),K(Te,ze,Me)||n.supplyDefaults(Te),me.style&&Pe.push(m.doTraceStyle),(me.colorbars||ze.colorbars)&&Pe.push(m.doColorBars),ze.legend&&Pe.push(m.doLegend),ze.layoutstyle&&Pe.push(m.layoutStyles),ze.axrange&&Q(Pe,Me.rangesAltered),ze.ticks&&Pe.push(m.doTicksRelayout),ze.modebar&&Pe.push(m.doModeBar),ze.camera&&Pe.push(m.doCamera),Pe.push(w)),Pe.push(n.rehover,n.redrag,n.reselect),s.add(Te,he,[Te,de.undoit,Me.undoit,de.traces],he,[Te,de.redoit,Me.redoit,de.traces]);var Ne=T.syncOrAsync(Pe,Te);return Ne&&Ne.then||(Ne=Promise.resolve(Te)),Ne.then(function(){return Te.emit("plotly_update",{data:de.eventData,layout:Me.eventData}),Te})}function pe(Te){return function(Ae){Ae._fullLayout._guiEditing=!0;var Se=Te.apply(null,arguments);return Ae._fullLayout._guiEditing=!1,Se}}var xe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],be=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ve(Te,Ae){for(var Se=0;Se<Ae.length;Se++){var Oe=Ae[Se],De=Te.match(Oe.pattern);if(De){var de=De[1]||"";return{head:de,tail:Te.substr(de.length+1),attr:Oe.attr}}}}function ge(Te,Ae){var Se=b(Ae,Te).get();if(Se!==void 0)return Se;var Oe=Te.split(".");for(Oe.pop();Oe.length>1;)if(Oe.pop(),(Se=b(Ae,Oe.join(".")+".uirevision").get())!==void 0)return Se;return Ae.uirevision}function we(Te,Ae){for(var Se=0;Se<Ae.length;Se++)if(Ae[Se]._fullInput.uid===Te)return Se;return-1}function _e(Te,Ae,Se){for(var Oe=0;Oe<Ae.length;Oe++)if(Ae[Oe].uid===Te)return Oe;return!Ae[Se]||Ae[Se].uid?-1:Se}function se(Te,Ae){var Se=T.isPlainObject(Te),Oe=Array.isArray(Te);return Se||Oe?(Se&&T.isPlainObject(Ae)||Oe&&Array.isArray(Ae))&&JSON.stringify(Te)===JSON.stringify(Ae):Te===Ae}function ie(Te,Ae,Se,Oe){var De,de,me,Me=Oe.getValObject,ze=Oe.flags,Pe=Oe.immutable,Ne=Oe.inArray,Ve=Oe.arrayIndex;function Ye(){var Re=De.editType;Ne&&Re.indexOf("arraydraw")!==-1?T.pushUnique(ze.arrays[Ne],Ve):(_.update(ze,De),Re!=="none"&&ze.nChanges++,Oe.transition&&De.anim&&ze.nChangesAnim++,(Z.test(me)||re.test(me))&&(ze.rangesAltered[Se[0]]=1),oe.test(me)&&b(Ae,"_inputDomain").set(null),de==="datarevision"&&(ze.newDataRevision=1))}function at(Re){return Re.valType==="data_array"||Re.arrayOk}for(de in Te){if(ze.calc&&!Oe.transition)return;var rt=Te[de],dt=Ae[de],vt=Se.concat(de);if(me=vt.join("."),de.charAt(0)!=="_"&&typeof rt!="function"&&rt!==dt){if((de==="tick0"||de==="dtick")&&Se[0]!=="geo"){var ht=Ae.tickmode;if(ht==="auto"||ht==="array"||!ht)continue}if((de!=="range"||!Ae.autorange)&&(de!=="zmin"&&de!=="zmax"||Ae.type!=="contourcarpet")&&(De=Me(vt))&&(!De._compareAsJSON||JSON.stringify(rt)!==JSON.stringify(dt))){var et,$e=De.valType,wt=at(De),Pt=Array.isArray(rt),Ot=Array.isArray(dt);if(Pt&&Ot){var At="_input_"+de,He=Te[At],Ze=Ae[At];if(Array.isArray(He)&&He===Ze)continue}if(dt===void 0)wt&&Pt?ze.calc=!0:Ye();else if(De._isLinkedToArray){var Be=[],Ge=!1;Ne||(ze.arrays[de]=Be);var it=Math.min(rt.length,dt.length),tt=Math.max(rt.length,dt.length);if(it!==tt){if(De.editType!=="arraydraw"){Ye();continue}Ge=!0}for(et=0;et<it;et++)ie(rt[et],dt[et],vt.concat(et),T.extendFlat({inArray:de,arrayIndex:et},Oe));if(Ge)for(et=it;et<tt;et++)Be.push(et)}else!$e&&T.isPlainObject(rt)?ie(rt,dt,vt,Oe):wt?Pt&&Ot?(Pe&&(ze.calc=!0),(Pe||Oe.newDataRevision)&&Ye()):Pt!==Ot?ze.calc=!0:Ye():Pt&&Ot&&rt.length===dt.length&&String(rt)===String(dt)||Ye()}}}for(de in Ae)if(!(de in Te)&&de.charAt(0)!=="_"&&typeof Ae[de]!="function"){if(at(De=Me(Se.concat(de)))&&Array.isArray(Ae[de]))return void(ze.calc=!0);Ye()}}function fe(Te,Ae){var Se;for(Se in Te)if(Se.charAt(0)!=="_"){var Oe=Te[Se],De=Ae[Se];if(Oe!==De)if(T.isPlainObject(Oe)&&T.isPlainObject(De)){if(fe(Oe,De))return!0}else{if(!Array.isArray(Oe)||!Array.isArray(De)||Oe.length!==De.length)return!0;for(var de=0;de<Oe.length;de++)if(Oe[de]!==De[de]&&(!T.isPlainObject(Oe[de])||!T.isPlainObject(De[de])||fe(Oe[de],De[de])))return!0}}}function Ee(Te){var Ae=Te._fullLayout,Se=Te.getBoundingClientRect();if(!T.equalDomRects(Se,Ae._lastBBox)){var Oe=Ae._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Te));Ae._invScaleX=Math.sqrt(Oe[0][0]*Oe[0][0]+Oe[0][1]*Oe[0][1]+Oe[0][2]*Oe[0][2]),Ae._invScaleY=Math.sqrt(Oe[1][0]*Oe[1][0]+Oe[1][1]*Oe[1][1]+Oe[1][2]*Oe[1][2]),Ae._lastBBox=Se}}z.animate=function(Te,Ae,Se){if(Te=T.getGraphDiv(Te),!T.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Oe=Te._transitionData;Oe._frameQueue||(Oe._frameQueue=[]);var De=(Se=n.supplyAnimationDefaults(Se)).transition,de=Se.frame;function me(Pe){return Array.isArray(De)?Pe>=De.length?De[0]:De[Pe]:De}function Me(Pe){return Array.isArray(de)?Pe>=de.length?de[0]:de[Pe]:de}function ze(Pe,Ne){var Ve=0;return function(){if(Pe&&++Ve===Ne)return Pe()}}return Oe._frameWaitingCnt===void 0&&(Oe._frameWaitingCnt=0),new Promise(function(Pe,Ne){function Ve(){Te.emit("plotly_animating"),Oe._lastFrameAt=-1/0,Oe._timeToNext=0,Oe._runningTransitions=0,Oe._currentFrame=null;var At=function(){Oe._animationRaf=window.requestAnimationFrame(At),Date.now()-Oe._lastFrameAt>Oe._timeToNext&&function(){Oe._currentFrame&&Oe._currentFrame.onComplete&&Oe._currentFrame.onComplete();var He=Oe._currentFrame=Oe._frameQueue.shift();if(He){var Ze=He.name?He.name.toString():null;Te._fullLayout._currentFrame=Ze,Oe._lastFrameAt=Date.now(),Oe._timeToNext=He.frameOpts.duration,n.transition(Te,He.frame.data,He.frame.layout,y.coerceTraceIndices(Te,He.frame.traces),He.frameOpts,He.transitionOpts).then(function(){He.onComplete&&He.onComplete()}),Te.emit("plotly_animatingframe",{name:Ze,frame:He.frame,animation:{frame:He.frameOpts,transition:He.transitionOpts}})}else Te.emit("plotly_animated"),window.cancelAnimationFrame(Oe._animationRaf),Oe._animationRaf=null}()};At()}var Ye,at,rt=0;function dt(At){return Array.isArray(De)?rt>=De.length?At.transitionOpts=De[rt]:At.transitionOpts=De[0]:At.transitionOpts=De,rt++,At}var vt=[],ht=Ae==null,et=Array.isArray(Ae);if(ht||et||!T.isPlainObject(Ae)){if(ht||["string","number"].indexOf(typeof Ae)!==-1)for(Ye=0;Ye<Oe._frames.length;Ye++)(at=Oe._frames[Ye])&&(ht||String(at.group)===String(Ae))&&vt.push({type:"byname",name:String(at.name),data:dt({name:at.name})});else if(et)for(Ye=0;Ye<Ae.length;Ye++){var $e=Ae[Ye];["number","string"].indexOf(typeof $e)!==-1?($e=String($e),vt.push({type:"byname",name:$e,data:dt({name:$e})})):T.isPlainObject($e)&&vt.push({type:"object",data:dt(T.extendFlat({},$e))})}}else vt.push({type:"object",data:dt(T.extendFlat({},Ae))});for(Ye=0;Ye<vt.length;Ye++)if((at=vt[Ye]).type==="byname"&&!Oe._frameHash[at.data.name])return T.warn('animate failure: frame not found: "'+at.data.name+'"'),void Ne();["next","immediate"].indexOf(Se.mode)!==-1&&function(){if(Oe._frameQueue.length!==0){for(;Oe._frameQueue.length;){var At=Oe._frameQueue.pop();At.onInterrupt&&At.onInterrupt()}Te.emit("plotly_animationinterrupted",[])}}(),Se.direction==="reverse"&&vt.reverse();var wt=Te._fullLayout._currentFrame;if(wt&&Se.fromcurrent){var Pt=-1;for(Ye=0;Ye<vt.length;Ye++)if((at=vt[Ye]).type==="byname"&&at.name===wt){Pt=Ye;break}if(Pt>0&&Pt<vt.length-1){var Ot=[];for(Ye=0;Ye<vt.length;Ye++)at=vt[Ye],(vt[Ye].type!=="byname"||Ye>Pt)&&Ot.push(at);vt=Ot}}vt.length>0?function(At){if(At.length!==0){for(var He=0;He<At.length;He++){var Ze;Ze=At[He].type==="byname"?n.computeFrame(Te,At[He].name):At[He].data;var Be=Me(He),Ge=me(He);Ge.duration=Math.min(Ge.duration,Be.duration);var it={frame:Ze,name:At[He].name,frameOpts:Be,transitionOpts:Ge};He===At.length-1&&(it.onComplete=ze(Pe,2),it.onInterrupt=Ne),Oe._frameQueue.push(it)}Se.mode==="immediate"&&(Oe._lastFrameAt=-1/0),Oe._animationRaf||Ve()}}(vt):(Te.emit("plotly_animated"),Pe())})},z.addFrames=function(Te,Ae,Se){if(Te=T.getGraphDiv(Te),Ae==null)return Promise.resolve();if(!T.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Oe,De,de,me,Me=Te._transitionData._frames,ze=Te._transitionData._frameHash;if(!Array.isArray(Ae))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ae);var Pe=Me.length+2*Ae.length,Ne=[],Ve={};for(Oe=Ae.length-1;Oe>=0;Oe--)if(T.isPlainObject(Ae[Oe])){var Ye=Ae[Oe].name,at=(ze[Ye]||Ve[Ye]||{}).name,rt=Ae[Oe].name,dt=ze[at]||Ve[at];at&&rt&&typeof rt=="number"&&dt&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(ze[at]||Ve[at]).name+'" with a frame whose name of type "number" also equates to "'+at+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ve[Ye]={name:Ye},Ne.push({frame:n.supplyFrameDefaults(Ae[Oe]),index:Se&&Se[Oe]!==void 0&&Se[Oe]!==null?Se[Oe]:Pe+Oe})}Ne.sort(function(At,He){return At.index>He.index?-1:At.index<He.index?1:0});var vt=[],ht=[],et=Me.length;for(Oe=Ne.length-1;Oe>=0;Oe--){if(typeof(De=Ne[Oe].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!De.name)for(;ze[De.name="frame "+Te._transitionData._counter++];);if(ze[De.name]){for(de=0;de<Me.length&&(Me[de]||{}).name!==De.name;de++);vt.push({type:"replace",index:de,value:De}),ht.unshift({type:"replace",index:de,value:Me[de]})}else me=Math.max(0,Math.min(Ne[Oe].index,et)),vt.push({type:"insert",index:me,value:De}),ht.unshift({type:"delete",index:me}),et++}var $e=n.modifyFrames,wt=n.modifyFrames,Pt=[Te,ht],Ot=[Te,vt];return s&&s.add(Te,$e,Pt,wt,Ot),n.modifyFrames(Te,vt)},z.deleteFrames=function(Te,Ae){if(Te=T.getGraphDiv(Te),!T.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te);var Se,Oe,De=Te._transitionData._frames,de=[],me=[];if(!Ae)for(Ae=[],Se=0;Se<De.length;Se++)Ae.push(Se);for((Ae=Ae.slice()).sort(),Se=Ae.length-1;Se>=0;Se--)Oe=Ae[Se],de.push({type:"delete",index:Oe}),me.unshift({type:"insert",index:Oe,value:De[Oe]});var Me=n.modifyFrames,ze=n.modifyFrames,Pe=[Te,me],Ne=[Te,de];return s&&s.add(Te,Me,Pe,ze,Ne),n.modifyFrames(Te,de)},z.addTraces=function Te(Ae,Se,Oe){Ae=T.getGraphDiv(Ae);var De,de,me=[],Me=z.deleteTraces,ze=Te,Pe=[Ae,me],Ne=[Ae,Se];for(function(Ve,Ye,at){var rt,dt;if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(Ye===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ye)||(Ye=[Ye]),rt=0;rt<Ye.length;rt++)if(typeof(dt=Ye[rt])!="object"||Array.isArray(dt)||dt===null)throw new Error("all values in traces array must be non-array objects");if(at===void 0||Array.isArray(at)||(at=[at]),at!==void 0&&at.length!==Ye.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Ae,Se,Oe),Array.isArray(Se)||(Se=[Se]),Se=Se.map(function(Ve){return T.extendFlat({},Ve)}),y.cleanData(Se),De=0;De<Se.length;De++)Ae.data.push(Se[De]);for(De=0;De<Se.length;De++)me.push(-Se.length+De);if(Oe===void 0)return de=z.redraw(Ae),s.add(Ae,Me,Pe,ze,Ne),de;Array.isArray(Oe)||(Oe=[Oe]);try{j(Ae,me,Oe)}catch(Ve){throw Ae.data.splice(Ae.data.length-Se.length,Se.length),Ve}return s.startSequence(Ae),s.add(Ae,Me,Pe,ze,Ne),de=z.moveTraces(Ae,me,Oe),s.stopSequence(Ae),de},z.deleteTraces=function Te(Ae,Se){Ae=T.getGraphDiv(Ae);var Oe,De,de=[],me=z.addTraces,Me=Te,ze=[Ae,de,Se],Pe=[Ae,Se];if(Se===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Se)||(Se=[Se]),R(Ae,Se,"indices"),(Se=P(Se,Ae.data.length-1)).sort(T.sorterDes),Oe=0;Oe<Se.length;Oe+=1)De=Ae.data.splice(Se[Oe],1)[0],de.push(De);var Ne=z.redraw(Ae);return s.add(Ae,me,ze,Me,Pe),Ne},z.extendTraces=function Te(Ae,Se,Oe,De){var de=D(Ae=T.getGraphDiv(Ae),Se,Oe,De,function(ze,Pe,Ne){var Ve,Ye;if(T.isTypedArray(ze))if(Ne<0){var at=new ze.constructor(0),rt=N(ze,Pe);Ne<0?(Ve=rt,Ye=at):(Ve=at,Ye=rt)}else if(Ve=new ze.constructor(Ne),Ye=new ze.constructor(ze.length+Pe.length-Ne),Ne===Pe.length)Ve.set(Pe),Ye.set(ze);else if(Ne<Pe.length){var dt=Pe.length-Ne;Ve.set(Pe.subarray(dt)),Ye.set(ze),Ye.set(Pe.subarray(0,dt),ze.length)}else{var vt=Ne-Pe.length,ht=ze.length-vt;Ve.set(ze.subarray(ht)),Ve.set(Pe,vt),Ye.set(ze.subarray(0,ht))}else Ve=ze.concat(Pe),Ye=Ne>=0&&Ne<Ve.length?Ve.splice(0,Ve.length-Ne):[];return[Ve,Ye]}),me=z.redraw(Ae),Me=[Ae,de.update,Oe,de.maxPoints];return s.add(Ae,z.prependTraces,Me,Te,arguments),me},z.moveTraces=function Te(Ae,Se,Oe){var De,de=[],me=[],Me=Te,ze=Te,Pe=[Ae=T.getGraphDiv(Ae),Oe,Se],Ne=[Ae,Se,Oe];if(j(Ae,Se,Oe),Se=Array.isArray(Se)?Se:[Se],Oe===void 0)for(Oe=[],De=0;De<Se.length;De++)Oe.push(-Se.length+De);for(Oe=Array.isArray(Oe)?Oe:[Oe],Se=P(Se,Ae.data.length-1),Oe=P(Oe,Ae.data.length-1),De=0;De<Ae.data.length;De++)Se.indexOf(De)===-1&&de.push(Ae.data[De]);for(De=0;De<Se.length;De++)me.push({newIndex:Oe[De],trace:Ae.data[Se[De]]});for(me.sort(function(Ye,at){return Ye.newIndex-at.newIndex}),De=0;De<me.length;De+=1)de.splice(me[De].newIndex,0,me[De].trace);Ae.data=de;var Ve=z.redraw(Ae);return s.add(Ae,Me,Pe,ze,Ne),Ve},z.prependTraces=function Te(Ae,Se,Oe,De){var de=D(Ae=T.getGraphDiv(Ae),Se,Oe,De,function(ze,Pe,Ne){var Ve,Ye;if(T.isTypedArray(ze))if(Ne<=0){var at=new ze.constructor(0),rt=N(Pe,ze);Ne<0?(Ve=rt,Ye=at):(Ve=at,Ye=rt)}else if(Ve=new ze.constructor(Ne),Ye=new ze.constructor(ze.length+Pe.length-Ne),Ne===Pe.length)Ve.set(Pe),Ye.set(ze);else if(Ne<Pe.length){var dt=Pe.length-Ne;Ve.set(Pe.subarray(0,dt)),Ye.set(Pe.subarray(dt)),Ye.set(ze,dt)}else{var vt=Ne-Pe.length;Ve.set(Pe),Ve.set(ze.subarray(0,vt),Pe.length),Ye.set(ze.subarray(vt))}else Ve=Pe.concat(ze),Ye=Ne>=0&&Ne<Ve.length?Ve.splice(Ne,Ve.length):[];return[Ve,Ye]}),me=z.redraw(Ae),Me=[Ae,de.update,Oe,de.maxPoints];return s.add(Ae,z.extendTraces,Me,Te,arguments),me},z.newPlot=function(Te,Ae,Se,Oe){return Te=T.getGraphDiv(Te),n.cleanPlot([],{},Te._fullData||[],Te._fullLayout||{}),n.purge(Te),z._doPlot(Te,Ae,Se,Oe)},z._doPlot=function(Te,Ae,Se,Oe){var De;if(Te=T.getGraphDiv(Te),h.init(Te),T.isPlainObject(Ae)){var de=Ae;Ae=de.data,Se=de.layout,Oe=de.config,De=de.frames}if(h.triggerHandler(Te,"plotly_beforeplot",[Ae,Se,Oe])===!1)return Promise.reject();Ae||Se||T.isPlotDiv(Te)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Te),C(Te,Oe),Se||(Se={}),M.select(Te).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(Te._promises)||(Te._promises=[]);var me=(Te.data||[]).length===0&&Array.isArray(Ae);Array.isArray(Ae)&&(y.cleanData(Ae),me?Te.data=Ae:Te.data.push.apply(Te.data,Ae),Te.empty=!1),Te.layout&&!me||(Te.layout=y.cleanLayout(Se)),n.supplyDefaults(Te);var Me=Te._fullLayout,ze=Me._has("cartesian");Me._replotting=!0,(me||Me._shouldCreateBgLayer)&&(function(ht){var et=M.select(ht),$e=ht._fullLayout;if($e._calcInverseTransform=Ee,$e._calcInverseTransform(ht),$e._container=et.selectAll(".plot-container").data([0]),$e._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),$e._paperdiv=$e._container.selectAll(".svg-container").data([0]),$e._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),$e._glcontainer=$e._paperdiv.selectAll(".gl-container").data([{}]),$e._glcontainer.enter().append("div").classed("gl-container",!0),$e._paperdiv.selectAll(".main-svg").remove(),$e._paperdiv.select(".modebar-container").remove(),$e._paper=$e._paperdiv.insert("svg",":first-child").classed("main-svg",!0),$e._toppaper=$e._paperdiv.append("svg").classed("main-svg",!0),$e._modebardiv=$e._paperdiv.append("div"),delete $e._modeBar,$e._hoverpaper=$e._paperdiv.append("svg").classed("main-svg",!0),!$e._uid){var wt={};M.selectAll("defs").each(function(){this.id&&(wt[this.id.split("-")[1]]=1)}),$e._uid=T.randstr(wt)}$e._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),$e._defs=$e._paper.append("defs").attr("id","defs-"+$e._uid),$e._clips=$e._defs.append("g").classed("clips",!0),$e._topdefs=$e._toppaper.append("defs").attr("id","topdefs-"+$e._uid),$e._topclips=$e._topdefs.append("g").classed("clips",!0),$e._bgLayer=$e._paper.append("g").classed("bglayer",!0),$e._draggers=$e._paper.append("g").classed("draglayer",!0);var Pt=$e._paper.append("g").classed("layer-below",!0);$e._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),$e._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),$e._cartesianlayer=$e._paper.append("g").classed("cartesianlayer",!0),$e._polarlayer=$e._paper.append("g").classed("polarlayer",!0),$e._smithlayer=$e._paper.append("g").classed("smithlayer",!0),$e._ternarylayer=$e._paper.append("g").classed("ternarylayer",!0),$e._geolayer=$e._paper.append("g").classed("geolayer",!0),$e._funnelarealayer=$e._paper.append("g").classed("funnelarealayer",!0),$e._pielayer=$e._paper.append("g").classed("pielayer",!0),$e._iciclelayer=$e._paper.append("g").classed("iciclelayer",!0),$e._treemaplayer=$e._paper.append("g").classed("treemaplayer",!0),$e._sunburstlayer=$e._paper.append("g").classed("sunburstlayer",!0),$e._indicatorlayer=$e._toppaper.append("g").classed("indicatorlayer",!0),$e._glimages=$e._paper.append("g").classed("glimages",!0);var Ot=$e._toppaper.append("g").classed("layer-above",!0);$e._imageUpperLayer=Ot.append("g").classed("imagelayer",!0),$e._shapeUpperLayer=Ot.append("g").classed("shapelayer",!0),$e._selectionLayer=$e._toppaper.append("g").classed("selectionlayer",!0),$e._infolayer=$e._toppaper.append("g").classed("infolayer",!0),$e._menulayer=$e._toppaper.append("g").classed("menulayer",!0),$e._zoomlayer=$e._toppaper.append("g").classed("zoomlayer",!0),$e._hoverlayer=$e._hoverpaper.append("g").classed("hoverlayer",!0),$e._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ht.emit("plotly_framework")}(Te),Me._shouldCreateBgLayer&&delete Me._shouldCreateBgLayer),u.initGradients(Te),u.initPatterns(Te),me&&r.saveShowSpikeInitial(Te);var Pe=!Te.calcdata||Te.calcdata.length!==(Te._fullData||[]).length;Pe&&n.doCalcdata(Te);for(var Ne=0;Ne<Te.calcdata.length;Ne++)Te.calcdata[Ne][0].trace=Te._fullData[Ne];Te._context.responsive?Te._responsiveChartHandler||(Te._responsiveChartHandler=function(){T.isHidden(Te)||n.resize(Te)},window.addEventListener("resize",Te._responsiveChartHandler)):T.clearResponsive(Te);var Ve=T.extendFlat({},Me._size),Ye=0;function at(){if(n.clearAutoMarginIds(Te),m.drawMarginPushers(Te),r.allowAutoMargin(Te),Te._fullLayout.title.text&&Te._fullLayout.title.automargin&&n.allowAutoMargin(Te,"title.automargin"),Me._has("pie"))for(var ht=Te._fullData,et=0;et<ht.length;et++){var $e=ht[et];$e.type==="pie"&&$e.automargin&&n.allowAutoMargin(Te,"pie."+$e.uid+".automargin")}return n.doAutoMargin(Te),n.previousPromises(Te)}function rt(){Te._transitioning||(m.doAutoRangeAndConstraints(Te),me&&r.saveRangeInitial(Te),t.getComponentMethod("rangeslider","calcAutorange")(Te))}var dt=[n.previousPromises,function(){if(De)return z.addFrames(Te,De)},function ht(){for(var et=Me._basePlotModules,$e=0;$e<et.length;$e++)et[$e].drawFramework&&et[$e].drawFramework(Te);!Me._glcanvas&&Me._has("gl")&&(Me._glcanvas=Me._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(At){return At.key}),Me._glcanvas.enter().append("canvas").attr("class",function(At){return"gl-canvas gl-canvas-"+At.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var wt=Te._context.plotGlPixelRatio;if(Me._glcanvas){Me._glcanvas.attr("width",Me.width*wt).attr("height",Me.height*wt).style("width",Me.width+"px").style("height",Me.height+"px");var Pt=Me._glcanvas.data()[0].regl;if(Pt&&(Math.floor(Me.width*wt)!==Pt._gl.drawingBufferWidth||Math.floor(Me.height*wt)!==Pt._gl.drawingBufferHeight)){var Ot="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ye)return T.log(Ot+" Clearing graph and plotting again."),n.cleanPlot([],{},Te._fullData,Me),n.supplyDefaults(Te),Me=Te._fullLayout,n.doCalcdata(Te),Ye++,ht();T.error(Ot)}}return Me.modebar.orientation==="h"?Me._modebardiv.style("height",null).style("width","100%"):Me._modebardiv.style("width",null).style("height",Me.height+"px"),n.previousPromises(Te)},at,function(){if(n.didMarginChange(Ve,Me._size))return T.syncOrAsync([at,m.layoutStyles],Te)}];ze&&dt.push(function(){if(Pe)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),rt],Te);rt()}),dt.push(m.layoutStyles),ze&&dt.push(function(){return r.draw(Te,me?"":"redraw")},function(ht){var et=ht._fullLayout._insideTickLabelsUpdaterange;if(et)return ht._fullLayout._insideTickLabelsUpdaterange=void 0,X(ht,et).then(function(){r.saveRangeInitial(ht,!0)})}),dt.push(m.drawData,m.finalDraw,c,n.addLinks,n.rehover,n.redrag,n.reselect,n.doAutoMargin,n.previousPromises);var vt=T.syncOrAsync(dt,Te);return vt&&vt.then||(vt=Promise.resolve()),vt.then(function(){return w(Te),Te})},z.purge=function(Te){var Ae=(Te=T.getGraphDiv(Te))._fullLayout||{},Se=Te._fullData||[];return n.cleanPlot([],{},Se,Ae),n.purge(Te),h.purge(Te),Ae._container&&Ae._container.remove(),delete Te._context,Te},z.react=function(Te,Ae,Se,Oe){var De,de;Te=T.getGraphDiv(Te),y.clearPromiseQueue(Te);var me=Te._fullData,Me=Te._fullLayout;if(T.isPlotDiv(Te)&&me&&Me){if(T.isPlainObject(Ae)){var ze=Ae;Ae=ze.data,Se=ze.layout,Oe=ze.config,De=ze.frames}var Pe=!1;if(Oe){var Ne=T.extendDeep({},Te._context);Te._context=void 0,C(Te,Oe),Pe=fe(Ne,Te._context)}Te.data=Ae||[],y.cleanData(Te.data),Te.layout=Se||{},y.cleanLayout(Te.layout),function(tt,Re,Fe,nt){var We,ct,pt,gt,ut,kt,yt,Mt,Lt,Ct,It=nt._preGUI,Wt=[],Nt={},Bt={};for(We in It){if(ut=ve(We,xe)){if(Lt=ut.head,Ct=ut.tail,ct=ut.attr||Lt+".uirevision",(gt=(pt=b(nt,ct).get())&&ge(ct,Re))&&gt===pt){if((kt=It[We])===null&&(kt=void 0),se(Mt=(yt=b(Re,We)).get(),kt)){Mt===void 0&&Ct==="autorange"&&Wt.push(Lt),yt.set(F(b(nt,We).get()));continue}if(Ct==="autorange"||Ct.substr(0,6)==="range["){var Ht=It[Lt+".range[0]"],Qt=It[Lt+".range[1]"],Cn=It[Lt+".autorange"];if(Cn||Cn===null&&Ht===null&&Qt===null){if(!(Lt in Nt)){var Tn=b(Re,Lt).get();Nt[Lt]=Tn&&(Tn.autorange||Tn.autorange!==!1&&(!Tn.range||Tn.range.length!==2))}if(Nt[Lt]){yt.set(F(b(nt,We).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+We);delete It[We],ut&&ut.tail.substr(0,6)==="range["&&(Bt[ut.head]=1)}for(var hn=0;hn<Wt.length;hn++){var Zt=Wt[hn];if(Bt[Zt]){var an=b(Re,Zt).get();an&&delete an.autorange}}var $t=nt._tracePreGUI;for(var ln in $t){var mn,xn=$t[ln],Pn=null;for(We in xn){if(!Pn){var Mn=we(ln,Fe);if(Mn<0){delete $t[ln];break}var _n=_e(ln,tt,(mn=Fe[Mn]._fullInput).index);if(_n<0){delete $t[ln];break}Pn=tt[_n]}if(ut=ve(We,be)){if(ut.attr?gt=(pt=b(nt,ut.attr).get())&&ge(ut.attr,Re):(pt=mn.uirevision,(gt=Pn.uirevision)===void 0&&(gt=Re.uirevision)),gt&&gt===pt&&((kt=xn[We])===null&&(kt=void 0),se(Mt=(yt=b(Pn,We)).get(),kt))){yt.set(F(b(mn,We).get()));continue}}else T.warn("unrecognized GUI edit: "+We+" in trace uid "+ln);delete xn[We]}}}(Te.data,Te.layout,me,Me),n.supplyDefaults(Te,{skipUpdateCalc:!0});var Ve=Te._fullData,Ye=Te._fullLayout,at=Ye.datarevision===void 0,rt=Ye.transition,dt=function(tt,Re,Fe,nt,We){var ct=_.layoutFlags();return ct.arrays={},ct.rangesAltered={},ct.nChanges=0,ct.nChangesAnim=0,ie(Re,Fe,[],{getValObject:function(pt){return a.getLayoutValObject(Fe,pt)},flags:ct,immutable:nt,transition:We,gd:tt}),(ct.plot||ct.calc)&&(ct.layoutReplot=!0),We&&ct.nChanges&&ct.nChangesAnim&&(ct.anim=ct.nChanges===ct.nChangesAnim?"all":"some"),ct}(Te,Me,Ye,at,rt),vt=dt.newDataRevision,ht=function(tt,Re,Fe,nt,We,ct){var pt=Re.length===Fe.length;if(!We&&!pt)return{fullReplot:!0,calc:!0};var gt,ut,kt=_.traceFlags();kt.arrays={},kt.nChanges=0,kt.nChangesAnim=0;var yt={getValObject:function(Lt){var Ct=a.getTraceValObject(ut,Lt);return!ut._module.animatable&&Ct.anim&&(Ct.anim=!1),Ct},flags:kt,immutable:nt,transition:We,newDataRevision:ct,gd:tt},Mt={};for(gt=0;gt<Re.length;gt++)if(Fe[gt]){if(ut=Fe[gt]._fullInput,n.hasMakesDataTransform(ut)&&(ut=Fe[gt]),Mt[ut.uid])continue;Mt[ut.uid]=1,ie(Re[gt]._fullInput,ut,[],yt)}return(kt.calc||kt.plot)&&(kt.fullReplot=!0),We&&kt.nChanges&&kt.nChangesAnim&&(kt.anim=kt.nChanges===kt.nChangesAnim&&pt?"all":"some"),kt}(Te,me,Ve,at,rt,vt);if(ce(Te)&&(dt.layoutReplot=!0),ht.calc||dt.calc){Te.calcdata=void 0;for(var et=Object.getOwnPropertyNames(Ye),$e=0;$e<et.length;$e++){var wt=et[$e],Pt=wt.substring(0,5);if(Pt==="xaxis"||Pt==="yaxis"){var Ot=Ye[wt]._emptyCategories;Ot&&Ot()}}}else n.supplyDefaultsUpdateCalc(Te.calcdata,Ve);var At=[];if(De&&(Te._transitionData={},n.createTransitionData(Te),At.push(function(){return z.addFrames(Te,De)})),Ye.transition&&!Pe&&(ht.anim||dt.anim))dt.ticks&&At.push(m.doTicksRelayout),n.doCalcdata(Te),m.doAutoRangeAndConstraints(Te),At.push(function(){return n.transitionFromReact(Te,ht,dt,Me)});else if(ht.fullReplot||dt.layoutReplot||Pe)Te._fullLayout._skipDefaults=!0,At.push(z._doPlot);else{for(var He in dt.arrays){var Ze=dt.arrays[He];if(Ze.length){var Be=t.getComponentMethod(He,"drawOne");if(Be!==T.noop)for(var Ge=0;Ge<Ze.length;Ge++)Be(Te,Ze[Ge]);else{var it=t.getComponentMethod(He,"draw");if(it===T.noop)throw new Error("cannot draw components: "+He);it(Te)}}}At.push(n.previousPromises),ht.style&&At.push(m.doTraceStyle),(ht.colorbars||dt.colorbars)&&At.push(m.doColorBars),dt.legend&&At.push(m.doLegend),dt.layoutstyle&&At.push(m.layoutStyles),dt.axrange&&Q(At),dt.ticks&&At.push(m.doTicksRelayout),dt.modebar&&At.push(m.doModeBar),dt.camera&&At.push(m.doCamera),At.push(w)}At.push(n.rehover,n.redrag,n.reselect),(de=T.syncOrAsync(At,Te))&&de.then||(de=Promise.resolve(Te))}else de=z.newPlot(Te,Ae,Se,Oe);return de.then(function(){return Te.emit("plotly_react",{data:Ae,layout:Se}),Te})},z.redraw=function(Te){if(Te=T.getGraphDiv(Te),!T.isPlotDiv(Te))throw new Error("This element is not a Plotly plot: "+Te);return y.cleanData(Te.data),y.cleanLayout(Te.layout),Te.calcdata=void 0,z._doPlot(Te).then(function(){return Te.emit("plotly_redraw"),Te})},z.relayout=X,z.restyle=W,z.setPlotConfig=function(Te){return T.extendFlat(g,Te)},z.update=he,z._guiRelayout=pe(X),z._guiRestyle=pe(W),z._guiUpdate=pe(he),z._storeDirectGUIEdit=function(Te,Ae,Se){for(var Oe in Se)U(Oe,b(Te,Oe).get(),Se[Oe],Ae)}},20556:function(ee){var z={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function M(k,o){for(var T in k){var b=k[T];b.valType?o[T]=b.dflt:(o[T]||(o[T]={}),M(b,o[T]))}})(z,e),ee.exports={configAttributes:z,dfltConfig:e}},73060:function(ee,z,e){var M=e(24040),k=e(3400),o=e(45464),T=e(64859),b=e(16672),h=e(85656),s=e(20556).configAttributes,t=e(67824),a=k.extendDeepAll,n=k.isPlainObject,r=k.isArrayOrTypedArray,i=k.nestedProperty,l=k.valObjectMeta,u="_isSubplotObj",p="_isLinkedToArray",c="_deprecated",x=[u,p,"_arrayAttrRegexps",c];function d(f,S,w){if(!f)return!1;if(f._isLinkedToArray){if(g(S[w]))w++;else if(w<S.length)return!1}for(;w<S.length;w++){var E=f[S[w]];if(!n(E)||(f=E,w===S.length-1))break;if(f._isLinkedToArray){if(!g(S[++w]))return!1}else if(f.valType==="info_array"){var O=S[++w];if(!g(O))return!1;var C=f.items;if(Array.isArray(C)){if(O>=C.length)return!1;if(f.dimensions===2){if(w++,S.length===w)return f;var P=S[w];if(!g(P))return!1;f=C[O][P]}else f=C[O]}else f=C}}return f}function g(f){return f===Math.round(f)&&f>=0}function v(){var f,S,w={};for(f in a(w,T),M.subplotsRegistry)if((S=M.subplotsRegistry[f]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(w,S,S.attr[E]);else m(w,S,S.attr==="subplot"?S.name:S.attr);for(f in M.componentsRegistry){var O=(S=M.componentsRegistry[f]).schema;if(O&&(O.subplots||O.layout)){var C=O.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete w.yaxis[P];delete w.xaxis.shift,delete w.xaxis.autoshift}else S.name==="colorscale"?a(w,S.layoutAttributes):S.layoutAttributes&&_(w,S.layoutAttributes,S.name)}return{layoutAttributes:y(w)}}function y(f){return function(S){z.crawl(S,function(w,E,O){z.isValObject(w)?w.arrayOk!==!0&&w.valType!=="data_array"||(O[E+"src"]={valType:"string",editType:"none"}):n(w)&&(w.role="object")})}(f),function(S){z.crawl(S,function(w,E,O){if(w){var C=w[p];C&&(delete w[p],O[E]={items:{}},O[E].items[C]=w,O[E].role="object")}})}(f),function(S){(function w(E){for(var O in E)if(n(E[O]))w(E[O]);else if(Array.isArray(E[O]))for(var C=0;C<E[O].length;C++)w(E[O][C]);else E[O]instanceof RegExp&&(E[O]=E[O].toString())})(S)}(f),f}function m(f,S,w){var E=i(f,w),O=a({},S.layoutAttributes);O[u]=!0,E.set(O)}function _(f,S,w){var E=i(f,w);E.set(a(E.get()||{},S))}z.IS_SUBPLOT_OBJ=u,z.IS_LINKED_TO_ARRAY=p,z.DEPRECATED=c,z.UNDERSCORE_ATTRS=x,z.get=function(){var f={};M.allTypes.forEach(function(E){f[E]=function(O){var C,P;P=(C=M.modules[O]._module).basePlotModule;var R={type:null},j=a({},o),D=a({},C.attributes);z.crawl(D,function(F,V,U,te,J){i(j,J).set(void 0),F===void 0&&i(D,J).set(void 0)}),a(R,j),M.traceIs(O,"noOpacity")&&delete R.opacity,M.traceIs(O,"showLegend")||(delete R.showlegend,delete R.legendgroup),M.traceIs(O,"noHover")&&(delete R.hoverinfo,delete R.hoverlabel),C.selectPoints||delete R.selectedpoints,a(R,D),P.attributes&&a(R,P.attributes),R.type=O;var N={meta:C.meta||{},categories:C.categories||{},animatable:!!C.animatable,type:O,attributes:y(R)};if(C.layoutAttributes){var W={};a(W,C.layoutAttributes),N.layoutAttributes=y(W)}return C.animatable||z.crawl(N,function(F){z.isValObject(F)&&"anim"in F&&delete F.anim}),N}(E)});var S,w={};return Object.keys(M.transformsRegistry).forEach(function(E){w[E]=function(O){var C=M.transformsRegistry[O],P=a({},C.attributes);return Object.keys(M.componentsRegistry).forEach(function(R){var j=M.componentsRegistry[R];j.schema&&j.schema.transforms&&j.schema.transforms[O]&&Object.keys(j.schema.transforms[O]).forEach(function(D){_(P,j.schema.transforms[O][D],D)})}),{attributes:y(P)}}(E)}),{defs:{valObjects:l,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:f,layout:v(),transforms:w,frames:(S={frames:a({},b)},y(S),S.frames),animation:y(h),config:y(s)}},z.crawl=function(f,S,w,E){var O=w||0;E=E||"",Object.keys(f).forEach(function(C){var P=f[C];if(x.indexOf(C)===-1){var R=(E?E+".":"")+C;S(P,C,f,O,R),z.isValObject(P)||n(P)&&C!=="impliedEdits"&&z.crawl(P,S,O+1,R)}})},z.isValObject=function(f){return f&&f.valType!==void 0},z.findArrayAttributes=function(f){var S,w,E=[],O=[],C=[];function P(F,V,U,te){O=O.slice(0,te).concat([V]),C=C.slice(0,te).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(O[te-1]!=="colorbar"||V!=="ticktext"&&V!=="tickvals")&&R(S,0,"")}function R(F,V,U){var te=F[O[V]],J=U+O[V];if(V===O.length-1)r(te)&&E.push(w+J);else if(C[V]){if(Array.isArray(te))for(var X=0;X<te.length;X++)n(te[X])&&R(te[X],V+1,J+"["+X+"].")}else n(te)&&R(te,V+1,J+".")}S=f,w="",z.crawl(o,P),f._module&&f._module.attributes&&z.crawl(f._module.attributes,P);var j=f.transforms;if(j)for(var D=0;D<j.length;D++){var N=j[D],W=N._module;W&&(w="transforms["+D+"].",S=N,z.crawl(W.attributes,P))}return E},z.getTraceValObject=function(f,S){var w,E,O=S[0],C=1;if(O==="transforms"){if(S.length===1)return o.transforms;var P=f.transforms;if(!Array.isArray(P)||!P.length)return!1;var R=S[1];if(!g(R)||R>=P.length)return!1;E=(w=(M.transformsRegistry[P[R].type]||{}).attributes)&&w[S[2]],C=3}else{var j=f._module;if(j||(j=(M.modules[f.type||o.type.dflt]||{})._module),!j)return!1;if(!(E=(w=j.attributes)&&w[O])){var D=j.basePlotModule;D&&D.attributes&&(E=D.attributes[O])}E||(E=o[O])}return d(E,S,C)},z.getLayoutValObject=function(f,S){var w=function(E,O){var C,P,R,j,D=E._basePlotModules;if(D){var N;for(C=0;C<D.length;C++){if((R=D[C]).attrRegex&&R.attrRegex.test(O)){if(R.layoutAttrOverrides)return R.layoutAttrOverrides;!N&&R.layoutAttributes&&(N=R.layoutAttributes)}var W=R.baseLayoutAttrOverrides;if(W&&O in W)return W[O]}if(N)return N}var F=E._modules;if(F){for(C=0;C<F.length;C++)if((j=F[C].layoutAttributes)&&O in j)return j[O]}for(P in M.componentsRegistry){if((R=M.componentsRegistry[P]).name==="colorscale"&&O.indexOf("coloraxis")===0)return R.layoutAttributes[O];if(!R.schema&&O===R.name)return R.layoutAttributes}return O in T&&T[O]}(f,S[0]);return d(w,S,1)}},31780:function(ee,z,e){var M=e(3400),k=e(45464),o="templateitemname",T={name:{valType:"string",editType:"none"}};function b(s){return s&&typeof s=="string"}function h(s){var t=s.length-1;return s.charAt(t)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}T[o]={valType:"string",editType:"calc"},z.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=T.name,t[o]=T[o],t},z.traceTemplater=function(s){var t,a,n={};for(t in s)a=s[t],Array.isArray(a)&&a.length&&(n[t]=0);return{newTrace:function(r){var i={type:t=M.coerce(r,{},k,"type"),_template:null};if(t in n){a=s[t];var l=n[t]%a.length;n[t]++,i._template=a[l]}return i}}},z.newContainer=function(s,t,a){var n=s._template,r=n&&(n[t]||a&&n[a]);return M.isPlainObject(r)||(r=null),s[t]={_template:r}},z.arrayTemplater=function(s,t,a){var n=s._template,r=n&&n[h(t)],i=n&&n[t];Array.isArray(i)&&i.length||(i=[]);var l={};return{newItem:function(u){var p={name:u.name,_input:u},c=p[o]=u[o];if(!b(c))return p._template=r,p;for(var x=0;x<i.length;x++){var d=i[x];if(d.name===c)return l[c]=1,p._template=d,p}return p[a]=u[a]||!1,p._template=!1,p},defaultItems:function(){for(var u=[],p=0;p<i.length;p++){var c=i[p],x=c.name;if(b(x)&&!l[x]){var d={_template:c,name:x,_input:{_templateitemname:x}};d[o]=c[o],u.push(d),l[x]=1}}return u}}},z.arrayDefaultKey=h,z.arrayEditor=function(s,t,a){var n=(M.nestedProperty(s,t).get()||[]).length,r=a._index,i=r>=n&&(a._input||{})._templateitemname;i&&(r=n);var l,u=t+"["+r+"]";function p(){l={},i&&(l[u]={},l[u][o]=i)}function c(d,g){i?M.nestedProperty(l[u],d).set(g):l[u+"."+d]=g}function x(){var d=l;return p(),d}return p(),{modifyBase:function(d,g){l[d]=g},modifyItem:c,getUpdateObj:x,applyUpdate:function(d,g){d&&c(d,g);var v=x();for(var y in v)M.nestedProperty(s,y).set(v[y])}}}},39172:function(ee,z,e){var M=e(33428),k=e(24040),o=e(7316),T=e(3400),b=e(72736),h=e(73696),s=e(76308),t=e(43616),a=e(81668),n=e(45460),r=e(54460),i=e(84284),l=e(71888),u=l.enforce,p=l.clean,c=e(19280).doAutoRange,x="start";function d(_,f,S){for(var w=0;w<S.length;w++){var E=S[w][0],O=S[w][1];if(!(E[0]>=_[1]||E[1]<=_[0])&&O[0]<f[1]&&O[1]>f[0])return!0}return!1}function g(_){var f,S,w,E,O,C,P=_._fullLayout,R=P._size,j=R.p,D=r.list(_,"",!0);if(P._paperdiv.style({width:_._context.responsive&&P.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":P.width+"px",height:_._context.responsive&&P.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(t.setSize,P.width,P.height),_._context.setBackground(_,P.paper_bgcolor),z.drawMainTitle(_),n.manage(_),!P._has("cartesian"))return o.previousPromises(_);function N(Pe,Ne,Ve){var Ye=Pe._lw/2;return Pe._id.charAt(0)==="x"?Ne?Ve==="top"?Ne._offset-j-Ye:Ne._offset+Ne._length+j+Ye:R.t+R.h*(1-(Pe.position||0))+Ye%1:Ne?Ve==="right"?Ne._offset+Ne._length+j+Ye:Ne._offset-j-Ye:R.l+R.w*(Pe.position||0)+Ye%1}for(f=0;f<D.length;f++){var W=(E=D[f])._anchorAxis;E._linepositions={},E._lw=t.crispRound(_,E.linewidth,1),E._mainLinePosition=N(E,W,E.side),E._mainMirrorPosition=E.mirror&&W?N(E,W,i.OPPOSITE_SIDE[E.side]):null}var F=[],V=[],U=[],te=s.opacity(P.paper_bgcolor)===1&&s.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(S in P._plots)if((w=P._plots[S]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var J=w.xaxis.domain,X=w.yaxis.domain,K=w.plotgroup;if(d(J,X,U)){var Q=K.node(),Z=w.bg=T.ensureSingle(K,"rect","bg");Q.insertBefore(Z.node(),Q.childNodes[0]),V.push(S)}else K.select("rect.bg").remove(),U.push([J,X]),te||(F.push(S),V.push(S))}var re,oe,ae,ce,he,pe,xe,be,ve,ge,we,_e,se,ie=P._bgLayer.selectAll(".bg").data(F);for(ie.enter().append("rect").classed("bg",!0),ie.exit().remove(),ie.each(function(Pe){P._plots[Pe].bg=M.select(this)}),f=0;f<V.length;f++)w=P._plots[V[f]],O=w.xaxis,C=w.yaxis,w.bg&&O._offset!==void 0&&C._offset!==void 0&&w.bg.call(t.setRect,O._offset-j,C._offset-j,O._length+2*j,C._length+2*j).call(s.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(S in P._plots){w=P._plots[S],O=w.xaxis,C=w.yaxis;var fe,Ee,Te=w.clipId="clip"+P._uid+S+"plot",Ae=T.ensureSingleById(P._clips,"clipPath",Te,function(Pe){Pe.classed("plotclip",!0).append("rect")});w.clipRect=Ae.select("rect").attr({width:O._length,height:C._length}),t.setTranslate(w.plot,O._offset,C._offset),w._hasClipOnAxisFalse?(fe=null,Ee=Te):(fe=Te,Ee=null),t.setClipUrl(w.plot,fe,_),w.layerClipId=Ee}function Se(Pe){return"M"+re+","+Pe+"H"+oe}function Oe(Pe){return"M"+O._offset+","+Pe+"h"+O._length}function De(Pe){return"M"+Pe+","+be+"V"+xe}function de(Pe){return C._shift!==void 0&&(Pe+=C._shift),"M"+Pe+","+C._offset+"v"+C._length}function me(Pe,Ne,Ve){if(!Pe.showline||S!==Pe._mainSubplot)return"";if(!Pe._anchorAxis)return Ve(Pe._mainLinePosition);var Ye=Ne(Pe._mainLinePosition);return Pe.mirror&&(Ye+=Ne(Pe._mainMirrorPosition)),Ye}for(S in P._plots){w=P._plots[S],O=w.xaxis,C=w.yaxis;var Me="M0,0";v(O,S)&&(he=m(O,"left",C,D),re=O._offset-(he?j+he:0),pe=m(O,"right",C,D),oe=O._offset+O._length+(pe?j+pe:0),ae=N(O,C,"bottom"),ce=N(O,C,"top"),!(se=!O._anchorAxis||S!==O._mainSubplot)||O.mirror!=="allticks"&&O.mirror!=="all"||(O._linepositions[S]=[ae,ce]),Me=me(O,Se,Oe),se&&O.showline&&(O.mirror==="all"||O.mirror==="allticks")&&(Me+=Se(ae)+Se(ce)),w.xlines.style("stroke-width",O._lw+"px").call(s.stroke,O.showline?O.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",Me);var ze="M0,0";v(C,S)&&(we=m(C,"bottom",O,D),xe=C._offset+C._length+(we?j:0),_e=m(C,"top",O,D),be=C._offset-(_e?j:0),ve=N(C,O,"left"),ge=N(C,O,"right"),!(se=!C._anchorAxis||S!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[S]=[ve,ge]),ze=me(C,De,de),se&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(ze+=De(ve)+De(ge)),w.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",ze)}return r.makeClipPaths(_),o.previousPromises(_)}function v(_,f){return(_.ticks||_.showline)&&(f===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function y(_,f,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var w=S._anchorAxis;if(!w)return!1;var E=i.FROM_BL[f];return S.side===f?w.domain[E]===_.domain[E]:S.mirror&&w.domain[1-E]===_.domain[1-E]}function m(_,f,S,w){if(y(_,f,S))return S._lw;for(var E=0;E<w.length;E++){var O=w[E];if(O._mainAxis===S._mainAxis&&y(_,f,O))return O._lw}return 0}z.layoutStyles=function(_){return T.syncOrAsync([o.doAutoMargin,g],_)},z.drawMainTitle=function(_){var f,S=_._fullLayout.title,w=_._fullLayout,E=function(F){var V=F.title,U="middle";return T.isRightAnchor(V)?U="end":T.isLeftAnchor(V)&&(U=x),U}(w),O=function(F){var V=F.title,U="0em";return T.isTopAnchor(V)?U=i.CAP_SHIFT+"em":T.isMiddleAnchor(V)&&(U=i.MID_SHIFT+"em"),U}(w),C=function(F,V){var U=F.title,te=F._size,J=0;return V!=="0em"&&V?V===i.CAP_SHIFT+"em"&&(J=U.pad.t):J=-U.pad.b,U.y==="auto"?te.t/2:U.yref==="paper"?te.t+te.h-te.h*U.y+J:F.height-F.height*U.y+J}(w,O),P=function(F,V){var U=F.title,te=F._size,J=0;return V===x?J=U.pad.l:V==="end"&&(J=-U.pad.r),U.xref==="paper"?te.l+te.w*U.x+J:F.width*U.x+J}(w,E);if(a.draw(_,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:P,y:C,"text-anchor":E,dy:O}}),S.text&&S.automargin){var R=M.selectAll(".gtitle"),j=t.bBox(R.node()).height,D=function(F,V,U){var te=V.y,J=V.yanchor,X=te>.5?"t":"b",K=F._fullLayout.margin[X],Q=0;return V.yref==="paper"?Q=U+V.pad.t+V.pad.b:V.yref==="container"&&(Q=function(Z,re,oe,ae,ce){var he=0;return oe==="middle"&&(he+=ce/2),Z==="t"?(oe==="top"&&(he+=ce),he+=ae-re*ae):(oe==="bottom"&&(he+=ce),he+=re*ae),he}(X,te,J,F._fullLayout.height,U)+V.pad.t+V.pad.b),Q>K?Q:0}(_,S,j);if(D>0){(function(F,V,U,te){var J="title.automargin",X=F._fullLayout.title,K=X.y>.5?"t":"b",Q={x:X.x,y:X.y,t:0,b:0},Z={};X.yref==="paper"&&function(re,oe,ae,ce,he){var pe=oe.yref==="paper"?re._fullLayout._size.h:re._fullLayout.height,xe=T.isTopAnchor(oe)?ce:ce-he,be=ae==="b"?pe-xe:xe;return!(T.isTopAnchor(oe)&&ae==="t"||T.isBottomAnchor(oe)&&ae==="b")&&be<he}(F,X,K,V,te)?Q[K]=U:X.yref==="container"&&(Z[K]=U,F._fullLayout._reservedMargin[J]=Z),o.allowAutoMargin(F,J),o.autoMargin(F,J,Q)})(_,C,D,j),R.attr({x:P,y:C,"text-anchor":E,dy:(f=S.yanchor,f==="top"?i.CAP_SHIFT+.3+"em":f==="bottom"?"-0.3em":i.MID_SHIFT+"em")}).call(b.positionText,P,C);var N=(S.text.match(b.BR_TAG_ALL)||[]).length;if(N){var W=i.LINE_SPACING*N+i.MID_SHIFT;S.y===0&&(W=-W),R.selectAll(".line").each(function(){var F=+this.getAttribute("dy").slice(0,-2)-W+"em";this.setAttribute("dy",F)})}}}},z.doTraceStyle=function(_){var f,S=_.calcdata,w=[];for(f=0;f<S.length;f++){var E=S[f],O=E[0]||{},C=O.trace||{},P=C._module||{},R=P.arraysToCalcdata;R&&R(E,C);var j=P.editStyle;j&&w.push({fn:j,cd0:O})}if(w.length){for(f=0;f<w.length;f++){var D=w[f];D.fn(_,D.cd0)}h(_),z.redrawReglTraces(_)}return o.style(_),k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},z.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),o.previousPromises(_)},z.layoutReplot=function(_){var f=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",f)},z.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},z.doTicksRelayout=function(_){return r.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),h(_),z.redrawReglTraces(_)),z.drawMainTitle(_),o.previousPromises(_)},z.doModeBar=function(_){var f=_._fullLayout;n.manage(_);for(var S=0;S<f._basePlotModules.length;S++){var w=f._basePlotModules[S].updateFx;w&&w(_)}return o.previousPromises(_)},z.doCamera=function(_){for(var f=_._fullLayout,S=f._subplots.gl3d,w=0;w<S.length;w++){var E=f[S[w]];E._scene.setViewport(E)}},z.drawData=function(_){var f=_._fullLayout;h(_);for(var S=f._basePlotModules,w=0;w<S.length;w++)S[w].plot(_);return z.redrawReglTraces(_),o.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),f._replotting=!1,o.previousPromises(_)},z.redrawReglTraces=function(_){var f=_._fullLayout;if(f._has("regl")){var S,w,E=_._fullData,O=[],C=[];for(f._hasOnlyLargeSploms&&f._splomGrid.draw(),S=0;S<E.length;S++){var P=E[S];P.visible===!0&&P._length!==0&&(P.type==="splom"?f._splomScenes[P.uid].draw():P.type==="scattergl"?T.pushUnique(O,P.xaxis+P.yaxis):P.type==="scatterpolargl"&&T.pushUnique(C,P.subplot))}for(S=0;S<O.length;S++)(w=f._plots[O[S]])._scene&&w._scene.draw();for(S=0;S<C.length;S++)(w=f[C[S]]._subplot)._scene&&w._scene.draw()}},z.doAutoRangeAndConstraints=function(_){for(var f,S=r.list(_,"",!0),w={},E=0;E<S.length;E++)if(!w[(f=S[E])._id]){w[f._id]=1,p(_,f),c(_,f);var O=f._matchGroup;if(O)for(var C in O){var P=r.getFromId(_,C);c(_,P,f.range),w[C]=1}}u(_)},z.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},z.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},94828:function(ee,z,e){var M=e(3400),k=M.isPlainObject,o=e(73060),T=e(7316),b=e(45464),h=e(31780),s=e(20556).dfltConfig;function t(c,x){c=M.extendDeep({},c);var d,g,v=Object.keys(c).sort();function y(w,E,O){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var C=h.arrayTemplater({_template:c},O);for(g=0;g<E.length;g++){var P=E[g],R=C.newItem(P)._template;R&&t(R,P)}var j=C.defaultItems();for(g=0;g<j.length;g++)E.push(j[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(d=0;d<v.length;d++){var m=v[d],_=c[m];if(m in x?y(_,x[m],m):x[m]=_,a(m)===m)for(var f in x){var S=a(f);f===S||S!==m||f in c||y(_,x[f],m)}}}function a(c){return c.replace(/[0-9]+$/,"")}function n(c,x,d,g,v){var y=v&&d(v);for(var m in c){var _=c[m],f=l(c,m,g),S=l(c,m,v),w=d(S);if(!w){var E=a(m);E!==m&&(w=d(S=l(c,E,v)))}if(!(y&&y===w||!w||w._noTemplating||w.valType==="data_array"||w.arrayOk&&Array.isArray(_)))if(!w.valType&&k(_))n(_,x,d,f,S);else if(w._isLinkedToArray&&Array.isArray(_))for(var O=!1,C=0,P={},R=0;R<_.length;R++){var j=_[R];if(k(j)){var D=j.name;if(D)P[D]||(n(j,x,d,l(_,C,f),l(_,C,S)),C++,P[D]=1);else if(!O){var N=l(c,h.arrayDefaultKey(m),g),W=l(_,C,f);n(j,x,d,W,l(_,C,S));var F=M.nestedProperty(x,W);M.nestedProperty(x,N).set(F.get()),F.set(null),O=!0}}}else M.nestedProperty(x,f).set(_)}}function r(c,x){return o.getLayoutValObject(c,M.nestedProperty({},x).parts)}function i(c,x){return o.getTraceValObject(c,M.nestedProperty({},x).parts)}function l(c,x,d){return d?Array.isArray(c)?d+"["+x+"]":d+"."+x:x}function u(c){for(var x=0;x<c.length;x++)if(k(c[x]))return!0}function p(c){var x;switch(c.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":x=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=x,c}z.makeTemplate=function(c){c=M.isPlainObject(c)?c:M.getGraphDiv(c),c=M.extendDeep({_context:s},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var x=c.data||[],d=c.layout||{};d._basePlotModules=c._fullLayout._basePlotModules,d._modules=c._fullLayout._modules;var g={data:{},layout:{}};x.forEach(function(C){var P={};n(C,P,i.bind(null,C));var R=M.coerce(C,{},b,"type"),j=g.data[R];j||(j=g.data[R]=[]),j.push(P)}),n(d,g.layout,r.bind(null,d)),delete g.layout.template;var v=d.template;if(k(v)){var y,m,_,f,S,w,E=v.layout;k(E)&&t(E,g.layout);var O=v.data;if(k(O)){for(m in g.data)if(_=O[m],Array.isArray(_)){for(w=(S=g.data[m]).length,f=_.length,y=0;y<w;y++)t(_[y%f],S[y]);for(y=w;y<f;y++)S.push(M.extendDeep({},_[y]))}for(m in O)m in g.data||(g.data[m]=M.extendDeep([],O[m]))}}return g},z.validateTemplate=function(c,x){var d=M.extendDeep({},{_context:s,data:c.data,layout:c.layout}),g=d.layout||{};k(x)||(x=g.template||{});var v=x.layout,y=x.data,m=[];d.layout=g,d.layout.template=x,T.supplyDefaults(d);var _=d._fullLayout,f=d._fullData,S={};if(k(v)?(function j(D,N){for(var W in D)if(W.charAt(0)!=="_"&&k(D[W])){var F,V=a(W),U=[];for(F=0;F<N.length;F++)U.push(l(D,W,N[F])),V!==W&&U.push(l(D,V,N[F]));for(F=0;F<U.length;F++)S[U[F]]=1;j(D[W],U)}}(_,["layout"]),function j(D,N){for(var W in D)if(W.indexOf("defaults")===-1&&k(D[W])){var F=l(D,W,N);S[F]?j(D[W],F):m.push({code:"unused",path:F})}}(v,"layout")):m.push({code:"layout"}),k(y)){for(var w,E={},O=0;O<f.length;O++){var C=f[O];E[w=C.type]=(E[w]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:w})}for(w in y){var P=y[w].length,R=E[w]||0;P>R?m.push({code:"unused",traceType:w,templateCount:P,dataCount:R}):R>P&&m.push({code:"reused",traceType:w,templateCount:P,dataCount:R})}}else m.push({code:"data"});if(function j(D,N){for(var W in D)if(W.charAt(0)!=="_"){var F=D[W],V=l(D,W,N);k(F)?(Array.isArray(D)&&F._template===!1&&F.templateitemname&&m.push({code:"missing",path:V,templateitemname:F.templateitemname}),j(F,V)):Array.isArray(F)&&u(F)&&j(F,V)}}({data:f,layout:_},""),m.length)return m.map(p)}},67024:function(ee,z,e){var M=e(38248),k=e(36424),o=e(7316),T=e(3400),b=e(81792),h=e(37164),s=e(63268),t=e(25788).version,a={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ee.exports=function(n,r){var i,l,u,p;function c(R){return!(R in r)||T.validate(r[R],a[R])}if(r=r||{},T.isPlainObject(n)?(i=n.data||[],l=n.layout||{},u=n.config||{},p={}):(n=T.getGraphDiv(n),i=T.extendDeep([],n.data),l=T.extendDeep({},n.layout),u=n._context,p=n._fullLayout||{}),!c("width")&&r.width!==null||!c("height")&&r.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(a.format.values,", "," or ")+".");var x={};function d(R,j){return T.coerce(r,x,a,R,j)}var g=d("format"),v=d("width"),y=d("height"),m=d("scale"),_=d("setBackground"),f=d("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var w=T.extendFlat({},l);v?w.width=v:r.width===null&&M(p.width)&&(w.width=p.width),y?w.height=y:r.height===null&&M(p.height)&&(w.height=p.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),O=b.getRedrawFunc(S);function C(){return new Promise(function(R){setTimeout(R,b.getDelay(S._fullLayout))})}function P(){return new Promise(function(R,j){var D=h(S,g,m),N=S._fullLayout.width,W=S._fullLayout.height;function F(){k.purge(S),document.body.removeChild(S)}if(g==="full-json"){var V=o.graphJson(S,!1,"keepdata","object",!0,!0);return V.version=t,V=JSON.stringify(V),F(),R(f?V:b.encodeJSON(V))}if(F(),g==="svg")return R(f?D:b.encodeSVG(D));var U=document.createElement("canvas");U.id=T.randstr(),s({format:g,width:N,height:W,scale:m,canvas:U,svg:D,promise:!0}).then(R).catch(j)})}return new Promise(function(R,j){k.newPlot(S,i,w,E).then(O).then(C).then(P).then(function(D){R(function(N){return f?N.replace(b.IMAGE_URL_PREFIX,""):N}(D))}).catch(function(D){j(D)})})}},21480:function(ee,z,e){var M=e(3400),k=e(7316),o=e(73060),T=e(20556).dfltConfig,b=M.isPlainObject,h=Array.isArray,s=M.isArrayOrTypedArray;function t(c,x,d,g,v,y){y=y||[];for(var m=Object.keys(c),_=0;_<m.length;_++){var f=m[_];if(f!=="transforms"){var S=y.slice();S.push(f);var w=c[f],E=x[f],O=l(d,f),C=(O||{}).valType,P=C==="info_array",R=C==="colorscale",j=(O||{}).items;if(i(d,f))if(b(w)&&b(E)&&C!=="any")t(w,E,O,g,v,S);else if(P&&h(w)){w.length>E.length&&g.push(r("unused",v,S.concat(E.length)));var D,N,W,F,V,U=E.length,te=Array.isArray(j);if(te&&(U=Math.min(U,j.length)),O.dimensions===2)for(N=0;N<U;N++)if(h(w[N])){w[N].length>E[N].length&&g.push(r("unused",v,S.concat(N,E[N].length)));var J=E[N].length;for(D=0;D<(te?Math.min(J,j[N].length):J);D++)W=te?j[N][D]:j,F=w[N][D],V=E[N][D],M.validate(F,W)?V!==F&&V!==+F&&g.push(r("dynamic",v,S.concat(N,D),F,V)):g.push(r("value",v,S.concat(N,D),F))}else g.push(r("array",v,S.concat(N),w[N]));else for(N=0;N<U;N++)W=te?j[N]:j,F=w[N],V=E[N],M.validate(F,W)?V!==F&&V!==+F&&g.push(r("dynamic",v,S.concat(N),F,V)):g.push(r("value",v,S.concat(N),F))}else if(O.items&&!P&&h(w)){var X,K,Q=j[Object.keys(j)[0]],Z=[];for(X=0;X<E.length;X++){var re=E[X]._index||X;if((K=S.slice()).push(re),b(w[re])&&b(E[X])){Z.push(re);var oe=w[re],ae=E[X];b(oe)&&oe.visible!==!1&&ae.visible===!1?g.push(r("invisible",v,K)):t(oe,ae,Q,g,v,K)}}for(X=0;X<w.length;X++)(K=S.slice()).push(X),b(w[X])?Z.indexOf(X)===-1&&g.push(r("unused",v,K)):g.push(r("object",v,K,w[X]))}else!b(w)&&b(E)?g.push(r("object",v,S,w)):s(w)||!s(E)||P||R?f in x?M.validate(w,O)?O.valType==="enumerated"&&(O.coerceNumber&&w!==+E||w!==E)&&g.push(r("dynamic",v,S,w,E)):g.push(r("value",v,S,w)):g.push(r("unused",v,S,w)):g.push(r("array",v,S,w));else g.push(r("schema",v,S))}}return g}ee.exports=function(c,x){c===void 0&&(c=[]),x===void 0&&(x={});var d,g,v=o.get(),y=[],m={_context:M.extendFlat({},T)};h(c)?(m.data=M.extendDeep([],c),d=c):(m.data=[],d=[],y.push(r("array","data"))),b(x)?(m.layout=M.extendDeep({},x),g=x):(m.layout={},g={},arguments.length>1&&y.push(r("object","layout"))),k.supplyDefaults(m);for(var _=m._fullData,f=d.length,S=0;S<f;S++){var w=d[S],E=["data",S];if(b(w)){var O=_[S],C=O.type,P=v.traces[C].attributes;P.type={valType:"enumerated",values:[C]},O.visible===!1&&w.visible!==!1&&y.push(r("invisible",E)),t(w,O,P,y,E);var R=w.transforms,j=O.transforms;if(R){h(R)||y.push(r("array",E,["transforms"])),E.push("transforms");for(var D=0;D<R.length;D++){var N=["transforms",D],W=R[D].type;if(b(R[D])){var F=v.transforms[W]?v.transforms[W].attributes:{};F.type={valType:"enumerated",values:Object.keys(v.transforms)},t(R[D],j[D],F,y,E,N)}else y.push(r("object",E,N))}}}else y.push(r("object",E))}var V=m._fullLayout,U=function(te,J){for(var X=te.layout.layoutAttributes,K=0;K<J.length;K++){var Q=J[K],Z=te.traces[Q.type],re=Z.layoutAttributes;re&&(Q.subplot?M.extendFlat(X[Z.attributes.subplot.dflt],re):M.extendFlat(X,re))}return X}(v,_);return t(g,V,U,y,"layout"),y.length===0?void 0:y};var a={object:function(c,x){return(c==="layout"&&x===""?"The layout argument":c[0]==="data"&&x===""?"Trace "+c[1]+" in the data argument":n(c)+"key "+x)+" must be linked to an object container"},array:function(c,x){return(c==="data"?"The data argument":n(c)+"key "+x)+" must be linked to an array container"},schema:function(c,x){return n(c)+"key "+x+" is not part of the schema"},unused:function(c,x,d){var g=b(d)?"container":"key";return n(c)+g+" "+x+" did not get coerced"},dynamic:function(c,x,d,g){return[n(c)+"key",x,"(set to '"+d+"')","got reset to","'"+g+"'","during defaults."].join(" ")},invisible:function(c,x){return(x?n(c)+"item "+x:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,x,d){return[n(c)+"key "+x,"is set to an invalid value ("+d+")"].join(" ")}};function n(c){return h(c)?"In data trace "+c[1]+", ":"In "+c+", "}function r(c,x,d,g,v){var y,m;d=d||"",h(x)?(y=x[0],m=x[1]):(y=x,m=null);var _=function(S){if(!h(S))return String(S);for(var w="",E=0;E<S.length;E++){var O=S[E];typeof O=="number"?w=w.substr(0,w.length-1)+"["+O+"]":w+=O,E<S.length-1&&(w+=".")}return w}(d),f=a[c](x,_,g,v);return M.log(f),{code:c,container:y,trace:m,path:d,astr:_,msg:f}}function i(c,x){var d=p(x),g=d.keyMinusId,v=d.id;return!!(g in c&&c[g]._isSubplotObj&&v)||x in c}function l(c,x){return x in c?c[x]:c[p(x).keyMinusId]}var u=M.counterRegex("([a-z]+)");function p(c){var x=c.match(u);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85656:function(ee){ee.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(ee,z,e){var M=e(3400),k=e(31780);ee.exports=function(o,T,b){var h,s,t=b.name,a=b.inclusionAttr||"visible",n=T[t],r=M.isArrayOrTypedArray(o[t])?o[t]:[],i=T[t]=[],l=k.arrayTemplater(T,t,a);for(h=0;h<r.length;h++){var u=r[h];M.isPlainObject(u)?s=l.newItem(u):(s=l.newItem({}))[a]=!1,s._index=h,s[a]!==!1&&b.handleItemDefaults(u,s,T,b),i.push(s)}var p=l.defaultItems();for(h=0;h<p.length;h++)(s=p[h])._index=i.length,b.handleItemDefaults({},s,T,b,{}),i.push(s);if(M.isArrayOrTypedArray(n)){var c=Math.min(n.length,i.length);for(h=0;h<c;h++)M.relinkPrivateKeys(i[h],n[h])}return i}},45464:function(ee,z,e){var M=e(25376),k=e(55756);ee.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(ee,z,e){var M=e(38248),k=e(3400),o=k.dateTime2ms,T=k.incrementMonth,b=e(39032).ONEAVGMONTH;ee.exports=function(h,s,t,a){if(s.type!=="date")return{vals:a};var n=h[t+"periodalignment"];if(!n)return{vals:a};var r,i=h[t+"period"];if(M(i)){if((i=+i)<=0)return{vals:a}}else if(typeof i=="string"&&i.charAt(0)==="M"){var l=+i.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:a};r=l}for(var u=s.calendar,p=n==="start",c=n==="end",x=h[t+"period0"],d=o(x,u)||0,g=[],v=[],y=[],m=a.length,_=0;_<m;_++){var f,S,w,E=a[_];if(r){for(f=Math.round((E-d)/(r*b)),w=T(d,r*f,u);w>E;)w=T(w,-r,u);for(;w<=E;)w=T(w,r,u);S=T(w,-r,u)}else{for(w=d+(f=Math.round((E-d)/i))*i;w>E;)w-=i;for(;w<=E;)w+=i;S=w-i}g[_]=p?S:c?w:(S+w)/2,v[_]=S,y[_]=w}return{vals:g,starts:v,ends:y}}},26720:function(ee){ee.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(ee,z,e){var M=e(33428),k=e(38248),o=e(3400),T=e(39032).FP_SAFE,b=e(24040),h=e(43616),s=e(79811),t=s.getFromId,a=s.isLinked;function n(_,f){var S,w,E=[],O=_._fullLayout,C=i(O,f,0),P=i(O,f,1),R=u(_,f),j=R.min,D=R.max;if(j.length===0||D.length===0)return o.simpleMap(f.range,f.r2l);var N=j[0].val,W=D[0].val;for(S=1;S<j.length&&N===W;S++)N=Math.min(N,j[S].val);for(S=1;S<D.length&&N===W;S++)W=Math.max(W,D[S].val);var F=f.autorange,V=F==="reversed"||F==="min reversed"||F==="max reversed";if(!V&&f.range){var U=o.simpleMap(f.range,f.r2l);V=U[1]<U[0]}f.autorange==="reversed"&&(f.autorange=!0);var te,J,X,K,Q,Z,re=f.rangemode,oe=re==="tozero",ae=re==="nonnegative",ce=f._length,he=ce/10,pe=0;for(S=0;S<j.length;S++)for(te=j[S],w=0;w<D.length;w++)(Z=(J=D[w]).val-te.val-r(f,te.val,J.val))>0&&((Q=ce-C(te)-P(J))>he?Z/Q>pe&&(X=te,K=J,pe=Z/Q):Z/ce>pe&&(X={val:te.val,nopad:1},K={val:J.val,nopad:1},pe=Z/ce));if(N===W){var xe=N-1,be=N+1;if(oe)if(N===0)E=[0,1];else{var ve=(N>0?D:j).reduce(function(we,_e){return Math.max(we,P(_e))},0),ge=N/(1-Math.min(.5,ve/ce));E=N>0?[0,ge]:[ge,0]}else E=ae?[Math.max(0,xe),Math.max(1,be)]:[xe,be]}else oe?(X.val>=0&&(X={val:0,nopad:1}),K.val<=0&&(K={val:0,nopad:1})):ae&&(X.val-pe*C(X)<0&&(X={val:0,nopad:1}),K.val<=0&&(K={val:1,nopad:1})),pe=(K.val-X.val-r(f,te.val,J.val))/(ce-C(X)-P(K)),E=[X.val-pe*C(X),K.val+pe*P(K)];return E=m(E,f),f.limitRange&&f.limitRange(),V&&E.reverse(),o.simpleMap(E,f.l2r||Number)}function r(_,f,S){var w=0;if(_.rangebreaks)for(var E=_.locateBreaks(f,S),O=0;O<E.length;O++){var C=E[O];w+=C.max-C.min}return w}function i(_,f,S){var w=.05*f._length,E=f._anchorAxis||{};if((f.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var O=f.isReversed();if(!O){var C=o.simpleMap(f.range,f.r2l);O=C[1]<C[0]}O&&(S=!S)}var P=0;return a(_,f._id)||(P=function(R,j,D){var N=0,W=j._id.charAt(0)==="x";for(var F in R._plots){var V=R._plots[F];if(j._id===V.xaxis._id||j._id===V.yaxis._id){var U=(W?V.yaxis:V.xaxis)||{};if((U.ticklabelposition||"").indexOf("inside")!==-1&&(!D&&(U.side==="left"||U.side==="bottom")||D&&(U.side==="top"||U.side==="right"))){if(U._vals){var te=o.deg2rad(U._tickAngles[U._id+"tick"]||0),J=Math.abs(Math.cos(te)),X=Math.abs(Math.sin(te));if(!U._vals[0].bb){var K=U._id+"tick";U._selections[K].each(function(ae){var ce=M.select(this);ce.select(".text-math-group").empty()&&(ae.bb=h.bBox(ce.node()))})}for(var Q=0;Q<U._vals.length;Q++){var Z=U._vals[Q].bb;if(Z){var re=2*l+Z.width,oe=2*l+Z.height;N=Math.max(N,W?Math.max(re*J,oe*X):Math.max(oe*J,re*X))}}}U.ticks==="inside"&&U.ticklabelposition==="inside"&&(N+=U.ticklen||0)}}}return N}(_,f,S)),w=Math.max(P,w),f.constrain==="domain"&&f._inputDomain&&(w*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?w:P)}}ee.exports={applyAutorangeOptions:m,getAutoRange:n,makePadFn:i,doAutoRange:function(_,f,S){if(f.setScale(),f.autorange){f.range=S?S.slice():n(_,f),f._r=f.range.slice(),f._rl=o.simpleMap(f._r,f.r2l);var w=f._input,E={};E[f._attr+".range"]=f.range,E[f._attr+".autorange"]=f.autorange,b.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),w.range=f.range.slice(),w.autorange=f.autorange}var O=f._anchorAxis;if(O&&O.rangeslider){var C=O.rangeslider[f._name];C&&C.rangemode==="auto"&&(C.range=n(_,f)),O._input.rangeslider[f._name]=o.extendFlat({},C)}},findExtremes:function(_,f,S){S||(S={}),_._m||_.setScale();var w,E,O,C,P,R,j,D,N,W=[],F=[],V=f.length,U=S.padded||!1,te=S.tozero&&(_.type==="linear"||_.type==="-"),J=_.type==="log",X=!1,K=S.vpadLinearized||!1;function Q(xe){if(Array.isArray(xe))return X=!0,function(ve){return Math.max(Number(xe[ve]||0),0)};var be=Math.max(Number(xe||0),0);return function(){return be}}var Z=Q((_._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),re=Q((_._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),oe=Q(S.vpadplus||S.vpad),ae=Q(S.vpadminus||S.vpad);if(!X){if(D=1/0,N=-1/0,J)for(w=0;w<V;w++)(E=f[w])<D&&E>0&&(D=E),E>N&&E<T&&(N=E);else for(w=0;w<V;w++)(E=f[w])<D&&E>-T&&(D=E),E>N&&E<T&&(N=E);f=[D,N],V=2}var ce={tozero:te,extrapad:U};function he(xe){O=f[xe],k(O)&&(R=Z(xe),j=re(xe),K?(C=_.c2l(O)-ae(xe),P=_.c2l(O)+oe(xe)):(D=O-ae(xe),N=O+oe(xe),J&&D<N/10&&(D=N/10),C=_.c2l(D),P=_.c2l(N)),te&&(C=Math.min(0,C),P=Math.max(0,P)),d(C)&&p(W,C,j,ce),d(P)&&c(F,P,R,ce))}var pe=Math.min(6,V);for(w=0;w<pe;w++)he(w);for(w=V-1;w>=pe;w--)he(w);return{min:W,max:F,opts:S}},concatExtremes:u};var l=3;function u(_,f,S){var w,E,O,C=f._id,P=_._fullData,R=_._fullLayout,j=[],D=[];function N(te,J){for(w=0;w<J.length;w++){var X=te[J[w]],K=(X._extremes||{})[C];if(X.visible===!0&&K){for(E=0;E<K.min.length;E++)O=K.min[E],p(j,O.val,O.pad,{extrapad:O.extrapad});for(E=0;E<K.max.length;E++)O=K.max[E],c(D,O.val,O.pad,{extrapad:O.extrapad})}}}if(N(P,f._traceIndices),N(R.annotations||[],f._annIndices||[]),N(R.shapes||[],f._shapeIndices||[]),f._matchGroup&&!S){for(var W in f._matchGroup)if(W!==f._id){var F=t(_,W),V=u(_,F,!0),U=f._length/F._length;for(E=0;E<V.min.length;E++)O=V.min[E],p(j,O.val,O.pad*U,{extrapad:O.extrapad});for(E=0;E<V.max.length;E++)O=V.max[E],c(D,O.val,O.pad*U,{extrapad:O.extrapad})}}return{min:j,max:D}}function p(_,f,S,w){x(_,f,S,w,g)}function c(_,f,S,w){x(_,f,S,w,v)}function x(_,f,S,w,E){for(var O=w.tozero,C=w.extrapad,P=!0,R=0;R<_.length&&P;R++){var j=_[R];if(E(j.val,f)&&j.pad>=S&&(j.extrapad||!C)){P=!1;break}E(f,j.val)&&j.pad<=S&&(C||!j.extrapad)&&(_.splice(R,1),R--)}if(P){var D=O&&f===0;_.push({val:f,pad:D?0:S,extrapad:!D&&C})}}function d(_){return k(_)&&Math.abs(_)<T}function g(_,f){return _<=f}function v(_,f){return _>=f}function y(_,f,S){return f===void 0||S===void 0||(f=_.d2l(f))<_.d2l(S)}function m(_,f){if(!f||!f.autorangeoptions)return _;var S=_[0],w=_[1],E=f.autorangeoptions.include;if(E!==void 0){var O=f.d2l(S),C=f.d2l(w);o.isArrayOrTypedArray(E)||(E=[E]);for(var P=0;P<E.length;P++){var R=f.d2l(E[P]);O>=R&&(O=R,S=R),C<=R&&(C=R,w=R)}}return S=function(j,D){var N=D.autorangeoptions;return N&&N.minallowed!==void 0&&y(D,N.minallowed,N.maxallowed)?N.minallowed:N&&N.clipmin!==void 0&&y(D,N.clipmin,N.clipmax)?Math.max(j,D.d2l(N.clipmin)):j}(S,f),w=function(j,D){var N=D.autorangeoptions;return N&&N.maxallowed!==void 0&&y(D,N.minallowed,N.maxallowed)?N.maxallowed:N&&N.clipmax!==void 0&&y(D,N.clipmin,N.clipmax)?Math.min(j,D.d2l(N.clipmax)):j}(w,f),[S,w]}},76808:function(ee){ee.exports=function(z,e,M){var k,o;if(M){var T=e==="reversed"||e==="min reversed"||e==="max reversed";k=M[T?1:0],o=M[T?0:1]}var b=z("autorangeoptions.minallowed",o===null?k:void 0),h=z("autorangeoptions.maxallowed",k===null?o:void 0);b===void 0&&z("autorangeoptions.clipmin"),h===void 0&&z("autorangeoptions.clipmax"),z("autorangeoptions.include")}},54460:function(ee,z,e){var M=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),h=b.strTranslate,s=e(72736),t=e(81668),a=e(76308),n=e(43616),r=e(94724),i=e(98728),l=e(39032),u=l.ONEMAXYEAR,p=l.ONEAVGYEAR,c=l.ONEMINYEAR,x=l.ONEMAXQUARTER,d=l.ONEAVGQUARTER,g=l.ONEMINQUARTER,v=l.ONEMAXMONTH,y=l.ONEAVGMONTH,m=l.ONEMINMONTH,_=l.ONEWEEK,f=l.ONEDAY,S=f/2,w=l.ONEHOUR,E=l.ONEMIN,O=l.ONESEC,C=l.MINUS_SIGN,P=l.BADNUM,R={K:"zeroline"},j={K:"gridline",L:"path"},D={K:"minor-gridline",L:"path"},N={K:"tick",L:"path"},W={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},V=e(84284),U=V.MID_SHIFT,te=V.CAP_SHIFT,J=V.LINE_SPACING,X=V.OPPOSITE_SIDE,K=ee.exports={};K.setConvert=e(78344);var Q=e(52976),Z=e(79811),re=Z.idSort,oe=Z.isLinked;K.id2name=Z.id2name,K.name2id=Z.name2id,K.cleanId=Z.cleanId,K.list=Z.list,K.listIds=Z.listIds,K.getFromId=Z.getFromId,K.getFromTrace=Z.getFromTrace;var ae=e(19280);K.getAutoRange=ae.getAutoRange,K.findExtremes=ae.findExtremes;var ce=1e-4;function he(Re){var Fe=(Re[1]-Re[0])*ce;return[Re[0]-Fe,Re[1]+Fe]}K.coerceRef=function(Re,Fe,nt,We,ct,pt){var gt=We.charAt(We.length-1),ut=nt._fullLayout._subplots[gt+"axis"],kt=We+"ref",yt={};return ct||(ct=ut[0]||(typeof pt=="string"?pt:pt[0])),pt||(pt=ct),ut=ut.concat(ut.map(function(Mt){return Mt+" domain"})),yt[kt]={valType:"enumerated",values:ut.concat(pt?typeof pt=="string"?[pt]:pt:[]),dflt:ct},b.coerce(Re,Fe,yt,kt)},K.getRefType=function(Re){return Re===void 0?Re:Re==="paper"?"paper":Re==="pixel"?"pixel":/( domain)$/.test(Re)?"domain":"range"},K.coercePosition=function(Re,Fe,nt,We,ct,pt){var gt,ut;if(K.getRefType(We)!=="range")gt=b.ensureNumber,ut=nt(ct,pt);else{var kt=K.getFromId(Fe,We);ut=nt(ct,pt=kt.fraction2r(pt)),gt=kt.cleanPos}Re[ct]=gt(ut)},K.cleanPosition=function(Re,Fe,nt){return(nt==="paper"||nt==="pixel"?b.ensureNumber:K.getFromId(Fe,nt).cleanPos)(Re)},K.redrawComponents=function(Re,Fe){Fe=Fe||K.listIds(Re);var nt=Re._fullLayout;function We(ct,pt,gt,ut){for(var kt=T.getComponentMethod(ct,pt),yt={},Mt=0;Mt<Fe.length;Mt++)for(var Lt=nt[K.id2name(Fe[Mt])][gt],Ct=0;Ct<Lt.length;Ct++){var It=Lt[Ct];if(!yt[It]&&(kt(Re,It),yt[It]=1,ut))return}}We("annotations","drawOne","_annIndices"),We("shapes","drawOne","_shapeIndices"),We("images","draw","_imgIndices",!0),We("selections","drawOne","_selectionIndices")};var pe=K.getDataConversions=function(Re,Fe,nt,We){var ct,pt=nt==="x"||nt==="y"||nt==="z"?nt:We;if(b.isArrayOrTypedArray(pt)){if(ct={type:Q(We,void 0,{autotypenumbers:Re._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(ct),ct.type==="category")for(var gt=0;gt<We.length;gt++)ct.d2c(We[gt])}else ct=K.getFromTrace(Re,Fe,pt);return ct?{d2c:ct.d2c,c2d:ct.c2d}:pt==="ids"?{d2c:be,c2d:be}:{d2c:xe,c2d:xe}};function xe(Re){return+Re}function be(Re){return String(Re)}function ve(Re,Fe){return Math.abs((Re/Fe+.5)%1-.5)<.001}function ge(Re,Fe){return Math.abs(Re/Fe-1)<.001}function we(Re){return+Re.substring(1)}function _e(Re,Fe){return Re.rangebreaks&&(Fe=Fe.filter(function(nt){return Re.maskBreaks(nt.x)!==P})),Fe}function se(Re){var Fe=Re._mainAxis,nt=[];if(Fe._vals){for(var We=0;We<Fe._vals.length;We++)if(!Fe._vals[We].noTick){var ct=Fe.l2p(Fe._vals[We].x),pt=Re.p2l(ct),gt=K.tickText(Re,pt);Fe._vals[We].minor&&(gt.minor=!0,gt.text=""),nt.push(gt)}}return _e(Re,nt)}function ie(Re,Fe){var nt=he(b.simpleMap(Re.range,Re.r2l)),We=Math.min(nt[0],nt[1]),ct=Math.max(nt[0],nt[1]),pt=Re.type==="category"?Re.d2l_noadd:Re.d2l;Re.type==="log"&&String(Re.dtick).charAt(0)!=="L"&&(Re.dtick="L"+Math.pow(10,Math.floor(Math.min(Re.range[0],Re.range[1]))-1));for(var gt=[],ut=0;ut<=1;ut++)if((Fe===void 0||!(Fe&&ut||Fe===!1&&!ut))&&(!ut||Re.minor)){var kt=ut?Re.minor.tickvals:Re.tickvals,yt=ut?[]:Re.ticktext;if(kt){b.isArrayOrTypedArray(yt)||(yt=[]);for(var Mt=0;Mt<kt.length;Mt++){var Lt=pt(kt[Mt]);if(Lt>We&&Lt<ct){var Ct=K.tickText(Re,Lt,!1,String(yt[Mt]));ut&&(Ct.minor=!0,Ct.text=""),gt.push(Ct)}}}}return _e(Re,gt)}K.getDataToCoordFunc=function(Re,Fe,nt,We){return pe(Re,Fe,nt,We).d2c},K.counterLetter=function(Re){var Fe=Re.charAt(0);return Fe==="x"?"y":Fe==="y"?"x":void 0},K.minDtick=function(Re,Fe,nt,We){["log","category","multicategory"].indexOf(Re.type)===-1&&We?Re._minDtick===void 0?(Re._minDtick=Fe,Re._forceTick0=nt):Re._minDtick&&((Re._minDtick/Fe+1e-6)%1<2e-6&&((nt-Re._forceTick0)/Fe%1+1.000001)%1<2e-6?(Re._minDtick=Fe,Re._forceTick0=nt):((Fe/Re._minDtick+1e-6)%1>2e-6||((nt-Re._forceTick0)/Re._minDtick%1+1.000001)%1>2e-6)&&(Re._minDtick=0)):Re._minDtick=0},K.saveRangeInitial=function(Re,Fe){for(var nt=K.list(Re,"",!0),We=!1,ct=0;ct<nt.length;ct++){var pt=nt[ct],gt=pt._rangeInitial0===void 0&&pt._rangeInitial1===void 0,ut=gt||pt.range[0]!==pt._rangeInitial0||pt.range[1]!==pt._rangeInitial1,kt=pt.autorange;(gt&&kt!==!0||Fe&&ut)&&(pt._rangeInitial0=kt==="min"||kt==="max reversed"?void 0:pt.range[0],pt._rangeInitial1=kt==="max"||kt==="min reversed"?void 0:pt.range[1],pt._autorangeInitial=kt,We=!0)}return We},K.saveShowSpikeInitial=function(Re,Fe){for(var nt=K.list(Re,"",!0),We=!1,ct="on",pt=0;pt<nt.length;pt++){var gt=nt[pt],ut=gt._showSpikeInitial===void 0,kt=ut||gt.showspikes!==gt._showspikes;(ut||Fe&&kt)&&(gt._showSpikeInitial=gt.showspikes,We=!0),ct!=="on"||gt.showspikes||(ct="off")}return Re._fullLayout._cartesianSpikesEnabled=ct,We},K.autoBin=function(Re,Fe,nt,We,ct,pt){var gt,ut=b.aggNums(Math.min,null,Re),kt=b.aggNums(Math.max,null,Re);if(Fe.type==="category"||Fe.type==="multicategory")return{start:ut-.5,end:kt+.5,size:Math.max(1,Math.round(pt)||1),_dataSpan:kt-ut};if(ct||(ct=Fe.calendar),gt=Fe.type==="log"?{type:"linear",range:[ut,kt]}:{type:Fe.type,range:b.simpleMap([ut,kt],Fe.c2r,0,ct),calendar:ct},K.setConvert(gt),pt=pt&&i.dtick(pt,gt.type))gt.dtick=pt,gt.tick0=i.tick0(void 0,gt.type,ct);else{var yt;if(nt)yt=(kt-ut)/nt;else{var Mt=b.distinctVals(Re),Lt=Math.pow(10,Math.floor(Math.log(Mt.minDiff)/Math.LN10)),Ct=Lt*b.roundUp(Mt.minDiff/Lt,[.9,1.9,4.9,9.9],!0);yt=Math.max(Ct,2*b.stdev(Re)/Math.pow(Re.length,We?.25:.4)),k(yt)||(yt=1)}K.autoTicks(gt,yt)}var It,Wt=gt.dtick,Nt=K.tickIncrement(K.tickFirst(gt),Wt,"reverse",ct);if(typeof Wt=="number")Nt=function(Bt,Ht,Qt,Cn,Tn){var hn=0,Zt=0,an=0,$t=0;function ln(Mn){return(1+100*(Mn-Bt)/Qt.dtick)%100<2}for(var mn=0;mn<Ht.length;mn++)Ht[mn]%1==0?an++:k(Ht[mn])||$t++,ln(Ht[mn])&&hn++,ln(Ht[mn]+Qt.dtick/2)&&Zt++;var xn=Ht.length-$t;if(an===xn&&Qt.type!=="date")Qt.dtick<1?Bt=Cn-.5*Qt.dtick:(Bt-=.5)+Qt.dtick<Cn&&(Bt+=Qt.dtick);else if(Zt<.1*xn&&(hn>.3*xn||ln(Cn)||ln(Tn))){var Pn=Qt.dtick/2;Bt+=Bt+Pn<Cn?Pn:-Pn}return Bt}(Nt,Re,gt,ut,kt),It=Nt+(1+Math.floor((kt-Nt)/Wt))*Wt;else for(gt.dtick.charAt(0)==="M"&&(Nt=function(Bt,Ht,Qt,Cn,Tn){var hn=b.findExactDates(Ht,Tn);if(hn.exactDays>.8){var Zt=Number(Qt.substr(1));hn.exactYears>.8&&Zt%12==0?Bt=K.tickIncrement(Bt,"M6","reverse")+1.5*f:hn.exactMonths>.8?Bt=K.tickIncrement(Bt,"M1","reverse")+15.5*f:Bt-=S;var an=K.tickIncrement(Bt,Qt);if(an<=Cn)return an}return Bt}(Nt,Re,Wt,ut,ct)),It=Nt;It<=kt;)It=K.tickIncrement(It,Wt,!1,ct);return{start:Fe.c2r(Nt,0,ct),end:Fe.c2r(It,0,ct),size:Wt,_dataSpan:kt-ut}},K.prepMinorTicks=function(Re,Fe,nt){if(!Fe.minor.dtick){delete Re.dtick;var We,ct=Fe.dtick&&k(Fe._tmin);if(ct){var pt=K.tickIncrement(Fe._tmin,Fe.dtick,!0);We=[Fe._tmin,.99*pt+.01*Fe._tmin]}else{var gt=b.simpleMap(Fe.range,Fe.r2l);We=[gt[0],.8*gt[0]+.2*gt[1]]}if(Re.range=b.simpleMap(We,Fe.l2r),Re._isMinor=!0,K.prepTicks(Re,nt),ct){var ut=k(Fe.dtick),kt=k(Re.dtick),yt=ut?Fe.dtick:+Fe.dtick.substring(1),Mt=kt?Re.dtick:+Re.dtick.substring(1);ut&&kt?ve(yt,Mt)?yt===2*_&&Mt===2*f&&(Re.dtick=_):yt===2*_&&Mt===3*f?Re.dtick=_:yt!==_||(Fe._input.minor||{}).nticks?ge(yt/Mt,2.5)?Re.dtick=yt/2:Re.dtick=yt:Re.dtick=f:String(Fe.dtick).charAt(0)==="M"?kt?Re.dtick="M1":ve(yt,Mt)?yt>=12&&Mt===2&&(Re.dtick="M3"):Re.dtick=Fe.dtick:String(Re.dtick).charAt(0)==="L"?String(Fe.dtick).charAt(0)==="L"?ve(yt,Mt)||(Re.dtick=ge(yt/Mt,2.5)?Fe.dtick/2:Fe.dtick):Re.dtick="D1":Re.dtick==="D2"&&+Fe.dtick>1&&(Re.dtick=1)}Re.range=Fe.range}Fe.minor._tick0Init===void 0&&(Re.tick0=Fe.tick0)},K.prepTicks=function(Re,Fe){var nt=b.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe);if(Re.tickmode==="auto"||!Re.dtick){var We,ct=Re.nticks;ct||(Re.type==="category"||Re.type==="multicategory"?(We=Re.tickfont?b.bigFont(Re.tickfont.size||12):15,ct=Re._length/We):(We=Re._id.charAt(0)==="y"?40:80,ct=b.constrain(Re._length/We,4,9)+1),Re._name==="radialaxis"&&(ct*=2)),Re.minor&&Re.minor.tickmode!=="array"||Re.tickmode==="array"&&(ct*=100),Re._roughDTick=Math.abs(nt[1]-nt[0])/ct,K.autoTicks(Re,Re._roughDTick),Re._minDtick>0&&Re.dtick<2*Re._minDtick&&(Re.dtick=Re._minDtick,Re.tick0=Re.l2r(Re._forceTick0))}Re.ticklabelmode==="period"&&function(pt){var gt;function ut(){return!(k(pt.dtick)||pt.dtick.charAt(0)!=="M")}var kt=ut(),yt=K.getTickFormat(pt);if(yt){var Mt=pt._dtickInit!==pt.dtick;/%[fLQsSMX]/.test(yt)||(/%[HI]/.test(yt)?(gt=w,Mt&&!kt&&pt.dtick<w&&(pt.dtick=w)):/%p/.test(yt)?(gt=S,Mt&&!kt&&pt.dtick<S&&(pt.dtick=S)):/%[Aadejuwx]/.test(yt)?(gt=f,Mt&&!kt&&pt.dtick<f&&(pt.dtick=f)):/%[UVW]/.test(yt)?(gt=_,Mt&&!kt&&pt.dtick<_&&(pt.dtick=_)):/%[Bbm]/.test(yt)?(gt=y,Mt&&(kt?we(pt.dtick)<1:pt.dtick<m)&&(pt.dtick="M1")):/%[q]/.test(yt)?(gt=d,Mt&&(kt?we(pt.dtick)<3:pt.dtick<g)&&(pt.dtick="M3")):/%[Yy]/.test(yt)&&(gt=p,Mt&&(kt?we(pt.dtick)<12:pt.dtick<c)&&(pt.dtick="M12")))}(kt=ut())&&pt.tick0===pt._dowTick0&&(pt.tick0=pt._rawTick0),pt._definedDelta=gt}(Re),Re.tick0||(Re.tick0=Re.type==="date"?"2000-01-01":0),Re.type==="date"&&Re.dtick<.1&&(Re.dtick=.1),me(Re)},K.calcTicks=function(Re,Fe){for(var nt,We,ct=Re.type,pt=Re.calendar,gt=Re.ticklabelstep,ut=Re.ticklabelmode==="period",kt=b.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe),yt=kt[1]<kt[0],Mt=Math.min(kt[0],kt[1]),Lt=Math.max(kt[0],kt[1]),Ct=Math.max(1e3,Re._length||0),It=[],Wt=[],Nt=[],Bt=[],Ht=Re.minor&&(Re.minor.ticks||Re.minor.showgrid),Qt=1;Qt>=(Ht?0:1);Qt--){var Cn=!Qt;Qt?(Re._dtickInit=Re.dtick,Re._tick0Init=Re.tick0):(Re.minor._dtickInit=Re.minor.dtick,Re.minor._tick0Init=Re.minor.tick0);var Tn=Qt?Re:b.extendFlat({},Re,Re.minor);if(Cn?K.prepMinorTicks(Tn,Re,Fe):K.prepTicks(Tn,Fe),Tn.tickmode!=="array")if(Tn.tickmode!=="sync"){var hn=he(kt),Zt=hn[0],an=hn[1],$t=k(Tn.dtick),ln=ct==="log"&&!($t||Tn.dtick.charAt(0)==="L"),mn=K.tickFirst(Tn,Fe);if(Qt){if(Re._tmin=mn,mn<Zt!==yt)break;ct!=="category"&&ct!=="multicategory"||(an=yt?Math.max(-.5,an):Math.min(Re._categories.length-.5,an))}var xn,Pn,Mn=null,_n=mn;Qt&&($t?Pn=Re.dtick:ct==="date"?typeof Re.dtick=="string"&&Re.dtick.charAt(0)==="M"&&(Pn=y*Re.dtick.substring(1)):Pn=Re._roughDTick,xn=Math.round((Re.r2l(_n)-Re.r2l(Re.tick0))/Pn)-1);var Rn=Tn.dtick;for(Tn.rangebreaks&&Tn._tick0Init!==Tn.tick0&&(_n=Be(_n,Re),yt||(_n=K.tickIncrement(_n,Rn,!yt,pt))),Qt&&ut&&(_n=K.tickIncrement(_n,Rn,!yt,pt),xn--);yt?_n>=an:_n<=an;_n=K.tickIncrement(_n,Rn,yt,pt)){if(Qt&&xn++,Tn.rangebreaks&&!yt){if(_n<Zt)continue;if(Tn.maskBreaks(_n)===P&&Be(_n,Tn)>=Lt)break}if(Nt.length>Ct||_n===Mn)break;Mn=_n;var In={value:_n};Qt?(ln&&_n!==(0|_n)&&(In.simpleLabel=!0),gt>1&&xn%gt&&(In.skipLabel=!0),Nt.push(In)):(In.minor=!0,Bt.push(In))}}else Nt=[],It=se(Re);else Qt?(Nt=[],It=ie(Re,!Cn)):(Bt=[],Wt=ie(Re,!Cn))}if(Ht&&!(Re.minor.ticks==="inside"&&Re.ticks==="outside"||Re.minor.ticks==="outside"&&Re.ticks==="inside")){for(var Vn=Nt.map(function(bt){return bt.value}),tr=[],er=0;er<Bt.length;er++){var Wn=Bt[er],or=Wn.value;if(Vn.indexOf(or)===-1){for(var Jt=!1,en=0;!Jt&&en<Nt.length;en++)1e7+Nt[en].value===1e7+or&&(Jt=!0);Jt||tr.push(Wn)}}Bt=tr}if(ut&&function(bt,Ut,Kt){for(var un=0;un<bt.length;un++){var cn=bt[un].value,vn=un,tn=un+1;un<bt.length-1?(vn=un,tn=un+1):un>0?(vn=un-1,tn=un):(vn=un,tn=un);var Vt,Gt=bt[vn].value,nn=bt[tn].value,sn=Math.abs(nn-Gt),wn=Kt||sn,An=0;wn>=c?An=sn>=c&&sn<=u?sn:p:Kt===d&&wn>=g?An=sn>=g&&sn<=x?sn:d:wn>=m?An=sn>=m&&sn<=v?sn:y:Kt===_&&wn>=_?An=_:wn>=f?An=f:Kt===S&&wn>=S?An=S:Kt===w&&wn>=w&&(An=w),An>=sn&&(An=sn,Vt=!0);var zn=cn+An;if(Ut.rangebreaks&&An>0){for(var Fn=0,Xn=0;Xn<84;Xn++){var jn=(Xn+.5)/84;Ut.maskBreaks(cn*(1-jn)+jn*zn)!==P&&Fn++}(An*=Fn/84)||(bt[un].drop=!0),Vt&&sn>_&&(An=sn)}(An>0||un===0)&&(bt[un].periodX=cn+An/2)}}(Nt,Re,Re._definedDelta),Re.rangebreaks){var En=Re._id.charAt(0)==="y",gn=1;Re.tickmode==="auto"&&(gn=Re.tickfont?Re.tickfont.size:12);var Ln=NaN;for(nt=Nt.length-1;nt>-1;nt--)if(Nt[nt].drop)Nt.splice(nt,1);else{Nt[nt].value=Be(Nt[nt].value,Re);var Hn=Re.c2p(Nt[nt].value);(En?Ln>Hn-gn:Ln<Hn+gn)?Nt.splice(yt?nt+1:nt,1):Ln=Hn}}Ze(Re)&&Math.abs(kt[1]-kt[0])===360&&Nt.pop(),Re._tmax=(Nt[Nt.length-1]||{}).value,Re._prevDateHead="",Re._inCalcTicks=!0;var Nn,Yn,fr=function(bt){bt.text="",Re._prevDateHead=We};for(Nt=Nt.concat(Bt),nt=0;nt<Nt.length;nt++){var Xt=Nt[nt].minor,pn=Nt[nt].value;Xt?Wt.push({x:pn,minor:!0}):(We=Re._prevDateHead,Nn=K.tickText(Re,pn,!1,Nt[nt].simpleLabel),(Yn=Nt[nt].periodX)!==void 0&&(Nn.periodX=Yn,(Yn>Lt||Yn<Mt)&&(Yn>Lt&&(Nn.periodX=Lt),Yn<Mt&&(Nn.periodX=Mt),fr(Nn))),Nt[nt].skipLabel&&fr(Nn),It.push(Nn))}return It=It.concat(Wt),Re._inCalcTicks=!1,ut&&It.length&&(It[0].noTick=!0),It};var fe=[2,5,10],Ee=[1,2,3,6,12],Te=[1,2,5,10,15,30],Ae=[1,2,3,7,14],Se=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Oe=[-.301,0,.301,.699,1],De=[15,30,45,90,180];function de(Re,Fe,nt){return Fe*b.roundUp(Re/Fe,nt)}function me(Re){var Fe=Re.dtick;if(Re._tickexponent=0,k(Fe)||typeof Fe=="string"||(Fe=1),Re.type!=="category"&&Re.type!=="multicategory"||(Re._tickround=null),Re.type==="date"){var nt=Re.r2l(Re.tick0),We=Re.l2r(nt).replace(/(^-|i)/g,""),ct=We.length;if(String(Fe).charAt(0)==="M")ct>10||We.substr(5)!=="01-01"?Re._tickround="d":Re._tickround=+Fe.substr(1)%12==0?"y":"m";else if(Fe>=f&&ct<=10||Fe>=15*f)Re._tickround="d";else if(Fe>=E&&ct<=16||Fe>=w)Re._tickround="M";else if(Fe>=O&&ct<=19||Fe>=E)Re._tickround="S";else{var pt=Re.l2r(nt+Fe).replace(/^-/,"").length;Re._tickround=Math.max(ct,pt)-20,Re._tickround<0&&(Re._tickround=4)}}else if(k(Fe)||Fe.charAt(0)==="L"){var gt=Re.range.map(Re.r2d||Number);k(Fe)||(Fe=Number(Fe.substr(1))),Re._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var ut=Math.max(Math.abs(gt[0]),Math.abs(gt[1])),kt=Math.floor(Math.log(ut)/Math.LN10+.01),yt=Re.minexponent===void 0?3:Re.minexponent;Math.abs(kt)>yt&&(Pe(Re.exponentformat)&&!Ne(kt)?Re._tickexponent=3*Math.round((kt-1)/3):Re._tickexponent=kt)}else Re._tickround=null}function Me(Re,Fe,nt){var We=Re.tickfont||{};return{x:Fe,dx:0,dy:0,text:nt||"",fontSize:We.size,font:We.family,fontWeight:We.weight,fontStyle:We.style,fontVariant:We.variant,fontColor:We.color}}K.autoTicks=function(Re,Fe,nt){var We;function ct(Lt){return Math.pow(Lt,Math.floor(Math.log(Fe)/Math.LN10))}if(Re.type==="date"){Re.tick0=b.dateTick0(Re.calendar,0);var pt=2*Fe;if(pt>p)Fe/=p,We=ct(10),Re.dtick="M"+12*de(Fe,We,fe);else if(pt>y)Fe/=y,Re.dtick="M"+de(Fe,1,Ee);else if(pt>f){if(Re.dtick=de(Fe,f,Re._hasDayOfWeekBreaks?[1,2,7,14]:Ae),!nt){var gt=K.getTickFormat(Re),ut=Re.ticklabelmode==="period";ut&&(Re._rawTick0=Re.tick0),/%[uVW]/.test(gt)?Re.tick0=b.dateTick0(Re.calendar,2):Re.tick0=b.dateTick0(Re.calendar,1),ut&&(Re._dowTick0=Re.tick0)}}else pt>w?Re.dtick=de(Fe,w,Ee):pt>E?Re.dtick=de(Fe,E,Te):pt>O?Re.dtick=de(Fe,O,Te):(We=ct(10),Re.dtick=de(Fe,We,fe))}else if(Re.type==="log"){Re.tick0=0;var kt=b.simpleMap(Re.range,Re.r2l);if(Re._isMinor&&(Fe*=1.5),Fe>.7)Re.dtick=Math.ceil(Fe);else if(Math.abs(kt[1]-kt[0])<1){var yt=1.5*Math.abs((kt[1]-kt[0])/Fe);Fe=Math.abs(Math.pow(10,kt[1])-Math.pow(10,kt[0]))/yt,We=ct(10),Re.dtick="L"+de(Fe,We,fe)}else Re.dtick=Fe>.3?"D2":"D1"}else Re.type==="category"||Re.type==="multicategory"?(Re.tick0=0,Re.dtick=Math.ceil(Math.max(Fe,1))):Ze(Re)?(Re.tick0=0,We=1,Re.dtick=de(Fe,We,De)):(Re.tick0=0,We=ct(10),Re.dtick=de(Fe,We,fe));if(Re.dtick===0&&(Re.dtick=1),!k(Re.dtick)&&typeof Re.dtick!="string"){var Mt=Re.dtick;throw Re.dtick=1,"ax.dtick error: "+String(Mt)}},K.tickIncrement=function(Re,Fe,nt,We){var ct=nt?-1:1;if(k(Fe))return b.increment(Re,ct*Fe);var pt=Fe.charAt(0),gt=ct*Number(Fe.substr(1));if(pt==="M")return b.incrementMonth(Re,gt,We);if(pt==="L")return Math.log(Math.pow(10,Re)+gt)/Math.LN10;if(pt==="D"){var ut=Fe==="D2"?Oe:Se,kt=Re+.01*ct,yt=b.roundUp(b.mod(kt,1),ut,nt);return Math.floor(kt)+Math.log(M.round(Math.pow(10,yt),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},K.tickFirst=function(Re,Fe){var nt=Re.r2l||Number,We=b.simpleMap(Re.range,nt,void 0,void 0,Fe),ct=We[1]<We[0],pt=ct?Math.floor:Math.ceil,gt=he(We)[0],ut=Re.dtick,kt=nt(Re.tick0);if(k(ut)){var yt=pt((gt-kt)/ut)*ut+kt;return Re.type!=="category"&&Re.type!=="multicategory"||(yt=b.constrain(yt,0,Re._categories.length-1)),yt}var Mt=ut.charAt(0),Lt=Number(ut.substr(1));if(Mt==="M"){for(var Ct,It,Wt,Nt=0,Bt=kt;Nt<10;){if(((Ct=K.tickIncrement(Bt,ut,ct,Re.calendar))-gt)*(Bt-gt)<=0)return ct?Math.min(Bt,Ct):Math.max(Bt,Ct);It=(gt-(Bt+Ct)/2)/(Ct-Bt),Wt=Mt+(Math.abs(Math.round(It))||1)*Lt,Bt=K.tickIncrement(Bt,Wt,It<0?!ct:ct,Re.calendar),Nt++}return b.error("tickFirst did not converge",Re),Bt}if(Mt==="L")return Math.log(pt((Math.pow(10,gt)-kt)/Lt)*Lt+kt)/Math.LN10;if(Mt==="D"){var Ht=ut==="D2"?Oe:Se,Qt=b.roundUp(b.mod(gt,1),Ht,ct);return Math.floor(gt)+Math.log(M.round(Math.pow(10,Qt),1))/Math.LN10}throw"unrecognized dtick "+String(ut)},K.tickText=function(Re,Fe,nt,We){var ct,pt=Me(Re,Fe),gt=Re.tickmode==="array",ut=nt||gt,kt=Re.type,yt=kt==="category"?Re.d2l_noadd:Re.d2l,Mt=function(Bt){var Ht=Re.l2p(Bt);return Ht>=0&&Ht<=Re._length?Bt:null};if(gt&&b.isArrayOrTypedArray(Re.ticktext)){var Lt=b.simpleMap(Re.range,Re.r2l),Ct=(Math.abs(Lt[1]-Lt[0])-(Re._lBreaks||0))/1e4;for(ct=0;ct<Re.ticktext.length&&!(Math.abs(Fe-yt(Re.tickvals[ct]))<Ct);ct++);if(ct<Re.ticktext.length)return pt.text=String(Re.ticktext[ct]),pt.xbnd=[Mt(pt.x-.5),Mt(pt.x+Re.dtick-.5)],pt}function It(Bt){if(Bt===void 0)return!0;if(nt)return Bt==="none";var Ht={first:Re._tmin,last:Re._tmax}[Bt];return Bt!=="all"&&Fe!==Ht}var Wt=nt?"never":Re.exponentformat!=="none"&&It(Re.showexponent)?"hide":"";if(kt==="date"?function(Bt,Ht,Qt,Cn){var Tn=Bt._tickround,hn=Qt&&Bt.hoverformat||K.getTickFormat(Bt);(Cn=!hn&&Cn)&&(Tn=k(Tn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Tn]);var Zt,an=b.formatDate(Ht.x,hn,Tn,Bt._dateFormat,Bt.calendar,Bt._extraFormat),$t=an.indexOf(`
`);if($t!==-1&&(Zt=an.substr($t+1),an=an.substr(0,$t)),Cn&&(Zt===void 0||an!=="00:00:00"&&an!=="00:00"?an.length===8&&(an=an.replace(/:00$/,"")):(an=Zt,Zt="")),Zt)if(Qt)Tn==="d"?an+=", "+Zt:an=Zt+(an?", "+an:"");else if(Bt._inCalcTicks&&Bt._prevDateHead===Zt){var ln=Ge(Bt),mn=Bt._trueSide||Bt.side;(!ln&&mn==="top"||ln&&mn==="bottom")&&(an+="<br> ")}else Bt._prevDateHead=Zt,an+="<br>"+Zt;Ht.text=an}(Re,pt,nt,ut):kt==="log"?function(Bt,Ht,Qt,Cn,Tn){var hn=Bt.dtick,Zt=Ht.x,an=Bt.tickformat,$t=typeof hn=="string"&&hn.charAt(0);if(Tn==="never"&&(Tn=""),Cn&&$t!=="L"&&(hn="L3",$t="L"),an||$t==="L")Ht.text=Ve(Math.pow(10,Zt),Bt,Tn,Cn);else if(k(hn)||$t==="D"&&b.mod(Zt+.01,1)<.1){var ln=Math.round(Zt),mn=Math.abs(ln),xn=Bt.exponentformat;xn==="power"||Pe(xn)&&Ne(ln)?(Ht.text=ln===0?1:ln===1?"10":"10<sup>"+(ln>1?"":C)+mn+"</sup>",Ht.fontSize*=1.25):(xn==="e"||xn==="E")&&mn>2?Ht.text="1"+xn+(ln>0?"+":C)+mn:(Ht.text=Ve(Math.pow(10,Zt),Bt,"","fakehover"),hn==="D1"&&Bt._id.charAt(0)==="y"&&(Ht.dy-=Ht.fontSize/6))}else{if($t!=="D")throw"unrecognized dtick "+String(hn);Ht.text=String(Math.round(Math.pow(10,b.mod(Zt,1)))),Ht.fontSize*=.75}if(Bt.dtick==="D1"){var Pn=String(Ht.text).charAt(0);Pn!=="0"&&Pn!=="1"||(Bt._id.charAt(0)==="y"?Ht.dx-=Ht.fontSize/4:(Ht.dy+=Ht.fontSize/2,Ht.dx+=(Bt.range[1]>Bt.range[0]?1:-1)*Ht.fontSize*(Zt<0?.5:.25)))}}(Re,pt,0,ut,Wt):kt==="category"?function(Bt,Ht){var Qt=Bt._categories[Math.round(Ht.x)];Qt===void 0&&(Qt=""),Ht.text=String(Qt)}(Re,pt):kt==="multicategory"?function(Bt,Ht,Qt){var Cn=Math.round(Ht.x),Tn=Bt._categories[Cn]||[],hn=Tn[1]===void 0?"":String(Tn[1]),Zt=Tn[0]===void 0?"":String(Tn[0]);Qt?Ht.text=Zt+" - "+hn:(Ht.text=hn,Ht.text2=Zt)}(Re,pt,nt):Ze(Re)?function(Bt,Ht,Qt,Cn,Tn){if(Bt.thetaunit!=="radians"||Qt)Ht.text=Ve(Ht.x,Bt,Tn,Cn);else{var hn=Ht.x/180;if(hn===0)Ht.text="0";else{var Zt=function($t){function ln(Mn,_n){return Math.abs(Mn-_n)<=1e-6}var mn=function(Mn){for(var _n=1;!ln(Math.round(Mn*_n)/_n,Mn);)_n*=10;return _n}($t),xn=$t*mn,Pn=Math.abs(function Mn(_n,Rn){return ln(Rn,0)?_n:Mn(Rn,_n%Rn)}(xn,mn));return[Math.round(xn/Pn),Math.round(mn/Pn)]}(hn);if(Zt[1]>=100)Ht.text=Ve(b.deg2rad(Ht.x),Bt,Tn,Cn);else{var an=Ht.x<0;Zt[1]===1?Zt[0]===1?Ht.text="":Ht.text=Zt[0]+"":Ht.text=["<sup>",Zt[0],"</sup>","","<sub>",Zt[1],"</sub>",""].join(""),an&&(Ht.text=C+Ht.text)}}}}(Re,pt,nt,ut,Wt):function(Bt,Ht,Qt,Cn,Tn){Tn==="never"?Tn="":Bt.showexponent==="all"&&Math.abs(Ht.x/Bt.dtick)<1e-6&&(Tn="hide"),Ht.text=Ve(Ht.x,Bt,Tn,Cn)}(Re,pt,0,ut,Wt),We||(Re.tickprefix&&!It(Re.showtickprefix)&&(pt.text=Re.tickprefix+pt.text),Re.ticksuffix&&!It(Re.showticksuffix)&&(pt.text+=Re.ticksuffix)),Re.labelalias&&Re.labelalias.hasOwnProperty(pt.text)){var Nt=Re.labelalias[pt.text];typeof Nt=="string"&&(pt.text=Nt)}return(Re.tickson==="boundaries"||Re.showdividers)&&(pt.xbnd=[Mt(pt.x-.5),Mt(pt.x+Re.dtick-.5)]),pt},K.hoverLabelText=function(Re,Fe,nt){nt&&(Re=b.extendFlat({},Re,{hoverformat:nt}));var We=b.isArrayOrTypedArray(Fe)?Fe[0]:Fe,ct=b.isArrayOrTypedArray(Fe)?Fe[1]:void 0;if(ct!==void 0&&ct!==We)return K.hoverLabelText(Re,We,nt)+" - "+K.hoverLabelText(Re,ct,nt);var pt=Re.type==="log"&&We<=0,gt=K.tickText(Re,Re.c2l(pt?-We:We),"hover").text;return pt?We===0?"0":C+gt:gt};var ze=["f","p","n","","m","","k","M","G","T"];function Pe(Re){return Re==="SI"||Re==="B"}function Ne(Re){return Re>14||Re<-15}function Ve(Re,Fe,nt,We){var ct=Re<0,pt=Fe._tickround,gt=nt||Fe.exponentformat||"B",ut=Fe._tickexponent,kt=K.getTickFormat(Fe),yt=Fe.separatethousands;if(We){var Mt={exponentformat:gt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:k(Re)&&Math.abs(Re)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,Re||1]};me(Mt),pt=(Number(Mt._tickround)||0)+4,ut=Mt._tickexponent,Fe.hoverformat&&(kt=Fe.hoverformat)}if(kt)return Fe._numFormat(kt)(Re).replace(/-/g,C);var Lt,Ct=Math.pow(10,-pt)/2;if(gt==="none"&&(ut=0),(Re=Math.abs(Re))<Ct)Re="0",ct=!1;else{if(Re+=Ct,ut&&(Re*=Math.pow(10,-ut),pt+=ut),pt===0)Re=String(Math.floor(Re));else if(pt<0){Re=(Re=String(Math.round(Re))).substr(0,Re.length+pt);for(var It=pt;It<0;It++)Re+="0"}else{var Wt=(Re=String(Re)).indexOf(".")+1;Wt&&(Re=Re.substr(0,Wt+pt).replace(/\.?0+$/,""))}Re=b.numSeparate(Re,Fe._separators,yt)}return ut&&gt!=="hide"&&(Pe(gt)&&Ne(ut)&&(gt="power"),Lt=ut<0?C+-ut:gt!=="power"?"+"+ut:String(ut),gt==="e"||gt==="E"?Re+=gt+Lt:gt==="power"?Re+="10<sup>"+Lt+"</sup>":gt==="B"&&ut===9?Re+="B":Pe(gt)&&(Re+=ze[ut/3+5])),ct?C+Re:Re}function Ye(Re,Fe){if(Re){var nt=Object.keys(F).reduce(function(We,ct){return Fe.indexOf(ct)!==-1&&F[ct].forEach(function(pt){We[pt]=1}),We},{});Object.keys(Re).forEach(function(We){nt[We]||(We.length===1?Re[We]=0:delete Re[We])})}}function at(Re,Fe){for(var nt=[],We={},ct=0;ct<Fe.length;ct++){var pt=Fe[ct];We[pt.text2]?We[pt.text2].push(pt.x):We[pt.text2]=[pt.x]}for(var gt in We)nt.push(Me(Re,b.interp(We[gt],.5),gt));return nt}function rt(Re){return Re.periodX!==void 0?Re.periodX:Re.x}function dt(Re){return[Re.text,Re.x,Re.axInfo,Re.font,Re.fontSize,Re.fontColor].join("_")}function vt(Re){var Fe=Re.title.font.size,nt=(Re.title.text.match(s.BR_TAG_ALL)||[]).length;return Re.title.hasOwnProperty("standoff")?Fe*(te+nt*J):nt?Fe*(nt+1)*J:Fe}function ht(Re,Fe){var nt=Re.l2p(Fe);return nt>1&&nt<Re._length-1}function et(Re){var Fe=M.select(Re),nt=Fe.select(".text-math-group");return nt.empty()?Fe.select("text"):nt}function $e(Re){return Re._id+".automargin"}function wt(Re){return $e(Re)+".mirror"}function Pt(Re){return Re._id+".rangeslider"}function Ot(Re,Fe){for(var nt=0;nt<Fe.length;nt++)Re.indexOf(Fe[nt])===-1&&Re.push(Fe[nt])}function At(Re,Fe,nt){var We,ct,pt=[],gt=[],ut=Re.layout;for(We=0;We<Fe.length;We++)pt.push(K.getFromId(Re,Fe[We]));for(We=0;We<nt.length;We++)gt.push(K.getFromId(Re,nt[We]));var kt=Object.keys(r),yt=["anchor","domain","overlaying","position","side","tickangle","editType"],Mt=["linear","log"];for(We=0;We<kt.length;We++){var Lt=kt[We],Ct=pt[0][Lt],It=gt[0][Lt],Wt=!0,Nt=!1,Bt=!1;if(Lt.charAt(0)!=="_"&&typeof Ct!="function"&&yt.indexOf(Lt)===-1){for(ct=1;ct<pt.length&&Wt;ct++){var Ht=pt[ct][Lt];Lt==="type"&&Mt.indexOf(Ct)!==-1&&Mt.indexOf(Ht)!==-1&&Ct!==Ht?Nt=!0:Ht!==Ct&&(Wt=!1)}for(ct=1;ct<gt.length&&Wt;ct++){var Qt=gt[ct][Lt];Lt==="type"&&Mt.indexOf(It)!==-1&&Mt.indexOf(Qt)!==-1&&It!==Qt?Bt=!0:gt[ct][Lt]!==It&&(Wt=!1)}Wt&&(Nt&&(ut[pt[0]._name].type="linear"),Bt&&(ut[gt[0]._name].type="linear"),He(ut,Lt,pt,gt,Re._fullLayout._dfltTitle))}}for(We=0;We<Re._fullLayout.annotations.length;We++){var Cn=Re._fullLayout.annotations[We];Fe.indexOf(Cn.xref)!==-1&&nt.indexOf(Cn.yref)!==-1&&b.swapAttrs(ut.annotations[We],["?"])}}function He(Re,Fe,nt,We,ct){var pt,gt=b.nestedProperty,ut=gt(Re[nt[0]._name],Fe).get(),kt=gt(Re[We[0]._name],Fe).get();for(Fe==="title"&&(ut&&ut.text===ct.x&&(ut.text=ct.y),kt&&kt.text===ct.y&&(kt.text=ct.x)),pt=0;pt<nt.length;pt++)gt(Re,nt[pt]._name+"."+Fe).set(kt);for(pt=0;pt<We.length;pt++)gt(Re,We[pt]._name+"."+Fe).set(ut)}function Ze(Re){return Re._id==="angularaxis"}function Be(Re,Fe){for(var nt=Fe._rangebreaks.length,We=0;We<nt;We++){var ct=Fe._rangebreaks[We];if(Re>=ct.min&&Re<ct.max)return ct.max}return Re}function Ge(Re){return(Re.ticklabelposition||"").indexOf("inside")!==-1}function it(Re,Fe){Ge(Re._anchorAxis||{})&&Re._hideCounterAxisInsideTickLabels&&Re._hideCounterAxisInsideTickLabels(Fe)}function tt(Re,Fe,nt,We){var ct,pt=Re.anchor==="free"||Re.overlaying!==void 0&&Re.overlaying!==!1?Re.overlaying:Re._id;ct=We?Re.side==="right"?Fe:-Fe:Fe,pt in nt||(nt[pt]={}),Re.side in nt[pt]||(nt[pt][Re.side]=0),nt[pt][Re.side]+=ct}K.getTickFormat=function(Re){var Fe,nt,We,ct,pt,gt,ut,kt;function yt(Ct){return typeof Ct!="string"?Ct:Number(Ct.replace("M",""))*y}function Mt(Ct,It){var Wt=["L","D"];if(typeof Ct==typeof It){if(typeof Ct=="number")return Ct-It;var Nt=Wt.indexOf(Ct.charAt(0)),Bt=Wt.indexOf(It.charAt(0));return Nt===Bt?Number(Ct.replace(/(L|D)/g,""))-Number(It.replace(/(L|D)/g,"")):Nt-Bt}return typeof Ct=="number"?1:-1}function Lt(Ct,It){var Wt=It[0]===null,Nt=It[1]===null,Bt=Mt(Ct,It[0])>=0,Ht=Mt(Ct,It[1])<=0;return(Wt||Bt)&&(Nt||Ht)}if(Re.tickformatstops&&Re.tickformatstops.length>0)switch(Re.type){case"date":case"linear":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((We=Re.tickformatstops[Fe]).enabled&&(ct=Re.dtick,pt=We.dtickrange,gt=void 0,ut=void 0,kt=void 0,gt=yt||function(Ct){return Ct},ut=pt[0],kt=pt[1],(!ut&&typeof ut!="number"||gt(ut)<=gt(ct))&&(!kt&&typeof kt!="number"||gt(kt)>=gt(ct)))){nt=We;break}break;case"log":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((We=Re.tickformatstops[Fe]).enabled&&Lt(Re.dtick,We.dtickrange)){nt=We;break}}return nt?nt.value:Re.tickformat},K.getSubplots=function(Re,Fe){var nt=Re._fullLayout._subplots,We=nt.cartesian.concat(nt.gl2d||[]),ct=Fe?K.findSubplotsWithAxis(We,Fe):We;return ct.sort(function(pt,gt){var ut=pt.substr(1).split("y"),kt=gt.substr(1).split("y");return ut[0]===kt[0]?+ut[1]-+kt[1]:+ut[0]-+kt[0]}),ct},K.findSubplotsWithAxis=function(Re,Fe){for(var nt=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),We=[],ct=0;ct<Re.length;ct++){var pt=Re[ct];nt.test(pt)&&We.push(pt)}return We},K.makeClipPaths=function(Re){var Fe=Re._fullLayout;if(!Fe._hasOnlyLargeSploms){var nt,We,ct={_offset:0,_length:Fe.width,_id:""},pt={_offset:0,_length:Fe.height,_id:""},gt=K.list(Re,"x",!0),ut=K.list(Re,"y",!0),kt=[];for(nt=0;nt<gt.length;nt++)for(kt.push({x:gt[nt],y:pt}),We=0;We<ut.length;We++)nt===0&&kt.push({x:ct,y:ut[We]}),kt.push({x:gt[nt],y:ut[We]});var yt=Fe._clips.selectAll(".axesclip").data(kt,function(Mt){return Mt.x._id+Mt.y._id});yt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Mt){return"clip"+Fe._uid+Mt.x._id+Mt.y._id}).append("rect"),yt.exit().remove(),yt.each(function(Mt){M.select(this).select("rect").attr({x:Mt.x._offset||0,y:Mt.y._offset||0,width:Mt.x._length||1,height:Mt.y._length||1})})}},K.draw=function(Re,Fe,nt){var We=Re._fullLayout;Fe==="redraw"&&We._paper.selectAll("g.subplot").each(function(ut){var kt=ut[0],yt=We._plots[kt];if(yt){var Mt=yt.xaxis,Lt=yt.yaxis;yt.xaxislayer.selectAll("."+Mt._id+"tick").remove(),yt.yaxislayer.selectAll("."+Lt._id+"tick").remove(),yt.xaxislayer.selectAll("."+Mt._id+"tick2").remove(),yt.yaxislayer.selectAll("."+Lt._id+"tick2").remove(),yt.xaxislayer.selectAll("."+Mt._id+"divider").remove(),yt.yaxislayer.selectAll("."+Lt._id+"divider").remove(),yt.minorGridlayer&&yt.minorGridlayer.selectAll("path").remove(),yt.gridlayer&&yt.gridlayer.selectAll("path").remove(),yt.zerolinelayer&&yt.zerolinelayer.selectAll("path").remove(),We._infolayer.select(".g-"+Mt._id+"title").remove(),We._infolayer.select(".g-"+Lt._id+"title").remove()}});var ct=Fe&&Fe!=="redraw"?Fe:K.listIds(Re),pt=K.list(Re).filter(function(ut){return ut.autoshift}).map(function(ut){return ut.overlaying});ct.map(function(ut){var kt=K.getFromId(Re,ut);if(kt.tickmode==="sync"&&kt.overlaying){var yt=ct.findIndex(function(Mt){return Mt===kt.overlaying});yt>=0&&ct.unshift(ct.splice(yt,1).shift())}});var gt={false:{left:0,right:0}};return b.syncOrAsync(ct.map(function(ut){return function(){if(ut){var kt=K.getFromId(Re,ut);nt||(nt={}),nt.axShifts=gt,nt.overlayingShiftedAx=pt;var yt=K.drawOne(Re,kt,nt);return kt._shiftPusher&&tt(kt,kt._fullDepth||0,gt,!0),kt._r=kt.range.slice(),kt._rl=b.simpleMap(kt._r,kt.r2l),yt}}}))},K.drawOne=function(Re,Fe,nt){var We,ct,pt,gt=(nt=nt||{}).axShifts||{},ut=nt.overlayingShiftedAx||[];Fe.setScale();var kt=Re._fullLayout,yt=Fe._id,Mt=yt.charAt(0),Lt=K.counterLetter(yt),Ct=kt._plots[Fe._mainSubplot];if(Ct){if(Fe._shiftPusher=Fe.autoshift||ut.indexOf(Fe._id)!==-1||ut.indexOf(Fe.overlaying)!==-1,Fe._shiftPusher&Fe.anchor==="free"){var It=Fe.linewidth/2||0;Fe.ticks==="inside"&&(It+=Fe.ticklen),tt(Fe,It,gt,!0),tt(Fe,Fe.shift||0,gt,!1)}nt.skipTitle===!0&&Fe._shift!==void 0||(Fe._shift=function(tn,Vt){return tn.autoshift?Vt[tn.overlaying][tn.side]:tn.shift||0}(Fe,gt));var Wt=Ct[Mt+"axislayer"],Nt=Fe._mainLinePosition,Bt=Nt+=Fe._shift,Ht=Fe._mainMirrorPosition,Qt=Fe._vals=K.calcTicks(Fe),Cn=[Fe.mirror,Bt,Ht].join("_");for(We=0;We<Qt.length;We++)Qt[We].axInfo=Cn;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var Tn={};if(Fe.visible){var hn,Zt,an=K.makeTransTickFn(Fe),$t=K.makeTransTickLabelFn(Fe),ln=Fe.ticks==="inside",mn=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var xn=function(tn,Vt){var Gt,nn=[],sn=function(wn,An){var zn=wn.xbnd[An];zn!==null&&nn.push(b.extendFlat({},wn,{x:zn}))};if(Vt.length){for(Gt=0;Gt<Vt.length;Gt++)sn(Vt[Gt],0);sn(Vt[Gt-1],1)}return nn}(0,Qt);Zt=K.clipEnds(Fe,xn),hn=ln?Zt:xn}else Zt=K.clipEnds(Fe,Qt),hn=ln&&Fe.ticklabelmode!=="period"?Zt:Qt;var Pn,Mn=Fe._gridVals=Zt,_n=function(tn,Vt){var Gt,nn,sn=[],wn=Vt.length&&Vt[Vt.length-1].x<Vt[0].x,An=function(Fn,Xn){var jn=Fn.xbnd[Xn];jn!==null&&sn.push(b.extendFlat({},Fn,{x:jn}))};if(tn.showdividers&&Vt.length){for(Gt=0;Gt<Vt.length;Gt++){var zn=Vt[Gt];zn.text2!==nn&&An(zn,wn?1:0),nn=zn.text2}An(Vt[Gt-1],wn?0:1)}return sn}(Fe,Qt);if(!kt._hasOnlyLargeSploms){var Rn=Fe._subplotsWith,In={};for(We=0;We<Rn.length;We++){ct=Rn[We];var Vn=(pt=kt._plots[ct])[Lt+"axis"],tr=Vn._mainAxis._id;if(!In[tr]){In[tr]=1;var er=Mt==="x"?"M0,"+Vn._offset+"v"+Vn._length:"M"+Vn._offset+",0h"+Vn._length;K.drawGrid(Re,Fe,{vals:Mn,counterAxis:Vn,layer:pt.gridlayer.select("."+yt),minorLayer:pt.minorGridlayer.select("."+yt),path:er,transFn:an}),K.drawZeroLine(Re,Fe,{counterAxis:Vn,layer:pt.zerolinelayer,path:er,transFn:an})}}}var Wn=K.getTickSigns(Fe),or=K.getTickSigns(Fe,"minor");if(Fe.ticks||Fe.minor&&Fe.minor.ticks){var Jt,en,En,gn,Ln=K.makeTickPath(Fe,Bt,Wn[2]),Hn=K.makeTickPath(Fe,Bt,or[2],{minor:!0});if(Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(Jt=K.makeTickPath(Fe,Ht,Wn[3]),en=K.makeTickPath(Fe,Ht,or[3],{minor:!0}),En=Ln+Jt,gn=Hn+en):(Jt="",en="",En=Ln,gn=Hn),Fe.showdividers&&mn&&Fe.tickson==="boundaries"){var Nn={};for(We=0;We<_n.length;We++)Nn[_n[We].x]=1;Pn=function(tn){return Nn[tn.x]?Jt:En}}else Pn=function(tn){return tn.minor?gn:En}}if(K.drawTicks(Re,Fe,{vals:hn,layer:Wt,path:Pn,transFn:an}),Fe.mirror==="allticks"){var Yn=Object.keys(Fe._linepositions||{});for(We=0;We<Yn.length;We++){ct=Yn[We],pt=kt._plots[ct];var fr=Fe._linepositions[ct]||[],Xt=fr[0],pn=fr[1],bt=fr[2],Ut=K.makeTickPath(Fe,Xt,bt?Wn[0]:or[0],{minor:bt})+K.makeTickPath(Fe,pn,bt?Wn[1]:or[1],{minor:bt});K.drawTicks(Re,Fe,{vals:hn,layer:pt[Mt+"axislayer"],path:Ut,transFn:an})}}var Kt=[];if(Kt.push(function(){return K.drawLabels(Re,Fe,{vals:Qt,layer:Wt,plotinfo:pt,transFn:$t,labelFns:K.makeLabelFns(Fe,Bt)})}),Fe.type==="multicategory"){var un={x:2,y:10}[Mt];Kt.push(function(){var tn={x:"height",y:"width"}[Mt],Vt=vn()[tn]+un+(Fe._tickAngles[yt+"tick"]?Fe.tickfont.size*J:0);return K.drawLabels(Re,Fe,{vals:at(Fe,Qt),layer:Wt,cls:yt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:an,labelFns:K.makeLabelFns(Fe,Bt+Vt*Wn[4])})}),Kt.push(function(){return Fe._depth=Wn[4]*(vn("tick2")[Fe.side]-Bt),function(tn,Vt,Gt){var nn=Vt._id+"divider",sn=Gt.vals,wn=Gt.layer.selectAll("path."+nn).data(sn,dt);wn.exit().remove(),wn.enter().insert("path",":first-child").classed(nn,1).classed("crisp",1).call(a.stroke,Vt.dividercolor).style("stroke-width",n.crispRound(tn,Vt.dividerwidth,1)+"px"),wn.attr("transform",Gt.transFn).attr("d",Gt.path)}(Re,Fe,{vals:_n,layer:Wt,path:K.makeTickPath(Fe,Bt,Wn[4],{len:Fe._depth}),transFn:an})})}else Fe.title.hasOwnProperty("standoff")&&Kt.push(function(){Fe._depth=Wn[4]*(vn()[Fe.side]-Bt)});var cn=T.getComponentMethod("rangeslider","isVisible")(Fe);return nt.skipTitle||cn&&Fe.side==="bottom"||Kt.push(function(){return function(tn,Vt){var Gt,nn=tn._fullLayout,sn=Vt._id,wn=sn.charAt(0),An=Vt.title.font.size,zn=(Vt.title.text.match(s.BR_TAG_ALL)||[]).length;if(Vt.title.hasOwnProperty("standoff"))Vt.side==="bottom"||Vt.side==="right"?Gt=Vt._depth+Vt.title.standoff+An*te:Vt.side!=="top"&&Vt.side!=="left"||(Gt=Vt._depth+Vt.title.standoff+An*(U+zn*J));else{var Fn=Ge(Vt);if(Vt.type==="multicategory")Gt=Vt._depth;else{var Xn=1.5*An;Fn&&(Xn=.5*An,Vt.ticks==="outside"&&(Xn+=Vt.ticklen)),Gt=10+Xn+(Vt.linewidth?Vt.linewidth-1:0)}Fn||(Gt+=wn==="x"?Vt.side==="top"?An*(Vt.showticklabels?1:0):An*(Vt.showticklabels?1.5:.5):Vt.side==="right"?An*(Vt.showticklabels?1:.5):An*(Vt.showticklabels?.5:0))}var jn,Qn,Jn,Zn,ur=K.getPxPosition(tn,Vt);if(wn==="x"?(Qn=Vt._offset+Vt._length/2,Jn=Vt.side==="top"?ur-Gt:ur+Gt):(Jn=Vt._offset+Vt._length/2,Qn=Vt.side==="right"?ur+Gt:ur-Gt,jn={rotate:"-90",offset:0}),Vt.type!=="multicategory"){var mr=Vt._selections[Vt._id+"tick"];if(Zn={selection:mr,side:Vt.side},mr&&mr.node()&&mr.node().parentNode){var hr=n.getTranslate(mr.node().parentNode);Zn.offsetLeft=hr.x,Zn.offsetTop=hr.y}Vt.title.hasOwnProperty("standoff")&&(Zn.pad=0)}return Vt._titleStandoff=Gt,t.draw(tn,sn+"title",{propContainer:Vt,propName:Vt._name+".title.text",placeholder:nn._dfltTitle[wn],avoid:Zn,transform:jn,attributes:{x:Qn,y:Jn,"text-anchor":"middle"}})}(Re,Fe)}),Kt.push(function(){var tn,Vt,Gt,nn,sn=Fe.side.charAt(0),wn=X[Fe.side].charAt(0),An=K.getPxPosition(Re,Fe),zn=mn?Fe.ticklen:0;(Fe.automargin||cn||Fe._shiftPusher)&&(Fe.type==="multicategory"?tn=vn("tick2"):(tn=vn(),Mt==="x"&&sn==="b"&&(Fe._depth=Math.max(tn.width>0?tn.bottom-An:0,zn))));var Fn=0,Xn=0;if(Fe._shiftPusher&&(Fn=Math.max(zn,tn.height>0?sn==="l"?An-tn.left:tn.right-An:0),Fe.title.text!==kt._dfltTitle[Mt]&&(Xn=(Fe._titleStandoff||0)+(Fe._titleScoot||0),sn==="l"&&(Xn+=vt(Fe))),Fe._fullDepth=Math.max(Fn,Xn)),Fe.automargin){Vt={x:0,y:0,r:0,l:0,t:0,b:0};var jn=[0,1],Qn=typeof Fe._shift=="number"?Fe._shift:0;if(Mt==="x"){if(sn==="b"?Vt[sn]=Fe._depth:(Vt[sn]=Fe._depth=Math.max(tn.width>0?An-tn.top:0,zn),jn.reverse()),tn.width>0){var Jn=tn.right-(Fe._offset+Fe._length);Jn>0&&(Vt.xr=1,Vt.r=Jn);var Zn=Fe._offset-tn.left;Zn>0&&(Vt.xl=0,Vt.l=Zn)}}else if(sn==="l"?(Fe._depth=Math.max(tn.height>0?An-tn.left:0,zn),Vt[sn]=Fe._depth-Qn):(Fe._depth=Math.max(tn.height>0?tn.right-An:0,zn),Vt[sn]=Fe._depth+Qn,jn.reverse()),tn.height>0){var ur=tn.bottom-(Fe._offset+Fe._length);ur>0&&(Vt.yb=0,Vt.b=ur);var mr=Fe._offset-tn.top;mr>0&&(Vt.yt=1,Vt.t=mr)}Vt[Lt]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[jn[0]],Fe.title.text!==kt._dfltTitle[Mt]&&(Vt[sn]+=vt(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&((Gt={x:0,y:0,r:0,l:0,t:0,b:0})[wn]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(Gt[wn]+=zn),Fe.mirror===!0||Fe.mirror==="ticks"?Gt[Lt]=Fe._anchorAxis.domain[jn[1]]:Fe.mirror!=="all"&&Fe.mirror!=="allticks"||(Gt[Lt]=[Fe._counterDomainMin,Fe._counterDomainMax][jn[1]]))}cn&&(nn=T.getComponentMethod("rangeslider","autoMarginOpts")(Re,Fe)),typeof Fe.automargin=="string"&&(Ye(Vt,Fe.automargin),Ye(Gt,Fe.automargin)),o.autoMargin(Re,$e(Fe),Vt),o.autoMargin(Re,wt(Fe),Gt),o.autoMargin(Re,Pt(Fe),nn)}),b.syncOrAsync(Kt)}}function vn(tn){var Vt=yt+(tn||"tick");return Tn[Vt]||(Tn[Vt]=function(Gt,nn,sn){var wn,An,zn,Fn;if(Gt._selections[nn].size())wn=1/0,An=-1/0,zn=1/0,Fn=-1/0,Gt._selections[nn].each(function(){var jn=et(this),Qn=n.bBox(jn.node().parentNode);wn=Math.min(wn,Qn.top),An=Math.max(An,Qn.bottom),zn=Math.min(zn,Qn.left),Fn=Math.max(Fn,Qn.right)});else{var Xn=K.makeLabelFns(Gt,sn);wn=An=Xn.yFn({dx:0,dy:0,fontSize:0}),zn=Fn=Xn.xFn({dx:0,dy:0,fontSize:0})}return{top:wn,bottom:An,left:zn,right:Fn,height:An-wn,width:Fn-zn}}(Fe,Vt,Bt)),Tn[Vt]}},K.getTickSigns=function(Re,Fe){var nt=Re._id.charAt(0),We={x:"top",y:"right"}[nt],ct=Re.side===We?1:-1,pt=[-1,1,ct,-ct];return(Fe?(Re.minor||{}).ticks:Re.ticks)!=="inside"==(nt==="x")&&(pt=pt.map(function(gt){return-gt})),Re.side&&pt.push({l:-1,t:-1,r:1,b:1}[Re.side.charAt(0)]),pt},K.makeTransTickFn=function(Re){return Re._id.charAt(0)==="x"?function(Fe){return h(Re._offset+Re.l2p(Fe.x),0)}:function(Fe){return h(0,Re._offset+Re.l2p(Fe.x))}},K.makeTransTickLabelFn=function(Re){var Fe=function(ct){var pt=ct.ticklabelposition||"",gt=function(Ht){return pt.indexOf(Ht)!==-1},ut=gt("top"),kt=gt("left"),yt=gt("right"),Mt=gt("bottom"),Lt=gt("inside"),Ct=Mt||kt||ut||yt;if(!Ct&&!Lt)return[0,0];var It=ct.side,Wt=Ct?(ct.tickwidth||0)/2:0,Nt=3,Bt=ct.tickfont?ct.tickfont.size:12;return(Mt||ut)&&(Wt+=Bt*te,Nt+=(ct.linewidth||0)/2),(kt||yt)&&(Wt+=(ct.linewidth||0)/2,Nt+=3),Lt&&It==="top"&&(Nt-=Bt*(1-te)),(kt||ut)&&(Wt=-Wt),It!=="bottom"&&It!=="right"||(Nt=-Nt),[Ct?Wt:0,Lt?Nt:0]}(Re),nt=Fe[0],We=Fe[1];return Re._id.charAt(0)==="x"?function(ct){return h(nt+Re._offset+Re.l2p(rt(ct)),We)}:function(ct){return h(We,nt+Re._offset+Re.l2p(rt(ct)))}},K.makeTickPath=function(Re,Fe,nt,We){We||(We={});var ct=We.minor;if(ct&&!Re.minor)return"";var pt=We.len!==void 0?We.len:ct?Re.minor.ticklen:Re.ticklen,gt=Re._id.charAt(0),ut=(Re.linewidth||1)/2;return gt==="x"?"M0,"+(Fe+ut*nt)+"v"+pt*nt:"M"+(Fe+ut*nt)+",0h"+pt*nt},K.makeLabelFns=function(Re,Fe,nt){var We=Re.ticklabelposition||"",ct=function(xn){return We.indexOf(xn)!==-1},pt=ct("top"),gt=ct("left"),ut=ct("right"),kt=ct("bottom")||gt||pt||ut,yt=ct("inside"),Mt=We==="inside"&&Re.ticks==="inside"||!yt&&Re.ticks==="outside"&&Re.tickson!=="boundaries",Lt=0,Ct=0,It=Mt?Re.ticklen:0;if(yt?It*=-1:kt&&(It=0),Mt&&(Lt+=It,nt)){var Wt=b.deg2rad(nt);Lt=It*Math.cos(Wt)+1,Ct=It*Math.sin(Wt)}Re.showticklabels&&(Mt||Re.showline)&&(Lt+=.2*Re.tickfont.size);var Nt,Bt,Ht,Qt,Cn,Tn={labelStandoff:Lt+=(Re.linewidth||1)/2*(yt?-1:1),labelShift:Ct},hn=0,Zt=Re.side,an=Re._id.charAt(0),$t=Re.tickangle;if(an==="x")Qt=(Cn=!yt&&Zt==="bottom"||yt&&Zt==="top")?1:-1,yt&&(Qt*=-1),Nt=Ct*Qt,Bt=Fe+Lt*Qt,Ht=Cn?1:-.2,Math.abs($t)===90&&(yt?Ht+=U:Ht=$t===-90&&Zt==="bottom"?te:$t===90&&Zt==="top"?U:.5,hn=U/2*($t/90)),Tn.xFn=function(xn){return xn.dx+Nt+hn*xn.fontSize},Tn.yFn=function(xn){return xn.dy+Bt+xn.fontSize*Ht},Tn.anchorFn=function(xn,Pn){if(kt){if(gt)return"end";if(ut)return"start"}return k(Pn)&&Pn!==0&&Pn!==180?Pn*Qt<0!==yt?"end":"start":"middle"},Tn.heightFn=function(xn,Pn,Mn){return Pn<-60||Pn>60?-.5*Mn:Re.side==="top"!==yt?-Mn:0};else if(an==="y"){if(Qt=(Cn=!yt&&Zt==="left"||yt&&Zt==="right")?1:-1,yt&&(Qt*=-1),Nt=Lt,Bt=Ct*Qt,Ht=0,yt||Math.abs($t)!==90||(Ht=$t===-90&&Zt==="left"||$t===90&&Zt==="right"?te:.5),yt){var ln=k($t)?+$t:0;if(ln!==0){var mn=b.deg2rad(ln);hn=Math.abs(Math.sin(mn))*te*Qt,Ht=0}}Tn.xFn=function(xn){return xn.dx+Fe-(Nt+xn.fontSize*Ht)*Qt+hn*xn.fontSize},Tn.yFn=function(xn){return xn.dy+Bt+xn.fontSize*U},Tn.anchorFn=function(xn,Pn){return k(Pn)&&Math.abs(Pn)===90?"middle":Cn?"end":"start"},Tn.heightFn=function(xn,Pn,Mn){return Re.side==="right"&&(Pn*=-1),Pn<-30?-Mn:Pn<30?-.5*Mn:0}}return Tn},K.drawTicks=function(Re,Fe,nt){nt=nt||{};var We=Fe._id+"tick",ct=[].concat(Fe.minor&&Fe.minor.ticks?nt.vals.filter(function(gt){return gt.minor&&!gt.noTick}):[]).concat(Fe.ticks?nt.vals.filter(function(gt){return!gt.minor&&!gt.noTick}):[]),pt=nt.layer.selectAll("path."+We).data(ct,dt);pt.exit().remove(),pt.enter().append("path").classed(We,1).classed("ticks",1).classed("crisp",nt.crisp!==!1).each(function(gt){return a.stroke(M.select(this),gt.minor?Fe.minor.tickcolor:Fe.tickcolor)}).style("stroke-width",function(gt){return n.crispRound(Re,gt.minor?Fe.minor.tickwidth:Fe.tickwidth,1)+"px"}).attr("d",nt.path).style("display",null),it(Fe,[N]),pt.attr("transform",nt.transFn)},K.drawGrid=function(Re,Fe,nt){if(nt=nt||{},Fe.tickmode!=="sync"){var We=Fe._id+"grid",ct=Fe.minor&&Fe.minor.showgrid,pt=ct?nt.vals.filter(function(Ht){return Ht.minor}):[],gt=Fe.showgrid?nt.vals.filter(function(Ht){return!Ht.minor}):[],ut=nt.counterAxis;if(ut&&K.shouldShowZeroLine(Re,Fe,ut))for(var kt=Fe.tickmode==="array",yt=0;yt<gt.length;yt++){var Mt=gt[yt].x;if(kt?!Mt:Math.abs(Mt)<Fe.dtick/100){if(gt=gt.slice(0,yt).concat(gt.slice(yt+1)),!kt)break;yt--}}Fe._gw=n.crispRound(Re,Fe.gridwidth,1);for(var Lt=ct?n.crispRound(Re,Fe.minor.gridwidth,1):0,Ct=nt.layer,It=nt.minorLayer,Wt=1;Wt>=0;Wt--){var Nt=Wt?Ct:It;if(Nt){var Bt=Nt.selectAll("path."+We).data(Wt?gt:pt,dt);Bt.exit().remove(),Bt.enter().append("path").classed(We,1).classed("crisp",nt.crisp!==!1),Bt.attr("transform",nt.transFn).attr("d",nt.path).each(function(Ht){return a.stroke(M.select(this),Ht.minor?Fe.minor.gridcolor:Fe.gridcolor||"#ddd")}).style("stroke-dasharray",function(Ht){return n.dashStyle(Ht.minor?Fe.minor.griddash:Fe.griddash,Ht.minor?Fe.minor.gridwidth:Fe.gridwidth)}).style("stroke-width",function(Ht){return(Ht.minor?Lt:Fe._gw)+"px"}).style("display",null),typeof nt.path=="function"&&Bt.attr("d",nt.path)}}it(Fe,[j,D])}},K.drawZeroLine=function(Re,Fe,nt){nt=nt||nt;var We=Fe._id+"zl",ct=K.shouldShowZeroLine(Re,Fe,nt.counterAxis),pt=nt.layer.selectAll("path."+We).data(ct?[{x:0,id:Fe._id}]:[]);pt.exit().remove(),pt.enter().append("path").classed(We,1).classed("zl",1).classed("crisp",nt.crisp!==!1).each(function(){nt.layer.selectAll("path").sort(function(gt,ut){return re(gt.id,ut.id)})}),pt.attr("transform",nt.transFn).attr("d",nt.path).call(a.stroke,Fe.zerolinecolor||a.defaultLine).style("stroke-width",n.crispRound(Re,Fe.zerolinewidth,Fe._gw||1)+"px").style("display",null),it(Fe,[R])},K.drawLabels=function(Re,Fe,nt){nt=nt||{};var We=Re._fullLayout,ct=Fe._id,pt=nt.cls||ct+"tick",gt=nt.vals.filter(function(In){return In.text}),ut=nt.labelFns,kt=nt.secondary?0:Fe.tickangle,yt=(Fe._prevTickAngles||{})[pt],Mt=nt.layer.selectAll("g."+pt).data(Fe.showticklabels?gt:[],dt),Lt=[];function Ct(In,Vn){In.each(function(tr){var er=M.select(this),Wn=er.select(".text-math-group"),or=ut.anchorFn(tr,Vn),Jt=nt.transFn.call(er.node(),tr)+(k(Vn)&&+Vn!=0?" rotate("+Vn+","+ut.xFn(tr)+","+(ut.yFn(tr)-tr.fontSize/2)+")":""),en=s.lineCount(er),En=J*tr.fontSize,gn=ut.heightFn(tr,k(Vn)?+Vn:0,(en-1)*En);if(gn&&(Jt+=h(0,gn)),Wn.empty()){var Ln=er.select("text");Ln.attr({transform:Jt,"text-anchor":or}),Ln.style("opacity",1),Fe._adjustTickLabelsOverflow&&Fe._adjustTickLabelsOverflow()}else{var Hn=n.bBox(Wn.node()).width*{end:-.5,start:.5}[or];Wn.attr("transform",Jt+h(Hn,0))}})}Mt.enter().append("g").classed(pt,1).append("text").attr("text-anchor","middle").each(function(In){var Vn=M.select(this),tr=Re._promises.length;Vn.call(s.positionText,ut.xFn(In),ut.yFn(In)).call(n.font,{family:In.font,size:In.fontSize,color:In.fontColor,weight:In.fontWeight,style:In.fontStyle,variant:In.fontVariant}).text(In.text).call(s.convertToTspans,Re),Re._promises[tr]?Lt.push(Re._promises.pop().then(function(){Ct(Vn,kt)})):Ct(Vn,kt)}),it(Fe,[W]),Mt.exit().remove(),nt.repositionOnUpdate&&Mt.each(function(In){M.select(this).select("text").call(s.positionText,ut.xFn(In),ut.yFn(In))}),Fe._adjustTickLabelsOverflow=function(){var In=Fe.ticklabeloverflow;if(In&&In!=="allow"){var Vn=In.indexOf("hide")!==-1,tr=Fe._id.charAt(0)==="x",er=0,Wn=tr?Re._fullLayout.width:Re._fullLayout.height;if(In.indexOf("domain")!==-1){var or=b.simpleMap(Fe.range,Fe.r2l);er=Fe.l2p(or[0])+Fe._offset,Wn=Fe.l2p(or[1])+Fe._offset}var Jt=Math.min(er,Wn),en=Math.max(er,Wn),En=Fe.side,gn=1/0,Ln=-1/0;for(var Hn in Mt.each(function(fr){var Xt=M.select(this);if(Xt.select(".text-math-group").empty()){var pn=n.bBox(Xt.node()),bt=0;tr?(pn.right>en||pn.left<Jt)&&(bt=1):(pn.bottom>en||pn.top+(Fe.tickangle?0:fr.fontSize/4)<Jt)&&(bt=1);var Ut=Xt.select("text");bt?Vn&&Ut.style("opacity",0):(Ut.style("opacity",1),gn=En==="bottom"||En==="right"?Math.min(gn,tr?pn.top:pn.left):-1/0,Ln=En==="top"||En==="left"?Math.max(Ln,tr?pn.bottom:pn.right):1/0)}}),We._plots){var Nn=We._plots[Hn];if(Fe._id===Nn.xaxis._id||Fe._id===Nn.yaxis._id){var Yn=tr?Nn.yaxis:Nn.xaxis;Yn&&(Yn["_visibleLabelMin_"+Fe._id]=gn,Yn["_visibleLabelMax_"+Fe._id]=Ln)}}}},Fe._hideCounterAxisInsideTickLabels=function(In){var Vn=Fe._id.charAt(0)==="x",tr=[];for(var er in We._plots){var Wn=We._plots[er];Fe._id!==Wn.xaxis._id&&Fe._id!==Wn.yaxis._id||tr.push(Vn?Wn.yaxis:Wn.xaxis)}tr.forEach(function(or,Jt){or&&Ge(or)&&(In||[R,D,j,N,W]).forEach(function(en){var En=en.K==="tick"&&en.L==="text"&&Fe.ticklabelmode==="period",gn=We._plots[Fe._mainSubplot];(en.K===R.K?gn.zerolinelayer.selectAll("."+Fe._id+"zl"):en.K===D.K?gn.minorGridlayer.selectAll("."+Fe._id):en.K===j.K?gn.gridlayer.selectAll("."+Fe._id):gn[Fe._id.charAt(0)+"axislayer"]).each(function(){var Ln=M.select(this);en.L&&(Ln=Ln.selectAll(en.L)),Ln.each(function(Hn){var Nn=Fe.l2p(En?rt(Hn):Hn.x)+Fe._offset,Yn=M.select(this);Nn<Fe["_visibleLabelMax_"+or._id]&&Nn>Fe["_visibleLabelMin_"+or._id]?Yn.style("display","none"):en.K!=="tick"||Jt||Yn.style("display",null)})})})})},Ct(Mt,yt+1?yt:kt);var It=null;Fe._selections&&(Fe._selections[pt]=Mt);var Wt=[function(){return Lt.length&&Promise.all(Lt)}];Fe.automargin&&We._redrawFromAutoMarginCount&&yt===90?(It=yt,Wt.push(function(){Ct(Mt,yt)})):Wt.push(function(){if(Ct(Mt,kt),gt.length&&Fe.autotickangles&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){It=Fe.autotickangles[0];var In,Vn=0,tr=[],er=1;Mt.each(function(vn){Vn=Math.max(Vn,vn.fontSize);var tn=Fe.l2p(vn.x),Vt=et(this),Gt=n.bBox(Vt.node());er=Math.max(er,s.lineCount(Vt)),tr.push({top:0,bottom:10,height:10,left:tn-Gt.width/2,right:tn+Gt.width/2+2,width:Gt.width+2})});var Wn=(Fe.tickson==="boundaries"||Fe.showdividers)&&!nt.secondary,or=gt.length,Jt=Math.abs((gt[or-1].x-gt[0].x)*Fe._m)/(or-1),en=Wn?Jt/2:Jt,En=Wn?Fe.ticklen:1.25*Vn*er,gn=en/Math.sqrt(Math.pow(en,2)+Math.pow(En,2)),Ln=Fe.autotickangles.map(function(vn){return vn*Math.PI/180}),Hn=Ln.find(function(vn){return Math.abs(Math.cos(vn))<=gn});Hn===void 0&&(Hn=Ln.reduce(function(vn,tn){return Math.abs(Math.cos(vn))<Math.abs(Math.cos(tn))?vn:tn},Ln[0]));var Nn=Hn*(180/Math.PI);if(Wn){var Yn=2;for(Fe.ticks&&(Yn+=Fe.tickwidth/2),In=0;In<tr.length;In++){var fr=gt[In].xbnd,Xt=tr[In];if(fr[0]!==null&&Xt.left-Fe.l2p(fr[0])<Yn||fr[1]!==null&&Fe.l2p(fr[1])-Xt.right<Yn){It=Nn;break}}}else{var pn=Fe.ticklabelposition||"",bt=function(vn){return pn.indexOf(vn)!==-1},Ut=bt("top"),Kt=bt("left"),un=bt("right"),cn=bt("bottom")||Kt||Ut||un?(Fe.tickwidth||0)+6:0;for(In=0;In<tr.length-1;In++)if(b.bBoxIntersect(tr[In],tr[In+1],cn)){It=Nn;break}}It&&Ct(Mt,It)}}),Fe._tickAngles&&Wt.push(function(){Fe._tickAngles[pt]=It===null?k(kt)?kt:0:It});var Nt=function(){var In=0,Vn=0;return Mt.each(function(tr,er){var Wn,or=et(this);or.select(".text-math-group").empty()&&(Fe._vals[er]&&(Wn=Fe._vals[er].bb||n.bBox(or.node()),Fe._vals[er].bb=Wn),In=Math.max(In,Wn.width),Vn=Math.max(Vn,Wn.height))}),{labelsMaxW:In,labelsMaxH:Vn}},Bt=Fe._anchorAxis;if(Bt&&(Bt.autorange||Bt.insiderange)&&Ge(Fe)&&!oe(We,Fe._id)&&(We._insideTickLabelsUpdaterange||(We._insideTickLabelsUpdaterange={}),Bt.autorange&&(We._insideTickLabelsUpdaterange[Bt._name+".autorange"]=Bt.autorange,Wt.push(Nt)),Bt.insiderange)){var Ht=Nt(),Qt=Fe._id.charAt(0)==="y"?Ht.labelsMaxW:Ht.labelsMaxH;Qt+=6,Fe.ticklabelposition==="inside"&&(Qt+=Fe.ticklen||0);var Cn=Fe.side==="right"||Fe.side==="top"?1:-1,Tn=Cn===1?1:0,hn=Cn===1?0:1,Zt=[];Zt[hn]=Bt.range[hn];var an=Bt.range,$t=Bt.r2p(an[Tn]),ln=Bt.r2p(an[hn]),mn=We._insideTickLabelsUpdaterange[Bt._name+".range"];if(mn){var xn=Bt.r2p(mn[Tn]),Pn=Bt.r2p(mn[hn]),Mn=Cn*(Fe._id.charAt(0)==="y"?1:-1);Mn*$t<Mn*xn&&($t=xn,Zt[Tn]=an[Tn]=mn[Tn]),Mn*ln>Mn*Pn&&(ln=Pn,Zt[hn]=an[hn]=mn[hn])}var _n=Math.abs(ln-$t);_n-Qt>0?Qt*=1+Qt/(_n-=Qt):Qt=0,Fe._id.charAt(0)!=="y"&&(Qt=-Qt),Zt[Tn]=Bt.p2r(Bt.r2p(an[Tn])+Cn*Qt),Bt.autorange==="min"||Bt.autorange==="max reversed"?(Zt[0]=null,Bt._rangeInitial0=void 0,Bt._rangeInitial1=void 0):Bt.autorange!=="max"&&Bt.autorange!=="min reversed"||(Zt[1]=null,Bt._rangeInitial0=void 0,Bt._rangeInitial1=void 0),We._insideTickLabelsUpdaterange[Bt._name+".range"]=Zt}var Rn=b.syncOrAsync(Wt);return Rn&&Rn.then&&Re._promises.push(Rn),Rn},K.getPxPosition=function(Re,Fe){var nt,We=Re._fullLayout._size,ct=Fe._id.charAt(0),pt=Fe.side;return Fe.anchor!=="free"?nt=Fe._anchorAxis:ct==="x"?nt={_offset:We.t+(1-(Fe.position||0))*We.h,_length:0}:ct==="y"&&(nt={_offset:We.l+(Fe.position||0)*We.w+Fe._shift,_length:0}),pt==="top"||pt==="left"?nt._offset:pt==="bottom"||pt==="right"?nt._offset+nt._length:void 0},K.shouldShowZeroLine=function(Re,Fe,nt){var We=b.simpleMap(Fe.range,Fe.r2l);return We[0]*We[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===P)&&(ht(Fe,0)||!function(ct,pt,gt,ut){var kt=gt._mainAxis;if(kt){var yt=ct._fullLayout,Mt=pt._id.charAt(0),Lt=K.counterLetter(pt._id),Ct=pt._offset+(Math.abs(ut[0])<Math.abs(ut[1])==(Mt==="x")?0:pt._length),It=yt._plots[gt._mainSubplot];if(!(It.mainplotinfo||It).overlays.length)return Ht(gt);for(var Wt=K.list(ct,Lt),Nt=0;Nt<Wt.length;Nt++){var Bt=Wt[Nt];if(Bt._mainAxis===kt&&Ht(Bt))return!0}}function Ht(Qt){if(!Qt.showline||!Qt.linewidth)return!1;var Cn=Math.max((Qt.linewidth+pt.zerolinewidth)/2,1);function Tn(an){return typeof an=="number"&&Math.abs(an-Ct)<Cn}if(Tn(Qt._mainLinePosition)||Tn(Qt._mainMirrorPosition))return!0;var hn=Qt._linepositions||{};for(var Zt in hn)if(Tn(hn[Zt][0])||Tn(hn[Zt][1]))return!0}}(Re,Fe,nt,We)||function(ct,pt){for(var gt=ct._fullData,ut=pt._mainSubplot,kt=pt._id.charAt(0),yt=0;yt<gt.length;yt++){var Mt=gt[yt];if(Mt.visible===!0&&Mt.xaxis+Mt.yaxis===ut&&(T.traceIs(Mt,"bar-like")&&Mt.orientation==={x:"h",y:"v"}[kt]||Mt.fill&&Mt.fill.charAt(Mt.fill.length-1)===kt))return!0}return!1}(Re,Fe))},K.clipEnds=function(Re,Fe){return Fe.filter(function(nt){return ht(Re,nt.x)})},K.allowAutoMargin=function(Re){for(var Fe=K.list(Re,"",!0),nt=0;nt<Fe.length;nt++){var We=Fe[nt];We.automargin&&(o.allowAutoMargin(Re,$e(We)),We.mirror&&o.allowAutoMargin(Re,wt(We))),T.getComponentMethod("rangeslider","isVisible")(We)&&o.allowAutoMargin(Re,Pt(We))}},K.swap=function(Re,Fe){for(var nt=function(ct,pt){var gt,ut,kt=[];for(gt=0;gt<pt.length;gt++){var yt=[],Mt=ct._fullData[pt[gt]].xaxis,Lt=ct._fullData[pt[gt]].yaxis;if(Mt&&Lt){for(ut=0;ut<kt.length;ut++)kt[ut].x.indexOf(Mt)===-1&&kt[ut].y.indexOf(Lt)===-1||yt.push(ut);if(yt.length){var Ct,It=kt[yt[0]];if(yt.length>1)for(ut=1;ut<yt.length;ut++)Ct=kt[yt[ut]],Ot(It.x,Ct.x),Ot(It.y,Ct.y);Ot(It.x,[Mt]),Ot(It.y,[Lt])}else kt.push({x:[Mt],y:[Lt]})}}return kt}(Re,Fe),We=0;We<nt.length;We++)At(Re,nt[We].x,nt[We].y)}},52976:function(ee,z,e){var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,h=k.cleanNumber,s=Math.round;function t(n,r){return r?M(n):typeof n=="number"}function a(n){return Math.max(1,(n-1)/1e3)}ee.exports=function(n,r,i){var l=n,u=i.noMultiCategory;if(T(l)&&!l.length)return"-";if(!u&&function(g){return T(g[0])&&T(g[1])}(l))return"multicategory";if(u&&Array.isArray(l[0])){for(var p=[],c=0;c<l.length;c++)if(T(l[c]))for(var x=0;x<l[c].length;x++)p.push(l[c][x]);l=p}if(function(g,v){for(var y=g.length,m=a(y),_=0,f=0,S={},w=0;w<y;w+=m){var E=g[s(w)],O=String(E);S[O]||(S[O]=1,b(E,v)&&_++,M(E)&&f++)}return _>2*f}(l,r))return"date";var d=i.autotypenumbers!=="strict";return function(g,v){for(var y=g.length,m=a(y),_=0,f=0,S={},w=0;w<y;w+=m){var E=g[s(w)],O=String(E);if(!S[O]){S[O]=1;var C=typeof E;C==="boolean"?f++:(v?h(E)!==o:C==="number")?_++:C==="string"&&f++}}return f>2*_}(l,d)?"category":function(g,v){for(var y=g.length,m=0;m<y;m++)if(t(g[m],v))return!0;return!1}(l,d)?"linear":"-"}},28336:function(ee,z,e){var M=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(51272),h=e(94724),s=e(26332),t=e(25404),a=e(95936),n=e(42568),r=e(22416),i=e(42136),l=e(96312),u=e(78344),p=e(33816).WEEKDAY_PATTERN,c=e(33816).HOUR_PATTERN;function x(v,y,m){function _(R,j){return o.coerce(v,y,h.rangebreaks,R,j)}if(_("enabled")){var f=_("bounds");if(f&&f.length>=2){var S,w,E="";if(f.length===2){for(S=0;S<2;S++)if(w=g(f[S])){E=p;break}}var O=_("pattern",E);if(O===p)for(S=0;S<2;S++)(w=g(f[S]))&&(y.bounds[S]=f[S]=w-1);if(O)for(S=0;S<2;S++)switch(w=f[S],O){case p:if(!M(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(y.enabled=!1);y.bounds[S]=f[S]=w;break;case c:if(!M(w)||(w=+w)<0||w>24)return void(y.enabled=!1);y.bounds[S]=f[S]=w}if(m.autorange===!1){var C=m.range;if(C[0]<C[1]){if(f[0]<C[0]&&f[1]>C[1])return void(y.enabled=!1)}else if(f[0]>C[0]&&f[1]<C[1])return void(y.enabled=!1)}}else{var P=_("values");if(!P||!P.length)return void(y.enabled=!1);_("dvalue")}}}ee.exports=function(v,y,m,_,f){var S,w=_.letter,E=_.font||{},O=_.splomStash||{},C=m("visible",!_.visibleDflt),P=y._template||{},R=y.type||P.type||"-";R==="date"&&(k.getComponentMethod("calendars","handleDefaults")(v,y,"calendar",_.calendar),_.noTicklabelmode||(S=m("ticklabelmode")));var j="";_.noTicklabelposition&&R!=="multicategory"||(j=o.coerce(v,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||m("ticklabeloverflow",j.indexOf("inside")!==-1?"hide past domain":R==="category"||R==="multicategory"?"allow":"hide past div"),u(y,f),l(v,y,m,_),r(v,y,m,_),R==="category"||_.noHover||m("hoverformat");var D=m("color"),N=D!==h.color.dflt?D:E.color,W=O.label||f._dfltTitle[w];if(n(v,y,m,R,_),!C)return y;m("title.text",W),o.coerceFont(m,"title.font",{family:E.family,weight:E.weight,style:E.style,variant:E.variant,size:o.bigFont(E.size),color:N}),s(v,y,m,R);var F=_.hasMinor;if(F&&(T.newContainer(y,"minor"),s(v,y,m,R,{isMinor:!0})),a(v,y,m,R,_),t(v,y,m,_),F){var V=_.isMinor;_.isMinor=!0,t(v,y,m,_),_.isMinor=V}i(v,y,m,{dfltColor:D,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:F,attributes:h}),!F||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&m("mirror");var U,te=R==="multicategory";if(_.noTickson||R!=="category"&&!te||!y.ticks&&!y.showgrid||(te&&(U="boundaries"),m("tickson",U)==="boundaries"&&delete y.ticklabelposition),te&&m("showdividers")&&(m("dividercolor"),m("dividerwidth")),R==="date")if(b(v,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),y.rangebreaks.length){for(var J=0;J<y.rangebreaks.length;J++)if(y.rangebreaks[J].pattern===p){y._hasDayOfWeekBreaks=!0;break}if(u(y,f),f._has("scattergl")||f._has("splom"))for(var X=0;X<_.data.length;X++){var K=_.data[X];K.type!=="scattergl"&&K.type!=="splom"||(K.visible=!1,o.warn(K.type+" traces do not work on axes with rangebreaks. Setting trace "+K.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var d={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(v){if(typeof v=="string")return d[v.substr(0,3).toLowerCase()]}},29736:function(ee,z,e){var M=e(26880),k=M.FORMAT_LINK,o=M.DATE_FORMAT_LINK;function T(h,s){return["Sets the "+h+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(h,s){return T(h,s)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ee.exports={axisHoverFormat:function(h,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:b)("hover text",h)+["By default the values are formatted using "+(s?"generic number format":"`"+h+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},79811:function(ee,z,e){var M=e(24040),k=e(33816);function o(T,b){if(b&&b.length){for(var h=0;h<b.length;h++)if(b[h][T])return!0}return!1}z.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return b==="1"&&(b=""),T.charAt(0)+"axis"+b}},z.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return b==="1"&&(b=""),T.charAt(0)+b}},z.cleanId=function(T,b,h){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!s||h)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&h?" domain":"")}},z.list=function(T,b,h){var s=T._fullLayout;if(!s)return[];var t,a=z.listIds(T,b),n=new Array(a.length);for(t=0;t<a.length;t++){var r=a[t];n[t]=s[r.charAt(0)+"axis"+r.substr(1)]}if(!h){var i=s._subplots.gl3d||[];for(t=0;t<i.length;t++){var l=s[i[t]];b?n.push(l[b+"axis"]):n.push(l.xaxis,l.yaxis,l.zaxis)}}return n},z.listIds=function(T,b){var h=T._fullLayout;if(!h)return[];var s=h._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},z.getFromId=function(T,b,h){var s=T._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),h==="x"?b=b.replace(/y[0-9]*/,""):h==="y"&&(b=b.replace(/x[0-9]*/,"")),s[z.id2name(b)]},z.getFromTrace=function(T,b,h){var s=T._fullLayout,t=null;if(M.traceIs(b,"gl3d")){var a=b.scene;a.substr(0,5)==="scene"&&(t=s[a][h+"axis"])}else t=z.getFromId(T,b[h+"axis"]||h);return t},z.idSort=function(T,b){var h=T.charAt(0),s=b.charAt(0);return h!==s?h>s?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},z.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},z.isLinked=function(T,b){return o(b,T._axisMatchGroups)||o(b,T._axisConstraintGroups)}},22416:function(ee,z,e){var M=e(38116).isTypedArraySpec;ee.exports=function(k,o,T,b){if(o.type==="category"){var h,s=k.categoryarray,t=Array.isArray(s)&&s.length>0||M(s);t&&(h="array");var a,n=T("categoryorder",h);n==="array"&&(a=T("categoryarray")),t||n!=="array"||(n=o.categoryorder="trace"),n==="trace"?o._initialCategories=[]:n==="array"?o._initialCategories=a.slice():(a=function(r,i){var l,u,p,c=i.dataAttr||r._id.charAt(0),x={};if(i.axData)l=i.axData;else for(l=[],u=0;u<i.data.length;u++){var d=i.data[u];d[c+"axis"]===r._id&&l.push(d)}for(u=0;u<l.length;u++){var g=l[u][c];for(p=0;p<g.length;p++){var v=g[p];v!=null&&(x[v]=1)}}return Object.keys(x)}(o,b).sort(),n==="category ascending"?o._initialCategories=a:n==="category descending"&&(o._initialCategories=a.reverse()))}}},98728:function(ee,z,e){var M=e(38248),k=e(3400),o=e(39032),T=o.ONEDAY,b=o.ONEWEEK;z.dtick=function(h,s){var t=s==="log",a=s==="date",n=s==="category",r=a?T:1;if(!h)return r;if(M(h))return(h=Number(h))<=0?r:n?Math.max(1,Math.round(h)):a?Math.max(.1,h):h;if(typeof h!="string"||!a&&!t)return r;var i=h.charAt(0),l=h.substr(1);return(l=M(l)?Number(l):0)<=0||!(a&&i==="M"&&l===Math.round(l)||t&&i==="L"||t&&i==="D"&&(l===1||l===2))?r:h},z.tick0=function(h,s,t,a){return s==="date"?k.cleanDate(h,k.dateTick0(t,a%b==0?1:0)):a!=="D1"&&a!=="D2"?M(h)?Number(h):0:void 0}},33816:function(ee,z,e){var M=e(53756).counter;ee.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(ee,z,e){var M=e(3400),k=e(19280),o=e(79811).id2name,T=e(94724),b=e(21160),h=e(78344),s=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function a(c,x,d){var g=d.axIds,v=d.layoutOut,y=d.hasImage,m=v._axisConstraintGroups,_=v._axisMatchGroups,f=x._id,S=f.charAt(0),w=((v._splomAxes||{})[S]||{})[f]||{},E=x._id,O=E.charAt(0)==="x";function C(Q,Z){return M.coerce(c,x,T,Q,Z)}x._matchGroup=null,x._constraintGroup=null,C("constrain",y?"domain":"range"),M.coerce(c,x,{constraintoward:{valType:"enumerated",values:O?["left","center","right"]:["bottom","middle","top"],dflt:O?"center":"middle"}},"constraintoward");var P,R,j=x.type,D=[];for(P=0;P<g.length;P++)(R=g[P])!==E&&v[o(R)].type===j&&D.push(R);var N=r(m,E);if(N){var W=[];for(P=0;P<D.length;P++)N[R=D[P]]||W.push(R);D=W}var F,V,U=D.length;U&&(c.matches||w.matches)&&(F=M.coerce(c,x,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(w.matches)!==-1?w.matches:void 0}},"matches"));var te=y&&!O?x.anchor:void 0;if(U&&!F&&(c.scaleanchor||te)&&(V=M.coerce(c,x,{scaleanchor:{valType:"enumerated",values:D.concat([!1])}},"scaleanchor",te)),F){x._matchGroup=i(_,E,F,1);var J=v[o(F)],X=n(v,x)/n(v,J);O!==(F.charAt(0)==="x")&&(X=(O?"x":"y")+X),i(m,E,F,X)}else c.matches&&g.indexOf(c.matches)!==-1&&M.warn("ignored "+x._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(V){var K=C("scaleratio");K||(K=x.scaleratio=1),i(m,E,V,K)}else c.scaleanchor&&g.indexOf(c.scaleanchor)!==-1&&M.warn("ignored "+x._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(c,x){var d=x.domain;return d||(d=c[o(x.overlaying)].domain),d[1]-d[0]}function r(c,x){for(var d=0;d<c.length;d++)if(c[d][x])return c[d];return null}function i(c,x,d,g){var v,y,m,_,f,S=r(c,x);S===null?((S={})[x]=1,f=c.length,c.push(S)):f=c.indexOf(S);var w=Object.keys(S);for(v=0;v<c.length;v++)if(m=c[v],v!==f&&m[d]){var E=m[d];for(y=0;y<w.length;y++)m[_=w[y]]=l(E,l(g,S[_]));return void c.splice(f,1)}if(g!==1)for(y=0;y<w.length;y++){var O=w[y];S[O]=l(g,S[O])}S[d]=1}function l(c,x){var d,g,v="",y="";typeof c=="string"&&(d=(v=c.match(/^[xy]*/)[0]).length,c=+c.substr(d)),typeof x=="string"&&(g=(y=x.match(/^[xy]*/)[0]).length,x=+x.substr(g));var m=c*x;return d||g?d&&g&&v.charAt(0)!==y.charAt(0)?d===g?m:(d>g?v.substr(g):y.substr(d))+m:v+y+c*x:m}function u(c,x){for(var d=x._size,g=d.h/d.w,v={},y=Object.keys(c),m=0;m<y.length;m++){var _=y[m],f=c[_];if(typeof f=="string"){var S=f.match(/^[xy]*/)[0],w=S.length;f=+f.substr(w);for(var E=S.charAt(0)==="y"?g:1/g,O=0;O<w;O++)f*=E}v[_]=f}return v}function p(c,x){var d=c._inputDomain,g=t[c.constraintoward],v=d[0]+(d[1]-d[0])*g;c.domain=c._input.domain=[v+(d[0]-v)/x,v+(d[1]-v)/x],c.setScale()}z.handleDefaults=function(c,x,d){var g,v,y,m,_,f,S,w,E=d.axIds,O=d.axHasImage,C=x._axisConstraintGroups=[],P=x._axisMatchGroups=[];for(g=0;g<E.length;g++)a(_=c[m=o(E[g])],f=x[m],{axIds:E,layoutOut:x,hasImage:O[m]});function R(J,X){for(g=0;g<J.length;g++)for(y in v=J[g])x[o(y)][X]=v}for(R(P,"_matchGroup"),g=0;g<C.length;g++)for(y in v=C[g])if((f=x[o(y)]).fixedrange){for(var j in v){var D=o(j);(c[D]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),x[D].fixedrange=!0}break}for(g=0;g<C.length;){for(y in v=C[g]){(f=x[o(y)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(v).length&&(C.splice(g,1),g--);break}g++}R(C,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,F=!1;function V(){w=f[S],S==="rangebreaks"&&(F=f._hasDayOfWeekBreaks)}for(g=0;g<P.length;g++){v=P[g];for(var U=0;U<N.length;U++){var te;for(y in S=N[U],w=null,v)if(_=c[m=o(y)],f=x[m],S in f){if(!f.matches&&(te=f,S in _)){V();break}w===null&&S in _&&V()}if(S==="range"&&w&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(W=!0),S==="autorange"&&w===null&&W&&(w=!1),w===null&&S in te&&(w=te[S]),w!==null)for(y in v)(f=x[o(y)])[S]=S==="range"?w.slice():w,S==="rangebreaks"&&(f._hasDayOfWeekBreaks=F,h(f,x))}}},z.enforce=function(c){var x,d,g,v,y,m,_,f,S=c._fullLayout,w=S._axisConstraintGroups||[];for(x=0;x<w.length;x++){g=u(w[x],S);var E=Object.keys(g),O=1/0,C=0,P=1/0,R={},j={},D=!1;for(d=0;d<E.length;d++)j[v=E[d]]=y=S[o(v)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),R[v]=m=Math.abs(y._m)/g[v],O=Math.min(O,m),y.constrain!=="domain"&&y._constraintShrinkable||(P=Math.min(P,m)),delete y._constraintShrinkable,C=Math.max(C,m),y.constrain==="domain"&&(D=!0);if(!(O>s*C)||D){for(d=0;d<E.length;d++)if(m=R[v=E[d]],_=(y=j[v]).constrain,m!==P||_==="domain")if(f=m/P,_==="range")b(y,f);else{var N=y._inputDomain,W=(y.domain[1]-y.domain[0])/(N[1]-N[0]),F=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if((f/=W)*F<1){y.domain=y._input.domain=N.slice(),b(y,f);continue}if(F<1&&(y.range=y._input.range=y._inputRange.slice(),f*=F),y.autorange){var V=y.r2l(y.range[0]),U=y.r2l(y.range[1]),te=(V+U)/2,J=te,X=te,K=Math.abs(U-te),Q=te-K*f*1.0001,Z=te+K*f*1.0001,re=k.makePadFn(S,y,0),oe=k.makePadFn(S,y,1);p(y,f);var ae,ce,he=Math.abs(y._m),pe=k.concatExtremes(c,y),xe=pe.min,be=pe.max;for(ce=0;ce<xe.length;ce++)(ae=xe[ce].val-re(xe[ce])/he)>Q&&ae<J&&(J=ae);for(ce=0;ce<be.length;ce++)(ae=be[ce].val+oe(be[ce])/he)<Z&&ae>X&&(X=ae);f/=(X-J)/(2*K),J=y.l2r(J),X=y.l2r(X),y.range=y._input.range=V<U?[J,X]:[X,J]}p(y,f)}}}},z.getAxisGroup=function(c,x){for(var d=c._axisMatchGroups,g=0;g<d.length;g++)if(d[g][x])return"g"+g;return x},z.clean=function(c,x){if(x._inputDomain){for(var d=!1,g=x._id,v=c._fullLayout._axisConstraintGroups,y=0;y<v.length;y++)if(v[y][g]){d=!0;break}d&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},51184:function(ee,z,e){var M=e(33428),k=e(3400),o=k.numberFormat,T=e(49760),b=e(89184),h=e(24040),s=k.strTranslate,t=e(72736),a=e(76308),n=e(43616),r=e(93024),i=e(54460),l=e(93972),u=e(86476),p=e(72760),c=p.selectingOrDrawing,x=p.freeMode,d=e(84284).FROM_TL,g=e(73696),v=e(39172).redrawReglTraces,y=e(7316),m=e(79811).getFromId,_=e(22676).prepSelect,f=e(22676).clearOutline,S=e(22676).selectOnClick,w=e(21160),E=e(33816),O=E.MINDRAG,C=E.MINZOOM,P=!0;function R(ae,ce,he,pe){var xe=k.ensureSingle(ae.draglayer,ce,he,function(be){be.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return xe.call(l,pe),xe.node()}function j(ae,ce,he,pe,xe,be,ve){var ge=R(ae,"rect",ce,he);return M.select(ge).call(n.setRect,pe,xe,be,ve),ge}function D(ae,ce){for(var he=0;he<ae.length;he++)if(!ae[he].fixedrange)return ce;return""}function N(ae,ce,he,pe,xe){for(var be=0;be<ae.length;be++){var ve=ae[be];if(!ve.fixedrange)if(ve.rangebreaks){var ge=ve._id.charAt(0)==="y",we=ge?1-ce:ce,_e=ge?1-he:he;pe[ve._name+".range[0]"]=ve.l2r(ve.p2l(we*ve._length)),pe[ve._name+".range[1]"]=ve.l2r(ve.p2l(_e*ve._length))}else{var se=ve._rl[0],ie=ve._rl[1]-se;pe[ve._name+".range[0]"]=ve.l2r(se+ie*ce),pe[ve._name+".range[1]"]=ve.l2r(se+ie*he)}}if(xe&&xe.length){var fe=(ce+(1-he))/2;N(xe,fe,1-fe,pe,[])}}function W(ae,ce){for(var he=0;he<ae.length;he++){var pe=ae[he];if(!pe.fixedrange){if(pe.rangebreaks){var xe=pe._length,be=(pe.p2l(0+ce)-pe.p2l(0)+(pe.p2l(xe+ce)-pe.p2l(xe)))/2;pe.range=[pe.l2r(pe._rl[0]-be),pe.l2r(pe._rl[1]-be)]}else pe.range=[pe.l2r(pe._rl[0]-ce/pe._m),pe.l2r(pe._rl[1]-ce/pe._m)];pe.limitRange&&pe.limitRange()}}}function F(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function V(ae,ce,he,pe,xe){return ae.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(he,pe)).attr("d",xe+"Z")}function U(ae,ce,he){return ae.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ce,he)).attr("d","M0,0Z")}function te(ae,ce,he,pe,xe,be){ae.attr("d",pe+"M"+he.l+","+he.t+"v"+he.h+"h"+he.w+"v-"+he.h+"h-"+he.w+"Z"),J(ae,ce,xe,be)}function J(ae,ce,he,pe){he||(ae.transition().style("fill",pe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function X(ae){M.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function K(ae){P&&ae.data&&ae._context.showTips&&(k.notifier(k._(ae,"Double-click to zoom back out"),"long"),P=!1)}function Q(ae){var ce=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,C)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function Z(ae,ce,he,pe,xe){for(var be,ve,ge,we,_e=!1,se={},ie={},fe=(xe||{}).xaHash,Ee=(xe||{}).yaHash,Te=0;Te<ce.length;Te++){var Ae=ce[Te];for(be in he)if(Ae[be]){for(ge in Ae)xe&&(fe[ge]||Ee[ge])||(ge.charAt(0)==="x"?he:pe)[ge]||(se[ge]=be);for(ve in pe)xe&&(fe[ve]||Ee[ve])||!Ae[ve]||(_e=!0)}for(ve in pe)if(Ae[ve])for(we in Ae)xe&&(fe[we]||Ee[we])||(we.charAt(0)==="x"?he:pe)[we]||(ie[we]=ve)}_e&&(k.extendFlat(se,ie),ie={});var Se={},Oe=[];for(ge in se){var De=m(ae,ge);Oe.push(De),Se[De._id]=De}var de={},me=[];for(we in ie){var Me=m(ae,we);me.push(Me),de[Me._id]=Me}return{xaHash:Se,yaHash:de,xaxes:Oe,yaxes:me,xLinks:se,yLinks:ie,isSubplotConstrained:_e}}function re(ae,ce){if(b){var he=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(he,ae._onwheel),ae._onwheel=ce,ae.addEventListener(he,ce,{passive:!1})}else ae.onwheel!==void 0?ae.onwheel=ce:ae.onmousewheel!==void 0?ae.onmousewheel=ce:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ce,{passive:!1}))}function oe(ae){var ce=[];for(var he in ae)ce.push(ae[he]);return ce}ee.exports={makeDragBox:function(ae,ce,he,pe,xe,be,ve,ge){var we,_e,se,ie,fe,Ee,Te,Ae,Se,Oe,De,de,me,Me,ze,Pe,Ne,Ve,Ye,at,rt,dt,vt,ht=ae._fullLayout._zoomlayer,et=ve+ge==="nsew",$e=(ve+ge).length===1;function wt(){if(we=ce.xaxis,_e=ce.yaxis,Se=we._length,Oe=_e._length,Te=we._offset,Ae=_e._offset,(se={})[we._id]=we,(ie={})[_e._id]=_e,ve&&ge)for(var Zt=ce.overlays,an=0;an<Zt.length;an++){var $t=Zt[an].xaxis;se[$t._id]=$t;var ln=Zt[an].yaxis;ie[ln._id]=ln}fe=oe(se),Ee=oe(ie),me=D(fe,ge),Me=D(Ee,ve),ze=!Me&&!me,de=Z(ae,ae._fullLayout._axisMatchGroups,se,ie);var mn=(De=Z(ae,ae._fullLayout._axisConstraintGroups,se,ie,de)).isSubplotConstrained||de.isSubplotConstrained;Pe=ge||mn,Ne=ve||mn;var xn=ae._fullLayout;Ve=xn._has("scattergl"),Ye=xn._has("splom"),at=xn._has("svg")}he+=ce.yaxis._shift,wt();var Pt=function(Zt,an,$t){return Zt?Zt==="nsew"?$t?"":an==="pan"?"move":"crosshair":Zt.toLowerCase()+"-resize":"pointer"}(Me+me,ae._fullLayout.dragmode,et),Ot=j(ce,ve+ge+"drag",Pt,he,pe,xe,be);if(ze&&!et)return Ot.onmousedown=null,Ot.style.pointerEvents="none",Ot;var At,He,Ze,Be,Ge,it,tt,Re,Fe,nt,We={element:Ot,gd:ae,plotinfo:ce};function ct(){We.plotinfo.selection=!1,f(ae)}function pt(Zt,an){var $t=We.gd;if($t._fullLayout._activeShapeIndex>=0)$t._fullLayout._deactivateShape($t);else{var ln=$t._fullLayout.clickmode;if(X($t),Zt!==2||$e||Bt(),et)ln.indexOf("select")>-1&&S(an,$t,fe,Ee,ce.id,We),ln.indexOf("event")>-1&&r.click($t,an,ce.id);else if(Zt===1&&$e){var mn=ve?_e:we,xn=ve==="s"||ge==="w"?0:1,Pn=mn._name+".range["+xn+"]",Mn=function(In,Vn){var tr,er=In.range[Vn],Wn=Math.abs(er-In.range[1-Vn]);return In.type==="date"?er:In.type==="log"?(tr=Math.ceil(Math.max(0,-Math.log(Wn)/Math.LN10))+3,o("."+tr+"g")(Math.pow(10,er))):(tr=Math.floor(Math.log(Math.abs(er))/Math.LN10)-Math.floor(Math.log(Wn)/Math.LN10)+4,o("."+String(tr)+"g")(er))}(mn,xn),_n="left",Rn="middle";if(mn.fixedrange)return;ve?(Rn=ve==="n"?"top":"bottom",mn.side==="right"&&(_n="right")):ge==="e"&&(_n="right"),$t._context.showAxisRangeEntryBoxes&&M.select(Ot).call(t.makeEditable,{gd:$t,immediate:!0,background:$t._fullLayout.paper_bgcolor,text:String(Mn),fill:mn.tickfont?mn.tickfont.color:"#444",horizontalAlign:_n,verticalAlign:Rn}).on("edit",function(In){var Vn=mn.d2r(In);Vn!==void 0&&h.call("_guiRelayout",$t,Pn,Vn)})}}}function gt(Zt,an){if(ae._transitioningWithDuration)return!1;var $t=Math.max(0,Math.min(Se,dt*Zt+At)),ln=Math.max(0,Math.min(Oe,vt*an+He)),mn=Math.abs($t-At),xn=Math.abs(ln-He);function Pn(){tt="",Ze.r=Ze.l,Ze.t=Ze.b,Fe.attr("d","M0,0Z")}if(Ze.l=Math.min(At,$t),Ze.r=Math.max(At,$t),Ze.t=Math.min(He,ln),Ze.b=Math.max(He,ln),De.isSubplotConstrained)mn>C||xn>C?(tt="xy",mn/Se>xn/Oe?(xn=mn*Oe/Se,He>ln?Ze.t=He-xn:Ze.b=He+xn):(mn=xn*Se/Oe,At>$t?Ze.l=At-mn:Ze.r=At+mn),Fe.attr("d",Q(Ze))):Pn();else if(de.isSubplotConstrained)if(mn>C||xn>C){tt="xy";var Mn=Math.min(Ze.l/Se,(Oe-Ze.b)/Oe),_n=Math.max(Ze.r/Se,(Oe-Ze.t)/Oe);Ze.l=Mn*Se,Ze.r=_n*Se,Ze.b=(1-Mn)*Oe,Ze.t=(1-_n)*Oe,Fe.attr("d",Q(Ze))}else Pn();else!Me||xn<Math.min(Math.max(.6*mn,O),C)?mn<O||!me?Pn():(Ze.t=0,Ze.b=Oe,tt="x",Fe.attr("d",function(Rn,In){return"M"+(Rn.l-.5)+","+(In-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(Rn.r+.5)+","+(In-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(Ze,He))):!me||mn<Math.min(.6*xn,C)?(Ze.l=0,Ze.r=Se,tt="y",Fe.attr("d",function(Rn,In){return"M"+(In-C-.5)+","+(Rn.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(In-C-.5)+","+(Rn.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Ze,At))):(tt="xy",Fe.attr("d",Q(Ze)));Ze.w=Ze.r-Ze.l,Ze.h=Ze.b-Ze.t,tt&&(nt=!0),ae._dragged=nt,te(Re,Fe,Ze,Ge,it,Be),ut(),ae.emit("plotly_relayouting",rt),it=!0}function ut(){rt={},tt!=="xy"&&tt!=="x"||(N(fe,Ze.l/Se,Ze.r/Se,rt,De.xaxes),Wt("x",rt)),tt!=="xy"&&tt!=="y"||(N(Ee,(Oe-Ze.b)/Oe,(Oe-Ze.t)/Oe,rt,De.yaxes),Wt("y",rt))}function kt(){ut(),X(ae),Ht(),K(ae)}We.prepFn=function(Zt,an,$t){var ln=We.dragmode,mn=ae._fullLayout.dragmode;mn!==ln&&(We.dragmode=mn),wt(),dt=ae._fullLayout._invScaleX,vt=ae._fullLayout._invScaleY,ze||(et?Zt.shiftKey?mn==="pan"?mn="zoom":c(mn)||(mn="pan"):Zt.ctrlKey&&(mn="pan"):mn="pan"),x(mn)?We.minDrag=1:We.minDrag=void 0,c(mn)?(We.xaxes=fe,We.yaxes=Ee,_(Zt,an,$t,We,mn)):(We.clickFn=pt,c(ln)&&ct(),ze||(mn==="zoom"?(We.moveFn=gt,We.doneFn=kt,We.minDrag=1,function(xn,Pn,Mn){var _n=Ot.getBoundingClientRect();At=Pn-_n.left,He=Mn-_n.top,ae._fullLayout._calcInverseTransform(ae);var Rn=k.apply3DTransform(ae._fullLayout._invTransform)(At,He);At=Rn[0],He=Rn[1],Ze={l:At,r:At,w:0,t:He,b:He,h:0},Be=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:T(ae._fullLayout.plot_bgcolor).getLuminance(),it=!1,tt="xy",nt=!1,Re=V(ht,Be,Te,Ae,Ge="M0,0H"+Se+"V"+Oe+"H0V0"),Fe=U(ht,Te,Ae)}(0,an,$t)):mn==="pan"&&(We.moveFn=It,We.doneFn=Ht))),ae._fullLayout._redrag=function(){var xn=ae._dragdata;if(xn&&xn.element===Ot){var Pn=ae._fullLayout.dragmode;c(Pn)||(wt(),Qt([0,0,Se,Oe]),We.moveFn(xn.dx,xn.dy))}}},u.init(We);var yt=[0,0,Se,Oe],Mt=null,Lt=E.REDRAWDELAY,Ct=ce.mainplot?ae._fullLayout._plots[ce.mainplot]:ce;function It(Zt,an){if(Zt*=dt,an*=vt,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,me==="ew"||Me==="ns"){var $t=me?-Zt:0,ln=Me?-an:0;if(de.isSubplotConstrained){if(me&&Me){var mn=(Zt/Se-an/Oe)/2;$t=-(Zt=mn*Se),ln=-(an=-mn*Oe)}Me?$t=-ln*Se/Oe:ln=-$t*Oe/Se}return me&&(W(fe,Zt),Wt("x")),Me&&(W(Ee,an),Wt("y")),Qt([$t,ln,Se,Oe]),Nt(),void ae.emit("plotly_relayouting",rt)}var xn,Pn,Mn=me==="w"==(Me==="n")?1:-1;if(me&&Me&&(De.isSubplotConstrained||de.isSubplotConstrained)){var _n=(Zt/Se+Mn*an/Oe)/2;Zt=_n*Se,an=Mn*_n*Oe}if(me==="w"?Zt=tr(fe,0,Zt):me==="e"?Zt=tr(fe,1,-Zt):me||(Zt=0),Me==="n"?an=tr(Ee,1,an):Me==="s"?an=tr(Ee,0,-an):Me||(an=0),xn=me==="w"?Zt:0,Pn=Me==="n"?an:0,De.isSubplotConstrained&&!de.isSubplotConstrained||de.isSubplotConstrained&&me&&Me&&Mn>0){var Rn;if(de.isSubplotConstrained||!me&&Me.length===1){for(Rn=0;Rn<fe.length;Rn++)fe[Rn].range=fe[Rn]._r.slice(),w(fe[Rn],1-an/Oe);xn=(Zt=an*Se/Oe)/2}if(de.isSubplotConstrained||!Me&&me.length===1){for(Rn=0;Rn<Ee.length;Rn++)Ee[Rn].range=Ee[Rn]._r.slice(),w(Ee[Rn],1-Zt/Se);Pn=(an=Zt*Oe/Se)/2}}de.isSubplotConstrained&&Me||Wt("x"),de.isSubplotConstrained&&me||Wt("y");var In=Se-Zt,Vn=Oe-an;!de.isSubplotConstrained||me&&Me||(me?(Pn=xn?0:Zt*Oe/Se,Vn=In*Oe/Se):(xn=Pn?0:an*Se/Oe,In=Vn*Se/Oe)),Qt([xn,Pn,In,Vn]),Nt(),ae.emit("plotly_relayouting",rt)}function tr(er,Wn,or){for(var Jt,en,En=1-Wn,gn=0;gn<er.length;gn++){var Ln=er[gn];if(!Ln.fixedrange){Jt=Ln,en=Ln._rl[En]+(Ln._rl[Wn]-Ln._rl[En])/F(or/Ln._length);var Hn=Ln.l2r(en);Hn!==!1&&Hn!==void 0&&(Ln.range[Wn]=Hn)}}return Jt._length*(Jt._rl[Wn]-en)/(Jt._rl[Wn]-Jt._rl[En])}}function Wt(Zt,an){for(var $t=de.isSubplotConstrained?{x:Ee,y:fe}[Zt]:de[Zt+"axes"],ln=de.isSubplotConstrained?{x:fe,y:Ee}[Zt]:[],mn=0;mn<$t.length;mn++){var xn=$t[mn],Pn=xn._id,Mn=de.xLinks[Pn]||de.yLinks[Pn],_n=ln[0]||se[Mn]||ie[Mn];_n&&(an?(an[xn._name+".range[0]"]=an[_n._name+".range[0]"],an[xn._name+".range[1]"]=an[_n._name+".range[1]"]):xn.range=_n.range.slice())}}function Nt(){var Zt,an=[];function $t(Pn){for(Zt=0;Zt<Pn.length;Zt++)Pn[Zt].fixedrange||an.push(Pn[Zt]._id)}function ln(Pn,Mn){for(Zt=0;Zt<Pn.length;Zt++){var _n=Pn[Zt],Rn=_n[Mn];_n.fixedrange||Rn.tickmode!=="sync"||an.push(Rn._id)}}for(Pe&&($t(fe),$t(De.xaxes),$t(de.xaxes),ln(ce.overlays,"xaxis")),Ne&&($t(Ee),$t(De.yaxes),$t(de.yaxes),ln(ce.overlays,"yaxis")),rt={},Zt=0;Zt<an.length;Zt++){var mn=an[Zt],xn=m(ae,mn);i.drawOne(ae,xn,{skipTitle:!0}),rt[xn._name+".range[0]"]=xn.range[0],rt[xn._name+".range[1]"]=xn.range[1]}i.redrawComponents(ae,an)}function Bt(){if(!ae._transitioningWithDuration){var Zt=ae._context.doubleClick,an=[];me&&(an=an.concat(fe)),Me&&(an=an.concat(Ee)),de.xaxes&&(an=an.concat(de.xaxes)),de.yaxes&&(an=an.concat(de.yaxes));var $t,ln,mn={};if(Zt==="reset+autosize")for(Zt="autosize",ln=0;ln<an.length;ln++){var xn=($t=an[ln])._rangeInitial0,Pn=$t._rangeInitial1,Mn=xn!==void 0||Pn!==void 0;if(Mn&&(xn!==void 0&&xn!==$t.range[0]||Pn!==void 0&&Pn!==$t.range[1])||!Mn&&$t.autorange!==!0){Zt="reset";break}}if(Zt==="autosize")for(ln=0;ln<an.length;ln++)($t=an[ln]).fixedrange||(mn[$t._name+".autorange"]=!0);else if(Zt==="reset"){for((me||De.isSubplotConstrained)&&(an=an.concat(De.xaxes)),Me&&!De.isSubplotConstrained&&(an=an.concat(De.yaxes)),De.isSubplotConstrained&&(me?Me||(an=an.concat(Ee)):an=an.concat(fe)),ln=0;ln<an.length;ln++)if(!($t=an[ln]).fixedrange){var _n=$t._name,Rn=$t._autorangeInitial;$t._rangeInitial0===void 0&&$t._rangeInitial1===void 0?mn[_n+".autorange"]=!0:$t._rangeInitial0===void 0?(mn[_n+".autorange"]=Rn,mn[_n+".range"]=[null,$t._rangeInitial1]):$t._rangeInitial1===void 0?(mn[_n+".range"]=[$t._rangeInitial0,null],mn[_n+".autorange"]=Rn):mn[_n+".range"]=[$t._rangeInitial0,$t._rangeInitial1]}}ae.emit("plotly_doubleclick",null),h.call("_guiRelayout",ae,mn)}}function Ht(){Qt([0,0,Se,Oe]),k.syncOrAsync([y.previousPromises,function(){ae._fullLayout._replotting=!1,h.call("_guiRelayout",ae,rt)}],ae)}function Qt(Zt){var an,$t,ln,mn,xn=ae._fullLayout,Pn=xn._plots,Mn=xn._subplots.cartesian;if(Ye&&h.subplotsRegistry.splom.drag(ae),Ve){for(an=0;an<Mn.length;an++)if(ln=($t=Pn[Mn[an]]).xaxis,mn=$t.yaxis,$t._scene){var _n=k.simpleMap(ln.range,ln.r2l),Rn=k.simpleMap(mn.range,mn.r2l);ln.limitRange&&ln.limitRange(),mn.limitRange&&mn.limitRange(),_n=ln.range,Rn=mn.range,$t._scene.update({range:[_n[0],Rn[0],_n[1],Rn[1]]})}}if((Ye||Ve)&&(g(ae),v(ae)),at){var In=Zt[2]/we._length,Vn=Zt[3]/_e._length;for(an=0;an<Mn.length;an++){ln=($t=Pn[Mn[an]]).xaxis,mn=$t.yaxis;var tr,er,Wn,or,Jt=(Pe||de.isSubplotConstrained)&&!ln.fixedrange&&se[ln._id],en=(Ne||de.isSubplotConstrained)&&!mn.fixedrange&&ie[mn._id];if(Jt?(tr=In,Wn=ge||de.isSubplotConstrained?Zt[0]:hn(ln,tr)):de.xaHash[ln._id]?(tr=In,Wn=Zt[0]*ln._length/we._length):de.yaHash[ln._id]?(tr=Vn,Wn=Me==="ns"?-Zt[1]*ln._length/_e._length:hn(ln,tr,{n:"top",s:"bottom"}[Me])):Wn=Tn(ln,tr=Cn(ln,In,Vn)),tr>1&&(ln.maxallowed!==void 0&&Pe===(ln.range[0]<ln.range[1]?"e":"w")||ln.minallowed!==void 0&&Pe===(ln.range[0]<ln.range[1]?"w":"e"))&&(tr=1,Wn=0),en?(er=Vn,or=ve||de.isSubplotConstrained?Zt[1]:hn(mn,er)):de.yaHash[mn._id]?(er=Vn,or=Zt[1]*mn._length/_e._length):de.xaHash[mn._id]?(er=In,or=me==="ew"?-Zt[0]*mn._length/we._length:hn(mn,er,{e:"right",w:"left"}[me])):or=Tn(mn,er=Cn(mn,In,Vn)),er>1&&(mn.maxallowed!==void 0&&Ne===(mn.range[0]<mn.range[1]?"n":"s")||mn.minallowed!==void 0&&Ne===(mn.range[0]<mn.range[1]?"s":"n"))&&(er=1,or=0),tr||er){tr||(tr=1),er||(er=1);var En=ln._offset-Wn/tr,gn=mn._offset-or/er;$t.clipRect.call(n.setTranslate,Wn,or).call(n.setScale,tr,er),$t.plot.call(n.setTranslate,En,gn).call(n.setScale,1/tr,1/er),tr===$t.xScaleFactor&&er===$t.yScaleFactor||(n.setPointGroupScale($t.zoomScalePts,tr,er),n.setTextPointsScale($t.zoomScaleTxt,tr,er)),n.hideOutsideRangePoints($t.clipOnAxisFalseTraces,$t),$t.xScaleFactor=tr,$t.yScaleFactor=er}}}}function Cn(Zt,an,$t){return Zt.fixedrange?0:Pe&&De.xaHash[Zt._id]?an:Ne&&(De.isSubplotConstrained?De.xaHash:De.yaHash)[Zt._id]?$t:0}function Tn(Zt,an){return an?(Zt.range=Zt._r.slice(),w(Zt,an),hn(Zt,an)):0}function hn(Zt,an,$t){return Zt._length*(1-an)*d[$t||Zt.constraintoward||"middle"]}return ve.length*ge.length!=1&&re(Ot,function(Zt){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(ct(),ae._transitioningWithDuration)return Zt.preventDefault(),void Zt.stopPropagation();wt(),clearTimeout(Mt);var an=-Zt.deltaY;if(isFinite(an)||(an=Zt.wheelDelta/10),isFinite(an)){var $t,ln=Math.exp(-Math.min(Math.max(an,-20),20)/200),mn=Ct.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xn=(Zt.clientX-mn.left)/mn.width,Pn=(mn.bottom-Zt.clientY)/mn.height;if(Pe){for(ge||(xn=.5),$t=0;$t<fe.length;$t++)Mn(fe[$t],xn,ln);Wt("x"),yt[2]*=ln,yt[0]+=yt[2]*xn*(1/ln-1)}if(Ne){for(ve||(Pn=.5),$t=0;$t<Ee.length;$t++)Mn(Ee[$t],Pn,ln);Wt("y"),yt[3]*=ln,yt[1]+=yt[3]*(1-Pn)*(1/ln-1)}Qt(yt),Nt(),ae.emit("plotly_relayouting",rt),Mt=setTimeout(function(){ae._fullLayout&&(yt=[0,0,Se,Oe],Ht())},Lt),Zt.preventDefault()}else k.log("Did not find wheel motion attributes: ",Zt)}function Mn(_n,Rn,In){if(!_n.fixedrange){var Vn=k.simpleMap(_n.range,_n.r2l),tr=Vn[0]+(Vn[1]-Vn[0])*Rn;_n.range=Vn.map(function(er){return _n.l2r(tr+(er-tr)*In)})}}}),Ot},makeDragger:R,makeRectDragger:j,makeZoombox:V,makeCorners:U,updateZoombox:te,xyCorners:Q,transitionZoombox:J,removeZoombox:X,showDoubleClickNotifier:K,attachWheelEventHandler:re}},42464:function(ee,z,e){var M=e(33428),k=e(93024),o=e(86476),T=e(93972),b=e(51184).makeDragBox,h=e(33816).DRAGGERSIZE;z.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)M.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(n,r){if((t._plots[n].mainplot&&!0)===(t._plots[r].mainplot&&!0)){var i=n.split("y"),l=r.split("y");return i[0]===l[0]?Number(i[1]||1)-Number(l[1]||1):Number(i[0]||1)-Number(l[0]||1)}return t._plots[n].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],i=r.xaxis,l=r.yaxis;if(!r.mainplot){var u=b(s,r,i._offset,l._offset,i._length,l._length,"ns","ew");u.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===n&&s._fullLayout._plots[n]&&k.hover(s,x,n)},k.hover(s,x,n),s._fullLayout._lasthover=u,s._fullLayout._hoversubplot=n},u.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,o.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,r,i._offset-h,l._offset-h,h,h,"n","w"),b(s,r,i._offset+i._length,l._offset-h,h,h,"n","e"),b(s,r,i._offset-h,l._offset+l._length,h,h,"s","w"),b(s,r,i._offset+i._length,l._offset+l._length,h,h,"s","e"))}if(s._context.showAxisDragHandles){if(n===i._mainSubplot){var p=i._mainLinePosition;i.side==="top"&&(p-=h),b(s,r,i._offset+.1*i._length,p,.8*i._length,h,"","ew"),b(s,r,i._offset,p,.1*i._length,h,"","w"),b(s,r,i._offset+.9*i._length,p,.1*i._length,h,"","e")}if(n===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=h),b(s,r,c,l._offset+.1*l._length,h,.8*l._length,"ns",""),b(s,r,c,l._offset+.9*l._length,h,.1*l._length,"s",""),b(s,r,c,l._offset,h,.1*l._length,"n","")}}});var a=t._hoverlayer.node();a.onmousemove=function(n){n.target=s._fullLayout._lasthover,k.hover(s,n,t._hoversubplot)},a.onclick=function(n){n.target=s._fullLayout._lasthover,k.click(s,n)},a.onmousedown=function(n){s._fullLayout._lasthover.onmousedown(n)},z.updateFx(s)}},z.updateFx=function(s){var t=s._fullLayout,a=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,a)}},36632:function(ee,z,e){var M=e(24040),k=e(3400),o=e(79811);ee.exports=function(T){return function(b,h){var s=b[T];if(Array.isArray(s))for(var t=M.subplotsRegistry.cartesian,a=t.idRegex,n=h._subplots,r=n.xaxis,i=n.yaxis,l=n.cartesian,u=h._has("cartesian")||h._has("gl2d"),p=0;p<s.length;p++){var c=s[p];if(k.isPlainObject(c)){var x=o.cleanId(c.xref,"x",!1),d=o.cleanId(c.yref,"y",!1),g=a.x.test(x),v=a.y.test(d);if(g||v){u||k.pushUnique(h._basePlotModules,t);var y=!1;g&&r.indexOf(x)===-1&&(r.push(x),y=!0),v&&i.indexOf(d)===-1&&(i.push(d),y=!0),y&&g&&v&&l.push(x+d)}}}}}},57952:function(ee,z,e){var M=e(33428),k=e(24040),o=e(3400),T=e(7316),b=e(43616),h=e(84888)._M,s=e(79811),t=e(33816),a=e(9616),n=o.ensureSingle;function r(c,x,d){return o.ensureSingle(c,x,d,function(g){g.datum(d)})}function i(c,x,d,g,v){for(var y,m,_,f=t.traceLayerClasses,S=c._fullLayout,w=S._modules,E={},O=0;O<d.length;O++){var C=d[O][0].trace.zorder||0;E[C]||(E[C]=[]),E[C].push(d[O])}for(var P=[],R=[],j=Object.keys(E).map(Number).sort(o.sorterAsc),D=0;D<j.length;D++)for(var N=j[D],W=0;W<w.length;W++){var F=(y=w[W]).name,V=k.modules[F].categories;if(V.svg){var U=y.layerName||F+"layer",te=U+(D?Number(D)+1:""),J=y.plot;_=(m=h(d,J,N))[0],d=m[1],_.length&&P.push({i:f.indexOf(U),zorder:D,className:te,plotMethod:J,cdModule:_}),V.zoomScale&&R.push("."+te)}}P.sort(function(Q,Z){return(Q.zorder||0)-(Z.zorder||0)||Q.i-Z.i});var X=x.plot.selectAll("g.mlayer").data(P,function(Q){return Q.className});if(X.enter().append("g").attr("class",function(Q){return Q.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),X.exit().remove(),X.order(),X.each(function(Q){var Z=M.select(this),re=Q.className;Q.plotMethod(c,x,Q.cdModule,Z,g,v),t.clipOnAxisFalseQuery.indexOf("."+re)===-1&&b.setClipUrl(Z,x.layerClipId,c)}),S._has("scattergl")&&(y=k.getModule("scattergl"),_=h(d,y)[0],y.plot(c,x,_)),!c._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),R.length)){var K=x.plot.selectAll(R.join(",")).selectAll(".trace");x.zoomScalePts=K.selectAll("path.point"),x.zoomScaleTxt=K.selectAll(".textpoint")}}function l(c,x){var d=x.plotgroup,g=x.id,v=t.layerValue2layerClass[x.xaxis.layer],y=t.layerValue2layerClass[x.yaxis.layer],m=c._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var _=x.mainplotinfo,f=_.plotgroup,S=g+"-x",w=g+"-y";x.minorGridlayer=_.minorGridlayer,x.gridlayer=_.gridlayer,x.zerolinelayer=_.zerolinelayer,n(_.overlinesBelow,"path",S),n(_.overlinesBelow,"path",w),n(_.overaxesBelow,"g",S),n(_.overaxesBelow,"g",w),x.plot=n(_.overplot,"g",g),n(_.overlinesAbove,"path",S),n(_.overlinesAbove,"path",w),n(_.overaxesAbove,"g",S),n(_.overaxesAbove,"g",w),x.xlines=f.select(".overlines-"+v).select("."+S),x.ylines=f.select(".overlines-"+y).select("."+w),x.xaxislayer=f.select(".overaxes-"+v).select("."+S),x.yaxislayer=f.select(".overaxes-"+y).select("."+w)}else if(m)x.xlines=n(d,"path","xlines-above"),x.ylines=n(d,"path","ylines-above"),x.xaxislayer=n(d,"g","xaxislayer-above"),x.yaxislayer=n(d,"g","yaxislayer-above");else{var E=n(d,"g","layer-subplot");x.shapelayer=n(E,"g","shapelayer"),x.imagelayer=n(E,"g","imagelayer"),x.minorGridlayer=n(d,"g","minor-gridlayer"),x.gridlayer=n(d,"g","gridlayer"),x.zerolinelayer=n(d,"g","zerolinelayer");var O=n(d,"g","layer-between");x.shapelayerBetween=n(O,"g","shapelayer"),x.imagelayerBetween=n(O,"g","imagelayer"),n(d,"path","xlines-below"),n(d,"path","ylines-below"),x.overlinesBelow=n(d,"g","overlines-below"),n(d,"g","xaxislayer-below"),n(d,"g","yaxislayer-below"),x.overaxesBelow=n(d,"g","overaxes-below"),x.plot=n(d,"g","plot"),x.overplot=n(d,"g","overplot"),x.xlines=n(d,"path","xlines-above"),x.ylines=n(d,"path","ylines-above"),x.overlinesAbove=n(d,"g","overlines-above"),n(d,"g","xaxislayer-above"),n(d,"g","yaxislayer-above"),x.overaxesAbove=n(d,"g","overaxes-above"),x.xlines=d.select(".xlines-"+v),x.ylines=d.select(".ylines-"+y),x.xaxislayer=d.select(".xaxislayer-"+v),x.yaxislayer=d.select(".yaxislayer-"+y)}m||(r(x.minorGridlayer,"g",x.xaxis._id),r(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(C){return C[0]}).sort(s.idSort),r(x.gridlayer,"g",x.xaxis._id),r(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(C){return C[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function u(c,x){if(c){var d={};for(var g in c.each(function(_){var f=_[0];M.select(this).remove(),p(f,x),d[f]=!0}),x._plots)for(var v=x._plots[g].overlays||[],y=0;y<v.length;y++){var m=v[y];d[m.id]&&m.plot.selectAll(".trace").remove()}}}function p(c,x){x._draggers.selectAll("g."+c).remove(),x._defs.select("#clip"+x._uid+c+"plot").remove()}z.name="cartesian",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=t.idRegex,z.attrRegex=t.attrRegex,z.attributes=e(26720),z.layoutAttributes=e(94724),z.supplyLayoutDefaults=e(67352),z.transitionAxes=e(73736),z.finalizeSubplots=function(c,x){var d,g,v,y=x._subplots,m=y.xaxis,_=y.yaxis,f=y.cartesian,S=f.concat(y.gl2d||[]),w={},E={};for(d=0;d<S.length;d++){var O=S[d].split("y");w[O[0]]=1,E["y"+O[1]]=1}for(d=0;d<m.length;d++)w[g=m[d]]||(v=(c[s.id2name(g)]||{}).anchor,t.idRegex.y.test(v)||(v="y"),f.push(g+v),S.push(g+v),E[v]||(E[v]=1,o.pushUnique(_,v)));for(d=0;d<_.length;d++)E[v=_[d]]||(g=(c[s.id2name(v)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),f.push(g+v),S.push(g+v),w[g]||(w[g]=1,o.pushUnique(m,g)));if(!S.length){for(var C in g="",v="",c)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!g||+C.substr(5)<+g.substr(5))&&(g=C):(!v||+C.substr(5)<+v.substr(5))&&(v=C));g=g?s.name2id(g):"x",v=v?s.name2id(v):"y",m.push(g),_.push(v),f.push(g+v)}},z.plot=function(c,x,d,g){var v,y=c._fullLayout,m=y._subplots.cartesian,_=c.calcdata;if(!Array.isArray(x))for(x=[],v=0;v<_.length;v++)x.push(v);for(v=0;v<m.length;v++){for(var f,S=m[v],w=y._plots[S],E=[],O=0;O<_.length;O++){var C=_[O],P=C[0].trace;P.xaxis+P.yaxis===S&&((x.indexOf(P.index)!==-1||P.carpet)&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(P.fill)!==-1&&E.indexOf(f)===-1&&E.push(f),E.push(C)),f=C)}i(c,w,E,d,g)}},z.clean=function(c,x,d,g){var v,y,m,_=g._plots||{},f=x._plots||{},S=g._subplots||{};if(g._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(m in _)(v=_[m]).plotgroup&&v.plotgroup.remove();var w=g._has&&g._has("gl"),E=x._has&&x._has("gl");if(w&&!E)for(m in _)(v=_[m])._scene&&v._scene.destroy();if(S.xaxis&&S.yaxis){var O=s.listIds({_fullLayout:g});for(y=0;y<O.length;y++){var C=O[y];x[s.id2name(C)]||g._infolayer.selectAll(".g-"+C+"title").remove()}}var P=g._has&&g._has("cartesian"),R=x._has&&x._has("cartesian");if(P&&!R)u(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(S.cartesian)for(y=0;y<S.cartesian.length;y++){var j=S.cartesian[y];if(!f[j]){var D="."+j+",."+j+"-x,."+j+"-y";g._cartesianlayer.selectAll(D).remove(),p(j,g)}}},z.drawFramework=function(c){var x=c._fullLayout,d=function(v){var y,m,_,f,S,w,E=v._fullLayout,O=E._subplots.cartesian,C=O.length,P=[],R=[];for(y=0;y<C;y++){_=O[y],S=(f=E._plots[_]).xaxis,w=f.yaxis;var j=S._mainAxis,D=w._mainAxis,N=j._id+D._id,W=E._plots[N];f.overlays=[],N!==_&&W?(f.mainplot=N,f.mainplotinfo=W,R.push(_)):(f.mainplot=void 0,f.mainplotinfo=void 0,P.push(_))}for(y=0;y<R.length;y++)_=R[y],(f=E._plots[_]).mainplotinfo.overlays.push(f);var F=P.concat(R),V=new Array(C);for(y=0;y<C;y++){_=F[y],S=(f=E._plots[_]).xaxis,w=f.yaxis;var U=[_,S.layer,w.layer,S.overlaying||"",w.overlaying||""];for(m=0;m<f.overlays.length;m++)U.push(f.overlays[m].id);V[y]=U}return V}(c),g=x._cartesianlayer.selectAll(".subplot").data(d,String);g.enter().append("g").attr("class",function(v){return"subplot "+v[0]}),g.order(),g.exit().call(u,x),g.each(function(v){var y=v[0],m=x._plots[y];m.plotgroup=M.select(this),l(c,m),m.draglayer=n(x._draggers,"g",y)})},z.rangePlot=function(c,x,d){l(c,x),i(c,x,d),T.style(c)},z.toSVG=function(c){var x=c._fullLayout._glimages,d=M.select(c).selectAll(".svg-container");d.filter(function(g,v){return v===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,v=g.toDataURL("image/png");x.append("svg:image").attr({xmlns:a.svg,"xlink:href":v,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},z.updateFx=e(42464).updateFx},94724:function(ee,z,e){var M=e(25376),k=e(22548),o=e(98192).u,T=e(92880).extendFlat,b=e(31780).templatedArray,h=e(29736).descriptionWithDates,s=e(39032).ONEDAY,t=e(33816),a=t.HOUR_PATTERN,n=t.WEEKDAY_PATTERN,r={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},i=T({},r,{values:r.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function d(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=5),w}function g(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var v={valType:"color",dflt:k.defaultLine,editType:"ticks"},y={valType:"color",dflt:k.lightLine,editType:"ticks"};function m(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var _=T({},o,{editType:"ticks"}),f={valType:"boolean",editType:"ticks"};ee.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[n,a,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:i,nticks:l(),tick0:u,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:d(),tickwidth:g(),tickcolor:v,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:h("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:h("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:f,gridcolor:y,gridwidth:m(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:r,nticks:l("minor"),tick0:u,dtick:p,tickvals:c,ticks:x,ticklen:d("minor"),tickwidth:g("minor"),tickcolor:v,gridcolor:y,gridwidth:m("minor"),griddash:_,showgrid:f,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},67352:function(ee,z,e){var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover,T=e(41008),b=e(31780),h=e(64859),s=e(94724),t=e(14944),a=e(28336),n=e(71888),r=e(37668),i=e(79811),l=i.id2name,u=i.name2id,p=e(33816).AX_ID_PATTERN,c=e(24040),x=c.traceIs,d=c.getComponentMethod;function g(v,y,m){Array.isArray(v[y])?v[y].push(m):v[y]=[m]}ee.exports=function(v,y,m){var _,f,S=y.autotypenumbers,w={},E={},O={},C={},P={},R={},j={},D={},N={},W={};for(_=0;_<m.length;_++){var F=m[_];if(x(F,"cartesian")||x(F,"gl2d")){var V,U;if(F.xaxis)V=l(F.xaxis),g(w,V,F);else if(F.xaxes)for(f=0;f<F.xaxes.length;f++)g(w,l(F.xaxes[f]),F);if(F.yaxis)U=l(F.yaxis),g(w,U,F);else if(F.yaxes)for(f=0;f<F.yaxes.length;f++)g(w,l(F.yaxes[f]),F);F.type==="funnel"?F.orientation==="h"?(V&&(E[V]=!0),U&&(j[U]=!0)):U&&(O[U]=!0):F.type==="image"?(U&&(D[U]=!0),V&&(D[V]=!0)):(U&&(P[U]=!0,R[U]=!0),x(F,"carpet")&&(F.type!=="carpet"||F._cheater)||V&&(C[V]=!0)),F.type==="carpet"&&F._cheater&&V&&(E[V]=!0),x(F,"2dMap")&&(N[V]=!0,N[U]=!0),x(F,"oriented")&&(W[F.orientation==="h"?U:V]=!0)}}var te=y._subplots,J=te.xaxis,X=te.yaxis,K=M.simpleMap(J,l),Q=M.simpleMap(X,l),Z=K.concat(Q),re=k.background;J.length&&X.length&&(re=M.coerce(v,y,h,"plot_bgcolor"));var oe,ae,ce,he,pe,xe=k.combine(re,y.paper_bgcolor);function be(){var $e=w[oe]||[];pe._traceIndices=$e.map(function(wt){return wt._expandedIndex}),pe._annIndices=[],pe._shapeIndices=[],pe._selectionIndices=[],pe._imgIndices=[],pe._subplotsWith=[],pe._counterAxes=[],pe._name=pe._attr=oe,pe._id=ae}function ve($e,wt){return M.coerce(he,pe,s,$e,wt)}function ge($e,wt){return M.coerce2(he,pe,s,$e,wt)}function we($e){return $e==="x"?X:J}function _e($e,wt){for(var Pt=$e==="x"?K:Q,Ot=[],At=0;At<Pt.length;At++){var He=Pt[At];He===wt||(v[He]||{}).overlaying||Ot.push(u(He))}return Ot}var se={x:we("x"),y:we("y")},ie=se.x.concat(se.y),fe={},Ee=[];function Te(){var $e=he.matches;p.test($e)&&ie.indexOf($e)===-1&&(fe[$e]=he.type,Ee=Object.keys(fe))}var Ae=T(v,y),Se=o(Ae);for(_=0;_<Z.length;_++){oe=Z[_],ae=u(oe),ce=oe.charAt(0),M.isPlainObject(v[oe])||(v[oe]={}),he=v[oe],pe=b.newContainer(y,oe,ce+"axis"),be();var Oe=ce==="x"&&!C[oe]&&E[oe]||ce==="y"&&!P[oe]&&O[oe],De=ce==="y"&&(!R[oe]&&j[oe]||D[oe]),de={hasMinor:!0,letter:ce,font:y.font,outerTicks:N[oe],showGrid:!W[oe],data:w[oe]||[],bgColor:xe,calendar:y.calendar,automargin:!0,visibleDflt:Oe,reverseDflt:De,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ce]||{})[ae],noAutotickangles:ce==="y"};ve("uirevision",y.uirevision),t(he,pe,ve,de),a(he,pe,ve,de,y);var me=Se&&ce===Ae.charAt(0),Me=ge("spikecolor",Se?pe.color:void 0),ze=ge("spikethickness",Se?1.5:void 0),Pe=ge("spikedash",Se?"dot":void 0),Ne=ge("spikemode",Se?"across":void 0),Ve=ge("spikesnap");ve("showspikes",!!(me||Me||ze||Pe||Ne||Ve))||(delete pe.spikecolor,delete pe.spikethickness,delete pe.spikedash,delete pe.spikemode,delete pe.spikesnap);var Ye=l(he.overlaying),at=[0,1];if(y[Ye]!==void 0){var rt=l(y[Ye].anchor);y[rt]!==void 0&&(at=y[rt].domain)}r(he,pe,ve,{letter:ce,counterAxes:se[ce],overlayableAxes:_e(ce,oe),grid:y.grid,overlayingDomain:at}),ve("title.standoff"),Te(),pe._input=he}for(_=0;_<Ee.length;){ae=Ee[_++],ce=(oe=l(ae)).charAt(0),M.isPlainObject(v[oe])||(v[oe]={}),he=v[oe],pe=b.newContainer(y,oe,ce+"axis"),be();var dt={letter:ce,font:y.font,outerTicks:N[oe],showGrid:!W[oe],data:[],bgColor:xe,calendar:y.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ce]||{})[ae]};ve("uirevision",y.uirevision),pe.type=fe[ae]||"linear",a(he,pe,ve,dt,y),r(he,pe,ve,{letter:ce,counterAxes:se[ce],overlayableAxes:_e(ce,oe),grid:y.grid}),ve("fixedrange"),Te(),pe._input=he}var vt=d("rangeslider","handleDefaults"),ht=d("rangeselector","handleDefaults");for(_=0;_<K.length;_++)oe=K[_],he=v[oe],pe=y[oe],vt(v,y,oe),pe.type==="date"&&ht(he,pe,y,Q,pe.calendar),ve("fixedrange");for(_=0;_<Q.length;_++){oe=Q[_],he=v[oe],pe=y[oe];var et=y[l(pe.anchor)];ve("fixedrange",d("rangeslider","isVisible")(et))}n.handleDefaults(v,y,{axIds:ie.concat(Ee).sort(i.idSort),axHasImage:D})}},42136:function(ee,z,e){var M=e(49760).mix,k=e(22548),o=e(3400);ee.exports=function(T,b,h,s){var t=(s=s||{}).dfltColor;function a(v,y){return o.coerce2(T,b,s.attributes,v,y)}var n=a("linecolor",t),r=a("linewidth");h("showline",s.showLine||!!n||!!r)||(delete b.linecolor,delete b.linewidth);var i=a("gridcolor",M(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),l=a("gridwidth"),u=a("griddash");if(h("showgrid",s.showGrid||!!i||!!l||!!u)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var p=a("minor.gridcolor",M(b.gridcolor,s.bgColor,67).toRgbString()),c=a("minor.gridwidth",b.gridwidth||1),x=a("minor.griddash",b.griddash||"solid");h("minor.showgrid",!!p||!!c||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var d=a("zerolinecolor",t),g=a("zerolinewidth");h("zeroline",s.showGrid||!!d||!!g)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},37668:function(ee,z,e){var M=e(38248),k=e(3400);ee.exports=function(o,T,b,h){var s,t,a,n,r,i,l=h.counterAxes||[],u=h.overlayableAxes||[],p=h.letter,c=h.grid,x=h.overlayingDomain;c&&(t=c._domains[p][c._axisMap[T._id]],s=c._anchors[T._id],t&&(a=c[p+"side"].split(" ")[0],n=c.domain[p][a==="right"||a==="top"?1:0])),t=t||[0,1],s=s||(M(o.position)?"free":l[0]||"free"),a=a||(p==="x"?"bottom":"left"),n=n||0,r=0,i=!1;var d=k.coerce(o,T,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:s}},"anchor"),g=k.coerce(o,T,{side:{valType:"enumerated",values:p==="x"?["bottom","top"]:["left","right"],dflt:a}},"side");d==="free"&&(p==="y"&&(b("autoshift")&&(n=g==="left"?x[0]:x[1],i=!T.automargin||T.automargin,r=g==="left"?-3:3),b("shift",r)),b("position",n)),b("automargin",i);var v=!1;if(u.length&&(v=k.coerce(o,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!v){var y=b("domain",t);y[0]>y[1]-.000244140625&&(T.domain=t),k.noneOrAll(o.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return b("layer"),T}},42568:function(ee,z,e){var M=e(85024);ee.exports=function(k,o,T,b,h){h||(h={});var s=h.tickSuffixDflt,t=M(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},96312:function(ee,z,e){var M=e(76808);ee.exports=function(k,o,T,b){var h=o._template||{},s=o.type||h.type||"-";T("minallowed"),T("maxallowed");var t,a=T("range");a||b.noInsiderange||s==="log"||(!(t=T("insiderange"))||t[0]!==null&&t[1]!==null||(o.insiderange=!1,t=void 0),t&&(a=T("range",t)));var n,r=o.getAutorangeDflt(a,b),i=T("autorange",r);!a||(a[0]!==null||a[1]!==null)&&(a[0]!==null&&a[1]!==null||i!=="reversed"&&i!==!0)&&(a[0]===null||i!=="min"&&i!=="max reversed")&&(a[1]===null||i!=="max"&&i!=="min reversed")||(a=void 0,delete o.range,o.autorange=!0,n=!0),n||(i=T("autorange",r=o.getAutorangeDflt(a,b))),i&&(M(T,i,a),s!=="linear"&&s!=="-"||T("rangemode")),o.cleanRange()}},21160:function(ee,z,e){var M=e(84284).FROM_BL;ee.exports=function(k,o,T){T===void 0&&(T=M[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],h=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(h+(b[0]-h)*o),k.l2r(h+(b[1]-h)*o)],k.setScale()}},78344:function(ee,z,e){var M=e(33428),k=e(94336).E9,o=e(3400),T=o.numberFormat,b=e(38248),h=o.cleanNumber,s=o.ms2DateTime,t=o.dateTime2ms,a=o.ensureNumber,n=o.isArrayOrTypedArray,r=e(39032),i=r.FP_SAFE,l=r.BADNUM,u=r.LOG_CLIP,p=r.ONEWEEK,c=r.ONEDAY,x=r.ONEHOUR,d=r.ONEMIN,g=r.ONESEC,v=e(79811),y=e(33816),m=y.HOUR_PATTERN,_=y.WEEKDAY_PATTERN;function f(w){return Math.pow(10,w)}function S(w){return w!=null}ee.exports=function(w,E){E=E||{};var O=w._id||"x",C=O.charAt(0);function P(Z,re){if(Z>0)return Math.log(Z)/Math.LN10;if(Z<=0&&re&&w.range&&w.range.length===2){var oe=w.range[0],ae=w.range[1];return .5*(oe+ae-2*u*Math.abs(oe-ae))}return l}function R(Z,re,oe,ae){if((ae||{}).msUTC&&b(Z))return+Z;var ce=t(Z,oe||w.calendar);if(ce===l){if(!b(Z))return l;Z=+Z;var he=Math.floor(10*o.mod(Z+.05,1)),pe=Math.round(Z-he/10);ce=t(new Date(pe))+he/10}return ce}function j(Z,re,oe){return s(Z,re,oe||w.calendar)}function D(Z){return w._categories[Math.round(Z)]}function N(Z){if(S(Z)){if(w._categoriesMap===void 0&&(w._categoriesMap={}),w._categoriesMap[Z]!==void 0)return w._categoriesMap[Z];w._categories.push(typeof Z=="number"?String(Z):Z);var re=w._categories.length-1;return w._categoriesMap[Z]=re,re}return l}function W(Z){if(w._categoriesMap)return w._categoriesMap[Z]}function F(Z){var re=W(Z);return re!==void 0?re:b(Z)?+Z:void 0}function V(Z){return b(Z)?+Z:W(Z)}function U(Z,re,oe){return M.round(oe+re*Z,2)}function te(Z,re,oe){return(Z-oe)/re}var J=function(Z){return b(Z)?U(Z,w._m,w._b):l},X=function(Z){return te(Z,w._m,w._b)};if(w.rangebreaks){var K=C==="y";J=function(Z){if(!b(Z))return l;var re=w._rangebreaks.length;if(!re)return U(Z,w._m,w._b);var oe=K;w.range[0]>w.range[1]&&(oe=!oe);for(var ae=oe?-1:1,ce=ae*Z,he=0,pe=0;pe<re;pe++){var xe=ae*w._rangebreaks[pe].min,be=ae*w._rangebreaks[pe].max;if(ce<xe)break;if(!(ce>be)){he=ce<(xe+be)/2?pe:pe+1;break}he=pe+1}var ve=w._B[he]||0;return isFinite(ve)?U(Z,w._m2,ve):0},X=function(Z){var re=w._rangebreaks.length;if(!re)return te(Z,w._m,w._b);for(var oe=0,ae=0;ae<re&&!(Z<w._rangebreaks[ae].pmin);ae++)Z>w._rangebreaks[ae].pmax&&(oe=ae+1);return te(Z,w._m2,w._B[oe])}}w.c2l=w.type==="log"?P:a,w.l2c=w.type==="log"?f:a,w.l2p=J,w.p2l=X,w.c2p=w.type==="log"?function(Z,re){return J(P(Z,re))}:J,w.p2c=w.type==="log"?function(Z){return f(X(Z))}:X,["linear","-"].indexOf(w.type)!==-1?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=h,w.c2d=w.c2r=w.l2d=w.l2r=a,w.d2p=w.r2p=function(Z){return w.l2p(h(Z))},w.p2d=w.p2r=X,w.cleanPos=a):w.type==="log"?(w.d2r=w.d2l=function(Z,re){return P(h(Z),re)},w.r2d=w.r2c=function(Z){return f(h(Z))},w.d2c=w.r2l=h,w.c2d=w.l2r=a,w.c2r=P,w.l2d=f,w.d2p=function(Z,re){return w.l2p(w.d2r(Z,re))},w.p2d=function(Z){return f(X(Z))},w.r2p=function(Z){return w.l2p(h(Z))},w.p2r=X,w.cleanPos=a):w.type==="date"?(w.d2r=w.r2d=o.identity,w.d2c=w.r2c=w.d2l=w.r2l=R,w.c2d=w.c2r=w.l2d=w.l2r=j,w.d2p=w.r2p=function(Z,re,oe){return w.l2p(R(Z,0,oe))},w.p2d=w.p2r=function(Z,re,oe){return j(X(Z),re,oe)},w.cleanPos=function(Z){return o.cleanDate(Z,l,w.calendar)}):w.type==="category"?(w.d2c=w.d2l=N,w.r2d=w.c2d=w.l2d=D,w.d2r=w.d2l_noadd=F,w.r2c=function(Z){var re=V(Z);return re!==void 0?re:w.fraction2r(.5)},w.l2r=w.c2r=a,w.r2l=V,w.d2p=function(Z){return w.l2p(w.r2c(Z))},w.p2d=function(Z){return D(X(Z))},w.r2p=w.d2p,w.p2r=X,w.cleanPos=function(Z){return typeof Z=="string"&&Z!==""?Z:a(Z)}):w.type==="multicategory"&&(w.r2d=w.c2d=w.l2d=D,w.d2r=w.d2l_noadd=F,w.r2c=function(Z){var re=F(Z);return re!==void 0?re:w.fraction2r(.5)},w.r2c_just_indices=W,w.l2r=w.c2r=a,w.r2l=F,w.d2p=function(Z){return w.l2p(w.r2c(Z))},w.p2d=function(Z){return D(X(Z))},w.r2p=w.d2p,w.p2r=X,w.cleanPos=function(Z){return Array.isArray(Z)||typeof Z=="string"&&Z!==""?Z:a(Z)},w.setupMultiCategory=function(Z){var re,oe,ae=w._traceIndices,ce=w._matchGroup;if(ce&&w._categories.length===0){for(var he in ce)if(he!==O){var pe=E[v.id2name(he)];ae=ae.concat(pe._traceIndices)}}var xe=[[0,{}],[0,{}]],be=[];for(re=0;re<ae.length;re++){var ve=Z[ae[re]];if(C in ve){var ge=ve[C],we=ve._length||o.minRowLength(ge);if(n(ge[0])&&n(ge[1]))for(oe=0;oe<we;oe++){var _e=ge[0][oe],se=ge[1][oe];S(_e)&&S(se)&&(be.push([_e,se]),_e in xe[0][1]||(xe[0][1][_e]=xe[0][0]++),se in xe[1][1]||(xe[1][1][se]=xe[1][0]++))}}}for(be.sort(function(ie,fe){var Ee=xe[0][1],Te=Ee[ie[0]]-Ee[fe[0]];if(Te)return Te;var Ae=xe[1][1];return Ae[ie[1]]-Ae[fe[1]]}),re=0;re<be.length;re++)N(be[re])}),w.fraction2r=function(Z){var re=w.r2l(w.range[0]),oe=w.r2l(w.range[1]);return w.l2r(re+Z*(oe-re))},w.r2fraction=function(Z){var re=w.r2l(w.range[0]),oe=w.r2l(w.range[1]);return(w.r2l(Z)-re)/(oe-re)},w.limitRange=function(Z){var re=w.minallowed,oe=w.maxallowed;if(re!==void 0||oe!==void 0){Z||(Z="range");var ae=o.nestedProperty(w,Z).get(),ce=o.simpleMap(ae,w.r2l),he=ce[1]<ce[0];he&&ce.reverse();var pe=o.simpleMap([re,oe],w.r2l);if(re!==void 0&&ce[0]<pe[0]&&(ae[he?1:0]=re),oe!==void 0&&ce[1]>pe[1]&&(ae[he?0:1]=oe),ae[0]===ae[1]){var xe=w.l2r(re),be=w.l2r(oe);if(re!==void 0){var ve=xe+1;oe!==void 0&&(ve=Math.min(ve,be)),ae[he?1:0]=ve}if(oe!==void 0){var ge=be+1;re!==void 0&&(ge=Math.max(ge,xe)),ae[he?0:1]=ge}}}},w.cleanRange=function(Z,re){w._cleanRange(Z,re),w.limitRange(Z)},w._cleanRange=function(Z,re){re||(re={}),Z||(Z="range");var oe,ae,ce=o.nestedProperty(w,Z).get();if(ae=(ae=w.type==="date"?o.dfltRange(w.calendar):C==="y"?y.DFLTRANGEY:w._name==="realaxis"?[0,1]:re.dfltRange||y.DFLTRANGEX).slice(),w.rangemode!=="tozero"&&w.rangemode!=="nonnegative"||(ae[0]=0),ce&&ce.length===2){var he=ce[0]===null,pe=ce[1]===null;for(w.type!=="date"||w.autorange||(ce[0]=o.cleanDate(ce[0],l,w.calendar),ce[1]=o.cleanDate(ce[1],l,w.calendar)),oe=0;oe<2;oe++)if(w.type==="date"){if(!o.isDateTime(ce[oe],w.calendar)){w[Z]=ae;break}if(w.r2l(ce[0])===w.r2l(ce[1])){var xe=o.constrain(w.r2l(ce[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);ce[0]=w.l2r(xe-1e3),ce[1]=w.l2r(xe+1e3);break}}else{if(!b(ce[oe])){if(he||pe||!b(ce[1-oe])){w[Z]=ae;break}ce[oe]=ce[1-oe]*(oe?10:.1)}if(ce[oe]<-i?ce[oe]=-i:ce[oe]>i&&(ce[oe]=i),ce[0]===ce[1]){var be=Math.max(1,Math.abs(1e-6*ce[0]));ce[0]-=be,ce[1]+=be}}}else o.nestedProperty(w,Z).set(ae)},w.setScale=function(Z){var re=E._size;if(w.overlaying){var oe=v.getFromId({_fullLayout:E},w.overlaying);w.domain=oe.domain}var ae=Z&&w._r?"_r":"range",ce=w.calendar;w.cleanRange(ae);var he,pe,xe=w.r2l(w[ae][0],ce),be=w.r2l(w[ae][1],ce),ve=C==="y";if(ve?(w._offset=re.t+(1-w.domain[1])*re.h,w._length=re.h*(w.domain[1]-w.domain[0]),w._m=w._length/(xe-be),w._b=-w._m*be):(w._offset=re.l+w.domain[0]*re.w,w._length=re.w*(w.domain[1]-w.domain[0]),w._m=w._length/(be-xe),w._b=-w._m*xe),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(xe,be),Math.max(xe,be)),w._rangebreaks.length)){for(he=0;he<w._rangebreaks.length;he++)pe=w._rangebreaks[he],w._lBreaks+=Math.abs(pe.max-pe.min);var ge=ve;xe>be&&(ge=!ge),ge&&w._rangebreaks.reverse();var we=ge?-1:1;for(w._m2=we*w._length/(Math.abs(be-xe)-w._lBreaks),w._B.push(-w._m2*(ve?be:xe)),he=0;he<w._rangebreaks.length;he++)pe=w._rangebreaks[he],w._B.push(w._B[w._B.length-1]-we*w._m2*(pe.max-pe.min));for(he=0;he<w._rangebreaks.length;he++)(pe=w._rangebreaks[he]).pmin=J(pe.min),pe.pmax=J(pe.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(Z){var re,oe,ae,ce,he,pe=w.rangebreaks||[];pe._cachedPatterns||(pe._cachedPatterns=pe.map(function(_e){return _e.enabled&&_e.bounds?o.simpleMap(_e.bounds,_e.pattern?h:w.d2c):null})),pe._cachedValues||(pe._cachedValues=pe.map(function(_e){return _e.enabled&&_e.values?o.simpleMap(_e.values,w.d2c).sort(o.sorterAsc):null}));for(var xe=0;xe<pe.length;xe++){var be=pe[xe];if(be.enabled){if(be.bounds){var ve=be.pattern;switch(oe=(re=pe._cachedPatterns[xe])[0],ae=re[1],ve){case _:ce=(he=new Date(Z)).getUTCDay(),oe>ae&&(ae+=7,ce<oe&&(ce+=7));break;case m:ce=(he=new Date(Z)).getUTCHours()+(he.getUTCMinutes()/60+he.getUTCSeconds()/3600+he.getUTCMilliseconds()/36e5),oe>ae&&(ae+=24,ce<oe&&(ce+=24));break;case"":ce=Z}if(ce>=oe&&ce<ae)return l}else for(var ge=pe._cachedValues[xe],we=0;we<ge.length;we++)if(ae=(oe=ge[we])+be.dvalue,Z>=oe&&Z<ae)return l}}return Z},w.locateBreaks=function(Z,re){var oe,ae,ce,he,pe=[];if(!w.rangebreaks)return pe;var xe=w.rangebreaks.slice().sort(function(Ae,Se){return Ae.pattern===_&&Se.pattern===m?-1:Se.pattern===_&&Ae.pattern===m?1:0}),be=function(Ae,Se){if((Ae=o.constrain(Ae,Z,re))!==(Se=o.constrain(Se,Z,re))){for(var Oe=!0,De=0;De<pe.length;De++){var de=pe[De];Ae<de.max&&Se>=de.min&&(Ae<de.min&&(de.min=Ae),Se>de.max&&(de.max=Se),Oe=!1)}Oe&&pe.push({min:Ae,max:Se})}};for(oe=0;oe<xe.length;oe++){var ve=xe[oe];if(ve.enabled)if(ve.bounds){var ge=Z,we=re;ve.pattern&&(ge=Math.floor(ge)),ce=(ae=o.simpleMap(ve.bounds,ve.pattern?h:w.r2l))[0],he=ae[1];var _e,se,ie=new Date(ge);switch(ve.pattern){case _:se=p,_e=(he-ce+(he<ce?7:0))*c,ge+=ce*c-(ie.getUTCDay()*c+ie.getUTCHours()*x+ie.getUTCMinutes()*d+ie.getUTCSeconds()*g+ie.getUTCMilliseconds());break;case m:se=c,_e=(he-ce+(he<ce?24:0))*x,ge+=ce*x-(ie.getUTCHours()*x+ie.getUTCMinutes()*d+ie.getUTCSeconds()*g+ie.getUTCMilliseconds());break;default:ge=Math.min(ae[0],ae[1]),_e=se=(we=Math.max(ae[0],ae[1]))-ge}for(var fe=ge;fe<we;fe+=se)be(fe,fe+_e)}else for(var Ee=o.simpleMap(ve.values,w.d2c),Te=0;Te<Ee.length;Te++)be(ce=Ee[Te],he=ce+ve.dvalue)}return pe.sort(function(Ae,Se){return Ae.min-Se.min}),pe},w.makeCalcdata=function(Z,re,oe){var ae,ce,he,pe,xe=w.type,be=xe==="date"&&Z[re+"calendar"];if(re in Z){if(ae=Z[re],pe=Z._length||o.minRowLength(ae),o.isTypedArray(ae)&&(xe==="linear"||xe==="log")){if(pe===ae.length)return ae;if(ae.subarray)return ae.subarray(0,pe)}if(xe==="multicategory")return function(we,_e){for(var se=new Array(_e),ie=0;ie<_e;ie++){var fe=(we[0]||[])[ie],Ee=(we[1]||[])[ie];se[ie]=W([fe,Ee])}return se}(ae,pe);for(ce=new Array(pe),he=0;he<pe;he++)ce[he]=w.d2c(ae[he],0,be,oe)}else{var ve=re+"0"in Z?w.d2c(Z[re+"0"],0,be):0,ge=Z["d"+re]?Number(Z["d"+re]):1;for(ae=Z[{x:"y",y:"x"}[re]],pe=Z._length||ae.length,ce=new Array(pe),he=0;he<pe;he++)ce[he]=ve+he*ge}if(w.rangebreaks)for(he=0;he<pe;he++)ce[he]=w.maskBreaks(ce[he]);return ce},w.isValidRange=function(Z,re){return Array.isArray(Z)&&Z.length===2&&(re&&Z[0]===null||b(w.r2l(Z[0])))&&(re&&Z[1]===null||b(w.r2l(Z[1])))},w.getAutorangeDflt=function(Z,re){var oe=!w.isValidRange(Z,"nullOk");return oe&&re&&re.reverseDflt?oe="reversed":Z&&(Z[0]===null&&Z[1]===null?oe=!0:Z[0]===null&&Z[1]!==null?oe="min":Z[0]!==null&&Z[1]===null&&(oe="max")),oe},w.isReversed=function(){var Z=w.autorange;return Z==="reversed"||Z==="min reversed"||Z==="max reversed"},w.isPtWithinRange=function(Z,re){var oe=w.c2l(Z[C],null,re),ae=w.r2l(w.range[0]),ce=w.r2l(w.range[1]);return ae<ce?ae<=oe&&oe<=ce:ce<=oe&&oe<=ae},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var Z=w._matchGroup;if(Z){var re=null,oe=null;for(var ae in Z){var ce=E[v.id2name(ae)];if(ce._categories){re=ce._categories,oe=ce._categoriesMap;break}}re&&oe?(w._categories=re,w._categoriesMap=oe):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var he=0;he<w._initialCategories.length;he++)N(w._initialCategories[he])},w.sortByInitialCategories=function(){var Z=[];if(w._emptyCategories(),w._initialCategories)for(var re=0;re<w._initialCategories.length;re++)N(w._initialCategories[re]);Z=Z.concat(w._traceIndices);var oe=w._matchGroup;for(var ae in oe)if(O!==ae){var ce=E[v.id2name(ae)];ce._categories=w._categories,ce._categoriesMap=w._categoriesMap,Z=Z.concat(ce._traceIndices)}return Z};var Q=E._d3locale;w.type==="date"&&(w._dateFormat=Q?Q.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=Q?Q.numberFormat:T,delete w._minDtick,delete w._forceTick0}},85024:function(ee){ee.exports=function(z){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return z[M]!==void 0});if(e.every(function(M){return z[M]===z[e[0]]})||e.length===1)return z[e[0]]}},95936:function(ee,z,e){var M=e(3400),k=e(76308).contrast,o=e(94724),T=e(85024),b=e(51272);function h(s,t){function a(n,r){return M.coerce(s,t,o.tickformatstops,n,r)}a("enabled")&&(a("dtickrange"),a("value"))}ee.exports=function(s,t,a,n,r){r||(r={});var i=a("labelalias");M.isPlainObject(i)||delete t.labelalias;var l=T(s);if(a("showticklabels")){var u=r.font||{},p=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?k(r.bgColor):p&&p!==o.color.dflt?p:u.color;if(M.coerceFont(a,"tickfont",{family:u.family,weight:u.weight,style:u.style,variant:u.variant,size:u.size,color:c}),r.noTicklabelstep||n==="multicategory"||n==="log"||a("ticklabelstep"),!r.noAng){var x=a("tickangle");r.noAutotickangles||x!=="auto"||a("autotickangles")}if(n!=="category"){var d=a("tickformat");b(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:h}),t.tickformatstops.length||delete t.tickformatstops,r.noExp||d||n==="date"||(a("showexponent",l),a("exponentformat"),a("minexponent"),a("separatethousands"))}}}},25404:function(ee,z,e){var M=e(3400),k=e(94724);ee.exports=function(o,T,b,h){var s=h.isMinor,t=s?o.minor||{}:o,a=s?T.minor:T,n=s?k.minor:k,r=s?"minor.":"",i=M.coerce2(t,a,n,"ticklen",s?.6*(T.ticklen||5):void 0),l=M.coerce2(t,a,n,"tickwidth",s?T.tickwidth||1:void 0),u=M.coerce2(t,a,n,"tickcolor",(s?T.tickcolor:void 0)||a.color);b(r+"ticks",!s&&h.outerTicks||i||l||u?"outside":"")||(delete a.ticklen,delete a.tickwidth,delete a.tickcolor)}},26332:function(ee,z,e){var M=e(98728),k=e(3400).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;ee.exports=function(b,h,s,t,a){a||(a={});var n=a.isMinor,r=n?b.minor||{}:b,i=n?h.minor:h,l=n?"minor.":"";function u(v){var y=r[v];return o(y)&&(y=T(y)),y!==void 0?y:(i._template||{})[v]}var p=u("tick0"),c=u("dtick"),x=u("tickvals"),d=s(l+"tickmode",k(x)?"array":c?"linear":"auto");if(d==="auto"||d==="sync")s(l+"nticks");else if(d==="linear"){var g=i.dtick=M.dtick(c,t);i.tick0=M.tick0(p,t,h.calendar,g)}else t!=="multicategory"&&(s(l+"tickvals")===void 0?i.tickmode="auto":n||s("ticktext"))}},73736:function(ee,z,e){var M=e(33428),k=e(24040),o=e(3400),T=e(43616),b=e(54460);ee.exports=function(h,s,t,a){var n=h._fullLayout;if(s.length!==0){var r,i,l,u;a&&(r=a());var p=M.ease(t.easing);return h._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var d={},g=0;g<s.length;g++){var v=s[g],y=v.plotinfo.xaxis,m=v.plotinfo.yaxis;v.xr0&&(d[y._name+".range"]=v.xr0.slice()),v.yr0&&(d[m._name+".range"]=v.yr0.slice())}return k.call("relayout",h,d).then(function(){for(var _=0;_<s.length;_++)c(s[_].plotinfo)})}()}),i=Date.now(),u=window.requestAnimationFrame(function d(){l=Date.now();for(var g=Math.min(1,(l-i)/t.duration),v=p(g),y=0;y<s.length;y++)x(s[y],v);l-i>t.duration?(function(){for(var m={},_=0;_<s.length;_++){var f=s[_],S=f.plotinfo.xaxis,w=f.plotinfo.yaxis;f.xr1&&(m[S._name+".range"]=f.xr1.slice()),f.yr1&&(m[w._name+".range"]=f.yr1.slice())}r&&r(),k.call("relayout",h,m).then(function(){for(var E=0;E<s.length;E++)c(s[E].plotinfo)})}(),u=window.cancelAnimationFrame(d)):u=window.requestAnimationFrame(d)}),Promise.resolve()}function c(d){var g=d.xaxis,v=d.yaxis;n._defs.select("#"+d.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),d.plot.call(T.setTranslate,g._offset,v._offset).call(T.setScale,1,1);var y=d.plot.selectAll(".scatterlayer .trace");y.selectAll(".point").call(T.setPointGroupScale,1,1),y.selectAll(".textpoint").call(T.setTextPointsScale,1,1),y.call(T.hideOutsideRangePoints,d)}function x(d,g){var v=d.plotinfo,y=v.xaxis,m=v.yaxis,_=y._length,f=m._length,S=!!d.xr1,w=!!d.yr1,E=[];if(S){var O=o.simpleMap(d.xr0,y.r2l),C=o.simpleMap(d.xr1,y.r2l),P=O[1]-O[0],R=C[1]-C[0];E[0]=(O[0]*(1-g)+g*C[0]-O[0])/(O[1]-O[0])*_,E[2]=_*(1-g+g*R/P),y.range[0]=y.l2r(O[0]*(1-g)+g*C[0]),y.range[1]=y.l2r(O[1]*(1-g)+g*C[1])}else E[0]=0,E[2]=_;if(w){var j=o.simpleMap(d.yr0,m.r2l),D=o.simpleMap(d.yr1,m.r2l),N=j[1]-j[0],W=D[1]-D[0];E[1]=(j[1]*(1-g)+g*D[1]-j[1])/(j[0]-j[1])*f,E[3]=f*(1-g+g*W/N),m.range[0]=y.l2r(j[0]*(1-g)+g*D[0]),m.range[1]=m.l2r(j[1]*(1-g)+g*D[1])}else E[1]=0,E[3]=f;b.drawOne(h,y,{skipTitle:!0}),b.drawOne(h,m,{skipTitle:!0}),b.redrawComponents(h,[y._id,m._id]);var F=S?_/E[2]:1,V=w?f/E[3]:1,U=S?E[0]:0,te=w?E[1]:0,J=S?E[0]/E[2]*_:0,X=w?E[1]/E[3]*f:0,K=y._offset-J,Q=m._offset-X;v.clipRect.call(T.setTranslate,U,te).call(T.setScale,1/F,1/V),v.plot.call(T.setTranslate,K,Q).call(T.setScale,F,V),T.setPointGroupScale(v.zoomScalePts,1/F,1/V),T.setTextPointsScale(v.zoomScaleTxt,1/F,1/V)}b.redrawComponents(h)}},14944:function(ee,z,e){var M=e(24040).traceIs,k=e(52976);function o(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,h){var s=o(b),t=M(b,"box-violin"),a=M(b._fullInput||{},"candlestick");return t&&!a&&h===s&&b[s]===void 0&&b[s+"0"]===void 0}ee.exports=function(b,h,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(a,n){if(a.type==="-"){var r,i=a._id,l=i.charAt(0);i.indexOf("scene")!==-1&&(i=l);var u=function(m,_,f){for(var S=0;S<m.length;S++){var w=m[S];if(w.type==="splom"&&w._length>0&&(w["_"+f+"axes"]||{})[_]||(w[f+"axis"]||f)===_&&(T(w,f)||(w[f]||[]).length||w[f+"0"]))return w}}(n,i,l);if(u)if(u.type!=="histogram"||l!=={v:"y",h:"x"}[u.orientation||"v"]){var p=l+"calendar",c=u[p],x={noMultiCategory:!M(u,"cartesian")||M(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&l==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=a.autotypenumbers,T(u,l)){var d=o(u),g=[];for(r=0;r<n.length;r++){var v=n[r];M(v,"box-violin")&&(v[l+"axis"]||l)===i&&(v[d]!==void 0?g.push(v[d][0]):v.name!==void 0?g.push(v.name):g.push("text"),v[p]!==c&&(c=void 0))}a.type=k(g,c,x)}else if(u.type==="splom"){var y=u.dimensions[u._axesDim[i]];y.visible&&(a.type=k(y.values,c,x))}else a.type=k(u[l]||[u[l+"0"]],c,x)}else a.type="linear"}}(h,t.data),h.type==="-"?h.type="linear":b.type=h.type)}},62460:function(ee,z,e){var M=e(24040),k=e(3400);function o(s,t,a){var n,r,i,l=!1;if(t.type==="data")n=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;n=s._fullLayout}return r=k.nestedProperty(n,t.prop).get(),(i=a[t.type]=a[t.type]||{}).hasOwnProperty(t.prop)&&i[t.prop]!==r&&(l=!0),i[t.prop]=r,{changed:l,value:r}}function T(s,t){var a=[],n=t[0],r={};if(typeof n=="string")r[n]=t[1];else{if(!k.isPlainObject(n))return a;r=n}return h(r,function(i,l,u){a.push({type:"layout",prop:i,value:u})},"",0),a}function b(s,t){var a,n,r,i,l=[];if(n=t[0],r=t[1],a=t[2],i={},typeof n=="string")i[n]=r;else{if(!k.isPlainObject(n))return l;i=n,a===void 0&&(a=r)}return a===void 0&&(a=null),h(i,function(u,p,c){var x,d;if(Array.isArray(c)){d=c.slice();var g=Math.min(d.length,s.data.length);a&&(g=Math.min(g,a.length)),x=[];for(var v=0;v<g;v++)x[v]=a?a[v]:v}else d=c,x=a?a.slice():null;if(x===null)Array.isArray(d)&&(d=d[0]);else if(Array.isArray(x)){if(!Array.isArray(d)){var y=d;d=[];for(var m=0;m<x.length;m++)d[m]=y}d.length=Math.min(x.length,d.length)}l.push({type:"data",prop:u,traces:x,value:d})},"",0),l}function h(s,t,a,n){Object.keys(s).forEach(function(r){var i=s[r];if(r[0]!=="_"){var l=a+(n>0?".":"")+r;k.isPlainObject(i)?h(i,t,l,n+1):t(l,r,i)}})}z.manageCommandObserver=function(s,t,a,n){var r={},i=!0;t&&t._commandObserver&&(r=t._commandObserver),r.cache||(r.cache={}),r.lookupTable={};var l=z.hasSimpleAPICommandBindings(s,a,r.lookupTable);if(t&&t._commandObserver){if(l)return r;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,r}if(l){o(s,l,r.cache),r.check=function(){if(i){var c=o(s,l,r.cache);return c.changed&&n&&r.lookupTable[c.value]!==void 0&&(r.disable(),Promise.resolve(n({value:c.value,type:l.type,prop:l.prop,traces:l.traces,index:r.lookupTable[c.value]})).then(r.enable,r.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<u.length;p++)s._internalOn(u[p],r.check);r.remove=function(){for(var c=0;c<u.length;c++)s._removeInternalListener(u[c],r.check)}}else k.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){i=!1},r.enable=function(){i=!0},t&&(t._commandObserver=r),r},z.hasSimpleAPICommandBindings=function(s,t,a){var n,r,i=t.length;for(n=0;n<i;n++){var l,u=t[n],p=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!p)return!1;var x=z.computeAPICommandBindings(s,p,c);if(x.length!==1)return!1;if(r){if((l=x[0]).type!==r.type||l.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var d=0;d<r.traces.length;d++)if(r.traces[d]!==l.traces[d])return!1}else if(l.prop!==r.prop)return!1}else r=x[0],Array.isArray(r.traces)&&r.traces.sort();var g=(l=x[0]).value;if(Array.isArray(g)){if(g.length!==1)return!1;g=g[0]}a&&(a[g]=n)}return r},z.executeAPICommand=function(s,t,a){if(t==="skip")return Promise.resolve();var n=M.apiMethodRegistry[t],r=[s];Array.isArray(a)||(a=[]);for(var i=0;i<a.length;i++)r.push(a[i]);return n.apply(null,r).catch(function(l){return k.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},z.computeAPICommandBindings=function(s,t,a){var n;switch(Array.isArray(a)||(a=[]),t){case"restyle":n=b(s,a);break;case"relayout":n=T(0,a);break;case"update":n=b(s,[a[0],a[2]]).concat(T(0,[a[1]]));break;case"animate":n=function(r,i){return Array.isArray(i[0])&&i[0].length===1&&["string","number"].indexOf(typeof i[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[]}(0,a);break;default:n=[]}return n}},86968:function(ee,z,e){var M=e(92880).extendFlat;z.u=function(k,o){o=o||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,o.description&&o.description,{x:M({},T,{}),y:M({},T,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},z.Q=function(k,o,T,b){var h=b&&b.x||[0,1],s=b&&b.y||[0,1],t=o.grid;if(t){var a=T("domain.column");a!==void 0&&(a<t.columns?h=t._domains.x[a]:delete k.domain.column);var n=T("domain.row");n!==void 0&&(n<t.rows?s=t._domains.y[n]:delete k.domain.row)}var r=T("domain.x",h),i=T("domain.y",s);r[0]<r[1]||(k.domain.x=h.slice()),i[0]<i[1]||(k.domain.y=s.slice())}},25376:function(ee){ee.exports=function(z){var e=z.variantValues,M=z.editType,k=z.colorEditType;k===void 0&&(k=M);var o={family:{valType:"string",noBlank:!0,strict:!0,editType:M},size:{valType:"number",min:1,editType:M},color:{valType:"color",editType:k},weight:{editType:M,valType:"enumerated",values:["normal","bold"],dflt:"normal"},style:{editType:M,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:z.noFontVariant?void 0:{editType:M,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},editType:M};return z.autoSize&&(o.size.dflt="auto"),z.autoColor&&(o.color.dflt="auto"),z.arrayOk&&(o.family.arrayOk=!0,o.weight.arrayOk=!0,o.style.arrayOk=!0,o.variant.arrayOk=!0,o.size.arrayOk=!0,o.color.arrayOk=!0),o}},16672:function(ee){ee.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(ee,z){z.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},z.axesNames=["lonaxis","lataxis"],z.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},z.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},z.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},z.clipPad=.001,z.precision=.1,z.landColor="#F0DC82",z.waterColor="#3399FF",z.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},z.sphereSVG={type:"Sphere"},z.fillLayers={ocean:1,land:1,lakes:1},z.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},z.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],z.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],z.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(ee,z,e){var M=e(33428),k=e(83356),o=k.geoPath,T=k.geoDistance,b=e(87108),h=e(24040),s=e(3400),t=s.strTranslate,a=e(76308),n=e(43616),r=e(93024),i=e(7316),l=e(54460),u=e(19280).getAutoRange,p=e(86476),c=e(22676).prepSelect,x=e(22676).clearOutline,d=e(22676).selectOnClick,g=e(79248),v=e(79552),y=e(27144),m=e(59972),_=e(55712).NO;function f(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=f.prototype;function w(E,O){var C=v.clipPad,P=E[0]+C,R=E[1]-C,j=O[0]+C,D=O[1]-C;P>0&&R<0&&(R+=360);var N=(R-P)/4;return{type:"Polygon",coordinates:[[[P,j],[P,D],[P+N,D],[P+2*N,D],[P+3*N,D],[R,D],[R,j],[R-N,j],[R-2*N,j],[R-3*N,j],[P,j]]]}}ee.exports=function(E){return new f(E)},S.plot=function(E,O,C,P){var R=this;if(P)return R.update(E,O,!0);R._geoCalcData=E,R._fullLayout=O;var j=O[this.id],D=[],N=!1;for(var W in v.layerNameToAdjective)if(W!=="frame"&&j["show"+W]){N=!0;break}for(var F=!1,V=0;V<E.length;V++){var U=E[0][0].trace;U._geo=R,U.locationmode&&(N=!0);var te=U.marker;if(te){var J=te.angle,X=te.angleref;(J||X==="north"||X==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,N){var K=m.getTopojsonName(j);R.topojson!==null&&K===R.topojsonName||(R.topojsonName=K,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&D.push(R.fetchTopojson()))}D=D.concat(y.fetchTraceGeoData(E)),C.push(new Promise(function(Q,Z){Promise.all(D).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(E,O),Q()}).catch(Z)}))},S.fetchTopojson=function(){var E=this,O=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){M.json(O,function(R,j){if(R)return R.status===404?P(new Error(["plotly.js could not find topojson file at",O+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",O].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=j,C()})})},S.update=function(E,O,C){var P=O[this.id];this.hasChoropleth=!1;for(var R=0;R<E.length;R++){var j=E[R],D=j[0].trace;D.type==="choropleth"&&(this.hasChoropleth=!0),D.visible===!0&&D._length>0&&D._module.calcGeoJSON(j,O)}if(!C){if(this.updateProjection(E,O))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(O,P),this.updateDims(O,P),this.updateFx(O,P),i.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this._render()},S.updateProjection=function(E,O){var C=this.graphDiv,P=O[this.id],R=O._size,j=P.domain,D=P.projection,N=P.lonaxis,W=P.lataxis,F=N._ax,V=W._ax,U=this.projection=function(ie){var fe=ie.projection,Ee=fe.type,Te=v.projNames[Ee];Te="geo"+s.titleCase(Te);for(var Ae=(k[Te]||b[Te])(),Se=ie._isSatellite?180*Math.acos(1/fe.distance)/Math.PI:ie._isClipped?v.lonaxisSpan[Ee]/2:null,Oe=["center","rotate","parallels","clipExtent"],De=function(Me){return Me?Ae:[]},de=0;de<Oe.length;de++){var me=Oe[de];typeof Ae[me]!="function"&&(Ae[me]=De)}return Ae.isLonLatOverEdges=function(Me){if(Ae(Me)===null)return!0;if(Se){var ze=Ae.rotate();return T(Me,[-ze[0],-ze[1]])>Se*Math.PI/180}return!1},Ae.getPath=function(){return o().projection(Ae)},Ae.getBounds=function(Me){return Ae.getPath().bounds(Me)},Ae.precision(v.precision),ie._isSatellite&&Ae.tilt(fe.tilt).distance(fe.distance),Se&&Ae.clipAngle(Se-v.clipPad),Ae}(P),te=[[R.l+R.w*j.x[0],R.t+R.h*(1-j.y[1])],[R.l+R.w*j.x[1],R.t+R.h*(1-j.y[0])]],J=P.center||{},X=D.rotation||{},K=N.range||[],Q=W.range||[];if(P.fitbounds){F._length=te[1][0]-te[0][0],V._length=te[1][1]-te[0][1],F.range=u(C,F),V.range=u(C,V);var Z=(F.range[0]+F.range[1])/2,re=(V.range[0]+V.range[1])/2;if(P._isScoped)J={lon:Z,lat:re};else if(P._isClipped){J={lon:Z,lat:re},X={lon:Z,lat:re,roll:X.roll};var oe=D.type,ae=v.lonaxisSpan[oe]/2||180,ce=v.lataxisSpan[oe]/2||90;K=[Z-ae,Z+ae],Q=[re-ce,re+ce]}else J={lon:Z,lat:re},X={lon:Z,lat:X.lat,roll:X.roll}}U.center([J.lon-X.lon,J.lat-X.lat]).rotate([-X.lon,-X.lat,X.roll]).parallels(D.parallels);var he=w(K,Q);U.fitExtent(te,he);var pe=this.bounds=U.getBounds(he),xe=this.fitScale=U.scale(),be=U.translate();if(P.fitbounds){var ve=U.getBounds(w(F.range,V.range)),ge=Math.min((pe[1][0]-pe[0][0])/(ve[1][0]-ve[0][0]),(pe[1][1]-pe[0][1])/(ve[1][1]-ve[0][1]));isFinite(ge)?U.scale(ge*xe):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else U.scale(D.scale*xe);var we=this.midPt=[(pe[0][0]+pe[1][0])/2,(pe[0][1]+pe[1][1])/2];if(U.translate([be[0]+(we[0]-be[0]),be[1]+(we[1]-be[1])]).clipExtent(pe),P._isAlbersUsa){var _e=U([J.lon,J.lat]),se=U.translate();U.translate([se[0]-(_e[0]-se[0]),se[1]-(_e[1]-se[1])])}},S.updateBaseLayers=function(E,O){var C=this,P=C.topojson,R=C.layers,j=C.basePaths;function D(U){return U==="lonaxis"||U==="lataxis"}function N(U){return!!v.lineLayers[U]}function W(U){return!!v.fillLayers[U]}var F=(this.hasChoropleth?v.layersForChoropleth:v.layers).filter(function(U){return N(U)||W(U)?O["show"+U]:!D(U)||O[U].showgrid}),V=C.framework.selectAll(".layer").data(F,String);V.exit().each(function(U){delete R[U],delete j[U],M.select(this).remove()}),V.enter().append("g").attr("class",function(U){return"layer "+U}).each(function(U){var te=R[U]=M.select(this);U==="bg"?C.bgRect=te.append("rect").style("pointer-events","all"):D(U)?j[U]=te.append("path").style("fill","none"):U==="backplot"?te.append("g").classed("choroplethlayer",!0):U==="frontplot"?te.append("g").classed("scatterlayer",!0):N(U)?j[U]=te.append("path").style("fill","none").style("stroke-miterlimit",2):W(U)&&(j[U]=te.append("path").style("stroke","none"))}),V.order(),V.each(function(U){var te=j[U],J=v.layerNameToAdjective[U];U==="frame"?te.datum(v.sphereSVG):N(U)||W(U)?te.datum(_(P,P.objects[U])):D(U)&&te.datum(function(X,K,Q){var Z,re,oe,ae=K[X],ce=v.scopeDefaults[K.scope];X==="lonaxis"?(Z=ce.lonaxisRange,re=ce.lataxisRange,oe=function(se,ie){return[se,ie]}):X==="lataxis"&&(Z=ce.lataxisRange,re=ce.lonaxisRange,oe=function(se,ie){return[ie,se]});var he={type:"linear",range:[Z[0],Z[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};l.setConvert(he,Q);var pe=l.calcTicks(he);K.isScoped||X!=="lonaxis"||pe.pop();for(var xe=pe.length,be=new Array(xe),ve=0;ve<xe;ve++)for(var ge=pe[ve].x,we=be[ve]=[],_e=re[0];_e<re[1]+2.5;_e+=2.5)we.push(oe(ge,_e));return{type:"MultiLineString",coordinates:be}}(U,O,E)).call(a.stroke,O[U].gridcolor).call(n.dashLine,O[U].griddash,O[U].gridwidth),N(U)?te.call(a.stroke,O[J+"color"]).call(n.dashLine,"",O[J+"width"]):W(U)&&te.call(a.fill,O[J+"color"])})},S.updateDims=function(E,O){var C=this.bounds,P=(O.framewidth||0)/2,R=C[0][0]-P,j=C[0][1]-P,D=C[1][0]-R+P,N=C[1][1]-j+P;n.setRect(this.clipRect,R,j,D,N),this.bgRect.call(n.setRect,R,j,D,N).call(a.fill,O.bgcolor),this.xaxis._offset=R,this.xaxis._length=D,this.yaxis._offset=j,this.yaxis._length=N},S.updateFx=function(E,O){var C=this,P=C.graphDiv,R=C.bgRect,j=E.dragmode,D=E.clickmode;if(!C.isStatic){var N={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(F,V){V.isRect?(F.range={})[C.id]=[W([V.xmin,V.ymin]),W([V.xmax,V.ymax])]:(F.lassoPoints={})[C.id]=V.map(W)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(F){F===2&&x(P)}};j==="pan"?(R.node().onmousedown=null,R.call(g(C,O)),R.on("dblclick.zoom",function(){var F=C.viewInitial,V={};for(var U in F)V[C.id+"."+U]=F[U];h.call("_guiRelayout",P,V),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||R.on("wheel.zoom",null)):j!=="select"&&j!=="lasso"||(R.on(".zoom",null),N.prepFn=function(F,V,U){c(F,V,U,N,j)},p.init(N)),R.on("mousemove",function(){var F=C.projection.invert(s.getPositionFromD3Event());if(!F)return p.unhover(P,M.event);C.xaxis.p2c=function(){return F[0]},C.yaxis.p2c=function(){return F[1]},r.hover(P,M.event,C.id)}),R.on("mouseout",function(){P._dragging||p.unhover(P,M.event)}),R.on("click",function(){j!=="select"&&j!=="lasso"&&(D.indexOf("select")>-1&&d(M.event,P,[C.xaxis],[C.yaxis],C.id,N),D.indexOf("event")>-1&&r.click(P,M.event))})}function W(F){return C.projection.invert([F[0]+C.xaxis._offset,F[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,O=E.graphDiv,C=O._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=M.select(E.container).append("g").attr("class","geo "+E.id).call(n.setClipUrl,P,O),E.project=function(R){var j=E.projection(R);return j?[j[0]-E.xaxis._offset,j[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(R){return E.project(R)[0]}},E.yaxis={_id:"y",c2p:function(R){return E.project(R)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var O,C=E.center||{},P=E.projection,R=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},O=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":R.lon},s.extendFlat(this.viewInitial,O)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,O=this.projection,C=O.getPath();function P(j){var D=O(j.lonlat);return D?t(D[0],D[1]):null}function R(j){return O.isLonLatOverEdges(j.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(j){return C(j.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",R).attr("transform",P)}},10816:function(ee,z,e){var M=e(84888).KY,k=e(3400).counterRegex,o=e(43520),T="geo",b=k(T),h={};h[T]={valType:"subplotid",dflt:T,editType:"calc"},ee.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:h,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(s){for(var t=s._fullLayout,a=s.calcdata,n=t._subplots[T],r=0;r<n.length;r++){var i=n[r],l=M(a,T,i),u=t[i]._subplot;u||(u=o({id:i,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[i]._subplot=u),u.plot(l,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,a=t._subplots[T],n=0;n<a.length;n++){var r=t[a[n]];r._subplot.updateFx(t,r)}},clean:function(s,t,a,n){for(var r=n._subplots[T]||[],i=0;i<r.length;i++){var l=r[i],u=n[l]._subplot;!t[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},40384:function(ee,z,e){var M=e(22548),k=e(86968).u,o=e(98192).u,T=e(79552),b=e(67824).overrideAll,h=e(95376),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o};(ee.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:h(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:h(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(ee,z,e){var M=e(3400),k=e(168),o=e(84888).op,T=e(79552),b=e(40384),h=T.axesNames;function s(t,a,n,r){var i=o(r.fullData,"geo",r.id).map(function(X){return X._expandedIndex}),l=n("resolution"),u=n("scope"),p=T.scopeDefaults[u],c=n("projection.type",p.projType),x=a._isAlbersUsa=c==="albers usa";x&&(u=a.scope="usa");var d=a._isScoped=u!=="world",g=a._isSatellite=c==="satellite",v=a._isConic=c.indexOf("conic")!==-1||c==="albers",y=a._isClipped=!!T.lonaxisSpan[c];if(t.visible===!1){var m=M.extendDeep({},a._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),a._template=m}for(var _=n("visible"),f=0;f<h.length;f++){var S,w=h[f],E=[30,10][f];if(d)S=p[w+"Range"];else{var O=T[w+"Span"],C=(O[c]||O["*"])/2,P=n("projection.rotation."+w.substr(0,3),p.projRotate[f]);S=[P-C,P+C]}var R=n(w+".range",S);n(w+".tick0"),n(w+".dtick",E),n(w+".showgrid",!!_&&void 0)&&(n(w+".gridcolor"),n(w+".gridwidth"),n(w+".griddash")),a[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:i,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var j=a.lonaxis.range,D=a.lataxis.range,N=j[0],W=j[1];N>0&&W<0&&(W+=360);var F,V,U,te=(N+W)/2;if(!x){var J=d?p.projRotate:[te,0,0];F=n("projection.rotation.lon",J[0]),n("projection.rotation.lat",J[1]),n("projection.rotation.roll",J[2]),n("showcoastlines",!d&&_)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!_&&void 0)&&n("oceancolor")}x?(V=-96.6,U=38.7):(V=d?te:F,U=(D[0]+D[1])/2),n("center.lon",V),n("center.lat",U),g&&(n("projection.tilt"),n("projection.distance")),v&&n("projection.parallels",p.projParallels||[0,60]),n("projection.scale"),n("showland",!!_&&void 0)&&n("landcolor"),n("showlakes",!!_&&void 0)&&n("lakecolor"),n("showrivers",!!_&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",d&&u!=="usa"&&_)&&(n("countrycolor"),n("countrywidth")),(u==="usa"||u==="north america"&&l===50)&&(n("showsubunits",_),n("subunitcolor"),n("subunitwidth")),d||n("showframe",_)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete a.projection.scale,d?(delete a.center.lon,delete a.center.lat):y?(delete a.center.lon,delete a.center.lat,delete a.projection.rotation.lon,delete a.projection.rotation.lat,delete a.lonaxis.range,delete a.lataxis.range):(delete a.center.lon,delete a.center.lat,delete a.projection.rotation.lon))}ee.exports=function(t,a,n){k(t,a,n,{type:"geo",attributes:b,handleDefaults:s,fullData:n,partition:"y"})}},79248:function(ee,z,e){var M=e(33428),k=e(3400),o=e(24040),T=Math.PI/180,b=180/Math.PI,h={cursor:"pointer"},s={cursor:"auto"};function t(d,g){return M.behavior.zoom().translate(g.translate()).scale(g.scale())}function a(d,g,v){var y=d.id,m=d.graphDiv,_=m.layout,f=_[y],S=m._fullLayout,w=S[y],E={},O={};function C(P,R){E[y+"."+P]=k.nestedProperty(f,P).get(),o.call("_storeDirectGUIEdit",_,S._preGUI,E);var j=k.nestedProperty(w,P);j.get()!==R&&(j.set(R),k.nestedProperty(f,P).set(R),O[y+"."+P]=R)}v(C),C("projection.scale",g.scale()/d.fitScale),C("fitbounds",!1),m.emit("plotly_relayout",O)}function n(d,g){var v=t(0,g);function y(m){var _=g.invert(d.midPt);m("center.lon",_[0]),m("center.lat",_[1])}return v.on("zoomstart",function(){M.select(this).style(h)}).on("zoom",function(){g.scale(M.event.scale).translate(M.event.translate),d.render(!0);var m=g.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/d.fitScale,"geo.center.lon":m[0],"geo.center.lat":m[1]})}).on("zoomend",function(){M.select(this).style(s),a(d,g,y)}),v}function r(d,g){var v,y,m,_,f,S,w,E,O,C=t(0,g);function P(j){return g.invert(j)}function R(j){var D=g.rotate(),N=g.invert(d.midPt);j("projection.rotation.lon",-D[0]),j("center.lon",N[0]),j("center.lat",N[1])}return C.on("zoomstart",function(){M.select(this).style(h),v=M.mouse(this),y=g.rotate(),m=g.translate(),_=y,f=P(v)}).on("zoom",function(){if(S=M.mouse(this),function(N){var W=P(N);if(!W)return!0;var F=g(W);return Math.abs(F[0]-N[0])>2||Math.abs(F[1]-N[1])>2}(v))return C.scale(g.scale()),void C.translate(g.translate());g.scale(M.event.scale),g.translate([m[0],M.event.translate[1]]),f?P(S)&&(E=P(S),w=[_[0]+(E[0]-f[0]),y[1],y[2]],g.rotate(w),_=w):f=P(v=S),O=!0,d.render(!0);var j=g.rotate(),D=g.invert(d.midPt);d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/d.fitScale,"geo.center.lon":D[0],"geo.center.lat":D[1],"geo.projection.rotation.lon":-j[0]})}).on("zoomend",function(){M.select(this).style(s),O&&a(d,g,R)}),C}function i(d,g){var v;g.rotate(),g.scale();var y=t(0,g),m=function(w){for(var E=0,O=arguments.length,C=[];++E<O;)C.push(arguments[E]);var P=M.dispatch.apply(null,C);return P.of=function(R,j){return function(D){var N;try{N=D.sourceEvent=M.event,D.target=w,M.event=D,P[D.type].apply(R,j)}finally{M.event=N}}},P}(y,"zoomstart","zoom","zoomend"),_=0,f=y.on;function S(w){var E=g.rotate();w("projection.rotation.lon",-E[0]),w("projection.rotation.lat",-E[1])}return y.on("zoomstart",function(){M.select(this).style(h);var w,E,O,C,P,R,j,D,N,W,F,V=M.mouse(this),U=g.rotate(),te=U,J=g.translate(),X=(E=.5*(w=U)[0]*T,O=.5*w[1]*T,C=.5*w[2]*T,P=Math.sin(E),R=Math.cos(E),j=Math.sin(O),D=Math.cos(O),N=Math.sin(C),[R*D*(W=Math.cos(C))+P*j*N,P*D*W-R*j*N,R*j*W+P*D*N,R*D*N-P*j*W]);v=l(g,V),f.call(y,"zoom",function(){var K,Q,Z,re,oe,ae,ce,he,pe,xe,be=M.mouse(this);if(g.scale(M.event.scale),v){if(l(g,be)){g.rotate(U).translate(J);var ve=l(g,be),ge=function(se,ie){if(se&&ie){var fe=function(Se,Oe){return[Se[1]*Oe[2]-Se[2]*Oe[1],Se[2]*Oe[0]-Se[0]*Oe[2],Se[0]*Oe[1]-Se[1]*Oe[0]]}(se,ie),Ee=Math.sqrt(x(fe,fe)),Te=.5*Math.acos(Math.max(-1,Math.min(1,x(se,ie)))),Ae=Math.sin(Te)/Ee;return Ee&&[Math.cos(Te),fe[2]*Ae,-fe[1]*Ae,fe[0]*Ae]}}(v,ve),we=function(se){return[Math.atan2(2*(se[0]*se[1]+se[2]*se[3]),1-2*(se[1]*se[1]+se[2]*se[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(se[0]*se[2]-se[3]*se[1]))))*b,Math.atan2(2*(se[0]*se[3]+se[1]*se[2]),1-2*(se[2]*se[2]+se[3]*se[3]))*b]}((Z=(K=X)[0],re=K[1],oe=K[2],ae=K[3],[Z*(ce=(Q=ge)[0])-re*(he=Q[1])-oe*(pe=Q[2])-ae*(xe=Q[3]),Z*he+re*ce+oe*xe-ae*pe,Z*pe-re*xe+oe*ce+ae*he,Z*xe+re*pe-oe*he+ae*ce])),_e=function(se,ie,fe){var Ee=c(ie,2,se[0]);Ee=c(Ee,1,se[1]),Ee=c(Ee,0,se[2]-fe[2]);var Te,Ae,Se=ie[0],Oe=ie[1],De=ie[2],de=Ee[0],me=Ee[1],Me=Ee[2],ze=Math.atan2(Oe,Se)*b,Pe=Math.sqrt(Se*Se+Oe*Oe);Math.abs(me)>Pe?(Ae=(me>0?90:-90)-ze,Te=0):(Ae=Math.asin(me/Pe)*b-ze,Te=Math.sqrt(Pe*Pe-me*me));var Ne=180-Ae-2*ze,Ve=(Math.atan2(Me,de)-Math.atan2(De,Te))*b,Ye=(Math.atan2(Me,de)-Math.atan2(De,-Te))*b;return u(fe[0],fe[1],Ae,Ve)<=u(fe[0],fe[1],Ne,Ye)?[Ae,Ve,fe[2]]:[Ne,Ye,fe[2]]}(we,v,te);isFinite(_e[0])&&isFinite(_e[1])&&isFinite(_e[2])||(_e=te),g.rotate(_e),te=_e}}else v=l(g,V=be);m.of(this,arguments)({type:"zoom"})}),F=m.of(this,arguments),_++||F({type:"zoomstart"})}).on("zoomend",function(){var w;M.select(this).style(s),f.call(y,"zoom",null),w=m.of(this,arguments),--_||w({type:"zoomend"}),a(d,g,S)}).on("zoom.redraw",function(){d.render(!0);var w=g.rotate();d.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/d.fitScale,"geo.projection.rotation.lon":-w[0],"geo.projection.rotation.lat":-w[1]})}),M.rebind(y,m,"on")}function l(d,g){var v=d.invert(g);return v&&isFinite(v[0])&&isFinite(v[1])&&function(y){var m=y[0]*T,_=y[1]*T,f=Math.cos(_);return[f*Math.cos(m),f*Math.sin(m),Math.sin(_)]}(v)}function u(d,g,v,y){var m=p(v-d),_=p(y-g);return Math.sqrt(m*m+_*_)}function p(d){return(d%360+540)%360-180}function c(d,g,v){var y=v*T,m=d.slice(),_=g===0?1:0,f=g===2?1:2,S=Math.cos(y),w=Math.sin(y);return m[_]=d[_]*S-d[f]*w,m[f]=d[f]*S+d[_]*w,m}function x(d,g){for(var v=0,y=0,m=d.length;y<m;++y)v+=d[y]*g[y];return v}ee.exports=function(d,g){var v=d.projection;return(g._isScoped?n:g._isClipped?i:r)(d,v)}},84888:function(ee,z,e){var M=e(24040),k=e(33816).SUBPLOT_PATTERN;z.KY=function(o,T,b){var h=M.subplotsRegistry[T];if(!h)return[];for(var s=h.attr,t=[],a=0;a<o.length;a++){var n=o[a];n[0].trace[s]===b&&t.push(n)}return t},z._M=function(o,T,b){var h,s=[],t=[];if(!(h=typeof T=="string"?M.getModule(T).plot:typeof T=="function"?T:T.plot))return[s,o];for(var a=b,n=0;n<o.length;n++){var r=o[n],i=r[0].trace,l=i.zorder!==void 0;i.visible===!0&&i._length!==0&&(!i._module||i._module.plot!==h||l&&i.zorder!==a?t.push(r):s.push(r))}return[s,t]},z.op=function(o,T,b){if(!M.subplotsRegistry[T])return[];var h,s,t,a=M.subplotsRegistry[T].attr,n=[];if(T==="gl2d"){var r=b.match(k);s="x"+r[1],t="y"+r[2]}for(var i=0;i<o.length;i++)h=o[i],T==="gl2d"&&M.traceIs(h,"gl2d")?h[a[0]]===s&&h[a[1]]===t&&n.push(h):h[a]===b&&n.push(h);return n}},2428:function(ee,z,e){var M=e(62644),k=e(97264),o=e(29128),T=e(33816),b=e(89184);function h(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ee.exports=function(s){var t=s.mouseContainer,a=s.glplot,n=new h(t,a);function r(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function i(l,u,p){var c,x,d=s.calcDataBox(),g=a.viewBox,v=n.lastPos[0],y=n.lastPos[1],m=T.MINDRAG*a.pixelRatio,_=T.MINZOOM*a.pixelRatio;function f(P,R,j){var D=Math.min(R,j),N=Math.max(R,j);D!==N?(d[P]=D,d[P+2]=N,n.dataBox=d,s.setRanges(d)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(u*=a.pixelRatio,p*=a.pixelRatio,p=g[3]-g[1]-p,s.fullLayout.dragmode){case"zoom":if(l){var S=u/(g[2]-g[0])*(d[2]-d[0])+d[0],w=p/(g[3]-g[1])*(d[3]-d[1])+d[1];n.boxInited||(n.boxStart[0]=S,n.boxStart[1]=w,n.dragStart[0]=u,n.dragStart[1]=p),n.boxEnd[0]=S,n.boxEnd[1]=w,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var E=Math.abs(n.dragStart[0]-u)<_,O=Math.abs(n.dragStart[1]-p)<_;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,R=s.xaxis._id,j=s.yaxis._id,D=0;D<P.length;D++)if(P[D][R]!==-1){if(P[D][j]!==-1)return!0;break}return!1}()||E&&O)E&&(n.boxEnd[0]=n.boxStart[0]),O&&(n.boxEnd[1]=n.boxStart[1]);else{c=n.boxEnd[0]-n.boxStart[0],x=n.boxEnd[1]-n.boxStart[1];var C=(d[3]-d[1])/(d[2]-d[0]);Math.abs(c*C)>Math.abs(x)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(c)*C*(x>=0?1:-1),n.boxEnd[1]<d[1]?(n.boxEnd[1]=d[1],n.boxEnd[0]=n.boxStart[0]+(d[1]-n.boxStart[1])/Math.abs(C)):n.boxEnd[1]>d[3]&&(n.boxEnd[1]=d[3],n.boxEnd[0]=n.boxStart[0]+(d[3]-n.boxStart[1])/Math.abs(C))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(x)/C*(c>=0?1:-1),n.boxEnd[0]<d[0]?(n.boxEnd[0]=d[0],n.boxEnd[1]=n.boxStart[1]+(d[0]-n.boxStart[0])*Math.abs(C)):n.boxEnd[0]>d[2]&&(n.boxEnd[0]=d[2],n.boxEnd[1]=n.boxStart[1]+(d[2]-n.boxStart[0])*Math.abs(C)))}}else n.boxEnabled?(c=n.boxStart[0]!==n.boxEnd[0],x=n.boxStart[1]!==n.boxEnd[1],c||x?(c&&(f(0,n.boxStart[0],n.boxEnd[0]),s.xaxis.autorange=!1),x&&(f(1,n.boxStart[1],n.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,l?(n.panning||(n.dragStart[0]=u,n.dragStart[1]=p),Math.abs(n.dragStart[0]-u)<m&&(u=n.dragStart[0]),Math.abs(n.dragStart[1]-p)<m&&(p=n.dragStart[1]),c=(v-u)*(d[2]-d[0])/(a.viewBox[2]-a.viewBox[0]),x=(y-p)*(d[3]-d[1])/(a.viewBox[3]-a.viewBox[1]),d[0]+=c,d[2]+=c,d[1]+=x,d[3]+=x,s.setRanges(d),n.panning=!0,n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations()):n.panning&&(n.panning=!1,s.relayoutCallback())}n.lastPos[0]=u,n.lastPos[1]=p}return n.mouseListener=M(t,i),t.addEventListener("touchstart",function(l){var u=o(l.changedTouches[0],t);i(0,u[0],u[1]),i(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var u=o(l.changedTouches[0],t);i(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(l){i(0,n.lastPos[0],n.lastPos[1]),l.preventDefault()},!!b&&{passive:!1}),n.wheelListener=k(t,function(l,u){if(!s.scrollZoom)return!1;var p=s.calcDataBox(),c=a.viewBox,x=n.lastPos[0],d=n.lastPos[1],g=Math.exp(5*u/(c[3]-c[1])),v=x/(c[2]-c[0])*(p[2]-p[0])+p[0],y=d/(c[3]-c[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-v)*g+v,p[2]=(p[2]-v)*g+v,p[1]=(p[1]-y)*g+y,p[3]=(p[3]-y)*g+y,s.setRanges(p),n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),n}},92568:function(ee,z,e){var M=e(54460),k=e(43080);function o(h){this.scene=h,this.gl=h.gl,this.pixelRatio=h.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=o.prototype,b=["xaxis","yaxis"];T.merge=function(h){var s,t,a,n,r,i,l,u,p,c,x;for(this.titleEnable=!1,this.backgroundColor=k(h.plot_bgcolor),c=0;c<2;++c){var d=(s=b[c]).charAt(0);for(a=(t=h[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[d]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[c+x]=!1,this.labels[c+x]=a,this.labelColor[c+x]=k(t.title.font.color),this.labelFont[c+x]=t.title.font.family,this.labelSize[c+x]=t.title.font.size,this.labelPad[c+x]=this.getLabelPad(s,t),this.tickEnable[c+x]=!1,this.tickColor[c+x]=k((t.tickfont||{}).color),this.tickAngle[c+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+x]=this.getTickPad(t),this.tickMarkLength[c+x]=0,this.tickMarkWidth[c+x]=t.tickwidth||0,this.tickMarkColor[c+x]=k(t.tickcolor),this.borderLineEnable[c+x]=!1,this.borderLineColor[c+x]=k(t.linecolor),this.borderLineWidth[c+x]=t.linewidth||0;l=this.hasSharedAxis(t),r=this.hasAxisInDfltPos(s,t)&&!l,i=this.hasAxisInAltrPos(s,t)&&!l,n=t.mirror||!1,u=l?String(n).indexOf("all")!==-1:!!n,p=l?n==="allticks":String(n).indexOf("ticks")!==-1,r?this.labelEnable[c]=!0:i&&(this.labelEnable[c+2]=!0),r?this.tickEnable[c]=t.showticklabels:i&&(this.tickEnable[c+2]=t.showticklabels),(r||u)&&(this.borderLineEnable[c]=t.showline),(i||u)&&(this.borderLineEnable[c+2]=t.showline),(r||p)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(i||p)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=k(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=k(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},T.hasSharedAxis=function(h){var s=this.scene,t=s.fullLayout._subplots.gl2d;return M.findSubplotsWithAxis(t,h).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(h,s){var t=s.side;return h==="xaxis"?t==="bottom":h==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(h,s){var t=s.side;return h==="xaxis"?t==="top":h==="yaxis"?t==="right":void 0},T.getLabelPad=function(h,s){var t=1.5,a=s.title.font.size,n=s.showticklabels;return h==="xaxis"?s.side==="top"?a*(t+(n?1:0))-10:a*(t+(n?.5:0))-10:h==="yaxis"?s.side==="right"?10+a*(t+(n?1:.5)):10+a*(t+(n?.5:0)):void 0},T.getTickPad=function(h){return h.ticks==="outside"?10+h.ticklen:15},T.getTickMarkLength=function(h){if(!h.ticks)return 0;var s=h.ticklen;return h.ticks==="inside"?-s:s},ee.exports=function(h){return new o(h)}},39952:function(ee,z,e){var M=e(67824).overrideAll,k=e(17188),o=e(64859),T=e(9616),b=e(33816),h=e(57952),s=e(65460),t=e(84888).op;z.name="gl2d",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=b.idRegex,z.attrRegex=b.attrRegex,z.attributes=e(26720),z.supplyLayoutDefaults=function(a,n,r){n._has("cartesian")||h.supplyLayoutDefaults(a,n,r)},z.layoutAttrOverrides=M(h.layoutAttributes,"plot","from-root"),z.baseLayoutAttrOverrides=M({plot_bgcolor:o.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),z.plot=function(a){for(var n=a._fullLayout,r=a._fullData,i=n._subplots.gl2d,l=0;l<i.length;l++){var u=i[l],p=n._plots[u],c=t(r,"gl2d",u),x=p._scene2d;x===void 0&&(x=new k({id:u,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},n),p._scene2d=x),x.plot(c,a.calcdata,n,a.layout)}},z.clean=function(a,n,r,i){for(var l=i._subplots.gl2d||[],u=0;u<l.length;u++){var p=l[u],c=i._plots[p];c._scene2d&&t(a,"gl2d",p).length===0&&(c._scene2d.destroy(),delete i._plots[p])}h.clean.apply(this,arguments)},z.drawFramework=function(a){a._context.staticPlot||h.drawFramework(a)},z.toSVG=function(a){for(var n=a._fullLayout,r=n._subplots.gl2d,i=0;i<r.length;i++){var l=n._plots[r[i]]._scene2d,u=l.toImage("png");n._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},z.updateFx=function(a){for(var n=a._fullLayout,r=n._subplots.gl2d,i=0;i<r.length;i++)n._plots[r[i]]._scene2d.updateFx(n.dragmode)}},17188:function(ee,z,e){var M,k,o=e(24040),T=e(54460),b=e(93024),h=e(67792).gl_plot2d,s=e(67792).gl_spikes2d,t=e(67792).gl_select_box,a=e(5408),n=e(92568),r=e(2428),i=e(16576),l=e(71888),u=l.enforce,p=l.clean,c=e(19280).doAutoRange,x=e(72760),d=x.drawMode,g=x.selectMode,v=["xaxis","yaxis"],y=e(33816).SUBPLOT_PATTERN;function m(f,S){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(S),this.glplot=h(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ee.exports=m;var _=m.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(M=document.createElement("canvas"),k=a({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=k}else{var f=this.container.querySelector(".gl-canvas-focus"),S=a({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return i(this),void(this.stopped=!0);this.canvas=f,this.gl=S}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var O=this.mouseContainer=document.createElement("div");O.style.position="absolute",O.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(O);var P=this;O.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),O.addEventListener("mouseover",function(){P.isMouseOver=!0})},_.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var S=this.glplot.gl,w=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var O=new Uint8Array(w*E*4);S.readPixels(0,0,w,E,S.RGBA,S.UNSIGNED_BYTE,O);for(var C=0,P=E-1;C<P;++C,--P)for(var R=0;R<w;++R)for(var j=0;j<4;++j){var D=O[4*(w*C+R)+j];O[4*(w*C+R)+j]=O[4*(w*P+R)+j],O[4*(w*P+R)+j]=D}var N=document.createElement("canvas");N.width=w,N.height=E;var W,F=N.getContext("2d",{willReadFrequently:!0}),V=F.createImageData(w,E);switch(V.data.set(O),F.putImageData(V,0,0),f){case"jpeg":W=N.toDataURL("image/jpeg");break;case"webp":W=N.toDataURL("image/webp");break;default:W=N.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),W},_.updateSize=function(f){f||(f=this.canvas);var S=this.pixelRatio,w=this.fullLayout,E=w.width,O=w.height,C=0|Math.ceil(S*E),P=0|Math.ceil(S*O);return f.width===C&&f.height===P||(f.width=C,f.height=P),f},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var w=0;w<f[S].length;++w)f[S][w].text=f[S][w].text+"";return f},_.updateRefs=function(f){this.fullLayout=f;var S=this.id.match(y),w="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[w],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var f=this.graphDiv,S=this.xaxis,w=this.yaxis,E=f.layout,O={},C=O[S._name+".range"]=S.range.slice(),P=O[w._name+".range"]=w.range.slice();O[S._name+".autorange"]=S.autorange,O[w._name+".autorange"]=w.autorange,o.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,O);var R=E[S._name];R.range=C,R.autorange=S.autorange;var j=E[w._name];j.range=P,j.autorange=w.autorange,O.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",O)},_.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(w,E){for(var O=0;O<2;++O){var C=w[O],P=E[O];if(C.length!==P.length)return!0;for(var R=0;R<C.length;++R)if(C[R].x!==P[R].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var f=this.graphDiv,S=this.fullLayout.annotations,w=0;w<S.length;w++){var E=S[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&o.getComponentMethod("annotations","drawOne")(f,w)}},_.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(S){f[S].dispose(),delete f[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(f,S,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,S),this.updateFx(w.dragmode);var O=w.width,C=w.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(w),P.screenBox=[0,0,O,C];var R={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};p(R,this.xaxis),p(R,this.yaxis);var j,D,N=w._size,W=this.xaxis.domain,F=this.yaxis.domain;for(P.viewBox=[N.l+W[0]*N.w,N.b+F[0]*N.h,O-N.r-(1-W[1])*N.w,C-N.t-(1-F[1])*N.h],this.mouseContainer.style.width=N.w*(W[1]-W[0])+"px",this.mouseContainer.style.height=N.h*(F[1]-F[0])+"px",this.mouseContainer.height=N.h*(F[1]-F[0]),this.mouseContainer.style.left=N.l+W[0]*N.w+"px",this.mouseContainer.style.top=N.t+(1-F[1])*N.h+"px",D=0;D<2;++D)(j=this[v[D]])._length=P.viewBox[D+2]-P.viewBox[D],c(this.graphDiv,j),j.setScale();u(R),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(w),E.update(P),this.glplot.draw()},_.calcDataBox=function(){var f=this.xaxis,S=this.yaxis,w=f.range,E=S.range,O=f.r2l,C=S.r2l;return[O(w[0]),C(E[0]),O(w[1]),C(E[1])]},_.setRanges=function(f){var S=this.xaxis,w=this.yaxis,E=S.l2r,O=w.l2r;S.range=[E(f[0]),E(f[2])],w.range=[O(f[1]),O(f[3])]},_.updateTraces=function(f,S){var w,E,O,C=Object.keys(this.traces);this.fullData=f;e:for(w=0;w<C.length;w++){var P=C[w],R=this.traces[P];for(E=0;E<f.length;E++)if((O=f[E]).uid===P&&O.type===R.type)continue e;R.dispose(),delete this.traces[P]}for(w=0;w<f.length;w++){O=f[w];var j=S[w],D=this.traces[O.uid];D?D.update(O,j):(D=O._module.plot(this,O,j),this.traces[O.uid]=D)}this.glplot.objects.sort(function(N,W){return N._trace.index-W._trace.index})},_.updateFx=function(f){g(f)||d(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=f==="pan"?"move":f==="zoom"?"crosshair":null},_.emitPointAction=function(f,S){for(var w,E=f.trace.uid,O=f.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(w=this.fullData[C]);var P={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:w.index,pointNumber:O,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(P,w,O),this.graphDiv.emit(S,{points:[P]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,S=this.camera,w=S.mouseListener,E=this.lastButtonState===1&&w.buttons===0,O=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var C,P=w.x*f.pixelRatio,R=this.canvas.height-f.pixelRatio*w.y;if(S.boxEnabled&&O.dragmode==="zoom"){this.selectBox.enabled=!0;for(var j=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],D=0;D<2;D++)S.boxStart[D]===S.boxEnd[D]&&(j[D]=f.dataBox[D],j[D+2]=f.dataBox[D+2]);f.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=O._size,W=this.xaxis.domain,F=this.yaxis.domain,V=(C=f.pick(P/f.pixelRatio+N.l+W[0]*N.w,R/f.pixelRatio-(N.t+(1-F[1])*N.h)))&&C.object._trace.handlePick(C);if(V&&E&&this.emitPointAction(V,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&O.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var U=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),U.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(C.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(C.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(V,"plotly_hover");var te=this.fullData[U.trace.index]||{},J=U.pointIndex,X=b.castHoverinfo(te,O,J);if(X&&X!=="all"){var K=X.split("+");K.indexOf("x")===-1&&(U.traceCoord[0]=void 0),K.indexOf("y")===-1&&(U.traceCoord[1]=void 0),K.indexOf("z")===-1&&(U.traceCoord[2]=void 0),K.indexOf("text")===-1&&(U.textLabel=void 0),K.indexOf("name")===-1&&(U.name=void 0)}b.loneHover({x:U.screenCoord[0],y:U.screenCoord[1],xLabel:this.hoverFormatter("xaxis",U.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",U.traceCoord[1]),zLabel:U.traceCoord[2],text:U.textLabel,name:U.name,color:b.castHoverOption(te,J,"bgcolor")||U.color,borderColor:b.castHoverOption(te,J,"bordercolor"),fontFamily:b.castHoverOption(te,J,"font.family"),fontSize:b.castHoverOption(te,J,"font.size"),fontColor:b.castHoverOption(te,J,"font.color"),nameLength:b.castHoverOption(te,J,"namelength"),textAlign:b.castHoverOption(te,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),f.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(f,S){if(S!==void 0){var w=this[f];return T.tickText(w,w.c2l(S),"hover").text}}},12536:function(ee,z,e){var M=e(67824).overrideAll,k=e(65460),o=e(98432),T=e(84888).op,b=e(3400),h=e(9616),s="gl3d",t="scene";z.name=s,z.attr=t,z.idRoot=t,z.idRegex=z.attrRegex=b.counterRegex("scene"),z.attributes=e(6636),z.layoutAttributes=e(346),z.baseLayoutAttrOverrides=M({hoverlabel:k.hoverlabel},"plot","nested"),z.supplyLayoutDefaults=e(5208),z.plot=function(a){for(var n=a._fullLayout,r=a._fullData,i=n._subplots[s],l=0;l<i.length;l++){var u=i[l],p=T(r,s,u),c=n[u],x=c.camera,d=c._scene;d||(d=new o({id:u,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:x},n),c._scene=d),d.viewInitial||(d.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),d.plot(p,n,a.layout)}},z.clean=function(a,n,r,i){for(var l=i._subplots[s]||[],u=0;u<l.length;u++){var p=l[u];!n[p]&&i[p]._scene&&(i[p]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+p).remove())}},z.toSVG=function(a){for(var n=a._fullLayout,r=n._subplots[s],i=n._size,l=0;l<r.length;l++){var u=n[r[l]],p=u.domain,c=u._scene,x=c.toImage("png");n._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":x,x:i.l+i.w*p.x[0],y:i.t+i.h*(1-p.y[1]),width:i.w*(p.x[1]-p.x[0]),height:i.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),c.destroy()}},z.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var n=a.substr(5);return n==="1"&&(n=""),t+n}},z.updateFx=function(a){for(var n=a._fullLayout,r=n._subplots[s],i=0;i<r.length;i++)n[r[i]]._scene.updateFx(n.dragmode,n.hovermode)}},6636:function(ee){ee.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(ee,z,e){var M=e(76308),k=e(94724),o=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:o({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:o({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:o({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(ee,z,e){var M=e(49760).mix,k=e(3400),o=e(31780),T=e(86140),b=e(14944),h=e(28336),s=["xaxis","yaxis","zaxis"];ee.exports=function(t,a,n){var r,i;function l(c,x){return k.coerce(r,i,T,c,x)}for(var u=0;u<s.length;u++){var p=s[u];r=t[p]||{},(i=o.newContainer(a,p))._id=p[0]+n.scene,i._name=p,b(r,i,l,n),h(r,i,l,{font:n.font,letter:p[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),l("gridcolor",M(i.color,n.bgColor,72.72727272727273).toRgbString()),l("title.text",p[0]),i.setScale=k.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",i.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},44728:function(ee,z,e){var M=e(43080),k=e(3400),o=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,h){for(var s=this,t=0;t<3;++t){var a=h[o[t]];a.visible?(s.labels[t]=b._meta?k.templateString(a.title.text,b._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(s.labelColor[t]=M(a.title.font.color)),a.title.font.family&&(s.labelFont[t]=a.title.font.family),a.title.font.size&&(s.labelSize[t]=a.title.font.size),a.title.font.weight&&(s.labelFontWeight[t]=a.title.font.weight),a.title.font.style&&(s.labelFontStyle[t]=a.title.font.style),a.title.font.variant&&(s.labelFontVariant[t]=a.title.font.variant)),"showline"in a&&(s.lineEnable[t]=a.showline),"linecolor"in a&&(s.lineColor[t]=M(a.linecolor)),"linewidth"in a&&(s.lineWidth[t]=a.linewidth),"showgrid"in a&&(s.gridEnable[t]=a.showgrid),"gridcolor"in a&&(s.gridColor[t]=M(a.gridcolor)),"gridwidth"in a&&(s.gridWidth[t]=a.gridwidth),a.type==="log"?s.zeroEnable[t]=!1:"zeroline"in a&&(s.zeroEnable[t]=a.zeroline),"zerolinecolor"in a&&(s.zeroLineColor[t]=M(a.zerolinecolor)),"zerolinewidth"in a&&(s.zeroLineWidth[t]=a.zerolinewidth),"ticks"in a&&a.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in a&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=a.ticklen),"tickcolor"in a&&(s.lineTickColor[t]=M(a.tickcolor)),"tickwidth"in a&&(s.lineTickWidth[t]=a.tickwidth),"tickangle"in a&&(s.tickAngle[t]=a.tickangle==="auto"?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(s.tickEnable[t]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(s.tickColor[t]=M(a.tickfont.color)),a.tickfont.family&&(s.tickFont[t]=a.tickfont.family),a.tickfont.size&&(s.tickSize[t]=a.tickfont.size),a.tickfont.weight&&(s.tickFontWeight[t]=a.tickfont.weight),a.tickfont.style&&(s.tickFontStyle[t]=a.tickfont.style),a.tickfont.variant&&(s.tickFontVariant[t]=a.tickfont.variant)),"mirror"in a?["ticks","all","allticks"].indexOf(a.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):a.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in a&&a.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=M(a.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},ee.exports=function(b,h){var s=new T;return s.merge(b,h),s}},5208:function(ee,z,e){var M=e(3400),k=e(76308),o=e(24040),T=e(168),b=e(64380),h=e(346),s=e(84888).op,t="gl3d";function a(n,r,i,l){for(var u=i("bgcolor"),p=k.combine(u,l.paper_bgcolor),c=["up","center","eye"],x=0;x<c.length;x++)i("camera."+c[x]+".x"),i("camera."+c[x]+".y"),i("camera."+c[x]+".z");i("camera.projection.type");var d=!!i("aspectratio.x")&&!!i("aspectratio.y")&&!!i("aspectratio.z"),g=i("aspectmode",d?"manual":"auto");d||(n.aspectratio=r.aspectratio={x:1,y:1,z:1},g==="manual"&&(r.aspectmode="auto"),n.aspectmode=r.aspectmode);var v=s(l.fullData,t,l.id);b(n,r,{font:l.font,scene:l.id,data:v,bgColor:p,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(n,r,l);var y=l.getDfltFromLayout("dragmode");if(y!==!1&&!y)if(y="orbit",n.camera&&n.camera.up){var m=n.camera.up.x,_=n.camera.up.y,f=n.camera.up.z;f!==0&&(m&&_&&f?f/Math.sqrt(m*m+_*_+f*f)>.999&&(y="turntable"):y="turntable")}else y="turntable";i("dragmode",y),i("hovermode",l.getDfltFromLayout("hovermode"))}ee.exports=function(n,r,i){var l=r._basePlotModules.length>1;T(n,r,i,{type:t,attributes:h,handleDefaults:a,fullLayout:r,font:r.font,fullData:i,getDfltFromLayout:function(u){if(!l)return M.validate(n[u],h[u])?n[u]:void 0},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}},346:function(ee,z,e){var M=e(86140),k=e(86968).u,o=e(92880).extendFlat,T=e(3400).counterRegex;function b(h,s,t){return{x:{valType:"number",dflt:h,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ee.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(b(0,0,1),{}),center:o(b(0,0,0),{}),eye:o(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(ee,z,e){var M=e(43080),k=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(T){for(var b=0;b<3;++b){var h=T[k[b]];h.visible?(this.enabled[b]=h.showspikes,this.colors[b]=M(h.spikecolor),this.drawSides[b]=h.spikesides,this.lineWidth[b]=h.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},ee.exports=function(T){var b=new o;return b.merge(T),b}},87152:function(ee,z,e){ee.exports=function(b){for(var h=b.axesOptions,s=b.glplot.axesPixels,t=b.fullSceneLayout,a=[[],[],[]],n=0;n<3;++n){var r=t[o[n]];if(r._length=(s[n].hi-s[n].lo)*s[n].pixelsPerDataUnit/b.dataScale[n],Math.abs(r._length)===1/0||isNaN(r._length))a[n]=[];else{r._input_range=r.range.slice(),r.range[0]=s[n].lo/b.dataScale[n],r.range[1]=s[n].hi/b.dataScale[n],r._m=1/(b.dataScale[n]*s[n].pixelsPerDataUnit),r.range[0]===r.range[1]&&(r.range[0]-=1,r.range[1]+=1);var i=r.tickmode;if(r.tickmode==="auto"){r.tickmode="linear";var l=r.nticks||k.constrain(r._length/40,4,9);M.autoTicks(r,Math.abs(r.range[1]-r.range[0])/l)}for(var u=M.calcTicks(r,{msUTC:!0}),p=0;p<u.length;++p)u[p].x=u[p].x*b.dataScale[n],r.type==="date"&&(u[p].text=u[p].text.replace(/\<br\>/g," "));a[n]=u,r.tickmode=i}}for(h.ticks=a,n=0;n<3;++n)for(T[n]=.5*(b.glplot.bounds[0][n]+b.glplot.bounds[1][n]),p=0;p<2;++p)h.bounds[p][n]=b.glplot.bounds[p][n];b.contourLevels=function(c){for(var x=new Array(3),d=0;d<3;++d){for(var g=c[d],v=new Array(g.length),y=0;y<g.length;++y)v[y]=g[y].x;x[d]=v}return x}(a)};var M=e(54460),k=e(3400),o=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(ee){function z(e,M){var k,o,T=[0,0,0,0];for(k=0;k<4;++k)for(o=0;o<4;++o)T[o]+=e[4*k+o]*M[k];return T}ee.exports=function(e,M){return z(e.projection,z(e.view,z(e.model,[M[0],M[1],M[2],1])))}},98432:function(ee,z,e){var M,k,o=e(67792).gl_plot3d,T=o.createCamera,b=o.createScene,h=e(5408),s=e(89184),t=e(24040),a=e(3400),n=a.preserveDrawingBuffer(),r=e(54460),i=e(93024),l=e(43080),u=e(16576),p=e(94424),c=e(44728),x=e(9020),d=e(87152),g=e(19280).applyAutorangeOptions,v=!1;function y(w,E){var O=document.createElement("div"),C=w.container;this.graphDiv=w.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",O.appendChild(P),this.svgContainer=P,O.id=w.id,O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",C.appendChild(O),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=O,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var m=y.prototype;m.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(M=document.createElement("canvas"),k=h({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=M}return E};var _=!0;m.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),O=!0;try{w.glplot=b(E)}catch{if(w.staticMode||!_||n)O=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=E.glOptions.preserveDrawingBuffer=!0,w.glplot=b(E)}catch{n=E.glOptions.preserveDrawingBuffer=!1,O=!1}}}return _=!1,O},m.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera,O=E.projection.type==="orthographic";w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:O,zoomMin:.01,zoomMax:100,mode:"orbit"})},m.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return u(w);w.traces={},w.make4thDimension();var E=w.graphDiv,O=E.layout,C=function(){var R={};return w.isCameraChanged(O)&&(R[w.id+".camera"]=w.getCamera()),w.isAspectChanged(O)&&(R[w.id+".aspectratio"]=w.glplot.getAspectratio(),O[w.id].aspectmode!=="manual"&&(w.fullSceneLayout.aspectmode=O[w.id].aspectmode=R[w.id+".aspectmode"]="manual")),R},P=function(R){if(R.fullSceneLayout.dragmode!==!1){var j=C();R.saveLayout(O),R.graphDiv.emit("plotly_relayout",j)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){P(w)}),w.glplot.canvas.addEventListener("touchstart",function(){v=!0}),w.glplot.canvas.addEventListener("wheel",function(R){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var j=R.deltaX>R.deltaY?1.1:.9090909090909091,D=w.glplot.getAspectratio();w.glplot.setAspectratio({x:j*D.x,y:j*D.y,z:j*D.z})}P(w)}},!!s&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(w.fullSceneLayout.dragmode!==!1&&w.camera.mouseListener.buttons!==0){var R=C();w.graphDiv.emit("plotly_relayouting",R)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(R){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:R,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},m.render=function(){var w,E=this,O=E.graphDiv,C=E.svgContainer,P=E.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var R=O._fullLayout._invScaleX,j=O._fullLayout._invScaleY,D=P.width*R,N=P.height*j;C.setAttributeNS(null,"viewBox","0 0 "+D+" "+N),C.setAttributeNS(null,"width",D),C.setAttributeNS(null,"height",N),d(E),E.glplot.axes.update(E.axesOptions);for(var W=Object.keys(E.traces),F=null,V=E.glplot.selection,U=0;U<W.length;++U)(w=E.traces[W[U]]).data.hoverinfo!=="skip"&&w.handlePick(V)&&(F=w),w.setContourLevels&&w.setContourLevels();function te(be,ve,ge){var we=E.fullSceneLayout[be+"axis"];return we.type!=="log"&&(ve=we.d2l(ve)),r.hoverLabelText(we,ve,ge)}if(F!==null){var J=p(E.glplot.cameraParams,V.dataCoordinate);w=F.data;var X,K=O._fullData[w.index],Q=V.index,Z={xLabel:te("x",V.traceCoordinate[0],w.xhoverformat),yLabel:te("y",V.traceCoordinate[1],w.yhoverformat),zLabel:te("z",V.traceCoordinate[2],w.zhoverformat)},re=i.castHoverinfo(K,E.fullLayout,Q),oe=(re||"").split("+"),ae=re&&re==="all";K.hovertemplate||ae||(oe.indexOf("x")===-1&&(Z.xLabel=void 0),oe.indexOf("y")===-1&&(Z.yLabel=void 0),oe.indexOf("z")===-1&&(Z.zLabel=void 0),oe.indexOf("text")===-1&&(V.textLabel=void 0),oe.indexOf("name")===-1&&(F.name=void 0));var ce=[];w.type==="cone"||w.type==="streamtube"?(Z.uLabel=te("x",V.traceCoordinate[3],w.uhoverformat),(ae||oe.indexOf("u")!==-1)&&ce.push("u: "+Z.uLabel),Z.vLabel=te("y",V.traceCoordinate[4],w.vhoverformat),(ae||oe.indexOf("v")!==-1)&&ce.push("v: "+Z.vLabel),Z.wLabel=te("z",V.traceCoordinate[5],w.whoverformat),(ae||oe.indexOf("w")!==-1)&&ce.push("w: "+Z.wLabel),Z.normLabel=V.traceCoordinate[6].toPrecision(3),(ae||oe.indexOf("norm")!==-1)&&ce.push("norm: "+Z.normLabel),w.type==="streamtube"&&(Z.divergenceLabel=V.traceCoordinate[7].toPrecision(3),(ae||oe.indexOf("divergence")!==-1)&&ce.push("divergence: "+Z.divergenceLabel)),V.textLabel&&ce.push(V.textLabel),X=ce.join("<br>")):w.type==="isosurface"||w.type==="volume"?(Z.valueLabel=r.hoverLabelText(E._mockAxis,E._mockAxis.d2l(V.traceCoordinate[3]),w.valuehoverformat),ce.push("value: "+Z.valueLabel),V.textLabel&&ce.push(V.textLabel),X=ce.join("<br>")):X=V.textLabel;var he={x:V.traceCoordinate[0],y:V.traceCoordinate[1],z:V.traceCoordinate[2],data:K._input,fullData:K,curveNumber:K.index,pointNumber:Q};i.appendArrayPointValue(he,K,Q),w._module.eventData&&(he=K._module.eventData(he,V,K,{},Q));var pe={points:[he]};if(E.fullSceneLayout.hovermode){var xe=[];i.loneHover({trace:K,x:(.5+.5*J[0]/J[3])*D,y:(.5-.5*J[1]/J[3])*N,xLabel:Z.xLabel,yLabel:Z.yLabel,zLabel:Z.zLabel,text:X,name:F.name,color:i.castHoverOption(K,Q,"bgcolor")||F.color,borderColor:i.castHoverOption(K,Q,"bordercolor"),fontFamily:i.castHoverOption(K,Q,"font.family"),fontSize:i.castHoverOption(K,Q,"font.size"),fontColor:i.castHoverOption(K,Q,"font.color"),nameLength:i.castHoverOption(K,Q,"namelength"),textAlign:i.castHoverOption(K,Q,"align"),hovertemplate:a.castOption(K,Q,"hovertemplate"),hovertemplateLabels:a.extendFlat({},he,Z),eventData:[he]},{container:C,gd:O,inOut_bbox:xe}),he.bbox=xe[0]}V.distance<5&&(V.buttons||v)?O.emit("plotly_click",pe):O.emit("plotly_hover",pe),this.oldEventData=pe}else i.loneUnhover(C),this.oldEventData&&O.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},m.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):a.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var f=["xaxis","yaxis","zaxis"];function S(w,E,O){for(var C=w.fullSceneLayout,P=0;P<3;P++){var R=f[P],j=R.charAt(0),D=C[R],N=E[j],W=E[j+"calendar"],F=E["_"+j+"length"];if(a.isArrayOrTypedArray(N))for(var V,U=0;U<(F||N.length);U++)if(a.isArrayOrTypedArray(N[U]))for(var te=0;te<N[U].length;++te)V=D.d2l(N[U][te],0,W),!isNaN(V)&&isFinite(V)&&(O[0][P]=Math.min(O[0][P],V),O[1][P]=Math.max(O[1][P],V));else V=D.d2l(N[U],0,W),!isNaN(V)&&isFinite(V)&&(O[0][P]=Math.min(O[0][P],V),O[1][P]=Math.max(O[1][P],V));else O[0][P]=Math.min(O[0][P],0),O[1][P]=Math.max(O[1][P],F-1)}}m.plot=function(w,E,O){var C=this;if(C.plotArgs=[w,E,O],!C.glplot.contextLost){var P,R,j,D,N,W,F=E[C.id],V=O[C.id];C.fullLayout=E,C.fullSceneLayout=F,C.axesOptions.merge(E,F),C.spikeOptions.merge(F),C.setViewport(F),C.updateFx(F.dragmode,F.hovermode),C.camera.enableWheel=C.graphDiv._context._scrollZoom.gl3d,C.glplot.setClearColor(l(F.bgcolor)),C.setConvert(N),w?Array.isArray(w)||(w=[w]):w=[];var U=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(j=0;j<w.length;++j)(P=w[j]).visible===!0&&P._length!==0&&S(this,P,U);(function(Se,Oe){for(var De=Se.fullSceneLayout,de=De.annotations||[],me=0;me<3;me++)for(var Me=f[me],ze=Me.charAt(0),Pe=De[Me],Ne=0;Ne<de.length;Ne++){var Ve=de[Ne];if(Ve.visible){var Ye=Pe.r2l(Ve[ze]);!isNaN(Ye)&&isFinite(Ye)&&(Oe[0][me]=Math.min(Oe[0][me],Ye),Oe[1][me]=Math.max(Oe[1][me],Ye))}}})(this,U);var te=[1,1,1];for(D=0;D<3;++D)U[1][D]===U[0][D]?te[D]=1:te[D]=1/(U[1][D]-U[0][D]);for(C.dataScale=te,C.convertAnnotations(this),j=0;j<w.length;++j)(P=w[j]).visible===!0&&P._length!==0&&((R=C.traces[P.uid])?R.data.type===P.type?R.update(P):(R.dispose(),R=P._module.plot(this,P),C.traces[P.uid]=R):(R=P._module.plot(this,P),C.traces[P.uid]=R),R.name=P.name);var J=Object.keys(C.traces);e:for(j=0;j<J.length;++j){for(D=0;D<w.length;++D)if(w[D].uid===J[j]&&w[D].visible===!0&&w[D]._length!==0)continue e;(R=C.traces[J[j]]).dispose(),delete C.traces[J[j]]}C.glplot.objects.sort(function(Se,Oe){return Se._trace.data.index-Oe._trace.data.index});var X,K=[[0,0,0],[0,0,0]],Q=[],Z={};for(j=0;j<3;++j){var re;if((W=(N=F[f[j]]).type)in Z?(Z[W].acc*=te[j],Z[W].count+=1):Z[W]={acc:te[j],count:1},N.autorange){K[0][j]=1/0,K[1][j]=-1/0;var oe=C.glplot.objects,ae=C.fullSceneLayout.annotations||[],ce=N._name.charAt(0);for(D=0;D<oe.length;D++){var he=oe[D],pe=he.bounds,xe=he._trace.data._pad||0;he.constructor.name==="ErrorBars"&&N._lowerLogErrorBound?K[0][j]=Math.min(K[0][j],N._lowerLogErrorBound):K[0][j]=Math.min(K[0][j],pe[0][j]/te[j]-xe),K[1][j]=Math.max(K[1][j],pe[1][j]/te[j]+xe)}for(D=0;D<ae.length;D++){var be=ae[D];if(be.visible){var ve=N.r2l(be[ce]);K[0][j]=Math.min(K[0][j],ve),K[1][j]=Math.max(K[1][j],ve)}}if("rangemode"in N&&N.rangemode==="tozero"&&(K[0][j]=Math.min(K[0][j],0),K[1][j]=Math.max(K[1][j],0)),K[0][j]>K[1][j])K[0][j]=-1,K[1][j]=1;else{var ge=K[1][j]-K[0][j];K[0][j]-=ge/32,K[1][j]+=ge/32}if(re=[K[0][j],K[1][j]],re=g(re,N),K[0][j]=re[0],K[1][j]=re[1],N.isReversed()){var we=K[0][j];K[0][j]=K[1][j],K[1][j]=we}}else re=N.range,K[0][j]=N.r2l(re[0]),K[1][j]=N.r2l(re[1]);K[0][j]===K[1][j]&&(K[0][j]-=1,K[1][j]+=1),Q[j]=K[1][j]-K[0][j],N.range=[K[0][j],K[1][j]],N.limitRange(),C.glplot.setBounds(j,{min:N.range[0]*te[j],max:N.range[1]*te[j]})}var _e=F.aspectmode;if(_e==="cube")X=[1,1,1];else if(_e==="manual"){var se=F.aspectratio;X=[se.x,se.y,se.z]}else{if(_e!=="auto"&&_e!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ie=[1,1,1];for(j=0;j<3;++j){var fe=Z[W=(N=F[f[j]]).type];ie[j]=Math.pow(fe.acc,1/fe.count)/te[j]}X=_e==="data"||Math.max.apply(null,ie)/Math.min.apply(null,ie)<=4?ie:[1,1,1]}F.aspectratio.x=V.aspectratio.x=X[0],F.aspectratio.y=V.aspectratio.y=X[1],F.aspectratio.z=V.aspectratio.z=X[2],C.glplot.setAspectratio(F.aspectratio),C.viewInitial.aspectratio||(C.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),C.viewInitial.aspectmode||(C.viewInitial.aspectmode=F.aspectmode);var Ee=F.domain||null,Te=E._size||null;if(Ee&&Te){var Ae=C.container.style;Ae.position="absolute",Ae.left=Te.l+Ee.x[0]*Te.w+"px",Ae.top=Te.t+(1-Ee.y[1])*Te.h+"px",Ae.width=Te.w*(Ee.x[1]-Ee.x[0])+"px",Ae.height=Te.h*(Ee.y[1]-Ee.y[0])+"px"}C.glplot.redraw()}},m.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},m.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:w._ortho===!0?"orthographic":"perspective"}}},m.setViewport=function(w){var E,O=this,C=w.camera;O.camera.lookAt.apply(this,[[(E=C).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),O.glplot.setAspectratio(w.aspectratio),C.projection.type==="orthographic"!==O.camera._ortho&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},m.isCameraChanged=function(w){var E=this.getCamera(),O=a.nestedProperty(w,this.id+".camera").get();function C(D,N,W,F){var V=["up","center","eye"],U=["x","y","z"];return N[V[W]]&&D[V[W]][U[F]]===N[V[W]][U[F]]}var P=!1;if(O===void 0)P=!0;else{for(var R=0;R<3;R++)for(var j=0;j<3;j++)if(!C(E,O,R,j)){P=!0;break}(!O.projection||E.projection&&E.projection.type!==O.projection.type)&&(P=!0)}return P},m.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),O=a.nestedProperty(w,this.id+".aspectratio").get();return O===void 0||O.x!==E.x||O.y!==E.y||O.z!==E.z},m.saveLayout=function(w){var E,O,C,P,R,j,D=this,N=D.fullLayout,W=D.isCameraChanged(w),F=D.isAspectChanged(w),V=W||F;if(V){var U={};W&&(E=D.getCamera(),C=(O=a.nestedProperty(w,D.id+".camera")).get(),U[D.id+".camera"]=C),F&&(P=D.glplot.getAspectratio(),j=(R=a.nestedProperty(w,D.id+".aspectratio")).get(),U[D.id+".aspectratio"]=j),t.call("_storeDirectGUIEdit",w,N._preGUI,U),W&&(O.set(E),a.nestedProperty(N,D.id+".camera").set(E)),F&&(R.set(P),a.nestedProperty(N,D.id+".aspectratio").set(P),D.glplot.redraw())}return V},m.updateFx=function(w,E){var O=this,C=O.camera;if(C)if(w==="orbit")C.mode="orbit",C.keyBindingMode="rotate";else if(w==="turntable"){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var P=O.graphDiv,R=P._fullLayout,j=O.fullSceneLayout.camera,D=j.up.x,N=j.up.y,W=j.up.z;if(W/Math.sqrt(D*D+N*N+W*W)<.999){var F=O.id+".camera.up",V={x:0,y:0,z:1},U={};U[F]=V;var te=P.layout;t.call("_storeDirectGUIEdit",te,R._preGUI,U),j.up=V,a.nestedProperty(te,F).set(V)}}else C.keyBindingMode=w;O.fullSceneLayout.hovermode=E},m.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(M),E.glplot.redraw();var O=E.glplot.gl,C=O.drawingBufferWidth,P=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var R=new Uint8Array(C*P*4);O.readPixels(0,0,C,P,O.RGBA,O.UNSIGNED_BYTE,R),function(F,V,U){for(var te=0,J=U-1;te<J;++te,--J)for(var X=0;X<V;++X)for(var K=0;K<4;++K){var Q=4*(V*te+X)+K,Z=4*(V*J+X)+K,re=F[Q];F[Q]=F[Z],F[Z]=re}}(R,C,P),function(F,V,U){for(var te=0;te<U;++te)for(var J=0;J<V;++J){var X=4*(V*te+J),K=F[X+3];if(K>0)for(var Q=255/K,Z=0;Z<3;++Z)F[X+Z]=Math.min(Q*F[X+Z],255)}}(R,C,P);var j=document.createElement("canvas");j.width=C,j.height=P;var D,N=j.getContext("2d",{willReadFrequently:!0}),W=N.createImageData(C,P);switch(W.data.set(R),N.putImageData(W,0,0),w){case"jpeg":D=j.toDataURL("image/jpeg");break;case"webp":D=j.toDataURL("image/webp");break;default:D=j.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(M),D},m.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[f[w]];r.setConvert(E,this.fullLayout),E.setScale=a.noop}},m.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(w._mockAxis,E)},ee.exports=y},52094:function(ee){ee.exports=function(z,e,M,k){k=k||z.length;for(var o=new Array(k),T=0;T<k;T++)o[T]=[z[T],e[T],M[T]];return o}},64859:function(ee,z,e){var M=e(25376),k=e(85656),o=e(22548),T=e(92872),b=e(34200),h=e(66741),s=e(92880).extendFlat,t=M({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=o.defaultLine,ee.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(h({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},47552:function(ee,z,e){var M=e(95376),k="1.13.4",o=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=[' <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),h={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=M(h);ee.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:h,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){var T=k.split(" "),b=T[0],h=T[1],s=M.isArrayOrTypedArray(o)?M.mean(o):o,t=.5+s/100,a=1.5+s/100,n=["",""],r=[0,0];switch(b){case"top":n[0]="top",r[1]=-a;break;case"bottom":n[0]="bottom",r[1]=a}switch(h){case"left":n[1]="right",r[0]=-t;break;case"right":n[1]="left",r[0]=t}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:r}}},33688:function(ee,z,e){var M=e(3480),k=e(3400),o=k.strTranslate,T=k.strScale,b=e(84888).KY,h=e(9616),s=e(33428),t=e(43616),a=e(72736),n=e(14440),r="mapbox",i=z.constants=e(47552);function l(u){return typeof u=="string"&&(i.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0||u.indexOf("stamen")===0)}z.name=r,z.attr="subplot",z.idRoot=r,z.idRegex=z.attrRegex=k.counterRegex(r),z.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},z.layoutAttributes=e(5232),z.supplyLayoutDefaults=e(5976),z.plot=function(u){var p=u._fullLayout,c=u.calcdata,x=p._subplots[r];if(M.version!==i.requiredVersion)throw new Error(i.wrongVersionErrorMsg);var d=function(f,S){var w=f._fullLayout;if(f._context.mapboxAccessToken==="")return"";for(var E=[],O=[],C=!1,P=!1,R=0;R<S.length;R++){var j=w[S[R]],D=j.accesstoken;l(j.style)&&(D?k.pushUnique(E,D):(l(j._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),D&&k.pushUnique(O,D)}if(P){var N=C?i.noAccessTokenErrorMsg:i.missingStyleErrorMsg;throw k.error(N),new Error(N)}return E.length?(E.length>1&&k.warn(i.multipleTokensErrorMsg),E[0]):(O.length&&k.log(["Listed mapbox access token(s)",O.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);M.accessToken=d;for(var g=0;g<x.length;g++){var v=x[g],y=b(c,r,v),m=p[v],_=m._subplot;_||(_=new n(u,v),p[v]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),_.plot(y,p,u._promises)}},z.clean=function(u,p,c,x){for(var d=x._subplots[r]||[],g=0;g<d.length;g++){var v=d[g];!p[v]&&x[v]._subplot&&x[v]._subplot.destroy()}},z.toSVG=function(u){for(var p=u._fullLayout,c=p._subplots[r],x=p._size,d=0;d<c.length;d++){var g=p[c[d]],v=g.domain,y=g._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":y,x:x.l+x.w*v.x[0],y:x.t+x.h*(1-v.y[1]),width:x.w*(v.x[1]-v.x[0]),height:x.h*(v.y[1]-v.y[0]),preserveAspectRatio:"none"});var m=s.select(g._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=p._glimages.append("g");_.attr("transform",o(x.l+x.w*v.x[0]+10,x.t+x.h*(1-v.y[0])-31)),_.append("path").attr("d",i.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",i.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",i.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",i.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var f=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=p._glimages.append("g"),w=S.append("text");w.text(f).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":f});var E=t.bBox(w.node()),O=x.w*(v.x[1]-v.x[0]);if(E.width>O/2){var C=f.split("|").join("<br>");w.text(C).attr("data-unformatted",C).call(a.convertToTspans,u),E=t.bBox(w.node())}w.attr("transform",o(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>O&&(P=O/(E.width+6));var R=[x.l+x.w*v.x[1],x.t+x.h*(1-v.y[0])];S.attr("transform",o(R[0],R[1])+T(P))}},z.updateFx=function(u){for(var p=u._fullLayout,c=p._subplots[r],x=0;x<c.length;x++)p[c[x]]._subplot.updateFx(p)}},22360:function(ee,z,e){var M=e(3400),k=e(72736).sanitizeHTML,o=e(89032),T=e(47552);function b(a,n){this.subplot=a,this.uid=a.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var h=b.prototype;function s(a){if(!a.visible)return!1;var n=a.source;if(Array.isArray(n)&&n.length>0){for(var r=0;r<n.length;r++)if(typeof n[r]!="string"||n[r].length===0)return!1;return!0}return M.isPlainObject(n)||typeof n=="string"&&n.length>0}function t(a){var n={},r={};switch(a.type){case"circle":M.extendFlat(r,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case"line":M.extendFlat(r,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity,"line-dasharray":a.line.dash});break;case"fill":M.extendFlat(r,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case"symbol":var i=a.symbol,l=o(i.textposition,i.iconsize);M.extendFlat(n,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":i.placement}),M.extendFlat(r,{"icon-color":a.color,"text-color":i.textfont.color,"text-opacity":a.opacity});break;case"raster":M.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":a.opacity})}return{layout:n,paint:r}}h.update=function(a){this.visible?this.needsNewImage(a)?this.updateImage(a):this.needsNewSource(a)?(this.removeLayer(),this.updateSource(a),this.updateLayer(a)):this.needsNewLayer(a)?this.updateLayer(a):this.updateStyle(a):(this.updateSource(a),this.updateLayer(a)),this.visible=s(a)},h.needsNewImage=function(a){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&a.sourcetype==="image"&&(this.source!==a.source||JSON.stringify(this.coordinates)!==JSON.stringify(a.coordinates))},h.needsNewSource=function(a){return this.sourceType!==a.sourcetype||JSON.stringify(this.source)!==JSON.stringify(a.source)||this.layerType!==a.type},h.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},h.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},h.updateImage=function(a){this.subplot.map.getSource(this.idSource).updateImage({url:a.source,coordinates:a.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());n!==null&&this.subplot.map.moveLayer(this.idLayer,n)},h.updateSource=function(a){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=a.sourcetype,this.source=a.source,s(a)){var r=function(i){var l,u=i.sourcetype,p=i.source,c={type:u};return u==="geojson"?l="data":u==="vector"?l=typeof p=="string"?"url":"tiles":u==="raster"?(l="tiles",c.tileSize=256):u==="image"&&(l="url",c.coordinates=i.coordinates),c[l]=p,i.sourceattribution&&(c.attribution=k(i.sourceattribution)),c}(a);n.addSource(this.idSource,r)}},h.findFollowingMapboxLayerId=function(a){if(a==="traces")for(var n=this.subplot.getMapLayers(),r=0;r<n.length;r++){var i=n[r].id;if(typeof i=="string"&&i.indexOf(T.traceLayerPrefix)===0){a=i;break}}return a},h.updateLayer=function(a){var n=this.subplot,r=t(a),i=this.lookupBelow(),l=this.findFollowingMapboxLayerId(i);this.removeLayer(),s(a)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type,minzoom:a.minzoom,maxzoom:a.maxzoom,layout:r.layout,paint:r.paint},l),this.layerType=a.type,this.below=i},h.updateStyle=function(a){if(s(a)){var n=t(a);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},h.removeLayer=function(){var a=this.subplot.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer)},h.dispose=function(){var a=this.subplot.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer),a.getSource(this.idSource)&&a.removeSource(this.idSource)},ee.exports=function(a,n,r){var i=new b(a,n);return i.update(r),i}},5232:function(ee,z,e){var M=e(3400),k=e(76308).defaultLine,o=e(86968).u,T=e(25376),b=e(52904).textposition,h=e(67824).overrideAll,s=e(31780).templatedArray,t=e(47552),a=T({noFontVariant:!0});a.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ee.exports=h({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:a,textposition:M.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(ee,z,e){var M=e(3400),k=e(168),o=e(51272),T=e(5232);function b(s,t,a,n){a("accesstoken",n.accessToken),a("style"),a("center.lon"),a("center.lat"),a("zoom"),a("bearing"),a("pitch");var r=a("bounds.west"),i=a("bounds.east"),l=a("bounds.south"),u=a("bounds.north");r!==void 0&&i!==void 0&&l!==void 0&&u!==void 0||delete t.bounds,o(s,t,{name:"layers",handleItemDefaults:h}),t._input=s}function h(s,t){function a(u,p){return M.coerce(s,t,T.layers,u,p)}if(a("visible")){var n,r=a("sourcetype"),i=r==="raster"||r==="image";a("source"),a("sourceattribution"),r==="vector"&&a("sourcelayer"),r==="image"&&a("coordinates"),i&&(n="raster");var l=a("type",n);i&&l!=="raster"&&(l=t.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),a("below"),a("color"),a("opacity"),a("minzoom"),a("maxzoom"),l==="circle"&&a("circle.radius"),l==="line"&&(a("line.width"),a("line.dash")),l==="fill"&&a("fill.outlinecolor"),l==="symbol"&&(a("symbol.icon"),a("symbol.iconsize"),a("symbol.text"),M.coerceFont(a,"symbol.textfont",void 0,{noFontVariant:!0}),a("symbol.textposition"),a("symbol.placement"))}}ee.exports=function(s,t,a){k(s,t,a,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(ee,z,e){var M=e(3480),k=e(3400),o=e(27144),T=e(24040),b=e(54460),h=e(86476),s=e(93024),t=e(72760),a=t.drawMode,n=t.selectMode,r=e(22676).prepSelect,i=e(22676).clearOutline,l=e(22676).clearSelectionsCache,u=e(22676).selectOnClick,p=e(47552),c=e(22360);function x(_,f){this.id=f,this.gd=_;var S=_._fullLayout,w=_._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var d=x.prototype;d.plot=function(_,f,S){var w,E=this,O=f[E.id];E.map&&O.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=E.map?new Promise(function(C,P){E.updateMap(_,f,C,P)}):new Promise(function(C,P){E.createMap(_,f,C,P)}),S.push(w)},d.createMap=function(_,f,S,w){var E=this,O=f[E.id],C=E.styleObj=v(O.style,f);E.accessToken=O.accesstoken;var P=O.bounds,R=P?[[P.west,P.south],[P.east,P.north]]:null,j=E.map=new M.Map({container:E.div,style:C.style,center:m(O.center),zoom:O.zoom,bearing:O.bearing,pitch:O.pitch,maxBounds:R,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));j._canvas.style.left="0px",j._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(_,f);var D=[];D.push(new Promise(function(N){j.once("load",N)})),D=D.concat(o.fetchTraceGeoData(_)),Promise.all(D).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},d.updateMap=function(_,f,S,w){var E=this,O=E.map,C=f[this.id];E.rejectOnError(w);var P=[],R=v(C.style,f);JSON.stringify(E.styleObj)!==JSON.stringify(R)&&(E.styleObj=R,O.setStyle(R.style),E.traceHash={},P.push(new Promise(function(j){O.once("styledata",j)}))),P=P.concat(o.fetchTraceGeoData(_)),Promise.all(P).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},d.fillBelowLookup=function(_,f){var S,w,E=f[this.id].layers,O=this.belowLookup={},C=!1;for(S=0;S<_.length;S++){var P=_[S][0].trace,R=P._module;typeof P.below=="string"?w=P.below:R.getBelow&&(w=R.getBelow(P,this)),w===""&&(C=!0),O["trace-"+P.uid]=w||""}for(S=0;S<E.length;S++){var j=E[S];w=typeof j.below=="string"?j.below:C?"traces":"",O["layout-"+S]=w}var D,N,W={};for(D in O)W[w=O[D]]?W[w].push(D):W[w]=[D];for(w in W){var F=W[w];if(F.length>1)for(S=0;S<F.length;S++)(D=F[S]).indexOf("trace-")===0?(N=D.split("trace-")[1],this.traceHash[N]&&(this.traceHash[N].below=null)):D.indexOf("layout-")===0&&(N=D.split("layout-")[1],this.layerList[N]&&(this.layerList[N].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function v(_,f){var S={};if(k.isPlainObject(_))S.id=_.id,S.style=_;else if(typeof _=="string")if(S.id=_,p.styleValuesMapbox.indexOf(_)!==-1)S.style=y(_);else if(p.stylesNonMapbox[_]){S.style=p.stylesNonMapbox[_];var w=S.style.sources["plotly-"+_],E=w?w.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=f._mapboxAccessToken)}else S.style=_;else S.id=p.styleValueDflt,S.style=y(p.styleValueDflt);return S.transition={duration:0,delay:0},S}function y(_){return p.styleUrlPrefix+_+"-"+p.styleUrlSuffix}function m(_){return[_.lon,_.lat]}d.updateData=function(_){var f,S,w,E,O=this.traceHash,C=_.slice().sort(function(N,W){return g[N[0].trace.type]-g[W[0].trace.type]});for(w=0;w<C.length;w++){var P=C[w],R=!1;(f=O[(S=P[0].trace).uid])&&(f.type===S.type?(f.update(P),R=!0):f.dispose()),!R&&S._module&&(O[S.uid]=S._module.plot(this,P))}var j=Object.keys(O);e:for(w=0;w<j.length;w++){var D=j[w];for(E=0;E<_.length;E++)if(D===(S=_[E][0].trace).uid)continue e;(f=O[D]).dispose(),delete O[D]}},d.updateLayout=function(_){var f=this.map,S=_[this.id];this.dragging||this.wheeling||(f.setCenter(m(S.center)),f.setZoom(S.zoom),f.setBearing(S.bearing),f.setPitch(S.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},d.resolveOnRender=function(_){var f=this.map;f.on("render",function S(){f.loaded()&&(f.off("render",S),setTimeout(_,10))})},d.rejectOnError=function(_){var f=this.map;function S(){_(new Error(p.mapOnErrorMsg))}f.once("error",S),f.once("style.error",S),f.once("source.error",S),f.once("tile.error",S),f.once("layer.error",S)},d.createFramework=function(_){var f=this,S=f.div=document.createElement("div");S.id=f.uid,S.style.position="absolute",f.container.appendChild(S),f.xaxis={_id:"x",c2p:function(w){return f.project(w).x}},f.yaxis={_id:"y",c2p:function(w){return f.project(w).y}},f.updateFramework(_),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(f.mockAxis,_)},d.initFx=function(_,f){var S=this,w=S.gd,E=S.map;function O(){s.loneUnhover(f._hoverlayer)}function C(){var P=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var R=w._fullLayout;if(P.originalEvent||S.wheeling){var j=R[S.id];T.call("_storeDirectGUIEdit",w.layout,R._preGUI,S.getViewEdits(j));var D=S.getView();j._input.center=j.center=D.center,j._input.zoom=j.zoom=D.zoom,j._input.bearing=j.bearing=D.bearing,j._input.pitch=j.pitch=D.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(D))}P.originalEvent&&P.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),R._rehover&&R._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var R=S.div.getBoundingClientRect(),j=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return R},S.xaxis.p2c=function(){return E.unproject(j).lng},S.yaxis.p2c=function(){return E.unproject(j).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&s.hover(w,P,S.id)},s.hover(w,P,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,O()}),E.on("zoomstart",O),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(P));var R=S.viewInitial;E.setCenter(m(R.center)),E.setZoom(R.zoom),E.setBearing(R.bearing),E.setPitch(R.pitch);var j=S.getView();P._input.center=P.center=j.center,P._input.zoom=P.zoom=j.zoom,P._input.bearing=P.bearing=j.bearing,P._input.pitch=P.pitch=j.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(j))}),S.clearOutline=function(){l(S.dragOptions),i(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(R){var j=w._fullLayout.clickmode;j.indexOf("select")>-1&&u(R.originalEvent,w,[S.xaxis],[S.yaxis],S.id,P),j.indexOf("event")>-1&&s.click(w,R.originalEvent)}}},d.updateFx=function(_){var f=this,S=f.map,w=f.gd;if(!f.isStatic){var E,O=_.dragmode;E=function(R,j){j.isRect?(R.range={})[f.id]=[P([j.xmin,j.ymin]),P([j.xmax,j.ymax])]:(R.lassoPoints={})[f.id]=j.map(P)};var C=f.dragOptions;f.dragOptions=k.extendDeep(C||{},{dragmode:_.dragmode,element:f.div,gd:w,plotinfo:{id:f.id,domain:_[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:E},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),S.off("click",f.onClickInPanHandler),n(O)||a(O)?(S.dragPan.disable(),S.on("zoomstart",f.clearOutline),f.dragOptions.prepFn=function(R,j,D){r(R,j,D,f.dragOptions,O)},h.init(f.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",f.clearOutline),f.div.onmousedown=null,f.div.ontouchstart=null,f.div.removeEventListener("touchstart",f.div._ontouchstart),f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),S.on("click",f.onClickInPanHandler))}function P(R){var j=f.map.unproject(R);return[j.lng,j.lat]}},d.updateFramework=function(_){var f=_[this.id].domain,S=_._size,w=this.div.style;w.width=S.w*(f.x[1]-f.x[0])+"px",w.height=S.h*(f.y[1]-f.y[0])+"px",w.left=S.l+f.x[0]*S.w+"px",w.top=S.t+(1-f.y[1])*S.h+"px",this.xaxis._offset=S.l+f.x[0]*S.w,this.xaxis._length=S.w*(f.x[1]-f.x[0]),this.yaxis._offset=S.t+(1-f.y[1])*S.h,this.yaxis._length=S.h*(f.y[1]-f.y[0])},d.updateLayers=function(_){var f,S=_[this.id].layers,w=this.layerList;if(S.length!==w.length){for(f=0;f<w.length;f++)w[f].dispose();for(w=this.layerList=[],f=0;f<S.length;f++)w.push(c(this,f,S[f]))}else for(f=0;f<S.length;f++)w[f].update(S[f])},d.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},d.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},d.setOptions=function(_,f,S){for(var w in S)this.map[f](_,w,S[w])},d.getMapLayers=function(){return this.map.getStyle().layers},d.addLayer=function(_,f){var S=this.map;if(typeof f=="string"){if(f==="")return void S.addLayer(_,f);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(f===w[E].id)return void S.addLayer(_,f);k.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(_)},d.project=function(_){return this.map.project(new M.LngLat(_[0],_[1]))},d.getView=function(){var _=this.map,f=_.getCenter(),S={lon:f.lng,lat:f.lat},w=_.getCanvas(),E=parseInt(w.style.width),O=parseInt(w.style.height);return{center:S,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,O]).toArray(),_.unproject([0,O]).toArray()]}}},d.getViewEdits=function(_){for(var f=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var O=S[E];w[f+"."+O]=_[O]}return w},d.getViewEditsWithDerived=function(_){var f=this.id,S=this.getViewEdits(_);return S[f+"._derived"]=_._derived,S},ee.exports=x},66741:function(ee){ee.exports=function(z){var e=z.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(ee,z,e){var M=e(33428),k=e(94336).m_,o=e(57624).SO,T=e(38248),b=e(83160),h=e(24040),s=e(73060),t=e(31780),a=e(3400),n=e(76308),r=e(39032).BADNUM,i=e(79811),l=e(1936).clearOutline,u=e(55308),p=e(85656),c=e(16672),x=e(84888)._M,d=a.relinkPrivateKeys,g=a._,v=ee.exports={};a.extendFlat(v,h),v.attributes=e(45464),v.attributes.type.values=v.allTypes,v.fontAttrs=e(25376),v.layoutAttributes=e(64859);var y=v.transformsRegistry,m=e(62460);v.executeAPICommand=m.executeAPICommand,v.computeAPICommandBindings=m.computeAPICommandBindings,v.manageCommandObserver=m.manageCommandObserver,v.hasSimpleAPICommandBindings=m.hasSimpleAPICommandBindings,v.redrawText=function(F){return F=a.getGraphDiv(F),new Promise(function(V){setTimeout(function(){F._fullLayout&&(h.getComponentMethod("annotations","draw")(F),h.getComponentMethod("legend","draw")(F),h.getComponentMethod("colorbar","draw")(F),V(v.previousPromises(F)))},300)})},v.resize=function(F){var V;F=a.getGraphDiv(F);var U=new Promise(function(te,J){F&&!a.isHidden(F)||J(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(V=F._resolveResize),F._resolveResize=te,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||a.isHidden(F))te(F);else{delete F.layout.width,delete F.layout.height;var X=F.changed;F.autoplay=!0,h.call("relayout",F,{autosize:!0}).then(function(){F.changed=X,F._resolveResize===te&&(delete F._resolveResize,te(F))})}},100)});return V&&V(U),U},v.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},v.addLinks=function(F){if(F._context.showLink||F._context.showSources){var V=F._fullLayout,U=a.ensureSingle(V._paper,"text","js-plot-link-container",function(Z){Z.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var re=M.select(this);re.append("tspan").classed("js-link-to-tool",!0),re.append("tspan").classed("js-link-spacer",!0),re.append("tspan").classed("js-sourcelinks",!0)})}),te=U.node(),J={y:V._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=V.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=V._paper.attr("width")-7),U.attr(J);var X=U.select(".js-link-to-tool"),K=U.select(".js-link-spacer"),Q=U.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(Z,re){re.text("");var oe=re.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Z._context.linkText+" ");if(Z._context.sendData)oe.on("click",function(){v.sendDataToCloud(Z)});else{var ae=window.location.pathname.split("/"),ce=window.location.search;oe.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ae[2].split(".")[0]+"/"+ae[1]+ce})}}(F,X),K.text(X.text()&&Q.text()?" - ":"")}},v.sendDataToCloud=function(F){var V=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(V){F.emit("plotly_beforeexport");var U=M.select(F).append("div").attr("id","hiddenform").style("display","none"),te=U.append("form").attr({action:V+"/external",method:"post",target:"_blank"});return te.append("input").attr({type:"text",name:"data"}).node().value=v.graphJson(F,!1,"keepdata"),te.node().submit(),U.remove(),F.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],f=["year","month","dayMonth","dayMonthYear"];function S(F,V){var U=F._context.locale;U||(U="en-US");var te=!1,J={};function X(ae){for(var ce=!0,he=0;he<V.length;he++){var pe=V[he];J[pe]||(ae[pe]?J[pe]=ae[pe]:ce=!1)}ce&&(te=!0)}for(var K=0;K<2;K++){for(var Q=F._context.locales,Z=0;Z<2;Z++){var re=(Q[U]||{}).format;if(re&&(X(re),te))break;Q=h.localeRegistry}var oe=U.split("-")[0];if(te||oe===U)break;U=oe}return te||X(h.localeRegistry.en.format),J}function w(F,V){var U={_fullLayout:V},te=F._id.charAt(0)==="x",J=F._mainAxis._anchorAxis,X="",K="",Q="";if(J&&(Q=J._mainAxis._id,X=te?F._id+Q:Q+F._id),!X||!V._plots[X]){X="";for(var Z=F._counterAxes,re=0;re<Z.length;re++){var oe=Z[re],ae=te?F._id+oe:oe+F._id;K||(K=ae);var ce=i.getFromId(U,oe);if(Q&&ce.overlaying===Q){X=ae;break}}}return X||K}function E(F){var V=F.transforms;if(Array.isArray(V)&&V.length)for(var U=0;U<V.length;U++){var te=V[U],J=te._module||y[te.type];if(J&&J.makesData)return!0}return!1}function O(F,V,U,te){for(var J=F.transforms,X=[F],K=0;K<J.length;K++){var Q=J[K],Z=y[Q.type];Z&&Z.transform&&(X=Z.transform(X,{transform:Q,fullTrace:F,fullData:V,layout:U,fullLayout:te,transformIndex:K}))}return X}function C(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function P(F){var V=F.margin;if(!F._size){var U=F._size={l:Math.round(V.l),r:Math.round(V.r),t:Math.round(V.t),b:Math.round(V.b),p:Math.round(V.pad)};U.w=Math.round(F.width)-U.l-U.r,U.h=Math.round(F.height)-U.t-U.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={}),F._reservedMargin||(F._reservedMargin={})}v.supplyDefaults=function(F,V){var U=V&&V.skipUpdateCalc,te=F._fullLayout||{};if(te._skipDefaults)delete te._skipDefaults;else{var J,X=F._fullLayout={},K=F.layout||{},Q=F._fullData||[],Z=F._fullData=[],re=F.data||[],oe=F.calcdata||[],ae=F._context||{};F._transitionData||v.createTransitionData(F),X._dfltTitle={plot:g(F,"Click to enter Plot title"),x:g(F,"Click to enter X axis title"),y:g(F,"Click to enter Y axis title"),colorbar:g(F,"Click to enter Colorscale title"),annotation:g(F,"new text")},X._traceWord=g(F,"trace");var ce=S(F,_);if(X._mapboxAccessToken=ae.mapboxAccessToken,te._initialAutoSizeIsDone){var he=te.width,pe=te.height;v.supplyLayoutGlobalDefaults(K,X,ce),K.width||(X.width=he),K.height||(X.height=pe),v.sanitizeMargins(X)}else{v.supplyLayoutGlobalDefaults(K,X,ce);var xe=!K.width||!K.height,be=X.autosize,ve=ae.autosizable;xe&&(be||ve)?v.plotAutoSize(F,K,X):xe&&v.sanitizeMargins(X),!be&&xe&&(K.width=X.width,K.height=X.height)}X._d3locale=function(Pe,Ne){return Pe.decimal=Ne.charAt(0),Pe.thousands=Ne.charAt(1),{numberFormat:function(Ve){try{Ve=o(Pe).format(a.adjustFormat(Ve))}catch{return a.warnBadFormat(Ve),a.noFormat}return Ve},timeFormat:k(Pe).utcFormat}}(ce,X.separators),X._extraFormat=S(F,f),X._initialAutoSizeIsDone=!0,X._dataLength=re.length,X._modules=[],X._visibleModules=[],X._basePlotModules=[];var ge=X._subplots=function(){var Pe,Ne,Ve=h.collectableSubplotTypes,Ye={};if(!Ve){Ve=[];var at=h.subplotsRegistry;for(var rt in at){var dt=at[rt].attr;if(dt&&(Ve.push(rt),Array.isArray(dt)))for(Ne=0;Ne<dt.length;Ne++)a.pushUnique(Ve,dt[Ne])}}for(Pe=0;Pe<Ve.length;Pe++)Ye[Ve[Pe]]=[];return Ye}(),we=X._splomAxes={x:{},y:{}},_e=X._splomSubplots={};X._splomGridDflt={},X._scatterStackOpts={},X._firstScatter={},X._alignmentOpts={},X._colorAxes={},X._requestRangeslider={},X._traceUids=function(Pe,Ne){var Ve,Ye,at=Ne.length,rt=[];for(Ve=0;Ve<Pe.length;Ve++){var dt=Pe[Ve]._fullInput;dt!==Ye&&rt.push(dt),Ye=dt}var vt=rt.length,ht=new Array(at),et={};function $e(Ot,At){ht[At]=Ot,et[Ot]=1}function wt(Ot,At){if(Ot&&typeof Ot=="string"&&!et[Ot])return $e(Ot,At),!0}for(Ve=0;Ve<at;Ve++){var Pt=Ne[Ve].uid;typeof Pt=="number"&&(Pt=String(Pt)),wt(Pt,Ve)||Ve<vt&&wt(rt[Ve].uid,Ve)||$e(a.randstr(et),Ve)}return ht}(Q,re),X._globalTransforms=(F._context||{}).globalTransforms,v.supplyDataDefaults(re,Z,K,X);var se=Object.keys(we.x),ie=Object.keys(we.y);if(se.length>1&&ie.length>1){for(h.getComponentMethod("grid","sizeDefaults")(K,X),J=0;J<se.length;J++)a.pushUnique(ge.xaxis,se[J]);for(J=0;J<ie.length;J++)a.pushUnique(ge.yaxis,ie[J]);for(var fe in _e)a.pushUnique(ge.cartesian,fe)}if(X._has=v._hasPlotType.bind(X),Q.length===Z.length)for(J=0;J<Z.length;J++)d(Z[J],Q[J]);v.supplyLayoutModuleDefaults(K,X,Z,F._transitionData);var Ee=X._visibleModules,Te=[];for(J=0;J<Ee.length;J++){var Ae=Ee[J].crossTraceDefaults;Ae&&a.pushUnique(Te,Ae)}for(J=0;J<Te.length;J++)Te[J](Z,X);X._hasOnlyLargeSploms=X._basePlotModules.length===1&&X._basePlotModules[0].name==="splom"&&se.length>15&&ie.length>15&&X.shapes.length===0&&X.images.length===0,v.linkSubplots(Z,X,Q,te),v.cleanPlot(Z,X,Q,te);var Se=!(!te._has||!te._has("gl2d")),Oe=!(!X._has||!X._has("gl2d")),De=!(!te._has||!te._has("cartesian"))||Se,de=!(!X._has||!X._has("cartesian"))||Oe;De&&!de?te._bgLayer.remove():de&&!De&&(X._shouldCreateBgLayer=!0),te._zoomlayer&&!F._dragging&&l({_fullLayout:te}),function(Pe,Ne){var Ve,Ye=[];Ne.meta&&(Ve=Ne._meta={meta:Ne.meta,layout:{meta:Ne.meta}});for(var at=0;at<Pe.length;at++){var rt=Pe[at];rt.meta?Ye[rt.index]=rt._meta={meta:rt.meta}:Ne.meta&&(rt._meta={meta:Ne.meta}),Ne.meta&&(rt._meta.layout={meta:Ne.meta})}Ye.length&&(Ve||(Ve=Ne._meta={}),Ve.data=Ye)}(Z,X),d(X,te),h.getComponentMethod("colorscale","crossTraceDefaults")(Z,X),X._preGUI||(X._preGUI={}),X._tracePreGUI||(X._tracePreGUI={});var me,Me=X._tracePreGUI,ze={};for(me in Me)ze[me]="old";for(J=0;J<Z.length;J++)ze[me=Z[J]._fullInput.uid]||(Me[me]={}),ze[me]="new";for(me in ze)ze[me]==="old"&&delete Me[me];P(X),h.getComponentMethod("rangeslider","makeData")(X),U||oe.length!==Z.length||v.supplyDefaultsUpdateCalc(oe,Z)}},v.supplyDefaultsUpdateCalc=function(F,V){for(var U=0;U<V.length;U++){var te=V[U],J=(F[U]||[])[0];if(J&&J.trace){var X=J.trace;if(X._hasCalcTransform){var K,Q,Z,re=X._arrayAttrs;for(K=0;K<re.length;K++)Q=re[K],Z=a.nestedProperty(X,Q).get().slice(),a.nestedProperty(te,Q).set(Z)}J.trace=te}}},v.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},v._hasPlotType=function(F){var V,U=this._basePlotModules||[];for(V=0;V<U.length;V++)if(U[V].name===F)return!0;var te=this._modules||[];for(V=0;V<te.length;V++){var J=te[V].name;if(J===F)return!0;var X=h.modules[J];if(X&&X.categories[F])return!0}return!1},v.cleanPlot=function(F,V,U,te){var J,X,K=te._basePlotModules||[];for(J=0;J<K.length;J++){var Q=K[J];Q.clean&&Q.clean(F,V,U,te)}var Z=te._has&&te._has("gl"),re=V._has&&V._has("gl");Z&&!re&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var oe=!!te._infolayer;e:for(J=0;J<U.length;J++){var ae=U[J].uid;for(X=0;X<F.length;X++)if(ae===F[X].uid)continue e;oe&&te._infolayer.select(".cb"+ae).remove()}},v.linkSubplots=function(F,V,U,te){var J,X,K=te._plots||{},Q=V._plots={},Z=V._subplots,re={_fullData:F,_fullLayout:V},oe=Z.cartesian.concat(Z.gl2d||[]);for(J=0;J<oe.length;J++){var ae,ce=oe[J],he=K[ce],pe=i.getFromId(re,ce,"x"),xe=i.getFromId(re,ce,"y");for(he?ae=Q[ce]=he:(ae=Q[ce]={}).id=ce,pe._counterAxes.push(xe._id),xe._counterAxes.push(pe._id),pe._subplotsWith.push(ce),xe._subplotsWith.push(ce),ae.xaxis=pe,ae.yaxis=xe,ae._hasClipOnAxisFalse=!1,X=0;X<F.length;X++){var be=F[X];if(be.xaxis===ae.xaxis._id&&be.yaxis===ae.yaxis._id&&be.cliponaxis===!1){ae._hasClipOnAxisFalse=!0;break}}}var ve,ge=i.list(re,null,!0);for(J=0;J<ge.length;J++){var we=null;(ve=ge[J]).overlaying&&(we=i.getFromId(re,ve.overlaying))&&we.overlaying&&(ve.overlaying=!1,we=null),ve._mainAxis=we||ve,we&&(ve.domain=we.domain.slice()),ve._anchorAxis=ve.anchor==="free"?null:i.getFromId(re,ve.anchor)}for(J=0;J<ge.length;J++)if((ve=ge[J])._counterAxes.sort(i.idSort),ve._subplotsWith.sort(a.subplotSort),ve._mainSubplot=w(ve,V),ve._counterAxes.length&&(ve.spikemode&&ve.spikemode.indexOf("across")!==-1||ve.automargin&&ve.mirror&&ve.anchor!=="free"||h.getComponentMethod("rangeslider","isVisible")(ve))){var _e=1,se=0;for(X=0;X<ve._counterAxes.length;X++){var ie=i.getFromId(re,ve._counterAxes[X]);_e=Math.min(_e,ie.domain[0]),se=Math.max(se,ie.domain[1])}_e<se&&(ve._counterDomainMin=_e,ve._counterDomainMax=se)}},v.clearExpandedTraceDefaultColors=function(F){var V,U,te;for(U=[],(V=F._module._colorAttrs)||(F._module._colorAttrs=V=[],s.crawl(F._module.attributes,function(J,X,K,Q){U[Q]=X,U.length=Q+1,J.valType==="color"&&J.dflt===void 0&&V.push(U.join("."))})),te=0;te<V.length;te++)a.nestedProperty(F,"_input."+V[te]).get()||a.nestedProperty(F,V[te]).set(null)},v.supplyDataDefaults=function(F,V,U,te){var J,X,K,Q=te._modules,Z=te._visibleModules,re=te._basePlotModules,oe=0,ae=0;function ce(fe){V.push(fe);var Ee=fe._module;Ee&&(a.pushUnique(Q,Ee),fe.visible===!0&&a.pushUnique(Z,Ee),a.pushUnique(re,fe._module.basePlotModule),oe++,fe._input.visible!==!1&&ae++)}te._transformModules=[];var he={},pe=[],xe=(U.template||{}).data||{},be=t.traceTemplater(xe);for(J=0;J<F.length;J++){if(K=F[J],(X=be.newTrace(K)).uid=te._traceUids[J],v.supplyTraceDefaults(K,X,ae,te,J),X.index=J,X._input=K,X._expandedIndex=oe,X.transforms&&X.transforms.length)for(var ve=K.visible!==!1&&X.visible===!1,ge=O(X,V,U,te),we=0;we<ge.length;we++){var _e=ge[we],se={_template:X._template,type:X.type,uid:X.uid+we};ve&&_e.visible===!1&&delete _e.visible,v.supplyTraceDefaults(_e,se,oe,te,J),d(se,_e),se.index=J,se._input=K,se._fullInput=X,se._expandedIndex=oe,se._expandedInput=_e,ce(se)}else X._fullInput=X,X._expandedInput=X,ce(X);h.traceIs(X,"carpetAxis")&&(he[X.carpet]=X),h.traceIs(X,"carpetDependent")&&pe.push(J)}for(J=0;J<pe.length;J++)if((X=V[pe[J]]).visible){var ie=he[X.carpet];X._carpet=ie,ie&&ie.visible?(X.xaxis=ie.xaxis,X.yaxis=ie.yaxis):X.visible=!1}},v.supplyAnimationDefaults=function(F){var V;F=F||{};var U={};function te(J,X){return a.coerce(F||{},U,p,J,X)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(F.frame))for(U.frame=[],V=0;V<F.frame.length;V++)U.frame[V]=v.supplyAnimationFrameDefaults(F.frame[V]||{});else U.frame=v.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(U.transition=[],V=0;V<F.transition.length;V++)U.transition[V]=v.supplyAnimationTransitionDefaults(F.transition[V]||{});else U.transition=v.supplyAnimationTransitionDefaults(F.transition||{});return U},v.supplyAnimationFrameDefaults=function(F){var V={};function U(te,J){return a.coerce(F||{},V,p.frame,te,J)}return U("duration"),U("redraw"),V},v.supplyAnimationTransitionDefaults=function(F){var V={};function U(te,J){return a.coerce(F||{},V,p.transition,te,J)}return U("duration"),U("easing"),V},v.supplyFrameDefaults=function(F){var V={};function U(te,J){return a.coerce(F,V,c,te,J)}return U("group"),U("name"),U("traces"),U("baseframe"),U("data"),U("layout"),V},v.supplyTraceDefaults=function(F,V,U,te,J){var X,K=te.colorway||n.defaults,Q=K[U%K.length];function Z(we,_e){return a.coerce(F,V,v.attributes,we,_e)}var re=Z("visible");Z("type"),Z("name",te._traceWord+" "+J),Z("uirevision",te.uirevision);var oe=v.getModule(V);if(V._module=oe,oe){var ae=oe.basePlotModule,ce=ae.attr,he=ae.attributes;if(ce&&he){var pe=te._subplots,xe="";if(re||ae.name!=="gl2d"){if(Array.isArray(ce))for(X=0;X<ce.length;X++){var be=ce[X],ve=a.coerce(F,V,he,be);pe[be]&&a.pushUnique(pe[be],ve),xe+=ve}else xe=a.coerce(F,V,he,ce);pe[ae.name]&&a.pushUnique(pe[ae.name],xe)}}}if(re){if(Z("customdata"),Z("ids"),Z("meta"),h.traceIs(V,"showLegend")?(a.coerce(F,V,oe.attributes.showlegend?oe.attributes:v.attributes,"showlegend"),Z("legend"),Z("legendwidth"),Z("legendgroup"),Z("legendgrouptitle.text"),Z("legendrank"),V._dfltShowLegend=!0):V._dfltShowLegend=!1,oe&&oe.supplyDefaults(F,V,Q,te),h.traceIs(V,"noOpacity")||Z("opacity"),h.traceIs(V,"notLegendIsolatable")&&(V.visible=!!V.visible),h.traceIs(V,"noHover")||(V.hovertemplate||a.coerceHoverinfo(F,V,te),V.type!=="parcats"&&h.getComponentMethod("fx","supplyDefaults")(F,V,Q,te)),oe&&oe.selectPoints){var ge=Z("selectedpoints");a.isTypedArray(ge)&&(V.selectedpoints=Array.from(ge))}v.supplyTransformDefaults(F,V,te)}return V},v.hasMakesDataTransform=E,v.supplyTransformDefaults=function(F,V,U){if(V._length||E(F)){var te=U._globalTransforms||[],J=U._transformModules||[];if(Array.isArray(F.transforms)||te.length!==0)for(var X=F.transforms||[],K=te.concat(X),Q=V.transforms=[],Z=0;Z<K.length;Z++){var re,oe=K[Z],ae=oe.type,ce=y[ae],he=!(oe._module&&oe._module===ce),pe=ce&&typeof ce.transform=="function";ce||a.warn("Unrecognized transform type "+ae+"."),ce&&ce.supplyDefaults&&(he||pe)?((re=ce.supplyDefaults(oe,V,U,F)).type=ae,re._module=ce,a.pushUnique(J,ce)):re=a.extendFlat({},oe),Q.push(re)}}},v.supplyLayoutGlobalDefaults=function(F,V,U){function te(oe,ae){return a.coerce(F,V,v.layoutAttributes,oe,ae)}var J=F.template;a.isPlainObject(J)&&(V.template=J,V._template=J.layout,V._dataTemplate=J.data),te("autotypenumbers");var X=a.coerceFont(te,"font"),K=X.size;a.coerceFont(te,"title.font",a.extendFlat({},X,{size:Math.round(1.4*K)})),te("title.text",V._dfltTitle.plot),te("title.xref");var Q=te("title.yref");te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var Z=te("title.automargin");te("title.x"),te("title.xanchor"),te("title.y"),te("title.yanchor"),Z&&(Q==="paper"&&(V.title.y!==0&&(V.title.y=1),V.title.yanchor==="auto"&&(V.title.yanchor=V.title.y===0?"top":"bottom")),Q==="container"&&(V.title.y==="auto"&&(V.title.y=1),V.title.yanchor==="auto"&&(V.title.yanchor=V.title.y<.5?"bottom":"top"))),te("uniformtext.mode")&&te("uniformtext.minsize"),te("autosize",!(F.width&&F.height)),te("width"),te("height"),te("minreducedwidth"),te("minreducedheight"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),F.width&&F.height&&v.sanitizeMargins(V),h.getComponentMethod("grid","sizeDefaults")(F,V),te("paper_bgcolor"),te("separators",U.decimal+U.thousands),te("hidesources"),te("colorway"),te("datarevision");var re=te("uirevision");te("editrevision",re),te("selectionrevision",re),h.getComponentMethod("modebar","supplyLayoutDefaults")(F,V),h.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,V,te),h.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,V,te),te("meta"),a.isPlainObject(F.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),h.getComponentMethod("calendars","handleDefaults")(F,V,"calendar"),h.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,V,te),a.coerce(F,V,u,"scattermode")},v.plotAutoSize=function(F,V,U){var te,J,X=F._context||{},K=X.frameMargins,Q=a.isPlotDiv(F);if(Q&&F.emit("plotly_autosize"),X.fillFrame)te=window.innerWidth,J=window.innerHeight,document.body.style.overflow="hidden";else{var Z=Q?window.getComputedStyle(F):{};if(te=C(Z.width)||C(Z.maxWidth)||U.width,J=C(Z.height)||C(Z.maxHeight)||U.height,T(K)&&K>0){var re=1-2*K;te=Math.round(re*te),J=Math.round(re*J)}}var oe=v.layoutAttributes.width.min,ae=v.layoutAttributes.height.min;te<oe&&(te=oe),J<ae&&(J=ae);var ce=!V.width&&Math.abs(U.width-te)>1,he=!V.height&&Math.abs(U.height-J)>1;(he||ce)&&(ce&&(U.width=te),he&&(U.height=J)),F._initialAutoSize||(F._initialAutoSize={width:te,height:J}),v.sanitizeMargins(U)},v.supplyLayoutModuleDefaults=function(F,V,U,te){var J,X,K,Q=h.componentsRegistry,Z=V._basePlotModules,re=h.subplotsRegistry.cartesian;for(J in Q)(K=Q[J]).includeBasePlot&&K.includeBasePlot(F,V);for(var oe in Z.length||Z.push(re),V._has("cartesian")&&(h.getComponentMethod("grid","contentDefaults")(F,V),re.finalizeSubplots(F,V)),V._subplots)V._subplots[oe].sort(a.subplotSort);for(X=0;X<Z.length;X++)(K=Z[X]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,V,U);var ae=V._modules;for(X=0;X<ae.length;X++)(K=ae[X]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,V,U);var ce=V._transformModules;for(X=0;X<ce.length;X++)(K=ce[X]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,V,U,te);for(J in Q)(K=Q[J]).supplyLayoutDefaults&&K.supplyLayoutDefaults(F,V,U)},v.purge=function(F){var V=F._fullLayout||{};V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.remove(),V._glcanvas=null),V._modeBar&&V._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},v.style=function(F){var V,U=F._fullLayout._visibleModules,te=[];for(V=0;V<U.length;V++){var J=U[V];J.style&&a.pushUnique(te,J.style)}for(V=0;V<te.length;V++)te[V](F)},v.sanitizeMargins=function(F){if(F&&F.margin){var V,U=F.width,te=F.height,J=F.margin,X=U-(J.l+J.r),K=te-(J.t+J.b);X<0&&(V=(U-1)/(J.l+J.r),J.l=Math.floor(V*J.l),J.r=Math.floor(V*J.r)),K<0&&(V=(te-1)/(J.t+J.b),J.t=Math.floor(V*J.t),J.b=Math.floor(V*J.b))}},v.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},v.allowAutoMargin=function(F,V){F._fullLayout._pushmarginIds[V]=1},v.autoMargin=function(F,V,U){var te=F._fullLayout,J=te.width,X=te.height,K=te.margin,Q=te.minreducedwidth,Z=te.minreducedheight,re=a.constrain(J-K.l-K.r,2,Q),oe=a.constrain(X-K.t-K.b,2,Z),ae=Math.max(0,J-re),ce=Math.max(0,X-oe),he=te._pushmargin,pe=te._pushmarginIds;if(K.autoexpand!==!1){if(U){var xe=U.pad;if(xe===void 0&&(xe=Math.min(12,K.l,K.r,K.t,K.b)),ae){var be=(U.l+U.r)/ae;be>1&&(U.l/=be,U.r/=be)}if(ce){var ve=(U.t+U.b)/ce;ve>1&&(U.t/=ve,U.b/=ve)}var ge=U.xl!==void 0?U.xl:U.x,we=U.xr!==void 0?U.xr:U.x,_e=U.yt!==void 0?U.yt:U.y,se=U.yb!==void 0?U.yb:U.y;he[V]={l:{val:ge,size:U.l+xe},r:{val:we,size:U.r+xe},b:{val:se,size:U.b+xe},t:{val:_e,size:U.t+xe}},pe[V]=1}else delete he[V],delete pe[V];if(!te._replotting)return v.doAutoMargin(F)}},v.doAutoMargin=function(F){var V=F._fullLayout,U=V.width,te=V.height;V._size||(V._size={}),P(V);var J=V._size,X=V.margin,K={t:0,b:0,l:0,r:0},Q=a.extendFlat({},J),Z=X.l,re=X.r,oe=X.t,ae=X.b,ce=V._pushmargin,he=V._pushmarginIds,pe=V.minreducedwidth,xe=V.minreducedheight;if(X.autoexpand!==!1){for(var be in ce)he[be]||delete ce[be];var ve=F._fullLayout._reservedMargin;for(var ge in ve)for(var we in ve[ge]){var _e=ve[ge][we];K[we]=Math.max(K[we],_e)}for(var se in ce.base={l:{val:0,size:Z},r:{val:1,size:re},t:{val:1,size:oe},b:{val:0,size:ae}},K){var ie=0;for(var fe in ce)fe!=="base"&&T(ce[fe][se].size)&&(ie=ce[fe][se].size>ie?ce[fe][se].size:ie);var Ee=Math.max(0,X[se]-ie);K[se]=Math.max(0,K[se]-Ee)}for(var Te in ce){var Ae=ce[Te].l||{},Se=ce[Te].b||{},Oe=Ae.val,De=Ae.size,de=Se.val,me=Se.size,Me=U-K.r-K.l,ze=te-K.t-K.b;for(var Pe in ce){if(T(De)&&ce[Pe].r){var Ne=ce[Pe].r.val,Ve=ce[Pe].r.size;if(Ne>Oe){var Ye=(De*Ne+(Ve-Me)*Oe)/(Ne-Oe),at=(Ve*(1-Oe)+(De-Me)*(1-Ne))/(Ne-Oe);Ye+at>Z+re&&(Z=Ye,re=at)}}if(T(me)&&ce[Pe].t){var rt=ce[Pe].t.val,dt=ce[Pe].t.size;if(rt>de){var vt=(me*rt+(dt-ze)*de)/(rt-de),ht=(dt*(1-de)+(me-ze)*(1-rt))/(rt-de);vt+ht>ae+oe&&(ae=vt,oe=ht)}}}}}var et=a.constrain(U-X.l-X.r,2,pe),$e=a.constrain(te-X.t-X.b,2,xe),wt=Math.max(0,U-et),Pt=Math.max(0,te-$e);if(wt){var Ot=(Z+re)/wt;Ot>1&&(Z/=Ot,re/=Ot)}if(Pt){var At=(ae+oe)/Pt;At>1&&(ae/=At,oe/=At)}if(J.l=Math.round(Z)+K.l,J.r=Math.round(re)+K.r,J.t=Math.round(oe)+K.t,J.b=Math.round(ae)+K.b,J.p=Math.round(X.pad),J.w=Math.round(U)-J.l-J.r,J.h=Math.round(te)-J.t-J.b,!V._replotting&&(v.didMarginChange(Q,J)||function(Ze){if("_redrawFromAutoMarginCount"in Ze._fullLayout)return!1;var Be=i.list(Ze,"",!0);for(var Ge in Be)if(Be[Ge].autoshift||Be[Ge].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in V?V._redrawFromAutoMarginCount++:V._redrawFromAutoMarginCount=1;var He=3*(1+Object.keys(he).length);if(V._redrawFromAutoMarginCount<He)return h.call("_doPlot",F);V._size=Q,a.warn("Too many auto-margin redraws.")}(function(Ze){var Be=i.list(Ze,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ge){for(var it=0;it<Be.length;it++){var tt=Be[it][Ge];tt&&tt()}})})(F)};var R=["l","r","t","b","p","w","h"];function j(F,V,U){var te=!1,J=[v.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(K){var Q=Promise.resolve();if(!K)return Q;for(;K.length;)Q=Q.then(K.shift());return Q}(F._transitionData._interruptCallbacks)},U.prepareFn,v.rehover,v.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(K){F._transitioning=!0,V.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){te=!0}),U.redraw&&F._transitionData._interruptCallbacks.push(function(){return h.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var Q=0,Z=0;function re(){return Q++,function(){var oe;Z++,te||Z!==Q||(oe=K,F._transitionData&&(function(ae){if(ae)for(;ae.length;)ae.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(U.redraw)return h.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(oe)))}}U.runFn(re),setTimeout(re())})}],X=a.syncOrAsync(J,F);return X&&X.then||(X=Promise.resolve()),X.then(function(){return F})}v.didMarginChange=function(F,V){for(var U=0;U<R.length;U++){var te=R[U],J=F[te],X=V[te];if(!T(J)||Math.abs(X-J)>1)return!0}return!1},v.graphJson=function(F,V,U,te,J,X){(J&&V&&!F._fullData||J&&!V&&!F._fullLayout)&&v.supplyDefaults(F);var K=J?F._fullData:F.data,Q=J?F._fullLayout:F.layout,Z=(F._transitionData||{})._frames;function re(ce,he){if(typeof ce=="function")return he?"_function_":null;if(a.isPlainObject(ce)){var pe,xe={};return Object.keys(ce).sort().forEach(function(we){if(["_","["].indexOf(we.charAt(0))===-1)if(typeof ce[we]!="function"){if(U==="keepdata"){if(we.substr(we.length-3)==="src")return}else if(U==="keepstream"){if(typeof(pe=ce[we+"src"])=="string"&&pe.indexOf(":")>0&&!a.isPlainObject(ce.stream))return}else if(U!=="keepall"&&typeof(pe=ce[we+"src"])=="string"&&pe.indexOf(":")>0)return;xe[we]=re(ce[we],he)}else he&&(xe[we]="_function")}),xe}var be=Array.isArray(ce),ve=a.isTypedArray(ce);if((be||ve)&&ce.dtype&&ce.shape){var ge=ce.bdata;return re({dtype:ce.dtype,shape:ce.shape,bdata:a.isArrayBuffer(ge)?b.encode(ge):ge},he)}return be?ce.map(function(we){return re(we,he)}):ve?a.simpleMap(ce,a.identity):a.isJSDate(ce)?a.ms2DateTimeLocal(+ce):ce}var oe={data:(K||[]).map(function(ce){var he=re(ce);return V&&delete he.fit,he})};if(!V&&(oe.layout=re(Q),J)){var ae=Q._size;oe.layout.computed={margin:{b:ae.b,l:ae.l,r:ae.r,t:ae.t}}}return Z&&(oe.frames=re(Z)),X&&(oe.config=re(F._context,!0)),te==="object"?oe:JSON.stringify(oe)},v.modifyFrames=function(F,V){var U,te,J,X=F._transitionData._frames,K=F._transitionData._frameHash;for(U=0;U<V.length;U++)switch((te=V[U]).type){case"replace":J=te.value;var Q=(X[te.index]||{}).name,Z=J.name;X[te.index]=K[Z]=J,Z!==Q&&(delete K[Q],K[Z]=J);break;case"insert":K[(J=te.value).name]=J,X.splice(te.index,0,J);break;case"delete":delete K[(J=X[te.index]).name],X.splice(te.index,1)}return Promise.resolve()},v.computeFrame=function(F,V){var U,te,J,X,K=F._transitionData._frameHash;if(!V)throw new Error("computeFrame must be given a string frame name");var Q=K[V.toString()];if(!Q)return!1;for(var Z=[Q],re=[Q.name];Q.baseframe&&(Q=K[Q.baseframe.toString()])&&re.indexOf(Q.name)===-1;)Z.push(Q),re.push(Q.name);for(var oe={};Q=Z.pop();)if(Q.layout&&(oe.layout=v.extendLayout(oe.layout,Q.layout)),Q.data){if(oe.data||(oe.data=[]),!(te=Q.traces))for(te=[],U=0;U<Q.data.length;U++)te[U]=U;for(oe.traces||(oe.traces=[]),U=0;U<Q.data.length;U++)(J=te[U])!=null&&((X=oe.traces.indexOf(J))===-1&&(X=oe.data.length,oe.traces[X]=J),oe.data[X]=v.extendTrace(oe.data[X],Q.data[U]))}return oe},v.recomputeFrameHash=function(F){for(var V=F._transitionData._frameHash={},U=F._transitionData._frames,te=0;te<U.length;te++){var J=U[te];J&&J.name&&(V[J.name]=J)}},v.extendObjectWithContainers=function(F,V,U){var te,J,X,K,Q,Z,re,oe=a.extendDeepNoArrays({},V||{}),ae=a.expandObjectPaths(oe),ce={};if(U&&U.length)for(X=0;X<U.length;X++)(J=(te=a.nestedProperty(ae,U[X])).get())===void 0?a.nestedProperty(ce,U[X]).set(null):(te.set(null),a.nestedProperty(ce,U[X]).set(J));if(F=a.extendDeepNoArrays(F||{},ae),U&&U.length){for(X=0;X<U.length;X++)if(Z=a.nestedProperty(ce,U[X]).get()){for(re=(Q=a.nestedProperty(F,U[X])).get(),Array.isArray(re)||(re=[],Q.set(re)),K=0;K<Z.length;K++){var he=Z[K];re[K]=he===null?null:v.extendObjectWithContainers(re[K],he)}Q.set(re)}}return F},v.dataArrayContainers=["transforms","dimensions"],v.layoutArrayContainers=h.layoutArrayContainers,v.extendTrace=function(F,V){return v.extendObjectWithContainers(F,V,v.dataArrayContainers)},v.extendLayout=function(F,V){return v.extendObjectWithContainers(F,V,v.layoutArrayContainers)},v.transition=function(F,V,U,te,J,X){var K={redraw:J.redraw},Q={},Z=[];return K.prepareFn=function(){for(var re=Array.isArray(V)?V.length:0,oe=te.slice(0,re),ae=0;ae<oe.length;ae++){var ce=oe[ae],he=F._fullData[ce]._module;if(he){if(he.animatable){var pe=he.basePlotModule.name;Q[pe]||(Q[pe]=[]),Q[pe].push(ce)}F.data[oe[ae]]=v.extendTrace(F.data[oe[ae]],V[ae])}}var xe=a.expandObjectPaths(a.extendDeepNoArrays({},U)),be=/^[xy]axis[0-9]*$/;for(var ve in xe)be.test(ve)&&delete xe[ve].range;v.extendLayout(F.layout,xe),delete F.calcdata,v.supplyDefaults(F),v.doCalcdata(F);var ge=a.expandObjectPaths(U);if(ge){var we=F._fullLayout._plots;for(var _e in we){var se=we[_e],ie=se.xaxis,fe=se.yaxis,Ee=ie.range.slice(),Te=fe.range.slice(),Ae=null,Se=null,Oe=null,De=null;Array.isArray(ge[ie._name+".range"])?Ae=ge[ie._name+".range"].slice():Array.isArray((ge[ie._name]||{}).range)&&(Ae=ge[ie._name].range.slice()),Array.isArray(ge[fe._name+".range"])?Se=ge[fe._name+".range"].slice():Array.isArray((ge[fe._name]||{}).range)&&(Se=ge[fe._name].range.slice()),Ee&&Ae&&(ie.r2l(Ee[0])!==ie.r2l(Ae[0])||ie.r2l(Ee[1])!==ie.r2l(Ae[1]))&&(Oe={xr0:Ee,xr1:Ae}),Te&&Se&&(fe.r2l(Te[0])!==fe.r2l(Se[0])||fe.r2l(Te[1])!==fe.r2l(Se[1]))&&(De={yr0:Te,yr1:Se}),(Oe||De)&&Z.push(a.extendFlat({plotinfo:se},Oe,De))}}return Promise.resolve()},K.runFn=function(re){var oe,ae,ce=F._fullLayout._basePlotModules,he=Z.length;if(U)for(ae=0;ae<ce.length;ae++)ce[ae].transitionAxes&&ce[ae].transitionAxes(F,Z,X,re);for(var pe in he?((oe=a.extendFlat({},X)).duration=0,delete Q.cartesian):oe=X,Q){var xe=Q[pe];F._fullData[xe[0]]._module.basePlotModule.plot(F,xe,oe,re)}},j(F,X,K)},v.transitionFromReact=function(F,V,U,te){var J=F._fullLayout,X=J.transition,K={},Q=[];return K.prepareFn=function(){var Z=J._plots;for(var re in K.redraw=!1,V.anim==="some"&&(K.redraw=!0),U.anim==="some"&&(K.redraw=!0),Z){var oe=Z[re],ae=oe.xaxis,ce=oe.yaxis,he=te[ae._name].range.slice(),pe=te[ce._name].range.slice(),xe=ae.range.slice(),be=ce.range.slice();ae.setScale(),ce.setScale();var ve=null,ge=null;ae.r2l(he[0])===ae.r2l(xe[0])&&ae.r2l(he[1])===ae.r2l(xe[1])||(ve={xr0:he,xr1:xe}),ce.r2l(pe[0])===ce.r2l(be[0])&&ce.r2l(pe[1])===ce.r2l(be[1])||(ge={yr0:pe,yr1:be}),(ve||ge)&&Q.push(a.extendFlat({plotinfo:oe},ve,ge))}return Promise.resolve()},K.runFn=function(Z){for(var re,oe,ae,ce=F._fullData,he=F._fullLayout._basePlotModules,pe=[],xe=0;xe<ce.length;xe++)pe.push(xe);function be(){if(F._fullLayout)for(var ge=0;ge<he.length;ge++)he[ge].transitionAxes&&he[ge].transitionAxes(F,Q,re,Z)}function ve(){if(F._fullLayout)for(var ge=0;ge<he.length;ge++)he[ge].plot(F,ae,oe,Z)}Q.length&&V.anim?X.ordering==="traces first"?(re=a.extendFlat({},X,{duration:0}),ae=pe,oe=X,setTimeout(be,X.duration),ve()):(re=X,ae=null,oe=a.extendFlat({},X,{duration:0}),setTimeout(ve,re.duration),be()):Q.length?(re=X,be()):V.anim&&(ae=pe,oe=X,ve())},j(F,X,K)},v.doCalcdata=function(F,V){var U,te,J,X,K=i.list(F),Q=F._fullData,Z=F._fullLayout,re=new Array(Q.length),oe=(F.calcdata||[]).slice();for(F.calcdata=re,Z._numBoxes=0,Z._numViolins=0,Z._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,Z._piecolormap={},Z._sunburstcolormap={},Z._treemapcolormap={},Z._iciclecolormap={},Z._funnelareacolormap={},J=0;J<Q.length;J++)Array.isArray(V)&&V.indexOf(J)===-1&&(re[J]=oe[J]);for(J=0;J<Q.length;J++)(U=Q[J])._arrayAttrs=s.findArrayAttributes(U),U._extremes={};var ae=Z._subplots.polar||[];for(J=0;J<ae.length;J++)K.push(Z[ae[J]].radialaxis,Z[ae[J]].angularaxis);for(var ce in Z._colorAxes){var he=Z[ce];he.cauto!==!1&&(delete he.cmin,delete he.cmax)}var pe=!1;function xe(ge){if(U=Q[ge],te=U._module,U.visible===!0&&U.transforms){if(te&&te.calc){var we=te.calc(F,U);we[0]&&we[0].t&&we[0].t._scene&&delete we[0].t._scene.dirty}for(X=0;X<U.transforms.length;X++){var _e=U.transforms[X];(te=y[_e.type])&&te.calcTransform&&(U._hasCalcTransform=!0,pe=!0,te.calcTransform(F,U,_e))}}}function be(ge,we){if(U=Q[ge],!!(te=U._module).isContainer===we){var _e=[];if(U.visible===!0&&U._length!==0){delete U._indexToPoints;var se=U.transforms||[];for(X=se.length-1;X>=0;X--)if(se[X].enabled){U._indexToPoints=se[X]._indexToPoints;break}te&&te.calc&&(_e=te.calc(F,U))}Array.isArray(_e)&&_e[0]||(_e=[{x:r,y:r}]),_e[0].t||(_e[0].t={}),_e[0].trace=U,re[ge]=_e}}for(N(K,Q,Z),J=0;J<Q.length;J++)be(J,!0);for(J=0;J<Q.length;J++)xe(J);for(pe&&N(K,Q,Z),J=0;J<Q.length;J++)be(J,!0);for(J=0;J<Q.length;J++)be(J,!1);W(F);var ve=function(ge,we){var _e,se,ie,fe,Ee,Te=[];function Ae(Ge,it,tt){var Re=it._id.charAt(0);if(Ge==="histogram2dcontour"){var Fe=it._counterAxes[0],nt=i.getFromId(we,Fe),We=Re==="x"||Fe==="x"&&nt.type==="category",ct=Re==="y"||Fe==="y"&&nt.type==="category";return function(pt,gt){return pt===0||gt===0||We&&pt===tt[gt].length-1||ct&&gt===tt.length-1?-1:(Re==="y"?gt:pt)-1}}return function(pt,gt){return Re==="y"?gt:pt}}var Se={min:function(Ge){return a.aggNums(Math.min,null,Ge)},max:function(Ge){return a.aggNums(Math.max,null,Ge)},sum:function(Ge){return a.aggNums(function(it,tt){return it+tt},null,Ge)},total:function(Ge){return a.aggNums(function(it,tt){return it+tt},null,Ge)},mean:function(Ge){return a.mean(Ge)},median:function(Ge){return a.median(Ge)}};function Oe(Ge,it){return Ge[1]-it[1]}function De(Ge,it){return it[1]-Ge[1]}for(_e=0;_e<ge.length;_e++){var de=ge[_e];if(de.type==="category"){var me=de.categoryorder.match(D);if(me){var Me=me[1],ze=me[2],Pe=de._id.charAt(0),Ne=Pe==="x",Ve=[];for(se=0;se<de._categories.length;se++)Ve.push([de._categories[se],[]]);for(se=0;se<de._traceIndices.length;se++){var Ye=de._traceIndices[se],at=we._fullData[Ye];if(at.visible===!0){var rt=at.type;h.traceIs(at,"histogram")&&(delete at._xautoBinFinished,delete at._yautoBinFinished);var dt=rt==="splom",vt=rt==="scattergl",ht=we.calcdata[Ye];for(ie=0;ie<ht.length;ie++){var et,$e,wt=ht[ie];if(dt){var Pt=at._axesDim[de._id];if(!Ne){var Ot=at._diag[Pt][0];Ot&&(de=we._fullLayout[i.id2name(Ot)])}var At=wt.trace.dimensions[Pt].values;for(fe=0;fe<At.length;fe++)for(et=de._categoriesMap[At[fe]],Ee=0;Ee<wt.trace.dimensions.length;Ee++)if(Ee!==Pt){var He=wt.trace.dimensions[Ee];Ve[et][1].push(He.values[fe])}}else if(vt){for(fe=0;fe<wt.t.x.length;fe++)Ne?(et=wt.t.x[fe],$e=wt.t.y[fe]):(et=wt.t.y[fe],$e=wt.t.x[fe]),Ve[et][1].push($e);wt.t&&wt.t._scene&&delete wt.t._scene.dirty}else if(wt.hasOwnProperty("z")){$e=wt.z;var Ze=Ae(at.type,de,$e);for(fe=0;fe<$e.length;fe++)for(Ee=0;Ee<$e[fe].length;Ee++)(et=Ze(Ee,fe))+1&&Ve[et][1].push($e[fe][Ee])}else for((et=wt.p)===void 0&&(et=wt[Pe]),($e=wt.s)===void 0&&($e=wt.v),$e===void 0&&($e=Ne?wt.y:wt.x),Array.isArray($e)||($e=$e===void 0?[]:[$e]),fe=0;fe<$e.length;fe++)Ve[et][1].push($e[fe])}}}de._categoriesValue=Ve;var Be=[];for(se=0;se<Ve.length;se++)Be.push([Ve[se][0],Se[Me](Ve[se][1])]);Be.sort(ze==="descending"?De:Oe),de._categoriesAggregatedValue=Be,de._initialCategories=Be.map(function(Ge){return Ge[0]}),Te=Te.concat(de.sortByInitialCategories())}}}return Te}(K,F);if(ve.length){for(Z._numBoxes=0,Z._numViolins=0,J=0;J<ve.length;J++)be(ve[J],!0);for(J=0;J<ve.length;J++)be(ve[J],!1);W(F)}h.getComponentMethod("fx","calc")(F),h.getComponentMethod("errorbars","calc")(F)};var D=/(total|sum|min|max|mean|median) (ascending|descending)/;function N(F,V,U){var te={};function J(Z){Z.clearCalc(),Z.type==="multicategory"&&Z.setupMultiCategory(V),te[Z._id]=1}a.simpleMap(F,J);for(var X=U._axisMatchGroups||[],K=0;K<X.length;K++)for(var Q in X[K])te[Q]||J(U[i.id2name(Q)])}function W(F){var V,U,te,J=F._fullLayout,X=J._visibleModules,K={};for(U=0;U<X.length;U++){var Q=X[U],Z=Q.crossTraceCalc;if(Z){var re=Q.basePlotModule.name;K[re]?a.pushUnique(K[re],Z):K[re]=[Z]}}for(te in K){var oe=K[te],ae=J._subplots[te];if(Array.isArray(ae))for(V=0;V<ae.length;V++){var ce=ae[V],he=te==="cartesian"?J._plots[ce]:J[ce];for(U=0;U<oe.length;U++)oe[U](F,he,ce)}else for(U=0;U<oe.length;U++)oe[U](F)}}v.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},v.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},v.reselect=function(F){var V=F._fullLayout,U=(F.layout||{}).selections,te=V._previousSelections;V._previousSelections=U;var J=V._reselect||JSON.stringify(U)!==JSON.stringify(te);h.getComponentMethod("selections","reselect")(F,J)},v.generalUpdatePerTraceModule=function(F,V,U,te){var J,X=V.traceHash,K={};for(J=0;J<U.length;J++){var Q=U[J],Z=Q[0].trace;Z.visible&&(K[Z.type]=K[Z.type]||[],K[Z.type].push(Q))}for(var re in X)if(!K[re]){var oe=X[re][0];oe[0].trace.visible=!1,K[re]=[oe]}for(var ae in K){var ce=K[ae];ce[0][0].trace._module.plot(F,V,a.filterVisible(ce),te)}V.traceHash=K},v.plotBasePlot=function(F,V,U,te,J){var X=h.getModule(F),K=x(V.calcdata,X)[0];X.plot(V,K,te,J)},v.cleanBasePlot=function(F,V,U,te,J){var X=J._has&&J._has(F),K=U._has&&U._has(F);X&&!K&&J["_"+F+"layer"].selectAll("g.trace").remove()}},39360:function(ee){ee.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(ee,z,e){var M=e(3400),k=e(92065).tester,o=M.findIndexOfMin,T=M.isAngleInsideSector,b=M.angleDelta,h=M.angleDist;function s(r,i,l,u){var p,c,x=u[0],d=u[1],g=a(Math.sin(i)-Math.sin(r)),v=a(Math.cos(i)-Math.cos(r)),y=Math.tan(l),m=a(1/y),_=g/v,f=d-_*x;return m?g&&v?c=y*(p=f/(y-_)):v?(p=d*m,c=d):(p=x,c=x*y):g&&v?(p=0,c=f):v?(p=0,c=d):p=c=NaN,[p,c]}function t(r,i,l,u){return M.isFullCircle([i,l])?function(p,c){var x,d=c.length,g=new Array(d+1);for(x=0;x<d;x++){var v=c[x];g[x]=[p*Math.cos(v),p*Math.sin(v)]}return g[x]=g[0].slice(),g}(r,u):function(p,c,x,d){var g,v,y=d.length,m=[];function _(j){return[p*Math.cos(j),p*Math.sin(j)]}function f(j,D,N){return s(j,D,N,_(j))}function S(j){return M.mod(j,y)}function w(j){return T(j,[c,x])}var E=o(d,function(j){return w(j)?h(j,c):1/0}),O=f(d[E],d[S(E-1)],c);for(m.push(O),g=E,v=0;v<y;g++,v++){var C=d[S(g)];if(!w(C))break;m.push(_(C))}var P=o(d,function(j){return w(j)?h(j,x):1/0}),R=f(d[P],d[S(P+1)],x);return m.push(R),m.push([0,0]),m.push(m[0].slice()),m}(r,i,l,u)}function a(r){return Math.abs(r)>1e-10?r:0}function n(r,i,l){i=i||0,l=l||0;for(var u=r.length,p=new Array(u),c=0;c<u;c++){var x=r[c];p[c]=[i+x[0],l-x[1]]}return p}ee.exports={isPtInsidePolygon:function(r,i,l,u,p){if(!T(i,u))return!1;var c,x;l[0]<l[1]?(c=l[0],x=l[1]):(c=l[1],x=l[0]);var d=k(t(c,u[0],u[1],p)),g=k(t(x,u[0],u[1],p)),v=[r*Math.cos(i),r*Math.sin(i)];return g.contains(v)&&!d.contains(v)},findPolygonOffset:function(r,i,l,u){for(var p=1/0,c=1/0,x=t(r,i,l,u),d=0;d<x.length;d++){var g=x[d];p=Math.min(p,g[0]),c=Math.min(c,-g[1])}return[p,c]},findEnclosingVertexAngles:function(r,i){var l=o(i,function(p){var c=b(p,r);return c>0?c:1/0}),u=M.mod(l+1,i.length);return[i[l],i[u]]},findIntersectionXY:s,findXYatLength:function(r,i,l,u){var p=-i*l,c=i*i+1,x=2*(i*p-l),d=p*p+l*l-r*r,g=Math.sqrt(x*x-4*c*d),v=(-x+g)/(2*c),y=(-x-g)/(2*c);return[[v,i*v+p+u],[y,i*y+p+u]]},clampTiny:a,pathPolygon:function(r,i,l,u,p,c){return"M"+n(t(r,i,l,u),p,c).join("L")},pathPolygonAnnulus:function(r,i,l,u,p,c,x){var d,g;r<i?(d=r,g=i):(d=i,g=r);var v=n(t(d,l,u,p),c,x);return"M"+n(t(g,l,u,p),c,x).reverse().join("L")+"M"+v.join("L")}}},40872:function(ee,z,e){var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(39360),b=T.attr,h=T.name,s=k(h),t={};t[b]={valType:"subplotid",dflt:h,editType:"calc"},ee.exports={attr:b,name:h,idRoot:h,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(a){for(var n=a._fullLayout,r=a.calcdata,i=n._subplots[h],l=0;l<i.length;l++){var u=i[l],p=M(r,h,u),c=n[u]._subplot;c||(c=o(a,u),n[u]._subplot=c),c.plot(p,n,a._promises)}},clean:function(a,n,r,i){for(var l=i._subplots[h]||[],u=i._has&&i._has("gl"),p=n._has&&n._has("gl"),c=u&&!p,x=0;x<l.length;x++){var d=l[x],g=i[d]._subplot;if(!n[d]&&g)for(var v in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[v].remove();c&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(57952).toSVG}},95300:function(ee,z,e){var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,h=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,h,s);var a={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(a,h,s),ee.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:t,angularaxis:a,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(ee,z,e){var M=e(3400),k=e(76308),o=e(31780),T=e(168),b=e(84888).op,h=e(26332),s=e(25404),t=e(95936),a=e(42568),n=e(22416),r=e(42136),i=e(76808),l=e(52976),u=e(95300),p=e(57696),c=e(39360),x=c.axisNames;function d(v,y,m,_){var f=m("bgcolor");_.bgColor=k.combine(f,_.paper_bgcolor);var S=m("sector");m("hole");var w,E=b(_.fullData,c.name,_.id),O=_.layoutOut;function C(pe,xe){return m(w+"."+pe,xe)}for(var P=0;P<x.length;P++){w=x[P],M.isPlainObject(v[w])||(v[w]={});var R=v[w],j=o.newContainer(y,w);j._id=j._name=w,j._attr=_.id+"."+w,j._traceIndices=E.map(function(pe){return pe._expandedIndex});var D=c.axisName2dataArray[w],N=g(R,j,C,E,D,_);n(R,j,C,{axData:E,dataAttr:D});var W=C("visible");switch(p(j,y,O),C("uirevision",y.uirevision),j._m=1,w){case"radialaxis":C("minallowed"),C("maxallowed");var F,V=C("range"),U=j.getAutorangeDflt(V),te=C("autorange",U);!V||(V[0]!==null||V[1]!==null)&&(V[0]!==null&&V[1]!==null||te!=="reversed"&&te!==!0)&&(V[0]===null||te!=="min"&&te!=="max reversed")&&(V[1]===null||te!=="max"&&te!=="min reversed")||(V=void 0,delete j.range,j.autorange=!0,F=!0),F||(te=C("autorange",U=j.getAutorangeDflt(V))),R.autorange=te,te&&(i(C,te,V),N!=="linear"&&N!=="-"||C("rangemode"),j.isReversed()&&(j._m=-1)),j.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(N==="date"){M.log("Polar plots do not support date angular axes yet.");for(var J=0;J<E.length;J++)E[J].visible=!1;N=R.type=j.type="linear"}C(N==="linear"?"thetaunit":"period");var X=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[X])}if(a(R,j,C,j.type,{tickSuffixDflt:j.thetaunit==="degrees"?"":void 0}),W){var K,Q,Z,re,oe,ae,ce,he=_.font||{};Q=(K=C("color"))===R.color?K:he.color,Z=he.size,re=he.family,oe=he.weight,ae=he.style,ce=he.variant,h(R,j,C,j.type),t(R,j,C,j.type,{font:{weight:oe,style:ae,variant:ce,color:Q,size:Z,family:re},noAutotickangles:w==="angularaxis"}),s(R,j,C,{outerTicks:!0}),r(R,j,C,{dfltColor:K,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[w]}),C("layer"),w==="radialaxis"&&(C("side"),C("angle",S[0]),C("title.text"),M.coerceFont(C,"title.font",{weight:oe,style:ae,variant:ce,color:Q,size:M.bigFont(Z),family:re}))}N!=="category"&&C("hoverformat"),j._input=R}y.angularaxis.type==="category"&&m("gridshape")}function g(v,y,m,_,f,S){var w=m("autotypenumbers",S.autotypenumbersDflt);if(m("type")==="-"){for(var E,O=0;O<_.length;O++)if(_[O].visible){E=_[O];break}E&&E[f]&&(y.type=l(E[f],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),y.type==="-"?y.type="linear":v.type=y.type}return y.type}ee.exports=function(v,y,m){T(v,y,m,{type:c.name,attributes:u,handleDefaults:d,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:m,layoutOut:y})}},62400:function(ee,z,e){var M=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strRotate,h=T.strTranslate,s=e(76308),t=e(43616),a=e(7316),n=e(54460),r=e(78344),i=e(57696),l=e(19280).doAutoRange,u=e(51184),p=e(86476),c=e(93024),x=e(81668),d=e(22676).prepSelect,g=e(22676).selectOnClick,v=e(22676).clearOutline,y=e(93972),m=e(73696),_=e(39172).redrawReglTraces,f=e(84284).MID_SHIFT,S=e(39360),w=e(57384),E=e(36416),O=E.smith,C=E.reactanceArc,P=E.resistanceArc,R=E.smithTransform,j=T._,D=T.mod,N=T.deg2rad,W=T.rad2deg;function F(X,K,Q){this.isSmith=Q||!1,this.id=K,this.gd=X,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Z=X._fullLayout,re="clip"+Z._uid+K;this.clipIds.forTraces=re+"-for-traces",this.clipPaths.forTraces=Z._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Z["_"+(Q?"smith":"polar")+"layer"].append("g").attr("class",K),this.getHole=function(oe){return this.isSmith?0:oe.hole},this.getSector=function(oe){return this.isSmith?[0,360]:oe.sector},this.getRadial=function(oe){return this.isSmith?oe.realaxis:oe.radialaxis},this.getAngular=function(oe){return this.isSmith?oe.imaginaryaxis:oe.angularaxis},Q||(this.radialTickLayout=null,this.angularTickLayout=null)}var V=F.prototype;function U(X){var K=X.ticks+String(X.ticklen)+String(X.showticklabels);return"side"in X&&(K+=X.side),K}function te(X,K){return K[T.findIndexOfMin(K,function(Q){return T.angleDist(X,Q)})]}function J(X,K,Q){return K?(X.attr("display",null),X.attr(Q)):X&&X.attr("display","none"),X}ee.exports=function(X,K,Q){return new F(X,K,Q)},V.plot=function(X,K){for(var Q=this,Z=K[Q.id],re=!1,oe=0;oe<X.length;oe++)if(X[oe][0].trace.cliponaxis===!1){re=!0;break}Q._hasClipOnAxisFalse=re,Q.updateLayers(K,Z),Q.updateLayout(K,Z),a.generalUpdatePerTraceModule(Q.gd,Q,X,Z),Q.updateFx(K,Z),Q.isSmith&&(delete Z.realaxis.range,delete Z.imaginaryaxis.range)},V.updateLayers=function(X,K){var Q=this,Z=Q.isSmith,re=Q.layers,oe=Q.getRadial(K),ae=Q.getAngular(K),ce=S.layerNames,he=ce.indexOf("frontplot"),pe=ce.slice(0,he),xe=ae.layer==="below traces",be=oe.layer==="below traces";xe&&pe.push("angular-line"),be&&pe.push("radial-line"),xe&&pe.push("angular-axis"),be&&pe.push("radial-axis"),pe.push("frontplot"),xe||pe.push("angular-line"),be||pe.push("radial-line"),xe||pe.push("angular-axis"),be||pe.push("radial-axis");var ve=(Z?"smith":"polar")+"sublayer",ge=Q.framework.selectAll("."+ve).data(pe,String);ge.enter().append("g").attr("class",function(we){return ve+" "+we}).each(function(we){var _e=re[we]=M.select(this);switch(we){case"frontplot":Z||_e.append("g").classed("barlayer",!0),_e.append("g").classed("scatterlayer",!0);break;case"backplot":_e.append("g").classed("maplayer",!0);break;case"plotbg":re.bg=_e.append("path");break;case"radial-grid":case"angular-grid":_e.style("fill","none");break;case"radial-line":_e.append("line").style("fill","none");break;case"angular-line":_e.append("path").style("fill","none")}}),ge.order()},V.updateLayout=function(X,K){var Q=this,Z=Q.layers,re=X._size,oe=Q.getRadial(K),ae=Q.getAngular(K),ce=K.domain.x,he=K.domain.y;Q.xOffset=re.l+re.w*ce[0],Q.yOffset=re.t+re.h*(1-he[1]);var pe=Q.xLength=re.w*(ce[1]-ce[0]),xe=Q.yLength=re.h*(he[1]-he[0]),be=Q.getSector(K);Q.sectorInRad=be.map(N);var ve,ge,we,_e,se,ie=Q.sectorBBox=function(at){var rt,dt=at[0],vt=at[1]-dt,ht=D(dt,360),et=ht+vt,$e=Math.cos(N(ht)),wt=Math.sin(N(ht)),Pt=Math.cos(N(et)),Ot=Math.sin(N(et));return rt=ht<=90&&et>=90||ht>90&&et>=450?1:wt<=0&&Ot<=0?0:Math.max(wt,Ot),[ht<=180&&et>=180||ht>180&&et>=540?-1:$e>=0&&Pt>=0?0:Math.min($e,Pt),ht<=270&&et>=270||ht>270&&et>=630?-1:wt>=0&&Ot>=0?0:Math.min(wt,Ot),et>=360?1:$e<=0&&Pt<=0?0:Math.max($e,Pt),rt]}(be),fe=ie[2]-ie[0],Ee=ie[3]-ie[1],Te=xe/pe,Ae=Math.abs(Ee/fe);Te>Ae?(ve=pe,se=(xe-(ge=pe*Ae))/re.h/2,we=[ce[0],ce[1]],_e=[he[0]+se,he[1]-se]):(ge=xe,se=(pe-(ve=xe/Ae))/re.w/2,we=[ce[0]+se,ce[1]-se],_e=[he[0],he[1]]),Q.xLength2=ve,Q.yLength2=ge,Q.xDomain2=we,Q.yDomain2=_e;var Se,Oe=Q.xOffset2=re.l+re.w*we[0],De=Q.yOffset2=re.t+re.h*(1-_e[1]),de=Q.radius=ve/fe,me=Q.innerRadius=Q.getHole(K)*de,Me=Q.cx=Oe-de*ie[0],ze=Q.cy=De+de*ie[3],Pe=Q.cxx=Me-Oe,Ne=Q.cyy=ze-De,Ve=oe.side;Ve==="counterclockwise"?(Se=Ve,Ve="top"):Ve==="clockwise"&&(Se=Ve,Ve="bottom"),Q.radialAxis=Q.mockAxis(X,K,oe,{_id:"x",side:Ve,_trueSide:Se,domain:[me/re.w,de/re.w]}),Q.angularAxis=Q.mockAxis(X,K,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),Q.doAutoRange(X,K),Q.updateAngularAxis(X,K),Q.updateRadialAxis(X,K),Q.updateRadialAxisTitle(X,K),Q.xaxis=Q.mockCartesianAxis(X,K,{_id:"x",domain:we}),Q.yaxis=Q.mockCartesianAxis(X,K,{_id:"y",domain:_e});var Ye=Q.pathSubplot();Q.clipPaths.forTraces.select("path").attr("d",Ye).attr("transform",h(Pe,Ne)),Z.frontplot.attr("transform",h(Oe,De)).call(t.setClipUrl,Q._hasClipOnAxisFalse?null:Q.clipIds.forTraces,Q.gd),Z.bg.attr("d",Ye).attr("transform",h(Me,ze)).call(s.fill,K.bgcolor)},V.mockAxis=function(X,K,Q,Z){var re=T.extendFlat({},Q,Z);return i(re,K,X),re},V.mockCartesianAxis=function(X,K,Q){var Z=this,re=Z.isSmith,oe=Q._id,ae=T.extendFlat({type:"linear"},Q);r(ae,X);var ce={x:[0,2],y:[1,3]};return ae.setRange=function(){var he=Z.sectorBBox,pe=ce[oe],xe=Z.radialAxis._rl,be=(xe[1]-xe[0])/(1-Z.getHole(K));ae.range=[he[pe[0]]*be,he[pe[1]]*be]},ae.isPtWithinRange=oe!=="x"||re?function(){return!0}:function(he){return Z.isPtInside(he)},ae.setRange(),ae.setScale(),ae},V.doAutoRange=function(X,K){var Q=this,Z=Q.gd,re=Q.radialAxis,oe=Q.getRadial(K);l(Z,re);var ae=re.range;if(oe.range=ae.slice(),oe._input.range=ae.slice(),re._rl=[re.r2l(ae[0],null,"gregorian"),re.r2l(ae[1],null,"gregorian")],re.minallowed!==void 0){var ce=re.r2l(re.minallowed);re._rl[0]>re._rl[1]?re._rl[1]=Math.max(re._rl[1],ce):re._rl[0]=Math.max(re._rl[0],ce)}if(re.maxallowed!==void 0){var he=re.r2l(re.maxallowed);re._rl[0]<re._rl[1]?re._rl[1]=Math.min(re._rl[1],he):re._rl[0]=Math.min(re._rl[0],he)}},V.updateRadialAxis=function(X,K){var Q=this,Z=Q.gd,re=Q.layers,oe=Q.radius,ae=Q.innerRadius,ce=Q.cx,he=Q.cy,pe=Q.getRadial(K),xe=D(Q.getSector(K)[0],360),be=Q.radialAxis,ve=ae<oe,ge=Q.isSmith;ge||(Q.fillViewInitialKey("radialaxis.angle",pe.angle),Q.fillViewInitialKey("radialaxis.range",be.range.slice()),be.setGeometry()),be.tickangle==="auto"&&xe>90&&xe<=270&&(be.tickangle=180);var we=ge?function(De){var de=R(Q,O([De.x,0]));return h(de[0]-ce,de[1]-he)}:function(De){return h(be.l2p(De.x)+ae,0)},_e=ge?function(De){return P(Q,De.x,-1/0,1/0)}:function(De){return Q.pathArc(be.r2p(De.x)+ae)},se=U(pe);if(Q.radialTickLayout!==se&&(re["radial-axis"].selectAll(".xtick").remove(),Q.radialTickLayout=se),ve){be.setScale();var ie=0,fe=ge?(be.tickvals||[]).filter(function(De){return De>=0}).map(function(De){return n.tickText(be,De,!0,!1)}):n.calcTicks(be),Ee=ge?fe:n.clipEnds(be,fe),Te=n.getTickSigns(be)[2];ge&&((be.ticks==="top"&&be.side==="bottom"||be.ticks==="bottom"&&be.side==="top")&&(Te=-Te),be.ticks==="top"&&be.side==="top"&&(ie=-be.ticklen),be.ticks==="bottom"&&be.side==="bottom"&&(ie=be.ticklen)),n.drawTicks(Z,be,{vals:fe,layer:re["radial-axis"],path:n.makeTickPath(be,0,Te),transFn:we,crisp:!1}),n.drawGrid(Z,be,{vals:Ee,layer:re["radial-grid"],path:_e,transFn:T.noop,crisp:!1}),n.drawLabels(Z,be,{vals:fe,layer:re["radial-axis"],transFn:we,labelFns:n.makeLabelFns(be,ie)})}var Ae=Q.radialAxisAngle=Q.vangles?W(te(N(pe.angle),Q.vangles)):pe.angle,Se=h(ce,he),Oe=Se+b(-Ae);J(re["radial-axis"],ve&&(pe.showticklabels||pe.ticks),{transform:Oe}),J(re["radial-grid"],ve&&pe.showgrid,{transform:ge?"":Se}),J(re["radial-line"].select("line"),ve&&pe.showline,{x1:ge?-oe:ae,y1:0,x2:oe,y2:0,transform:Oe}).attr("stroke-width",pe.linewidth).call(s.stroke,pe.linecolor)},V.updateRadialAxisTitle=function(X,K,Q){if(!this.isSmith){var Z=this,re=Z.gd,oe=Z.radius,ae=Z.cx,ce=Z.cy,he=Z.getRadial(K),pe=Z.id+"title",xe=0;if(he.title){var be=t.bBox(Z.layers["radial-axis"].node()).height,ve=he.title.font.size,ge=he.side;xe=ge==="top"?ve:ge==="counterclockwise"?-(be+.4*ve):be+.8*ve}var we=Q!==void 0?Q:Z.radialAxisAngle,_e=N(we),se=Math.cos(_e),ie=Math.sin(_e),fe=ae+oe/2*se+xe*ie,Ee=ce-oe/2*ie+xe*se;Z.layers["radial-axis-title"]=x.draw(re,pe,{propContainer:he,propName:Z.id+".radialaxis.title",placeholder:j(re,"Click to enter radial axis title"),attributes:{x:fe,y:Ee,"text-anchor":"middle"},transform:{rotate:-we}})}},V.updateAngularAxis=function(X,K){var Q=this,Z=Q.gd,re=Q.layers,oe=Q.radius,ae=Q.innerRadius,ce=Q.cx,he=Q.cy,pe=Q.getAngular(K),xe=Q.angularAxis,be=Q.isSmith;be||(Q.fillViewInitialKey("angularaxis.rotation",pe.rotation),xe.setGeometry(),xe.setScale());var ve=be?function(De){var de=R(Q,O([0,De.x]));return Math.atan2(de[0]-ce,de[1]-he)-Math.PI/2}:function(De){return xe.t2g(De.x)};xe.type==="linear"&&xe.thetaunit==="radians"&&(xe.tick0=W(xe.tick0),xe.dtick=W(xe.dtick));var ge=function(De){return h(ce+oe*Math.cos(De),he-oe*Math.sin(De))},we=be?function(De){var de=R(Q,O([0,De.x]));return h(de[0],de[1])}:function(De){return ge(ve(De))},_e=be?function(De){var de=R(Q,O([0,De.x])),me=Math.atan2(de[0]-ce,de[1]-he)-Math.PI/2;return h(de[0],de[1])+b(-W(me))}:function(De){var de=ve(De);return ge(de)+b(-W(de))},se=be?function(De){return C(Q,De.x,0,1/0)}:function(De){var de=ve(De),me=Math.cos(de),Me=Math.sin(de);return"M"+[ce+ae*me,he-ae*Me]+"L"+[ce+oe*me,he-oe*Me]},ie=n.makeLabelFns(xe,0).labelStandoff,fe={xFn:function(De){var de=ve(De);return Math.cos(de)*ie},yFn:function(De){var de=ve(De),me=Math.sin(de)>0?.2:1;return-Math.sin(de)*(ie+De.fontSize*me)+Math.abs(Math.cos(de))*(De.fontSize*f)},anchorFn:function(De){var de=ve(De),me=Math.cos(de);return Math.abs(me)<.1?"middle":me>0?"start":"end"},heightFn:function(De,de,me){var Me=ve(De);return-.5*(1+Math.sin(Me))*me}},Ee=U(pe);Q.angularTickLayout!==Ee&&(re["angular-axis"].selectAll("."+xe._id+"tick").remove(),Q.angularTickLayout=Ee);var Te,Ae=be?[1/0].concat(xe.tickvals||[]).map(function(De){return n.tickText(xe,De,!0,!1)}):n.calcTicks(xe);if(be&&(Ae[0].text="",Ae[0].fontSize*=1.75),K.gridshape==="linear"?(Te=Ae.map(ve),T.angleDelta(Te[0],Te[1])<0&&(Te=Te.slice().reverse())):Te=null,Q.vangles=Te,xe.type==="category"&&(Ae=Ae.filter(function(De){return T.isAngleInsideSector(ve(De),Q.sectorInRad)})),xe.visible){var Se=xe.ticks==="inside"?-1:1,Oe=(xe.linewidth||1)/2;n.drawTicks(Z,xe,{vals:Ae,layer:re["angular-axis"],path:"M"+Se*Oe+",0h"+Se*xe.ticklen,transFn:_e,crisp:!1}),n.drawGrid(Z,xe,{vals:Ae,layer:re["angular-grid"],path:se,transFn:T.noop,crisp:!1}),n.drawLabels(Z,xe,{vals:Ae,layer:re["angular-axis"],repositionOnUpdate:!0,transFn:we,labelFns:fe})}J(re["angular-line"].select("path"),pe.showline,{d:Q.pathSubplot(),transform:h(ce,he)}).attr("stroke-width",pe.linewidth).call(s.stroke,pe.linecolor)},V.updateFx=function(X,K){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(X),this.updateRadialDrag(X,K,0),this.updateRadialDrag(X,K,1)),this.updateHoverAndMainDrag(X))},V.updateHoverAndMainDrag=function(X){var K,Q,Z=this,re=Z.isSmith,oe=Z.gd,ae=Z.layers,ce=X._zoomlayer,he=S.MINZOOM,pe=S.OFFEDGE,xe=Z.radius,be=Z.innerRadius,ve=Z.cx,ge=Z.cy,we=Z.cxx,_e=Z.cyy,se=Z.sectorInRad,ie=Z.vangles,fe=Z.radialAxis,Ee=w.clampTiny,Te=w.findXYatLength,Ae=w.findEnclosingVertexAngles,Se=S.cornerHalfWidth,Oe=S.cornerLen/2,De=u.makeDragger(ae,"path","maindrag",X.dragmode===!1?"none":"crosshair");M.select(De).attr("d",Z.pathSubplot()).attr("transform",h(ve,ge)),De.onmousemove=function(tt){c.hover(oe,tt,Z.id),oe._fullLayout._lasthover=De,oe._fullLayout._hoversubplot=Z.id},De.onmouseout=function(tt){oe._dragging||p.unhover(oe,tt)};var de,me,Me,ze,Pe,Ne,Ve,Ye,at,rt={element:De,gd:oe,subplot:Z.id,plotinfo:{id:Z.id,xaxis:Z.xaxis,yaxis:Z.yaxis},xaxes:[Z.xaxis],yaxes:[Z.yaxis]};function dt(tt,Re){return Math.sqrt(tt*tt+Re*Re)}function vt(tt,Re){return dt(tt-we,Re-_e)}function ht(tt,Re){return Math.atan2(_e-Re,tt-we)}function et(tt,Re){return[tt*Math.cos(Re),tt*Math.sin(-Re)]}function $e(tt,Re){if(tt===0)return Z.pathSector(2*Se);var Fe=Oe/tt,nt=Re-Fe,We=Re+Fe,ct=Math.max(0,Math.min(tt,xe)),pt=ct-Se,gt=ct+Se;return"M"+et(pt,nt)+"A"+[pt,pt]+" 0,0,0 "+et(pt,We)+"L"+et(gt,We)+"A"+[gt,gt]+" 0,0,1 "+et(gt,nt)+"Z"}function wt(tt,Re,Fe){if(tt===0)return Z.pathSector(2*Se);var nt,We,ct=et(tt,Re),pt=et(tt,Fe),gt=Ee((ct[0]+pt[0])/2),ut=Ee((ct[1]+pt[1])/2);if(gt&&ut){var kt=ut/gt,yt=-1/kt,Mt=Te(Se,kt,gt,ut);nt=Te(Oe,yt,Mt[0][0],Mt[0][1]),We=Te(Oe,yt,Mt[1][0],Mt[1][1])}else{var Lt,Ct;ut?(Lt=Oe,Ct=Se):(Lt=Se,Ct=Oe),nt=[[gt-Lt,ut-Ct],[gt+Lt,ut-Ct]],We=[[gt-Lt,ut+Ct],[gt+Lt,ut+Ct]]}return"M"+nt.join("L")+"L"+We.reverse().join("L")+"Z"}function Pt(tt,Re){return Re=Math.max(Math.min(Re,xe),be),tt<pe?tt=0:xe-tt<pe?tt=xe:Re<pe?Re=0:xe-Re<pe&&(Re=xe),Math.abs(Re-tt)>he?(tt<Re?(Me=tt,ze=Re):(Me=Re,ze=tt),!0):(Me=null,ze=null,!1)}function Ot(tt,Re){tt=tt||Pe,Re=Re||"M0,0Z",Ye.attr("d",tt),at.attr("d",Re),u.transitionZoombox(Ye,at,Ne,Ve),Ne=!0;var Fe={};Ge(Fe),oe.emit("plotly_relayouting",Fe)}function At(tt,Re){var Fe,nt,We=de+(tt*=K),ct=me+(Re*=Q),pt=vt(de,me),gt=Math.min(vt(We,ct),xe),ut=ht(de,me);Pt(pt,gt)&&(Fe=Pe+Z.pathSector(ze),Me&&(Fe+=Z.pathSector(Me)),nt=$e(Me,ut)+$e(ze,ut)),Ot(Fe,nt)}function He(tt,Re,Fe,nt){var We=w.findIntersectionXY(Fe,nt,Fe,[tt-we,_e-Re]);return dt(We[0],We[1])}function Ze(tt,Re){var Fe,nt,We=de+tt,ct=me+Re,pt=ht(de,me),gt=ht(We,ct),ut=Ae(pt,ie),kt=Ae(gt,ie);Pt(He(de,me,ut[0],ut[1]),Math.min(He(We,ct,kt[0],kt[1]),xe))&&(Fe=Pe+Z.pathSector(ze),Me&&(Fe+=Z.pathSector(Me)),nt=[wt(Me,ut[0],ut[1]),wt(ze,ut[0],ut[1])].join(" ")),Ot(Fe,nt)}function Be(){if(u.removeZoombox(oe),Me!==null&&ze!==null){var tt={};Ge(tt),u.showDoubleClickNotifier(oe),o.call("_guiRelayout",oe,tt)}}function Ge(tt){var Re=fe._rl,Fe=(Re[1]-Re[0])/(1-be/xe)/xe,nt=[Re[0]+(Me-be)*Fe,Re[0]+(ze-be)*Fe];tt[Z.id+".radialaxis.range"]=nt}function it(tt,Re){var Fe=oe._fullLayout.clickmode;if(u.removeZoombox(oe),tt===2){var nt={};for(var We in Z.viewInitial)nt[Z.id+"."+We]=Z.viewInitial[We];oe.emit("plotly_doubleclick",null),o.call("_guiRelayout",oe,nt)}Fe.indexOf("select")>-1&&tt===1&&g(Re,oe,[Z.xaxis],[Z.yaxis],Z.id,rt),Fe.indexOf("event")>-1&&c.click(oe,Re,Z.id)}rt.prepFn=function(tt,Re,Fe){var nt=oe._fullLayout.dragmode,We=De.getBoundingClientRect();oe._fullLayout._calcInverseTransform(oe);var ct=oe._fullLayout._invTransform;K=oe._fullLayout._invScaleX,Q=oe._fullLayout._invScaleY;var pt=T.apply3DTransform(ct)(Re-We.left,Fe-We.top);if(de=pt[0],me=pt[1],ie){var gt=w.findPolygonOffset(xe,se[0],se[1],ie);de+=we+gt[0],me+=_e+gt[1]}switch(nt){case"zoom":rt.clickFn=it,re||(rt.moveFn=ie?Ze:At,rt.doneFn=Be,function(){Me=null,ze=null,Pe=Z.pathSubplot(),Ne=!1;var ut=oe._fullLayout[Z.id];Ve=k(ut.bgcolor).getLuminance(),(Ye=u.makeZoombox(ce,Ve,ve,ge,Pe)).attr("fill-rule","evenodd"),at=u.makeCorners(ce,ve,ge),v(oe)}());break;case"select":case"lasso":d(tt,Re,Fe,rt,nt)}},p.init(rt)},V.updateRadialDrag=function(X,K,Q){var Z=this,re=Z.gd,oe=Z.layers,ae=Z.radius,ce=Z.innerRadius,he=Z.cx,pe=Z.cy,xe=Z.radialAxis,be=S.radialDragBoxSize,ve=be/2;if(xe.visible){var ge,we,_e,se=N(Z.radialAxisAngle),ie=xe._rl,fe=ie[0],Ee=ie[1],Te=ie[Q],Ae=.75*(ie[1]-ie[0])/(1-Z.getHole(K))/ae;Q?(ge=he+(ae+ve)*Math.cos(se),we=pe-(ae+ve)*Math.sin(se),_e="radialdrag"):(ge=he+(ce-ve)*Math.cos(se),we=pe-(ce-ve)*Math.sin(se),_e="radialdrag-inner");var Se,Oe,De,de=u.makeRectDragger(oe,_e,"crosshair",-ve,-ve,be,be),me={element:de,gd:re};X.dragmode===!1&&(me.dragmode=!1),J(M.select(de),xe.visible&&ce<ae,{transform:h(ge,we)}),me.prepFn=function(){Se=null,Oe=null,De=null,me.moveFn=Me,me.doneFn=ze,v(re)},me.clampFn=function(Ve,Ye){return Math.sqrt(Ve*Ve+Ye*Ye)<S.MINDRAG&&(Ve=0,Ye=0),[Ve,Ye]},p.init(me)}function Me(Ve,Ye){if(Se)Se(Ve,Ye);else{var at=[Ve,-Ye],rt=[Math.cos(se),Math.sin(se)],dt=Math.abs(T.dot(at,rt)/Math.sqrt(T.dot(at,at)));isNaN(dt)||(Se=dt<.5?Pe:Ne)}var vt={};(function(ht){Oe!==null?ht[Z.id+".radialaxis.angle"]=Oe:De!==null&&(ht[Z.id+".radialaxis.range["+Q+"]"]=De)})(vt),re.emit("plotly_relayouting",vt)}function ze(){Oe!==null?o.call("_guiRelayout",re,Z.id+".radialaxis.angle",Oe):De!==null&&o.call("_guiRelayout",re,Z.id+".radialaxis.range["+Q+"]",De)}function Pe(Ve,Ye){if(Q!==0){var at=ge+Ve,rt=we+Ye;Oe=Math.atan2(pe-rt,at-he),Z.vangles&&(Oe=te(Oe,Z.vangles)),Oe=W(Oe);var dt=h(he,pe)+b(-Oe);oe["radial-axis"].attr("transform",dt),oe["radial-line"].select("line").attr("transform",dt);var vt=Z.gd._fullLayout,ht=vt[Z.id];Z.updateRadialAxisTitle(vt,ht,Oe)}}function Ne(Ve,Ye){var at=T.dot([Ve,-Ye],[Math.cos(se),Math.sin(se)]);if(De=Te-Ae*at,Ae>0==(Q?De>fe:De<Ee)){var rt=re._fullLayout,dt=rt[Z.id];xe.range[Q]=De,xe._rl[Q]=De,Z.updateRadialAxis(rt,dt),Z.xaxis.setRange(),Z.xaxis.setScale(),Z.yaxis.setRange(),Z.yaxis.setScale();var vt=!1;for(var ht in Z.traceHash){var et=Z.traceHash[ht],$e=T.filterVisible(et);et[0][0].trace._module.plot(re,Z,$e,dt),o.traceIs(ht,"gl")&&$e.length&&(vt=!0)}vt&&(m(re),_(re))}else De=null}},V.updateAngularDrag=function(X){var K=this,Q=K.gd,Z=K.layers,re=K.radius,oe=K.angularAxis,ae=K.cx,ce=K.cy,he=K.cxx,pe=K.cyy,xe=S.angularDragBoxSize,be=u.makeDragger(Z,"path","angulardrag",X.dragmode===!1?"none":"move"),ve={element:be,gd:Q};function ge(me,Me){return Math.atan2(pe+xe-Me,me-he-xe)}X.dragmode===!1?ve.dragmode=!1:M.select(be).attr("d",K.pathAnnulus(re,re+xe)).attr("transform",h(ae,ce)).call(y,"move");var we,_e,se,ie,fe,Ee,Te=Z.frontplot.select(".scatterlayer").selectAll(".trace"),Ae=Te.selectAll(".point"),Se=Te.selectAll(".textpoint");function Oe(me,Me){var ze=K.gd._fullLayout,Pe=ze[K.id],Ne=ge(we+me*X._invScaleX,_e+Me*X._invScaleY),Ve=W(Ne-Ee);if(ie=se+Ve,Z.frontplot.attr("transform",h(K.xOffset2,K.yOffset2)+b([-Ve,he,pe])),K.vangles){fe=K.radialAxisAngle+Ve;var Ye=h(ae,ce)+b(-Ve),at=h(ae,ce)+b(-fe);Z.bg.attr("transform",Ye),Z["radial-grid"].attr("transform",Ye),Z["radial-axis"].attr("transform",at),Z["radial-line"].select("line").attr("transform",at),K.updateRadialAxisTitle(ze,Pe,fe)}else K.clipPaths.forTraces.select("path").attr("transform",h(he,pe)+b(Ve));Ae.each(function(){var $e=M.select(this),wt=t.getTranslate($e);$e.attr("transform",h(wt.x,wt.y)+b([Ve]))}),Se.each(function(){var $e=M.select(this),wt=$e.select("text"),Pt=t.getTranslate($e);$e.attr("transform",b([Ve,wt.attr("x"),wt.attr("y")])+h(Pt.x,Pt.y))}),oe.rotation=T.modHalf(ie,360),K.updateAngularAxis(ze,Pe),K._hasClipOnAxisFalse&&!T.isFullCircle(K.sectorInRad)&&Te.call(t.hideOutsideRangePoints,K);var rt=!1;for(var dt in K.traceHash)if(o.traceIs(dt,"gl")){var vt=K.traceHash[dt],ht=T.filterVisible(vt);vt[0][0].trace._module.plot(Q,K,ht,Pe),ht.length&&(rt=!0)}rt&&(m(Q),_(Q));var et={};De(et),Q.emit("plotly_relayouting",et)}function De(me){me[K.id+".angularaxis.rotation"]=ie,K.vangles&&(me[K.id+".radialaxis.angle"]=fe)}function de(){Se.select("text").attr("transform",null);var me={};De(me),o.call("_guiRelayout",Q,me)}ve.prepFn=function(me,Me,ze){var Pe=X[K.id];se=Pe.angularaxis.rotation;var Ne=be.getBoundingClientRect();we=Me-Ne.left,_e=ze-Ne.top,Q._fullLayout._calcInverseTransform(Q);var Ve=T.apply3DTransform(X._invTransform)(we,_e);we=Ve[0],_e=Ve[1],Ee=ge(we,_e),ve.moveFn=Oe,ve.doneFn=de,v(Q)},K.vangles&&!T.isFullCircle(K.sectorInRad)&&(ve.prepFn=T.noop,y(M.select(be),null)),p.init(ve)},V.isPtInside=function(X){if(this.isSmith)return!0;var K=this.sectorInRad,Q=this.vangles,Z=this.angularAxis.c2g(X.theta),re=this.radialAxis,oe=re.c2l(X.r),ae=re._rl;return(Q?w.isPtInsidePolygon:T.isPtInsideSector)(oe,Z,ae,K,Q)},V.pathArc=function(X){var K=this.sectorInRad,Q=this.vangles;return(Q?w.pathPolygon:T.pathArc)(X,K[0],K[1],Q)},V.pathSector=function(X){var K=this.sectorInRad,Q=this.vangles;return(Q?w.pathPolygon:T.pathSector)(X,K[0],K[1],Q)},V.pathAnnulus=function(X,K){var Q=this.sectorInRad,Z=this.vangles;return(Z?w.pathPolygonAnnulus:T.pathAnnulus)(X,K,Q[0],Q[1],Z)},V.pathSubplot=function(){var X=this.innerRadius,K=this.radius;return X?this.pathAnnulus(X,K):this.pathSector(K)},V.fillViewInitialKey=function(X,K){X in this.viewInitial||(this.viewInitial[X]=K)}},57696:function(ee,z,e){var M=e(3400),k=e(78344),o=M.deg2rad,T=M.rad2deg;ee.exports=function(b,h,s){switch(k(b,s),b._id){case"x":case"radialaxis":(function(t,a){var n=a._subplot;t.setGeometry=function(){var r=t._rl[0],i=t._rl[1],l=n.innerRadius,u=(n.radius-l)/(i-r),p=l/u,c=r>i?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var d=t.c2l(x)-r;return(c(d)?d:0)+p},t.g2c=function(x){return t.l2c(x+r-p)},t.g2p=function(x){return x*u},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(b,h);break;case"angularaxis":(function(t,a){var n=t.type;if(n==="linear"){var r=t.d2c,i=t.c2d;t.d2c=function(l,u){return function(p,c){return c==="degrees"?o(p):p}(r(l),u)},t.c2d=function(l,u){return i(function(p,c){return c==="degrees"?T(p):p}(l,u))}}t.makeCalcdata=function(l,u){var p,c,x=l[u],d=l._length,g=function(f){return t.d2c(f,l.thetaunit)};if(x)for(p=new Array(d),c=0;c<d;c++)p[c]=g(x[c]);else{var v=u+"0",y="d"+u,m=v in l?g(l[v]):0,_=l[y]?g(l[y]):(t.period||2*Math.PI)/d;for(p=new Array(d),c=0;c<d;c++)p[c]=m+c*_}return p},t.setGeometry=function(){var l,u,p,c,x=a.sector,d=x.map(o),g={clockwise:-1,counterclockwise:1}[t.direction],v=o(t.rotation),y=function(S){return g*S+v},m=function(S){return(S-v)/g};switch(n){case"linear":u=l=M.identity,c=o,p=T,t.range=M.isFullCircle(d)?[x[0],x[0]+360]:d.map(m).map(T);break;case"category":var _=t._categories.length,f=t.period?Math.max(t.period,_):_;f===0&&(f=1),u=c=function(S){return 2*S*Math.PI/f},l=p=function(S){return S*f/Math.PI/2},t.range=[0,f]}t.c2g=function(S){return y(u(S))},t.g2c=function(S){return l(m(S))},t.t2g=function(S){return y(c(S))},t.g2t=function(S){return p(m(S))}}})(b,h)}}},55012:function(ee){ee.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(ee){function z(o){return o<0?-1:o>0?1:0}function e(o){var T=o[0],b=o[1];if(!isFinite(T)||!isFinite(b))return[1,0];var h=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/h,2*b/h]}function M(o,T){var b=T[0],h=T[1];return[b*o.radius+o.cx,-h*o.radius+o.cy]}function k(o,T){return T*o.radius}ee.exports={smith:e,reactanceArc:function(o,T,b,h){var s=M(o,e([b,T])),t=s[0],a=s[1],n=M(o,e([h,T])),r=n[0],i=n[1];if(T===0)return["M"+t+","+a,"L"+r+","+i].join(" ");var l=k(o,1/Math.abs(T));return["M"+t+","+a,"A"+l+","+l+" 0 0,"+(T<0?1:0)+" "+r+","+i].join(" ")},resistanceArc:function(o,T,b,h){var s=k(o,1/(T+1)),t=M(o,e([T,b])),a=t[0],n=t[1],r=M(o,e([T,h])),i=r[0],l=r[1];if(z(b)!==z(h)){var u=M(o,e([T,0]));return["M"+a+","+n,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+u[0]+","+u[1],"A"+s+","+s+" 0 0,"+(h<0?0:1)+i+","+l].join(" ")}return["M"+a+","+n,"A"+s+","+s+" 0 0,"+(h<b?0:1)+" "+i+","+l].join(" ")},smithTransform:M}},47788:function(ee,z,e){var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(55012),b=T.attr,h=T.name,s=k(h),t={};t[b]={valType:"subplotid",dflt:h,editType:"calc"},ee.exports={attr:b,name:h,idRoot:h,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(a){for(var n=a._fullLayout,r=a.calcdata,i=n._subplots[h],l=0;l<i.length;l++){var u=i[l],p=M(r,h,u),c=n[u]._subplot;c||(c=o(a,u,!0),n[u]._subplot=c),c.plot(p,n,a._promises)}},clean:function(a,n,r,i){for(var l=i._subplots[h]||[],u=0;u<l.length;u++){var p=l[u],c=i[p]._subplot;if(!n[p]&&c)for(var x in c.framework.remove(),c.clipPaths)c.clipPaths[x].remove()}},toSVG:e(57952).toSVG}},6183:function(ee,z,e){var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,h=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},h,s),a=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},h,s);ee.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:t,imaginaryaxis:a,editType:"calc"}},22836:function(ee,z,e){var M,k,o,T=e(3400),b=e(76308),h=e(31780),s=e(168),t=e(84888).op,a=e(42568),n=e(95936),r=e(42136),i=e(78344),l=e(6183),u=e(55012),p=u.axisNames,c=(M=function(d){return T.isTypedArray(d)&&(d=Array.from(d)),d.slice().reverse().map(function(g){return-g}).concat([0]).concat(d)},k=String,o={},function(d){var g=k?k(d):d;if(g in o)return o[g];var v=M(d);return o[g]=v,v});function x(d,g,v,y){var m=v("bgcolor");y.bgColor=b.combine(m,y.paper_bgcolor);var _,f=t(y.fullData,u.name,y.id),S=y.layoutOut;function w(V,U){return v(_+"."+V,U)}for(var E=0;E<p.length;E++){_=p[E],T.isPlainObject(d[_])||(d[_]={});var O=d[_],C=h.newContainer(g,_);C._id=C._name=_,C._attr=y.id+"."+_,C._traceIndices=f.map(function(V){return V._expandedIndex});var P=w("visible");if(C.type="linear",i(C,S),a(O,C,w,C.type),P){var R,j,D,N,W=_==="realaxis";W&&w("side"),W?w("tickvals"):w("tickvals",c(g.realaxis.tickvals||l.realaxis.tickvals.dflt)),T.isTypedArray(C.tickvals)&&(C.tickvals=Array.from(C.tickvals));var F=y.font||{};P&&(j=(R=w("color"))===O.color?R:F.color,D=F.size,N=F.family),n(O,C,w,C.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!W,noExp:!0,font:{color:j,size:D,family:N}}),T.coerce2(d,g,l,_+".ticklen"),T.coerce2(d,g,l,_+".tickwidth"),T.coerce2(d,g,l,_+".tickcolor",g.color),w("ticks")||(delete g[_].ticklen,delete g[_].tickwidth,delete g[_].tickcolor),r(O,C,w,{dfltColor:R,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[_]}),w("layer")}w("hoverformat"),delete C.type,C._input=O}}ee.exports=function(d,g,v){s(d,g,v,{noUirevision:!0,type:u.name,attributes:l,handleDefaults:x,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:v,layoutOut:g})}},168:function(ee,z,e){var M=e(3400),k=e(31780),o=e(86968).Q;ee.exports=function(T,b,h,s){var t,a,n=s.type,r=s.attributes,i=s.handleDefaults,l=s.partition||"x",u=b._subplots[n],p=u.length,c=p&&u[0].replace(/\d+$/,"");function x(y,m){return M.coerce(t,a,r,y,m)}for(var d=0;d<p;d++){var g=u[d];t=T[g]?T[g]:T[g]={},a=k.newContainer(b,g,c),s.noUirevision||x("uirevision",b.uirevision);var v={};v[l]=[d/p,(d+1)/p],o(a,b,x,v),s.id=g,i(t,a,x,s)}}},21776:function(ee,z,e){var M=e(26880);function k(o){var T=o.description?" "+o.description:"",b=o.keys||[];if(b.length>0){for(var h=[],s=0;s<b.length;s++)h[s]="`"+b[s]+"`";T+="Finally, the template string has access to ",T=b.length===1?T+"variable "+h[0]:T+"variables "+h.slice(0,-1).join(", ")+" and "+h.slice(-1)+"."}return T}M.FORMAT_LINK,M.DATE_FORMAT_LINK,z.Ks=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"none"};return o.arrayOk!==!1&&(b.arrayOk=!0),b},z.Gw=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"calc"};return o.arrayOk!==!1&&(b.arrayOk=!0),b},z.ye=function(o,T){return T=T||{},(o=o||{}).newshape,k(T),{valType:"string",dflt:"",editType:o.editType||"arraydraw"}}},19352:function(ee,z,e){var M=e(24696),k=e(84888).KY,o=e(3400).counterRegex,T="ternary";z.name=T;var b=z.attr="subplot";z.idRoot=T,z.idRegex=z.attrRegex=o(T),(z.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},z.layoutAttributes=e(86379),z.supplyLayoutDefaults=e(38536),z.plot=function(h){for(var s=h._fullLayout,t=h.calcdata,a=s._subplots[T],n=0;n<a.length;n++){var r=a[n],i=k(t,T,r),l=s[r]._subplot;l||(l=new M({id:r,graphDiv:h,container:s._ternarylayer.node()},s),s[r]._subplot=l),l.plot(i,s,h._promises)}},z.clean=function(h,s,t,a){for(var n=a._subplots[T]||[],r=0;r<n.length;r++){var i=n[r],l=a[i]._subplot;!s[i]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(ee,z,e){var M=e(22548),k=e(86968).u,o=e(94724),T=e(67824).overrideAll,b=e(92880).extendFlat,h={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:b({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:b({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:b({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},s=ee.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:h,baxis:h,caxis:h},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},38536:function(ee,z,e){var M=e(76308),k=e(31780),o=e(3400),T=e(168),b=e(95936),h=e(42568),s=e(25404),t=e(26332),a=e(42136),n=e(86379),r=["aaxis","baxis","caxis"];function i(u,p,c,x){var d,g,v,y=c("bgcolor"),m=c("sum");x.bgColor=M.combine(y,x.paper_bgcolor);for(var _=0;_<r.length;_++)g=u[d=r[_]]||{},(v=k.newContainer(p,d))._name=d,l(g,v,x,p);var f=p.aaxis,S=p.baxis,w=p.caxis;f.min+S.min+w.min>=m&&(f.min=0,S.min=0,w.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function l(u,p,c,x){var d=n[p._name];function g(S,w){return o.coerce(u,p,d,S,w)}g("uirevision",x.uirevision),p.type="linear";var v=g("color"),y=v!==d.color.dflt?v:c.font.color,m=p._name.charAt(0).toUpperCase(),_="Component "+m,f=g("title.text",_);p._hovertitle=f===_?f:m,o.coerceFont(g,"title.font",{weight:c.font.weight,style:c.font.style,variant:c.font.variant,family:c.font.family,size:o.bigFont(c.font.size),color:y}),g("min"),t(u,p,g,"linear"),h(u,p,g,"linear"),b(u,p,g,"linear",{noAutotickangles:!0}),s(u,p,g,{outerTicks:!0}),g("showticklabels")&&(o.coerceFont(g,"tickfont",{weight:c.font.weight,style:c.font.style,variant:c.font.variant,family:c.font.family,size:c.font.size,color:y}),g("tickangle"),g("tickformat")),a(u,p,g,{dfltColor:v,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d}),g("hoverformat"),g("layer")}ee.exports=function(u,p,c){T(u,p,c,{type:"ternary",attributes:n,handleDefaults:i,font:p.font,paper_bgcolor:p.paper_bgcolor})}},24696:function(ee,z,e){var M=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strTranslate,h=T._,s=e(76308),t=e(43616),a=e(78344),n=e(92880).extendFlat,r=e(7316),i=e(54460),l=e(86476),u=e(93024),p=e(72760),c=p.freeMode,x=p.rectMode,d=e(81668),g=e(22676).prepSelect,v=e(22676).selectOnClick,y=e(22676).clearOutline,m=e(22676).clearSelectionsCache,_=e(33816);function f(D,N){this.id=D.id,this.graphDiv=D.graphDiv,this.init(N),this.makeFramework(N),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ee.exports=f;var S=f.prototype;S.init=function(D){this.container=D._ternarylayer,this.defs=D._defs,this.layoutId=D._uid,this.traceHash={},this.layers={}},S.plot=function(D,N){var W=this,F=N[W.id],V=N._size;W._hasClipOnAxisFalse=!1;for(var U=0;U<D.length;U++)if(D[U][0].trace.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}W.updateLayers(F),W.adjustLayout(F,V),r.generalUpdatePerTraceModule(W.graphDiv,W,D,F),W.layers.plotbg.select("path").call(s.fill,F.bgcolor)},S.makeFramework=function(D){var N=this,W=N.graphDiv,F=D[N.id],V=N.clipId="clip"+N.layoutId+N.id,U=N.clipIdRelative="clip-relative"+N.layoutId+N.id;N.clipDef=T.ensureSingleById(D._clips,"clipPath",V,function(te){te.append("path").attr("d","M0,0Z")}),N.clipDefRelative=T.ensureSingleById(D._clips,"clipPath",U,function(te){te.append("path").attr("d","M0,0Z")}),N.plotContainer=T.ensureSingle(N.container,"g",N.id),N.updateLayers(F),t.setClipUrl(N.layers.backplot,V,W),t.setClipUrl(N.layers.grids,V,W)},S.updateLayers=function(D){var N=this.layers,W=["draglayer","plotbg","backplot","grids"];D.aaxis.layer==="below traces"&&W.push("aaxis","aline"),D.baxis.layer==="below traces"&&W.push("baxis","bline"),D.caxis.layer==="below traces"&&W.push("caxis","cline"),W.push("frontplot"),D.aaxis.layer==="above traces"&&W.push("aaxis","aline"),D.baxis.layer==="above traces"&&W.push("baxis","bline"),D.caxis.layer==="above traces"&&W.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(W,String),V=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(U){return"toplevel "+U}).each(function(U){var te=M.select(this);N[U]=te,U==="frontplot"?te.append("g").classed("scatterlayer",!0):U==="backplot"?te.append("g").classed("maplayer",!0):U==="plotbg"?te.append("path").attr("d","M0,0Z"):U==="aline"||U==="bline"||U==="cline"?te.append("path"):U==="grids"&&V.forEach(function(J){N[J]=te.append("g").classed("grid "+J,!0)})}),F.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(D,N){var W,F,V,U,te,J,X=this,K=D.domain,Q=(K.x[0]+K.x[1])/2,Z=(K.y[0]+K.y[1])/2,re=K.x[1]-K.x[0],oe=K.y[1]-K.y[0],ae=re*N.w,ce=oe*N.h,he=D.sum,pe=D.aaxis.min,xe=D.baxis.min,be=D.caxis.min;ae>w*ce?V=(U=ce)*w:U=(V=ae)/w,te=re*V/ae,J=oe*U/ce,W=N.l+N.w*Q-V/2,F=N.t+N.h*(1-Z)-U/2,X.x0=W,X.y0=F,X.w=V,X.h=U,X.sum=he,X.xaxis={type:"linear",range:[pe+2*be-he,he-pe-2*xe],domain:[Q-te/2,Q+te/2],_id:"x"},a(X.xaxis,X.graphDiv._fullLayout),X.xaxis.setScale(),X.xaxis.isPtWithinRange=function(Se){return Se.a>=X.aaxis.range[0]&&Se.a<=X.aaxis.range[1]&&Se.b>=X.baxis.range[1]&&Se.b<=X.baxis.range[0]&&Se.c>=X.caxis.range[1]&&Se.c<=X.caxis.range[0]},X.yaxis={type:"linear",range:[pe,he-xe-be],domain:[Z-J/2,Z+J/2],_id:"y"},a(X.yaxis,X.graphDiv._fullLayout),X.yaxis.setScale(),X.yaxis.isPtWithinRange=function(){return!0};var ve=X.yaxis.domain[0],ge=X.aaxis=n({},D.aaxis,{range:[pe,he-xe-be],side:"left",tickangle:(+D.aaxis.tickangle||0)-30,domain:[ve,ve+J*w],anchor:"free",position:0,_id:"y",_length:V});a(ge,X.graphDiv._fullLayout),ge.setScale();var we=X.baxis=n({},D.baxis,{range:[he-pe-be,xe],side:"bottom",domain:X.xaxis.domain,anchor:"free",position:0,_id:"x",_length:V});a(we,X.graphDiv._fullLayout),we.setScale();var _e=X.caxis=n({},D.caxis,{range:[he-pe-xe,be],side:"right",tickangle:(+D.caxis.tickangle||0)+30,domain:[ve,ve+J*w],anchor:"free",position:0,_id:"y",_length:V});a(_e,X.graphDiv._fullLayout),_e.setScale();var se="M"+W+","+(F+U)+"h"+V+"l-"+V/2+",-"+U+"Z";X.clipDef.select("path").attr("d",se),X.layers.plotbg.select("path").attr("d",se);var ie="M0,"+U+"h"+V+"l-"+V/2+",-"+U+"Z";X.clipDefRelative.select("path").attr("d",ie);var fe=b(W,F);X.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",fe),X.clipDefRelative.select("path").attr("transform",null);var Ee=b(W-we._offset,F+U);X.layers.baxis.attr("transform",Ee),X.layers.bgrid.attr("transform",Ee);var Te=b(W+V/2,F)+"rotate(30)"+b(0,-ge._offset);X.layers.aaxis.attr("transform",Te),X.layers.agrid.attr("transform",Te);var Ae=b(W+V/2,F)+"rotate(-30)"+b(0,-_e._offset);X.layers.caxis.attr("transform",Ae),X.layers.cgrid.attr("transform",Ae),X.drawAxes(!0),X.layers.aline.select("path").attr("d",ge.showline?"M"+W+","+(F+U)+"l"+V/2+",-"+U:"M0,0").call(s.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),X.layers.bline.select("path").attr("d",we.showline?"M"+W+","+(F+U)+"h"+V:"M0,0").call(s.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),X.layers.cline.select("path").attr("d",_e.showline?"M"+(W+V/2)+","+F+"l"+V/2+","+U:"M0,0").call(s.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),X.graphDiv._context.staticPlot||X.initInteractions(),t.setClipUrl(X.layers.frontplot,X._hasClipOnAxisFalse?null:X.clipId,X.graphDiv)},S.drawAxes=function(D){var N=this,W=N.graphDiv,F=N.id.substr(7)+"title",V=N.layers,U=N.aaxis,te=N.baxis,J=N.caxis;if(N.drawAx(U),N.drawAx(te),N.drawAx(J),D){var X=Math.max(U.showticklabels?U.tickfont.size/2:0,(J.showticklabels?.75*J.tickfont.size:0)+(J.ticks==="outside"?.87*J.ticklen:0)),K=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;V["a-title"]=d.draw(W,"a"+F,{propContainer:U,propName:N.id+".aaxis.title",placeholder:h(W,"Click to enter Component A title"),attributes:{x:N.x0+N.w/2,y:N.y0-U.title.font.size/3-X,"text-anchor":"middle"}}),V["b-title"]=d.draw(W,"b"+F,{propContainer:te,propName:N.id+".baxis.title",placeholder:h(W,"Click to enter Component B title"),attributes:{x:N.x0-K,y:N.y0+N.h+.83*te.title.font.size+K,"text-anchor":"middle"}}),V["c-title"]=d.draw(W,"c"+F,{propContainer:J,propName:N.id+".caxis.title",placeholder:h(W,"Click to enter Component C title"),attributes:{x:N.x0+N.w+K,y:N.y0+N.h+.83*J.title.font.size+K,"text-anchor":"middle"}})}},S.drawAx=function(D){var N,W=this,F=W.graphDiv,V=D._name,U=V.charAt(0),te=D._id,J=W.layers[V],X=U+"tickLayout",K=(N=D).ticks+String(N.ticklen)+String(N.showticklabels);W[X]!==K&&(J.selectAll("."+te+"tick").remove(),W[X]=K),D.setScale();var Q=i.calcTicks(D),Z=i.clipEnds(D,Q),re=i.makeTransTickFn(D),oe=i.getTickSigns(D)[2],ae=T.deg2rad(30),ce=oe*(D.linewidth||1)/2,he=oe*D.ticklen,pe=W.w,xe=W.h,be=U==="b"?"M0,"+ce+"l"+Math.sin(ae)*he+","+Math.cos(ae)*he:"M"+ce+",0l"+Math.cos(ae)*he+","+-Math.sin(ae)*he,ve={a:"M0,0l"+xe+",-"+pe/2,b:"M0,0l-"+pe/2+",-"+xe,c:"M0,0l-"+xe+","+pe/2}[U];i.drawTicks(F,D,{vals:D.ticks==="inside"?Z:Q,layer:J,path:be,transFn:re,crisp:!1}),i.drawGrid(F,D,{vals:Z,layer:W.layers[U+"grid"],path:ve,transFn:re,crisp:!1}),i.drawLabels(F,D,{vals:Q,layer:J,transFn:re,labelFns:i.makeLabelFns(D,0,30)})};var E=_.MINZOOM/2+.87,O="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",R=!0;function j(D){M.select(D).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),y(this.dragOptions.gd)},S.initInteractions=function(){var D,N,W,F,V,U,te,J,X,K,Q,Z,re=this,oe=re.layers.plotbg.select("path").node(),ae=re.graphDiv,ce=ae._fullLayout._zoomlayer;function he(ie){var fe={};return fe[re.id+".aaxis.min"]=ie.a,fe[re.id+".baxis.min"]=ie.b,fe[re.id+".caxis.min"]=ie.c,fe}function pe(ie,fe){var Ee=ae._fullLayout.clickmode;j(ae),ie===2&&(ae.emit("plotly_doubleclick",null),o.call("_guiRelayout",ae,he({a:0,b:0,c:0}))),Ee.indexOf("select")>-1&&ie===1&&v(fe,ae,[re.xaxis],[re.yaxis],re.id,re.dragOptions),Ee.indexOf("event")>-1&&u.click(ae,fe,re.id)}function xe(ie,fe){return 1-fe/re.h}function be(ie,fe){return 1-(ie+(re.h-fe)/Math.sqrt(3))/re.w}function ve(ie,fe){return(ie-(re.h-fe)/Math.sqrt(3))/re.w}function ge(ie,fe){var Ee=W+ie*D,Te=F+fe*N,Ae=Math.max(0,Math.min(1,xe(0,F),xe(0,Te))),Se=Math.max(0,Math.min(1,be(W,F),be(Ee,Te))),Oe=Math.max(0,Math.min(1,ve(W,F),ve(Ee,Te))),De=(Ae/2+Oe)*re.w,de=(1-Ae/2-Se)*re.w,me=(De+de)/2,Me=de-De,ze=(1-Ae)*re.h,Pe=ze-Me/w;Me<_.MINZOOM?(te=V,Q.attr("d",X),Z.attr("d","M0,0Z")):(te={a:V.a+Ae*U,b:V.b+Se*U,c:V.c+Oe*U},Q.attr("d",X+"M"+De+","+ze+"H"+de+"L"+me+","+Pe+"L"+De+","+ze+"Z"),Z.attr("d","M"+W+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+De+","+ze+O+"M"+de+","+ze+C+"M"+me+","+Pe+P)),K||(Q.transition().style("fill",J>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Z.transition().style("opacity",1).duration(200),K=!0),ae.emit("plotly_relayouting",he(te))}function we(){j(ae),te!==V&&(o.call("_guiRelayout",ae,he(te)),R&&ae.data&&ae._context.showTips&&(T.notifier(h(ae,"Double-click to zoom back out"),"long"),R=!1))}function _e(ie,fe){var Ee=ie/re.xaxis._m,Te=fe/re.yaxis._m,Ae=[(te={a:V.a-Te,b:V.b+(Ee+Te)/2,c:V.c-(Ee-Te)/2}).a,te.b,te.c].sort(T.sorterAsc),Se=Ae.indexOf(te.a),Oe=Ae.indexOf(te.b),De=Ae.indexOf(te.c);Ae[0]<0&&(Ae[1]+Ae[0]/2<0?(Ae[2]+=Ae[0]+Ae[1],Ae[0]=Ae[1]=0):(Ae[2]+=Ae[0]/2,Ae[1]+=Ae[0]/2,Ae[0]=0),te={a:Ae[Se],b:Ae[Oe],c:Ae[De]},fe=(V.a-te.a)*re.yaxis._m,ie=(V.c-te.c-V.b+te.b)*re.xaxis._m);var de=b(re.x0+ie,re.y0+fe);re.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",de);var me=b(-ie,-fe);re.clipDefRelative.select("path").attr("transform",me),re.aaxis.range=[te.a,re.sum-te.b-te.c],re.baxis.range=[re.sum-te.a-te.c,te.b],re.caxis.range=[re.sum-te.a-te.b,te.c],re.drawAxes(!1),re._hasClipOnAxisFalse&&re.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,re),ae.emit("plotly_relayouting",he(te))}function se(){o.call("_guiRelayout",ae,he(te))}this.dragOptions={element:oe,gd:ae,plotinfo:{id:re.id,domain:ae._fullLayout[re.id].domain,xaxis:re.xaxis,yaxis:re.yaxis},subplot:re.id,prepFn:function(ie,fe,Ee){re.dragOptions.xaxes=[re.xaxis],re.dragOptions.yaxes=[re.yaxis],D=ae._fullLayout._invScaleX,N=ae._fullLayout._invScaleY;var Te=re.dragOptions.dragmode=ae._fullLayout.dragmode;c(Te)?re.dragOptions.minDrag=1:re.dragOptions.minDrag=void 0,Te==="zoom"?(re.dragOptions.moveFn=ge,re.dragOptions.clickFn=pe,re.dragOptions.doneFn=we,function(Ae,Se,Oe){var De=oe.getBoundingClientRect();W=Se-De.left,F=Oe-De.top,ae._fullLayout._calcInverseTransform(ae);var de=ae._fullLayout._invTransform,me=T.apply3DTransform(de)(W,F);W=me[0],F=me[1],V={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=V,U=re.aaxis.range[1]-V.a,J=k(re.graphDiv._fullLayout[re.id].bgcolor).getLuminance(),X="M0,"+re.h+"L"+re.w/2+", 0L"+re.w+","+re.h+"Z",K=!1,Q=ce.append("path").attr("class","zoombox").attr("transform",b(re.x0,re.y0)).style({fill:J>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",X),Z=ce.append("path").attr("class","zoombox-corners").attr("transform",b(re.x0,re.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),re.clearOutline(ae)}(0,fe,Ee)):Te==="pan"?(re.dragOptions.moveFn=_e,re.dragOptions.clickFn=pe,re.dragOptions.doneFn=se,V={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=V,re.clearOutline(ae)):(x(Te)||c(Te))&&g(ie,fe,Ee,re.dragOptions,Te)}},oe.onmousemove=function(ie){u.hover(ae,ie,re.id),ae._fullLayout._lasthover=oe,ae._fullLayout._hoversubplot=re.id},oe.onmouseout=function(ie){ae._dragging||l.unhover(ae,ie)},l.init(this.dragOptions)}},24040:function(ee,z,e){var M=e(24248),k=e(16628),o=e(52416),T=e(63620),b=e(52200).addStyleRule,h=e(92880),s=e(45464),t=e(64859),a=h.extendFlat,n=h.extendDeepAll;function r(v){var y=v.name,m=v.categories,_=v.meta;if(z.modules[y])M.log("Type "+y+" already registered");else{z.subplotsRegistry[v.basePlotModule.name]||function(R){var j=R.name;if(z.subplotsRegistry[j])M.log("Plot type "+j+" already registered.");else for(var D in p(R),z.subplotsRegistry[j]=R,z.componentsRegistry)d(D,R.name)}(v.basePlotModule);for(var f={},S=0;S<m.length;S++)f[m[S]]=!0,z.allCategories[m[S]]=!0;for(var w in z.modules[y]={_module:v,categories:f},_&&Object.keys(_).length&&(z.modules[y].meta=_),z.allTypes.push(y),z.componentsRegistry)c(w,y);v.layoutAttributes&&a(z.traceLayoutAttributes,v.layoutAttributes);var E=v.basePlotModule,O=E.name;if(O==="mapbox"){var C=E.constants.styleRules;for(var P in C)b(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}O!=="geo"&&O!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function i(v){if(typeof v.name!="string")throw new Error("Component module *name* must be a string.");var y=v.name;for(var m in z.componentsRegistry[y]=v,v.layoutAttributes&&(v.layoutAttributes._isLinkedToArray&&o(z.layoutArrayContainers,y),p(v)),z.modules)c(y,m);for(var _ in z.subplotsRegistry)d(y,_);for(var f in z.transformsRegistry)x(y,f);v.schema&&v.schema.layout&&n(t,v.schema.layout)}function l(v){if(typeof v.name!="string")throw new Error("Transform module *name* must be a string.");var y="Transform module "+v.name,m=typeof v.transform=="function",_=typeof v.calcTransform=="function";if(!m&&!_)throw new Error(y+" is missing a *transform* or *calcTransform* method.");for(var f in m&&_&&M.log([y+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(v.attributes)||M.log(y+" registered without an *attributes* object."),typeof v.supplyDefaults!="function"&&M.log(y+" registered without a *supplyDefaults* method."),z.transformsRegistry[v.name]=v,z.componentsRegistry)x(f,v.name)}function u(v){var y=v.name,m=y.split("-")[0],_=v.dictionary,f=v.format,S=_&&Object.keys(_).length,w=f&&Object.keys(f).length,E=z.localeRegistry,O=E[y];if(O||(E[y]=O={}),m!==y){var C=E[m];C||(E[m]=C={}),S&&C.dictionary===O.dictionary&&(C.dictionary=_),w&&C.format===O.format&&(C.format=f)}S&&(O.dictionary=_),w&&(O.format=f)}function p(v){if(v.layoutAttributes){var y=v.layoutAttributes._arrayAttrRegexps;if(y)for(var m=0;m<y.length;m++)o(z.layoutArrayRegexes,y[m])}}function c(v,y){var m=z.componentsRegistry[v].schema;if(m&&m.traces){var _=m.traces[y];_&&n(z.modules[y]._module.attributes,_)}}function x(v,y){var m=z.componentsRegistry[v].schema;if(m&&m.transforms){var _=m.transforms[y];_&&n(z.transformsRegistry[y].attributes,_)}}function d(v,y){var m=z.componentsRegistry[v].schema;if(m&&m.subplots){var _=z.subplotsRegistry[y],f=_.layoutAttributes,S=_.attr==="subplot"?_.name:_.attr;Array.isArray(S)&&(S=S[0]);var w=m.subplots[S];f&&w&&n(f,w)}}function g(v){return typeof v=="object"&&(v=v.type),v}z.modules={},z.allCategories={},z.allTypes=[],z.subplotsRegistry={},z.transformsRegistry={},z.componentsRegistry={},z.layoutArrayContainers=[],z.layoutArrayRegexes=[],z.traceLayoutAttributes={},z.localeRegistry={},z.apiMethodRegistry={},z.collectableSubplotTypes=null,z.register=function(v){if(z.collectableSubplotTypes=null,!v)throw new Error("No argument passed to Plotly.register.");v&&!Array.isArray(v)&&(v=[v]);for(var y=0;y<v.length;y++){var m=v[y];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":r(m);break;case"transform":l(m);break;case"component":i(m);break;case"locale":u(m);break;case"apiMethod":var _=m.name;z.apiMethodRegistry[_]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},z.getModule=function(v){var y=z.modules[g(v)];return!!y&&y._module},z.traceIs=function(v,y){if((v=g(v))==="various")return!1;var m=z.modules[v];return m||(v&&M.log("Unrecognized trace type "+v+"."),m=z.modules[s.type.dflt]),!!m.categories[y]},z.getTransformIndices=function(v,y){for(var m=[],_=v.transforms||[],f=0;f<_.length;f++)_[f].type===y&&m.push(f);return m},z.hasTransform=function(v,y){for(var m=v.transforms||[],_=0;_<m.length;_++)if(m[_].type===y)return!0;return!1},z.getComponentMethod=function(v,y){var m=z.componentsRegistry[v];return m&&m[y]||k},z.call=function(){var v=arguments[0],y=[].slice.call(arguments,1);return z.apiMethodRegistry[v].apply(null,y)}},91536:function(ee,z,e){var M=e(24040),k=e(3400),o=k.extendFlat,T=k.extendDeep;function b(h){var s;switch(h){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}ee.exports=function(h,s){var t,a,n=h.data,r=h.layout,i=T([],n),l=T({},r,b(s.tileClass)),u=h._context||{};if(s.width&&(l.width=s.width),s.height&&(l.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){l.annotations=[];var p=Object.keys(l);for(t=0;t<p.length;t++)a=p[t],["xaxis","yaxis","zaxis"].indexOf(a.slice(0,5))>-1&&(l[p[t]].title={text:""});for(t=0;t<i.length;t++){var c=i[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),M.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)l.annotations.push(s.annotations[t]);var x=Object.keys(l).filter(function(m){return m.match(/^scene\d*$/)});if(x.length){var d={};for(s.tileClass==="thumbnail"&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var g=l[x[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),o(g.xaxis,d),o(g.yaxis,d),o(g.zaxis,d),g._scene=null}}var v=document.createElement("div");s.tileClass&&(v.className=s.tileClass);var y={gd:v,td:v,layout:l,data:i,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return s.setBackground!=="transparent"&&(y.config.setBackground=s.setBackground||"opaque"),y.gd.defaultLayout=b(s.tileClass),y}},39792:function(ee,z,e){var M=e(3400),k=e(67024),o=e(48616),T=e(81792);ee.exports=function(b,h){var s;return M.isPlainObject(b)||(s=M.getGraphDiv(b)),(h=h||{}).format=h.format||"png",h.width=h.width||null,h.height=h.height||null,h.imageDataOnly=!0,new Promise(function(t,a){s&&s._snapshotInProgress&&a(new Error("Snapshotting already in progress.")),M.isIE()&&h.format!=="svg"&&a(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var n=k(b,h),r=h.filename||b.fn||"newplot";r+="."+h.format.replace("-","."),n.then(function(i){return s&&(s._snapshotInProgress=!1),o(i,r,h.format)}).then(function(i){t(i)}).catch(function(i){s&&(s._snapshotInProgress=!1),a(i)})})}},48616:function(ee,z,e){var M=e(3400),k=e(81792);ee.exports=function(o,T,b){var h=document.createElement("a"),s="download"in h;return new Promise(function(t,a){var n,r;if(M.isIE())return n=k.createBlob(o,"svg"),window.navigator.msSaveBlob(n,T),n=null,t(T);if(s)return n=k.createBlob(o,b),r=k.createObjectURL(n),h.href=r,h.download=T,document.body.appendChild(h),h.click(),document.body.removeChild(h),k.revokeObjectURL(r),n=null,t(T);if(M.isSafari()){var i=b==="svg"?",":";base64,";return k.octetStream(i+encodeURIComponent(o)),t(T)}a(new Error("download error"))})}},81792:function(ee,z,e){var M=e(24040);z.getDelay=function(o){return o._has&&(o._has("gl3d")||o._has("gl2d")||o._has("mapbox"))?500:0},z.getRedrawFunc=function(o){return function(){M.getComponentMethod("colorbar","draw")(o)}},z.encodeSVG=function(o){return"data:image/svg+xml,"+encodeURIComponent(o)},z.encodeJSON=function(o){return"data:application/json,"+encodeURIComponent(o)};var k=window.URL||window.webkitURL;z.createObjectURL=function(o){return k.createObjectURL(o)},z.revokeObjectURL=function(o){return k.revokeObjectURL(o)},z.createBlob=function(o,T){if(T==="svg")return new window.Blob([o],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([o],{type:"application/json;charset=utf-8"});var b=function(h){for(var s=h.length,t=new ArrayBuffer(s),a=new Uint8Array(t),n=0;n<s;n++)a[n]=h.charCodeAt(n);return t}(window.atob(o));return new window.Blob([b],{type:"image/"+T})},z.octetStream=function(o){document.location.href="data:application/octet-stream"+o},z.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,z.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(ee,z,e){var M=e(81792),k={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};ee.exports=k},63268:function(ee,z,e){var M=e(3400),k=e(61252).EventEmitter,o=e(81792);ee.exports=function(T){var b=T.emitter||new k,h=new Promise(function(s,t){var a=window.Image,n=T.svg,r=T.format||"png";if(M.isIE()&&r!=="svg"){var i=new Error(o.MSG_IE_BAD_FORMAT);return t(i),T.promise?h:b.emit("error",i)}var l,u,p=T.canvas,c=T.scale||1,x=T.width||300,d=T.height||150,g=c*x,v=c*d,y=p.getContext("2d",{willReadFrequently:!0}),m=new a;r==="svg"||M.isSafari()?u=o.encodeSVG(n):(l=o.createBlob(n,"svg"),u=o.createObjectURL(l)),p.width=g,p.height=v,m.onload=function(){var _;switch(l=null,o.revokeObjectURL(u),r!=="svg"&&y.drawImage(m,0,0,g,v),r){case"jpeg":_=p.toDataURL("image/jpeg");break;case"png":_=p.toDataURL("image/png");break;case"webp":_=p.toDataURL("image/webp");break;case"svg":_=u;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!T.promise)return b.emit("error",f)}s(_),T.promise||b.emit("success",_)},m.onerror=function(_){if(l=null,o.revokeObjectURL(u),t(_),!T.promise)return b.emit("error",_)},m.src=u});return T.promise?h:b}},61808:function(ee,z,e){var M=e(61252).EventEmitter,k=e(24040),o=e(3400),T=e(81792),b=e(91536),h=e(37164),s=e(63268);ee.exports=function(t,a){var n=new M,r=b(t,{format:"png"}),i=r.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var l=T.getRedrawFunc(i);return k.call("_doPlot",i,r.data,r.layout,r.config).then(l).then(function(){var u=T.getDelay(i._fullLayout);setTimeout(function(){var p=h(i),c=document.createElement("canvas");c.id=o.randstr(),(n=s({format:a.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:c,emitter:n,svg:p})).clean=function(){i&&document.body.removeChild(i)}},u)}).catch(function(u){n.emit("error",u)}),n}},37164:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(76308),b=e(9616),h=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");ee.exports=function(a,n,r){var i,l=a._fullLayout,u=l._paper,p=l._toppaper,c=l.width,x=l.height;u.insert("rect",":first-child").call(o.setRect,0,0,c,x).call(T.fill,l.paper_bgcolor);var d=l._basePlotModules||[];for(i=0;i<d.length;i++){var g=d[i];g.toSVG&&g.toSVG(a)}if(p){var v=p.node().childNodes,y=Array.prototype.slice.call(v);for(i=0;i<y.length;i++){var m=y[i];m.childNodes.length&&u.node().appendChild(m)}}l._draggers&&l._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var f=M.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){f.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&f.style("font-family",S.replace(h,s));var w=this.style.fontWeight;w&&w==="normal"&&f.style("font-weight",void 0);var E=this.style.fontStyle;E&&E==="normal"&&f.style("font-style",void 0);var O=this.style.fontVariant;O&&O==="normal"&&f.style("font-variant",void 0)}else f.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var f=M.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&f.style("fill",S.replace(h,s));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&f.style("stroke",w.replace(h,s))}),n!=="pdf"&&n!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(b.xmlns,"xmlns",b.svg),u.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),n==="svg"&&r&&(u.attr("width",r*c),u.attr("height",r*x),u.attr("viewBox","0 0 "+c+" "+x));var _=new window.XMLSerializer().serializeToString(u.node());return _=(_=(_=function(f){var S=M.select("body").append("div").style({display:"none"}).html(""),w=f.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),w}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},84664:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){M.mergeArray(b.opacity,k,"mo",!0),M.mergeArray(b.color,k,"mc");var h=b.line;h&&(M.mergeArray(h.color,k,"mlc"),M.mergeArrayCastPositive(h.width,k,"mlw"))}}},20832:function(ee,z,e){var M=e(52904),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(49084),h=e(25376),s=e(78048),t=e(98192).c,a=e(92880).extendFlat,n=h({editType:"calc",arrayOk:!0,colorEditType:"style"}),r=a({},M.marker.line.width,{dflt:0}),i=a({width:r,editType:"calc"},b("marker.line")),l=a({line:i,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});ee.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:M.hovertext,hovertemplate:o({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:a({},n,{}),insidetextfont:a({},n,{}),outsidetextfont:a({},n,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},zorder:M.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(ee,z,e){var M=e(54460),k=e(1220),o=e(94288).hasColorscale,T=e(47128),b=e(84664),h=e(4500);ee.exports=function(s,t){var a,n,r,i,l,u,p=M.getFromId(s,t.xaxis||"x"),c=M.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(a=p.makeCalcdata(t,"x",x),r=c.makeCalcdata(t,"y"),i=k(t,c,"y",r),l=!!t.yperiodalignment,u="y"):(a=c.makeCalcdata(t,"y",x),r=p.makeCalcdata(t,"x"),i=k(t,p,"x",r),l=!!t.xperiodalignment,u="x"),n=i.vals;for(var d=Math.min(n.length,a.length),g=new Array(d),v=0;v<d;v++)g[v]={p:n[v],s:a[v]},l&&(g[v].orig_p=r[v],g[v][u+"End"]=i.ends[v],g[v][u+"Start"]=i.starts[v]),t.ids&&(g[v].id=String(t.ids[v]));return o(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(g,t),h(g,t),g}},78048:function(ee){ee.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(ee,z,e){var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(24040),b=e(54460),h=e(71888).getAxisGroup,s=e(72592);function t(d,g,v,y,m){if(y.length){var _,f,S,w;switch(function(E,O){var C,P;for(C=0;C<O.length;C++){var R,j=O[C],D=j[0].trace,N=D.type==="funnel"?D._base:D.base,W=D.orientation==="h"?D.xcalendar:D.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(N)){for(P=0;P<Math.min(N.length,j.length);P++)R=F(N[P],0,W),M(R)?(j[P].b=+R,j[P].hasB=1):j[P].b=0;for(;P<j.length;P++)j[P].b=0}else{R=F(N,0,W);var V=M(R);for(R=V?R:0,P=0;P<j.length;P++)j[P].b=R,V&&(j[P].hasB=1)}}}(v,y),m.mode){case"overlay":a(g,v,y,m);break;case"group":for(_=[],f=[],S=0;S<y.length;S++)(w=y[S])[0].trace.offset===void 0?f.push(w):_.push(w);f.length&&function(E,O,C,P,R){var j=new s(P,{posAxis:O,sepNegVal:!1,overlapNoMerge:!R.norm});(function(D,N,W,F){for(var V=D._fullLayout,U=W.positions,te=W.distinctPositions,J=W.minDiff,X=W.traces,K=X.length,Q=U.length!==te.length,Z=J*(1-F.gap),re=h(V,N._id)+X[0][0].trace.orientation,oe=V._alignmentOpts[re]||{},ae=0;ae<K;ae++){var ce,he,pe=X[ae],xe=pe[0].trace,be=oe[xe.alignmentgroup]||{},ve=Object.keys(be.offsetGroups||{}).length,ge=(ce=ve?Z/ve:Q?Z/K:Z)*(1-(F.groupgap||0));he=ve?((2*xe._offsetIndex+1-ve)*ce-ge)/2:Q?((2*ae+1-K)*ce-ge)/2:-ge/2;var we=pe[0].t;we.barwidth=ge,we.poffset=he,we.bargroupwidth=Z,we.bardelta=J}W.binWidth=X[0][0].t.barwidth/100,r(W),i(N,W),l(N,W,Q)})(E,O,j,R),function(D,N){for(var W=D.traces,F=0;F<W.length;F++){var V=W[F];if(V[0].trace.base===void 0)for(var U=new s([V],{posAxis:N,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<V.length;te++){var J=V[te];if(J.p!==o){var X=U.put(J.p,J.b+J.s);X&&(J.b=X)}}}}(j,O),R.norm?(p(j),c(C,j,R)):u(C,j)}(d,g,v,f,m),_.length&&a(g,v,_,m);break;case"stack":case"relative":for(_=[],f=[],S=0;S<y.length;S++)(w=y[S])[0].trace.base===void 0?f.push(w):_.push(w);(function(E){if(!(E.length<2)){var O,C,P,R,j,D;for(O=0;O<E.length&&(R=(C=E[O][0].trace).marker?C.marker.cornerradius:void 0)===void 0;O++);if(R!==void 0)for(j=M(R)?+R:+R.slice(0,-1),D=M(R)?"px":"%",O=0;O<E.length;O++)(P=E[O][0].t).cornerradiusvalue=j,P.cornerradiusform=D}})(f),f.length&&function(E,O,C,P,R){var j=new s(P,{posAxis:O,sepNegVal:R.mode==="relative",overlapNoMerge:!(R.norm||R.mode==="stack"||R.mode==="relative")});n(O,j,R),function(V,U,te){var J,X,K,Q,Z,re,oe=x(V),ae=U.traces;for(Q=0;Q<ae.length;Q++)if((X=(J=ae[Q])[0].trace).type==="funnel")for(Z=0;Z<J.length;Z++)(re=J[Z]).s!==o&&U.put(re.p,-.5*re.s);for(Q=0;Q<ae.length;Q++){K=(X=(J=ae[Q])[0].trace).type==="funnel";var ce=[];for(Z=0;Z<J.length;Z++)if((re=J[Z]).s!==o){var he;he=K?re.s:re.s+re.b;var pe=U.put(re.p,he),xe=pe+he;re.b=pe,re[oe]=xe,te.norm||(ce.push(xe),re.hasB&&ce.push(pe))}te.norm||(X._extremes[V._id]=b.findExtremes(V,ce,{tozero:!0,padded:!0}))}}(C,j,R);for(var D=0;D<P.length;D++)for(var N=P[D],W=0;W<N.length;W++){var F=N[W];F.s!==o&&F.b+F.s===j.get(F.p,F.s)&&(F._outmost=!0)}R.norm&&c(C,j,R)}(0,g,v,f,m),_.length&&a(g,v,_,m)}(function(E){var O,C,P,R,j,D,N;for(O=0;O<E.length;O++)P=(C=E[O])[0].trace,(R=C[0].t).cornerradiusvalue===void 0&&(j=P.marker?P.marker.cornerradius:void 0)!==void 0&&(D=M(j)?+j:+j.slice(0,-1),N=M(j)?"px":"%",R.cornerradiusvalue=D,R.cornerradiusform=N)})(y),function(E,O){var C,P,R,j=x(O),D={},N=1/0,W=-1/0;for(C=0;C<E.length;C++)for(R=E[C],P=0;P<R.length;P++){var F=R[P].p;M(F)&&(N=Math.min(N,F),W=Math.max(W,F))}var V=1e4/(W-N),U=D.round=function(xe){return String(Math.round(V*(xe-N)))},te={},J={},X=E.some(function(xe){var be=xe[0].trace;return"marker"in be&&be.marker.cornerradius});for(C=0;C<E.length;C++){(R=E[C])[0].t.extents=D;var K=R[0].t.poffset,Q=k(K);for(P=0;P<R.length;P++){var Z=R[P],re=Z[j]-Z.w/2;if(M(re)){var oe=Z[j]+Z.w/2,ae=U(Z.p);D[ae]?D[ae]=[Math.min(re,D[ae][0]),Math.max(oe,D[ae][1])]:D[ae]=[re,oe]}if(Z.p0=Z.p+(Q?K[P]:K),Z.p1=Z.p0+Z.w,Z.s0=Z.b,Z.s1=Z.s0+Z.s,X){var ce=Math.min(Z.s0,Z.s1)||0,he=Math.max(Z.s0,Z.s1)||0,pe=Z[j];te[pe]=pe in te?Math.min(te[pe],ce):ce,J[pe]=pe in J?Math.max(J[pe],he):he}}}X&&function(xe,be,ve,ge){for(var we=x(ge),_e=0;_e<xe.length;_e++)for(var se=xe[_e],ie=0;ie<se.length;ie++){var fe=se[ie],Ee=fe[we];fe._sMin=be[Ee],fe._sMax=ve[Ee]}}(E,te,J,O)}(y,g)}}function a(d,g,v,y){for(var m=0;m<v.length;m++){var _=v[m],f=new s([_],{posAxis:d,sepNegVal:!1,overlapNoMerge:!y.norm});n(d,f,y),y.norm?(p(f),c(g,f,y)):u(g,f)}}function n(d,g,v){for(var y=g.minDiff,m=g.traces,_=y*(1-v.gap),f=_*(1-(v.groupgap||0)),S=-f/2,w=0;w<m.length;w++){var E=m[w][0].t;E.barwidth=f,E.poffset=S,E.bargroupwidth=_,E.bardelta=y}g.binWidth=m[0][0].t.barwidth/100,r(g),i(d,g),l(d,g)}function r(d){var g,v,y=d.traces;for(g=0;g<y.length;g++){var m,_=y[g],f=_[0],S=f.trace,w=f.t,E=S._offset||S.offset,O=w.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,_.length),v=0;v<m.length;v++)M(m[v])||(m[v]=O);for(v=m.length;v<_.length;v++)m.push(O);w.poffset=m}else E!==void 0&&(w.poffset=E);var C=S._width||S.width,P=w.barwidth;if(k(C)){var R=Array.prototype.slice.call(C,0,_.length);for(v=0;v<R.length;v++)M(R[v])||(R[v]=P);for(v=R.length;v<_.length;v++)R.push(P);if(w.barwidth=R,E===void 0){for(m=[],v=0;v<_.length;v++)m.push(O+(P-R[v])/2);w.poffset=m}}else C!==void 0&&(w.barwidth=C,E===void 0&&(w.poffset=O+(P-C)/2))}}function i(d,g){for(var v=g.traces,y=x(d),m=0;m<v.length;m++)for(var _=v[m],f=_[0].t,S=f.poffset,w=k(S),E=f.barwidth,O=k(E),C=0;C<_.length;C++){var P=_[C],R=P.w=O?E[C]:E;P.p===void 0&&(P.p=P[y],P["orig_"+y]=P[y]);var j=(w?S[C]:S)+R/2;P[y]=P.p+j}}function l(d,g,v){var y=g.traces,m=g.minDiff/2;b.minDtick(d,g.minDiff,g.distinctPositions[0],v);for(var _=0;_<y.length;_++){var f,S,w,E,O=y[_],C=O[0],P=C.trace,R=[];for(E=0;E<O.length;E++)S=(f=O[E]).p-m,w=f.p+m,R.push(S,w);if(P.width||P.offset){var j=C.t,D=j.poffset,N=j.barwidth,W=k(D),F=k(N);for(E=0;E<O.length;E++){f=O[E];var V=W?D[E]:D,U=F?N[E]:N;w=(S=f.p+V)+U,R.push(S,w)}}P._extremes[d._id]=b.findExtremes(d,R,{padded:!1})}}function u(d,g){for(var v=g.traces,y=x(d),m=0;m<v.length;m++){for(var _=v[m],f=_[0].trace,S=f.type==="scatter",w=f.orientation==="v",E=[],O=!1,C=0;C<_.length;C++){var P=_[C],R=S?0:P.b,j=S?w?P.y:P.x:R+P.s;P[y]=j,E.push(j),P.hasB&&E.push(R),P.hasB&&P.b||(O=!0)}f._extremes[d._id]=b.findExtremes(d,E,{tozero:O,padded:!0})}}function p(d){for(var g=d.traces,v=0;v<g.length;v++)for(var y=g[v],m=0;m<y.length;m++){var _=y[m];_.s!==o&&d.put(_.p,_.b+_.s)}}function c(d,g,v){var y=g.traces,m=x(d),_=v.norm==="fraction"?1:100,f=_/1e9,S=d.l2c(d.c2l(0)),w=v.mode==="stack"?_:S;function E(te){return M(d.c2l(te))&&(te<S-f||te>w+f||!M(S))}for(var O=0;O<y.length;O++){for(var C=y[O],P=C[0].trace,R=[],j=!1,D=!1,N=0;N<C.length;N++){var W=C[N];if(W.s!==o){var F=Math.abs(_/g.get(W.p,W.s));W.b*=F,W.s*=F;var V=W.b,U=V+W.s;W[m]=U,R.push(U),D=D||E(U),W.hasB&&(R.push(V),D=D||E(V)),W.hasB&&W.b||(j=!0)}}P._extremes[d._id]=b.findExtremes(d,R,{tozero:j,padded:D})}}function x(d){return d._id.charAt(0)}ee.exports={crossTraceCalc:function(d,g){for(var v=g.xaxis,y=g.yaxis,m=d._fullLayout,_=d._fullData,f=d.calcdata,S=[],w=[],E=0;E<_.length;E++){var O=_[E];if(O.visible===!0&&T.traceIs(O,"bar")&&O.xaxis===v._id&&O.yaxis===y._id&&(O.orientation==="h"?S.push(f[E]):w.push(f[E]),O._computePh))for(var C=d.calcdata[E],P=0;P<C.length;P++)typeof C[P].ph0=="function"&&(C[P].ph0=C[P].ph0()),typeof C[P].ph1=="function"&&(C[P].ph1=C[P].ph1())}var R={xCat:v.type==="category"||v.type==="multicategory",yCat:y.type==="category"||y.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(d,v,y,w,R),t(d,y,v,S,R)},setGroupPositions:t}},31508:function(ee,z,e){var M=e(38248),k=e(3400),o=e(76308),T=e(24040),b=e(43980),h=e(31147),s=e(55592),t=e(20011),a=e(20832),n=k.coerceFont;function r(l){if(M(l)){if((l=+l)>=0)return l}else if(typeof l=="string"&&(l=l.trim()).slice(-1)==="%"&&M(l.slice(0,-1))&&(l=+l.slice(0,-1))>=0)return l+"%"}function i(l,u,p,c,x,d){var g=(d=d||{}).moduleHasSelected!==!1,v=d.moduleHasUnselected!==!1,y=d.moduleHasConstrain!==!1,m=d.moduleHasCliponaxis!==!1,_=d.moduleHasTextangle!==!1,f=d.moduleHasInsideanchor!==!1,S=!!d.hasPathbar,w=Array.isArray(x)||x==="auto",E=w||x==="inside",O=w||x==="outside";if(E||O){var C=n(c,"textfont",p.font),P=k.extendFlat({},C),R=!(l.textfont&&l.textfont.color);if(R&&delete P.color,n(c,"insidetextfont",P),S){var j=k.extendFlat({},C);R&&delete j.color,n(c,"pathbar.textfont",j)}O&&n(c,"outsidetextfont",C),g&&c("selected.textfont.color"),v&&c("unselected.textfont.color"),y&&c("constraintext"),m&&c("cliponaxis"),_&&c("textangle"),c("texttemplate")}E&&f&&c("insidetextanchor")}ee.exports={supplyDefaults:function(l,u,p,c){function x(y,m){return k.coerce(l,u,a,y,m)}if(b(l,u,c,x)){h(l,u,c,x),x("xhoverformat"),x("yhoverformat"),x("zorder"),x("orientation",u.x&&!u.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var d=x("textposition");i(l,0,c,x,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(l,u,x,p,c);var g=(u.marker.line||{}).color,v=T.getComponentMethod("errorbars","supplyDefaults");v(l,u,g||o.defaultLine,{axis:"y"}),v(l,u,g||o.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1},crossTraceDefaults:function(l,u){var p,c;function x(v,y){return k.coerce(c._input,c,a,v,y)}for(var d=0;d<l.length;d++)if((c=l[d]).type==="bar"){p=c._input;var g=x("marker.cornerradius",u.barcornerradius);c.marker&&(c.marker.cornerradius=r(g)),u.barmode==="group"&&t(p,c,u,x)}},handleText:i,validateCornerradius:r}},52160:function(ee){ee.exports=function(z,e,M){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),M.orientation==="h"?(z.label=z.y,z.value=z.x):(z.label=z.x,z.value=z.y),z}},60444:function(ee,z,e){var M=e(38248),k=e(49760),o=e(3400).isArrayOrTypedArray;z.coerceString=function(T,b,h){if(typeof b=="string"){if(b||!T.noBlank)return b}else if((typeof b=="number"||b===!0)&&!T.strict)return String(b);return h!==void 0?h:T.dflt},z.coerceNumber=function(T,b,h){if(M(b)){b=+b;var s=T.min,t=T.max;if(!(s!==void 0&&b<s||t!==void 0&&b>t))return b}return h!==void 0?h:T.dflt},z.coerceColor=function(T,b,h){return k(b).isValid()?b:h!==void 0?h:T.dflt},z.coerceEnumerated=function(T,b,h){return T.coerceNumber&&(b=+b),T.values.indexOf(b)!==-1?b:h!==void 0?h:T.dflt},z.getValue=function(T,b){var h;return o(T)?b<T.length&&(h=T[b]):h=T,h},z.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:o(T.marker.line.width)?0:T.marker.line.width}},63400:function(ee,z,e){var M=e(93024),k=e(24040),o=e(76308),T=e(3400).fillText,b=e(60444).getLineWidth,h=e(54460).hoverLabelText,s=e(39032).BADNUM;function t(n,r,i,l,u){var p,c,x,d,g,v,y,m=n.cd,_=m[0].trace,f=m[0].t,S=l==="closest",w=_.type==="waterfall",E=n.maxHoverDistance,O=n.maxSpikeDistance;_.orientation==="h"?(p=i,c=r,x="y",d="x",g=J,v=U):(p=r,c=i,x="x",d="y",v=J,g=U);var C=_[x+"period"],P=S||C;function R(ce){return D(ce,-1)}function j(ce){return D(ce,1)}function D(ce,he){var pe=ce.w;return ce[x]+he*pe/2}function N(ce){return ce[x+"End"]-ce[x+"Start"]}var W=S?R:C?function(ce){return ce.p-N(ce)/2}:function(ce){return Math.min(R(ce),ce.p-f.bardelta/2)},F=S?j:C?function(ce){return ce.p+N(ce)/2}:function(ce){return Math.max(j(ce),ce.p+f.bardelta/2)};function V(ce,he,pe){return u.finiteRange&&(pe=0),M.inbox(ce-p,he-p,pe+Math.min(1,Math.abs(he-ce)/y)-1)}function U(ce){return V(W(ce),F(ce),E)}function te(ce){var he=ce[d];if(w){var pe=Math.abs(ce.rawS)||0;c>0?he+=pe:c<0&&(he-=pe)}return he}function J(ce){var he=c,pe=ce.b,xe=te(ce);return M.inbox(pe-he,xe-he,E+(xe-he)/(xe-pe)-1)}var X=n[x+"a"],K=n[d+"a"];y=Math.abs(X.r2c(X.range[1])-X.r2c(X.range[0]));var Q=M.getDistanceFunction(l,g,v,function(ce){return(g(ce)+v(ce))/2});if(M.getClosest(m,Q,n),n.index!==!1&&m[n.index].p!==s){P||(W=function(ce){return Math.min(R(ce),ce.p-f.bargroupwidth/2)},F=function(ce){return Math.max(j(ce),ce.p+f.bargroupwidth/2)});var Z=m[n.index],re=_.base?Z.b+Z.s:Z.s;n[d+"0"]=n[d+"1"]=K.c2p(Z[d],!0),n[d+"LabelVal"]=re;var oe=f.extents[f.extents.round(Z.p)];n[x+"0"]=X.c2p(S?W(Z):oe[0],!0),n[x+"1"]=X.c2p(S?F(Z):oe[1],!0);var ae=Z.orig_p!==void 0;return n[x+"LabelVal"]=ae?Z.orig_p:Z.p,n.labelLabel=h(X,n[x+"LabelVal"],_[x+"hoverformat"]),n.valueLabel=h(K,n[d+"LabelVal"],_[d+"hoverformat"]),n.baseLabel=h(K,Z.b,_[d+"hoverformat"]),n.spikeDistance=(function(ce){var he=c,pe=ce.b,xe=te(ce);return M.inbox(pe-he,xe-he,O+(xe-he)/(xe-pe)-1)}(Z)+function(ce){return V(R(ce),j(ce),O)}(Z))/2,n[x+"Spike"]=X.c2p(Z.p,!0),T(Z,_,n),n.hovertemplate=_.hovertemplate,n}}function a(n,r){var i=r.mcc||n.marker.color,l=r.mlcc||n.marker.line.color,u=b(n,r);return o.opacity(i)?i:o.opacity(l)&&u?l:void 0}ee.exports={hoverPoints:function(n,r,i,l,u){var p=t(n,r,i,l,u);if(p){var c=p.cd,x=c[0].trace,d=c[p.index];return p.color=a(x,d),k.getComponentMethod("errorbars","hoverInfo")(d,x,p),[p]}},hoverOnBars:t,getTraceColor:a}},51132:function(ee,z,e){ee.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(ee,z,e){var M=e(24040),k=e(54460),o=e(3400),T=e(39324),b=e(31508).validateCornerradius;ee.exports=function(h,s,t){function a(g,v){return o.coerce(h,s,T,g,v)}for(var n=!1,r=!1,i=!1,l={},u=a("barmode"),p=0;p<t.length;p++){var c=t[p];if(M.traceIs(c,"bar")&&c.visible){if(n=!0,u==="group"){var x=c.xaxis+c.yaxis;l[x]&&(i=!0),l[x]=!0}c.visible&&c.type==="histogram"&&k.getFromId({_fullLayout:s},c[c.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}if(n){u!=="overlay"&&a("barnorm"),a("bargap",r&&!i?0:.2),a("bargroupgap");var d=a("barcornerradius");s.barcornerradius=b(d)}else delete s.barmode}},98184:function(ee,z,e){var M=e(33428),k=e(38248),o=e(3400),T=e(72736),b=e(76308),h=e(43616),s=e(24040),t=e(54460).tickText,a=e(82744),n=a.recordMinTextSize,r=a.clearMinTextSize,i=e(60100),l=e(60444),u=e(78048),p=e(20832),c=p.text,x=p.textposition,d=e(10624).appendArrayPointValue,g=u.TEXTPAD;function v(P){return P.id}function y(P){if(P.ids)return v}function m(P){return(P>0)-(P<0)}function _(P,R){return P<R?1:-1}function f(P,R,j,D){var N;return!R.uniformtext.mode&&S(j)?(D&&(N=D()),P.transition().duration(j.duration).ease(j.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()})):P}function S(P){return P&&P.duration>0}function w(P,R,j,D,N){return!(P<0||R<0)&&(j<=P&&D<=R||j<=R&&D<=P||(N?P>=j*(R/D):R>=D*(P/j)))}function E(P){return P==="auto"?0:P}function O(P,R){var j=Math.PI/180*R,D=Math.abs(Math.sin(j)),N=Math.abs(Math.cos(j));return{x:P.width*N+P.height*D,y:P.width*D+P.height*N}}function C(P,R,j,D,N,W){var F=!!W.isHorizontal,V=!!W.constrained,U=W.angle||0,te=W.anchor,J=te==="end",X=te==="start",K=((W.leftToRight||0)+1)/2,Q=1-K,Z=W.hasB,re=W.r,oe=W.overhead,ae=N.width,ce=N.height,he=Math.abs(R-P),pe=Math.abs(D-j),xe=he>2*g&&pe>2*g?g:0;he-=2*xe,pe-=2*xe;var be=E(U);U!=="auto"||ae<=he&&ce<=pe||!(ae>he||ce>pe)||(ae>pe||ce>he)&&ae<ce==he<pe||(be+=90);var ve,ge,we=O(N,be);if(re&&re-oe>g){var _e=function(De,de,me,Me,ze,Pe,Ne,Ve,Ye){var at,rt,dt,vt,ht=Math.max(0,Math.abs(de-De)-2*g),et=Math.max(0,Math.abs(Me-me)-2*g),$e=Pe-g,wt=Ne?$e-Math.sqrt($e*$e-($e-Ne)*($e-Ne)):$e,Pt=Ye?2*$e:Ve?$e-Ne:2*wt,Ot=Ye?2*$e:Ve?2*wt:$e-Ne;return ze.y/ze.x>=et/(ht-Pt)?vt=et/ze.y:ze.y/ze.x<=(et-Ot)/ht?vt=ht/ze.x:!Ye&&Ve?(at=ze.x*ze.x+ze.y*ze.y/4,dt=(ht-$e)*(ht-$e)+(et/2-$e)*(et/2-$e)-$e*$e,vt=(-(rt=-2*ze.x*(ht-$e)-ze.y*(et/2-$e))+Math.sqrt(rt*rt-4*at*dt))/(2*at)):Ye?(at=(ze.x*ze.x+ze.y*ze.y)/4,dt=(ht/2-$e)*(ht/2-$e)+(et/2-$e)*(et/2-$e)-$e*$e,vt=(-(rt=-ze.x*(ht/2-$e)-ze.y*(et/2-$e))+Math.sqrt(rt*rt-4*at*dt))/(2*at)):(at=ze.x*ze.x/4+ze.y*ze.y,dt=(ht/2-$e)*(ht/2-$e)+(et-$e)*(et-$e)-$e*$e,vt=(-(rt=-ze.x*(ht/2-$e)-2*ze.y*(et-$e))+Math.sqrt(rt*rt-4*at*dt))/(2*at)),{scale:vt=Math.min(1,vt),pad:Ve?Math.max(0,$e-Math.sqrt(Math.max(0,$e*$e-($e-(et-ze.y*vt)/2)*($e-(et-ze.y*vt)/2)))-Ne):Math.max(0,$e-Math.sqrt(Math.max(0,$e*$e-($e-(ht-ze.x*vt)/2)*($e-(ht-ze.x*vt)/2)))-Ne)}}(P,R,j,D,we,re,oe,F,Z);ve=_e.scale,ge=_e.pad}else ve=1,V&&(ve=Math.min(1,he/we.x,pe/we.y)),ge=0;var se=N.left*Q+N.right*K,ie=(N.top+N.bottom)/2,fe=(P+g)*Q+(R-g)*K,Ee=(j+D)/2,Te=0,Ae=0;if(X||J){var Se=(F?we.x:we.y)/2;re&&(J||Z)&&(xe+=ge);var Oe=F?_(P,R):_(j,D);F?X?(fe=P+Oe*xe,Te=-Oe*Se):(fe=R-Oe*xe,Te=Oe*Se):X?(Ee=j+Oe*xe,Ae=-Oe*Se):(Ee=D-Oe*xe,Ae=Oe*Se)}return{textX:se,textY:ie,targetX:fe,targetY:Ee,anchorX:Te,anchorY:Ae,scale:ve,rotate:be}}ee.exports={plot:function(P,R,j,D,N,W){var F=R.xaxis,V=R.yaxis,U=P._fullLayout,te=P._context.staticPlot;N||(N={mode:U.barmode,norm:U.barmode,gap:U.bargap,groupgap:U.bargroupgap},r("bar",U));var J=o.makeTraceGroups(D,j,"trace bars").each(function(X){var K=M.select(this),Q=X[0].trace,Z=X[0].t,re=Q.type==="waterfall",oe=Q.type==="funnel",ae=Q.type==="histogram",ce=Q.type==="bar",he=ce||oe,pe=0;re&&Q.connector.visible&&Q.connector.mode==="between"&&(pe=Q.connector.line.width/2);var xe=Q.orientation==="h",be=S(N),ve=o.ensureSingle(K,"g","points"),ge=y(Q),we=ve.selectAll("g.point").data(o.identity,ge);we.enter().append("g").classed("point",!0),we.exit().remove(),we.each(function(se,ie){var fe,Ee,Te=M.select(this),Ae=function(tt,Re,Fe,nt){var We=[],ct=[],pt=nt?Re:Fe,gt=nt?Fe:Re;return We[0]=pt.c2p(tt.s0,!0),ct[0]=gt.c2p(tt.p0,!0),We[1]=pt.c2p(tt.s1,!0),ct[1]=gt.c2p(tt.p1,!0),nt?[We,ct]:[ct,We]}(se,F,V,xe),Se=Ae[0][0],Oe=Ae[0][1],De=Ae[1][0],de=Ae[1][1],me=(xe?Oe-Se:de-De)==0;if(me&&he&&l.getLineWidth(Q,se)&&(me=!1),me||(me=!(k(Se)&&k(Oe)&&k(De)&&k(de))),se.isBlank=me,me&&(xe?Oe=Se:de=De),pe&&!me&&(xe?(Se-=_(Se,Oe)*pe,Oe+=_(Se,Oe)*pe):(De-=_(De,de)*pe,de+=_(De,de)*pe)),Q.type==="waterfall"){if(!me){var Me=Q[se.dir].marker;fe=Me.line.width,Ee=Me.color}}else fe=l.getLineWidth(Q,se),Ee=se.mc||Q.marker.color;function ze(tt){var Re=M.round(fe/2%1,2);return N.gap===0&&N.groupgap===0?M.round(Math.round(tt)-Re,2):tt}var Pe=b.opacity(Ee)<1||fe>.01?ze:function(tt,Re,Fe){return Fe&&tt===Re?tt:Math.abs(tt-Re)>=2?ze(tt):tt>Re?Math.ceil(tt):Math.floor(tt)};P._context.staticPlot||(Se=Pe(Se,Oe,xe),Oe=Pe(Oe,Se,xe),De=Pe(De,de,!xe),de=Pe(de,De,!xe));var Ne,Ve=xe?F.c2p:V.c2p;Ne=se.s0>0?se._sMax:se.s0<0?se._sMin:se.s1>0?se._sMax:se._sMin;var Ye,at,rt=ce||ae?function(tt,Re){if(!tt)return 0;var Fe,nt=Math.abs(xe?de-De:Oe-Se),We=Math.abs(xe?Oe-Se:de-De),ct=Pe(Math.abs(Ve(Ne,!0)-Ve(0,!0))),pt=se.hasB?Math.min(nt/2,We/2):Math.min(nt/2,ct);return Fe=Re==="%"?nt*(Math.min(50,tt)/100):tt,Pe(Math.max(Math.min(Fe,pt),0))}(Z.cornerradiusvalue,Z.cornerradiusform):0,dt="M"+Se+","+De+"V"+de+"H"+Oe+"V"+De+"Z",vt=0;if(rt&&se.s){var ht=m(se.s0)===0||m(se.s)===m(se.s0)?se.s1:se.s0;if((vt=Pe(se.hasB?0:Math.abs(Ve(Ne,!0)-Ve(ht,!0))))<rt){var et=_(Se,Oe),$e=_(De,de),wt=et===-$e?1:0;if(xe)if(se.hasB)Ye="M"+(Se+rt*et)+","+De+"A "+rt+","+rt+" 0 0 "+wt+" "+Se+","+(De+rt*$e)+"V"+(de-rt*$e)+"A "+rt+","+rt+" 0 0 "+wt+" "+(Se+rt*et)+","+de+"H"+(Oe-rt*et)+"A "+rt+","+rt+" 0 0 "+wt+" "+Oe+","+(de-rt*$e)+"V"+(De+rt*$e)+"A "+rt+","+rt+" 0 0 "+wt+" "+(Oe-rt*et)+","+De+"Z";else{var Pt=(at=Math.abs(Oe-Se)+vt)<rt?rt-Math.sqrt(at*(2*rt-at)):0,Ot=vt>0?Math.sqrt(vt*(2*rt-vt)):0,At=et>0?Math.max:Math.min;Ye="M"+Se+","+De+"V"+(de-Pt*$e)+"H"+At(Oe-(rt-vt)*et,Se)+"A "+rt+","+rt+" 0 0 "+wt+" "+Oe+","+(de-rt*$e-Ot)+"V"+(De+rt*$e+Ot)+"A "+rt+","+rt+" 0 0 "+wt+" "+At(Oe-(rt-vt)*et,Se)+","+(De+Pt*$e)+"Z"}else if(se.hasB)Ye="M"+(Se+rt*et)+","+De+"A "+rt+","+rt+" 0 0 "+wt+" "+Se+","+(De+rt*$e)+"V"+(de-rt*$e)+"A "+rt+","+rt+" 0 0 "+wt+" "+(Se+rt*et)+","+de+"H"+(Oe-rt*et)+"A "+rt+","+rt+" 0 0 "+wt+" "+Oe+","+(de-rt*$e)+"V"+(De+rt*$e)+"A "+rt+","+rt+" 0 0 "+wt+" "+(Oe-rt*et)+","+De+"Z";else{var He=(at=Math.abs(de-De)+vt)<rt?rt-Math.sqrt(at*(2*rt-at)):0,Ze=vt>0?Math.sqrt(vt*(2*rt-vt)):0,Be=$e>0?Math.max:Math.min;Ye="M"+(Se+He*et)+","+De+"V"+Be(de-(rt-vt)*$e,De)+"A "+rt+","+rt+" 0 0 "+wt+" "+(Se+rt*et-Ze)+","+de+"H"+(Oe-rt*et+Ze)+"A "+rt+","+rt+" 0 0 "+wt+" "+(Oe-He*et)+","+Be(de-(rt-vt)*$e,De)+"V"+De+"Z"}}else Ye=dt}else Ye=dt;var Ge=f(o.ensureSingle(Te,"path"),U,N,W);if(Ge.style("vector-effect",te?"none":"non-scaling-stroke").attr("d",isNaN((Oe-Se)*(de-De))||me&&P._context.staticPlot?"M0,0Z":Ye).call(h.setClipUrl,R.layerClipId,P),!U.uniformtext.mode&&be){var it=h.makePointStyleFns(Q);h.singlePointStyle(se,Ge,Q,it,P)}(function(tt,Re,Fe,nt,We,ct,pt,gt,ut,kt,yt,Mt,Lt){var Ct,It=Re.xaxis,Wt=Re.yaxis,Nt=tt._fullLayout;function Bt(fr,Xt,pn){return o.ensureSingle(fr,"text").text(Xt).attr({class:"bartext bartext-"+Ct,"text-anchor":"middle","data-notex":1}).call(h.font,pn).call(T.convertToTspans,tt)}var Ht=nt[0].trace,Qt=Ht.orientation==="h",Cn=function(fr,Xt,pn,bt,Ut){var Kt,un=Xt[0].trace;return Kt=un.texttemplate?function(cn,vn,tn,Vt,Gt){var nn=vn[0].trace,sn=o.castOption(nn,tn,"texttemplate");if(!sn)return"";var wn,An,zn,Fn,Xn=nn.type==="histogram",jn=nn.type==="waterfall",Qn=nn.type==="funnel",Jn=nn.orientation==="h";function Zn(Or){return t(Fn,Fn.c2l(Or),!0).text}Jn?(wn="y",An=Gt,zn="x",Fn=Vt):(wn="x",An=Vt,zn="y",Fn=Gt);var ur,mr=vn[tn],hr={};hr.label=mr.p,hr.labelLabel=hr[wn+"Label"]=(ur=mr.p,t(An,An.c2l(ur),!0).text);var rr=o.castOption(nn,mr.i,"text");(rr===0||rr)&&(hr.text=rr),hr.value=mr.s,hr.valueLabel=hr[zn+"Label"]=Zn(mr.s);var gr={};d(gr,nn,mr.i),(Xn||gr.x===void 0)&&(gr.x=Jn?hr.value:hr.label),(Xn||gr.y===void 0)&&(gr.y=Jn?hr.label:hr.value),(Xn||gr.xLabel===void 0)&&(gr.xLabel=Jn?hr.valueLabel:hr.labelLabel),(Xn||gr.yLabel===void 0)&&(gr.yLabel=Jn?hr.labelLabel:hr.valueLabel),jn&&(hr.delta=+mr.rawS||mr.s,hr.deltaLabel=Zn(hr.delta),hr.final=mr.v,hr.finalLabel=Zn(hr.final),hr.initial=hr.final-hr.delta,hr.initialLabel=Zn(hr.initial)),Qn&&(hr.value=mr.s,hr.valueLabel=Zn(hr.value),hr.percentInitial=mr.begR,hr.percentInitialLabel=o.formatPercent(mr.begR),hr.percentPrevious=mr.difR,hr.percentPreviousLabel=o.formatPercent(mr.difR),hr.percentTotal=mr.sumR,hr.percenTotalLabel=o.formatPercent(mr.sumR));var xr=o.castOption(nn,mr.i,"customdata");return xr&&(hr.customdata=xr),o.texttemplateString(sn,hr,cn._d3locale,gr,hr,nn._meta||{})}(fr,Xt,pn,bt,Ut):un.textinfo?function(cn,vn,tn,Vt){var Gt=cn[0].trace,nn=Gt.orientation==="h",sn=Gt.type==="waterfall",wn=Gt.type==="funnel";function An(xr){return t(nn?tn:Vt,+xr,!0).text}var zn,Fn,Xn=Gt.textinfo,jn=cn[vn],Qn=Xn.split("+"),Jn=[],Zn=function(xr){return Qn.indexOf(xr)!==-1};if(Zn("label")&&Jn.push((Fn=cn[vn].p,t(nn?Vt:tn,Fn,!0).text)),Zn("text")&&((zn=o.castOption(Gt,jn.i,"text"))===0||zn)&&Jn.push(zn),sn){var ur=+jn.rawS||jn.s,mr=jn.v,hr=mr-ur;Zn("initial")&&Jn.push(An(hr)),Zn("delta")&&Jn.push(An(ur)),Zn("final")&&Jn.push(An(mr))}if(wn){Zn("value")&&Jn.push(An(jn.s));var rr=0;Zn("percent initial")&&rr++,Zn("percent previous")&&rr++,Zn("percent total")&&rr++;var gr=rr>1;Zn("percent initial")&&(zn=o.formatPercent(jn.begR),gr&&(zn+=" of initial"),Jn.push(zn)),Zn("percent previous")&&(zn=o.formatPercent(jn.difR),gr&&(zn+=" of previous"),Jn.push(zn)),Zn("percent total")&&(zn=o.formatPercent(jn.sumR),gr&&(zn+=" of total"),Jn.push(zn))}return Jn.join("<br>")}(Xt,pn,bt,Ut):l.getValue(un.text,pn),l.coerceString(c,Kt)}(Nt,nt,We,It,Wt);Ct=function(fr,Xt){var pn=l.getValue(fr.textposition,Xt);return l.coerceEnumerated(x,pn)}(Ht,We);var Tn=Mt.mode==="stack"||Mt.mode==="relative",hn=nt[We],Zt=!Tn||hn._outmost,an=hn.hasB,$t=kt&&kt-yt>g;if(Cn&&Ct!=="none"&&(!hn.isBlank&&ct!==pt&&gt!==ut||Ct!=="auto"&&Ct!=="inside")){var ln=Nt.font,mn=i.getBarColor(nt[We],Ht),xn=i.getInsideTextFont(Ht,We,ln,mn),Pn=i.getOutsideTextFont(Ht,We,ln),Mn=Ht.insidetextanchor||"end",_n=Fe.datum();Qt?It.type==="log"&&_n.s0<=0&&(ct=It.range[0]<It.range[1]?0:It._length):Wt.type==="log"&&_n.s0<=0&&(gt=Wt.range[0]<Wt.range[1]?Wt._length:0);var Rn,In,Vn,tr,er,Wn=Math.abs(pt-ct),or=Math.abs(ut-gt),Jt=Wn-2*g,en=or-2*g;if(Ct==="outside"&&(Zt||hn.hasB||(Ct="inside")),Ct==="auto")if(Zt){Ct="inside",Rn=Bt(Fe,Cn,er=o.ensureUniformFontSize(tt,xn)),Vn=(In=h.bBox(Rn.node())).width,tr=In.height;var En,gn=Vn>0&&tr>0;En=$t?an?w(Jt-2*kt,en,Vn,tr,Qt)||w(Jt,en-2*kt,Vn,tr,Qt):Qt?w(Jt-(kt-yt),en,Vn,tr,Qt)||w(Jt,en-2*(kt-yt),Vn,tr,Qt):w(Jt,en-(kt-yt),Vn,tr,Qt)||w(Jt-2*(kt-yt),en,Vn,tr,Qt):w(Jt,en,Vn,tr,Qt),gn&&En?Ct="inside":(Ct="outside",Rn.remove(),Rn=null)}else Ct="inside";if(!Rn){var Ln=(Rn=Bt(Fe,Cn,er=o.ensureUniformFontSize(tt,Ct==="outside"?Pn:xn))).attr("transform");if(Rn.attr("transform",""),Vn=(In=h.bBox(Rn.node())).width,tr=In.height,Rn.attr("transform",Ln),Vn<=0||tr<=0)return void Rn.remove()}var Hn,Nn=Ht.textangle;Hn=Ct==="outside"?function(fr,Xt,pn,bt,Ut,Kt){var un,cn=!!Kt.isHorizontal,vn=!!Kt.constrained,tn=Kt.angle||0,Vt=Ut.width,Gt=Ut.height,nn=Math.abs(Xt-fr),sn=Math.abs(bt-pn);un=cn?sn>2*g?g:0:nn>2*g?g:0;var wn=1;vn&&(wn=cn?Math.min(1,sn/Gt):Math.min(1,nn/Vt));var An=E(tn),zn=O(Ut,An),Fn=(cn?zn.x:zn.y)/2,Xn=(Ut.left+Ut.right)/2,jn=(Ut.top+Ut.bottom)/2,Qn=(fr+Xt)/2,Jn=(pn+bt)/2,Zn=0,ur=0,mr=cn?_(Xt,fr):_(pn,bt);return cn?(Qn=Xt-mr*un,Zn=mr*Fn):(Jn=bt+mr*un,ur=-mr*Fn),{textX:Xn,textY:jn,targetX:Qn,targetY:Jn,anchorX:Zn,anchorY:ur,scale:wn,rotate:An}}(ct,pt,gt,ut,In,{isHorizontal:Qt,constrained:Ht.constraintext==="both"||Ht.constraintext==="outside",angle:Nn}):C(ct,pt,gt,ut,In,{isHorizontal:Qt,constrained:Ht.constraintext==="both"||Ht.constraintext==="inside",angle:Nn,anchor:Mn,hasB:an,r:kt,overhead:yt}),Hn.fontSize=er.size,n(Ht.type==="histogram"?"bar":Ht.type,Hn,Nt),hn.transform=Hn;var Yn=f(Rn,Nt,Mt,Lt);o.setTransormAndDisplay(Yn,Hn)}else Fe.select("text").remove()})(P,R,Te,X,ie,Se,Oe,De,de,rt,vt,N,W),R.layerClipId&&h.hideOutsideRangePoint(se,Te.select("text"),F,V,Q.xcalendar,Q.ycalendar)});var _e=Q.cliponaxis===!1;h.setClipUrl(K,_e?null:R.layerClipId,P)});s.getComponentMethod("errorbars","plot")(P,J,R,N)},toMoveInsideBar:C}},45784:function(ee){function z(e,M,k,o,T){var b=M.c2p(o?e.s0:e.p0,!0),h=M.c2p(o?e.s1:e.p1,!0),s=k.c2p(o?e.p0:e.s0,!0),t=k.c2p(o?e.p1:e.s1,!0);return T?[(b+h)/2,(s+t)/2]:o?[h,(s+t)/2]:[(b+h)/2,t]}ee.exports=function(e,M){var k,o=e.cd,T=e.xaxis,b=e.yaxis,h=o[0].trace,s=h.type==="funnel",t=h.orientation==="h",a=[];if(M===!1)for(k=0;k<o.length;k++)o[k].selected=0;else for(k=0;k<o.length;k++){var n=o[k],r="ct"in n?n.ct:z(n,T,b,t,s);M.contains(r,!1,k,e)?(a.push({pointNumber:k,x:T.c2d(n.x),y:b.c2d(n.y)}),n.selected=1):n.selected=0}return a}},72592:function(ee,z,e){ee.exports=k;var M=e(3400).distinctVals;function k(o,T){this.traces=o,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,h=T.posAxis._id.charAt(0),s=[],t=0;t<o.length;t++){for(var a=o[t],n=0;n<a.length;n++){var r=a[n],i=r.p;i===void 0&&(i=r[h]),i!==void 0&&s.push(i)}a[0]&&a[0].width1&&(b=Math.min(a[0].width1,b))}this.positions=s;var l=M(s);this.distinctPositions=l.vals,l.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(l.minDiff,b);var u=(T.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(o,T){var b=this.getLabel(o,T),h=this.bins[b]||0;return this.bins[b]=h+T,h},k.prototype.get=function(o,T){var b=this.getLabel(o,T);return this.bins[b]||0},k.prototype.getLabel=function(o,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?o:Math.round(o/this.binWidth))}},60100:function(ee,z,e){var M=e(33428),k=e(76308),o=e(43616),T=e(3400),b=e(24040),h=e(82744).resizeText,s=e(20832),t=s.textfont,a=s.insidetextfont,n=s.outsidetextfont,r=e(60444);function i(v,y,m){o.pointStyle(v.selectAll("path"),y,m),l(v,y,m)}function l(v,y,m){v.selectAll("text").each(function(_){var f=M.select(this),S=T.ensureUniformFontSize(m,u(f,_,y,m));o.font(f,S)})}function u(v,y,m,_){var f=_._fullLayout.font,S=m.textfont;if(v.classed("bartext-inside")){var w=g(y,m);S=c(m,y.i,f,w)}else v.classed("bartext-outside")&&(S=x(m,y.i,f));return S}function p(v,y,m){return d(t,v.textfont,y,m)}function c(v,y,m,_){var f=p(v,y,m);return(v._input.textfont===void 0||v._input.textfont.color===void 0||Array.isArray(v.textfont.color)&&v.textfont.color[y]===void 0)&&(f={color:k.contrast(_),family:f.family,size:f.size,weight:f.weight,style:f.style,variant:f.variant}),d(a,v.insidetextfont,y,f)}function x(v,y,m){var _=p(v,y,m);return d(n,v.outsidetextfont,y,_)}function d(v,y,m,_){y=y||{};var f=r.getValue(y.family,m),S=r.getValue(y.size,m),w=r.getValue(y.color,m),E=r.getValue(y.weight,m),O=r.getValue(y.style,m),C=r.getValue(y.variant,m);return{family:r.coerceString(v.family,f,_.family),size:r.coerceNumber(v.size,S,_.size),color:r.coerceColor(v.color,w,_.color),weight:r.coerceString(v.weight,E,_.weight),style:r.coerceString(v.style,O,_.style),variant:r.coerceString(v.variant,C,_.variant)}}function g(v,y){return y.type==="waterfall"?y[v.dir].marker.color:v.mcc||v.mc||y.marker.color}ee.exports={style:function(v){var y=M.select(v).selectAll('g[class^="barlayer"]').selectAll("g.trace");h(v,y,"bar");var m=y.size(),_=v._fullLayout;y.style("opacity",function(f){return f[0].trace.opacity}).each(function(f){(_.barmode==="stack"&&m>1||_.bargap===0&&_.bargroupgap===0&&!f[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),y.selectAll("g.points").each(function(f){i(M.select(this),f[0].trace,v)}),b.getComponentMethod("errorbars","style")(y)},styleTextPoints:l,styleOnSelect:function(v,y,m){var _=y[0].trace;_.selectedpoints?function(f,S,w){o.selectedPointStyle(f.selectAll("path"),S),function(E,O,C){E.each(function(P){var R,j=M.select(this);if(P.selected){R=T.ensureUniformFontSize(C,u(j,P,O,C));var D=O.selected.textfont&&O.selected.textfont.color;D&&(R.color=D),o.font(j,R)}else o.selectedTextStyle(j,O)})}(f.selectAll("text"),S,w)}(m,_,v):(i(m,_,v),b.getComponentMethod("errorbars","style")(m))},getInsideTextFont:c,getOutsideTextFont:x,getBarColor:g,resizeText:h}},55592:function(ee,z,e){var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(3400).coercePattern;ee.exports=function(b,h,s,t,a){var n=s("marker.color",t),r=k(b,"marker");r&&o(b,h,a,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",M.defaultLine),k(b,"marker.line")&&o(b,h,a,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",n,r),s("selected.marker.color"),s("unselected.marker.color")}},82744:function(ee,z,e){var M=e(33428),k=e(3400);function o(T){return"_"+T+"Text_minsize"}ee.exports={recordMinTextSize:function(T,b,h){if(h.uniformtext.mode){var s=o(T),t=h.uniformtext.minsize,a=b.scale*b.fontSize;b.hide=a<t,h[s]=h[s]||1/0,b.hide||(h[s]=Math.min(h[s],Math.max(a,t)))}},clearMinTextSize:function(T,b){b[o(T)]=void 0},resizeText:function(T,b,h){var s=T._fullLayout,t=s["_"+h+"Text_minsize"];if(t){var a,n=s.uniformtext.mode==="hide";switch(h){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}b.selectAll(a).each(function(r){var i=r.transform;if(i){i.scale=n&&i.hide?0:t/i.fontSize;var l=M.select(this).select("text");k.setTransormAndDisplay(l,i)}})}}}},78100:function(ee,z,e){var M,k=e(21776).Ks,o=e(92880).extendFlat,T=e(8319),b=e(20832);ee.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:o({},b.base,{}),offset:o({},b.offset,{}),width:o({},b.width,{}),text:o({},b.text,{}),hovertext:o({},b.hovertext,{}),marker:(M=o({},b.marker),delete M.cornerradius,M),hoverinfo:T.hoverinfo,hovertemplate:k(),selected:b.selected,unselected:b.unselected}},47056:function(ee,z,e){var M=e(94288).hasColorscale,k=e(47128),o=e(3400).isArrayOrTypedArray,T=e(84664),b=e(96376).setGroupPositions,h=e(4500),s=e(24040).traceIs,t=e(3400).extendFlat;ee.exports={calc:function(a,n){for(var r=a._fullLayout,i=n.subplot,l=r[i].radialaxis,u=r[i].angularaxis,p=l.makeCalcdata(n,"r"),c=u.makeCalcdata(n,"theta"),x=n._length,d=new Array(x),g=p,v=c,y=0;y<x;y++)d[y]={p:v[y],s:g[y]};function m(_){var f=n[_];f!==void 0&&(n["_"+_]=o(f)?u.makeCalcdata(n,_):u.d2c(f,n.thetaunit))}return u.type==="linear"&&(m("width"),m("offset")),M(n,"marker")&&k(a,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),M(n,"marker.line")&&k(a,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(d,n),h(d,n),d},crossTraceCalc:function(a,n,r){for(var i=a.calcdata,l=[],u=0;u<i.length;u++){var p=i[u],c=p[0].trace;c.visible===!0&&s(c,"bar")&&c.subplot===r&&l.push(p)}var x=t({},n.radialaxis,{_id:"x"}),d=n.angularaxis;b(a,d,x,l,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},70384:function(ee,z,e){var M=e(3400),k=e(85968).handleRThetaDefaults,o=e(55592),T=e(78100);ee.exports=function(b,h,s,t){function a(n,r){return M.coerce(b,h,T,n,r)}k(b,h,t,a)?(a("thetaunit"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),o(b,h,a,s,t),M.coerceSelectionMarkerOpacity(h,a)):h.visible=!1}},68896:function(ee,z,e){var M=e(93024),k=e(3400),o=e(63400).getTraceColor,T=k.fillText,b=e(8504).makeHoverPointText,h=e(57384).isPtInsidePolygon;ee.exports=function(s,t,a){var n=s.cd,r=n[0].trace,i=s.subplot,l=i.radialAxis,u=i.angularAxis,p=i.vangles,c=p?h:k.isPtInsideSector,x=s.maxHoverDistance,d=u._period||2*Math.PI,g=Math.abs(l.g2p(Math.sqrt(t*t+a*a))),v=Math.atan2(a,t);if(l.range[0]>l.range[1]&&(v+=Math.PI),M.getClosest(n,function(_){return c(g,v,[_.rp0,_.rp1],[_.thetag0,_.thetag1],p)?x+Math.min(1,Math.abs(_.thetag1-_.thetag0)/d)-1+(_.rp1-g)/(_.rp1-_.rp0)-1:1/0},s),s.index!==!1){var y=n[s.index];s.x0=s.x1=y.ct[0],s.y0=s.y1=y.ct[1];var m=k.extendFlat({},y,{r:y.s,theta:y.p});return T(y,r,s),b(m,r,i,s),s.hovertemplate=r.hovertemplate,s.color=o(r,y),s.xLabelVal=s.yLabelVal=void 0,y.s<0&&(s.idealAlign="left"),[s]}}},94456:function(ee,z,e){ee.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(ee,z,e){var M=e(3400),k=e(9320);ee.exports=function(o,T,b){var h,s={};function t(r,i){return M.coerce(o[h]||{},T[h],k,r,i)}for(var a=0;a<b.length;a++){var n=b[a];n.type==="barpolar"&&n.visible===!0&&(s[h=n.subplot]||(t("barmode"),t("bargap"),s[h]=1))}}},42040:function(ee,z,e){var M=e(33428),k=e(38248),o=e(3400),T=e(43616),b=e(57384);ee.exports=function(h,s,t){var a=h._context.staticPlot,n=s.xaxis,r=s.yaxis,i=s.radialAxis,l=s.angularAxis,u=function(c){var x=c.cxx,d=c.cyy;return c.vangles?function(g,v,y,m){var _,f;o.angleDelta(y,m)>0?(_=y,f=m):(_=m,f=y);var S=[b.findEnclosingVertexAngles(_,c.vangles)[0],(_+f)/2,b.findEnclosingVertexAngles(f,c.vangles)[1]];return b.pathPolygonAnnulus(g,v,_,f,S,x,d)}:function(g,v,y,m){return o.pathAnnulus(g,v,y,m,x,d)}}(s),p=s.layers.frontplot.select("g.barlayer");o.makeTraceGroups(p,t,"trace bars").each(function(){var c=M.select(this),x=o.ensureSingle(c,"g","points").selectAll("g.point").data(o.identity);x.enter().append("g").style("vector-effect",a?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(d){var g,v=M.select(this),y=d.rp0=i.c2p(d.s0),m=d.rp1=i.c2p(d.s1),_=d.thetag0=l.c2g(d.p0),f=d.thetag1=l.c2g(d.p1);if(k(y)&&k(m)&&k(_)&&k(f)&&y!==m&&_!==f){var S=i.c2g(d.s1),w=(_+f)/2;d.ct=[n.c2p(S*Math.cos(w)),r.c2p(S*Math.sin(w))],g=u(y,m,_,f)}else g="M0,0Z";o.ensureSingle(v,"path").attr("d",g)}),T.setClipUrl(c,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,h)})}},63188:function(ee,z,e){var M=e(98304),k=e(52904),o=e(20832),T=e(22548),b=e(29736).axisHoverFormat,h=e(21776).Ks,s=e(92880).extendFlat,t=k.marker,a=t.line;ee.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:s({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:s({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:s({},t.angle,{arrayOk:!1,editType:"calc"}),size:s({},t.size,{arrayOk:!1,editType:"calc"}),color:s({},t.color,{arrayOk:!1,editType:"style"}),line:{color:s({},a.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:s({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:s({},k.text,{}),hovertext:s({},k.hovertext,{}),hovertemplate:h({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:k.zorder}},62555:function(ee,z,e){var M=e(38248),k=e(54460),o=e(1220),T=e(3400),b=e(39032).BADNUM,h=T._;ee.exports=function(c,x){var d,g,v,y,m,_,f,S=c._fullLayout,w=k.getFromId(c,x.xaxis||"x"),E=k.getFromId(c,x.yaxis||"y"),O=[],C=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(v=w,y="x",m=E,_="y",f=!!x.yperiodalignment):(v=E,y="y",m=w,_="x",f=!!x.xperiodalignment);var P,R,j,D,N,W,F=function(ze,Pe,Ne,Ve){var Ye,at=Pe+"0"in ze;if(Pe in ze||at&&"d"+Pe in ze){var rt=Ne.makeCalcdata(ze,Pe);return[o(ze,Ne,Pe,rt).vals,rt]}Ye=at?ze[Pe+"0"]:"name"in ze&&(Ne.type==="category"||M(ze.name)&&["linear","log"].indexOf(Ne.type)!==-1||T.isDateTime(ze.name)&&Ne.type==="date")?ze.name:Ve;for(var dt=Ne.type==="multicategory"?Ne.r2c_just_indices(Ye):Ne.d2c(Ye,0,ze[Pe+"calendar"]),vt=ze._length,ht=new Array(vt),et=0;et<vt;et++)ht[et]=dt;return[ht]}(x,_,m,S[C]),V=F[0],U=F[1],te=T.distinctVals(V,m),J=te.vals,X=te.minDiff/2,K=(x.boxpoints||x.points)==="all"?T.identity:function(ze){return ze.v<P.lf||ze.v>P.uf};if(x._hasPreCompStats){var Q=x[y],Z=function(ze){return v.d2c((x[ze]||[])[d])},re=1/0,oe=-1/0;for(d=0;d<x._length;d++){var ae=V[d];if(M(ae)){if((P={}).pos=P[_]=ae,f&&U&&(P.orig_p=U[d]),P.q1=Z("q1"),P.med=Z("median"),P.q3=Z("q3"),R=[],Q&&T.isArrayOrTypedArray(Q[d]))for(g=0;g<Q[d].length;g++)(W=v.d2c(Q[d][g]))!==b&&(t(N={v:W,i:[d,g]},x,[d,g]),R.push(N));if(P.pts=R.sort(a),D=(j=P[y]=R.map(n)).length,P.med!==b&&P.q1!==b&&P.q3!==b&&P.med>=P.q1&&P.q3>=P.med){var ce=Z("lowerfence");P.lf=ce!==b&&ce<=P.q1?ce:r(P,j,D);var he=Z("upperfence");P.uf=he!==b&&he>=P.q3?he:i(P,j,D);var pe=Z("mean");P.mean=pe!==b?pe:D?T.mean(j,D):(P.q1+P.q3)/2;var xe=Z("sd");P.sd=pe!==b&&xe>=0?xe:D?T.stdev(j,D,P.mean):P.q3-P.q1,P.lo=l(P),P.uo=u(P);var be=Z("notchspan");be=be!==b&&be>0?be:p(P,D),P.ln=P.med-be,P.un=P.med+be;var ve=P.lf,ge=P.uf;x.boxpoints&&j.length&&(ve=Math.min(ve,j[0]),ge=Math.max(ge,j[D-1])),x.notched&&(ve=Math.min(ve,P.ln),ge=Math.max(ge,P.un)),P.min=ve,P.max=ge}else{var we;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),we=P.med!==b?P.med:P.q1!==b?P.q3!==b?(P.q1+P.q3)/2:P.q1:P.q3!==b?P.q3:0,P.med=we,P.q1=P.q3=we,P.lf=P.uf=we,P.mean=P.sd=we,P.ln=P.un=we,P.min=P.max=we}re=Math.min(re,P.min),oe=Math.max(oe,P.max),P.pts2=R.filter(K),O.push(P)}}x._extremes[v._id]=k.findExtremes(v,[re,oe],{padded:!0})}else{var _e=v.makeCalcdata(x,y),se=function(ze,Pe){for(var Ne=ze.length,Ve=new Array(Ne+1),Ye=0;Ye<Ne;Ye++)Ve[Ye]=ze[Ye]-Pe;return Ve[Ne]=ze[Ne-1]+Pe,Ve}(J,X),ie=J.length,fe=function(ze){for(var Pe=new Array(ze),Ne=0;Ne<ze;Ne++)Pe[Ne]=[];return Pe}(ie);for(d=0;d<x._length;d++)if(W=_e[d],M(W)){var Ee=T.findBin(V[d],se);Ee>=0&&Ee<ie&&(t(N={v:W,i:d},x,d),fe[Ee].push(N))}var Te=1/0,Ae=-1/0,Se=x.quartilemethod,Oe=Se==="exclusive",De=Se==="inclusive";for(d=0;d<ie;d++)if(fe[d].length>0){var de,me;(P={}).pos=P[_]=J[d],R=P.pts=fe[d].sort(a),D=(j=P[y]=R.map(n)).length,P.min=j[0],P.max=j[D-1],P.mean=T.mean(j,D),P.sd=T.stdev(j,D,P.mean)*x.sdmultiple,P.med=T.interp(j,.5),D%2&&(Oe||De)?(Oe?(de=j.slice(0,D/2),me=j.slice(D/2+1)):De&&(de=j.slice(0,D/2+1),me=j.slice(D/2)),P.q1=T.interp(de,.5),P.q3=T.interp(me,.5)):(P.q1=T.interp(j,.25),P.q3=T.interp(j,.75)),P.lf=r(P,j,D),P.uf=i(P,j,D),P.lo=l(P),P.uo=u(P);var Me=p(P,D);P.ln=P.med-Me,P.un=P.med+Me,Te=Math.min(Te,P.ln),Ae=Math.max(Ae,P.un),P.pts2=R.filter(K),O.push(P)}x.notched&&T.isTypedArray(_e)&&(_e=Array.from(_e)),x._extremes[v._id]=k.findExtremes(v,x.notched?_e.concat([Te,Ae]):_e,{padded:!0})}return function(ze,Pe){if(T.isArrayOrTypedArray(Pe.selectedpoints))for(var Ne=0;Ne<ze.length;Ne++){for(var Ve=ze[Ne].pts||[],Ye={},at=0;at<Ve.length;at++)Ye[Ve[at].i]=at;T.tagSelected(Ve,Pe,Ye)}}(O,x),O.length>0?(O[0].t={num:S[C],dPos:X,posLetter:_,valLetter:y,labels:{med:h(c,"median:"),min:h(c,"min:"),q1:h(c,"q1:"),q3:h(c,"q3:"),max:h(c,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?h(c,"mean  :").replace("",x.sdmultiple===1?"":x.sdmultiple+""):h(c,"mean:"),lf:h(c,"lower fence:"),uf:h(c,"upper fence:")}},S[C]++,O):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(c,x,d){for(var g in s)T.isArrayOrTypedArray(x[g])&&(Array.isArray(d)?T.isArrayOrTypedArray(x[g][d[0]])&&(c[s[g]]=x[g][d[0]][d[1]]):c[s[g]]=x[g][d])}function a(c,x){return c.v-x.v}function n(c){return c.v}function r(c,x,d){return d===0?c.q1:Math.min(c.q1,x[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,x,!0)+1,d-1)])}function i(c,x,d){return d===0?c.q3:Math.max(c.q3,x[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,x),0)])}function l(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function p(c,x){return x===0?0:1.57*(c.q3-c.q1)/Math.sqrt(x)}},96404:function(ee,z,e){var M=e(54460),k=e(3400),o=e(71888).getAxisGroup,T=["v","h"];function b(h,s,t,a){var n,r,i,l=s.calcdata,u=s._fullLayout,p=a._id,c=p.charAt(0),x=[],d=0;for(n=0;n<t.length;n++)for(i=l[t[n]],r=0;r<i.length;r++)x.push(a.c2l(i[r].pos,!0)),d+=(i[r].pts2||[]).length;if(x.length){var g=k.distinctVals(x);a.type!=="category"&&a.type!=="multicategory"||(g.minDiff=1);var v=g.minDiff/2;M.minDtick(a,g.minDiff,g.vals[0],!0);var y=u[h==="violin"?"_numViolins":"_numBoxes"],m=u[h+"mode"]==="group"&&y>1,_=1-u[h+"gap"],f=1-u[h+"groupgap"];for(n=0;n<t.length;n++){var S,w,E,O,C,P,R=(i=l[t[n]])[0].trace,j=i[0].t,D=R.width,N=R.side;if(D)S=w=O=D/2,E=0;else if(S=v,m){var W=o(u,a._id)+R.orientation,F=(u._alignmentOpts[W]||{})[R.alignmentgroup]||{},V=Object.keys(F.offsetGroups||{}).length,U=V||y;w=S*_*f/U,E=2*S*(((V?R._offsetIndex:j.num)+.5)/U-.5)*_,O=S*_/U}else w=S*_*f,E=0,O=S;j.dPos=S,j.bPos=E,j.bdPos=w,j.wHover=O;var te,J,X,K,Q,Z,re=E+w,oe=!!D;if(N==="positive"?(C=S*(D?1:.5),te=re,P=te=E):N==="negative"?(C=te=E,P=S*(D?1:.5),J=re):(C=P=S,te=J=re),(R.boxpoints||R.points)&&d>0){var ae=R.pointpos,ce=R.jitter,he=R.marker.size/2,pe=0;ae+ce>=0&&((pe=re*(ae+ce))>C?(oe=!0,Q=he,X=pe):pe>te&&(Q=he,X=C)),pe<=C&&(X=C);var xe=0;ae-ce<=0&&((xe=-re*(ae-ce))>P?(oe=!0,Z=he,K=xe):xe>J&&(Z=he,K=P)),xe<=P&&(K=P)}else X=C,K=P;var be=new Array(i.length);for(r=0;r<i.length;r++)be[r]=i[r].pos;R._extremes[p]=M.findExtremes(a,be,{padded:oe,vpadminus:K,vpadplus:X,vpadLinearized:!0,ppadminus:{x:Z,y:Q}[c],ppadplus:{x:Q,y:Z}[c]})}}}ee.exports={crossTraceCalc:function(h,s){for(var t=h.calcdata,a=s.xaxis,n=s.yaxis,r=0;r<T.length;r++){for(var i=T[r],l=i==="h"?n:a,u=[],p=0;p<t.length;p++){var c=t[p],x=c[0].t,d=c[0].trace;d.visible!==!0||d.type!=="box"&&d.type!=="candlestick"||x.empty||(d.orientation||"v")!==i||d.xaxis!==a._id||d.yaxis!==n._id||u.push(p)}b("box",h,u,l)}},setPositionOffset:b}},90624:function(ee,z,e){var M=e(3400),k=e(24040),o=e(76308),T=e(31147),b=e(20011),h=e(52976),s=e(63188);function t(n,r,i,l){function u(N){var W=0;return N&&N.length&&(W+=1,M.isArrayOrTypedArray(N[0])&&N[0].length&&(W+=1)),W}function p(N){return M.validate(n[N],s[N])}var c,x=i("y"),d=i("x");if(r.type==="box"){var g=i("q1"),v=i("median"),y=i("q3");r._hasPreCompStats=g&&g.length&&v&&v.length&&y&&y.length,c=Math.min(M.minRowLength(g),M.minRowLength(v),M.minRowLength(y))}var m,_,f=u(x),S=u(d),w=f&&M.minRowLength(x),E=S&&M.minRowLength(d),O=l.calendar,C={autotypenumbers:l.autotypenumbers};if(r._hasPreCompStats)switch(String(S)+String(f)){case"00":var P=p("x0")||p("dx");m=!p("y0")&&!p("dy")||P?"v":"h",_=c;break;case"10":m="v",_=Math.min(c,E);break;case"20":m="h",_=Math.min(c,d.length);break;case"01":m="h",_=Math.min(c,w);break;case"02":m="v",_=Math.min(c,x.length);break;case"12":m="v",_=Math.min(c,E,x.length);break;case"21":m="h",_=Math.min(c,d.length,w);break;case"11":_=0;break;case"22":var R,j=!1;for(R=0;R<d.length;R++)if(h(d[R],O,C)==="category"){j=!0;break}if(j)m="v",_=Math.min(c,E,x.length);else{for(R=0;R<x.length;R++)if(h(x[R],O,C)==="category"){j=!0;break}j?(m="h",_=Math.min(c,d.length,w)):(m="v",_=Math.min(c,E,x.length))}}else f>0?(m="v",_=S>0?Math.min(E,w):Math.min(w)):S>0?(m="h",_=Math.min(E)):_=0;if(_){r._length=_;var D=i("orientation",m);r._hasPreCompStats?D==="v"&&S===0?(i("x0",0),i("dx",1)):D==="h"&&f===0&&(i("y0",0),i("dy",1)):D==="v"&&S===0?i("x0"):D==="h"&&f===0&&i("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],l)}else r.visible=!1}function a(n,r,i,l){var u=l.prefix,p=M.coerce2(n,r,s,"marker.outliercolor"),c=i("marker.line.outliercolor"),x="outliers";r._hasPreCompStats?x="all":(p||c)&&(x="suspectedoutliers");var d=i(u+"points",x);d?(i("jitter",d==="all"?.3:0),i("pointpos",d==="all"?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.angle"),i("marker.color",r.line.color),i("marker.line.color"),i("marker.line.width"),d==="suspectedoutliers"&&(i("marker.line.outliercolor",r.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete r.marker;var g=i("hoveron");g!=="all"&&g.indexOf("points")===-1||i("hovertemplate"),M.coerceSelectionMarkerOpacity(r,i)}ee.exports={supplyDefaults:function(n,r,i,l){function u(_,f){return M.coerce(n,r,s,_,f)}if(t(n,r,u,l),r.visible!==!1){T(n,r,l,u),u("xhoverformat"),u("yhoverformat");var p=r._hasPreCompStats;p&&(u("lowerfence"),u("upperfence")),u("line.color",(n.marker||{}).color||i),u("line.width"),u("fillcolor",o.addOpacity(r.line.color,.5));var c=!1;if(p){var x=u("mean"),d=u("sd");x&&x.length&&(c=!0,d&&d.length&&(c="sd"))}u("whiskerwidth");var g,v=u("sizemode");v==="quartiles"&&(g=u("boxmean",c)),u("showwhiskers",v==="quartiles"),v!=="sd"&&g!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var y=!1;if(p){var m=u("notchspan");m&&m.length&&(y=!0)}else M.validate(n.notchwidth,s.notchwidth)&&(y=!0);u("notched",y)&&u("notchwidth"),a(n,r,u,{prefix:"box"}),u("zorder")}},crossTraceDefaults:function(n,r){var i,l;function u(x){return M.coerce(l._input,l,s,x)}for(var p=0;p<n.length;p++){var c=(l=n[p]).type;c!=="box"&&c!=="violin"||(i=l._input,r[c+"mode"]==="group"&&b(i,l,r,u))}},handleSampleDefaults:t,handlePointsDefaults:a}},10392:function(ee){ee.exports=function(z,e){return e.hoverOnBox&&(z.hoverOnBox=e.hoverOnBox),"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},27576:function(ee,z,e){var M=e(54460),k=e(3400),o=e(93024),T=e(76308),b=k.fillText;function h(t,a,n,r){var i,l,u,p,c,x,d,g,v,y,m,_,f,S,w=t.cd,E=t.xa,O=t.ya,C=w[0].trace,P=w[0].t,R=C.type==="violin",j=P.bdPos,D=P.wHover,N=function(we){return u.c2l(we.pos)+P.bPos-u.c2l(x)};R&&C.side!=="both"?(C.side==="positive"&&(v=function(we){var _e=N(we);return o.inbox(_e,_e+D,y)},_=j,f=0),C.side==="negative"&&(v=function(we){var _e=N(we);return o.inbox(_e-D,_e,y)},_=0,f=j)):(v=function(we){var _e=N(we);return o.inbox(_e-D,_e+D,y)},_=f=j),S=R?function(we){return o.inbox(we.span[0]-c,we.span[1]-c,y)}:function(we){return o.inbox(we.min-c,we.max-c,y)},C.orientation==="h"?(c=a,x=n,d=S,g=v,i="y",u=O,l="x",p=E):(c=n,x=a,d=v,g=S,i="x",u=E,l="y",p=O);var W=Math.min(1,j/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(we){return(d(we)+g(we))/2}y=t.maxHoverDistance-W,m=t.maxSpikeDistance-W;var V=o.getDistanceFunction(r,d,g,F);if(o.getClosest(w,V,t),t.index===!1)return[];var U=w[t.index],te=C.line.color,J=(C.marker||{}).color;T.opacity(te)&&C.line.width?t.color=te:T.opacity(J)&&C.boxpoints?t.color=J:t.color=C.fillcolor,t[i+"0"]=u.c2p(U.pos+P.bPos-f,!0),t[i+"1"]=u.c2p(U.pos+P.bPos+_,!0),t[i+"LabelVal"]=U.orig_p!==void 0?U.orig_p:U.pos;var X=i+"Spike";t.spikeDistance=F(U)*m/y,t[X]=u.c2p(U.pos,!0);var K=C.boxmean||C.sizemode==="sd"||(C.meanline||{}).visible,Q=C.boxpoints||C.points,Z=Q&&K?["max","uf","q3","med","mean","q1","lf","min"]:Q&&!K?["max","uf","q3","med","q1","lf","min"]:!Q&&K?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],re=p.range[1]<p.range[0];C.orientation===(re?"v":"h")&&Z.reverse();for(var oe=t.spikeDistance,ae=t[X],ce=[],he=0;he<Z.length;he++){var pe=Z[he];if(pe in U){var xe=U[pe],be=p.c2p(xe,!0),ve=k.extendFlat({},t);ve.attr=pe,ve[l+"0"]=ve[l+"1"]=be,ve[l+"LabelVal"]=xe,ve[l+"Label"]=(P.labels?P.labels[pe]+" ":"")+M.hoverLabelText(p,xe,C[l+"hoverformat"]),ve.hoverOnBox=!0,pe!=="mean"||!("sd"in U)||C.boxmean!=="sd"&&C.sizemode!=="sd"||(ve[l+"err"]=U.sd),ve.hovertemplate=!1,ce.push(ve)}}t.name="",t.spikeDistance=void 0,t[X]=void 0;for(var ge=0;ge<ce.length;ge++)ce[ge].attr!=="med"?(ce[ge].name="",ce[ge].spikeDistance=void 0,ce[ge][X]=void 0):(ce[ge].spikeDistance=oe,ce[ge][X]=ae);return ce}function s(t,a,n){for(var r,i,l,u=t.cd,p=t.xa,c=t.ya,x=u[0].trace,d=p.c2p(a),g=c.c2p(n),v=o.quadrature(function(R){var j=Math.max(3,R.mrc||0);return Math.max(Math.abs(p.c2p(R.x)-d)-j,1-3/j)},function(R){var j=Math.max(3,R.mrc||0);return Math.max(Math.abs(c.c2p(R.y)-g)-j,1-3/j)}),y=!1,m=0;m<u.length;m++){i=u[m];for(var _=0;_<(i.pts||[]).length;_++){var f=v(l=i.pts[_]);f<=t.distance&&(t.distance=f,y=[m,_])}}if(!y)return!1;l=(i=u[y[0]]).pts[y[1]];var S=p.c2p(l.x,!0),w=c.c2p(l.y,!0),E=l.mrc||1;r=k.extendFlat({},t,{index:l.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var O,C=i.orig_p,P=C!==void 0?C:i.pos;return x.orientation==="h"?(O=c,r.xLabelVal=l.x,r.yLabelVal=P):(O=p,r.xLabelVal=P,r.yLabelVal=l.y),r[O._id.charAt(0)+"Spike"]=O.c2p(i.pos,!0),b(l,x,r),r}ee.exports={hoverPoints:function(t,a,n,r){var i,l=t.cd[0].trace.hoveron,u=[];return l.indexOf("boxes")!==-1&&(u=u.concat(h(t,a,n,r))),l.indexOf("points")!==-1&&(i=s(t,a,n)),r==="closest"?i?[i]:u:(i&&u.push(i),u)},hoverOnBoxes:h,hoverOnPoints:s}},67244:function(ee,z,e){ee.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(ee){ee.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(ee,z,e){var M=e(24040),k=e(3400),o=e(16560);function T(b,h,s,t,a){for(var n=a+"Layout",r=!1,i=0;i<s.length;i++){var l=s[i];if(M.traceIs(l,n)){r=!0;break}}r&&(t(a+"mode"),t(a+"gap"),t(a+"groupgap"))}ee.exports={supplyLayoutDefaults:function(b,h,s){T(0,0,s,function(t,a){return k.coerce(b,h,o,t,a)},"box")},_supply:T}},18728:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616);function T(s,t,a,n,r){var i,l,u=a.orientation==="h",p=t.val,c=t.pos,x=!!c.rangebreaks,d=n.bPos,g=n.wdPos||0,v=n.bPosPxOffset||0,y=a.whiskerwidth||0,m=a.showwhiskers!==!1,_=a.notched||!1,f=_?1-2*a.notchwidth:1;Array.isArray(n.bdPos)?(i=n.bdPos[0],l=n.bdPos[1]):(i=n.bdPos,l=n.bdPos);var S=s.selectAll("path.box").data(a.type!=="violin"||a.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return M.select(this).attr("d","M0,0Z");var E=c.c2l(w.pos+d,!0),O=c.l2p(E-i)+v,C=c.l2p(E+l)+v,P=x?(O+C)/2:c.l2p(E)+v,R=a.whiskerwidth,j=x?O*R+(1-R)*P:c.l2p(E-g)+v,D=x?C*R+(1-R)*P:c.l2p(E+g)+v,N=c.l2p(E-i*f)+v,W=c.l2p(E+l*f)+v,F=a.sizemode==="sd",V=p.c2p(F?w.mean-w.sd:w.q1,!0),U=F?p.c2p(w.mean+w.sd,!0):p.c2p(w.q3,!0),te=k.constrain(F?p.c2p(w.mean,!0):p.c2p(w.med,!0),Math.min(V,U)+1,Math.max(V,U)-1),J=w.lf===void 0||a.boxpoints===!1||F,X=p.c2p(J?w.min:w.lf,!0),K=p.c2p(J?w.max:w.uf,!0),Q=p.c2p(w.ln,!0),Z=p.c2p(w.un,!0);u?M.select(this).attr("d","M"+te+","+N+"V"+W+"M"+V+","+O+"V"+C+(_?"H"+Q+"L"+te+","+W+"L"+Z+","+C:"")+"H"+U+"V"+O+(_?"H"+Z+"L"+te+","+N+"L"+Q+","+O:"")+"Z"+(m?"M"+V+","+P+"H"+X+"M"+U+","+P+"H"+K+(y===0?"":"M"+X+","+j+"V"+D+"M"+K+","+j+"V"+D):"")):M.select(this).attr("d","M"+N+","+te+"H"+W+"M"+O+","+V+"H"+C+(_?"V"+Q+"L"+W+","+te+"L"+C+","+Z:"")+"V"+U+"H"+O+(_?"V"+Z+"L"+N+","+te+"L"+O+","+Q:"")+"Z"+(m?"M"+P+","+V+"V"+X+"M"+P+","+U+"V"+K+(y===0?"":"M"+j+","+X+"H"+D+"M"+j+","+K+"H"+D):""))})}function b(s,t,a,n){var r=t.x,i=t.y,l=n.bdPos,u=n.bPos,p=a.boxpoints||a.points;k.seedPseudoRandom();var c=s.selectAll("g.points").data(p?function(d){return d.forEach(function(g){g.t=n,g.trace=a}),d}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var x=c.selectAll("path").data(function(d){var g,v,y=d.pts2,m=Math.max((d.max-d.min)/10,d.q3-d.q1),_=1e-9*m,f=.01*m,S=[],w=0;if(a.jitter){if(m===0)for(w=1,S=new Array(y.length),g=0;g<y.length;g++)S[g]=1;else for(g=0;g<y.length;g++){var E=Math.max(0,g-5),O=y[E].v,C=Math.min(y.length-1,g+5),P=y[C].v;p!=="all"&&(y[g].v<d.lf?P=Math.min(P,d.lf):O=Math.max(O,d.uf));var R=Math.sqrt(f*(C-E)/(P-O+_))||0;R=k.constrain(Math.abs(R),0,1),S.push(R),w=Math.max(R,w)}v=2*a.jitter/(w||1)}for(g=0;g<y.length;g++){var j=y[g],D=j.v,N=a.jitter?v*S[g]*(k.pseudoRandom()-.5):0,W=d.pos+u+l*(a.pointpos+N);a.orientation==="h"?(j.y=W,j.x=D):(j.x=W,j.y=D),p==="suspectedoutliers"&&D<d.uo&&D>d.lo&&(j.so=!0)}return y});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(o.translatePoints,r,i)}function h(s,t,a,n){var r,i,l=t.val,u=t.pos,p=!!u.rangebreaks,c=n.bPos,x=n.bPosPxOffset||0,d=a.boxmean||(a.meanline||{}).visible;Array.isArray(n.bdPos)?(r=n.bdPos[0],i=n.bdPos[1]):(r=n.bdPos,i=n.bdPos);var g=s.selectAll("path.mean").data(a.type==="box"&&a.boxmean||a.type==="violin"&&a.box.visible&&a.meanline.visible?k.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(v){var y=u.c2l(v.pos+c,!0),m=u.l2p(y-r)+x,_=u.l2p(y+i)+x,f=p?(m+_)/2:u.l2p(y)+x,S=l.c2p(v.mean,!0),w=l.c2p(v.mean-v.sd,!0),E=l.c2p(v.mean+v.sd,!0);a.orientation==="h"?M.select(this).attr("d","M"+S+","+m+"V"+_+(d==="sd"?"m0,0L"+w+","+f+"L"+S+","+m+"L"+E+","+f+"Z":"")):M.select(this).attr("d","M"+m+","+S+"H"+_+(d==="sd"?"m0,0L"+f+","+w+"L"+m+","+S+"L"+f+","+E+"Z":""))})}ee.exports={plot:function(s,t,a,n){var r=s._context.staticPlot,i=t.xaxis,l=t.yaxis;k.makeTraceGroups(n,a,"trace boxes").each(function(u){var p,c,x=M.select(this),d=u[0],g=d.t,v=d.trace;g.wdPos=g.bdPos*v.whiskerwidth,v.visible!==!0||g.empty?x.remove():(v.orientation==="h"?(p=l,c=i):(p=i,c=l),T(x,{pos:p,val:c},v,g,r),b(x,{x:i,y:l},v,g),h(x,{pos:p,val:c},v,g))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:h}},8264:function(ee){ee.exports=function(z,e){var M,k,o=z.cd,T=z.xaxis,b=z.yaxis,h=[];if(e===!1)for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++)o[M].pts[k].selected=0;else for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++){var s=o[M].pts[k],t=T.c2p(s.x),a=b.c2p(s.y);e.contains([t,a],null,s.i,z)?(h.push({pointNumber:s.i,x:T.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return h}},25776:function(ee,z,e){var M=e(33428),k=e(76308),o=e(43616);ee.exports={style:function(T,b,h){var s=h||M.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var a=M.select(this),n=t[0].trace,r=n.line.width;function i(p,c,x,d){p.style("stroke-width",c+"px").call(k.stroke,x).call(k.fill,d)}var l=a.selectAll("path.box");if(n.type==="candlestick")l.each(function(p){if(!p.empty){var c=M.select(this),x=n[p.dir];i(c,x.line.width,x.line.color,x.fillcolor),c.style("opacity",n.selectedpoints&&!p.selected?.3:1)}});else{i(l,r,n.line.color,n.fillcolor),a.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(k.stroke,n.line.color);var u=a.selectAll("path.point");o.pointStyle(u,n,T)}})},styleOnSelect:function(T,b,h){var s=b[0].trace,t=h.selectAll("path.point");s.selectedpoints?o.selectedPointStyle(t,s):o.pointStyle(t,s,T)}}},64216:function(ee,z,e){var M=e(3400).extendFlat,k=e(29736).axisHoverFormat,o=e(20279),T=e(63188);function b(h){return{line:{color:M({},T.line.color,{dflt:h}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ee.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:M({},T.line.width,{}),editType:"style"},increasing:b(o.increasing.line.color.dflt),decreasing:b(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel,zorder:T.zorder}},46283:function(ee,z,e){var M=e(3400),k=e(54460),o=e(1220),T=e(42812).calcCommon;function b(h,s,t,a){return{min:t,q1:Math.min(h,a),med:a,q3:Math.max(h,a),max:s}}ee.exports=function(h,s){var t=h._fullLayout,a=k.getFromId(h,s.xaxis),n=k.getFromId(h,s.yaxis),r=a.makeCalcdata(s,"x"),i=o(s,a,"x",r).vals,l=T(h,s,r,i,n,b);return l.length?(M.extendFlat(l[0].t,{num:t._numBoxes,dPos:M.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},64588:function(ee,z,e){var M=e(3400),k=e(76308),o=e(52744),T=e(31147),b=e(64216);function h(s,t,a,n){var r=a(n+".line.color");a(n+".line.width",t.line.width),a(n+".fillcolor",k.addOpacity(r,.5))}ee.exports=function(s,t,a,n){function r(i,l){return M.coerce(s,t,b,i,l)}o(s,t,r,n)?(T(s,t,n,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),h(0,t,r,"increasing"),h(0,t,r,"decreasing"),r("text"),r("hovertext"),r("whiskerwidth"),n._requestRangeslider[t.xaxis]=!0,r("zorder")):t.visible=!1}},61712:function(ee,z,e){ee.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(ee,z,e){var M=e(63856),k=e(31780);ee.exports=function(o,T,b,h,s){h("a")||(h("da"),h("a0")),h("b")||(h("db"),h("b0")),function(t,a,n,r){["aaxis","baxis"].forEach(function(i){var l=i.charAt(0),u=t[i]||{},p=k.newContainer(a,i),c={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:a.font,name:i,data:t[l],calendar:a.calendar,dfltColor:r,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};M(u,p,c),p._categories=p._categories||[],t[i]||u.type==="-"||(t[i]={type:u.type})})}(o,T,b,s)}},51676:function(ee,z,e){var M=e(3400).isArrayOrTypedArray;function k(o,T){if(!M(o)||T>=10)return null;for(var b=1/0,h=-1/0,s=o.length,t=0;t<s;t++){var a=o[t];if(M(a)){var n=k(a,T+1);n&&(b=Math.min(n[0],b),h=Math.max(n[1],h))}else b=Math.min(a,b),h=Math.max(a,h)}return[b,h]}ee.exports=function(o){return k(o,0)}},85720:function(ee,z,e){var M=e(25376),k=e(98692),o=e(22548),T=M({editType:"calc"}),b=e(52904).zorder;T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=o.defaultLine,ee.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0,zorder:b}},77712:function(ee,z,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T,b){var h,s,t,a,n,r,i,l,u,p,c,x,d,g=M(T)?"a":"b",v=(g==="a"?k.aaxis:k.baxis).smoothing,y=g==="a"?k.a2i:k.b2j,m=g==="a"?T:b,_=g==="a"?b:T,f=g==="a"?o.a.length:o.b.length,S=g==="a"?o.b.length:o.a.length,w=Math.floor(g==="a"?k.b2j(_):k.a2i(_)),E=g==="a"?function(te){return k.evalxy([],te,w)}:function(te){return k.evalxy([],w,te)};v&&(t=Math.max(0,Math.min(S-2,w)),a=w-t,s=g==="a"?function(te,J){return k.dxydi([],te,t,J,a)}:function(te,J){return k.dxydj([],t,te,a,J)});var O=y(m[0]),C=y(m[1]),P=O<C?1:-1,R=1e-8*(C-O),j=P>0?Math.floor:Math.ceil,D=P>0?Math.ceil:Math.floor,N=P>0?Math.min:Math.max,W=P>0?Math.max:Math.min,F=j(O+R),V=D(C-R),U=[[i=E(O)]];for(h=F;h*P<V*P;h+=P)n=[],c=W(O,h),d=(x=N(C,h+P))-c,r=Math.max(0,Math.min(f-2,Math.floor(.5*(c+x)))),l=E(x),v&&(u=s(r,c-r),p=s(r,x-r),n.push([i[0]+u[0]/3*d,i[1]+u[1]/3*d]),n.push([l[0]-p[0]/3*d,l[1]-p[1]/3*d])),n.push(l),U.push(n),i=l;return U}},98692:function(ee,z,e){var M=e(25376),k=e(22548),o=e(94724),T=e(29736).descriptionWithDates,b=e(67824).overrideAll,h=e(98192).u,s=e(92880).extendFlat;ee.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},o.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},h,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},h,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(ee,z,e){var M=e(85720),k=e(76308).addOpacity,o=e(24040),T=e(3400),b=e(26332),h=e(95936),s=e(42568),t=e(22416),a=e(78344),n=e(52976);ee.exports=function(r,i,l){var u=l.letter,p=l.font||{},c=M[u+"axis"];function x(P,R){return T.coerce(r,i,c,P,R)}function d(P,R){return T.coerce2(r,i,c,P,R)}l.name&&(i._name=l.name,i._id=l.name),x("autotypenumbers",l.autotypenumbersDflt);var g=x("type");g==="-"&&(l.data&&function(P,R){if(P.type==="-"){var j=P._id.charAt(0),D=P[j+"calendar"];P.type=n(R,D,{autotypenumbers:P.autotypenumbers})}}(i,l.data),i.type==="-"?i.type="linear":g=r.type=i.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),i.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),i._hovertitle=u,g==="date"&&o.getComponentMethod("calendars","handleDefaults")(r,i,"calendar",l.calendar),a(i,l.fullLayout),i.c2p=T.identity;var v=x("color",l.dfltColor),y=v===r.color?v:p.color;x("title.text")&&(T.coerceFont(x,"title.font",{weight:p.weight,style:p.style,variant:p.variant,family:p.family,size:T.bigFont(p.size),color:y}),x("title.offset")),x("tickangle"),x("autorange",!i.isValidRange(r.range))&&x("rangemode"),x("range"),i.cleanRange(),x("fixedrange"),b(r,i,x,g),s(r,i,x,g,l),h(r,i,x,g,l),t(r,i,x,{data:l.data,dataAttr:u});var m=d("gridcolor",k(v,.3)),_=d("gridwidth"),f=d("griddash"),S=x("showgrid");S||(delete i.gridcolor,delete i.gridwidth,delete i.griddash);var w=d("startlinecolor",v),E=d("startlinewidth",_);x("startline",i.showgrid||!!w||!!E)||(delete i.startlinecolor,delete i.startlinewidth);var O=d("endlinecolor",v),C=d("endlinewidth",_);return x("endline",i.showgrid||!!O||!!C)||(delete i.endlinecolor,delete i.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",_),x("minorgriddash",f),x("minorgridcolor",k(m,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgriddash,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridwidth,delete i.griddash),i.showticklabels==="none"&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,x("tickmode"),i}},58744:function(ee,z,e){var M=e(54460),k=e(3400).isArray1D,o=e(60776),T=e(51676),b=e(19216),h=e(14724),s=e(24944),t=e(26136),a=e(51512),n=e(2872),r=e(81e3);ee.exports=function(i,l){var u=M.getFromId(i,l.xaxis),p=M.getFromId(i,l.yaxis),c=l.aaxis,x=l.baxis,d=l.x,g=l.y,v=[];d&&k(d)&&v.push("x"),g&&k(g)&&v.push("y"),v.length&&n(l,c,x,"a","b",v);var y=l._a=l._a||l.a,m=l._b=l._b||l.b;d=l._x||l.x,g=l._y||l.y;var _={};if(l._cheater){var f=c.cheatertype==="index"?y.length:y,S=x.cheatertype==="index"?m.length:m;d=o(f,S,l.cheaterslope)}l._x=d=t(d),l._y=g=t(g),a(d,y,m),a(g,y,m),r(l),l.setScale();var w=T(d),E=T(g),O=.5*(w[1]-w[0]),C=.5*(w[1]+w[0]),P=.5*(E[1]-E[0]),R=.5*(E[1]+E[0]),j=1.3;return w=[C-O*j,C+O*j],E=[R-P*j,R+P*j],l._extremes[u._id]=M.findExtremes(u,w,{padded:!0}),l._extremes[p._id]=M.findExtremes(p,E,{padded:!0}),b(l,"a","b"),b(l,"b","a"),h(l,c),h(l,x),_.clipsegments=s(l._xctrl,l._yctrl,c,x),_.x=d,_.y=g,_.a=y,_.b=m,[_]}},24944:function(ee){ee.exports=function(z,e,M,k){var o,T,b,h=[],s=!!M.smoothing,t=!!k.smoothing,a=z[0].length-1,n=z.length-1;for(o=0,T=[],b=[];o<=a;o++)T[o]=z[0][o],b[o]=e[0][o];for(h.push({x:T,y:b,bicubic:s}),o=0,T=[],b=[];o<=n;o++)T[o]=z[o][a],b[o]=e[o][a];for(h.push({x:T,y:b,bicubic:t}),o=a,T=[],b=[];o>=0;o--)T[a-o]=z[n][o],b[a-o]=e[n][o];for(h.push({x:T,y:b,bicubic:s}),o=n,T=[],b=[];o>=0;o--)T[n-o]=z[o][0],b[n-o]=e[o][0];return h.push({x:T,y:b,bicubic:t}),h}},19216:function(ee,z,e){var M=e(54460),k=e(92880).extendFlat;ee.exports=function(o,T,b){var h,s,t,a,n,r,i,l,u,p,c,x,d,g,v=o["_"+T],y=o[T+"axis"],m=y._gridlines=[],_=y._minorgridlines=[],f=y._boundarylines=[],S=o["_"+b],w=o[b+"axis"];y.tickmode==="array"&&(y.tickvals=v.slice());var E=o._xctrl,O=o._yctrl,C=E[0].length,P=E.length,R=o._a.length,j=o._b.length;M.prepTicks(y),y.tickmode==="array"&&delete y.tickvals;var D=y.smoothing?3:1;function N(F){var V,U,te,J,X,K,Q,Z,re,oe,ae,ce,he=[],pe=[],xe={};if(T==="b")for(U=o.b2j(F),te=Math.floor(Math.max(0,Math.min(j-2,U))),J=U-te,xe.length=j,xe.crossLength=R,xe.xy=function(be){return o.evalxy([],be,U)},xe.dxy=function(be,ve){return o.dxydi([],be,te,ve,J)},V=0;V<R;V++)K=Math.min(R-2,V),Q=V-K,Z=o.evalxy([],V,U),w.smoothing&&V>0&&(re=o.dxydi([],V-1,te,0,J),he.push(X[0]+re[0]/3),pe.push(X[1]+re[1]/3),oe=o.dxydi([],V-1,te,1,J),he.push(Z[0]-oe[0]/3),pe.push(Z[1]-oe[1]/3)),he.push(Z[0]),pe.push(Z[1]),X=Z;else for(V=o.a2i(F),K=Math.floor(Math.max(0,Math.min(R-2,V))),Q=V-K,xe.length=R,xe.crossLength=j,xe.xy=function(be){return o.evalxy([],V,be)},xe.dxy=function(be,ve){return o.dxydj([],K,be,Q,ve)},U=0;U<j;U++)te=Math.min(j-2,U),J=U-te,Z=o.evalxy([],V,U),w.smoothing&&U>0&&(ae=o.dxydj([],K,U-1,Q,0),he.push(X[0]+ae[0]/3),pe.push(X[1]+ae[1]/3),ce=o.dxydj([],K,U-1,Q,1),he.push(Z[0]-ce[0]/3),pe.push(Z[1]-ce[1]/3)),he.push(Z[0]),pe.push(Z[1]),X=Z;return xe.axisLetter=T,xe.axis=y,xe.crossAxis=w,xe.value=F,xe.constvar=b,xe.index=l,xe.x=he,xe.y=pe,xe.smoothing=w.smoothing,xe}function W(F){var V,U,te,J,X,K=[],Q=[],Z={};if(Z.length=v.length,Z.crossLength=S.length,T==="b")for(te=Math.max(0,Math.min(j-2,F)),X=Math.min(1,Math.max(0,F-te)),Z.xy=function(re){return o.evalxy([],re,F)},Z.dxy=function(re,oe){return o.dxydi([],re,te,oe,X)},V=0;V<C;V++)K[V]=E[F*D][V],Q[V]=O[F*D][V];else for(U=Math.max(0,Math.min(R-2,F)),J=Math.min(1,Math.max(0,F-U)),Z.xy=function(re){return o.evalxy([],F,re)},Z.dxy=function(re,oe){return o.dxydj([],U,re,J,oe)},V=0;V<P;V++)K[V]=E[V][F*D],Q[V]=O[V][F*D];return Z.axisLetter=T,Z.axis=y,Z.crossAxis=w,Z.value=v[F],Z.constvar=b,Z.index=F,Z.x=K,Z.y=Q,Z.smoothing=w.smoothing,Z}if(y.tickmode==="array"){for(a=5e-15,r=(n=[Math.floor((v.length-1-y.arraytick0)/y.arraydtick*(1+a)),Math.ceil(-y.arraytick0/y.arraydtick/(1+a))].sort(function(F,V){return F-V}))[0]-1,i=n[1]+1,l=r;l<i;l++)(s=y.arraytick0+y.arraydtick*l)<0||s>v.length-1||m.push(k(W(s),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r;l<i;l++)if(t=y.arraytick0+y.arraydtick*l,c=Math.min(t+y.arraydtick,v.length-1),!(t<0||t>v.length-1||c<0||c>v.length-1))for(x=v[t],d=v[c],h=0;h<y.minorgridcount;h++)(g=c-t)<=0||(p=x+(d-x)*(h+1)/(y.minorgridcount+1)*(y.arraydtick/g))<v[0]||p>v[v.length-1]||_.push(k(N(p),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&f.push(k(W(0),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&f.push(k(W(v.length-1),{color:y.endlinecolor,width:y.endlinewidth}))}else{for(a=5e-15,r=(n=[Math.floor((v[v.length-1]-y.tick0)/y.dtick*(1+a)),Math.ceil((v[0]-y.tick0)/y.dtick/(1+a))].sort(function(F,V){return F-V}))[0],i=n[1],l=r;l<=i;l++)u=y.tick0+y.dtick*l,m.push(k(N(u),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r-1;l<i+1;l++)for(u=y.tick0+y.dtick*l,h=0;h<y.minorgridcount;h++)(p=u+y.dtick*(h+1)/(y.minorgridcount+1))<v[0]||p>v[v.length-1]||_.push(k(N(p),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&f.push(k(N(v[0]),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&f.push(k(N(v[v.length-1]),{color:y.endlinecolor,width:y.endlinewidth}))}}},14724:function(ee,z,e){var M=e(54460),k=e(92880).extendFlat;ee.exports=function(o,T){var b,h,s,t=T._labels=[],a=T._gridlines;for(b=0;b<a.length;b++)s=a[b],["start","both"].indexOf(T.showticklabels)!==-1&&(h=M.tickText(T,s.value),k(h,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===a.length-1}),t.push(h)),["end","both"].indexOf(T.showticklabels)!==-1&&(h=M.tickText(T,s.value),k(h,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===a.length-1}),t.push(h))}},62284:function(ee){ee.exports=function(z,e,M,k){var o=z[0]-e[0],T=z[1]-e[1],b=M[0]-e[0],h=M[1]-e[1],s=Math.pow(o*o+T*T,.25),t=Math.pow(b*b+h*h,.25),a=(t*t*o-s*s*b)*k,n=(t*t*T-s*s*h)*k,r=t*(s+t)*3,i=s*(s+t)*3;return[[e[0]+(r&&a/r),e[1]+(r&&n/r)],[e[0]-(i&&a/i),e[1]-(i&&n/i)]]}},60776:function(ee,z,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T){var b,h,s,t,a,n,r=[],i=M(k)?k.length:k,l=M(o)?o.length:o,u=M(k)?k:null,p=M(o)?o:null;u&&(s=(u.length-1)/(u[u.length-1]-u[0])/(i-1)),p&&(t=(p.length-1)/(p[p.length-1]-p[0])/(l-1));var c=1/0,x=-1/0;for(h=0;h<l;h++)for(r[h]=[],a=p?(p[h]-p[0])*t:h/(l-1),b=0;b<i;b++)n=(u?(u[b]-u[0])*s:b/(i-1))-a*T,c=Math.min(n,c),x=Math.max(n,x),r[h][b]=n;var d=1/(x-c),g=-c*d;for(h=0;h<l;h++)for(b=0;b<i;b++)r[h][b]=d*r[h][b]+g;return r}},30180:function(ee,z,e){var M=e(62284),k=e(3400).ensureArray;function o(T,b,h){var s=-.5*h[0]+1.5*b[0],t=-.5*h[1]+1.5*b[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}ee.exports=function(T,b,h,s,t,a){var n,r,i,l,u,p,c,x,d,g,v=h[0].length,y=h.length,m=t?3*v-2:v,_=a?3*y-2:y;for(T=k(T,_),b=k(b,_),i=0;i<_;i++)T[i]=k(T[i],m),b[i]=k(b[i],m);for(r=0,l=0;r<y;r++,l+=a?3:1)for(u=T[l],p=b[l],c=h[r],x=s[r],n=0,i=0;n<v;n++,i+=t?3:1)u[i]=c[n],p[i]=x[n];if(t)for(r=0,l=0;r<y;r++,l+=a?3:1){for(n=1,i=3;n<v-1;n++,i+=3)d=M([h[r][n-1],s[r][n-1]],[h[r][n],s[r][n]],[h[r][n+1],s[r][n+1]],t),T[l][i-1]=d[0][0],b[l][i-1]=d[0][1],T[l][i+1]=d[1][0],b[l][i+1]=d[1][1];g=o([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=g[0],b[l][1]=g[1],g=o([T[l][m-1],b[l][m-1]],[T[l][m-3],b[l][m-3]],[T[l][m-4],b[l][m-4]]),T[l][m-2]=g[0],b[l][m-2]=g[1]}if(a)for(i=0;i<m;i++){for(l=3;l<_-3;l+=3)d=M([T[l-3][i],b[l-3][i]],[T[l][i],b[l][i]],[T[l+3][i],b[l+3][i]],a),T[l-1][i]=d[0][0],b[l-1][i]=d[0][1],T[l+1][i]=d[1][0],b[l+1][i]=d[1][1];g=o([T[0][i],b[0][i]],[T[2][i],b[2][i]],[T[3][i],b[3][i]]),T[1][i]=g[0],b[1][i]=g[1],g=o([T[_-1][i],b[_-1][i]],[T[_-3][i],b[_-3][i]],[T[_-4][i],b[_-4][i]]),T[_-2][i]=g[0],b[_-2][i]=g[1]}if(t&&a)for(l=1;l<_;l+=(l+1)%3==0?2:1){for(i=3;i<m-3;i+=3)d=M([T[l][i-3],b[l][i-3]],[T[l][i],b[l][i]],[T[l][i+3],b[l][i+3]],t),T[l][i-1]=.5*(T[l][i-1]+d[0][0]),b[l][i-1]=.5*(b[l][i-1]+d[0][1]),T[l][i+1]=.5*(T[l][i+1]+d[1][0]),b[l][i+1]=.5*(b[l][i+1]+d[1][1]);g=o([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=.5*(T[l][1]+g[0]),b[l][1]=.5*(b[l][1]+g[1]),g=o([T[l][m-1],b[l][m-1]],[T[l][m-3],b[l][m-3]],[T[l][m-4],b[l][m-4]]),T[l][m-2]=.5*(T[l][m-2]+g[0]),b[l][m-2]=.5*(b[l][m-2]+g[1])}return[T,b]}},24588:function(ee){ee.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(ee){ee.exports=function(z,e,M){return e&&M?function(k,o,T,b,h){var s,t,a,n,r,i;k||(k=[]),o*=3,T*=3;var l=b*b,u=1-b,p=u*u,c=u*b*2,x=-3*p,d=3*(p-c),g=3*(c-l),v=3*l,y=h*h,m=y*h,_=1-h,f=_*_,S=f*_;for(i=0;i<z.length;i++)s=x*(r=z[i])[T][o]+d*r[T][o+1]+g*r[T][o+2]+v*r[T][o+3],t=x*r[T+1][o]+d*r[T+1][o+1]+g*r[T+1][o+2]+v*r[T+1][o+3],a=x*r[T+2][o]+d*r[T+2][o+1]+g*r[T+2][o+2]+v*r[T+2][o+3],n=x*r[T+3][o]+d*r[T+3][o+1]+g*r[T+3][o+2]+v*r[T+3][o+3],k[i]=S*s+3*(f*h*t+_*y*a)+m*n;return k}:e?function(k,o,T,b,h){var s,t,a,n;k||(k=[]),o*=3;var r=b*b,i=1-b,l=i*i,u=i*b*2,p=-3*l,c=3*(l-u),x=3*(u-r),d=3*r,g=1-h;for(a=0;a<z.length;a++)s=p*(n=z[a])[T][o]+c*n[T][o+1]+x*n[T][o+2]+d*n[T][o+3],t=p*n[T+1][o]+c*n[T+1][o+1]+x*n[T+1][o+2]+d*n[T+1][o+3],k[a]=g*s+h*t;return k}:M?function(k,o,T,b,h){var s,t,a,n,r,i;k||(k=[]),T*=3;var l=h*h,u=l*h,p=1-h,c=p*p,x=c*p;for(r=0;r<z.length;r++)s=(i=z[r])[T][o+1]-i[T][o],t=i[T+1][o+1]-i[T+1][o],a=i[T+2][o+1]-i[T+2][o],n=i[T+3][o+1]-i[T+3][o],k[r]=x*s+3*(c*h*t+p*l*a)+u*n;return k}:function(k,o,T,b,h){var s,t,a,n;k||(k=[]);var r=1-h;for(a=0;a<z.length;a++)s=(n=z[a])[T][o+1]-n[T][o],t=n[T+1][o+1]-n[T+1][o],k[a]=r*s+h*t;return k}}},24464:function(ee){ee.exports=function(z,e,M){return e&&M?function(k,o,T,b,h){var s,t,a,n,r,i;k||(k=[]),o*=3,T*=3;var l=b*b,u=l*b,p=1-b,c=p*p,x=c*p,d=h*h,g=1-h,v=g*g,y=g*h*2,m=-3*v,_=3*(v-y),f=3*(y-d),S=3*d;for(i=0;i<z.length;i++)s=m*(r=z[i])[T][o]+_*r[T+1][o]+f*r[T+2][o]+S*r[T+3][o],t=m*r[T][o+1]+_*r[T+1][o+1]+f*r[T+2][o+1]+S*r[T+3][o+1],a=m*r[T][o+2]+_*r[T+1][o+2]+f*r[T+2][o+2]+S*r[T+3][o+2],n=m*r[T][o+3]+_*r[T+1][o+3]+f*r[T+2][o+3]+S*r[T+3][o+3],k[i]=x*s+3*(c*b*t+p*l*a)+u*n;return k}:e?function(k,o,T,b,h){var s,t,a,n,r,i;k||(k=[]),o*=3;var l=h*h,u=l*h,p=1-h,c=p*p,x=c*p;for(r=0;r<z.length;r++)s=(i=z[r])[T+1][o]-i[T][o],t=i[T+1][o+1]-i[T][o+1],a=i[T+1][o+2]-i[T][o+2],n=i[T+1][o+3]-i[T][o+3],k[r]=x*s+3*(c*h*t+p*l*a)+u*n;return k}:M?function(k,o,T,b,h){var s,t,a,n;k||(k=[]),T*=3;var r=1-b,i=h*h,l=1-h,u=l*l,p=l*h*2,c=-3*u,x=3*(u-p),d=3*(p-i),g=3*i;for(a=0;a<z.length;a++)s=c*(n=z[a])[T][o]+x*n[T+1][o]+d*n[T+2][o]+g*n[T+3][o],t=c*n[T][o+1]+x*n[T+1][o+1]+d*n[T+2][o+1]+g*n[T+3][o+1],k[a]=r*s+b*t;return k}:function(k,o,T,b,h){var s,t,a,n;k||(k=[]);var r=1-b;for(a=0;a<z.length;a++)s=(n=z[a])[T+1][o]-n[T][o],t=n[T+1][o+1]-n[T][o+1],k[a]=r*s+b*t;return k}}},29056:function(ee){ee.exports=function(z,e,M,k,o){var T=e-2,b=M-2;return k&&o?function(h,s,t){var a,n,r,i,l,u;h||(h=[]);var p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-p)),d=Math.max(0,Math.min(1,t-c));p*=3,c*=3;var g=x*x,v=g*x,y=1-x,m=y*y,_=m*y,f=d*d,S=f*d,w=1-d,E=w*w,O=E*w;for(u=0;u<z.length;u++)a=_*(l=z[u])[c][p]+3*(m*x*l[c][p+1]+y*g*l[c][p+2])+v*l[c][p+3],n=_*l[c+1][p]+3*(m*x*l[c+1][p+1]+y*g*l[c+1][p+2])+v*l[c+1][p+3],r=_*l[c+2][p]+3*(m*x*l[c+2][p+1]+y*g*l[c+2][p+2])+v*l[c+2][p+3],i=_*l[c+3][p]+3*(m*x*l[c+3][p+1]+y*g*l[c+3][p+2])+v*l[c+3][p+3],h[u]=O*a+3*(E*d*n+w*f*r)+S*i;return h}:k?function(h,s,t){h||(h=[]);var a,n,r,i,l,u,p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-p)),d=Math.max(0,Math.min(1,t-c));p*=3;var g=x*x,v=g*x,y=1-x,m=y*y,_=m*y,f=1-d;for(l=0;l<z.length;l++)a=f*(u=z[l])[c][p]+d*u[c+1][p],n=f*u[c][p+1]+d*u[c+1][p+1],r=f*u[c][p+2]+d*u[c+1][p+1],i=f*u[c][p+3]+d*u[c+1][p+1],h[l]=_*a+3*(m*x*n+y*g*r)+v*i;return h}:o?function(h,s,t){h||(h=[]);var a,n,r,i,l,u,p=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-p)),d=Math.max(0,Math.min(1,t-c));c*=3;var g=d*d,v=g*d,y=1-d,m=y*y,_=m*y,f=1-x;for(l=0;l<z.length;l++)a=f*(u=z[l])[c][p]+x*u[c][p+1],n=f*u[c+1][p]+x*u[c+1][p+1],r=f*u[c+2][p]+x*u[c+2][p+1],i=f*u[c+3][p]+x*u[c+3][p+1],h[l]=_*a+3*(m*d*n+y*g*r)+v*i;return h}:function(h,s,t){h||(h=[]);var a,n,r,i,l=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),b)),p=Math.max(0,Math.min(1,s-l)),c=Math.max(0,Math.min(1,t-u)),x=1-c,d=1-p;for(r=0;r<z.length;r++)a=d*(i=z[r])[u][l]+p*i[u][l+1],n=d*i[u+1][l]+p*i[u+1][l+1],h[r]=x*a+c*n;return h}}},38356:function(ee,z,e){var M=e(3400),k=e(86411),o=e(93504),T=e(85720),b=e(22548);ee.exports=function(h,s,t,a){function n(i,l){return M.coerce(h,s,T,i,l)}s._clipPathId="clip"+s.uid+"carpet";var r=n("color",b.defaultLine);M.coerceFont(n,"font",a.font),n("carpet"),o(h,s,a,n,r),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(h,s,n)||(s.visible=!1),s._cheater&&n("cheaterslope"),n("zorder")):s.visible=!1}},95856:function(ee,z,e){ee.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(ee){ee.exports=function(z,e){for(var M,k=z._fullData.length,o=0;o<k;o++){var T=z._fullData[o];if(T.index!==e.index&&T.type==="carpet"&&(M||(M=T),T.carpet===e.carpet))return T}return M}},53416:function(ee){ee.exports=function(z,e,M){if(z.length===0)return"";var k,o=[],T=M?3:1;for(k=0;k<z.length;k+=T)o.push(z[k]+","+e[k]),M&&k<z.length-T&&(o.push("C"),o.push([z[k+1]+","+e[k+1],z[k+2]+","+e[k+2]+" "].join(" ")));return o.join(M?"":"L")}},87072:function(ee,z,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T){var b;for(M(k)?k.length>o.length&&(k=k.slice(0,o.length)):k=[],b=0;b<o.length;b++)k[b]=T(o[b]);return k}},15584:function(ee){ee.exports=function(z,e,M,k,o,T){var b=o[0]*z.dpdx(e),h=o[1]*z.dpdy(M),s=1,t=1;if(T){var a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),n=Math.sqrt(T[0]*T[0]+T[1]*T[1]),r=(o[0]*T[0]+o[1]*T[1])/a/n;t=Math.max(0,r)}var i=180*Math.atan2(h,b)/Math.PI;return i<-90?(i+=180,s=-s):i>90&&(i-=180,s=-s),{angle:i,flip:s,p:z.c2p(k,e,M),offsetMultplier:t}}},164:function(ee,z,e){var M=e(33428),k=e(43616),o=e(87072),T=e(53416),b=e(15584),h=e(72736),s=e(3400),t=s.strRotate,a=s.strTranslate,n=e(84284);function r(c,x,d,g,v,y,m){var _="const-"+v+"-lines",f=d.selectAll("."+_).data(y);f.enter().append("path").classed(_,!0).style("vector-effect",m?"none":"non-scaling-stroke"),f.each(function(S){var w=S,E=w.x,O=w.y,C=o([],E,c.c2p),P=o([],O,x.c2p),R="M"+T(C,P,w.smoothing);M.select(this).attr("d",R).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),f.exit().remove()}function i(c,x,d,g,v,y,m,_){var f=y.selectAll("text."+_).data(m);f.enter().append("text").classed(_,!0);var S=0,w={};return f.each(function(E,O){var C;if(E.axis.tickangle==="auto")C=b(g,x,d,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=b(g,x,d,E.xy,[Math.cos(P),Math.sin(P)])}O||(w={angle:C.angle,flip:C.flip});var R=(E.endAnchor?-1:1)*C.flip,j=M.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(h.convertToTspans,c),D=k.bBox(this);j.attr("transform",a(C.p[0],C.p[1])+t(C.angle)+a(E.axis.labelpadding*R,.3*D.height)),S=Math.max(S,D.width+E.axis.labelpadding)}),f.exit().remove(),w.maxExtent=S,w}ee.exports=function(c,x,d,g){var v=c._context.staticPlot,y=x.xaxis,m=x.yaxis,_=c._fullLayout._clips;s.makeTraceGroups(g,d,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace,O=E.aaxis,C=E.baxis,P=s.ensureSingle(S,"g","minorlayer"),R=s.ensureSingle(S,"g","majorlayer"),j=s.ensureSingle(S,"g","boundarylayer"),D=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),r(y,m,R,0,"a",O._gridlines,!0),r(y,m,R,0,"b",C._gridlines,!0),r(y,m,P,0,"a",O._minorgridlines,!0),r(y,m,P,0,"b",C._minorgridlines,!0),r(y,m,j,0,"a-boundary",O._boundarylines,v),r(y,m,j,0,"b-boundary",C._boundarylines,v);var N=i(c,y,m,E,0,D,O._labels,"a-label"),W=i(c,y,m,E,0,D,C._labels,"b-label");(function(F,V,U,te,J,X,K,Q){var Z,re,oe,ae,ce=s.aggNums(Math.min,null,U.a),he=s.aggNums(Math.max,null,U.a),pe=s.aggNums(Math.min,null,U.b),xe=s.aggNums(Math.max,null,U.b);Z=.5*(ce+he),re=pe,oe=U.ab2xy(Z,re,!0),ae=U.dxyda_rough(Z,re),K.angle===void 0&&s.extendFlat(K,b(U,J,X,oe,U.dxydb_rough(Z,re))),p(F,V,U,0,oe,ae,U.aaxis,J,X,K,"a-title"),Z=ce,re=.5*(pe+xe),oe=U.ab2xy(Z,re,!0),ae=U.dxydb_rough(Z,re),Q.angle===void 0&&s.extendFlat(Q,b(U,J,X,oe,U.dxyda_rough(Z,re))),p(F,V,U,0,oe,ae,U.baxis,J,X,Q,"b-title")})(c,D,E,0,y,m,N,W),function(F,V,U,te,J){var X,K,Q,Z,re=U.select("#"+F._clipPathId);re.size()||(re=U.append("clipPath").classed("carpetclip",!0));var oe=s.ensureSingle(re,"path","carpetboundary"),ae=V.clipsegments,ce=[];for(Z=0;Z<ae.length;Z++)X=ae[Z],K=o([],X.x,te.c2p),Q=o([],X.y,J.c2p),ce.push(T(K,Q,X.bicubic));var he="M"+ce.join("L")+"Z";re.attr("id",F._clipPathId),oe.attr("d",he)}(E,w,_,y,m)})};var l=n.LINE_SPACING,u=(1-n.MID_SHIFT)/l+1;function p(c,x,d,g,v,y,m,_,f,S,w){var E=[];m.title.text&&E.push(m.title.text);var O=x.selectAll("text."+w).data(E),C=S.maxExtent;O.enter().append("text").classed(w,!0),O.each(function(){var P=b(d,_,f,v,y);["start","both"].indexOf(m.showticklabels)===-1&&(C=0);var R=m.title.font.size;C+=R+m.title.offset;var j=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,D=j>90&&j<270,N=M.select(this);N.text(m.title.text).call(h.convertToTspans,c),D&&(C=(-h.lineCount(N)+u)*l*R-C),N.attr("transform",a(P.p[0],P.p[1])+t(P.angle)+a(0,C)).attr("text-anchor","middle").call(k.font,m.title.font)}),O.exit().remove()}},81e3:function(ee,z,e){var M=e(24588),k=e(14952).findBin,o=e(30180),T=e(29056),b=e(26435),h=e(24464);ee.exports=function(s){var t=s._a,a=s._b,n=t.length,r=a.length,i=s.aaxis,l=s.baxis,u=t[0],p=t[n-1],c=a[0],x=a[r-1],d=t[t.length-1]-t[0],g=a[a.length-1]-a[0],v=d*M.RELATIVE_CULL_TOLERANCE,y=g*M.RELATIVE_CULL_TOLERANCE;u-=v,p+=v,c-=y,x+=y,s.isVisible=function(m,_){return m>u&&m<p&&_>c&&_<x},s.isOccluded=function(m,_){return m<u||m>p||_<c||_>x},s.setScale=function(){var m=s._x,_=s._y,f=o(s._xctrl,s._yctrl,m,_,i.smoothing,l.smoothing);s._xctrl=f[0],s._yctrl=f[1],s.evalxy=T([s._xctrl,s._yctrl],n,r,i.smoothing,l.smoothing),s.dxydi=b([s._xctrl,s._yctrl],i.smoothing,l.smoothing),s.dxydj=h([s._xctrl,s._yctrl],i.smoothing,l.smoothing)},s.i2a=function(m){var _=Math.max(0,Math.floor(m[0]),n-2),f=m[0]-_;return(1-f)*t[_]+f*t[_+1]},s.j2b=function(m){var _=Math.max(0,Math.floor(m[1]),n-2),f=m[1]-_;return(1-f)*a[_]+f*a[_+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var _=Math.max(0,Math.min(k(m,t),n-2)),f=t[_],S=t[_+1];return Math.max(0,Math.min(n-1,_+(m-f)/(S-f)))},s.b2j=function(m){var _=Math.max(0,Math.min(k(m,a),r-2)),f=a[_],S=a[_+1];return Math.max(0,Math.min(r-1,_+(m-f)/(S-f)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,_){return s.evalxy([],m,_)},s.ab2xy=function(m,_,f){if(!f&&(m<t[0]||m>t[n-1]|_<a[0]||_>a[r-1]))return[!1,!1];var S=s.a2i(m),w=s.b2j(_),E=s.evalxy([],S,w);if(f){var O,C,P,R,j=0,D=0,N=[];m<t[0]?(O=0,C=0,j=(m-t[0])/(t[1]-t[0])):m>t[n-1]?(O=n-2,C=1,j=(m-t[n-1])/(t[n-1]-t[n-2])):C=S-(O=Math.max(0,Math.min(n-2,Math.floor(S)))),_<a[0]?(P=0,R=0,D=(_-a[0])/(a[1]-a[0])):_>a[r-1]?(P=r-2,R=1,D=(_-a[r-1])/(a[r-1]-a[r-2])):R=w-(P=Math.max(0,Math.min(r-2,Math.floor(w)))),j&&(s.dxydi(N,O,P,C,R),E[0]+=N[0]*j,E[1]+=N[1]*j),D&&(s.dxydj(N,O,P,C,R),E[0]+=N[0]*D,E[1]+=N[1]*D)}return E},s.c2p=function(m,_,f){return[_.c2p(m[0]),f.c2p(m[1])]},s.p2x=function(m,_,f){return[_.p2c(m[0]),f.p2c(m[1])]},s.dadi=function(m){var _=Math.max(0,Math.min(t.length-2,m));return t[_+1]-t[_]},s.dbdj=function(m){var _=Math.max(0,Math.min(a.length-2,m));return a[_+1]-a[_]},s.dxyda=function(m,_,f,S){var w=s.dxydi(null,m,_,f,S),E=s.dadi(m,f);return[w[0]/E,w[1]/E]},s.dxydb=function(m,_,f,S){var w=s.dxydj(null,m,_,f,S),E=s.dbdj(_,S);return[w[0]/E,w[1]/E]},s.dxyda_rough=function(m,_,f){var S=d*(f||.1),w=s.ab2xy(m+S,_,!0),E=s.ab2xy(m-S,_,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dxydb_rough=function(m,_,f){var S=g*(f||.1),w=s.ab2xy(m,_+S,!0),E=s.ab2xy(m,_-S,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},51512:function(ee,z,e){var M=e(3400);ee.exports=function(k,o,T){var b,h,s,t=[],a=[],n=k[0].length,r=k.length;function i(F,V){var U,te=0,J=0;return F>0&&(U=k[V][F-1])!==void 0&&(J++,te+=U),F<n-1&&(U=k[V][F+1])!==void 0&&(J++,te+=U),V>0&&(U=k[V-1][F])!==void 0&&(J++,te+=U),V<r-1&&(U=k[V+1][F])!==void 0&&(J++,te+=U),te/Math.max(1,J)}var l,u,p,c,x,d,g,v,y,m,_,f=0;for(b=0;b<n;b++)for(h=0;h<r;h++)k[h][b]===void 0&&(t.push(b),a.push(h),k[h][b]=i(b,h)),f=Math.max(f,Math.abs(k[h][b]));if(!t.length)return k;var S=0,w=0,E=t.length;do{for(S=0,s=0;s<E;s++){b=t[s],h=a[s];var O,C,P,R,j,D,N=0,W=0;b===0?(P=o[j=Math.min(n-1,2)],R=o[1],O=k[h][j],W+=(C=k[h][1])+(C-O)*(o[0]-R)/(R-P),N++):b===n-1&&(P=o[j=Math.max(0,n-3)],R=o[n-2],O=k[h][j],W+=(C=k[h][n-2])+(C-O)*(o[n-1]-R)/(R-P),N++),(b===0||b===n-1)&&h>0&&h<r-1&&(l=T[h+1]-T[h],W+=((u=T[h]-T[h-1])*k[h+1][b]+l*k[h-1][b])/(u+l),N++),h===0?(P=T[D=Math.min(r-1,2)],R=T[1],O=k[D][b],W+=(C=k[1][b])+(C-O)*(T[0]-R)/(R-P),N++):h===r-1&&(P=T[D=Math.max(0,r-3)],R=T[r-2],O=k[D][b],W+=(C=k[r-2][b])+(C-O)*(T[r-1]-R)/(R-P),N++),(h===0||h===r-1)&&b>0&&b<n-1&&(l=o[b+1]-o[b],W+=((u=o[b]-o[b-1])*k[h][b+1]+l*k[h][b-1])/(u+l),N++),N?W/=N:(p=o[b+1]-o[b],c=o[b]-o[b-1],v=(x=T[h+1]-T[h])*(d=T[h]-T[h-1])*(x+d),W=((g=p*c*(p+c))*(d*k[h+1][b]+x*k[h-1][b])+v*(c*k[h][b+1]+p*k[h][b-1]))/(v*(c+p)+g*(d+x))),S+=(m=(y=W-k[h][b])/f)*m,_=N?0:.85,k[h][b]+=y*(1+_)}S=Math.sqrt(S)}while(w++<100&&S>1e-5);return M.log("Smoother converged to",S,"after",w,"iterations"),k}},86411:function(ee,z,e){var M=e(3400).isArray1D;ee.exports=function(k,o,T){var b=T("x"),h=b&&b.length,s=T("y"),t=s&&s.length;if(!h&&!t)return!1;if(o._cheater=!b,h&&!M(b)||t&&!M(s))o._length=null;else{var a=h?b.length:1/0;t&&(a=Math.min(a,s.length)),o.a&&o.a.length&&(a=Math.min(a,o.a.length)),o.b&&o.b.length&&(a=Math.min(a,o.b.length)),o._length=a}return!0}},83372:function(ee,z,e){var M=e(21776).Ks,k=e(6096),o=e(49084),T=e(45464),b=e(22548).defaultLine,h=e(92880).extendFlat,s=k.marker.line;ee.exports=h({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:h({},k.geojson,{}),featureidkey:k.featureidkey,text:h({},k.text,{}),hovertext:h({},k.hovertext,{}),marker:{line:{color:h({},s.color,{dflt:b}),width:h({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:h({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:h({},T.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(ee,z,e){var M=e(38248),k=e(39032).BADNUM,o=e(47128),T=e(20148),b=e(4500);function h(s){return s&&typeof s=="string"}ee.exports=function(s,t){var a,n=t._length,r=new Array(n);a=t.geojson?function(c){return h(c)||M(c)}:h;for(var i=0;i<n;i++){var l=r[i]={},u=t.locations[i],p=t.z[i];a(u)&&M(p)?(l.loc=u,l.z=p):(l.loc=null,l.z=k),l.index=i}return T(r,t),o(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(r,t),r}},30972:function(ee,z,e){var M=e(3400),k=e(27260),o=e(83372);ee.exports=function(T,b,h,s){function t(l,u){return M.coerce(T,b,o,l,u)}var a=t("locations"),n=t("z");if(a&&a.length&&M.isArrayOrTypedArray(n)&&n.length){b._length=Math.min(a.length,n.length);var r,i=t("geojson");(typeof i=="string"&&i!==""||M.isPlainObject(i))&&(r="geojson-id"),t("locationmode",r)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},52428:function(ee){ee.exports=function(z,e,M,k,o){z.location=e.location,z.z=e.z;var T=k[o];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z.ct=T.ct,z}},69224:function(ee,z,e){var M=e(54460),k=e(83372),o=e(3400).fillText;ee.exports=function(T,b,h){var s,t,a,n,r=T.cd,i=r[0].trace,l=T.subplot,u=[b,h],p=[b+360,h];for(t=0;t<r.length;t++)if(n=!1,(s=r[t])._polygons){for(a=0;a<s._polygons.length;a++)s._polygons[a].contains(u)&&(n=!n),s._polygons[a].contains(p)&&(n=!n);if(n)break}if(n&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=M.tickText(l.mockAxis,l.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(c,x,d){if(!x.hovertemplate){var g=d.hi||x.hoverinfo,v=String(d.loc),y=g==="all"?k.hoverinfo.flags:g.split("+"),m=y.indexOf("name")!==-1,_=y.indexOf("location")!==-1,f=y.indexOf("z")!==-1,S=y.indexOf("text")!==-1,w=[];!m&&_?c.nameOverride=v:(m&&(c.nameOverride=x.name),_&&w.push(v)),f&&w.push(c.zLabel),S&&o(d,x,w),c.extraText=w.join("<br>")}}(T,i,s),[T]}},54272:function(ee,z,e){ee.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(ee,z,e){var M=e(33428),k=e(3400),o=e(27144),T=e(59972).getTopojsonFeatures,b=e(19280).findExtremes,h=e(7947).style;ee.exports={calcGeoJSON:function(s,t){for(var a=s[0].trace,n=t[a.geo],r=n._subplot,i=a.locationmode,l=a._length,u=i==="geojson-id"?o.extractTraceFeature(s):T(a,r.topojson),p=[],c=[],x=0;x<l;x++){var d=s[x],g=i==="geojson-id"?d.fOut:o.locationToFeature(i,d.loc,u);if(g){d.geojson=g,d.ct=g.properties.ct,d._polygons=o.feature2polygons(g);var v=o.computeBbox(g);p.push(v[0],v[2]),c.push(v[1],v[3])}else d.geojson=null}if(n.fitbounds==="geojson"&&i==="geojson-id"){var y=o.computeBbox(o.getTraceGeojson(a));p=[y[0],y[2]],c=[y[1],y[3]]}var m={padded:!0};a._extremes.lon=b(n.lonaxis._ax,p,m),a._extremes.lat=b(n.lataxis._ax,c,m)},plot:function(s,t,a){var n=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(n,a,"trace choropleth").each(function(r){var i=M.select(this).selectAll("path.choroplethlocation").data(k.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),h(s,r)})}}},17328:function(ee){ee.exports=function(z,e){var M,k,o,T,b,h=z.cd,s=z.xaxis,t=z.yaxis,a=[];if(e===!1)for(M=0;M<h.length;M++)h[M].selected=0;else for(M=0;M<h.length;M++)(o=(k=h[M]).ct)&&(T=s.c2p(o),b=t.c2p(o),e.contains([T,b],null,M,z)?(a.push({pointNumber:M,lon:o[0],lat:o[1]}),k.selected=1):k.selected=0);return a}},7947:function(ee,z,e){var M=e(33428),k=e(76308),o=e(43616),T=e(8932);function b(h,s){var t=s[0].trace,a=s[0].node3.selectAll(".choroplethlocation"),n=t.marker||{},r=n.line||{},i=T.makeColorScaleFuncFromTrace(t);a.each(function(l){M.select(this).attr("fill",i(l.z)).call(k.stroke,l.mlc||r.color).call(o.dashLine,"",l.mlw||r.width||0).style("opacity",n.opacity)}),o.selectedPointStyle(a,t)}ee.exports={style:function(h,s){s&&b(0,s)},styleOnSelect:function(h,s){var t=s[0].node3,a=s[0].trace;a.selectedpoints?o.selectedPointStyle(t.selectAll(".choroplethlocation"),a):b(0,s)}}},45608:function(ee,z,e){var M=e(83372),k=e(49084),o=e(21776).Ks,T=e(45464),b=e(92880).extendFlat;ee.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:b({},M.marker.line.color,{editType:"plot"}),width:b({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(ee,z,e){var M=e(38248),k=e(3400),o=e(8932),T=e(43616),b=e(44808).makeBlank,h=e(27144);function s(t){var a,n=t[0].trace,r=n._opts;if(n.selectedpoints){for(var i=T.makeSelectedPointStyleFns(n),l=0;l<t.length;l++){var u=t[l];u.fOut&&(u.fOut.properties.mo2=i.selectedOpacityFn(u))}a={type:"identity",property:"mo2"}}else a=k.isArrayOrTypedArray(n.marker.opacity)?{type:"identity",property:"mo"}:n.marker.opacity;return k.extendFlat(r.fill.paint,{"fill-opacity":a}),k.extendFlat(r.line.paint,{"line-opacity":a}),r}ee.exports={convert:function(t){var a=t[0].trace,n=a.visible===!0&&a._length!==0,r={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},l=a._opts={fill:r,line:i,geojson:b()};if(!n)return l;var u=h.extractTraceFeature(t);if(!u)return l;var p,c,x,d=o.makeColorScaleFuncFromTrace(a),g=a.marker,v=g.line||{};k.isArrayOrTypedArray(g.opacity)&&(p=function(w){var E=w.mo;return M(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(v.color)&&(c=function(w){return w.mlc}),k.isArrayOrTypedArray(v.width)&&(x=function(w){return w.mlw});for(var y=0;y<t.length;y++){var m=t[y],_=m.fOut;if(_){var f=_.properties;f.fc=d(m.z),p&&(f.mo=p(m)),c&&(f.mlc=c(m)),x&&(f.mlw=x(m)),m.ct=f.ct,m._polygons=h.feature2polygons(_)}}var S=p?{type:"identity",property:"mo"}:g.opacity;return k.extendFlat(r.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(i.paint,{"line-color":c?{type:"identity",property:"mlc"}:v.color,"line-width":x?{type:"identity",property:"mlw"}:v.width,"line-opacity":S}),r.layout.visibility="visible",i.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:u},s(t),l},convertOnSelect:s}},9352:function(ee,z,e){var M=e(3400),k=e(27260),o=e(45608);ee.exports=function(T,b,h,s){function t(i,l){return M.coerce(T,b,o,i,l)}var a=t("locations"),n=t("z"),r=t("geojson");M.isArrayOrTypedArray(a)&&a.length&&M.isArrayOrTypedArray(n)&&n.length&&(typeof r=="string"&&r!==""||M.isPlainObject(r))?(t("featureidkey"),b._length=Math.min(a.length,n.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},85404:function(ee,z,e){ee.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(M,k){for(var o=k.getMapLayers(),T=o.length-2;T>=0;T--){var b=o[T].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var h=T+1;h<o.length;h++)if(typeof(b=o[h].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(ee,z,e){var M=e(13504).convert,k=e(13504).convertOnSelect,o=e(47552).traceLayerPrefix;function T(h,s){this.type="choroplethmapbox",this.subplot=h,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",o+s+"-fill"],["line",o+s+"-line"]],this.below=null}var b=T.prototype;b.update=function(h){this._update(M(h)),h[0].trace._glTrace=this},b.updateOnSelect=function(h){this._update(k(h))},b._update=function(h){var s=this.subplot,t=this.layerList,a=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(h.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(h,a),this.below=a);for(var n=0;n<t.length;n++){var r=t[n],i=r[0],l=r[1],u=h[i];s.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(l,"setPaintProperty",u.paint)}},b._addLayers=function(h,s){for(var t=this.subplot,a=this.layerList,n=this.sourceId,r=0;r<a.length;r++){var i=a[r],l=i[0],u=h[l];t.addLayer({type:l,id:i[1],source:n,layout:u.layout,paint:u.paint},s)}},b._removeLayers=function(){for(var h=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)h.removeLayer(s[t][1])},b.dispose=function(){var h=this.subplot.map;this._removeLayers(),h.removeSource(this.sourceId)},ee.exports=function(h,s){var t=s[0].trace,a=new T(h,t.uid),n=a.sourceId,r=M(s),i=a.below=h.belowLookup["trace-"+t.uid];return h.map.addSource(n,{type:"geojson",data:r.geojson}),a._addLayers(r,i),s[0].trace._glTrace=a,a}},86040:function(ee,z,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),h=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:h({},b.showlegend,{dflt:!1})};h(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=h({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},83344:function(ee,z,e){var M=e(47128);ee.exports=function(k,o){for(var T=o.u,b=o.v,h=o.w,s=Math.min(o.x.length,o.y.length,o.z.length,T.length,b.length,h.length),t=-1/0,a=1/0,n=0;n<s;n++){var r=T[n],i=b[n],l=h[n],u=Math.sqrt(r*r+i*i+l*l);t=Math.max(t,u),a=Math.min(a,u)}o._len=s,o._normMax=t,M(k,o,{vals:[a,t],containerStr:"",cLetter:"c"})}},6648:function(ee,z,e){var M=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,o=e(3400).simpleMap,T=e(33040).parseColorScale,b=e(8932).extractOpts,h=e(3400).isArrayOrTypedArray,s=e(52094);function t(u,p){this.scene=u,this.uid=p,this.mesh=null,this.data=null}var a=t.prototype;a.handlePick=function(u){if(u.object===this.mesh){var p=u.index=u.data.index,c=this.data.x[p],x=this.data.y[p],d=this.data.z[p],g=this.data.u[p],v=this.data.v[p],y=this.data.w[p];u.traceCoordinate=[c,x,d,g,v,y,Math.sqrt(g*g+v*v+y*y)];var m=this.data.hovertext||this.data.text;return h(m)&&m[p]!==void 0?u.textLabel=m[p]:m&&(u.textLabel=m),!0}};var n={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},i={tip:1,tail:1,cm:.75,center:.5};function l(u,p){var c=u.fullSceneLayout,x=u.dataScale,d={};function g(f,S){var w=c[S],E=x[n[S]];return o(f,function(O){return w.d2l(O)*E})}d.vectors=s(g(p.u,"xaxis"),g(p.v,"yaxis"),g(p.w,"zaxis"),p._len),d.positions=s(g(p.x,"xaxis"),g(p.y,"yaxis"),g(p.z,"zaxis"),p._len);var v=b(p);d.colormap=T(p),d.vertexIntensityBounds=[v.min/p._normMax,v.max/p._normMax],d.coneOffset=r[p.anchor];var y=p.sizemode;y==="scaled"?d.coneSize=p.sizeref||.5:y==="absolute"?d.coneSize=p.sizeref&&p._normMax?p.sizeref/p._normMax:.5:y==="raw"&&(d.coneSize=p.sizeref),d.coneSizemode=y;var m=M(d),_=p.lightposition;return m.lightPosition=[_.x,_.y,_.z],m.ambient=p.lighting.ambient,m.diffuse=p.lighting.diffuse,m.specular=p.lighting.specular,m.roughness=p.lighting.roughness,m.fresnel=p.lighting.fresnel,m.opacity=p.opacity,p._pad=i[p.anchor]*m.vectorScale*m.coneScale*p._normMax,m}a.update=function(u){this.data=u;var p=l(this.scene,u);this.mesh.update(p)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(u,p){var c=u.glplot.gl,x=l(u,p),d=k(c,x),g=new t(u,p.uid);return g.mesh=d,g.data=p,d._trace=g,u.glplot.add(d),g}},86096:function(ee,z,e){var M=e(3400),k=e(27260),o=e(86040);ee.exports=function(T,b,h,s){function t(c,x){return M.coerce(T,b,o,c,x)}var a=t("u"),n=t("v"),r=t("w"),i=t("x"),l=t("y"),u=t("z");if(a&&a.length&&n&&n.length&&r&&r.length&&i&&i.length&&l&&l.length&&u&&u.length){var p=t("sizemode");t("sizeref",p==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null}else b.visible=!1}},26048:function(ee,z,e){ee.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(M,k){return M.norm=k.traceCoordinate[6],M},meta:{}}},67104:function(ee,z,e){var M=e(83328),k=e(52904),o=e(29736),T=o.axisHoverFormat,b=o.descriptionOnlyNumbers,h=e(49084),s=e(98192).u,t=e(25376),a=e(92880).extendFlat,n=e(69104),r=n.COMPARISON_OPS2,i=n.INTERVAL_OPS,l=k.line;ee.exports=a({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:a({},M.texttemplate,{}),textfont:a({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:a({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(r).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:a({},l.smoothing,{}),editType:"plot"},zorder:k.zorder},h("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(ee,z,e){var M=e(8932),k=e(19512),o=e(54444),T=e(46960);ee.exports=function(b,h){var s=k(b,h),t=s[0].z;o(h,t);var a,n=h.contours,r=M.extractOpts(h);if(n.coloring==="heatmap"&&r.auto&&h.autocontour===!1){var i=n.start,l=T(n),u=n.size||1,p=Math.floor((l-i)/u)+1;isFinite(u)||(u=1,p=1);var c=i-u/2;a=[c,c+p*u]}else a=t;return M.calc(b,h,{vals:a,cLetter:"z"}),s}},56008:function(ee){ee.exports=function(z,e){var M,k=z[0],o=k.z;switch(e.type){case"levels":var T=Math.min(o[0][0],o[0][1]);for(M=0;M<z.length;M++){var b=z[M];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var h=k.x.length,s=k.y.length,t=-1/0,a=1/0;for(M=0;M<s;M++)a=Math.min(a,o[M][0]),a=Math.min(a,o[M][h-1]),t=Math.max(t,o[M][0]),t=Math.max(t,o[M][h-1]);for(M=1;M<h-1;M++)a=Math.min(a,o[0][M]),a=Math.min(a,o[s-1][M]),t=Math.max(t,o[0][M]),t=Math.max(t,o[s-1][M]);var n,r,i=e.value;switch(e._operation){case">":i>t&&(k.prefixBoundary=!0);break;case"<":(i<a||k.starts.length&&i===a)&&(k.prefixBoundary=!0);break;case"[]":n=Math.min(i[0],i[1]),((r=Math.max(i[0],i[1]))<a||n>t||k.starts.length&&r===a)&&(k.prefixBoundary=!0);break;case"][":n=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]),n<a&&r>t&&(k.prefixBoundary=!0)}}}},55296:function(ee,z,e){var M=e(8932),k=e(41076),o=e(46960);ee.exports={min:"zmin",max:"zmax",calc:function(T,b,h){var s=b.contours,t=b.line,a=s.size||1,n=s.coloring,r=k(b,{isColorbar:!0});if(n==="heatmap"){var i=M.extractOpts(b);h._fillgradient=i.reversescale?M.flipScale(i.colorscale):i.colorscale,h._zrange=[i.min,i.max]}else n==="fill"&&(h._fillcolor=r);h._line={color:n==="lines"?r:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},h._levels={start:s.start,end:o(s),size:a}}}},93252:function(ee){ee.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(ee,z,e){var M=e(38248),k=e(17428),o=e(76308),T=o.addOpacity,b=o.opacity,h=e(69104),s=e(3400).isArrayOrTypedArray,t=h.CONSTRAINT_REDUCTION,a=h.COMPARISON_OPS2;ee.exports=function(n,r,i,l,u,p){var c,x,d,g=r.contours,v=i("contours.operation");g._operation=t[v],function(y,m){var _;a.indexOf(m.operation)===-1?(y("contours.value",[0,1]),s(m.value)?m.value.length>2?m.value=m.value.slice(2):m.length===0?m.value=[0,1]:m.length<2?(_=parseFloat(m.value[0]),m.value=[_,_+1]):m.value=[parseFloat(m.value[0]),parseFloat(m.value[1])]:M(m.value)&&(_=parseFloat(m.value),m.value=[_,_+1])):(y("contours.value",0),M(m.value)||(s(m.value)?m.value=parseFloat(m.value[0]):m.value=0))}(i,g),v==="="?c=g.showlines=!0:(c=i("contours.showlines"),d=i("fillcolor",T((n.line||{}).color||u,.5))),c&&(x=i("line.color",d&&b(d)?T(r.fillcolor,1):u),i("line.width",2),i("line.dash")),i("line.smoothing"),k(i,l,x,p)}},3212:function(ee,z,e){var M=e(69104),k=e(38248);function o(h,s){var t,a=Array.isArray(s);function n(r){return k(r)?+r:null}return M.COMPARISON_OPS2.indexOf(h)!==-1?t=n(a?s[0]:s):M.INTERVAL_OPS.indexOf(h)!==-1?t=a?[n(s[0]),n(s[1])]:[n(s),n(s)]:M.SET_OPS.indexOf(h)!==-1&&(t=a?s.map(n):[n(s)]),t}function T(h){return function(s){s=o(h,s);var t=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return{start:t,end:a,size:a-t}}}function b(h){return function(s){return{start:s=o(h,s),end:1/0,size:1/0}}}ee.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},84952:function(ee){ee.exports=function(z,e,M,k){var o=k("contours.start"),T=k("contours.end"),b=o===!1||T===!1,h=M("contours.size");!(b?e.autocontour=!0:M("autocontour",!1))&&h||M("ncontours")}},82172:function(ee,z,e){var M=e(3400);function k(o){return M.extendFlat({},o,{edgepaths:M.extendDeep([],o.edgepaths),paths:M.extendDeep([],o.paths),starts:M.extendDeep([],o.starts)})}ee.exports=function(o,T){var b,h,s,t=function(r){return r.reverse()},a=function(r){return r};switch(T){case"=":case"<":return o;case">":for(o.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),h=o[0],b=0;b<h.edgepaths.length;b++)h.edgepaths[b]=t(h.edgepaths[b]);for(b=0;b<h.paths.length;b++)h.paths[b]=t(h.paths[b]);for(b=0;b<h.starts.length;b++)h.starts[b]=t(h.starts[b]);return o;case"][":var n=t;t=a,a=n;case"[]":for(o.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),h=k(o[0]),s=k(o[1]),b=0;b<h.edgepaths.length;b++)h.edgepaths[b]=t(h.edgepaths[b]);for(b=0;b<h.paths.length;b++)h.paths[b]=t(h.paths[b]);for(b=0;b<h.starts.length;b++)h.starts[b]=t(h.starts[b]);for(;s.edgepaths.length;)h.edgepaths.push(a(s.edgepaths.shift()));for(;s.paths.length;)h.paths.push(a(s.paths.shift()));for(;s.starts.length;)h.starts.push(a(s.starts.shift()));return[h]}}},57004:function(ee,z,e){var M=e(3400),k=e(51264),o=e(31147),T=e(95536),b=e(84952),h=e(97680),s=e(39096),t=e(67104);ee.exports=function(a,n,r,i){function l(p,c){return M.coerce(a,n,t,p,c)}if(k(a,n,l,i)){o(a,n,i,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var u=l("contours.type")==="constraint";l("connectgaps",M.isArray1D(n.z)),u?T(a,n,l,i,r):(b(a,n,l,function(p){return M.coerce2(a,n,t,p)}),h(a,n,l,i)),n.contours&&n.contours.coloring==="heatmap"&&s(l,i),l("zorder")}else n.visible=!1}},61512:function(ee,z,e){var M=e(3400),k=e(3212),o=e(46960);ee.exports=function(T,b,h){for(var s=T.type==="constraint"?k[T._operation](T.value):T,t=s.size,a=[],n=o(s),r=h.trace._carpetTrace,i=r?{xaxis:r.aaxis,yaxis:r.baxis,x:h.a,y:h.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:h.x,y:h.y},l=s.start;l<n;l+=t)if(a.push(M.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:h.z,smoothing:h.trace.line.smoothing},i)),a.length>1e3){M.warn("Too many contours, clipping at 1000",T);break}return a}},46960:function(ee){ee.exports=function(z){return z.end+z.size/1e6}},88748:function(ee,z,e){var M=e(3400),k=e(93252);function o(h,s,t,a){return Math.abs(h[0]-s[0])<t&&Math.abs(h[1]-s[1])<a}function T(h,s,t,a,n){var r,i=s.join(","),l=h.crossings[i],u=function(re,oe,ae){var ce=0,he=0;return re>20&&oe?re===208||re===1114?ce=ae[0]===0?1:-1:he=ae[1]===0?1:-1:k.BOTTOMSTART.indexOf(re)!==-1?he=1:k.LEFTSTART.indexOf(re)!==-1?ce=1:k.TOPSTART.indexOf(re)!==-1?he=-1:ce=-1,[ce,he]}(l,t,s),p=[b(h,s,[-u[0],-u[1]])],c=h.z.length,x=h.z[0].length,d=s.slice(),g=u.slice();for(r=0;r<1e4;r++){if(l>20?(l=k.CHOOSESADDLE[l][(u[0]||u[1])<0?0:1],h.crossings[i]=k.SADDLEREMAINDER[l]):delete h.crossings[i],!(u=k.NEWDELTA[l])){M.log("Found bad marching index:",l,s,h.level);break}p.push(b(h,s,u)),s[0]+=u[0],s[1]+=u[1],i=s.join(","),o(p[p.length-1],p[p.length-2],a,n)&&p.pop();var v=u[0]&&(s[0]<0||s[0]>x-2)||u[1]&&(s[1]<0||s[1]>c-2);if(s[0]===d[0]&&s[1]===d[1]&&u[0]===g[0]&&u[1]===g[1]||t&&v)break;l=h.crossings[i]}r===1e4&&M.log("Infinite loop in contour?");var y,m,_,f,S,w,E,O,C,P,R,j,D,N,W,F=o(p[0],p[p.length-1],a,n),V=0,U=.2*h.smoothing,te=[],J=0;for(r=1;r<p.length;r++)j=p[r],D=p[r-1],N=j[2]-D[2],W=j[3]-D[3],V+=E=Math.sqrt(N*N+W*W),te.push(E);var X=V/te.length*U;function K(re){return p[re%p.length]}for(r=p.length-2;r>=J;r--)if((y=te[r])<X){for(_=0,m=r-1;m>=J&&y+te[m]<X;m--)y+=te[m];if(F&&r===p.length-2)for(_=0;_<m&&y+te[_]<X;_++)y+=te[_];S=r-m+_+1,w=Math.floor((r+m+_+2)/2),f=F||r!==p.length-2?F||m!==-1?S%2?K(w):[(K(w)[0]+K(w+1)[0])/2,(K(w)[1]+K(w+1)[1])/2]:p[0]:p[p.length-1],p.splice(m+1,r-m+1,f),r=m+1,_&&(J=_),F&&(r===p.length-2?p[_]=p[p.length-1]:r===0&&(p[p.length-1]=p[0]))}for(p.splice(0,J),r=0;r<p.length;r++)p[r].length=2;if(!(p.length<2))if(F)p.pop(),h.paths.push(p);else{t||M.log("Unclosed interior contour?",h.level,d.join(","),p.join("L"));var Q=!1;for(O=0;O<h.edgepaths.length;O++)if(P=h.edgepaths[O],!Q&&o(P[0],p[p.length-1],a,n)){p.pop(),Q=!0;var Z=!1;for(C=0;C<h.edgepaths.length;C++)if(o((R=h.edgepaths[C])[R.length-1],p[0],a,n)){Z=!0,p.shift(),h.edgepaths.splice(O,1),C===O?h.paths.push(p.concat(R)):(C>O&&C--,h.edgepaths[C]=R.concat(p,P));break}Z||(h.edgepaths[O]=p.concat(P))}for(O=0;O<h.edgepaths.length&&!Q;O++)o((P=h.edgepaths[O])[P.length-1],p[0],a,n)&&(p.shift(),h.edgepaths[O]=P.concat(p),Q=!0);Q||h.edgepaths.push(p)}}function b(h,s,t){var a=s[0]+Math.max(t[0],0),n=s[1]+Math.max(t[1],0),r=h.z[n][a],i=h.xaxis,l=h.yaxis;if(t[1]){var u=(h.level-r)/(h.z[n][a+1]-r),p=(u!==1?(1-u)*i.c2l(h.x[a]):0)+(u!==0?u*i.c2l(h.x[a+1]):0);return[i.c2p(i.l2c(p),!0),l.c2p(h.y[n],!0),a+u,n]}var c=(h.level-r)/(h.z[n+1][a]-r),x=(c!==1?(1-c)*l.c2l(h.y[n]):0)+(c!==0?c*l.c2l(h.y[n+1]):0);return[i.c2p(h.x[a],!0),l.c2p(l.l2c(x),!0),a,n+c]}ee.exports=function(h,s,t){var a,n,r,i;for(s=s||.01,t=t||.01,n=0;n<h.length;n++){for(r=h[n],i=0;i<r.starts.length;i++)T(r,r.starts[i],"edge",s,t);for(a=0;Object.keys(r.crossings).length&&a<1e4;)a++,T(r,Object.keys(r.crossings)[0].split(",").map(Number),void 0,s,t);a===1e4&&M.log("Infinite loop in contour?")}}},38200:function(ee,z,e){var M=e(76308),k=e(55512);ee.exports=function(o,T,b,h,s){s||(s={}),s.isContour=!0;var t=k(o,T,b,h,s);return t&&t.forEach(function(a){var n=a.trace;n.contours.type==="constraint"&&(n.fillcolor&&M.opacity(n.fillcolor)?a.color=M.addOpacity(n.fillcolor,1):n.contours.showlines&&M.opacity(n.line.color)&&(a.color=M.addOpacity(n.line.color,1)))}),t}},66240:function(ee,z,e){ee.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(ee,z,e){var M=e(3400);ee.exports=function(k,o,T,b){if(b||(b={}),k("contours.showlabels")){var h=o.font;M.coerceFont(k,"contours.labelfont",{weight:h.weight,style:h.style,variant:h.variant,family:h.family,size:h.size,color:T}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},41076:function(ee,z,e){var M=e(33428),k=e(8932),o=e(46960);ee.exports=function(T){var b=T.contours,h=b.start,s=o(b),t=b.size||1,a=Math.floor((s-h)/t)+1,n=b.coloring==="lines"?0:1,r=k.extractOpts(T);isFinite(t)||(t=1,a=1);var i,l,u=r.reversescale?k.flipScale(r.colorscale):r.colorscale,p=u.length,c=new Array(p),x=new Array(p),d=r.min,g=r.max;if(b.coloring==="heatmap"){for(l=0;l<p;l++)i=u[l],c[l]=i[0]*(g-d)+d,x[l]=i[1];var v=M.extent([d,g,b.start,b.start+t*(a-1)]),y=v[d<g?0:1],m=v[d<g?1:0];y!==d&&(c.splice(0,0,y),x.splice(0,0,x[0])),m!==g&&(c.push(m),x.push(x[x.length-1]))}else{var _=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(_&&(h<=d||s>=g)&&(h<=d&&(h=d),s>=g&&(s=g),a=Math.floor((s-h)/t)+1,n=0),l=0;l<p;l++)i=u[l],c[l]=(i[0]*(a+n-1)-n/2)*t+h,x[l]=i[1];(_||T.autocontour)&&(c[0]>d&&(c.unshift(d),x.unshift(x[0])),c[c.length-1]<g&&(c.push(g),x.push(x[x.length-1])))}return k.makeColorScaleFunc({domain:c,range:x},{noNumericCheck:!0})}},72424:function(ee,z,e){var M=e(93252);function k(o,T){var b=(T[0][0]>o?0:1)+(T[0][1]>o?0:2)+(T[1][1]>o?0:4)+(T[1][0]>o?0:8);return b===5||b===10?o>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}ee.exports=function(o){var T,b,h,s,t,a,n,r,i,l=o[0].z,u=l.length,p=l[0].length,c=u===2||p===2;for(b=0;b<u-1;b++)for(s=[],b===0&&(s=s.concat(M.BOTTOMSTART)),b===u-2&&(s=s.concat(M.TOPSTART)),T=0;T<p-1;T++)for(h=s.slice(),T===0&&(h=h.concat(M.LEFTSTART)),T===p-2&&(h=h.concat(M.RIGHTSTART)),t=T+","+b,a=[[l[b][T],l[b][T+1]],[l[b+1][T],l[b+1][T+1]]],i=0;i<o.length;i++)(n=k((r=o[i]).level,a))&&(r.crossings[t]=n,h.indexOf(n)!==-1&&(r.starts.push([T,b]),c&&h.indexOf(n,h.indexOf(n)+1)!==-1&&r.starts.push([T,b])))}},23676:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(8932),b=e(72736),h=e(54460),s=e(78344),t=e(41420),a=e(72424),n=e(88748),r=e(61512),i=e(82172),l=e(56008),u=e(93252),p=u.LABELOPTIMIZER;function c(g,v){var y,m,_,f,S,w,E,O="",C=0,P=g.edgepaths.map(function(F,V){return V}),R=!0;function j(F){return Math.abs(F[1]-v[2][1])<.01}function D(F){return Math.abs(F[0]-v[0][0])<.01}function N(F){return Math.abs(F[0]-v[2][0])<.01}for(;P.length;){for(w=o.smoothopen(g.edgepaths[C],g.smoothing),O+=R?w:w.replace(/^M/,"L"),P.splice(P.indexOf(C),1),y=g.edgepaths[C][g.edgepaths[C].length-1],f=-1,_=0;_<4;_++){if(!y){k.log("Missing end?",C,g);break}for(E=y,Math.abs(E[1]-v[0][1])<.01&&!N(y)?m=v[1]:D(y)?m=v[0]:j(y)?m=v[3]:N(y)&&(m=v[2]),S=0;S<g.edgepaths.length;S++){var W=g.edgepaths[S][0];Math.abs(y[0]-m[0])<.01?Math.abs(y[0]-W[0])<.01&&(W[1]-y[1])*(m[1]-W[1])>=0&&(m=W,f=S):Math.abs(y[1]-m[1])<.01?Math.abs(y[1]-W[1])<.01&&(W[0]-y[0])*(m[0]-W[0])>=0&&(m=W,f=S):k.log("endpt to newendpt is not vert. or horz.",y,m,W)}if(y=m,f>=0)break;O+="L"+m}if(f===g.edgepaths.length){k.log("unclosed perimeter path");break}C=f,(R=P.indexOf(C)===-1)&&(C=P[0],O+="Z")}for(C=0;C<g.paths.length;C++)O+=o.smoothclosed(g.paths[C],g.smoothing);return O}function x(g,v,y,m){var _=v.width/2,f=v.height/2,S=g.x,w=g.y,E=g.theta,O=Math.cos(E)*_,C=Math.sin(E)*_,P=(S>m.center?m.right-S:S-m.left)/(O+Math.abs(Math.sin(E)*f)),R=(w>m.middle?m.bottom-w:w-m.top)/(Math.abs(C)+Math.cos(E)*f);if(P<1||R<1)return 1/0;var j=p.EDGECOST*(1/(P-1)+1/(R-1));j+=p.ANGLECOST*E*E;for(var D=S-O,N=w-C,W=S+O,F=w+C,V=0;V<y.length;V++){var U=y[V],te=Math.cos(U.theta)*U.width/2,J=Math.sin(U.theta)*U.width/2,X=2*k.segmentDistance(D,N,W,F,U.x-te,U.y-J,U.x+te,U.y+J)/(v.height+U.height),K=U.level===v.level,Q=K?p.SAMELEVELDISTANCE:1;if(X<=Q)return 1/0;j+=p.NEIGHBORCOST*(K?p.SAMELEVELFACTOR:1)/(X-Q)}return j}function d(g){var v,y,m=g.trace._emptypoints,_=[],f=g.z.length,S=g.z[0].length,w=[];for(v=0;v<S;v++)w.push(1);for(v=0;v<f;v++)_.push(w.slice());for(v=0;v<m.length;v++)_[(y=m[v])[0]][y[1]]=0;return g.zmask=_,_}z.plot=function(g,v,y,m){var _=v.xaxis,f=v.yaxis;k.makeTraceGroups(m,y,"contour").each(function(S){var w=M.select(this),E=S[0],O=E.trace,C=E.x,P=E.y,R=O.contours,j=r(R,v,E),D=k.ensureSingle(w,"g","heatmapcoloring"),N=[];R.coloring==="heatmap"&&(N=[S]),t(g,v,N,D),a(j),n(j);var W=_.c2p(C[0],!0),F=_.c2p(C[C.length-1],!0),V=f.c2p(P[0],!0),U=f.c2p(P[P.length-1],!0),te=[[W,U],[F,U],[F,V],[W,V]],J=j;R.type==="constraint"&&(J=i(j,R._operation)),function(X,K,Q){var Z=k.ensureSingle(X,"g","contourbg").selectAll("path").data(Q.coloring==="fill"?[0]:[]);Z.enter().append("path"),Z.exit().remove(),Z.attr("d","M"+K.join("L")+"Z").style("stroke","none")}(w,te,R),function(X,K,Q,Z){var re=Z.coloring==="fill"||Z.type==="constraint"&&Z._operation!=="=",oe="M"+Q.join("L")+"Z";re&&l(K,Z);var ae=k.ensureSingle(X,"g","contourfill").selectAll("path").data(re?K:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(ce){var he=(ce.prefixBoundary?oe:"")+c(ce,Q);he?M.select(this).attr("d",he).style("stroke","none"):M.select(this).remove()})}(w,J,te,R),function(X,K,Q,Z,re){var oe=Q._context.staticPlot,ae=k.ensureSingle(X,"g","contourlines"),ce=re.showlines!==!1,he=re.showlabels,pe=ce&&he,xe=z.createLines(ae,ce||he,K,oe),be=z.createLineClip(ae,pe,Q,Z.trace.uid),ve=X.selectAll("g.contourlabels").data(he?[0]:[]);if(ve.exit().remove(),ve.enter().append("g").classed("contourlabels",!0),he){var ge=[],we=[];k.clearLocationCache();var _e=z.labelFormatter(Q,Z),se=o.tester.append("text").attr("data-notex",1).call(o.font,re.labelfont),ie=K[0].xaxis,fe=K[0].yaxis,Ee=ie._length,Te=fe._length,Ae=ie.range,Se=fe.range,Oe=k.aggNums(Math.min,null,Z.x),De=k.aggNums(Math.max,null,Z.x),de=k.aggNums(Math.min,null,Z.y),me=k.aggNums(Math.max,null,Z.y),Me=Math.max(ie.c2p(Oe,!0),0),ze=Math.min(ie.c2p(De,!0),Ee),Pe=Math.max(fe.c2p(me,!0),0),Ne=Math.min(fe.c2p(de,!0),Te),Ve={};Ae[0]<Ae[1]?(Ve.left=Me,Ve.right=ze):(Ve.left=ze,Ve.right=Me),Se[0]<Se[1]?(Ve.top=Pe,Ve.bottom=Ne):(Ve.top=Ne,Ve.bottom=Pe),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,ge.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var Ye=Math.sqrt(Ee*Ee+Te*Te),at=u.LABELDISTANCE*Ye/Math.max(1,K.length/u.LABELINCREASE);xe.each(function(rt){var dt=z.calcTextOpts(rt.level,_e,se,Q);M.select(this).selectAll("path").each(function(){var vt=k.getVisibleSegment(this,Ve,dt.height/2);if(vt&&!(vt.len<(dt.width+dt.height)*u.LABELMIN))for(var ht=Math.min(Math.ceil(vt.len/at),u.LABELMAX),et=0;et<ht;et++){var $e=z.findBestTextLocation(this,vt,dt,we,Ve);if(!$e)break;z.addLabelData($e,dt,we,ge)}})}),se.remove(),z.drawLabels(ve,we,Q,be,pe?ge:null)}he&&!ce&&xe.remove()}(w,j,g,E,R),function(X,K,Q,Z,re){var oe=Z.trace,ae=Q._fullLayout._clips,ce="clip"+oe.uid,he=ae.selectAll("#"+ce).data(oe.connectgaps?[]:[0]);if(he.enter().append("clipPath").classed("contourclip",!0).attr("id",ce),he.exit().remove(),oe.connectgaps===!1){var pe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:K.xaxis,yaxis:K.yaxis,x:Z.x,y:Z.y,z:d(Z),smoothing:0};a([pe]),n([pe]),l([pe],{type:"levels"}),k.ensureSingle(he,"path","").attr("d",(pe.prefixBoundary?"M"+re.join("L")+"Z":"")+c(pe,re))}else ce=null;o.setClipUrl(X,ce,Q)}(w,v,g,E,te)})},z.createLines=function(g,v,y,m){var _=y[0].smoothing,f=g.selectAll("g.contourlevel").data(v?y:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlevel",!0),v){var S=f.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return o.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var w=f.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return o.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return f},z.createLineClip=function(g,v,y,m){var _=v?"clipline"+m:null,f=y._fullLayout._clips.selectAll("#"+_).data(v?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),o.setClipUrl(g,_,y),f},z.labelFormatter=function(g,v){var y=g._fullLayout,m=v.trace,_=m.contours,f={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)f.tickformat=_.labelformat,s(f,y);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)f=S.colorbar._axis;else{if(_.type==="constraint"){var w=_.value;k.isArrayOrTypedArray(w)?f.range=[w[0],w[w.length-1]]:f.range=[w,w]}else f.range=[_.start,_.end],f.nticks=(_.end-_.start)/_.size;f.range[0]===f.range[1]&&(f.range[1]+=f.range[0]||1),f.nticks||(f.nticks=1e3),s(f,y),h.prepTicks(f),f._tmin=null,f._tmax=null}}return function(E){return h.tickText(f,E).text}},z.calcTextOpts=function(g,v,y,m){var _=v(g);y.text(_).call(b.convertToTspans,m);var f=y.node(),S=o.bBox(f,!0);return{text:_,width:S.width,height:S.height,fontSize:+f.style["font-size"].replace("px",""),level:g,dy:(S.top+S.bottom)/2}},z.findBestTextLocation=function(g,v,y,m,_){var f,S,w,E,O,C=y.width;v.isClosed?(S=v.len/p.INITIALSEARCHPOINTS,f=v.min+S/2,w=v.max):(S=(v.len-C)/(p.INITIALSEARCHPOINTS+1),f=v.min+S+C/2,w=v.max-(S+C)/2);for(var P=1/0,R=0;R<p.ITERATIONS;R++){for(var j=f;j<w;j+=S){var D=k.getTextLocation(g,v.total,j,C),N=x(D,y,m,_);N<P&&(P=N,O=D,E=j)}if(P>2*p.MAXCOST)break;R&&(S/=2),w=(f=E-S/2)+1.5*S}if(P<=p.MAXCOST)return O},z.addLabelData=function(g,v,y,m){var _=v.fontSize,f=v.width+_/3,S=Math.max(0,v.height-_/3),w=g.x,E=g.y,O=g.theta,C=Math.sin(O),P=Math.cos(O),R=function(D,N){return[w+D*P-N*C,E+D*C+N*P]},j=[R(-f/2,-S/2),R(-f/2,S/2),R(f/2,S/2),R(f/2,-S/2)];y.push({text:v.text,x:w,y:E,dy:v.dy,theta:O,level:v.level,width:f,height:S}),m.push(j)},z.drawLabels=function(g,v,y,m,_){var f=g.selectAll("text").data(v,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var O=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;M.select(this).text(E.text).attr({x:O,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+O+" "+C+")"}).call(b.convertToTspans,y)}),_){for(var S="",w=0;w<_.length;w++)S+="M"+_[w].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",S)}}},54444:function(ee,z,e){var M=e(54460),k=e(3400);function o(T,b,h){var s={type:"linear",range:[T,b]};return M.autoTicks(s,(b-T)/(h||15)),s}ee.exports=function(T,b){var h=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,b)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,b));var a=o(s,t,T.ncontours);h.size=a.dtick,h.start=M.tickFirst(a),a.range.reverse(),h.end=M.tickFirst(a),h.start===s&&(h.start+=h.size),h.end===t&&(h.end-=h.size),h.start>h.end&&(h.start=h.end=(h.start+h.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:h.start,end:h.end,size:h.size}),T._input.autocontour=!0}else if(h.type!=="constraint"){var n,r=h.start,i=h.end,l=T._input.contours;r>i&&(h.start=l.start=i,i=h.end=l.end=r,r=h.start),h.size>0||(n=r===i?1:o(r,i,T.ncontours).dtick,l.size=h.size=n)}}},52440:function(ee,z,e){var M=e(33428),k=e(43616),o=e(41648),T=e(41076);ee.exports=function(b){var h=M.select(b).selectAll("g.contour");h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var t=M.select(this),a=s[0].trace,n=a.contours,r=a.line,i=n.size||1,l=n.start,u=n.type==="constraint",p=!u&&n.coloring==="lines",c=!u&&n.coloring==="fill",x=p||c?T(a):null;t.selectAll("g.contourlevel").each(function(v){M.select(this).selectAll("path").call(k.lineGroupStyle,r.width,p?x(v.level):r.color,r.dash)});var d=n.labelfont;if(t.selectAll("g.contourlabels text").each(function(v){k.font(M.select(this),{weight:d.weight,style:d.style,variant:d.variant,family:d.family,size:d.size,color:d.color||(p?x(v.level):r.color)})}),u)t.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(c){var g;t.selectAll("g.contourfill path").style("fill",function(v){return g===void 0&&(g=v.level),x(v.level+.5*i)}),g===void 0&&(g=l),t.selectAll("g.contourbg path").style("fill",x(g-.5*i))}}),o(b)}},97680:function(ee,z,e){var M=e(27260),k=e(17428);ee.exports=function(o,T,b,h,s){var t,a=b("contours.coloring"),n="";a==="fill"&&(t=b("contours.showlines")),t!==!1&&(a!=="lines"&&(n=b("line.color","#000")),b("line.width",.5),b("line.dash")),a!=="none"&&(o.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,M(o,T,h,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,h,n,s)}},37960:function(ee,z,e){var M=e(83328),k=e(67104),o=e(49084),T=e(92880).extendFlat,b=k.contours;ee.exports=T({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},zorder:k.zorder,transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(ee,z,e){var M=e(47128),k=e(3400),o=e(2872),T=e(26136),b=e(70448),h=e(11240),s=e(35744),t=e(3252),a=e(50948),n=e(54444);ee.exports=function(r,i){var l=i._carpetTrace=a(r,i);if(l&&l.visible&&l.visible!=="legendonly"){if(!i.a||!i.b){var u=r.data[l.index],p=r.data[i.index];p.a||(p.a=u.a),p.b||(p.b=u.b),t(p,i,i._defaultColor,r._fullLayout)}var c=function(x,d){var g,v,y,m,_,f,S,w=d._carpetTrace,E=w.aaxis,O=w.baxis;E._minDtick=0,O._minDtick=0,k.isArray1D(d.z)&&o(d,E,O,"a","b",["z"]),g=d._a=d._a||d.a,m=d._b=d._b||d.b,g=g?E.makeCalcdata(d,"_a"):[],m=m?O.makeCalcdata(d,"_b"):[],v=d.a0||0,y=d.da||1,_=d.b0||0,f=d.db||1,S=d._z=T(d._z||d.z,d.transpose),d._emptypoints=h(S),b(S,d._emptypoints);var C=k.maxRowLength(S),P=d.xtype==="scaled"?"":g,R=s(d,P,v,y,C,E),j=d.ytype==="scaled"?"":m,D={a:R,b:s(d,j,_,f,S.length,O),z:S};return d.contours.type==="levels"&&d.contours.coloring!=="none"&&M(x,d,{vals:S,containerStr:"",cLetter:"z"}),[D]}(r,i);return n(i,i._z),c}}},3252:function(ee,z,e){var M=e(3400),k=e(51264),o=e(37960),T=e(95536),b=e(84952),h=e(97680);ee.exports=function(s,t,a,n){function r(i,l){return M.coerce(s,t,o,i,l)}if(r("carpet"),s.a&&s.b){if(!k(s,t,r,n,"a","b"))return void(t.visible=!1);r("text"),r("contours.type")==="constraint"?T(s,t,r,n,a,{hasHover:!1}):(b(s,t,r,function(i){return M.coerce2(s,t,o,i)}),h(s,t,r,n,{hasHover:!1}))}else t._defaultColor=a,t._length=null;r("zorder")}},40448:function(ee,z,e){ee.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(ee,z,e){var M=e(33428),k=e(87072),o=e(53416),T=e(43616),b=e(3400),h=e(72424),s=e(88748),t=e(23676),a=e(93252),n=e(82172),r=e(61512),i=e(56008),l=e(50948),u=e(77712);function p(d,g,v){var y=d.getPointAtLength(g),m=d.getPointAtLength(v),_=m.x-y.x,f=m.y-y.y,S=Math.sqrt(_*_+f*f);return[_/S,f/S]}function c(d){var g=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return[d[0]/g,d[1]/g]}function x(d,g){var v=Math.abs(d[0]*g[0]+d[1]*g[1]);return Math.sqrt(1-v*v)/v}ee.exports=function(d,g,v,y){var m=g.xaxis,_=g.yaxis;b.makeTraceGroups(y,v,"contour").each(function(f){var S=M.select(this),w=f[0],E=w.trace,O=E._carpetTrace=l(d,E),C=d.calcdata[O.index][0];if(O.visible&&O.visible!=="legendonly"){var P=w.a,R=w.b,j=E.contours,D=r(j,g,w),N=j.type==="constraint",W=j._operation,F=N?W==="="?"lines":"fill":j.coloring,V=[[P[0],R[R.length-1]],[P[P.length-1],R[R.length-1]],[P[P.length-1],R[0]],[P[0],R[0]]];h(D);var U=1e-8*(P[P.length-1]-P[0]),te=1e-8*(R[R.length-1]-R[0]);s(D,U,te);var J,X,K,Q,Z=D;j.type==="constraint"&&(Z=n(D,W)),function(ce,he){var pe,xe,be,ve,ge,we,_e,se,ie;for(pe=0;pe<ce.length;pe++){for(ge=(ve=ce[pe]).pedgepaths=[],we=ve.ppaths=[],xe=0;xe<ve.edgepaths.length;xe++){for(ie=ve.edgepaths[xe],_e=[],be=0;be<ie.length;be++)_e[be]=he(ie[be]);ge.push(_e)}for(xe=0;xe<ve.paths.length;xe++){for(ie=ve.paths[xe],se=[],be=0;be<ie.length;be++)se[be]=he(ie[be]);we.push(se)}}}(D,ae);var re=[];for(Q=C.clipsegments.length-1;Q>=0;Q--)J=C.clipsegments[Q],X=k([],J.x,m.c2p),K=k([],J.y,_.c2p),X.reverse(),K.reverse(),re.push(o(X,K,J.bicubic));var oe="M"+re.join("L")+"Z";(function(ce,he,pe,xe,be,ve){var ge,we,_e,se,ie=b.ensureSingle(ce,"g","contourbg").selectAll("path").data(ve!=="fill"||be?[]:[0]);ie.enter().append("path"),ie.exit().remove();var fe=[];for(se=0;se<he.length;se++)ge=he[se],we=k([],ge.x,pe.c2p),_e=k([],ge.y,xe.c2p),fe.push(o(we,_e,ge.bicubic));ie.attr("d","M"+fe.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,m,_,N,F),function(ce,he,pe,xe,be,ve,ge,we,_e,se,ie){var fe=se==="fill";fe&&i(be,ce.contours);var Ee=b.ensureSingle(he,"g","contourfill").selectAll("path").data(fe?be:[]);Ee.enter().append("path"),Ee.exit().remove(),Ee.each(function(Te){var Ae=(Te.prefixBoundary?ie:"")+function(Se,Oe,De,de,me,Me,ze,Pe){var Ne,Ve,Ye,at,rt,dt,vt,ht="",et=Oe.edgepaths.map(function(tt,Re){return Re}),$e=!0,wt=1e-4*Math.abs(De[0][0]-De[2][0]),Pt=1e-4*Math.abs(De[0][1]-De[2][1]);function Ot(tt){return Math.abs(tt[1]-De[0][1])<Pt}function At(tt){return Math.abs(tt[1]-De[2][1])<Pt}function He(tt){return Math.abs(tt[0]-De[0][0])<wt}function Ze(tt){return Math.abs(tt[0]-De[2][0])<wt}function Be(tt,Re){var Fe,nt,We,ct,pt="";for(Ot(tt)&&!Ze(tt)||At(tt)&&!He(tt)?(ct=me.aaxis,We=u(me,Me,[tt[0],Re[0]],.5*(tt[1]+Re[1]))):(ct=me.baxis,We=u(me,Me,.5*(tt[0]+Re[0]),[tt[1],Re[1]])),Fe=1;Fe<We.length;Fe++)for(pt+=ct.smoothing?"C":"L",nt=0;nt<We[Fe].length;nt++){var gt=We[Fe][nt];pt+=[ze.c2p(gt[0]),Pe.c2p(gt[1])]+" "}return pt}for(Ne=0,Ve=null;et.length;){var Ge=Oe.edgepaths[Ne][0];for(Ve&&(ht+=Be(Ve,Ge)),vt=T.smoothopen(Oe.edgepaths[Ne].map(de),Oe.smoothing),ht+=$e?vt:vt.replace(/^M/,"L"),et.splice(et.indexOf(Ne),1),Ve=Oe.edgepaths[Ne][Oe.edgepaths[Ne].length-1],rt=-1,at=0;at<4;at++){if(!Ve){b.log("Missing end?",Ne,Oe);break}for(Ot(Ve)&&!Ze(Ve)?Ye=De[1]:He(Ve)?Ye=De[0]:At(Ve)?Ye=De[3]:Ze(Ve)&&(Ye=De[2]),dt=0;dt<Oe.edgepaths.length;dt++){var it=Oe.edgepaths[dt][0];Math.abs(Ve[0]-Ye[0])<wt?Math.abs(Ve[0]-it[0])<wt&&(it[1]-Ve[1])*(Ye[1]-it[1])>=0&&(Ye=it,rt=dt):Math.abs(Ve[1]-Ye[1])<Pt?Math.abs(Ve[1]-it[1])<Pt&&(it[0]-Ve[0])*(Ye[0]-it[0])>=0&&(Ye=it,rt=dt):b.log("endpt to newendpt is not vert. or horz.",Ve,Ye,it)}if(rt>=0)break;ht+=Be(Ve,Ye),Ve=Ye}if(rt===Oe.edgepaths.length){b.log("unclosed perimeter path");break}Ne=rt,($e=et.indexOf(Ne)===-1)&&(Ne=et[0],ht+=Be(Ve,Ye)+"Z",Ve=null)}for(Ne=0;Ne<Oe.paths.length;Ne++)ht+=T.smoothclosed(Oe.paths[Ne].map(de),Oe.smoothing);return ht}(0,Te,ve,ge,we,_e,pe,xe);Ae?M.select(this).attr("d",Ae).style("stroke","none"):M.select(this).remove()})}(E,S,m,_,Z,V,ae,O,C,F,oe),function(ce,he,pe,xe,be,ve,ge){var we=pe._context.staticPlot,_e=b.ensureSingle(ce,"g","contourlines"),se=be.showlines!==!1,ie=be.showlabels,fe=se&&ie,Ee=t.createLines(_e,se||ie,he,we),Te=t.createLineClip(_e,fe,pe,xe.trace.uid),Ae=ce.selectAll("g.contourlabels").data(ie?[0]:[]);if(Ae.exit().remove(),Ae.enter().append("g").classed("contourlabels",!0),ie){var Se=ve.xaxis,Oe=ve.yaxis,De=Se._length,de=Oe._length,me=[[[0,0],[De,0],[De,de],[0,de]]],Me=[];b.clearLocationCache();var ze=t.labelFormatter(pe,xe),Pe=T.tester.append("text").attr("data-notex",1).call(T.font,be.labelfont),Ne={left:0,right:De,center:De/2,top:0,bottom:de,middle:de/2},Ve=Math.sqrt(De*De+de*de),Ye=a.LABELDISTANCE*Ve/Math.max(1,he.length/a.LABELINCREASE);Ee.each(function(at){var rt=t.calcTextOpts(at.level,ze,Pe,pe);M.select(this).selectAll("path").each(function(dt){var vt=this,ht=b.getVisibleSegment(vt,Ne,rt.height/2);if(ht&&(function(Pt,Ot,At,He,Ze,Be){for(var Ge,it=0;it<At.pedgepaths.length;it++)Ot===At.pedgepaths[it]&&(Ge=At.edgepaths[it]);if(Ge){var tt=Ze.a[0],Re=Ze.a[Ze.a.length-1],Fe=Ze.b[0],nt=Ze.b[Ze.b.length-1],We=p(Pt,0,1),ct=p(Pt,He.total,He.total-1),pt=ut(Ge[0],We),gt=He.total-ut(Ge[Ge.length-1],ct);He.min<pt&&(He.min=pt),He.max>gt&&(He.max=gt),He.len=He.max-He.min}function ut(kt,yt){var Mt,Lt=0,Ct=.1;return(Math.abs(kt[0]-tt)<Ct||Math.abs(kt[0]-Re)<Ct)&&(Mt=c(Ze.dxydb_rough(kt[0],kt[1],Ct)),Lt=Math.max(Lt,Be*x(yt,Mt)/2)),(Math.abs(kt[1]-Fe)<Ct||Math.abs(kt[1]-nt)<Ct)&&(Mt=c(Ze.dxyda_rough(kt[0],kt[1],Ct)),Lt=Math.max(Lt,Be*x(yt,Mt)/2)),Lt}}(vt,dt,at,ht,ge,rt.height),!(ht.len<(rt.width+rt.height)*a.LABELMIN)))for(var et=Math.min(Math.ceil(ht.len/Ye),a.LABELMAX),$e=0;$e<et;$e++){var wt=t.findBestTextLocation(vt,ht,rt,Me,Ne);if(!wt)break;t.addLabelData(wt,rt,Me,me)}})}),Pe.remove(),t.drawLabels(Ae,Me,pe,Te,fe?me:null)}ie&&!se&&Ee.remove()}(S,D,d,w,j,g,O),T.setClipUrl(S,O._clipPathId,d)}function ae(ce){var he=O.ab2xy(ce[0],ce[1],!0);return[m.c2p(he[0]),_.c2p(he[1])]}})}},33928:function(ee,z,e){var M=e(49084),k=e(21776).Ks,o=e(45464),T=e(31512),b=e(92880).extendFlat;ee.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},o.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(ee,z,e){var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(47128),b=e(3400)._;ee.exports=function(h,s){for(var t=s._length,a=new Array(t),n=s.z,r=k(n)&&n.length,i=0;i<t;i++){var l=a[i]={},u=s.lon[i],p=s.lat[i];if(l.lonlat=M(u)&&M(p)?[+u,+p]:[o,o],r){var c=n[i];l.z=M(c)?c:o}}return T(h,s,{vals:r?n:[0,1],containerStr:"",cLetter:"z"}),t&&(a[0].t={labels:{lat:b(h,"lat:")+" ",lon:b(h,"lon:")+" "}}),a}},4629:function(ee,z,e){var M=e(38248),k=e(3400),o=e(76308),T=e(8932),b=e(39032).BADNUM,h=e(44808).makeBlank;ee.exports=function(s){var t=s[0].trace,a=t.visible===!0&&t._length!==0,n=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:h()};if(!a)return n;var r,i=[],l=t.z,u=t.radius,p=k.isArrayOrTypedArray(l)&&l.length,c=k.isArrayOrTypedArray(u);for(r=0;r<s.length;r++){var x=s[r],d=x.lonlat;if(d[0]!==b){var g={};if(p){var v=x.z;g.z=v!==b?v:0}c&&(g.r=M(u[r])&&u[r]>0?+u[r]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:g})}}var y=T.extractOpts(t),m=y.reversescale?T.flipScale(y.colorscale):y.colorscale,_=m[0][1],f=["interpolate",["linear"],["heatmap-density"],0,o.opacity(_)<1?_:o.addOpacity(_,0)];for(r=1;r<m.length;r++)f.push(m[r][0],m[r][1]);var S=["interpolate",["linear"],["get","z"],y.min,0,y.max,1];return k.extendFlat(n.heatmap.paint,{"heatmap-weight":p?S:1/(y.max-y.min),"heatmap-color":f,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),n.geojson={type:"FeatureCollection",features:i},n.heatmap.layout.visibility="visible",n}},97664:function(ee,z,e){var M=e(3400),k=e(27260),o=e(33928);ee.exports=function(T,b,h,s){function t(i,l){return M.coerce(T,b,o,i,l)}var a=t("lon")||[],n=t("lat")||[],r=Math.min(a.length,n.length);r?(b._length=r,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,b,s,t,{prefix:"",cLetter:"z"})):b.visible=!1}},96176:function(ee){ee.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z.z=e.z,z}},25336:function(ee,z,e){var M=e(54460),k=e(63312).hoverPoints,o=e(63312).getExtraText;ee.exports=function(T,b,h){var s=k(T,b,h);if(s){var t=s[0],a=t.cd,n=a[0].trace,r=a[t.index];if(delete t.color,"z"in r){var i=t.subplot.mockAxis;t.z=r.z,t.zLabel=M.tickText(i,i.c2l(r.z),"hover").text}return t.extraText=o(n,r,a[0].t.labels),[t]}}},15088:function(ee,z,e){ee.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(M,k){for(var o=k.getMapLayers(),T=0;T<o.length;T++){var b=o[T],h=b.id;if(b.type==="symbol"&&typeof h=="string"&&h.indexOf("plotly-")===-1)return h}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(ee,z,e){var M=e(4629),k=e(47552).traceLayerPrefix;function o(b,h){this.type="densitymapbox",this.subplot=b,this.uid=h,this.sourceId="source-"+h,this.layerList=[["heatmap",k+h+"-heatmap"]],this.below=null}var T=o.prototype;T.update=function(b){var h=this.subplot,s=this.layerList,t=M(b),a=h.belowLookup["trace-"+this.uid];h.map.getSource(this.sourceId).setData(t.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(t,a),this.below=a);for(var n=0;n<s.length;n++){var r=s[n],i=r[0],l=r[1],u=t[i];h.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&h.setOptions(l,"setPaintProperty",u.paint)}},T._addLayers=function(b,h){for(var s=this.subplot,t=this.layerList,a=this.sourceId,n=0;n<t.length;n++){var r=t[n],i=r[0],l=b[i];s.addLayer({type:i,id:r[1],source:a,layout:l.layout,paint:l.paint},h)}},T._removeLayers=function(){for(var b=this.subplot.map,h=this.layerList,s=h.length-1;s>=0;s--)b.removeLayer(h[s][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},ee.exports=function(b,h){var s=h[0].trace,t=new o(b,s.uid),a=t.sourceId,n=M(h),r=t.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(a,{type:"geojson",data:n.geojson}),t._addLayers(n,r),t}},74248:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){M.mergeArray(b.opacity,k,"mo"),M.mergeArray(b.color,k,"mc");var h=b.line;h&&(M.mergeArray(h.color,k,"mlc"),M.mergeArrayCastPositive(h.width,k,"mlw"))}}},20088:function(ee,z,e){var M,k=e(20832),o=e(52904).line,T=e(45464),b=e(29736).axisHoverFormat,h=e(21776).Ks,s=e(21776).Gw,t=e(74732),a=e(92880).extendFlat,n=e(76308);ee.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:h({},{keys:t.eventDataKeys}),hoverinfo:a({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:a({},k.insidetextanchor,{dflt:"middle"}),textangle:a({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:a({},k.orientation,{}),offset:a({},k.offset,{arrayOk:!1}),width:a({},k.width,{arrayOk:!1}),marker:(M=a({},k.marker),delete M.pattern,delete M.cornerradius,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:a({},o.color,{dflt:n.defaultLine}),width:a({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,zorder:k.zorder}},23096:function(ee,z,e){var M=e(54460),k=e(1220),o=e(74248),T=e(4500),b=e(39032).BADNUM;function h(s){return s===b?0:s}ee.exports=function(s,t){var a,n,r,i,l,u,p,c,x=M.getFromId(s,t.xaxis||"x"),d=M.getFromId(s,t.yaxis||"y");t.orientation==="h"?(a=x.makeCalcdata(t,"x"),r=d.makeCalcdata(t,"y"),i=k(t,d,"y",r),l=!!t.yperiodalignment,u="y"):(a=d.makeCalcdata(t,"y"),r=x.makeCalcdata(t,"x"),i=k(t,x,"x",r),l=!!t.xperiodalignment,u="x"),n=i.vals;var g,v=Math.min(n.length,a.length),y=new Array(v);for(t._base=[],p=0;p<v;p++){a[p]<0&&(a[p]=b);var m=!1;a[p]!==b&&p+1<v&&a[p+1]!==b&&(m=!0),c=y[p]={p:n[p],s:a[p],cNext:m},t._base[p]=-.5*c.s,l&&(y[p].orig_p=r[p],y[p][u+"End"]=i.ends[p],y[p][u+"Start"]=i.starts[p]),t.ids&&(c.id=String(t.ids[p])),p===0&&(y[0].vTotal=0),y[0].vTotal+=h(c.s),c.begR=h(c.s)/h(y[0].s)}for(p=0;p<v;p++)(c=y[p]).s!==b&&(c.sumR=c.s/y[0].vTotal,c.difR=g!==void 0?c.s/g:1,g=c.s);return o(y,t),T(y,t),y}},74732:function(ee){ee.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(ee,z,e){var M=e(96376).setGroupPositions;ee.exports=function(k,o){var T,b,h=k._fullLayout,s=k._fullData,t=k.calcdata,a=o.xaxis,n=o.yaxis,r=[],i=[],l=[];for(b=0;b<s.length;b++){var u=s[b],p=u.orientation==="h";u.visible===!0&&u.xaxis===a._id&&u.yaxis===n._id&&u.type==="funnel"&&(T=t[b],p?l.push(T):i.push(T),r.push(T))}var c={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};for(M(k,a,n,i,c),M(k,n,a,l,c),b=0;b<r.length;b++){T=r[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},45432:function(ee,z,e){var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),h=e(20088),s=e(76308);ee.exports={supplyDefaults:function(t,a,n,r){function i(c,x){return M.coerce(t,a,h,c,x)}if(T(t,a,r,i)){b(t,a,r,i),i("xhoverformat"),i("yhoverformat"),i("orientation",a.y&&!a.x?"v":"h"),i("offset"),i("width");var l=i("text");i("hovertext"),i("hovertemplate");var u=i("textposition");o(t,a,r,i,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a.textposition==="none"||a.texttemplate||i("textinfo",M.isArrayOrTypedArray(l)?"text+value":"value");var p=i("marker.color",n);i("marker.line.color",s.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",function(c){var x=M.isArrayOrTypedArray(c)?"#000":c;return s.addOpacity(x,.5*s.opacity(x))}(p)),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash"))),i("zorder")}else a.visible=!1},crossTraceDefaults:function(t,a){var n,r;function i(u){return M.coerce(r._input,r,h,u)}if(a.funnelmode==="group")for(var l=0;l<t.length;l++)n=(r=t[l])._input,k(n,r,a,i)}}},34580:function(ee){ee.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(z.percentInitial=e.percentInitial),"percentPrevious"in e&&(z.percentPrevious=e.percentPrevious),"percentTotal"in e&&(z.percentTotal=e.percentTotal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},31488:function(ee,z,e){var M=e(76308).opacity,k=e(63400).hoverOnBars,o=e(3400).formatPercent;ee.exports=function(T,b,h,s,t){var a=k(T,b,h,s,t);if(a){var n=a.cd,r=n[0].trace,i=r.orientation==="h",l=n[a.index];a[(i?"x":"y")+"LabelVal"]=l.s,a.percentInitial=l.begR,a.percentInitialLabel=o(l.begR,1),a.percentPrevious=l.difR,a.percentPreviousLabel=o(l.difR,1),a.percentTotal=l.sumR,a.percentTotalLabel=o(l.sumR,1);var u=l.hi||r.hoverinfo,p=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",x=u.split("+"),d=function(g){return c||x.indexOf(g)!==-1};d("percent initial")&&p.push(a.percentInitialLabel+" of initial"),d("percent previous")&&p.push(a.percentPreviousLabel+" of previous"),d("percent total")&&p.push(a.percentTotalLabel+" of total")}return a.extraText=p.join("<br>"),a.color=function(g,v){var y=g.marker,m=v.mc||y.color,_=v.mlc||y.line.color,f=v.mlw||y.line.width;return M(m)?m:M(_)&&f?_:void 0}(r,l),[a]}}},94704:function(ee,z,e){ee.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(ee){ee.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(ee,z,e){var M=e(3400),k=e(7076);ee.exports=function(o,T,b){var h=!1;function s(n,r){return M.coerce(o,T,k,n,r)}for(var t=0;t<b.length;t++){var a=b[t];if(a.visible&&a.type==="funnel"){h=!0;break}}h&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},42200:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),h=e(82744).clearMinTextSize;function s(t,a,n,r){var i=[],l=[],u=r?a:n,p=r?n:a;return i[0]=u.c2p(t.s0,!0),l[0]=p.c2p(t.p0,!0),i[1]=u.c2p(t.s1,!0),l[1]=p.c2p(t.p1,!0),i[2]=u.c2p(t.nextS0,!0),l[2]=p.c2p(t.nextP0,!0),i[3]=u.c2p(t.nextS1,!0),l[3]=p.c2p(t.nextP1,!0),r?[i,l]:[l,i]}ee.exports=function(t,a,n,r){var i=t._fullLayout;h("funnel",i),function(l,u,p,c){var x=u.xaxis,d=u.yaxis;k.makeTraceGroups(c,p,"trace bars").each(function(g){var v=M.select(this),y=g[0].trace,m=k.ensureSingle(v,"g","regions");if(y.connector&&y.connector.visible){var _=y.orientation==="h",f=m.selectAll("g.region").data(k.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var O=s(w,x,d,_),C=O[0],P=O[1],R="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(R+=_?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),R===""&&(R="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",R).call(o.setClipUrl,u.layerClipId,l)}})}else m.remove()})}(t,a,n,r),function(l,u,p,c){var x=u.xaxis,d=u.yaxis;k.makeTraceGroups(c,p,"trace bars").each(function(g){var v=M.select(this),y=g[0].trace,m=k.ensureSingle(v,"g","lines");if(y.connector&&y.connector.visible&&y.connector.line.width){var _=y.orientation==="h",f=m.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var O=s(w,x,d,_),C=O[0],P=O[1],R="";C[3]!==void 0&&P[3]!==void 0&&(_?(R+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],R+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(R+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],R+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),R===""&&(R="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",R).call(o.setClipUrl,u.layerClipId,l)}})}else m.remove()})}(t,a,n,r),b.plot(t,a,n,r,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},44544:function(ee,z,e){var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),h=e(82744).resizeText,s=b.styleTextPoints;ee.exports={style:function(t,a,n){var r=n||M.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");h(t,r,"funnel"),r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var l=M.select(this),u=i[0].trace;l.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u.marker;M.select(this).call(o.fill,p.mc||c.color).call(o.stroke,p.mlc||c.line.color).call(k.dashLine,c.line.dash,p.mlw||c.line.width).style("opacity",u.selectedpoints&&!p.selected?T:1)}}),s(l,u,t),l.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(o.fill,u.connector.fillcolor)}),l.selectAll(".lines").each(function(){var p=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},22332:function(ee,z,e){var M=e(74996),k=e(45464),o=e(86968).u,T=e(21776).Ks,b=e(21776).Gw,h=e(92880).extendFlat;ee.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:h({},M.marker.line.color,{dflt:null}),width:h({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:h({},M.scalegroup,{}),textinfo:h({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:h({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:h({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:h({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(ee,z,e){var M=e(7316);z.name="funnelarea",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},54e3:function(ee,z,e){var M=e(45768);ee.exports={calc:function(k,o){return M.calc(k,o)},crossTraceCalc:function(k){M.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(ee,z,e){var M=e(3400),k=e(22332),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleLabelsAndValues,h=e(74174).handleMarkerDefaults;ee.exports=function(s,t,a,n){function r(v,y){return M.coerce(s,t,k,v,y)}var i=r("labels"),l=r("values"),u=b(i,l),p=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(r("label0"),r("dlabel")),p){t._length=p,h(s,t,n,r),r("scalegroup");var c,x=r("text"),d=r("texttemplate");if(d||(c=r("textinfo",Array.isArray(x)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),d||c&&c!=="none"){var g=r("textposition");T(s,t,n,r,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else c==="none"&&r("textposition","none");o(t,n,r),r("title.text")&&(r("title.position"),M.coerceFont(r,"title.font",n.font)),r("aspectratio"),r("baseratio")}else t.visible=!1}},62396:function(ee,z,e){ee.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(ee,z,e){var M=e(85204).hiddenlabels;ee.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(ee,z,e){var M=e(3400),k=e(61280);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},39472:function(ee,z,e){var M=e(33428),k=e(43616),o=e(3400),T=o.strScale,b=o.strTranslate,h=e(72736),s=e(98184).toMoveInsideBar,t=e(82744),a=t.recordMinTextSize,n=t.clearMinTextSize,r=e(69656),i=e(37820),l=i.attachFxHandlers,u=i.determineInsideTextFont,p=i.layoutAreas,c=i.prerenderTitles,x=i.positionTitleOutside,d=i.formatSliceLabel;function g(v,y){return"l"+(y[0]-v[0])+","+(y[1]-v[1])}ee.exports=function(v,y){var m=v._context.staticPlot,_=v._fullLayout;n("funnelarea",_),c(y,v),p(y,_._size),o.makeTraceGroups(_._funnelarealayer,y,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace;(function(O){if(O.length){var C=O[0],P=C.trace,R=P.aspectratio,j=P.baseratio;j>.999&&(j=.999);var D,N,W,F=Math.pow(j,2),V=C.vTotal,U=V,te=V*F/(1-F)/V,J=[];for(J.push(_e()),N=O.length-1;N>-1;N--)if(!(W=O[N]).hidden){var X=W.v/U;te+=X,J.push(_e())}var K=1/0,Q=-1/0;for(N=0;N<J.length;N++)D=J[N],K=Math.min(K,D[1]),Q=Math.max(Q,D[1]);for(N=0;N<J.length;N++)J[N][1]-=(Q+K)/2;var Z=J[J.length-1][0],re=C.r,oe=(Q-K)/2,ae=re/Z,ce=re/oe*R;for(C.r=ce*oe,N=0;N<J.length;N++)J[N][0]*=ae,J[N][1]*=ce;var he,pe,xe=[-(D=J[0])[0],D[1]],be=[D[0],D[1]],ve=0;for(N=O.length-1;N>-1;N--)if(!(W=O[N]).hidden){var ge=J[ve+=1][0],we=J[ve][1];W.TL=[-ge,we],W.TR=[ge,we],W.BL=xe,W.BR=be,W.pxmid=(he=W.TR,pe=W.BR,[.5*(he[0]+pe[0]),.5*(he[1]+pe[1])]),xe=W.TL,be=W.TR}}function _e(){var se,ie={x:se=Math.sqrt(te),y:-se};return[ie.x,ie.y]}})(f),S.each(function(){var O=M.select(this).selectAll("g.slice").data(f);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(P,R){if(P.hidden)M.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var j=w.cx,D=w.cy,N=M.select(this),W=N.selectAll("path.surface").data([P]);W.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),N.call(l,v,f);var F="M"+(j+P.TR[0])+","+(D+P.TR[1])+g(P.TR,P.BR)+g(P.BR,P.BL)+g(P.BL,P.TL)+"Z";W.attr("d",F),d(v,P,w);var V=r.castOption(E.textposition,P.pts),U=N.selectAll("g.slicetext").data(P.text&&V!=="none"?[0]:[]);U.enter().append("g").classed("slicetext",!0),U.exit().remove(),U.each(function(){var te=o.ensureSingle(M.select(this),"text","",function(ae){ae.attr("data-notex",1)}),J=o.ensureUniformFontSize(v,u(E,P,_.font));te.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,J).call(h.convertToTspans,v);var X,K,Q,Z=k.bBox(te.node()),re=Math.min(P.BL[1],P.BR[1])+D,oe=Math.max(P.TL[1],P.TR[1])+D;K=Math.max(P.TL[0],P.BL[0])+j,Q=Math.min(P.TR[0],P.BR[0])+j,(X=s(K,Q,re,oe,Z,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=J.size,a(E.type,X,_),f[R].transform=X,o.setTransormAndDisplay(te,X)})}});var C=M.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=o.ensureSingle(M.select(this),"text","",function(D){D.attr("data-notex",1)}),R=E.title.text;E._meta&&(R=o.templateString(R,E._meta)),P.text(R).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(h.convertToTspans,v);var j=x(w,_._size);P.attr("transform",b(j.x,j.y)+T(Math.min(1,j.scale))+b(j.tx,j.ty))})})})}},62096:function(ee,z,e){var M=e(33428),k=e(10528),o=e(82744).resizeText;ee.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");o(T,b,"funnelarea"),b.each(function(h){var s=h[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(a){M.select(this).call(k,a,s,T)})})}},83328:function(ee,z,e){var M=e(52904),k=e(45464),o=e(25376),T=e(29736).axisHoverFormat,b=e(21776).Ks,h=e(21776).Gw,s=e(49084),t=e(92880).extendFlat;ee.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},M.x,{impliedEdits:{xtype:"array"}}),x0:t({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},M.y,{impliedEdits:{ytype:"array"}}),y0:t({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:h({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1}),zorder:M.zorder},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},19512:function(ee,z,e){var M=e(24040),k=e(3400),o=e(54460),T=e(1220),b=e(55480),h=e(47128),s=e(2872),t=e(26136),a=e(70448),n=e(11240),r=e(35744),i=e(39032).BADNUM;function l(u){for(var p=[],c=u.length,x=0;x<c;x++){var d=u[x];d!==i&&p.push(d)}return p}ee.exports=function(u,p){var c,x,d,g,v,y,m,_,f,S,w,E=o.getFromId(u,p.xaxis||"x"),O=o.getFromId(u,p.yaxis||"y"),C=M.traceIs(p,"contour"),P=M.traceIs(p,"histogram"),R=M.traceIs(p,"gl2d"),j=C?"best":p.zsmooth;if(E._minDtick=0,O._minDtick=0,P)g=(w=b(u,p)).orig_x,c=w.x,x=w.x0,d=w.dx,_=w.orig_y,v=w.y,y=w.y0,m=w.dy,f=w.z;else{var D=p.z;k.isArray1D(D)?(s(p,E,O,"x","y",["z"]),c=p._x,v=p._y,D=p._z):(g=p.x?E.makeCalcdata(p,"x"):[],_=p.y?O.makeCalcdata(p,"y"):[],c=T(p,E,"x",g).vals,v=T(p,O,"y",_).vals,p._x=c,p._y=v),x=p.x0,d=p.dx,y=p.y0,m=p.dy,f=t(D,p,E,O)}function N(Q){j=p._input.zsmooth=p.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+Q)}function W(Q){if(Q.length>1){var Z=(Q[Q.length-1]-Q[0])/(Q.length-1),re=Math.abs(Z/100);for(S=0;S<Q.length-1;S++)if(Math.abs(Q[S+1]-Q[S]-Z)>re)return!1}return!0}(E.rangebreaks||O.rangebreaks)&&(f=function(Q,Z,re){for(var oe=[],ae=-1,ce=0;ce<re.length;ce++)if(Z[ce]!==i){oe[++ae]=[];for(var he=0;he<re[ce].length;he++)Q[he]!==i&&oe[ae].push(re[ce][he])}return oe}(c,v,f),P||(c=l(c),v=l(v),p._x=c,p._y=v)),P||!C&&!p.connectgaps||(p._emptypoints=n(f),a(f,p._emptypoints)),p._islinear=!1,E.type==="log"||O.type==="log"?j==="fast"&&N("log axis found"):W(c)?W(v)?p._islinear=!0:j==="fast"&&N("y scale is not linear"):j==="fast"&&N("x scale is not linear");var F=k.maxRowLength(f),V=p.xtype==="scaled"?"":c,U=r(p,V,x,d,F,E),te=p.ytype==="scaled"?"":v,J=r(p,te,y,m,f.length,O);R||(p._extremes[E._id]=o.findExtremes(E,U),p._extremes[O._id]=o.findExtremes(O,J));var X={x:U,y:J,z:f,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&g&&(X.orig_x=g),p.yperiodalignment&&_&&(X.orig_y=_),V&&V.length===U.length-1&&(X.xCenter=V),te&&te.length===J.length-1&&(X.yCenter=te),P&&(X.xRanges=w.xRanges,X.yRanges=w.yRanges,X.pts=w.pts),C||h(u,p,{vals:f,cLetter:"z"}),C&&p.contours&&p.contours.coloring==="heatmap"){var K={type:p.type==="contour"?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};X.xfill=r(K,V,x,d,F,E),X.yfill=r(K,te,y,m,f.length,O)}return[X]}},26136:function(ee,z,e){var M=e(38248),k=e(3400),o=e(39032).BADNUM;ee.exports=function(T,b,h,s){var t,a,n,r,i,l;function u(v){if(M(v))return+v}if(b&&b.transpose){for(t=0,i=0;i<T.length;i++)t=Math.max(t,T[i].length);if(t===0)return!1;n=function(v){return v.length},r=function(v,y,m){return(v[m]||[])[y]}}else t=T.length,n=function(v,y){return v[y].length},r=function(v,y,m){return(v[y]||[])[m]};var p=function(v,y,m){return y===o||m===o?o:r(v,y,m)};function c(v){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&v&&v.type==="category"&&b["_"+v._id.charAt(0)].length){var y=v._id.charAt(0),m={},_=b["_"+y+"CategoryMap"]||b[y];for(i=0;i<_.length;i++)m[_[i]]=i;return function(f){var S=m[v._categories[f]];return S+1?S:o}}return k.identity}var x=c(h),d=c(s);s&&s.type==="category"&&(t=s._categories.length);var g=new Array(t);for(i=0;i<t;i++)for(a=h&&h.type==="category"?h._categories.length:n(T,i),g[i]=new Array(a),l=0;l<a;l++)g[i][l]=u(p(T,d(i),x(l)));return g}},96288:function(ee){ee.exports={min:"zmin",max:"zmax"}},2872:function(ee,z,e){var M=e(3400),k=e(39032).BADNUM,o=e(1220);ee.exports=function(T,b,h,s,t,a){var n=T._length,r=b.makeCalcdata(T,s),i=h.makeCalcdata(T,t);r=o(T,b,s,r).vals,i=o(T,h,t,i).vals;var l,u,p,c,x=T.text,d=x!==void 0&&M.isArray1D(x),g=T.hovertext,v=g!==void 0&&M.isArray1D(g),y=M.distinctVals(r),m=y.vals,_=M.distinctVals(i),f=_.vals,S=[],w=f.length,E=m.length;for(l=0;l<a.length;l++)S[l]=M.init2dArray(w,E);d&&(p=M.init2dArray(w,E)),v&&(c=M.init2dArray(w,E));var O=M.init2dArray(w,E);for(l=0;l<n;l++)if(r[l]!==k&&i[l]!==k){var C=M.findBin(r[l]+y.minDiff/2,m),P=M.findBin(i[l]+_.minDiff/2,f);for(u=0;u<a.length;u++){var R=T[a[u]];S[u][P][C]=R[l],O[P][C]=l}d&&(p[P][C]=x[l]),v&&(c[P][C]=g[l])}for(T["_"+s]=m,T["_"+t]=f,u=0;u<a.length;u++)T["_"+a[u]]=S[u];d&&(T._text=p),v&&(T._hovertext=c),b&&b.type==="category"&&(T["_"+s+"CategoryMap"]=m.map(function(j){return b._categories[j]})),h&&h.type==="category"&&(T["_"+t+"CategoryMap"]=f.map(function(j){return h._categories[j]})),T._after2before=O}},24480:function(ee,z,e){var M=e(3400),k=e(51264),o=e(39096),T=e(31147),b=e(82748),h=e(27260),s=e(83328);ee.exports=function(t,a,n,r){function i(l,u){return M.coerce(t,a,s,l,u)}k(t,a,i,r)?(T(t,a,r,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),o(i,r),b(t,a,i,r),i("hoverongaps"),i("connectgaps",M.isArray1D(a.z)&&a.zsmooth!==!1),h(t,a,r,i,{prefix:"",cLetter:"z"}),i("zorder")):a.visible=!1}},11240:function(ee,z,e){var M=e(3400).maxRowLength;ee.exports=function(k){var o,T,b,h,s,t,a,n,r=[],i={},l=[],u=k[0],p=[],c=[0,0,0],x=M(k);for(T=0;T<k.length;T++)for(o=p,p=u,u=k[T+1]||[],b=0;b<x;b++)p[b]===void 0&&((t=(p[b-1]!==void 0?1:0)+(p[b+1]!==void 0?1:0)+(o[b]!==void 0?1:0)+(u[b]!==void 0?1:0))?(T===0&&t++,b===0&&t++,T===k.length-1&&t++,b===p.length-1&&t++,t<4&&(i[[T,b]]=[T,b,t]),r.push([T,b,t])):l.push([T,b]));for(;l.length;){for(a={},n=!1,s=l.length-1;s>=0;s--)(t=((i[[(T=(h=l[s])[0])-1,b=h[1]]]||c)[2]+(i[[T+1,b]]||c)[2]+(i[[T,b-1]]||c)[2]+(i[[T,b+1]]||c)[2])/20)&&(a[h]=[T,b,t],l.splice(s,1),n=!0);if(!n)throw"findEmpties iterated with no new neighbors";for(h in a)i[h]=a[h],r.push(a[h])}return r.sort(function(d,g){return g[2]-d[2]})}},55512:function(ee,z,e){var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(54460),b=e(8932).extractOpts;ee.exports=function(h,s,t,a,n){n||(n={});var r,i,l,u,p=n.isContour,c=h.cd[0],x=c.trace,d=h.xa,g=h.ya,v=c.x,y=c.y,m=c.z,_=c.xCenter,f=c.yCenter,S=c.zmask,w=x.zhoverformat,E=v,O=y;if(h.index!==!1){try{l=Math.round(h.index[1]),u=Math.round(h.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",h.index)}if(l<0||l>=m[0].length||u<0||u>m.length)return}else{if(M.inbox(s-v[0],s-v[v.length-1],0)>0||M.inbox(t-y[0],t-y[y.length-1],0)>0)return;if(p){var C;for(E=[2*v[0]-v[1]],C=1;C<v.length;C++)E.push((v[C]+v[C-1])/2);for(E.push([2*v[v.length-1]-v[v.length-2]]),O=[2*y[0]-y[1]],C=1;C<y.length;C++)O.push((y[C]+y[C-1])/2);O.push([2*y[y.length-1]-y[y.length-2]])}l=Math.max(0,Math.min(E.length-2,k.findBin(s,E))),u=Math.max(0,Math.min(O.length-2,k.findBin(t,O)))}var P,R,j=d.c2p(v[l]),D=d.c2p(v[l+1]),N=g.c2p(y[u]),W=g.c2p(y[u+1]);p?(P=c.orig_x||v,R=c.orig_y||y,D=j,r=P[l],W=N,i=R[u]):(P=c.orig_x||_||v,R=c.orig_y||f||y,r=_?P[l]:(P[l]+P[l+1])/2,i=f?R[u]:(R[u]+R[u+1])/2,d&&d.type==="category"&&(r=v[l]),g&&g.type==="category"&&(i=y[u]),x.zsmooth&&(j=D=d.c2p(r),N=W=g.c2p(i)));var F=m[u][l];if(S&&!S[u][l]&&(F=void 0),F!==void 0||x.hoverongaps){var V;o(c.hovertext)&&o(c.hovertext[u])?V=c.hovertext[u][l]:o(c.text)&&o(c.text[u])&&(V=c.text[u][l]);var U=b(x),te={type:"linear",range:[U.min,U.max],hoverformat:w,_separators:d._separators,_numFormat:d._numFormat},J=T.tickText(te,F,"hover").text;return[k.extendFlat(h,{index:x._after2before?x._after2before[u][l]:[u,l],distance:h.maxHoverDistance,spikeDistance:h.maxSpikeDistance,x0:j,x1:D,y0:N,y1:W,xLabelVal:r,yLabelVal:i,zLabelVal:F,zLabel:J,text:V})]}}},81932:function(ee,z,e){ee.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(ee,z,e){var M=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function o(b){return .5-.25*Math.min(1,.5*b)}function T(b,h,s){var t,a,n,r,i,l,u,p,c,x,d,g,v,y=0;for(r=0;r<h.length;r++){for(a=(t=h[r])[0],n=t[1],d=b[a][n],x=0,c=0,i=0;i<4;i++)(u=b[a+(l=k[i])[0]])&&(p=u[n+l[1]])!==void 0&&(x===0?g=v=p:(g=Math.min(g,p),v=Math.max(v,p)),c++,x+=p);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[a][n]=x/c,d===void 0?c<4&&(y=1):(b[a][n]=(1+s)*b[a][n]-s*d,v>g&&(y=Math.max(y,Math.abs(b[a][n]-d)/(v-g))))}return y}ee.exports=function(b,h){var s,t=1;for(T(b,h),s=0;s<h.length&&!(h[s][2]<4);s++);for(h=h.slice(s),s=0;s<100&&t>.01;s++)t=T(b,h,o(t));return t>.01&&M.log("interp2d didn't converge quickly",t),b}},39096:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){k("texttemplate");var T=M.extendFlat({},o.font,{color:"auto",size:"auto"});M.coerceFont(k,"textfont",T)}},35744:function(ee,z,e){var M=e(24040),k=e(3400).isArrayOrTypedArray;ee.exports=function(o,T,b,h,s,t){var a,n,r,i=[],l=M.traceIs(o,"contour"),u=M.traceIs(o,"histogram"),p=M.traceIs(o,"gl2d");if(k(T)&&T.length>1&&!u&&t.type!=="category"){var c=T.length;if(!(c<=s))return l?T.slice(0,s):T.slice(0,s+1);if(l||p)i=Array.from(T).slice(0,s);else if(s===1)i=t.type==="log"?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if(t.type==="log"){for(i=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],r=1;r<c;r++)i.push(Math.sqrt(T[r-1]*T[r]));i.push(Math.pow(T[c-1],1.5)/Math.pow(T[c-2],.5))}else{for(i=[1.5*T[0]-.5*T[1]],r=1;r<c;r++)i.push(.5*(T[r-1]+T[r]));i.push(1.5*T[c-1]-.5*T[c-2])}if(c<s){var x,d=i[i.length-1];if(t.type==="log")for(x=d/i[i.length-2],r=c;r<s;r++)d*=x,i.push(d);else for(x=d-i[i.length-2],r=c;r<s;r++)d+=x,i.push(d)}}else{var g=o[t._id.charAt(0)+"calendar"];for(a=u?t.r2c(b,0,g):k(T)&&T.length===1?T[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,g),n=h||1,r=l||p?0:-.5;r<s;r++)i.push(a+n*r)}return i}},41420:function(ee,z,e){var M=e(33428),k=e(49760),o=e(24040),T=e(43616),b=e(54460),h=e(3400),s=e(72736),t=e(76688),a=e(76308),n=e(8932).extractOpts,r=e(8932).makeColorScaleFuncFromTrace,i=e(9616),l=e(84284).LINE_SPACING,u=e(9188),p=e(2264).STYLE,c="heatmap-label";function x(m){return m.selectAll("g."+c)}function d(m){x(m).remove()}function g(m,_){var f=_.length-2,S=h.constrain(h.findBin(m,_),0,f),w=_[S],E=_[S+1],O=h.constrain(S+(m-w)/(E-w)-.5,0,f),C=Math.round(O),P=Math.abs(O-C);return O&&O!==f&&P?{bin0:C,frac:P,bin1:Math.round(C+P/(O-C))}:{bin0:C,bin1:C,frac:0}}function v(m,_){var f=_.length-1,S=h.constrain(h.findBin(m,_),0,f),w=_[S],E=(m-w)/(_[S+1]-w)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function y(m,_,f){m[_]=f[0],m[_+1]=f[1],m[_+2]=f[2],m[_+3]=Math.round(255*f[3])}ee.exports=function(m,_,f,S){var w=_.xaxis,E=_.yaxis;h.makeTraceGroups(S,f,"hm").each(function(O){var C,P,R,j,D,N,W,F,V=M.select(this),U=O[0],te=U.trace,J=te.xgap||0,X=te.ygap||0,K=U.z,Q=U.x,Z=U.y,re=U.xCenter,oe=U.yCenter,ae=o.traceIs(te,"contour"),ce=ae?"best":te.zsmooth,he=K.length,pe=h.maxRowLength(K),xe=!1,be=!1;for(N=0;C===void 0&&N<Q.length-1;)C=w.c2p(Q[N]),N++;for(N=Q.length-1;P===void 0&&N>0;)P=w.c2p(Q[N]),N--;for(P<C&&(R=P,P=C,C=R,xe=!0),N=0;j===void 0&&N<Z.length-1;)j=E.c2p(Z[N]),N++;for(N=Z.length-1;D===void 0&&N>0;)D=E.c2p(Z[N]),N--;D<j&&(R=j,j=D,D=R,be=!0),ae&&(re=Q,oe=Z,Q=U.xfill,Z=U.yfill);var ve="default";if(ce?ve=ce==="best"?"smooth":"fast":te._islinear&&J===0&&X===0&&u()&&(ve="fast"),ve!=="fast"){var ge=ce==="best"?0:.5;C=Math.max(-ge*w._length,C),P=Math.min((1+ge)*w._length,P),j=Math.max(-ge*E._length,j),D=Math.min((1+ge)*E._length,D)}var we,_e,se=Math.round(P-C),ie=Math.round(D-j);if(C>=w._length||P<=0||j>=E._length||D<=0)return V.selectAll("image").data([]).exit().remove(),void d(V);ve==="fast"?(we=pe,_e=he):(we=se,_e=ie);var fe=document.createElement("canvas");fe.width=we,fe.height=_e;var Ee,Te,Ae=fe.getContext("2d",{willReadFrequently:!0}),Se=r(te,{noNumericCheck:!0,returnArray:!0});ve==="fast"?(Ee=xe?function(or){return pe-1-or}:h.identity,Te=be?function(or){return he-1-or}:h.identity):(Ee=function(or){return h.constrain(Math.round(w.c2p(Q[or])-C),0,se)},Te=function(or){return h.constrain(Math.round(E.c2p(Z[or])-j),0,ie)});var Oe,De,de,me,Me=Te(0),ze=[Me,Me],Pe=xe?0:1,Ne=be?0:1,Ve=0,Ye=0,at=0,rt=0;function dt(or,Jt){if(or!==void 0){var en=Se(or);return en[0]=Math.round(en[0]),en[1]=Math.round(en[1]),en[2]=Math.round(en[2]),Ve+=Jt,Ye+=en[0]*Jt,at+=en[1]*Jt,rt+=en[2]*Jt,en}return[0,0,0,0]}function vt(or,Jt,en,En){var gn=or[en.bin0];if(gn===void 0)return dt(void 0,1);var Ln,Hn=or[en.bin1],Nn=Jt[en.bin0],Yn=Jt[en.bin1],fr=Hn-gn||0,Xt=Nn-gn||0;return Ln=Hn===void 0?Yn===void 0?0:Nn===void 0?2*(Yn-gn):2*(2*Yn-Nn-gn)/3:Yn===void 0?Nn===void 0?0:2*(2*gn-Hn-Nn)/3:Nn===void 0?2*(2*Yn-Hn-gn)/3:Yn+gn-Hn-Nn,dt(gn+en.frac*fr+En.frac*(Xt+en.frac*Ln))}if(ve!=="default"){var ht,et=0;try{ht=new Uint8Array(we*_e*4)}catch{ht=new Array(we*_e*4)}if(ve==="smooth"){var $e,wt,Pt,Ot=re||Q,At=oe||Z,He=new Array(Ot.length),Ze=new Array(At.length),Be=new Array(se),Ge=re?v:g,it=oe?v:g;for(N=0;N<Ot.length;N++)He[N]=Math.round(w.c2p(Ot[N])-C);for(N=0;N<At.length;N++)Ze[N]=Math.round(E.c2p(At[N])-j);for(N=0;N<se;N++)Be[N]=Ge(N,He);for(W=0;W<ie;W++)for(wt=K[($e=it(W,Ze)).bin0],Pt=K[$e.bin1],N=0;N<se;N++,et+=4)y(ht,et,me=vt(wt,Pt,Be[N],$e))}else for(W=0;W<he;W++)for(de=K[W],ze=Te(W),N=0;N<pe;N++)me=dt(de[N],1),y(ht,et=4*(ze*pe+Ee(N)),me);var tt=Ae.createImageData(we,_e);try{tt.data.set(ht)}catch{var Re=tt.data,Fe=Re.length;for(W=0;W<Fe;W++)Re[W]=ht[W]}Ae.putImageData(tt,0,0)}else{var nt=Math.floor(J/2),We=Math.floor(X/2);for(W=0;W<he;W++)if(de=K[W],ze.reverse(),ze[Ne]=Te(W+1),ze[0]!==ze[1]&&ze[0]!==void 0&&ze[1]!==void 0)for(Oe=[De=Ee(0),De],N=0;N<pe;N++)Oe.reverse(),Oe[Pe]=Ee(N+1),Oe[0]!==Oe[1]&&Oe[0]!==void 0&&Oe[1]!==void 0&&(me=dt(de[N],(Oe[1]-Oe[0])*(ze[1]-ze[0])),Ae.fillStyle="rgba("+me.join(",")+")",Ae.fillRect(Oe[0]+nt,ze[0]+We,Oe[1]-Oe[0]-J,ze[1]-ze[0]-X))}Ye=Math.round(Ye/Ve),at=Math.round(at/Ve),rt=Math.round(rt/Ve);var ct=k("rgb("+Ye+","+at+","+rt+")");m._hmpixcount=(m._hmpixcount||0)+Ve,m._hmlumcount=(m._hmlumcount||0)+Ve*ct.getLuminance();var pt=V.selectAll("image").data(O);pt.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),pt.attr({height:ie,width:se,x:C,y:j,"xlink:href":fe.toDataURL("image/png")}),ve!=="fast"||ce||pt.attr("style",p),d(V);var gt=te.texttemplate;if(gt){var ut=n(te),kt={type:"linear",range:[ut.min,ut.max],_separators:w._separators,_numFormat:w._numFormat},yt=te.type==="histogram2dcontour",Mt=te.type==="contour",Lt=Mt?he-1:he,Ct=Mt?1:0,It=Mt?pe-1:pe,Wt=[];for(N=Mt?1:0;N<Lt;N++){var Nt;if(Mt)Nt=U.y[N];else if(yt){if(N===0||N===he-1)continue;Nt=U.y[N]}else if(U.yCenter)Nt=U.yCenter[N];else{if(N+1===he&&U.y[N+1]===void 0)continue;Nt=(U.y[N]+U.y[N+1])/2}var Bt=Math.round(E.c2p(Nt));if(!(0>Bt||Bt>E._length))for(W=Ct;W<It;W++){var Ht;if(Mt)Ht=U.x[W];else if(yt){if(W===0||W===pe-1)continue;Ht=U.x[W]}else if(U.xCenter)Ht=U.xCenter[W];else{if(W+1===pe&&U.x[W+1]===void 0)continue;Ht=(U.x[W]+U.x[W+1])/2}var Qt=Math.round(w.c2p(Ht));if(!(0>Qt||Qt>w._length)){var Cn=t({x:Ht,y:Nt},te,m._fullLayout);Cn.x=Ht,Cn.y=Nt;var Tn=U.z[N][W];Tn===void 0?(Cn.z="",Cn.zLabel=""):(Cn.z=Tn,Cn.zLabel=b.tickText(kt,Tn,"hover").text);var hn=U.text&&U.text[N]&&U.text[N][W];hn!==void 0&&hn!==!1||(hn=""),Cn.text=hn;var Zt=h.texttemplateString(gt,Cn,m._fullLayout._d3locale,Cn,te._meta||{});if(Zt){var an=Zt.split("<br>"),$t=an.length,ln=0;for(F=0;F<$t;F++)ln=Math.max(ln,an[F].length);Wt.push({l:$t,c:ln,t:Zt,x:Qt,y:Bt,z:Tn})}}}}var mn=te.textfont,xn=mn.size,Pn=m._fullLayout.font.size;if(!xn||xn==="auto"){var Mn=1/0,_n=1/0,Rn=0,In=0;for(F=0;F<Wt.length;F++){var Vn=Wt[F];if(Rn=Math.max(Rn,Vn.l),In=Math.max(In,Vn.c),F<Wt.length-1){var tr=Wt[F+1],er=Math.abs(tr.x-Vn.x),Wn=Math.abs(tr.y-Vn.y);er&&(Mn=Math.min(Mn,er)),Wn&&(_n=Math.min(_n,Wn))}}isFinite(Mn)&&isFinite(_n)?(Mn-=J,_n-=X,Mn/=In,_n/=Rn,Mn/=l/2,_n/=l,xn=Math.min(Math.floor(Mn),Math.floor(_n),Pn)):xn=Pn}if(xn<=0||!isFinite(xn))return;x(V).data(Wt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(or){var Jt=M.select(this),en=mn.color;en&&en!=="auto"||(en=a.contrast(or.z===void 0?m._fullLayout.plot_bgcolor:"rgba("+Se(or.z).join()+")")),Jt.attr("data-notex",1).call(s.positionText,function(En){return En.x}(or),function(En){return En.y-xn*(En.l*l/2-1)}(or)).call(T.font,{family:mn.family,size:xn,color:en,weight:mn.weight,style:mn.style,variant:mn.variant}).text(or.t).call(s.convertToTspans,m)})}})}},41648:function(ee,z,e){var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".hm image").style("opacity",function(o){return o.trace.opacity})}},82748:function(ee){ee.exports=function(z,e,M){M("zsmooth")===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},51264:function(ee,z,e){var M=e(38248),k=e(3400),o=e(24040);function T(b,h){var s=h(b);return(s?h(b+"type","array"):"scaled")==="scaled"&&(h(b+"0"),h("d"+b)),s}ee.exports=function(b,h,s,t,a,n){var r,i,l=s("z");if(a=a||"x",n=n||"y",l===void 0||!l.length)return 0;if(k.isArray1D(l)){r=s(a),i=s(n);var u=k.minRowLength(r),p=k.minRowLength(i);if(u===0||p===0)return 0;h._length=Math.min(u,p,l.length)}else{if(r=T(a,s),i=T(n,s),!function(c){for(var x,d=!0,g=!1,v=!1,y=0;y<c.length;y++){if(x=c[y],!k.isArrayOrTypedArray(x)){d=!1;break}x.length>0&&(g=!0);for(var m=0;m<x.length;m++)if(M(x[m])){v=!0;break}}return d&&g&&v}(l))return 0;s("transpose"),h._length=null}return b.type==="heatmapgl"||o.getComponentMethod("calendars","handleTraceDefaults")(b,h,[a,n],t),!0}},74512:function(ee,z,e){for(var M=e(83328),k=e(49084),o=e(92880).extendFlat,T=e(67824).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],h={},s=0;s<b.length;s++){var t=b[s];h[t]=M[t]}h.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(h,k("",{cLetter:"z",autoColorDflt:!1})),ee.exports=T(h,"calc","nested")},84656:function(ee,z,e){var M=e(67792).gl_heatmap2d,k=e(54460),o=e(43080);function T(h,s){this.scene=h,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(h.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(h){var s=this.options,t=s.shape,a=h.pointId,n=a%t[0],r=Math.floor(a/t[0]),i=a;return{trace:this,dataCoord:h.dataCoord,traceCoord:[s.x[n],s.y[r],s.z[i]],textLabel:this.textLabels[a],name:this.name,pointIndex:[r,n],hoverinfo:this.hoverinfo}},b.update=function(h,s){var t=s[0];this.index=h.index,this.name=h.name,this.hoverinfo=h.hoverinfo;var a=t.z;this.options.z=[].concat.apply([],a);var n=a[0].length,r=a.length;this.options.shape=[n,r],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=h.zsmooth;var i=function(x){for(var d=x.colorscale,g=x.zmin,v=x.zmax,y=d.length,m=new Array(y),_=new Array(4*y),f=0;f<y;f++){var S=d[f],w=o(S[1]);m[f]=g+S[0]*(v-g);for(var E=0;E<4;E++)_[4*f+E]=w[E]}return{colorLevels:m,colorValues:_}}(h);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],h.text),this.heatmap.update(this.options);var l,u,p=this.scene.xaxis,c=this.scene.yaxis;h.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),h._extremes[p._id]=k.findExtremes(p,t.x,l),h._extremes[c._id]=k.findExtremes(c,t.y,u)},b.dispose=function(){this.heatmap.dispose()},ee.exports=function(h,s,t){var a=new T(h,s.uid);return a.update(s,t),a}},86464:function(ee,z,e){var M=e(3400),k=e(51264),o=e(27260),T=e(74512);ee.exports=function(b,h,s,t){function a(n,r){return M.coerce(b,h,T,n,r)}k(b,h,a,t)?(a("text"),a("zsmooth"),o(b,h,t,a,{prefix:"",cLetter:"z"})):h.visible=!1}},45536:function(ee,z,e){ee.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(ee,z,e){var M=e(20832),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(25376),h=e(11120),s=e(73316),t=e(92880).extendFlat;ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},M.text,{}),hovertext:t({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:h("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:h("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},M.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir},zorder:M.zorder}},2e3:function(ee){ee.exports=function(z,e){for(var M=z.length,k=0,o=0;o<M;o++)e[o]?(z[o]/=e[o],k+=z[o]):z[o]=null;return k}},11120:function(ee){ee.exports=function(z,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(ee,z,e){var M=e(38248);ee.exports={count:function(k,o,T){return T[k]++,1},sum:function(k,o,T,b){var h=b[o];return M(h)?(h=Number(h),T[k]+=h,h):0},avg:function(k,o,T,b,h){var s=b[o];return M(s)&&(s=Number(s),T[k]+=s,h[k]++),0},min:function(k,o,T,b){var h=b[o];if(M(h)){if(h=Number(h),!M(T[k]))return T[k]=h,h;if(T[k]>h){var s=h-T[k];return T[k]=h,s}}return 0},max:function(k,o,T,b){var h=b[o];if(M(h)){if(h=Number(h),!M(T[k]))return T[k]=h,h;if(T[k]<h){var s=h-T[k];return T[k]=h,s}}return 0}}},67712:function(ee,z,e){var M=e(39032),k=M.ONEAVGYEAR,o=M.ONEAVGMONTH,T=M.ONEDAY,b=M.ONEHOUR,h=M.ONEMIN,s=M.ONESEC,t=e(54460).tickIncrement;function a(l,u,p,c){if(l*u<=0)return 1/0;for(var x=Math.abs(u-l),d=p.type==="date",g=n(x,d),v=0;v<10;v++){var y=n(80*g,d);if(g===y||!r(y,l,u,d,p,c))break;g=y}return g}function n(l,u){return u&&l>s?l>T?l>1.1*k?k:l>1.1*o?o:T:l>b?b:l>h?h:s:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function r(l,u,p,c,x,d){if(c&&l>T){var g=i(u,x,d),v=i(p,x,d),y=l===k?0:1;return g[y]!==v[y]}return Math.floor(p/l)-Math.floor(u/l)>.1}function i(l,u,p){var c=u.c2d(l,k,p).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}ee.exports=function(l,u,p,c,x){var d,g,v=-1.1*u,y=-.1*u,m=l-y,_=p[0],f=p[1],S=Math.min(a(_+y,_+m,c,x),a(f+y,f+m,c,x)),w=Math.min(a(_+v,_+y,c,x),a(f+v,f+y,c,x));if(S>w&&w<Math.abs(f-_)/4e3?(d=S,g=!1):(d=Math.min(S,w),g=!0),c.type==="date"&&d>T){var E=d===k?1:6,O=d===k?"M12":"M1";return function(C,P){var R=c.c2d(C,k,x),j=R.indexOf("-",E);j>0&&(R=R.substr(0,j));var D=c.d2c(R,0,x);if(D<C){var N=t(D,O,!1,x);(D+N)/2<C+l&&(D=N)}return P&&g?t(D,O,!0,x):D}}return function(C,P){var R=d*Math.round(C/d);return R+d/10<C&&R+.9*d<C+l&&(R+=d),P&&g&&(R-=d),R}}},35852:function(ee,z,e){var M=e(38248),k=e(3400),o=e(24040),T=e(54460),b=e(84664),h=e(16964),s=e(10648),t=e(2e3),a=e(67712);function n(r,i,l,u,p){var c,x,d,g,v,y,m,_=u+"bins",f=r._fullLayout,S=i["_"+u+"bingroup"],w=f._histogramBinOpts[S],E=f.barmode==="overlay",O=function(be){return l.r2c(be,0,g)},C=function(be){return l.c2r(be,0,g)},P=l.type==="date"?function(be){return be||be===0?k.cleanDate(be,null,g):null}:function(be){return M(be)?Number(be):null};function R(be,ve,ge){ve[be+"Found"]?(ve[be]=P(ve[be]),ve[be]===null&&(ve[be]=ge[be])):(y[be]=ve[be]=ge[be],k.nestedProperty(x[0],_+"."+be).set(ge[be]))}if(i["_"+u+"autoBinFinished"])delete i["_"+u+"autoBinFinished"];else{x=w.traces;var j=[],D=!0,N=!1,W=!1;for(c=0;c<x.length;c++)if((d=x[c]).visible){var F=w.dirs[c];v=d["_"+F+"pos0"]=l.makeCalcdata(d,F),j=k.concat(j,v),delete d["_"+u+"autoBinFinished"],i.visible===!0&&(D?D=!1:(delete d._autoBin,d["_"+u+"autoBinFinished"]=1),o.traceIs(d,"2dMap")&&(N=!0),d.type==="histogram2dcontour"&&(W=!0))}g=x[0][u+"calendar"];var V=T.autoBin(j,l,w.nbins,N,g,w.sizeFound&&w.size),U=x[0]._autoBin={};if(y=U[w.dirs[0]]={},W&&(w.size||(V.start=C(T.tickIncrement(O(V.start),V.size,!0,g))),w.end===void 0&&(V.end=C(T.tickIncrement(O(V.end),V.size,!1,g)))),E&&!o.traceIs(i,"2dMap")&&V._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&i.bingroup===""&&i.xbins===void 0){if(p)return[V,v,!0];V=function(be,ve,ge,we,_e){var se,ie,fe,Ee=be._fullLayout,Te=function(Ye,at){for(var rt=at.xaxis,dt=at.yaxis,vt=at.orientation,ht=[],et=Ye._fullData,$e=0;$e<et.length;$e++){var wt=et[$e];wt.type==="histogram"&&wt.visible===!0&&wt.orientation===vt&&wt.xaxis===rt&&wt.yaxis===dt&&ht.push(wt)}return ht}(be,ve),Ae=!1,Se=1/0,Oe=[ve];for(se=0;se<Te.length;se++)if((ie=Te[se])===ve)Ae=!0;else if(Ae){var De=n(be,ie,ge,we,!0),de=De[0],me=De[2];ie["_"+we+"autoBinFinished"]=1,ie["_"+we+"pos0"]=De[1],me?Oe.push(ie):Se=Math.min(Se,de.size)}else fe=Ee._histogramBinOpts[ie["_"+we+"bingroup"]],Se=Math.min(Se,fe.size||ie[_e].size);var Me=new Array(Oe.length);for(se=0;se<Oe.length;se++)for(var ze=Oe[se]["_"+we+"pos0"],Pe=0;Pe<ze.length;Pe++)if(ze[Pe]!==void 0){Me[se]=ze[Pe];break}for(isFinite(Se)||(Se=k.distinctVals(Me).minDiff),se=0;se<Oe.length;se++){var Ne=(ie=Oe[se])[we+"calendar"],Ve={start:ge.c2r(Me[se]-Se/2,0,Ne),end:ge.c2r(Me[se]+Se/2,0,Ne),size:Se};ie._input[_e]=ie[_e]=Ve,(fe=Ee._histogramBinOpts[ie["_"+we+"bingroup"]])&&k.extendFlat(fe,Ve)}return ve[_e]}(r,i,l,u,_)}(m=d.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?V.start=C(T.tickIncrement(O(V.start),V.size,!0,g)):V.end=C(T.tickIncrement(O(V.end),V.size,!1,g))),w.size=V.size,w.sizeFound||(y.size=V.size,k.nestedProperty(x[0],_+".size").set(V.size)),R("start",w,V),R("end",w,V)}v=i["_"+u+"pos0"],delete i["_"+u+"pos0"];var te=i._input[_]||{},J=k.extendFlat({},w),X=w.start,K=l.r2l(te.start),Q=K!==void 0;if((w.startFound||Q)&&K!==l.r2l(X)){var Z=Q?K:k.aggNums(Math.min,null,v),re={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:w.size,tick0:X,calendar:g,range:[Z,T.tickIncrement(Z,w.size,!1,g)].map(l.l2r)},oe=T.tickFirst(re);oe>l.r2l(Z)&&(oe=T.tickIncrement(oe,w.size,!0,g)),J.start=l.l2r(oe),Q||k.nestedProperty(i,_+".start").set(J.start)}var ae=w.end,ce=l.r2l(te.end),he=ce!==void 0;if((w.endFound||he)&&ce!==l.r2l(ae)){var pe=he?ce:k.aggNums(Math.max,null,v);J.end=l.l2r(pe),he||k.nestedProperty(i,_+".start").set(J.end)}var xe="autobin"+u;return i._input[xe]===!1&&(i._input[_]=k.extendFlat({},i[_]||{}),delete i._input[xe],delete i[xe]),[J,v]}ee.exports={calc:function(r,i){var l,u,p,c,x=[],d=[],g=i.orientation==="h",v=T.getFromId(r,g?i.yaxis:i.xaxis),y=g?"y":"x",m={x:"y",y:"x"}[y],_=i[y+"calendar"],f=i.cumulative,S=n(r,i,v,y),w=S[0],E=S[1],O=typeof w.size=="string",C=[],P=O?C:w,R=[],j=[],D=[],N=0,W=i.histnorm,F=i.histfunc,V=W.indexOf("density")!==-1;f.enabled&&V&&(W=W.replace(/ ?density$/,""),V=!1);var U,te=F==="max"||F==="min"?null:0,J=h.count,X=s[W],K=!1,Q=function(ie){return v.r2c(ie,0,_)};for(k.isArrayOrTypedArray(i[m])&&F!=="count"&&(U=i[m],K=F==="avg",J=h[F]),l=Q(w.start),p=Q(w.end)+(l-T.tickIncrement(l,w.size,!1,_))/1e6;l<p&&x.length<1e6&&(u=T.tickIncrement(l,w.size,!1,_),x.push((l+u)/2),d.push(te),D.push([]),C.push(l),V&&R.push(1/(u-l)),K&&j.push(0),!(u<=l));)l=u;C.push(l),O||v.type!=="date"||(P={start:Q(P.start),end:Q(P.end),size:P.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var Z=i["_"+y+"bingroup"],re={leftGap:1/0,rightGap:1/0};Z&&(r._fullLayout._roundFnOpts[Z]||(r._fullLayout._roundFnOpts[Z]=re),re=r._fullLayout._roundFnOpts[Z]);var oe,ae=d.length,ce=!0,he=re.leftGap,pe=re.rightGap,xe={};for(l=0;l<E.length;l++){var be=E[l];(c=k.findBin(be,P))>=0&&c<ae&&(N+=J(c,l,d,U,j),ce&&D[c].length&&be!==E[D[c][0]]&&(ce=!1),D[c].push(l),xe[l]=c,he=Math.min(he,be-C[c]),pe=Math.min(pe,C[c+1]-be))}re.leftGap=he,re.rightGap=pe,ce||(oe=function(ie,fe){return function(){var Ee=r._fullLayout._roundFnOpts[Z];return a(Ee.leftGap,Ee.rightGap,C,v,_)(ie,fe)}}),K&&(N=t(d,j)),X&&X(d,N,R),f.enabled&&function(ie,fe,Ee){var Te,Ae,Se;function Oe(de){Se=ie[de],ie[de]/=2}function De(de){Ae=ie[de],ie[de]=Se+Ae/2,Se+=Ae}if(Ee==="half")if(fe==="increasing")for(Oe(0),Te=1;Te<ie.length;Te++)De(Te);else for(Oe(ie.length-1),Te=ie.length-2;Te>=0;Te--)De(Te);else if(fe==="increasing"){for(Te=1;Te<ie.length;Te++)ie[Te]+=ie[Te-1];Ee==="exclude"&&(ie.unshift(0),ie.pop())}else{for(Te=ie.length-2;Te>=0;Te--)ie[Te]+=ie[Te+1];Ee==="exclude"&&(ie.push(0),ie.shift())}}(d,f.direction,f.currentbin);var ve=Math.min(x.length,d.length),ge=[],we=0,_e=ve-1;for(l=0;l<ve;l++)if(d[l]){we=l;break}for(l=ve-1;l>=we;l--)if(d[l]){_e=l;break}for(l=we;l<=_e;l++)if(M(x[l])&&M(d[l])){var se={p:x[l],s:d[l],b:0};f.enabled||(se.pts=D[l],ce?se.ph0=se.ph1=D[l].length?E[D[l][0]]:x[l]:(i._computePh=!0,se.ph0=oe(C[l]),se.ph1=oe(C[l+1],!0))),ge.push(se)}return ge.length===1&&(ge[0].width1=T.tickIncrement(ge[0].p,w.size,!1,_)-ge[0].p),b(ge,i),k.isArrayOrTypedArray(i.selectedpoints)&&k.tagSelected(ge,i,xe),ge},calcAllAutoBins:n}},73316:function(ee){ee.exports={eventDataKeys:["binNumber"]}},80536:function(ee,z,e){var M=e(3400),k=e(79811),o=e(24040).traceIs,T=e(20011),b=e(31508).validateCornerradius,h=M.nestedProperty,s=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];ee.exports=function(n,r){var i,l,u,p,c,x,d,g=r._histogramBinOpts={},v=[],y={},m=[];function _(te,J){return M.coerce(i._input,i,i._module.attributes,te,J)}function f(te){return te.orientation==="v"?"x":"y"}function S(te,J,X){var K=te.uid+"__"+X;J||(J=K);var Q=function(ae,ce){return k.getFromTrace({_fullLayout:r},ae,ce).type}(te,X),Z=te[X+"calendar"]||"",re=g[J],oe=!0;re&&(Q===re.axType&&Z===re.calendar?(oe=!1,re.traces.push(te),re.dirs.push(X)):(J=K,Q!==re.axType&&M.warn(["Attempted to group the bins of trace",te.index,"set on a","type:"+Q,"axis","with bins on","type:"+re.axType,"axis."].join(" ")),Z!==re.calendar&&M.warn(["Attempted to group the bins of trace",te.index,"set with a",Z,"calendar","with bins",re.calendar?"on a "+re.calendar+" calendar":"w/o a set calendar"].join(" ")))),oe&&(g[J]={traces:[te],dirs:[X],axType:Q,calendar:te[X+"calendar"]||""}),te["_"+X+"bingroup"]=J}for(c=0;c<n.length;c++)if(i=n[c],o(i,"histogram")){if(v.push(i),delete i._xautoBinFinished,delete i._yautoBinFinished,i.type==="histogram"){var w=_("marker.cornerradius",r.barcornerradius);i.marker&&(i.marker.cornerradius=b(w))}o(i,"2dMap")||T(i._input,i,r,_)}var E=r._alignmentOpts||{};for(c=0;c<v.length;c++){if(i=v[c],u="",!o(i,"2dMap")){if(p=f(i),r.barmode==="group"&&i.alignmentgroup){var O=i[p+"axis"],C=s(r,O)+i.orientation;(E[C]||{})[i.alignmentgroup]&&(u=C)}u||r.barmode==="overlay"||(u=s(r,i.xaxis)+s(r,i.yaxis)+f(i))}u?(y[u]||(y[u]=[]),y[u].push(i)):m.push(i)}for(u in y)if((l=y[u]).length!==1){var P=!1;for(l.length&&(i=l[0],P=_("bingroup")),u=P||u,c=0;c<l.length;c++){var R=(i=l[c])._input.bingroup;R&&R!==u&&M.warn(["Trace",i.index,"must match","within bingroup",u+".","Ignoring its bingroup:",R,"setting."].join(" ")),i.bingroup=u,S(i,u,f(i))}}else m.push(l[0]);for(c=0;c<m.length;c++){i=m[c];var j=_("bingroup");if(o(i,"2dMap"))for(d=0;d<2;d++){var D=_((p=a[d])+"bingroup",j?j+"__"+p:null);S(i,D,p)}else S(i,j,f(i))}for(u in g){var N=g[u];for(l=N.traces,x=0;x<t.length;x++){var W,F,V=t[x],U=V.name;if(U!=="nbins"||!N.sizeFound){for(c=0;c<l.length;c++){if(i=l[c],p=N.dirs[c],W=V.aStr[p],h(i._input,W).get()!==void 0){N[U]=_(W),N[U+"Found"]=!0;break}(F=(i._autoBin||{})[p]||{})[U]&&h(i,W).set(F[U])}if(U==="start"||U==="end")for(;c<l.length;c++)(i=l[c])["_"+p+"bingroup"]&&_(W,(F=(i._autoBin||{})[p]||{})[U]);U!=="nbins"||N.sizeFound||N.nbinsFound||(i=l[0],N[U]=_(W))}}}}},6616:function(ee,z,e){var M=e(24040),k=e(3400),o=e(76308),T=e(31508).handleText,b=e(55592),h=e(40196);ee.exports=function(s,t,a,n){function r(y,m){return k.coerce(s,t,h,y,m)}var i=r("x"),l=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var u=r("textposition");T(s,t,n,r,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var p=r("orientation",l&&!i?"h":"v"),c=p==="v"?"x":"y",x=p==="v"?"y":"x",d=i&&l?Math.min(k.minRowLength(i)&&k.minRowLength(l)):k.minRowLength(t[c]||[]);if(d){t._length=d,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],n),t[x]&&r("histfunc"),r("histnorm"),r("autobin"+c),b(s,t,r,a,n),k.coerceSelectionMarkerOpacity(t,r);var g=(t.marker.line||{}).color,v=M.getComponentMethod("errorbars","supplyDefaults");v(s,t,g||o.defaultLine,{axis:"y"}),v(s,t,g||o.defaultLine,{axis:"x",inherit:"y"}),r("zorder")}else t.visible=!1}},84980:function(ee){ee.exports=function(z,e,M,k,o){if(z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(z.z=e.zLabelVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),!(M.cumulative||{}).enabled){var T,b=Array.isArray(o)?k[0].pts[o[0]][o[1]]:k[o].pts;if(z.pointNumbers=b,z.binNumber=z.pointNumber,delete z.pointNumber,delete z.pointIndex,M._indexToPoints){T=[];for(var h=0;h<b.length;h++)T=T.concat(M._indexToPoints[b[h]])}else T=b;z.pointIndices=T}return z}},43339:function(ee,z,e){var M=e(63400).hoverPoints,k=e(54460).hoverLabelText;ee.exports=function(o,T,b,h,s){var t=M(o,T,b,h,s);if(t){var a=(o=t[0]).cd[o.index],n=o.cd[0].trace;if(!n.cumulative.enabled){var r=n.orientation==="h"?"y":"x";o[r+"Label"]=k(o[r+"a"],[a.ph0,a.ph1],n[r+"hoverformat"])}return t}}},42600:function(ee,z,e){ee.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(ee){ee.exports={percent:function(z,e){for(var M=z.length,k=100/e,o=0;o<M;o++)z[o]*=k},probability:function(z,e){for(var M=z.length,k=0;k<M;k++)z[k]/=e},density:function(z,e,M,k){var o=z.length;k=k||1;for(var T=0;T<o;T++)z[T]*=M[T]*k},"probability density":function(z,e,M,k){var o=z.length;k&&(e/=k);for(var T=0;T<o;T++)z[T]*=M[T]/e}}},37008:function(ee,z,e){var M=e(40196),k=e(11120),o=e(83328),T=e(45464),b=e(29736).axisHoverFormat,h=e(21776).Ks,s=e(21776).Gw,t=e(49084),a=e(92880).extendFlat;ee.exports=a({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:k("x"),nbinsy:M.nbinsy,ybins:k("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:a({},M.bingroup,{}),xbingroup:a({},M.bingroup,{}),ybingroup:a({},M.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:h({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:a({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(ee,z,e){var M=e(3400),k=e(54460),o=e(16964),T=e(10648),b=e(2e3),h=e(67712),s=e(35852).calcAllAutoBins;function t(r,i,l,u){var p,c=new Array(r);if(u)for(p=0;p<r;p++)c[p]=1/(i[p+1]-i[p]);else{var x=1/l;for(p=0;p<r;p++)c[p]=x}return c}function a(r,i){return{start:r(i.start),end:r(i.end),size:i.size}}function n(r,i,l,u,p,c){var x,d=r.length-1,g=new Array(d),v=h(l,u,r,p,c);for(x=0;x<d;x++){var y=(i||[])[x];g[x]=y===void 0?[v(r[x]),v(r[x+1],!0)]:[y,y]}return g}ee.exports=function(r,i){var l,u,p,c,x=k.getFromId(r,i.xaxis),d=k.getFromId(r,i.yaxis),g=i.xcalendar,v=i.ycalendar,y=function(dt){return x.r2c(dt,0,g)},m=function(dt){return d.r2c(dt,0,v)},_=s(r,i,x,"x"),f=_[0],S=_[1],w=s(r,i,d,"y"),E=w[0],O=w[1],C=i._length;S.length>C&&S.splice(C,S.length-C),O.length>C&&O.splice(C,O.length-C);var P=[],R=[],j=[],D=typeof f.size=="string",N=typeof E.size=="string",W=[],F=[],V=D?W:f,U=N?F:E,te=0,J=[],X=[],K=i.histnorm,Q=i.histfunc,Z=K.indexOf("density")!==-1,re=Q==="max"||Q==="min"?null:0,oe=o.count,ae=T[K],ce=!1,he=[],pe=[],xe="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";xe&&Q!=="count"&&(ce=Q==="avg",oe=o[Q]);var be=f.size,ve=y(f.start),ge=y(f.end)+(ve-k.tickIncrement(ve,be,!1,g))/1e6;for(l=ve;l<ge;l=k.tickIncrement(l,be,!1,g))R.push(re),W.push(l),ce&&j.push(0);W.push(l);var we,_e=R.length,se=(l-ve)/_e,ie=(we=ve+se/2,x.c2r(we,0,g)),fe=E.size,Ee=m(E.start),Te=m(E.end)+(Ee-k.tickIncrement(Ee,fe,!1,v))/1e6;for(l=Ee;l<Te;l=k.tickIncrement(l,fe,!1,v)){P.push(R.slice()),F.push(l);var Ae=new Array(_e);for(u=0;u<_e;u++)Ae[u]=[];X.push(Ae),ce&&J.push(j.slice())}F.push(l);var Se=P.length,Oe=(l-Ee)/Se,De=function(dt){return d.c2r(dt,0,v)}(Ee+Oe/2);Z&&(he=t(R.length,V,se,D),pe=t(P.length,U,Oe,N)),D||x.type!=="date"||(V=a(y,V)),N||d.type!=="date"||(U=a(m,U));var de=!0,me=!0,Me=new Array(_e),ze=new Array(Se),Pe=1/0,Ne=1/0,Ve=1/0,Ye=1/0;for(l=0;l<C;l++){var at=S[l],rt=O[l];p=M.findBin(at,V),c=M.findBin(rt,U),p>=0&&p<_e&&c>=0&&c<Se&&(te+=oe(p,l,P[c],xe,J[c]),X[c][p].push(l),de&&(Me[p]===void 0?Me[p]=at:Me[p]!==at&&(de=!1)),me&&(ze[c]===void 0?ze[c]=rt:ze[c]!==rt&&(me=!1)),Pe=Math.min(Pe,at-W[p]),Ne=Math.min(Ne,W[p+1]-at),Ve=Math.min(Ve,rt-F[c]),Ye=Math.min(Ye,F[c+1]-rt))}if(ce)for(c=0;c<Se;c++)te+=b(P[c],J[c]);if(ae)for(c=0;c<Se;c++)ae(P[c],te,he,pe[c]);return{x:S,xRanges:n(W,de&&Me,Pe,Ne,x,g),x0:ie,dx:se,y:O,yRanges:n(F,me&&ze,Ve,Ye,d,v),y0:De,dy:Oe,z:P,pts:X}}},99784:function(ee,z,e){var M=e(3400),k=e(56408),o=e(82748),T=e(27260),b=e(39096),h=e(37008);ee.exports=function(s,t,a,n){function r(i,l){return M.coerce(s,t,h,i,l)}k(s,t,r,n),t.visible!==!1&&(o(s,t,r,n),T(s,t,n,r,{prefix:"",cLetter:"z"}),r("hovertemplate"),b(r,n),r("xhoverformat"),r("yhoverformat"))}},59576:function(ee,z,e){var M=e(55512),k=e(54460).hoverLabelText;ee.exports=function(o,T,b,h,s){var t=M(o,T,b,h,s);if(t){var a=(o=t[0]).index,n=a[0],r=a[1],i=o.cd[0],l=i.trace,u=i.xRanges[r],p=i.yRanges[n];return o.xLabel=k(o.xa,[u[0],u[1]],l.xhoverformat),o.yLabel=k(o.ya,[p[0],p[1]],l.yhoverformat),t}}},21536:function(ee,z,e){ee.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(ee,z,e){var M=e(24040),k=e(3400);ee.exports=function(o,T,b,h){var s=b("x"),t=b("y"),a=k.minRowLength(s),n=k.minRowLength(t);a&&n?(T._length=Math.min(a,n),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],h),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},81220:function(ee,z,e){var M=e(37008),k=e(67104),o=e(49084),T=e(29736).axisHoverFormat,b=e(92880).extendFlat;ee.exports=b({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(ee,z,e){var M=e(3400),k=e(56408),o=e(84952),T=e(97680),b=e(39096),h=e(81220);ee.exports=function(s,t,a,n){function r(i,l){return M.coerce(s,t,h,i,l)}k(s,t,r,n),t.visible!==!1&&(o(s,t,r,function(i){return M.coerce2(s,t,h,i)}),T(s,t,r,n),r("xhoverformat"),r("yhoverformat"),r("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(r,n))}},65664:function(ee,z,e){ee.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(ee,z,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),h=e(424),s=e(40516),t=e(32984),a=e(92880).extendFlat,n=e(98192).c;ee.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:a({colors:h.marker.colors,line:h.marker.line,pattern:n,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:h.leaf,pathbar:s.pathbar,text:b.text,textinfo:h.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:h.hoverinfo,hovertemplate:M({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:h.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(ee,z,e){var M=e(7316);z.name="icicle",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},73876:function(ee,z,e){var M=e(3776);z.r=function(k,o){return M.calc(k,o)},z.q=function(k){return M._runCrossTraceCalc("icicle",k)}},7045:function(ee,z,e){var M=e(3400),k=e(97376),o=e(76308),T=e(86968).Q,b=e(31508).handleText,h=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),a=t.hasColorscale,n=t.handleDefaults;ee.exports=function(r,i,l,u){function p(m,_){return M.coerce(r,i,k,m,_)}var c=p("labels"),x=p("parents");if(c&&c.length&&x&&x.length){var d=p("values");d&&d.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var g=p("text");p("texttemplate"),i.texttemplate||p("textinfo",M.isArrayOrTypedArray(g)?"text+label":"label"),p("hovertext"),p("hovertemplate");var v=p("pathbar.visible");b(r,i,u,p,"auto",{hasPathbar:v,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),s(r,i,u,p);var y=i._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;y&&n(r,i,u,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",y?1:.7),i._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},v&&(p("pathbar.thickness",i.pathbar.textfont.size+2*h),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(i,u,p),i._length=null}else i.visible=!1}},67880:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(25132),h=e(47192).styleOne,s=e(32984),t=e(78176),a=e(45716),n=e(96488).formatSliceLabel,r=!1;ee.exports=function(i,l,u,p,c){var x=c.width,d=c.height,g=c.viewX,v=c.viewY,y=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,O=c.prevEntry,C=i._context.staticPlot,P=i._fullLayout,R=l[0].trace,j=R.textposition.indexOf("left")!==-1,D=R.textposition.indexOf("right")!==-1,N=R.textposition.indexOf("bottom")!==-1,W=b(u,[x,d],{flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,orientation:R.tiling.orientation,pad:{inner:R.tiling.pad},maxDepth:R._maxDepth}).descendants(),F=1/0,V=-1/0;W.forEach(function(K){var Q=K.depth;Q>=R._maxDepth?(K.x0=K.x1=(K.x0+K.x1)/2,K.y0=K.y1=(K.y0+K.y1)/2):(F=Math.min(F,Q),V=Math.max(V,Q))}),p=p.data(W,t.getPtId),R._maxVisibleLayers=isFinite(V)?V-F+1:0,p.enter().append("g").classed("slice",!0),S(p,r,{},[x,d],y),p.order();var U=null;if(f&&O){var te=t.getPtId(O);p.each(function(K){U===null&&t.getPtId(K)===te&&(U={x0:K.x0,x1:K.x1,y0:K.y0,y1:K.y1})})}var J=function(){return U||{x0:0,x1:x,y0:0,y1:d}},X=p;return f&&(X=X.transition().each("end",function(){var K=M.select(this);t.setSliceCursor(K,i,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(K){K._x0=g(K.x0),K._x1=g(K.x1),K._y0=v(K.y0),K._y1=v(K.y1),K._hoverX=g(K.x1-R.tiling.pad),K._hoverY=v(N?K.y1-R.tiling.pad/2:K.y0+R.tiling.pad/2);var Q=M.select(this),Z=k.ensureSingle(Q,"path","surface",function(ce){ce.style("pointer-events",C?"none":"all")});f?Z.transition().attrTween("d",function(ce){var he=w(ce,r,J(),[x,d],{orientation:R.tiling.orientation,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1});return function(pe){return y(he(pe))}}):Z.attr("d",y),Q.call(a,u,i,l,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,i,{isTransitioning:i._transitioning}),Z.call(h,K,R,i,{hovered:!1}),K.x0===K.x1||K.y0===K.y1?K._text="":K._text=n(K,u,R,l,P)||"";var re=k.ensureSingle(Q,"g","slicetext"),oe=k.ensureSingle(re,"text","",function(ce){ce.attr("data-notex",1)}),ae=k.ensureUniformFontSize(i,t.determineTextFont(R,K,P.font));oe.text(K._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":j?"start":"middle").call(o.font,ae).call(T.convertToTspans,i),K.textBB=o.bBox(oe.node()),K.transform=m(K,{fontSize:ae.size}),K.transform.fontSize=ae.size,f?oe.transition().attrTween("transform",function(ce){var he=E(ce,r,J(),[x,d]);return function(pe){return _(he(pe))}}):oe.attr("transform",_(K))}),U}},29044:function(ee,z,e){ee.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(ee){ee.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(ee,z,e){var M=e(3400),k=e(90676);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},25132:function(ee,z,e){var M=e(74148),k=e(83024);ee.exports=function(o,T,b){var h=b.flipX,s=b.flipY,t=b.orientation==="h",a=b.maxDepth,n=T[0],r=T[1];a&&(n=(o.height+1)*T[0]/Math.min(o.height+1,a),r=(o.height+1)*T[1]/Math.min(o.height+1,a));var i=M.partition().padding(b.pad.inner).size(t?[T[1],n]:[T[0],r])(o);return(t||h||s)&&k(i,T,{swapXY:t,flipX:h,flipY:s}),i}},38364:function(ee,z,e){var M=e(95808),k=e(67880);ee.exports=function(o,T,b,h){return M(o,T,b,h,{type:"icicle",drawDescendants:k})}},47192:function(ee,z,e){var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function h(s,t,a,n){var r=t.data.data,i=!t.children,l=r.i,u=o.castOption(a,l,"marker.line.color")||k.defaultLine,p=o.castOption(a,l,"marker.line.width")||0;s.call(b,t,a,n).style("stroke-width",p).call(k.stroke,u).style("opacity",i?a.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");T(s,t,"icicle"),t.each(function(a){var n=M.select(this),r=a[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(i){M.select(this).call(h,i,r,s)})})},styleOne:h}},95188:function(ee,z,e){for(var M=e(45464),k=e(52904).zorder,o=e(21776).Ks,T=e(92880).extendFlat,b=e(47797).colormodel,h=["rgb","rgba","rgba256","hsl","hsla"],s=[],t=[],a=0;a<h.length;a++){var n=b[h[a]];s.push("For the `"+h[a]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),t.push("For the `"+h[a]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}ee.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:h,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),zorder:k,transforms:void 0})},93336:function(ee,z,e){var M=e(3400),k=e(47797),o=e(38248),T=e(54460),b=e(3400).maxRowLength,h=e(18712).i;function s(a,n,r,i){return function(l){return M.constrain((l-a)*n,r,i)}}function t(a,n){return function(r){return M.constrain(r,a,n)}}ee.exports=function(a,n){var r,i;if(n._hasZ)r=n.z.length,i=b(n.z);else if(n._hasSource){var l=h(n.source);r=l.height,i=l.width}var u,p=T.getFromId(a,n.xaxis||"x"),c=T.getFromId(a,n.yaxis||"y"),x=p.d2c(n.x0)-n.dx/2,d=c.d2c(n.y0)-n.dy/2,g=[x,x+i*n.dx],v=[d,d+r*n.dy];if(p&&p.type==="log")for(u=0;u<i;u++)g.push(x+u*n.dx);if(c&&c.type==="log")for(u=0;u<r;u++)v.push(d+u*n.dy);return n._extremes[p._id]=T.findExtremes(p,g),n._extremes[c._id]=T.findExtremes(c,v),n._scaler=function(y){var m=k.colormodel[y.colormodel],_=(m.colormodel||y.colormodel).length;y._sArray=[];for(var f=0;f<_;f++)m.min[f]!==y.zmin[f]||m.max[f]!==y.zmax[f]?y._sArray.push(s(y.zmin[f],(m.max[f]-m.min[f])/(y.zmax[f]-y.zmin[f]),m.min[f],m.max[f])):y._sArray.push(t(m.min[f],m.max[f]));return function(S){for(var w=S.slice(0,_),E=0;E<_;E++){var O=w[E];if(!o(O))return!1;w[E]=y._sArray[E](O)}return w}}(n),[{x0:x,y0:d,z:n.z,w:i,h:r}]}},47797:function(ee){ee.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(z){return z.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(z){var e=z.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(z){var e=z.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}}}},13188:function(ee,z,e){var M=e(3400),k=e(95188),o=e(47797),T=e(81792).IMAGE_URL_PREFIX;ee.exports=function(b,h){function s(n,r){return M.coerce(b,h,k,n,r)}s("source"),h.source&&!h.source.match(T)&&delete h.source,h._hasSource=!!h.source;var t,a=s("z");h._hasZ=!(a===void 0||!a.length||!a[0]||!a[0].length),h._hasZ||h._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),h._hasZ?(s("colormodel","rgb"),s("zmin",(t=o.colormodel[h.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):h._hasSource&&(h.colormodel="rgba256",t=o.colormodel[h.colormodel],h.zmin=t.zminDflt,h.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),h._length=null,s("zorder")):h.visible=!1}},79972:function(ee){ee.exports=function(z,e){return"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z.color=e.color,z.colormodel=e.trace.colormodel,z.z||(z.z=e.color),z}},18712:function(ee,z,e){var M=e(19480),k=e(81792).IMAGE_URL_PREFIX,o=e(33576).Buffer;z.i=function(T){var b=T.replace(k,""),h=new o(b,"base64");return M(h)}},24892:function(ee,z,e){var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(47797);ee.exports=function(b,h,s){var t=b.cd[0],a=t.trace,n=b.xa,r=b.ya;if(!(M.inbox(h-t.x0,h-(t.x0+t.w*a.dx),0)>0||M.inbox(s-t.y0,s-(t.y0+t.h*a.dy),0)>0)){var i,l=Math.floor((h-t.x0)/a.dx),u=Math.floor(Math.abs(s-t.y0)/a.dy);if(a._hasZ?i=t.z[u][l]:a._hasSource&&(i=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),i){var p,c=t.hi||a.hoverinfo;if(c){var x=c.split("+");x.indexOf("all")!==-1&&(x=["color"]),x.indexOf("color")!==-1&&(p=!0)}var d,g=T.colormodel[a.colormodel],v=g.colormodel||a.colormodel,y=v.length,m=a._scaler(i),_=g.suffix,f=[];(a.hovertemplate||p)&&(f.push("["+[m[0]+_[0],m[1]+_[1],m[2]+_[2]].join(", ")),y===4&&f.push(", "+m[3]+_[3]),f.push("]"),f=f.join(""),b.extraText=v.toUpperCase()+": "+f),o(a.hovertext)&&o(a.hovertext[u])?d=a.hovertext[u][l]:o(a.text)&&o(a.text[u])&&(d=a.text[u][l]);var S=r.c2p(t.y0+(u+.5)*a.dy),w=t.x0+(l+.5)*a.dx,E=t.y0+(u+.5)*a.dy,O="["+i.slice(0,a.colormodel.length).join(", ")+"]";return[k.extendFlat(b,{index:[u,l],x0:n.c2p(t.x0+l*a.dx),x1:n.c2p(t.x0+(l+1)*a.dx),y0:S,y1:S,color:m,xVal:w,xLabelVal:w,yVal:E,yLabelVal:E,zLabelVal:O,text:d,hovertemplateLabels:{zLabel:O,colorLabel:f,"color[0]Label":m[0]+_[0],"color[1]Label":m[1]+_[1],"color[2]Label":m[2]+_[2],"color[3]Label":m[3]+_[3]}})]}}}},48928:function(ee,z,e){ee.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(ee,z,e){var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(47797),h=e(9188),s=e(2264).STYLE;ee.exports=function(t,a,n,r){var i=a.xaxis,l=a.yaxis,u=!t._context._exportedPlot&&h();k.makeTraceGroups(r,n,"im").each(function(p){var c=M.select(this),x=p[0],d=x.trace,g=(d.zsmooth==="fast"||d.zsmooth===!1&&u)&&!d._hasZ&&d._hasSource&&i.type==="linear"&&l.type==="linear";d._realImage=g;var v,y,m,_,f,S,w=x.z,E=x.x0,O=x.y0,C=x.w,P=x.h,R=d.dx,j=d.dy;for(S=0;v===void 0&&S<C;)v=i.c2p(E+S*R),S++;for(S=C;y===void 0&&S>0;)y=i.c2p(E+S*R),S--;for(S=0;_===void 0&&S<P;)_=l.c2p(O+S*j),S++;for(S=P;f===void 0&&S>0;)f=l.c2p(O+S*j),S--;y<v&&(m=y,y=v,v=m),f<_&&(m=_,_=f,f=m),g||(v=Math.max(-.5*i._length,v),y=Math.min(1.5*i._length,y),_=Math.max(-.5*l._length,_),f=Math.min(1.5*l._length,f));var D=Math.round(y-v),N=Math.round(f-_);if(D<=0||N<=0)c.selectAll("image").data([]).exit().remove();else{var W=c.selectAll("image").data([p]);W.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),W.exit().remove();var F=d.zsmooth===!1?s:"";if(g){var V=k.simpleMap(i.range,i.r2l),U=k.simpleMap(l.range,l.r2l),te=V[1]<V[0],J=U[1]>U[0];if(te||J){var X=v+D/2,K=_+N/2;F+="transform:"+o(X+"px",K+"px")+"scale("+(te?-1:1)+","+(J?-1:1)+")"+o(-X+"px",-K+"px")+";"}}W.attr("style",F);var Q=new Promise(function(re){if(d._hasZ)re();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===C&&d._canvas.el.height===P&&d._canvas.source===d.source)re();else{var oe=document.createElement("canvas");oe.width=C,oe.height=P;var ae=oe.getContext("2d",{willReadFrequently:!0});d._image=d._image||new Image;var ce=d._image;ce.onload=function(){ae.drawImage(ce,0,0),d._canvas={el:oe,source:d.source},re()},ce.setAttribute("src",d.source)}}).then(function(){var re,oe;if(d._hasZ)oe=Z(function(ce,he){var pe=w[he][ce];return k.isTypedArray(pe)&&(pe=Array.from(pe)),pe}),re=oe.toDataURL("image/png");else if(d._hasSource)if(g)re=d.source;else{var ae=d._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,C,P).data;oe=Z(function(ce,he){var pe=4*(he*C+ce);return[ae[pe],ae[pe+1],ae[pe+2],ae[pe+3]]}),re=oe.toDataURL("image/png")}W.attr({"xlink:href":re,height:N,width:D,x:v,y:_})});t._promises.push(Q)}function Z(re){var oe=document.createElement("canvas");oe.width=D,oe.height=N;var ae,ce=oe.getContext("2d",{willReadFrequently:!0}),he=function(fe){return k.constrain(Math.round(i.c2p(E+fe*R)-v),0,D)},pe=function(fe){return k.constrain(Math.round(l.c2p(O+fe*j)-_),0,N)},xe=b.colormodel[d.colormodel],be=xe.colormodel||d.colormodel,ve=xe.fmt;for(S=0;S<x.w;S++){var ge=he(S),we=he(S+1);if(we!==ge&&!isNaN(we)&&!isNaN(ge))for(var _e=0;_e<x.h;_e++){var se=pe(_e),ie=pe(_e+1);ie===se||isNaN(ie)||isNaN(se)||!re(S,_e)||(ae=d._scaler(re(S,_e)),ce.fillStyle=ae?be+"("+ve(ae).join(",")+")":"rgba(0,0,0,0)",ce.fillRect(ge,se,we-ge,ie-se))}}return oe}})}},28576:function(ee,z,e){var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".im image").style("opacity",function(o){return o[0].trace.opacity})}},89864:function(ee,z,e){var M=e(92880).extendFlat,k=e(92880).extendDeep,o=e(67824).overrideAll,T=e(25376),b=e(22548),h=e(86968).u,s=e(94724),t=e(31780).templatedArray,a=e(48164),n=e(29736).descriptionOnlyNumbers,r=T({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},i,{range:l}));ee.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:h({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},r,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:n("value")},font:M({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:n("value")},increasing:{symbol:{valType:"string",dflt:a.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:a.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:a.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:l,visible:M({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:M({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:M({},i.line.color,{}),width:M({},i.line.width,{dflt:1}),editType:"plot"},thickness:M({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(ee,z,e){var M=e(7316);z.name="indicator",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},79136:function(ee){ee.exports={calc:function(z,e){var M=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var o=e._lastValue,T=o;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),M[0]={y:k,lastY:o,delta:k-T,relativeDelta:(k-T)/T},M}}},12096:function(ee){ee.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(ee,z,e){var M=e(3400),k=e(89864),o=e(86968).Q,T=e(31780),b=e(51272),h=e(12096),s=e(26332),t=e(25404),a=e(95936),n=e(42568);function r(i,l){function u(p,c){return M.coerce(i,l,k.gauge.steps,p,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}ee.exports={supplyDefaults:function(i,l,u,p){function c(R,j){return M.coerce(i,l,k,R,j)}o(l,p,c),c("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var x=c("value");l._range=[0,typeof x=="number"?1.5*x:1];var d,g,v=new Array(2);if(l._hasNumber){c("number.valueformat");var y=M.extendFlat({},p.font);y.size=void 0,M.coerceFont(c,"number.font",y),l.number.font.size===void 0&&(l.number.font.size=h.defaultNumberFontSize,v[0]=!0),c("number.prefix"),c("number.suffix"),d=l.number.font.size}if(l._hasDelta){var m=M.extendFlat({},p.font);m.size=void 0,M.coerceFont(c,"delta.font",m),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(d||h.defaultNumberFontSize),v[1]=!0),c("delta.reference",l.value),c("delta.relative"),c("delta.valueformat",l.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),g=l.delta.font.size}l._scaleNumbers=(!l._hasNumber||v[0])&&(!l._hasDelta||v[1])||!1;var _,f,S,w,E=M.extendFlat({},p.font);function O(R,j){return M.coerce(_,f,k.gauge,R,j)}function C(R,j){return M.coerce(S,w,k.gauge.axis,R,j)}if(E.size=.25*(d||g||h.defaultNumberFontSize),M.coerceFont(c,"title.font",E),c("title.text"),l._hasGauge){(_=i.gauge)||(_={}),f=T.newContainer(l,"gauge"),O("shape"),(l._isBullet=l.gauge.shape==="bullet")||c("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||c("align","center"),O("bgcolor",p.paper_bgcolor),O("borderwidth"),O("bordercolor"),O("bar.color"),O("bar.line.color"),O("bar.line.width"),O("bar.thickness",h.valueThickness*(l.gauge.shape==="bullet"?.5:1)),b(_,f,{name:"steps",handleItemDefaults:r}),O("threshold.value"),O("threshold.thickness"),O("threshold.line.width"),O("threshold.line.color"),S={},_&&(S=_.axis||{}),w=T.newContainer(f,"axis"),C("visible"),l._range=C("range",l._range);var P={font:p.font,noAutotickangles:!0,outerTicks:!0};s(S,w,C,"linear"),n(S,w,C,"linear",P),a(S,w,C,"linear",P),t(S,w,C,P)}else c("title.align","center"),c("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},43480:function(ee,z,e){ee.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(ee,z,e){var M=e(33428),k=e(67756).qy,o=e(67756).Gz,T=e(3400),b=T.strScale,h=T.strTranslate,s=T.rad2deg,t=e(84284).MID_SHIFT,a=e(43616),n=e(12096),r=e(72736),i=e(54460),l=e(28336),u=e(37668),p=e(94724),c=e(76308),x={left:"start",center:"middle",right:"end"},d={left:0,center:.5,right:1},g=/[yzafpnmkMGTPEZY]/;function v(w){return w&&w.duration>0}function y(w){w.each(function(E){c.stroke(M.select(this),E.line.color)}).each(function(E){c.fill(M.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(w,E,O){var C=w._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:O,showline:!0},E),R={type:"linear",_id:"x"+E._id},j={letter:"x",font:C.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function D(N,W){return T.coerce(P,R,p,N,W)}return l(P,R,D,j,C),u(P,R,D,j),R}function _(w,E,O){return[Math.min(E/w.width,O/w.height),w,E+"x"+O]}function f(w,E,O,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),R=M.select(P);return R.text(w).attr("x",0).attr("y",0).attr("text-anchor",O).attr("data-unformatted",w).call(r.convertToTspans,C).call(a.font,E),a.bBox(R.node())}function S(w,E,O,C,P,R){var j="_cache"+E;w[j]&&w[j].key===P||(w[j]={key:P,value:O});var D=T.aggNums(R,null,[w[j].value,C],2);return w[j].value=D,D}ee.exports=function(w,E,O,C){var P,R=w._fullLayout;v(O)&&C&&(P=C()),T.makeTraceGroups(R._indicatorlayer,E,"trace").each(function(j){var D,N,W,F,V,U=j[0].trace,te=M.select(this),J=U._hasGauge,X=U._isAngular,K=U._isBullet,Q=U.domain,Z={w:R._size.w*(Q.x[1]-Q.x[0]),h:R._size.h*(Q.y[1]-Q.y[0]),l:R._size.l+R._size.w*Q.x[0],r:R._size.r+R._size.w*(1-Q.x[1]),t:R._size.t+R._size.h*(1-Q.y[1]),b:R._size.b+R._size.h*Q.y[0]},re=Z.l+Z.w/2,oe=Z.t+Z.h/2,ae=Math.min(Z.w/2,Z.h),ce=n.innerRadius*ae,he=U.align||"center";if(N=oe,J){if(X&&(D=re,N=oe+ae/2,W=function(se){return function(ie,fe){return[fe/Math.sqrt(ie.width/2*(ie.width/2)+ie.height*ie.height),ie,fe]}(se,.9*ce)}),K){var pe=n.bulletPadding,xe=1-n.bulletNumberDomainSize+pe;D=Z.l+(xe+(1-xe)*d[he])*Z.w,W=function(se){return _(se,(n.bulletNumberDomainSize-pe)*Z.w,Z.h)}}}else D=Z.l+d[he]*Z.w,W=function(se){return _(se,Z.w,Z.h)};(function(se,ie,fe,Ee){var Te,Ae,Se,Oe=fe[0].trace,De=Ee.numbersX,de=Ee.numbersY,me=Oe.align||"center",Me=x[me],ze=Ee.transitionOpts,Pe=Ee.onComplete,Ne=T.ensureSingle(ie,"g","numbers"),Ve=[];Oe._hasNumber&&Ve.push("number"),Oe._hasDelta&&(Ve.push("delta"),Oe.delta.position==="left"&&Ve.reverse());var Ye=Ne.selectAll("text").data(Ve);function at(Pt,Ot,At,He){if(!Pt.match("s")||At>=0==He>=0||Ot(At).slice(-1).match(g)||Ot(He).slice(-1).match(g))return Ot;var Ze=Pt.slice().replace("s","f").replace(/\d+/,function(Ge){return parseInt(Ge)-1}),Be=m(se,{tickformat:Ze});return function(Ge){return Math.abs(Ge)<1?i.tickText(Be,Ge).text:Ot(Ge)}}Ye.enter().append("text"),Ye.attr("text-anchor",function(){return Me}).attr("class",function(Pt){return Pt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ye.exit().remove();var rt,dt=Oe.mode+Oe.align;if(Oe._hasDelta&&(rt=function(){var Pt=m(se,{tickformat:Oe.delta.valueformat},Oe._range);Pt.setScale(),i.prepTicks(Pt);var Ot=function(Re){return i.tickText(Pt,Re).text},At=Oe.delta.suffix,He=Oe.delta.prefix,Ze=function(Re){return Oe.delta.relative?Re.relativeDelta:Re.delta},Be=function(Re,Fe){return Re===0||typeof Re!="number"||isNaN(Re)?"-":(Re>0?Oe.delta.increasing.symbol:Oe.delta.decreasing.symbol)+He+Fe(Re)+At},Ge=function(Re){return Re.delta>=0?Oe.delta.increasing.color:Oe.delta.decreasing.color};Oe._deltaLastValue===void 0&&(Oe._deltaLastValue=Ze(fe[0]));var it=Ne.select("text.delta");function tt(){it.text(Be(Ze(fe[0]),Ot)).call(c.fill,Ge(fe[0])).call(r.convertToTspans,se)}return it.call(a.font,Oe.delta.font).call(c.fill,Ge({delta:Oe._deltaLastValue})),v(ze)?it.transition().duration(ze.duration).ease(ze.easing).tween("text",function(){var Re=M.select(this),Fe=Ze(fe[0]),nt=Oe._deltaLastValue,We=at(Oe.delta.valueformat,Ot,nt,Fe),ct=o(nt,Fe);return Oe._deltaLastValue=Fe,function(pt){Re.text(Be(ct(pt),We)),Re.call(c.fill,Ge({delta:ct(pt)}))}}).each("end",function(){tt(),Pe&&Pe()}).each("interrupt",function(){tt(),Pe&&Pe()}):tt(),Ae=f(Be(Ze(fe[0]),Ot),Oe.delta.font,Me,se),it}(),dt+=Oe.delta.position+Oe.delta.font.size+Oe.delta.font.family+Oe.delta.valueformat,dt+=Oe.delta.increasing.symbol+Oe.delta.decreasing.symbol,Se=Ae),Oe._hasNumber&&(function(){var Pt=m(se,{tickformat:Oe.number.valueformat},Oe._range);Pt.setScale(),i.prepTicks(Pt);var Ot=function(Ge){return i.tickText(Pt,Ge).text},At=Oe.number.suffix,He=Oe.number.prefix,Ze=Ne.select("text.number");function Be(){var Ge=typeof fe[0].y=="number"?He+Ot(fe[0].y)+At:"-";Ze.text(Ge).call(a.font,Oe.number.font).call(r.convertToTspans,se)}v(ze)?Ze.transition().duration(ze.duration).ease(ze.easing).each("end",function(){Be(),Pe&&Pe()}).each("interrupt",function(){Be(),Pe&&Pe()}).attrTween("text",function(){var Ge=M.select(this),it=o(fe[0].lastY,fe[0].y);Oe._lastValue=fe[0].y;var tt=at(Oe.number.valueformat,Ot,fe[0].lastY,fe[0].y);return function(Re){Ge.text(He+tt(it(Re))+At)}}):Be(),Te=f(He+Ot(fe[0].y)+At,Oe.number.font,Me,se)}(),dt+=Oe.number.font.size+Oe.number.font.family+Oe.number.valueformat+Oe.number.suffix+Oe.number.prefix,Se=Te),Oe._hasDelta&&Oe._hasNumber){var vt,ht,et=[(Te.left+Te.right)/2,(Te.top+Te.bottom)/2],$e=[(Ae.left+Ae.right)/2,(Ae.top+Ae.bottom)/2],wt=.75*Oe.delta.font.size;Oe.delta.position==="left"&&(vt=S(Oe,"deltaPos",0,-1*(Te.width*d[Oe.align]+Ae.width*(1-d[Oe.align])+wt),dt,Math.min),ht=et[1]-$e[1],Se={width:Te.width+Ae.width+wt,height:Math.max(Te.height,Ae.height),left:Ae.left+vt,right:Te.right,top:Math.min(Te.top,Ae.top+ht),bottom:Math.max(Te.bottom,Ae.bottom+ht)}),Oe.delta.position==="right"&&(vt=S(Oe,"deltaPos",0,Te.width*(1-d[Oe.align])+Ae.width*d[Oe.align]+wt,dt,Math.max),ht=et[1]-$e[1],Se={width:Te.width+Ae.width+wt,height:Math.max(Te.height,Ae.height),left:Te.left,right:Ae.right+vt,top:Math.min(Te.top,Ae.top+ht),bottom:Math.max(Te.bottom,Ae.bottom+ht)}),Oe.delta.position==="bottom"&&(vt=null,ht=Ae.height,Se={width:Math.max(Te.width,Ae.width),height:Te.height+Ae.height,left:Math.min(Te.left,Ae.left),right:Math.max(Te.right,Ae.right),top:Te.bottom-Te.height,bottom:Te.bottom+Ae.height}),Oe.delta.position==="top"&&(vt=null,ht=Te.top,Se={width:Math.max(Te.width,Ae.width),height:Te.height+Ae.height,left:Math.min(Te.left,Ae.left),right:Math.max(Te.right,Ae.right),top:Te.bottom-Te.height-Ae.height,bottom:Te.bottom}),rt.attr({dx:vt,dy:ht})}(Oe._hasNumber||Oe._hasDelta)&&Ne.attr("transform",function(){var Pt=Ee.numbersScaler(Se);dt+=Pt[2];var Ot,At=S(Oe,"numbersScale",1,Pt[0],dt,Math.min);Oe._scaleNumbers||(At=1),Ot=Oe._isAngular?de-At*Se.bottom:de-At*(Se.top+Se.bottom)/2,Oe._numbersTop=At*Se.top+Ot;var He=Se[me];me==="center"&&(He=(Se.left+Se.right)/2);var Ze=De-At*He;return Ze=S(Oe,"numbersTranslate",0,Ze,dt,Math.max),h(Ze,Ot)+b(At)})})(w,te,j,{numbersX:D,numbersY:N,numbersScaler:W,transitionOpts:O,onComplete:P}),J&&(F={range:U.gauge.axis.range,color:U.gauge.bgcolor,line:{color:U.gauge.bordercolor,width:0},thickness:1},V={range:U.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:U.gauge.bordercolor,width:U.gauge.borderwidth},thickness:1});var be=te.selectAll("g.angular").data(X?j:[]);be.exit().remove();var ve=te.selectAll("g.angularaxis").data(X?j:[]);ve.exit().remove(),X&&function(se,ie,fe,Ee){var Te,Ae,Se,Oe,De=fe[0].trace,de=Ee.size,me=Ee.radius,Me=Ee.innerRadius,ze=Ee.gaugeBg,Pe=Ee.gaugeOutline,Ne=[de.l+de.w/2,de.t+de.h/2+me/2],Ve=Ee.gauge,Ye=Ee.layer,at=Ee.transitionOpts,rt=Ee.onComplete,dt=Math.PI/2;function vt(pt){var gt=De.gauge.axis.range[0],ut=(pt-gt)/(De.gauge.axis.range[1]-gt)*Math.PI-dt;return ut<-dt?-dt:ut>dt?dt:ut}function ht(pt){return M.svg.arc().innerRadius((Me+me)/2-pt/2*(me-Me)).outerRadius((Me+me)/2+pt/2*(me-Me)).startAngle(-dt)}function et(pt){pt.attr("d",function(gt){return ht(gt.thickness).startAngle(vt(gt.range[0])).endAngle(vt(gt.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",h(Ne[0],Ne[1])),Ye.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ye.selectAll("g.xangularaxistick,path,text").remove(),(Te=m(se,De.gauge.axis)).type="linear",Te.range=De.gauge.axis.range,Te._id="xangularaxis",Te.ticklabeloverflow="allow",Te.setScale();var $e=function(pt){return(Te.range[0]-pt.x)/(Te.range[1]-Te.range[0])*Math.PI+Math.PI},wt={},Pt=i.makeLabelFns(Te,0).labelStandoff;wt.xFn=function(pt){var gt=$e(pt);return Math.cos(gt)*Pt},wt.yFn=function(pt){var gt=$e(pt),ut=Math.sin(gt)>0?.2:1;return-Math.sin(gt)*(Pt+pt.fontSize*ut)+Math.abs(Math.cos(gt))*(pt.fontSize*t)},wt.anchorFn=function(pt){var gt=$e(pt),ut=Math.cos(gt);return Math.abs(ut)<.1?"middle":ut>0?"start":"end"},wt.heightFn=function(pt,gt,ut){var kt=$e(pt);return-.5*(1+Math.sin(kt))*ut};var Ot=function(pt){return h(Ne[0]+me*Math.cos(pt),Ne[1]-me*Math.sin(pt))};if(Se=function(pt){return Ot($e(pt))},Ae=i.calcTicks(Te),Oe=i.getTickSigns(Te)[2],Te.visible){Oe=Te.ticks==="inside"?-1:1;var At=(Te.linewidth||1)/2;i.drawTicks(se,Te,{vals:Ae,layer:Ye,path:"M"+Oe*At+",0h"+Oe*Te.ticklen,transFn:function(pt){var gt=$e(pt);return Ot(gt)+"rotate("+-s(gt)+")"}}),i.drawLabels(se,Te,{vals:Ae,layer:Ye,transFn:Se,labelFns:wt})}var He=[ze].concat(De.gauge.steps),Ze=Ve.selectAll("g.bg-arc").data(He);Ze.enter().append("g").classed("bg-arc",!0).append("path"),Ze.select("path").call(et).call(y),Ze.exit().remove();var Be=ht(De.gauge.bar.thickness),Ge=Ve.selectAll("g.value-arc").data([De.gauge.bar]);Ge.enter().append("g").classed("value-arc",!0).append("path");var it,tt,Re,Fe=Ge.select("path");v(at)?(Fe.transition().duration(at.duration).ease(at.easing).each("end",function(){rt&&rt()}).each("interrupt",function(){rt&&rt()}).attrTween("d",(it=Be,tt=vt(fe[0].lastY),Re=vt(fe[0].y),function(){var pt=k(tt,Re);return function(gt){return it.endAngle(pt(gt))()}})),De._lastValue=fe[0].y):Fe.attr("d",typeof fe[0].y=="number"?Be.endAngle(vt(fe[0].y)):"M0,0Z"),Fe.call(y),Ge.exit().remove(),He=[];var nt=De.gauge.threshold.value;(nt||nt===0)&&He.push({range:[nt,nt],color:De.gauge.threshold.color,line:{color:De.gauge.threshold.line.color,width:De.gauge.threshold.line.width},thickness:De.gauge.threshold.thickness});var We=Ve.selectAll("g.threshold-arc").data(He);We.enter().append("g").classed("threshold-arc",!0).append("path"),We.select("path").call(et).call(y),We.exit().remove();var ct=Ve.selectAll("g.gauge-outline").data([Pe]);ct.enter().append("g").classed("gauge-outline",!0).append("path"),ct.select("path").call(et).call(y),ct.exit().remove()}(w,0,j,{radius:ae,innerRadius:ce,gauge:be,layer:ve,size:Z,gaugeBg:F,gaugeOutline:V,transitionOpts:O,onComplete:P});var ge=te.selectAll("g.bullet").data(K?j:[]);ge.exit().remove();var we=te.selectAll("g.bulletaxis").data(K?j:[]);we.exit().remove(),K&&function(se,ie,fe,Ee){var Te,Ae,Se,Oe,De,de=fe[0].trace,me=Ee.gauge,Me=Ee.layer,ze=Ee.gaugeBg,Pe=Ee.gaugeOutline,Ne=Ee.size,Ve=de.domain,Ye=Ee.transitionOpts,at=Ee.onComplete;me.enter().append("g").classed("bullet",!0),me.attr("transform",h(Ne.l,Ne.t)),Me.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Me.selectAll("g.xbulletaxistick,path,text").remove();var rt=Ne.h,dt=de.gauge.bar.thickness*rt,vt=Ve.x[0],ht=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(de._hasNumber||de._hasDelta?1-n.bulletNumberDomainSize:1);function et(Ze){Ze.attr("width",function(Be){return Math.max(0,Te.c2p(Be.range[1])-Te.c2p(Be.range[0]))}).attr("x",function(Be){return Te.c2p(Be.range[0])}).attr("y",function(Be){return .5*(1-Be.thickness)*rt}).attr("height",function(Be){return Be.thickness*rt})}(Te=m(se,de.gauge.axis))._id="xbulletaxis",Te.domain=[vt,ht],Te.setScale(),Ae=i.calcTicks(Te),Se=i.makeTransTickFn(Te),Oe=i.getTickSigns(Te)[2],De=Ne.t+Ne.h,Te.visible&&(i.drawTicks(se,Te,{vals:Te.ticks==="inside"?i.clipEnds(Te,Ae):Ae,layer:Me,path:i.makeTickPath(Te,De,Oe),transFn:Se}),i.drawLabels(se,Te,{vals:Ae,layer:Me,transFn:Se,labelFns:i.makeLabelFns(Te,De)}));var $e=[ze].concat(de.gauge.steps),wt=me.selectAll("g.bg-bullet").data($e);wt.enter().append("g").classed("bg-bullet",!0).append("rect"),wt.select("rect").call(et).call(y),wt.exit().remove();var Pt=me.selectAll("g.value-bullet").data([de.gauge.bar]);Pt.enter().append("g").classed("value-bullet",!0).append("rect"),Pt.select("rect").attr("height",dt).attr("y",(rt-dt)/2).call(y),v(Ye)?Pt.select("rect").transition().duration(Ye.duration).ease(Ye.easing).each("end",function(){at&&at()}).each("interrupt",function(){at&&at()}).attr("width",Math.max(0,Te.c2p(Math.min(de.gauge.axis.range[1],fe[0].y)))):Pt.select("rect").attr("width",typeof fe[0].y=="number"?Math.max(0,Te.c2p(Math.min(de.gauge.axis.range[1],fe[0].y))):0),Pt.exit().remove();var Ot=fe.filter(function(){return de.gauge.threshold.value||de.gauge.threshold.value===0}),At=me.selectAll("g.threshold-bullet").data(Ot);At.enter().append("g").classed("threshold-bullet",!0).append("line"),At.select("line").attr("x1",Te.c2p(de.gauge.threshold.value)).attr("x2",Te.c2p(de.gauge.threshold.value)).attr("y1",(1-de.gauge.threshold.thickness)/2*rt).attr("y2",(1-(1-de.gauge.threshold.thickness)/2)*rt).call(c.stroke,de.gauge.threshold.line.color).style("stroke-width",de.gauge.threshold.line.width),At.exit().remove();var He=me.selectAll("g.gauge-outline").data([Pe]);He.enter().append("g").classed("gauge-outline",!0).append("rect"),He.select("rect").call(et).call(y),He.exit().remove()}(w,0,j,{gauge:ge,layer:we,size:Z,gaugeBg:F,gaugeOutline:V,transitionOpts:O,onComplete:P});var _e=te.selectAll("text.title").data(j);_e.exit().remove(),_e.enter().append("text").classed("title",!0),_e.attr("text-anchor",function(){return K?x.right:x[U.title.align]}).text(U.title.text).call(a.font,U.title.font).call(r.convertToTspans,w),_e.attr("transform",function(){var se,ie=Z.l+Z.w*d[U.title.align],fe=n.titlePadding,Ee=a.bBox(_e.node());return J?(X&&(se=U.gauge.axis.visible?a.bBox(ve.node()).top-fe-Ee.bottom:Z.t+Z.h/2-ae/2-Ee.bottom-fe),K&&(se=N-(Ee.top+Ee.bottom)/2,ie=Z.l-n.bulletPadding*Z.w)):se=U._numbersTop-fe-Ee.bottom,h(ie,se)})})}},50048:function(ee,z,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),h=e(92880).extendFlat,s=e(67824).overrideAll,t=ee.exports=s(h({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:h({},b.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:h({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(ee,z,e){var M=e(47128),k=e(3832).processGrid,o=e(3832).filter;ee.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=o(b.x,b._len),b._y=o(b.y,b._len),b._z=o(b.z,b._len),b._value=o(b.value,b._len);var h=k(b);b._gridFill=h.fill,b._Xs=h.Xs,b._Ys=h.Ys,b._Zs=h.Zs,b._len=h.len;for(var s=1/0,t=-1/0,a=0;a<b._len;a++){var n=b._value[a];s=Math.min(s,n),t=Math.max(t,n)}b._minValues=s,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?s:b.isomin,b._vMax=b.isomax===void 0||b.isomin===null?t:b.isomax,M(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},31460:function(ee,z,e){var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,h=e(52094),s=function(i,l){for(var u=l.length-1;u>0;u--){var p=Math.min(l[u],l[u-1]),c=Math.max(l[u],l[u-1]);if(c>p&&p<i&&i<=c)return{id:u,distRatio:(c-i)/(c-p)}}return{id:0,distRatio:0}};function t(i,l,u){this.scene=i,this.uid=u,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var a=t.prototype;a.handlePick=function(i){if(i.object===this.mesh){var l=i.data.index,u=this.data._meshX[l],p=this.data._meshY[l],c=this.data._meshZ[l],x=this.data._Ys.length,d=this.data._Zs.length,g=s(u,this.data._Xs).id,v=s(p,this.data._Ys).id,y=s(c,this.data._Zs).id,m=i.index=y+d*v+d*x*g;i.traceCoordinate=[this.data._meshX[m],this.data._meshY[m],this.data._meshZ[m],this.data._value[m]];var _=this.data.hovertext||this.data.text;return o(_)&&_[m]!==void 0?i.textLabel=_[m]:_&&(i.textLabel=_),!0}},a.update=function(i){var l=this.scene,u=l.fullSceneLayout;function p(d,g,v,y){return g.map(function(m){return d.d2l(m,0,y)*v})}this.data=r(i);var c={positions:h(p(u.xaxis,i._meshX,l.dataScale[0],i.xcalendar),p(u.yaxis,i._meshY,l.dataScale[1],i.ycalendar),p(u.zaxis,i._meshZ,l.dataScale[2],i.zcalendar)),cells:h(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:T(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},x=b(i);c.vertexIntensity=i._meshIntensity,c.vertexIntensityBounds=[x.min,x.max],c.colormap=k(i),this.mesh.update(c)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(i){i._meshI=[],i._meshJ=[],i._meshK=[];var l,u,p,c,x,d,g,v=i.surface.show,y=i.spaceframe.show,m=i.surface.fill,_=i.spaceframe.fill,f=!1,S=!1,w=0,E=i._Xs,O=i._Ys,C=i._Zs,P=E.length,R=O.length,j=C.length,D=n.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),N=function(Me,ze,Pe){switch(D){case 5:return Pe+j*ze+j*R*Me;case 4:return Pe+j*Me+j*P*ze;case 3:return ze+R*Pe+R*j*Me;case 2:return ze+R*Me+R*P*Pe;case 1:return Me+P*Pe+P*j*ze;default:return Me+P*ze+P*R*Pe}},W=i._minValues,F=i._maxValues,V=i._vMin,U=i._vMax;function te(Me,ze,Pe){for(var Ne=d.length,Ve=u;Ve<Ne;Ve++)if(Me===p[Ve]&&ze===c[Ve]&&Pe===x[Ve])return Ve;return-1}function J(){u=l}function X(){p=[],c=[],x=[],d=[],l=0,J()}function K(Me,ze,Pe,Ne){return p.push(Me),c.push(ze),x.push(Pe),d.push(Ne),++l-1}function Q(Me,ze,Pe){for(var Ne=[],Ve=0;Ve<Me.length;Ve++)Ne[Ve]=Me[Ve]*(1-Pe)+Pe*ze[Ve];return Ne}function Z(Me){g=Me}function re(Me,ze){return Me==="all"||Me===null||Me.indexOf(ze)>-1}function oe(Me,ze){return Me===null?ze:Me}function ae(Me,ze,Pe){J();var Ne,Ve,Ye,at=[ze],rt=[Pe];if(g>=1)at=[ze],rt=[Pe];else if(g>0){var dt=function(He,Ze){var Be=He[0],Ge=He[1],it=He[2],tt=function(ut,kt,yt){for(var Mt=[],Lt=0;Lt<ut.length;Lt++)Mt[Lt]=(ut[Lt]+kt[Lt]+yt[Lt])/3;return Mt}(Be,Ge,it),Re=Math.sqrt(1-g),Fe=Q(tt,Be,Re),nt=Q(tt,Ge,Re),We=Q(tt,it,Re),ct=Ze[0],pt=Ze[1],gt=Ze[2];return{xyzv:[[Be,Ge,nt],[nt,Fe,Be],[Ge,it,We],[We,nt,Ge],[it,Be,Fe],[Fe,We,it]],abc:[[ct,pt,-1],[-1,-1,ct],[pt,gt,-1],[-1,-1,pt],[gt,ct,-1],[-1,-1,gt]]}}(ze,Pe);at=dt.xyzv,rt=dt.abc}for(var vt=0;vt<at.length;vt++){ze=at[vt],Pe=rt[vt];for(var ht=[],et=0;et<3;et++){var $e=ze[et][0],wt=ze[et][1],Pt=ze[et][2],Ot=ze[et][3],At=Pe[et]>-1?Pe[et]:te($e,wt,Pt);ht[et]=At>-1?At:K($e,wt,Pt,oe(Me,Ot))}Ne=ht[0],Ve=ht[1],Ye=ht[2],i._meshI.push(Ne),i._meshJ.push(Ve),i._meshK.push(Ye),++w}}function ce(Me,ze,Pe,Ne){var Ve=Me[3];Ve<Pe&&(Ve=Pe),Ve>Ne&&(Ve=Ne);for(var Ye=(Me[3]-Ve)/(Me[3]-ze[3]+1e-9),at=[],rt=0;rt<4;rt++)at[rt]=(1-Ye)*Me[rt]+Ye*ze[rt];return at}function he(Me,ze,Pe){return Me>=ze&&Me<=Pe}function pe(Me){var ze=.001*(U-V);return Me>=V-ze&&Me<=U+ze}function xe(Me){for(var ze=[],Pe=0;Pe<4;Pe++){var Ne=Me[Pe];ze.push([i._x[Ne],i._y[Ne],i._z[Ne],i._value[Ne]])}return ze}var be=3;function ve(Me,ze,Pe,Ne,Ve,Ye){Ye||(Ye=1),Pe=[-1,-1,-1];var at=!1,rt=[he(ze[0][3],Ne,Ve),he(ze[1][3],Ne,Ve),he(ze[2][3],Ne,Ve)];if(!rt[0]&&!rt[1]&&!rt[2])return!1;var dt=function(ht,et,$e){return pe(et[0][3])&&pe(et[1][3])&&pe(et[2][3])?(ae(ht,et,$e),!0):Ye<be&&ve(ht,et,$e,V,U,++Ye)};if(rt[0]&&rt[1]&&rt[2])return dt(Me,ze,Pe)||at;var vt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ht){if(rt[ht[0]]&&rt[ht[1]]&&!rt[ht[2]]){var et=ze[ht[0]],$e=ze[ht[1]],wt=ze[ht[2]],Pt=ce(wt,et,Ne,Ve),Ot=ce(wt,$e,Ne,Ve);at=dt(Me,[Ot,Pt,et],[-1,-1,Pe[ht[0]]])||at,at=dt(Me,[et,$e,Ot],[Pe[ht[0]],Pe[ht[1]],-1])||at,vt=!0}}),vt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ht){if(rt[ht[0]]&&!rt[ht[1]]&&!rt[ht[2]]){var et=ze[ht[0]],$e=ze[ht[1]],wt=ze[ht[2]],Pt=ce($e,et,Ne,Ve),Ot=ce(wt,et,Ne,Ve);at=dt(Me,[Ot,Pt,et],[-1,-1,Pe[ht[0]]])||at,vt=!0}}),at}function ge(Me,ze,Pe,Ne){var Ve=!1,Ye=xe(ze),at=[he(Ye[0][3],Pe,Ne),he(Ye[1][3],Pe,Ne),he(Ye[2][3],Pe,Ne),he(Ye[3][3],Pe,Ne)];if(!(at[0]||at[1]||at[2]||at[3]))return Ve;if(at[0]&&at[1]&&at[2]&&at[3])return S&&(Ve=function(dt,vt,ht){var et=function($e,wt,Pt){ae(dt,[vt[$e],vt[wt],vt[Pt]],[ht[$e],ht[wt],ht[Pt]])};et(0,1,2),et(3,0,1),et(2,3,0),et(1,2,3)}(Me,Ye,ze)||Ve),Ve;var rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(dt){if(at[dt[0]]&&at[dt[1]]&&at[dt[2]]&&!at[dt[3]]){var vt=Ye[dt[0]],ht=Ye[dt[1]],et=Ye[dt[2]],$e=Ye[dt[3]];if(S)Ve=ae(Me,[vt,ht,et],[ze[dt[0]],ze[dt[1]],ze[dt[2]]])||Ve;else{var wt=ce($e,vt,Pe,Ne),Pt=ce($e,ht,Pe,Ne),Ot=ce($e,et,Pe,Ne);Ve=ae(null,[wt,Pt,Ot],[-1,-1,-1])||Ve}rt=!0}}),rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(dt){if(at[dt[0]]&&at[dt[1]]&&!at[dt[2]]&&!at[dt[3]]){var vt=Ye[dt[0]],ht=Ye[dt[1]],et=Ye[dt[2]],$e=Ye[dt[3]],wt=ce(et,vt,Pe,Ne),Pt=ce(et,ht,Pe,Ne),Ot=ce($e,ht,Pe,Ne),At=ce($e,vt,Pe,Ne);S?(Ve=ae(Me,[vt,At,wt],[ze[dt[0]],-1,-1])||Ve,Ve=ae(Me,[ht,Pt,Ot],[ze[dt[1]],-1,-1])||Ve):Ve=function(He,Ze,Be){var Ge=function(it,tt,Re){ae(null,[Ze[it],Ze[tt],Ze[Re]],[Be[it],Be[tt],Be[Re]])};Ge(0,1,2),Ge(2,3,0)}(0,[wt,Pt,Ot,At],[-1,-1,-1,-1])||Ve,rt=!0}}),rt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(dt){if(at[dt[0]]&&!at[dt[1]]&&!at[dt[2]]&&!at[dt[3]]){var vt=Ye[dt[0]],ht=Ye[dt[1]],et=Ye[dt[2]],$e=Ye[dt[3]],wt=ce(ht,vt,Pe,Ne),Pt=ce(et,vt,Pe,Ne),Ot=ce($e,vt,Pe,Ne);S?(Ve=ae(Me,[vt,wt,Pt],[ze[dt[0]],-1,-1])||Ve,Ve=ae(Me,[vt,Pt,Ot],[ze[dt[0]],-1,-1])||Ve,Ve=ae(Me,[vt,Ot,wt],[ze[dt[0]],-1,-1])||Ve):Ve=ae(null,[wt,Pt,Ot],[-1,-1,-1])||Ve,rt=!0}})),Ve}function we(Me,ze,Pe,Ne,Ve,Ye,at,rt,dt,vt,ht){var et=!1;return f&&(re(Me,"A")&&(et=ge(null,[ze,Pe,Ne,Ye],vt,ht)||et),re(Me,"B")&&(et=ge(null,[Pe,Ne,Ve,dt],vt,ht)||et),re(Me,"C")&&(et=ge(null,[Pe,Ye,at,dt],vt,ht)||et),re(Me,"D")&&(et=ge(null,[Ne,Ye,rt,dt],vt,ht)||et),re(Me,"E")&&(et=ge(null,[Pe,Ne,Ye,dt],vt,ht)||et)),S&&(et=ge(Me,[Pe,Ne,Ye,dt],vt,ht)||et),et}function _e(Me,ze,Pe,Ne,Ve,Ye,at,rt){return[rt[0]===!0||ve(Me,xe([ze,Pe,Ne]),[ze,Pe,Ne],Ye,at),rt[1]===!0||ve(Me,xe([Ne,Ve,ze]),[Ne,Ve,ze],Ye,at)]}function se(Me,ze,Pe,Ne,Ve,Ye,at,rt,dt){return rt?_e(Me,ze,Pe,Ve,Ne,Ye,at,dt):_e(Me,Pe,Ve,Ne,ze,Ye,at,dt)}function ie(Me,ze,Pe,Ne,Ve,Ye,at){var rt,dt,vt,ht,et=!1,$e=function(){et=ve(Me,[rt,dt,vt],[-1,-1,-1],Ve,Ye)||et,et=ve(Me,[vt,ht,rt],[-1,-1,-1],Ve,Ye)||et},wt=at[0],Pt=at[1],Ot=at[2];return wt&&(rt=Q(xe([N(ze,Pe-0,Ne-0)])[0],xe([N(ze-1,Pe-0,Ne-0)])[0],wt),dt=Q(xe([N(ze,Pe-0,Ne-1)])[0],xe([N(ze-1,Pe-0,Ne-1)])[0],wt),vt=Q(xe([N(ze,Pe-1,Ne-1)])[0],xe([N(ze-1,Pe-1,Ne-1)])[0],wt),ht=Q(xe([N(ze,Pe-1,Ne-0)])[0],xe([N(ze-1,Pe-1,Ne-0)])[0],wt),$e()),Pt&&(rt=Q(xe([N(ze-0,Pe,Ne-0)])[0],xe([N(ze-0,Pe-1,Ne-0)])[0],Pt),dt=Q(xe([N(ze-0,Pe,Ne-1)])[0],xe([N(ze-0,Pe-1,Ne-1)])[0],Pt),vt=Q(xe([N(ze-1,Pe,Ne-1)])[0],xe([N(ze-1,Pe-1,Ne-1)])[0],Pt),ht=Q(xe([N(ze-1,Pe,Ne-0)])[0],xe([N(ze-1,Pe-1,Ne-0)])[0],Pt),$e()),Ot&&(rt=Q(xe([N(ze-0,Pe-0,Ne)])[0],xe([N(ze-0,Pe-0,Ne-1)])[0],Ot),dt=Q(xe([N(ze-0,Pe-1,Ne)])[0],xe([N(ze-0,Pe-1,Ne-1)])[0],Ot),vt=Q(xe([N(ze-1,Pe-1,Ne)])[0],xe([N(ze-1,Pe-1,Ne-1)])[0],Ot),ht=Q(xe([N(ze-1,Pe-0,Ne)])[0],xe([N(ze-1,Pe-0,Ne-1)])[0],Ot),$e()),et}function fe(Me,ze,Pe,Ne,Ve,Ye,at,rt,dt,vt,ht,et){var $e=Me;return et?(f&&Me==="even"&&($e=null),we($e,ze,Pe,Ne,Ve,Ye,at,rt,dt,vt,ht)):(f&&Me==="odd"&&($e=null),we($e,dt,rt,at,Ye,Ve,Ne,Pe,ze,vt,ht))}function Ee(Me,ze,Pe,Ne,Ve){for(var Ye=[],at=0,rt=0;rt<ze.length;rt++)for(var dt=ze[rt],vt=1;vt<j;vt++)for(var ht=1;ht<R;ht++)Ye.push(se(Me,N(dt,ht-1,vt-1),N(dt,ht-1,vt),N(dt,ht,vt-1),N(dt,ht,vt),Pe,Ne,(dt+ht+vt)%2,Ve&&Ve[at]?Ve[at]:[])),at++;return Ye}function Te(Me,ze,Pe,Ne,Ve){for(var Ye=[],at=0,rt=0;rt<ze.length;rt++)for(var dt=ze[rt],vt=1;vt<P;vt++)for(var ht=1;ht<j;ht++)Ye.push(se(Me,N(vt-1,dt,ht-1),N(vt,dt,ht-1),N(vt-1,dt,ht),N(vt,dt,ht),Pe,Ne,(vt+dt+ht)%2,Ve&&Ve[at]?Ve[at]:[])),at++;return Ye}function Ae(Me,ze,Pe,Ne,Ve){for(var Ye=[],at=0,rt=0;rt<ze.length;rt++)for(var dt=ze[rt],vt=1;vt<R;vt++)for(var ht=1;ht<P;ht++)Ye.push(se(Me,N(ht-1,vt-1,dt),N(ht-1,vt,dt),N(ht,vt-1,dt),N(ht,vt,dt),Pe,Ne,(ht+vt+dt)%2,Ve&&Ve[at]?Ve[at]:[])),at++;return Ye}function Se(Me,ze,Pe){for(var Ne=1;Ne<j;Ne++)for(var Ve=1;Ve<R;Ve++)for(var Ye=1;Ye<P;Ye++)fe(Me,N(Ye-1,Ve-1,Ne-1),N(Ye-1,Ve-1,Ne),N(Ye-1,Ve,Ne-1),N(Ye-1,Ve,Ne),N(Ye,Ve-1,Ne-1),N(Ye,Ve-1,Ne),N(Ye,Ve,Ne-1),N(Ye,Ve,Ne),ze,Pe,(Ye+Ve+Ne)%2)}function Oe(Me,ze,Pe,Ne,Ve,Ye){for(var at=[],rt=0,dt=0;dt<ze.length;dt++)for(var vt=ze[dt],ht=1;ht<j;ht++)for(var et=1;et<R;et++)at.push(ie(Me,vt,et,ht,Pe,Ne,Ve[dt],Ye&&Ye[rt]&&Ye[rt])),rt++;return at}function De(Me,ze,Pe,Ne,Ve,Ye){for(var at=[],rt=0,dt=0;dt<ze.length;dt++)for(var vt=ze[dt],ht=1;ht<P;ht++)for(var et=1;et<j;et++)at.push(ie(Me,ht,vt,et,Pe,Ne,Ve[dt],Ye&&Ye[rt]&&Ye[rt])),rt++;return at}function de(Me,ze,Pe,Ne,Ve,Ye){for(var at=[],rt=0,dt=0;dt<ze.length;dt++)for(var vt=ze[dt],ht=1;ht<R;ht++)for(var et=1;et<P;et++)at.push(ie(Me,et,ht,vt,Pe,Ne,Ve[dt],Ye&&Ye[rt]&&Ye[rt])),rt++;return at}function me(Me,ze){for(var Pe=[],Ne=Me;Ne<ze;Ne++)Pe.push(Ne);return Pe}return function(){X(),function(){for(var dt=0;dt<P;dt++)for(var vt=0;vt<R;vt++)for(var ht=0;ht<j;ht++){var et=N(dt,vt,ht);K(i._x[et],i._y[et],i._z[et],i._value[et])}}();var Me=null;if(y&&_&&(Z(_),S=!0,Se(Me,V,U),S=!1),v&&m){Z(m);for(var ze=i.surface.pattern,Pe=i.surface.count,Ne=0;Ne<Pe;Ne++){var Ve=Pe===1?.5:Ne/(Pe-1),Ye=(1-Ve)*V+Ve*U,at=Math.abs(Ye-W)>Math.abs(Ye-F)?[W,Ye]:[Ye,F];f=!0,Se(ze,at[0],at[1]),f=!1}}var rt=[[Math.min(V,F),Math.max(V,F)],[Math.min(W,U),Math.max(W,U)]];["x","y","z"].forEach(function(dt){for(var vt=[],ht=0;ht<rt.length;ht++){var et=0,$e=rt[ht][0],wt=rt[ht][1],Pt=i.slices[dt];if(Pt.show&&Pt.fill){Z(Pt.fill);var Ot=[],At=[],He=[];if(Pt.locations.length)for(var Ze=0;Ze<Pt.locations.length;Ze++){var Be=s(Pt.locations[Ze],dt==="x"?E:dt==="y"?O:C);Be.distRatio===0?Ot.push(Be.id):Be.id>0&&(At.push(Be.id),dt==="x"?He.push([Be.distRatio,0,0]):dt==="y"?He.push([0,Be.distRatio,0]):He.push([0,0,Be.distRatio]))}else Ot=me(1,dt==="x"?P-1:dt==="y"?R-1:j-1);At.length>0&&(vt[et]=dt==="x"?Oe(Me,At,$e,wt,He,vt[et]):dt==="y"?De(Me,At,$e,wt,He,vt[et]):de(Me,At,$e,wt,He,vt[et]),et++),Ot.length>0&&(vt[et]=dt==="x"?Ee(Me,Ot,$e,wt,vt[et]):dt==="y"?Te(Me,Ot,$e,wt,vt[et]):Ae(Me,Ot,$e,wt,vt[et]),et++)}var Ge=i.caps[dt];Ge.show&&Ge.fill&&(Z(Ge.fill),vt[et]=dt==="x"?Ee(Me,[0,P-1],$e,wt,vt[et]):dt==="y"?Te(Me,[0,R-1],$e,wt,vt[et]):Ae(Me,[0,j-1],$e,wt,vt[et]),et++)}}),w===0&&X(),i._meshX=p,i._meshY=c,i._meshZ=x,i._meshIntensity=d,i._Xs=E,i._Ys=O,i._Zs=C}(),i}ee.exports={findNearestOnAxis:s,generateIsoMeshes:r,createIsosurfaceTrace:function(i,l){var u=i.glplot.gl,p=M({gl:u}),c=new t(i,p,l.uid);return p._trace=c,c.update(l),i.glplot.add(p),c}}},70548:function(ee,z,e){var M=e(3400),k=e(24040),o=e(50048),T=e(27260);function b(h,s,t,a,n){var r=n("isomin"),i=n("isomax");i!=null&&r!=null&&r>i&&(s.isomin=null,s.isomax=null);var l=n("x"),u=n("y"),p=n("z"),c=n("value");l&&l.length&&u&&u.length&&p&&p.length&&c&&c.length?(k.getComponentMethod("calendars","handleTraceDefaults")(h,s,["x","y","z"],a),n("valuehoverformat"),["x","y","z"].forEach(function(x){n(x+"hoverformat");var d="caps."+x;n(d+".show")&&n(d+".fill");var g="slices."+x;n(g+".show")&&(n(g+".fill"),n(g+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){n(x)}),T(h,s,a,n,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}ee.exports={supplyDefaults:function(h,s,t,a){b(h,s,0,a,function(n,r){return M.coerce(h,s,o,n,r)})},supplyIsoDefaults:b}},6296:function(ee,z,e){ee.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(ee,z,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(16716),b=e(45464),h=e(92880).extendFlat;ee.exports=h({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:h({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:h({},T.lightposition.x,{dflt:1e5}),y:h({},T.lightposition.y,{dflt:1e5}),z:h({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:h({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:h({},b.hoverinfo,{editType:"calc"}),showlegend:h({},b.showlegend,{dflt:!1})})},1876:function(ee,z,e){var M=e(47128);ee.exports=function(k,o){o.intensity&&M(k,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},576:function(ee,z,e){var M=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,o=e(67792).alpha_shape,T=e(67792).convex_hull,b=e(33040).parseColorScale,h=e(3400).isArrayOrTypedArray,s=e(43080),t=e(8932).extractOpts,a=e(52094);function n(c,x,d){this.scene=c,this.uid=d,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=n.prototype;function i(c){for(var x=[],d=c.length,g=0;g<d;g++)x[g]=s(c[g]);return x}function l(c,x,d,g){for(var v=[],y=x.length,m=0;m<y;m++)v[m]=c.d2l(x[m],0,g)*d;return v}function u(c){for(var x=[],d=c.length,g=0;g<d;g++)x[g]=Math.round(c[g]);return x}function p(c,x){for(var d=c.length,g=0;g<d;g++)if(c[g]<=-.5||c[g]>=x-.5)return!1;return!0}r.handlePick=function(c){if(c.object===this.mesh){var x=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var d=this.data.hovertext||this.data.text;return h(d)&&d[x]!==void 0?c.textLabel=d[x]:d&&(c.textLabel=d),!0}},r.update=function(c){var x=this.scene,d=x.fullSceneLayout;this.data=c;var g,v=c.x.length,y=a(l(d.xaxis,c.x,x.dataScale[0],c.xcalendar),l(d.yaxis,c.y,x.dataScale[1],c.ycalendar),l(d.zaxis,c.z,x.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!p(c.i,v)||!p(c.j,v)||!p(c.k,v))return;g=a(u(c.i),u(c.j),u(c.k))}else g=c.alphahull===0?T(y):c.alphahull>0?o(c.alphahull,y):function(S,w){for(var E=["x","y","z"].indexOf(S),O=[],C=w.length,P=0;P<C;P++)O[P]=[w[P][(E+1)%3],w[P][(E+2)%3]];return k(O)}(c.delaunayaxis,y);var m={positions:y,cells:g,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:s(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var _=t(c);this.color="#fff";var f=c.intensitymode;m[f+"Intensity"]=c.intensity,m[f+"IntensityBounds"]=[_.min,_.max],m.colormap=b(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],m.vertexColors=i(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],m.cellColors=i(c.facecolor)):(this.color=c.color,m.meshColor=s(c.color));this.mesh.update(m)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(c,x){var d=c.glplot.gl,g=M({gl:d}),v=new n(c,g,x.uid);return g._trace=v,v.update(x),c.glplot.add(g),v}},74212:function(ee,z,e){var M=e(24040),k=e(3400),o=e(27260),T=e(52948);ee.exports=function(b,h,s,t){function a(r,i){return k.coerce(b,h,T,r,i)}function n(r){var i=r.map(function(l){var u=a(l);return u&&k.isArrayOrTypedArray(u)?u:null});return i.every(function(l){return l&&l.length===i[0].length})&&i}n(["x","y","z"])?(n(["i","j","k"]),(!h.i||h.j&&h.k)&&(!h.j||h.k&&h.i)&&(!h.k||h.i&&h.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(b,h,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){a(r)}),a("contour.show")&&(a("contour.color"),a("contour.width")),"intensity"in b?(a("intensity"),a("intensitymode"),o(b,h,t,a,{prefix:"",cLetter:"c"})):(h.showscale=!1,"facecolor"in b?a("facecolor"):"vertexcolor"in b?a("vertexcolor"):a("color",s)),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),h._length=null):h.visible=!1):h.visible=!1}},7404:function(ee,z,e){ee.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(ee,z,e){var M=e(3400).extendFlat,k=e(52904),o=e(29736).axisHoverFormat,T=e(98192).u,b=e(55756),h=e(48164),s=h.INCREASING.COLOR,t=h.DECREASING.COLOR,a=k.line;function n(r){return{line:{color:M({},a.color,{dflt:r}),width:a.width,dash:T,editType:"style"},editType:"style"}}ee.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},a.width,{}),dash:M({},T,{}),editType:"style"},increasing:n(s),decreasing:n(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:k.zorder}},42812:function(ee,z,e){var M=e(3400),k=M._,o=e(54460),T=e(1220),b=e(39032).BADNUM;function h(t,a,n,r){return{o:t,h:a,l:n,c:r}}function s(t,a,n,r,i,l){for(var u=i.makeCalcdata(a,"open"),p=i.makeCalcdata(a,"high"),c=i.makeCalcdata(a,"low"),x=i.makeCalcdata(a,"close"),d=M.isArrayOrTypedArray(a.text),g=M.isArrayOrTypedArray(a.hovertext),v=!0,y=null,m=!!a.xperiodalignment,_=[],f=0;f<r.length;f++){var S=r[f],w=u[f],E=p[f],O=c[f],C=x[f];if(S!==b&&w!==b&&E!==b&&O!==b&&C!==b){C===w?y!==null&&C!==y&&(v=C>y):v=C>w,y=C;var P=l(w,E,O,C);P.pos=S,P.yc=(w+C)/2,P.i=f,P.dir=v?"increasing":"decreasing",P.x=P.pos,P.y=[O,E],m&&(P.orig_p=n[f]),d&&(P.tx=a.text[f]),g&&(P.htx=a.hovertext[f]),_.push(P)}else _.push({pos:S,empty:!0})}return a._extremes[i._id]=o.findExtremes(i,M.concat(c,p),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}ee.exports={calc:function(t,a){var n=o.getFromId(t,a.xaxis),r=o.getFromId(t,a.yaxis),i=function(x,d,g){var v=g._minDiff;if(!v){var y,m=x._fullData,_=[];for(v=1/0,y=0;y<m.length;y++){var f=m[y];if(f.type==="ohlc"&&f.visible===!0&&f.xaxis===d._id){_.push(f);var S=d.makeCalcdata(f,"x");f._origX=S;var w=T(g,d,"x",S).vals;f._xcalc=w;var E=M.distinctVals(w).minDiff;E&&isFinite(E)&&(v=Math.min(v,E))}}for(v===1/0&&(v=1),y=0;y<_.length;y++)_[y]._minDiff=v}return v*g.tickwidth}(t,n,a),l=a._minDiff;a._minDiff=null;var u=a._origX;a._origX=null;var p=a._xcalc;a._xcalc=null;var c=s(t,a,u,p,r,h);return a._extremes[n._id]=o.findExtremes(n,p,{vpad:l/2}),c.length?(M.extendFlat(c[0].t,{wHover:l/2,tickLen:i}),c):[{t:{empty:!0}}]},calcCommon:s}},23860:function(ee,z,e){var M=e(3400),k=e(52744),o=e(31147),T=e(20279);function b(h,s,t,a){t(a+".line.color"),t(a+".line.width",s.line.width),t(a+".line.dash",s.line.dash)}ee.exports=function(h,s,t,a){function n(r,i){return M.coerce(h,s,T,r,i)}k(h,s,n,a)?(o(h,s,a,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),b(0,s,n,"increasing"),b(0,s,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),a._requestRangeslider[s.xaxis]=!0,n("zorder")):s.visible=!1}},18720:function(ee,z,e){var M=e(54460),k=e(3400),o=e(93024),T=e(76308),b=e(3400).fillText,h=e(48164),s={increasing:h.INCREASING.SYMBOL,decreasing:h.DECREASING.SYMBOL};function t(r,i,l,u){var p,c,x=r.cd,d=r.xa,g=x[0].trace,v=x[0].t,y=g.type,m=y==="ohlc"?"l":"min",_=y==="ohlc"?"h":"max",f=v.bPos||0,S=function(F){return F.pos+f-i},w=v.bdPos||v.tickLen,E=v.wHover,O=Math.min(1,w/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));function C(F){var V=S(F);return o.inbox(V-E,V+E,p)}function P(F){var V=F[m],U=F[_];return V===U||o.inbox(V-l,U-l,p)}function R(F){return(C(F)+P(F))/2}p=r.maxHoverDistance-O,c=r.maxSpikeDistance-O;var j=o.getDistanceFunction(u,C,P,R);if(o.getClosest(x,j,r),r.index===!1)return null;var D=x[r.index];if(D.empty)return null;var N=g[D.dir],W=N.line.color;return T.opacity(W)&&N.line.width?r.color=W:r.color=N.fillcolor,r.x0=d.c2p(D.pos+f-w,!0),r.x1=d.c2p(D.pos+f+w,!0),r.xLabelVal=D.orig_p!==void 0?D.orig_p:D.pos,r.spikeDistance=R(D)*c/p,r.xSpike=d.c2p(D.pos,!0),r}function a(r,i,l,u){var p=r.cd,c=r.ya,x=p[0].trace,d=p[0].t,g=[],v=t(r,i,l,u);if(!v)return[];var y=p[v.index].hi||x.hoverinfo,m=y.split("+");if(y!=="all"&&m.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],f={},S=0;S<_.length;S++){var w,E=_[S],O=x[E][v.index],C=c.c2p(O,!0);O in f?(w=f[O]).yLabel+="<br>"+d.labels[E]+M.hoverLabelText(c,O,x.yhoverformat):((w=k.extendFlat({},v)).y0=w.y1=C,w.yLabelVal=O,w.yLabel=d.labels[E]+M.hoverLabelText(c,O,x.yhoverformat),w.name="",g.push(w),f[O]=w)}return g}function n(r,i,l,u){var p=r.cd,c=r.ya,x=p[0].trace,d=p[0].t,g=t(r,i,l,u);if(!g)return[];var v=p[g.index],y=g.index=v.i,m=v.dir;function _(P){return d.labels[P]+M.hoverLabelText(c,x[P][y],x.yhoverformat)}var f=v.hi||x.hoverinfo,S=f.split("+"),w=f==="all",E=w||S.indexOf("y")!==-1,O=w||S.indexOf("text")!==-1,C=E?[_("open"),_("high"),_("low"),_("close")+"  "+s[m]]:[];return O&&b(v,x,C),g.extraText=C.join("<br>"),g.y0=g.y1=c.c2p(v.yc,!0),[g]}ee.exports={hoverPoints:function(r,i,l,u){return r.cd[0].trace.hoverlabel.split?a(r,i,l,u):n(r,i,l,u)},hoverSplit:a,hoverOnPoints:n}},65456:function(ee,z,e){ee.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(ee,z,e){var M=e(24040),k=e(3400);ee.exports=function(o,T,b,h){var s=b("x"),t=b("open"),a=b("high"),n=b("low"),r=b("close");if(b("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x"],h),t&&a&&n&&r){var i=Math.min(t.length,a.length,n.length,r.length);return s&&(i=Math.min(i,k.minRowLength(s))),T._length=i,i}}},36664:function(ee,z,e){var M=e(33428),k=e(3400);ee.exports=function(o,T,b,h){var s=T.yaxis,t=T.xaxis,a=!!t.rangebreaks;k.makeTraceGroups(h,b,"trace ohlc").each(function(n){var r=M.select(this),i=n[0],l=i.t;if(i.trace.visible!==!0||l.empty)r.remove();else{var u=l.tickLen,p=r.selectAll("path").data(k.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(c){if(c.empty)return"M0,0Z";var x=t.c2p(c.pos-u,!0),d=t.c2p(c.pos+u,!0),g=a?(x+d)/2:t.c2p(c.pos,!0);return"M"+x+","+s.c2p(c.o,!0)+"H"+g+"M"+g+","+s.c2p(c.h,!0)+"V"+s.c2p(c.l,!0)+"M"+d+","+s.c2p(c.c,!0)+"H"+g})}})}},97384:function(ee){ee.exports=function(z,e){var M,k=z.cd,o=z.xaxis,T=z.yaxis,b=[],h=k[0].t.bPos||0;if(e===!1)for(M=0;M<k.length;M++)k[M].selected=0;else for(M=0;M<k.length;M++){var s=k[M];e.contains([o.c2p(s.pos+h),T.c2p(s.yc)],null,s.i,z)?(b.push({pointNumber:s.i,x:o.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},14008:function(ee,z,e){var M=e(33428),k=e(43616),o=e(76308);ee.exports=function(T,b,h){var s=h||M.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var a=t[0].trace;M.select(this).selectAll("path").each(function(n){if(!n.empty){var r=a[n.dir].line;M.select(this).style("fill","none").call(o.stroke,r.color).call(k.dashLine,r.dash,r.width).style("opacity",a.selectedpoints&&!n.selected?.3:1)}})})}},72140:function(ee,z,e){var M=e(92880).extendFlat,k=e(45464),o=e(25376),T=e(49084),b=e(21776).Ks,h=e(86968).u,s=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ee.exports={domain:h({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(ee,z,e){var M=e(84888)._M,k=e(60268),o="parcats";z.name=o,z.plot=function(T,b,h,s){var t=M(T.calcdata,o);if(t.length){var a=t[0];k(T,a,h,s)}},z.clean=function(T,b,h,s){var t=s._has&&s._has("parcats"),a=b._has&&b._has("parcats");t&&!a&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(ee,z,e){var M=e(71688).wrap,k=e(94288).hasColorscale,o=e(47128),T=e(68944),b=e(43616),h=e(3400),s=e(38248);function t(r,i,l){r.valueInds.push(i),r.count+=l}function a(r,i,l){return{categoryInds:r,color:i,rawColor:l,valueInds:[],count:0}}function n(r,i,l){r.valueInds.push(i),r.count+=l}ee.exports=function(r,i){var l=h.filterVisible(i.dimensions);if(l.length===0)return[];var u,p,c,x=l.map(function(U){var te;if(U.categoryorder==="trace")te=null;else if(U.categoryorder==="array")te=U.categoryarray;else{te=T(U.values);for(var J=!0,X=0;X<te.length;X++)if(!s(te[X])){J=!1;break}te.sort(J?h.sorterAsc:void 0),U.categoryorder==="category descending"&&(te=te.reverse())}return function(K,Q){Q=Q==null?[]:Q.map(function(xe){return xe});var Z={},re={},oe=[];Q.forEach(function(xe,be){Z[xe]=0,re[xe]=be});for(var ae=0;ae<K.length;ae++){var ce,he=K[ae];Z[he]===void 0?(Z[he]=1,ce=Q.push(he)-1,re[he]=ce):(Z[he]++,ce=re[he]),oe.push(ce)}var pe=Q.map(function(xe){return Z[xe]});return{uniqueValues:Q,uniqueCounts:pe,inds:oe}}(U.values,te)});u=h.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function(U){var te,J=U.map(function(X){return X.displayindex});if(function(X){for(var K=new Array(X.length),Q=0;Q<X.length;Q++){if(X[Q]<0||X[Q]>=X.length||K[X[Q]]!==void 0)return!1;K[X[Q]]=!0}return!0}(J))for(te=0;te<U.length;te++)U[te]._displayindex=U[te].displayindex;else for(te=0;te<U.length;te++)U[te]._displayindex=te}(l),l.forEach(function(U,te){(function(J,X){J._categoryarray=X.uniqueValues,J.ticktext===null||J.ticktext===void 0?J._ticktext=[]:J._ticktext=J.ticktext.slice();for(var K=J._ticktext.length;K<X.uniqueValues.length;K++)J._ticktext.push(X.uniqueValues[K])})(U,x[te])});var d,g=i.line;g?(k(i,"line")&&o(r,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),d=b.tryColorscale(g)):d=h.identity;var v,y,m,_,f,S=l[0].values.length,w={},E=x.map(function(U){return U.inds});for(c=0,v=0;v<S;v++){var O=[];for(y=0;y<E.length;y++)O.push(E[y][v]);p=u[v%u.length],c+=p;var C=(m=v,_=void 0,f=void 0,h.isArrayOrTypedArray(g.color)?f=_=g.color[m%g.color.length]:_=g.color,{color:d(_),rawColor:f}),P=O+"-"+C.rawColor;w[P]===void 0&&(w[P]=a(O,C.color,C.rawColor)),n(w[P],v,p)}var R,j=l.map(function(U,te){return function(J,X,K,Q,Z){return{dimensionInd:J,containerInd:X,displayInd:K,dimensionLabel:Q,count:Z,categories:[],dragX:null}}(te,U._index,U._displayindex,U.label,c)});for(v=0;v<S;v++)for(p=u[v%u.length],y=0;y<j.length;y++){var D=j[y].containerInd,N=x[y].inds[v],W=j[y].categories;if(W[N]===void 0){var F=i.dimensions[D]._categoryarray[N],V=i.dimensions[D]._ticktext[N];W[N]={dimensionInd:y,categoryInd:R=N,categoryValue:F,displayInd:R,categoryLabel:V,valueInds:[],count:0,dragY:null}}t(W[N],v,p)}return M(function(U,te,J){var X=U.map(function(K){return K.categories.length}).reduce(function(K,Q){return Math.max(K,Q)});return{dimensions:U,paths:te,trace:void 0,maxCats:X,count:J}}(j,w,c))}},76671:function(ee,z,e){var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),h=e(72140),s=e(26284),t=e(38116).isTypedArraySpec;function a(n,r){function i(g,v){return M.coerce(n,r,h.dimensions,g,v)}var l=i("values"),u=i("visible");if(l&&l.length||(u=r.visible=!1),u){i("label"),i("displayindex",r._index);var p,c=n.categoryarray,x=M.isArrayOrTypedArray(c)&&c.length>0||t(c);x&&(p="array");var d=i("categoryorder",p);d==="array"?(i("categoryarray"),i("ticktext")):(delete n.categoryarray,delete n.ticktext),x||d!=="array"||(r.categoryorder="trace")}}ee.exports=function(n,r,i,l){function u(g,v){return M.coerce(n,r,h,g,v)}var p=b(n,r,{name:"dimensions",handleItemDefaults:a}),c=function(g,v,y,m,_){_("line.shape"),_("line.hovertemplate");var f=_("line.color",m.colorway[0]);if(k(g,"line")&&M.isArrayOrTypedArray(f)){if(f.length)return _("line.colorscale"),o(g,v,m,_,{prefix:"line.",cLetter:"c"}),f.length;v.line.color=y}return 1/0}(n,r,i,l,u);T(r,l,u),Array.isArray(p)&&p.length||(r.visible=!1),s(r,p,"values",c),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var x={weight:l.font.weight,style:l.font.style,variant:l.font.variant,family:l.font.family,size:Math.round(l.font.size),color:l.font.color};M.coerceFont(u,"labelfont",x);var d={weight:l.font.weight,style:l.font.style,variant:l.font.variant,family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};M.coerceFont(u,"tickfont",d)}},22020:function(ee,z,e){ee.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(ee,z,e){var M=e(33428),k=e(67756).Gz,o=e(36424),T=e(93024),b=e(3400),h=b.strTranslate,s=e(43616),t=e(49760),a=e(72736);function n(J,X,K,Q){var Z=X._context.staticPlot,re=J.map(W.bind(0,X,K)),oe=Q.selectAll("g.parcatslayer").data([null]);oe.enter().append("g").attr("class","parcatslayer").style("pointer-events",Z?"none":"all");var ae=oe.selectAll("g.trace.parcats").data(re,r),ce=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(se){return h(se.x,se.y)}),ce.append("g").attr("class","paths");var he=ae.select("g.paths").selectAll("path.path").data(function(se){return se.paths},r);he.attr("fill",function(se){return se.model.color});var pe=he.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(se){return se.model.color}).attr("fill-opacity",0);g(pe),he.attr("d",function(se){return se.svgD}),pe.empty()||he.sort(l),he.exit().remove(),he.on("mouseover",u).on("mouseout",p).on("click",d),ce.append("g").attr("class","dimensions");var xe=ae.select("g.dimensions").selectAll("g.dimension").data(function(se){return se.dimensions},r);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(se){return h(se.x,0)}),xe.exit().remove();var be=xe.selectAll("g.category").data(function(se){return se.categories},r),ve=be.enter().append("g").attr("class","category");be.attr("transform",function(se){return h(0,se.y)}),ve.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(se){return se.width}).attr("height",function(se){return se.height}),y(ve);var ge=be.selectAll("rect.bandrect").data(function(se){return se.bands},r);ge.each(function(){b.raiseToTop(this)}),ge.attr("fill",function(se){return se.color});var we=ge.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);ge.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}).attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":se.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(we),ge.exit().remove(),ve.append("text").attr("class","catlabel").attr("pointer-events","none");var _e=X._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(se){return i(se)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",a.makeTextShadow(_e)).style("fill","rgb(0, 0, 0)").attr("x",function(se){return i(se)?se.width+5:-5}).attr("y",function(se){return se.height/2}).text(function(se){return se.model.categoryLabel}).each(function(se){s.font(M.select(this),se.parcatsViewModel.categorylabelfont),a.convertToTspans(M.select(this),X)}),ve.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(se){return se.width/2}).attr("y",-5).text(function(se,ie){return ie===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}).each(function(se){s.font(M.select(this),se.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",O),be.exit().remove(),xe.call(M.behavior.drag().origin(function(se){return{x:se.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",R)),ae.each(function(se){se.traceSelection=M.select(this),se.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),se.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function r(J){return J.key}function i(J){var X=J.parcatsViewModel.dimensions.length,K=J.parcatsViewModel.dimensions[X-1].model.dimensionInd;return J.model.dimensionInd===K}function l(J,X){return J.model.rawColor>X.model.rawColor?1:J.model.rawColor<X.model.rawColor?-1:0}function u(J){if(!J.parcatsViewModel.dragDimension&&J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),v(M.select(this));var X=c(J),K=x(J);if(J.parcatsViewModel.graphDiv.emit("plotly_hover",{points:X,event:M.event,constraints:K}),J.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Q,Z,re,oe=M.mouse(this)[0],ae=J.parcatsViewModel.graphDiv,ce=J.parcatsViewModel.trace,he=ae._fullLayout,pe=he._paperdiv.node().getBoundingClientRect(),xe=J.parcatsViewModel.graphDiv.getBoundingClientRect();for(re=0;re<J.leftXs.length-1;re++)if(J.leftXs[re]+J.dimWidths[re]-2<=oe&&oe<=J.leftXs[re+1]+2){var be=J.parcatsViewModel.dimensions[re],ve=J.parcatsViewModel.dimensions[re+1];Q=(be.x+be.width+ve.x)/2,Z=(J.topYs[re]+J.topYs[re+1]+J.height)/2;break}var ge=J.parcatsViewModel.x+Q,we=J.parcatsViewModel.y+Z,_e=t.mostReadable(J.model.color,["black","white"]),se=J.model.count,ie=se/J.parcatsViewModel.model.count,fe={countLabel:se,probabilityLabel:ie.toFixed(3)},Ee=[];J.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ee.push(["Count:",fe.countLabel].join(" ")),J.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ee.push(["P:",fe.probabilityLabel].join(" "));var Te=Ee.join("<br>"),Ae=M.mouse(ae)[0];T.loneHover({trace:ce,x:ge-pe.left+xe.left,y:we-pe.top+xe.top,text:Te,color:J.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:_e,idealAlign:Ae<ge?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:fe,eventData:[{data:ce._input,fullData:ce,count:se,probability:ie}]},{container:he._hoverlayer.node(),outerContainer:he._paper.node(),gd:ae})}}}function p(J){if(!J.parcatsViewModel.dragDimension&&(g(M.select(this)),T.loneUnhover(J.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),J.parcatsViewModel.pathSelection.sort(l),J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var X=c(J),K=x(J);J.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:X,event:M.event,constraints:K})}}function c(J){for(var X=[],K=j(J.parcatsViewModel),Q=0;Q<J.model.valueInds.length;Q++){var Z=J.model.valueInds[Q];X.push({curveNumber:K,pointNumber:Z})}return X}function x(J){for(var X={},K=J.parcatsViewModel.model.dimensions,Q=0;Q<K.length;Q++){var Z=K[Q],re=Z.categories[J.model.categoryInds[Q]];X[Z.containerInd]=re.categoryValue}return J.model.rawColor!==void 0&&(X.color=J.model.rawColor),X}function d(J){if(J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var X=c(J),K=x(J);J.parcatsViewModel.graphDiv.emit("plotly_click",{points:X,event:M.event,constraints:K})}}function g(J){J.attr("fill",function(X){return X.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function v(J){J.attr("fill-opacity",.8).attr("stroke",function(X){return t.mostReadable(X.model.color,["black","white"])}).attr("stroke-width",.3)}function y(J){J.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(J){J.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(J){var X=J.parcatsViewModel.pathSelection,K=J.categoryViewModel.model.dimensionInd,Q=J.categoryViewModel.model.categoryInd;return X.filter(function(Z){return Z.model.categoryInds[K]===Q&&Z.model.color===J.color})}function f(J,X,K){var Q=M.select(J).datum(),Z=Q.categoryViewModel.model,re=Q.parcatsViewModel.graphDiv,oe=M.select(J.parentNode).selectAll("rect.bandrect"),ae=[];oe.each(function(he){_(he).each(function(pe){Array.prototype.push.apply(ae,c(pe))})});var ce={};ce[Z.dimensionInd]=Z.categoryValue,re.emit(X,{points:ae,event:K,constraints:ce})}function S(J,X,K){var Q=M.select(J).datum(),Z=Q.categoryViewModel.model,re=Q.parcatsViewModel.graphDiv,oe=_(Q),ae=[];oe.each(function(he){Array.prototype.push.apply(ae,c(he))});var ce={};ce[Z.dimensionInd]=Z.categoryValue,Q.rawColor!==void 0&&(ce.color=Q.rawColor),re.emit(X,{points:ae,event:K,constraints:ce})}function w(J,X,K){J._fullLayout._calcInverseTransform(J);var Q,Z,re=J._fullLayout._invScaleX,oe=J._fullLayout._invScaleY,ae=M.select(K.parentNode).select("rect.catrect"),ce=ae.node().getBoundingClientRect(),he=ae.datum(),pe=he.parcatsViewModel,xe=pe.model.dimensions[he.model.dimensionInd],be=pe.trace,ve=ce.top+ce.height/2;pe.dimensions.length>1&&xe.displayInd===pe.dimensions.length-1?(Q=ce.left,Z="left"):(Q=ce.left+ce.width,Z="right");var ge=he.model.count,we=he.model.categoryLabel,_e=ge/he.parcatsViewModel.model.count,se={countLabel:ge,categoryLabel:we,probabilityLabel:_e.toFixed(3)},ie=[];he.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ie.push(["Count:",se.countLabel].join(" ")),he.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ie.push(["P("+se.categoryLabel+"):",se.probabilityLabel].join(" "));var fe=ie.join("<br>");return{trace:be,x:re*(Q-X.left),y:oe*(ve-X.top),text:fe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Z,hovertemplate:be.hovertemplate,hovertemplateLabels:se,eventData:[{data:be._input,fullData:be,count:ge,category:we,probability:_e}]}}function E(J){if(!J.parcatsViewModel.dragDimension&&J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(M.mouse(this)[1]<-1)return;var X,K=J.parcatsViewModel.graphDiv,Q=K._fullLayout,Z=Q._paperdiv.node().getBoundingClientRect(),re=J.parcatsViewModel.hoveron,oe=this;re==="color"?(function(ae){var ce=M.select(ae).datum(),he=_(ce);v(he),he.each(function(){b.raiseToTop(this)}),M.select(ae.parentNode).selectAll("rect.bandrect").filter(function(pe){return pe.color===ce.color}).each(function(){b.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(oe),S(oe,"plotly_hover",M.event)):(function(ae){M.select(ae.parentNode).selectAll("rect.bandrect").each(function(ce){var he=_(ce);v(he),he.each(function(){b.raiseToTop(this)})}),M.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(oe),f(oe,"plotly_hover",M.event)),J.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(re==="category"?X=w(K,Z,oe):re==="color"?X=function(ae,ce,he){ae._fullLayout._calcInverseTransform(ae);var pe,xe,be=ae._fullLayout._invScaleX,ve=ae._fullLayout._invScaleY,ge=he.getBoundingClientRect(),we=M.select(he).datum(),_e=we.categoryViewModel,se=_e.parcatsViewModel,ie=se.model.dimensions[_e.model.dimensionInd],fe=se.trace,Ee=ge.y+ge.height/2;se.dimensions.length>1&&ie.displayInd===se.dimensions.length-1?(pe=ge.left,xe="left"):(pe=ge.left+ge.width,xe="right");var Te=_e.model.categoryLabel,Ae=we.parcatsViewModel.model.count,Se=0;we.categoryViewModel.bands.forEach(function(Ye){Ye.color===we.color&&(Se+=Ye.count)});var Oe=_e.model.count,De=0;se.pathSelection.each(function(Ye){Ye.model.color===we.color&&(De+=Ye.model.count)});var de=Se/Ae,me=Se/De,Me=Se/Oe,ze={countLabel:Se,categoryLabel:Te,probabilityLabel:de.toFixed(3)},Pe=[];_e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Pe.push(["Count:",ze.countLabel].join(" ")),_e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Pe.push("P(color  "+Te+"): "+ze.probabilityLabel),Pe.push("P("+Te+" | color): "+me.toFixed(3)),Pe.push("P(color | "+Te+"): "+Me.toFixed(3)));var Ne=Pe.join("<br>"),Ve=t.mostReadable(we.color,["black","white"]);return{trace:fe,x:be*(pe-ce.left),y:ve*(Ee-ce.top),text:Ne,color:we.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:xe,hovertemplate:fe.hovertemplate,hovertemplateLabels:ze,eventData:[{data:fe._input,fullData:fe,category:Te,count:Ae,probability:de,categorycount:Oe,colorcount:De,bandcolorcount:Se}]}}(K,Z,oe):re==="dimension"&&(X=function(ae,ce,he){var pe=[];return M.select(he.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){pe.push(w(ae,ce,this))}),pe}(K,Z,oe)),X&&T.loneHover(X,{container:Q._hoverlayer.node(),outerContainer:Q._paper.node(),gd:K}))}}function O(J){var X=J.parcatsViewModel;X.dragDimension||(g(X.pathSelection),y(X.dimensionSelection.selectAll("g.category")),m(X.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(X.graphDiv._fullLayout._hoverlayer.node()),X.pathSelection.sort(l),X.hoverinfoItems.indexOf("skip")!==-1)||(J.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",M.event):f(this,"plotly_unhover",M.event))}function C(J){J.parcatsViewModel.arrangement!=="fixed"&&(J.dragDimensionDisplayInd=J.model.displayInd,J.initialDragDimensionDisplayInds=J.parcatsViewModel.model.dimensions.map(function(X){return X.displayInd}),J.dragHasMoved=!1,J.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(X){var K=M.mouse(this)[0],Q=M.mouse(this)[1];-2<=K&&K<=X.width+2&&-2<=Q&&Q<=X.height+2&&(J.dragCategoryDisplayInd=X.model.displayInd,J.initialDragCategoryDisplayInds=J.model.categories.map(function(Z){return Z.displayInd}),X.model.dragY=X.y,b.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(Z){Z.y<Q&&Q<=Z.y+Z.height&&(J.potentialClickBand=this)}))}),J.parcatsViewModel.dragDimension=J,T.loneUnhover(J.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(J){if(J.parcatsViewModel.arrangement!=="fixed"&&(J.dragHasMoved=!0,J.dragDimensionDisplayInd!==null)){var X=J.dragDimensionDisplayInd,K=X-1,Q=X+1,Z=J.parcatsViewModel.dimensions[X];if(J.dragCategoryDisplayInd!==null){var re=Z.categories[J.dragCategoryDisplayInd];re.model.dragY+=M.event.dy;var oe=re.model.dragY,ae=re.model.displayInd,ce=Z.categories,he=ce[ae-1],pe=ce[ae+1];he!==void 0&&oe<he.y+he.height/2&&(re.model.displayInd=he.model.displayInd,he.model.displayInd=ae),pe!==void 0&&oe+re.height>pe.y+pe.height/2&&(re.model.displayInd=pe.model.displayInd,pe.model.displayInd=ae),J.dragCategoryDisplayInd=re.model.displayInd}if(J.dragCategoryDisplayInd===null||J.parcatsViewModel.arrangement==="freeform"){Z.model.dragX=M.event.x;var xe=J.parcatsViewModel.dimensions[K],be=J.parcatsViewModel.dimensions[Q];xe!==void 0&&Z.model.dragX<xe.x+xe.width&&(Z.model.displayInd=xe.model.displayInd,xe.model.displayInd=X),be!==void 0&&Z.model.dragX+Z.width>be.x&&(Z.model.displayInd=be.model.displayInd,be.model.displayInd=J.dragDimensionDisplayInd),J.dragDimensionDisplayInd=Z.model.displayInd}U(J.parcatsViewModel),V(J.parcatsViewModel),N(J.parcatsViewModel),D(J.parcatsViewModel)}}function R(J){if(J.parcatsViewModel.arrangement!=="fixed"&&J.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var X={},K=j(J.parcatsViewModel),Q=J.parcatsViewModel.model.dimensions.map(function(pe){return pe.displayInd}),Z=J.initialDragDimensionDisplayInds.some(function(pe,xe){return pe!==Q[xe]});Z&&Q.forEach(function(pe,xe){var be=J.parcatsViewModel.model.dimensions[xe].containerInd;X["dimensions["+be+"].displayindex"]=pe});var re=!1;if(J.dragCategoryDisplayInd!==null){var oe=J.model.categories.map(function(pe){return pe.displayInd});if(re=J.initialDragCategoryDisplayInds.some(function(pe,xe){return pe!==oe[xe]})){var ae=J.model.categories.slice().sort(function(pe,xe){return pe.displayInd-xe.displayInd}),ce=ae.map(function(pe){return pe.categoryValue}),he=ae.map(function(pe){return pe.categoryLabel});X["dimensions["+J.model.containerInd+"].categoryarray"]=[ce],X["dimensions["+J.model.containerInd+"].ticktext"]=[he],X["dimensions["+J.model.containerInd+"].categoryorder"]="array"}}J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!J.dragHasMoved&&J.potentialClickBand&&(J.parcatsViewModel.hoveron==="color"?S(J.potentialClickBand,"plotly_click",M.event.sourceEvent):f(J.potentialClickBand,"plotly_click",M.event.sourceEvent)),J.model.dragX=null,J.dragCategoryDisplayInd!==null&&(J.parcatsViewModel.dimensions[J.dragDimensionDisplayInd].categories[J.dragCategoryDisplayInd].model.dragY=null,J.dragCategoryDisplayInd=null),J.dragDimensionDisplayInd=null,J.parcatsViewModel.dragDimension=null,J.dragHasMoved=null,J.potentialClickBand=null,U(J.parcatsViewModel),V(J.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){N(J.parcatsViewModel,!0),D(J.parcatsViewModel,!0)}).each("end",function(){(Z||re)&&o.restyle(J.parcatsViewModel.graphDiv,X,[K])})}}function j(J){for(var X,K=J.graphDiv._fullData,Q=0;Q<K.length;Q++)if(J.key===K[Q].uid){X=Q;break}return X}function D(J,X){var K;X===void 0&&(X=!1),J.pathSelection.data(function(Q){return Q.paths},r),(K=J.pathSelection,X?K.transition():K).attr("d",function(Q){return Q.svgD})}function N(J,X){function K(oe){return X?oe.transition():oe}X===void 0&&(X=!1),J.dimensionSelection.data(function(oe){return oe.dimensions},r);var Q=J.dimensionSelection.selectAll("g.category").data(function(oe){return oe.categories},r);K(J.dimensionSelection).attr("transform",function(oe){return h(oe.x,0)}),K(Q).attr("transform",function(oe){return h(0,oe.y)}),Q.select(".dimlabel").text(function(oe,ae){return ae===0?oe.parcatsViewModel.model.dimensions[oe.model.dimensionInd].dimensionLabel:null}),Q.select(".catlabel").attr("text-anchor",function(oe){return i(oe)?"start":"end"}).attr("x",function(oe){return i(oe)?oe.width+5:-5}).each(function(oe){var ae,ce;i(oe)?(ae=oe.width+5,ce="start"):(ae=-5,ce="end"),M.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",ce)});var Z=Q.selectAll("rect.bandrect").data(function(oe){return oe.bands},r),re=Z.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oe){return oe.color}).attr("fill-opacity",0);Z.attr("fill",function(oe){return oe.color}).attr("width",function(oe){return oe.width}).attr("height",function(oe){return oe.height}).attr("y",function(oe){return oe.y}),m(re),Z.each(function(){b.raiseToTop(this)}),Z.exit().remove()}function W(J,X,K){var Q,Z=K[0],re=X.margin||{l:80,r:80,t:100,b:80},oe=Z.trace,ae=oe.domain,ce=X.width,he=X.height,pe=Math.floor(ce*(ae.x[1]-ae.x[0])),xe=Math.floor(he*(ae.y[1]-ae.y[0])),be=ae.x[0]*ce+re.l,ve=X.height-ae.y[1]*X.height+re.t,ge=oe.line.shape;Q=oe.hoverinfo==="all"?["count","probability"]:(oe.hoverinfo||"").split("+");var we={trace:oe,key:oe.uid,model:Z,x:be,y:ve,width:pe,height:xe,hoveron:oe.hoveron,hoverinfoItems:Q,arrangement:oe.arrangement,bundlecolors:oe.bundlecolors,sortpaths:oe.sortpaths,labelfont:oe.labelfont,categorylabelfont:oe.tickfont,pathShape:ge,dragDimension:null,margin:re,paths:[],dimensions:[],graphDiv:J,traceSelection:null,pathSelection:null,dimensionSelection:null};return Z.dimensions&&(U(we),V(we)),we}function F(J,X,K,Q,Z){var re,oe,ae=[],ce=[];for(oe=0;oe<K.length-1;oe++)re=k(K[oe]+J[oe],J[oe+1]),ae.push(re(Z)),ce.push(re(1-Z));var he="M "+J[0]+","+X[0];for(he+="l"+K[0]+",0 ",oe=1;oe<K.length;oe++)he+="C"+ae[oe-1]+","+X[oe-1]+" "+ce[oe-1]+","+X[oe]+" "+J[oe]+","+X[oe],he+="l"+K[oe]+",0 ";for(he+="l0,"+Q+" ",he+="l -"+K[K.length-1]+",0 ",oe=K.length-2;oe>=0;oe--)he+="C"+ce[oe]+","+(X[oe+1]+Q)+" "+ae[oe]+","+(X[oe]+Q)+" "+(J[oe]+K[oe])+","+(X[oe]+Q),he+="l-"+K[oe]+",0 ";return he+"Z"}function V(J){var X=J.dimensions,K=J.model,Q=X.map(function(ze){return ze.categories.map(function(Pe){return Pe.y})}),Z=J.model.dimensions.map(function(ze){return ze.categories.map(function(Pe){return Pe.displayInd})}),re=J.model.dimensions.map(function(ze){return ze.displayInd}),oe=J.dimensions.map(function(ze){return ze.model.dimensionInd}),ae=X.map(function(ze){return ze.x}),ce=X.map(function(ze){return ze.width}),he=[];for(var pe in K.paths)K.paths.hasOwnProperty(pe)&&he.push(K.paths[pe]);function xe(ze){var Pe=ze.categoryInds.map(function(Ne,Ve){return Z[Ve][Ne]});return oe.map(function(Ne){return Pe[Ne]})}he.sort(function(ze,Pe){var Ne=xe(ze),Ve=xe(Pe);return J.sortpaths==="backward"&&(Ne.reverse(),Ve.reverse()),Ne.push(ze.valueInds[0]),Ve.push(Pe.valueInds[0]),J.bundlecolors&&(Ne.unshift(ze.rawColor),Ve.unshift(Pe.rawColor)),Ne<Ve?-1:Ne>Ve?1:0});for(var be=new Array(he.length),ve=X[0].model.count,ge=X[0].categories.map(function(ze){return ze.height}).reduce(function(ze,Pe){return ze+Pe}),we=0;we<he.length;we++){var _e,se=he[we];_e=ve>0?ge*(se.count/ve):0;for(var ie,fe=new Array(Q.length),Ee=0;Ee<se.categoryInds.length;Ee++){var Te=se.categoryInds[Ee],Ae=Z[Ee][Te],Se=re[Ee];fe[Se]=Q[Se][Ae],Q[Se][Ae]+=_e;var Oe=J.dimensions[Se].categories[Ae],De=Oe.bands.length,de=Oe.bands[De-1];if(de===void 0||se.rawColor!==de.rawColor){var me=de===void 0?0:de.y+de.height;Oe.bands.push({key:me,color:se.color,rawColor:se.rawColor,height:_e,width:Oe.width,count:se.count,y:me,categoryViewModel:Oe,parcatsViewModel:J})}else{var Me=Oe.bands[De-1];Me.height+=_e,Me.count+=se.count}}ie=J.pathShape==="hspline"?F(ae,fe,ce,_e,.5):F(ae,fe,ce,_e,0),be[we]={key:se.valueInds[0],model:se,height:_e,leftXs:ae,topYs:fe,dimWidths:ce,svgD:ie,parcatsViewModel:J}}J.paths=be}function U(J){var X=J.model.dimensions.map(function(oe){return{displayInd:oe.displayInd,dimensionInd:oe.dimensionInd}});X.sort(function(oe,ae){return oe.displayInd-ae.displayInd});var K=[];for(var Q in X){var Z=X[Q].dimensionInd,re=J.model.dimensions[Z];K.push(te(J,re))}J.dimensions=K}function te(J,X){var K,Q=J.model.dimensions.length,Z=X.displayInd;K=40+(Q>1?(J.width-80-16)/(Q-1):0)*Z;var re,oe,ae,ce,he,pe=[],xe=J.model.maxCats,be=X.categories.length,ve=X.count,ge=J.height-8*(xe-1),we=8*(xe-be)/2,_e=X.categories.map(function(se){return{displayInd:se.displayInd,categoryInd:se.categoryInd}});for(_e.sort(function(se,ie){return se.displayInd-ie.displayInd}),he=0;he<be;he++)ce=_e[he].categoryInd,oe=X.categories[ce],re=ve>0?oe.count/ve*ge:0,ae={key:oe.valueInds[0],model:oe,width:16,height:re,y:oe.dragY!==null?oe.dragY:we,bands:[],parcatsViewModel:J},we=we+re+8,pe.push(ae);return{key:X.dimensionInd,x:X.dragX!==null?X.dragX:K,y:0,width:16,model:X,categories:pe,parcatsViewModel:J,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ee.exports=function(J,X,K,Q){n(K,J,Q,X)}},60268:function(ee,z,e){var M=e(51036);ee.exports=function(k,o,T,b){var h=k._fullLayout,s=h._paper,t=h._size;M(k,s,o,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},82296:function(ee,z,e){var M=e(49084),k=e(94724),o=e(25376),T=e(86968).u,b=e(92880).extendFlat,h=e(31780).templatedArray;ee.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:h("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(ee,z,e){var M=e(30140),k=e(33428),o=e(71688).keyFun,T=e(71688).repeat,b=e(3400).sorterAsc,h=e(3400).strTranslate,s=M.bar.snapRatio;function t(w,E){return w*(1-s)+E*s}var a=M.bar.snapClose;function n(w,E){return w*(1-a)+E*a}function r(w,E,O,C){if(function(te,J){for(var X=0;X<J.length;X++)if(te>=J[X][0]&&te<=J[X][1])return!0;return!1}(O,C))return O;var P=w?-1:1,R=0,j=E.length-1;if(P<0){var D=R;R=j,j=D}for(var N=E[R],W=N,F=R;P*F<P*j;F+=P){var V=F+P,U=E[V];if(P*O<P*n(N,U))return t(N,W);if(P*O<P*U||V===j)return t(U,N);W=N,N=U}}function i(w){w.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function l(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,O,C,P=p(w.brush.filter.getConsolidated(),w.height),R=[0],j=P.length?P[0][0]:null,D=0;D<P.length;D++)O=(E=P[D])[1]-E[0],R.push(j),R.push(O),(C=D+1)<P.length&&(j=P[C][0]-E[1]);return R.push(w.height),R}function p(w,E){return w.map(function(O){return O.map(function(C){return Math.max(0,C*E)}).sort(b)})}function c(){k.select(document.body).style("cursor",null)}function x(w){w.attr("stroke-dasharray",u)}function d(w,E){var O=k.select(w).selectAll(".highlight, .highlight-shadow");x(E?O.transition().duration(M.bar.snapDuration).each("end",E):O)}function g(w,E){var O,C=w.brush,P=NaN,R={};if(C.filterSpecified){var j=w.height,D=C.filter.getConsolidated(),N=p(D,j),W=NaN,F=NaN,V=NaN;for(O=0;O<=N.length;O++){var U=N[O];if(U&&U[0]<=E&&E<=U[1]){W=O;break}if(F=O?O-1:NaN,U&&U[0]>E){V=O;break}}if(P=W,isNaN(P)&&(P=isNaN(F)||isNaN(V)?isNaN(F)?V:F:E-N[F][1]<N[V][0]-E?F:V),!isNaN(P)){var te=N[P],J=function(Z,re){var oe=M.bar.handleHeight;if(!(re>Z[1]+oe||re<Z[0]-oe))return re>=.9*Z[1]+.1*Z[0]?"n":re<=.9*Z[0]+.1*Z[1]?"s":"ns"}(te,E);J&&(R.interval=D[P],R.intervalPix=te,R.region=J)}}if(w.ordinal&&!R.region){var X=w.unitTickvals,K=w.unitToPaddedPx.invert(E);for(O=0;O<X.length;O++){var Q=[.25*X[Math.max(O-1,0)]+.75*X[O],.25*X[Math.min(O+1,X.length-1)]+.75*X[O]];if(K>=Q[0]&&K<=Q[1]){R.clickableOrdinalRange=Q;break}}}return R}function v(w,E){k.event.sourceEvent.stopPropagation();var O=E.height-k.mouse(w)[1]-2*M.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[O-C.grabPoint,O+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(O)].sort(b),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),d(w.parentNode)}function y(w,E){var O=g(E,E.height-k.mouse(w)[1]-2*M.verticalPadding),C="crosshair";O.clickableOrdinalRange?C="pointer":O.region&&(C=O.region+"-resize"),k.select(document.body).style("cursor",C)}function m(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||y(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(k.behavior.drag().on("dragstart",function(E){(function(O,C){k.event.sourceEvent.stopPropagation();var P=C.height-k.mouse(O)[1]-2*M.verticalPadding,R=C.unitToPaddedPx.invert(P),j=C.brush,D=g(C,P),N=D.interval,W=j.svgBrush;if(W.wasDragged=!1,W.grabbingBar=D.region==="ns",W.grabbingBar){var F=N.map(C.unitToPaddedPx);W.grabPoint=P-F[0]-M.verticalPadding,W.barLength=F[1]-F[0]}W.clickableOrdinalRange=D.clickableOrdinalRange,W.stayingIntervals=C.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],N&&(W.stayingIntervals=W.stayingIntervals.filter(function(V){return V[0]!==N[0]&&V[1]!==N[1]})),W.startExtent=D.region?N[D.region==="s"?1:0]:R,C.parent.inBrushDrag=!0,W.brushStartCallback()})(this,E)}).on("drag",function(E){v(this,E)}).on("dragend",function(E){(function(O,C){var P=C.brush,R=P.filter,j=P.svgBrush;j._dragging||(y(O,C),v(O,C),C.brush.svgBrush.wasDragged=!1),j._dragging=!1,k.event.sourceEvent.stopPropagation();var D=j.grabbingBar;if(j.grabbingBar=!1,j.grabLocation=void 0,C.parent.inBrushDrag=!1,c(),!j.wasDragged)return j.wasDragged=void 0,j.clickableOrdinalRange?P.filterSpecified&&C.multiselect?j.extent.push(j.clickableOrdinalRange):(j.extent=[j.clickableOrdinalRange],P.filterSpecified=!0):D?(j.extent=j.stayingIntervals,j.extent.length===0&&f(P)):f(P),j.brushCallback(C),d(O.parentNode),void j.brushEndCallback(P.filterSpecified?R.getConsolidated():[]);var N=function(){R.set(R.getConsolidated())};if(C.ordinal){var W=C.unitTickvals;W[W.length-1]<W[0]&&W.reverse(),j.newExtent=[r(0,W,j.newExtent[0],j.stayingIntervals),r(1,W,j.newExtent[1],j.stayingIntervals)];var F=j.newExtent[1]>j.newExtent[0];j.extent=j.stayingIntervals.concat(F?[j.newExtent]:[]),j.extent.length||f(P),j.brushCallback(C),F?d(O.parentNode,N):(N(),d(O.parentNode))}else N();j.brushEndCallback(P.filterSpecified?R.getConsolidated():[])})(this,E)}))}function _(w,E){return w[0]-E[0]}function f(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function S(w){for(var E,O=w.slice(),C=[],P=O.shift();P;){for(E=P.slice();(P=O.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}ee.exports={makeBrush:function(w,E,O,C,P,R){var j,D=function(){var N,W,F=[];return{set:function(V){(F=V.map(function(U){return U.slice().sort(b)}).sort(_)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),N=S(F),W=F.reduce(function(U,te){return[Math.min(U[0],te[0]),Math.max(U[1],te[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return N},getBounds:function(){return W}}}();return D.set(O),{filter:D,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(j=P,function(N){var W=N.brush,F=function(U){return U.svgBrush.extent.map(function(te){return te.slice()})}(W),V=F.slice();W.filter.set(V),j()}),brushEndCallback:R}}},ensureAxisBrush:function(w,E,O){var C=w.selectAll("."+M.cn.axisBrush).data(T,o);C.enter().append("g").classed(M.cn.axisBrush,!0),function(P,R,j){var D=j._context.staticPlot,N=P.selectAll(".background").data(T);N.enter().append("rect").classed("background",!0).call(i).call(l).style("pointer-events",D?"none":"auto").attr("transform",h(0,M.verticalPadding)),N.call(m).attr("height",function(V){return V.height-M.verticalPadding});var W=P.selectAll(".highlight-shadow").data(T);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",R).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(V){return V.height}).call(x);var F=P.selectAll(".highlight").data(T);F.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(V){return V.height}).call(x)}(C,E,O)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(C){return C.sort(b)}),w=E.multiselect?S(w.sort(_)):[w[0]]):w=[w.sort(b)],E.tickvals){var O=E.tickvals.slice().sort(b);if(!(w=w.map(function(C){var P=[r(0,O,C[0],[]),r(1,O,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return w.length>1?w:w[0]}}},61664:function(ee,z,e){ee.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(ee,z,e){var M=e(33428),k=e(84888)._M,o=e(24196),T=e(9616);z.name="parcoords",z.plot=function(b){var h=k(b.calcdata,"parcoords")[0];h.length&&o(b,h)},z.clean=function(b,h,s,t){var a=t._has&&t._has("parcoords"),n=h._has&&h._has("parcoords");a&&!n&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},z.toSVG=function(b){var h=b._fullLayout._glimages,s=M.select(b).selectAll(".svg-container");s.filter(function(t,a){return a===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,a=t.toDataURL("image/png");h.append("svg:image").attr({xmlns:T.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(ee,z,e){var M=e(3400).isArrayOrTypedArray,k=e(8932),o=e(71688).wrap;ee.exports=function(T,b){var h,s;return k.hasColorscale(b,"line")&&M(b.line.color)?(h=b.line.color,s=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:h,containerStr:"line",cLetter:"c"})):(h=function(t){for(var a=new Array(t),n=0;n<t;n++)a[n]=.5;return a}(b._length),s=[[0,b.line.color],[1,b.line.color]]),o({lineColor:h,cscale:s})}},30140:function(ee){ee.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(ee,z,e){var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),h=e(54460),s=e(82296),t=e(71864),a=e(30140).maxDimensionCount,n=e(26284);function r(i,l,u,p){function c(y,m){return M.coerce(i,l,s.dimensions,y,m)}var x=c("values"),d=c("visible");if(x&&x.length||(d=l.visible=!1),d){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var g=c("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},h.setConvert(l._ax,p.layout),c("multiselect");var v=c("constraintrange");v&&(l.constraintrange=t.cleanRanges(v,l))}}ee.exports=function(i,l,u,p){function c(y,m){return M.coerce(i,l,s,y,m)}var x=i.dimensions;Array.isArray(x)&&x.length>a&&(M.log("parcoords traces support up to "+a+" dimensions at the moment"),x.splice(a));var d=b(i,l,{name:"dimensions",layout:p,handleItemDefaults:r}),g=function(y,m,_,f,S){var w=S("line.color",_);if(k(y,"line")&&M.isArrayOrTypedArray(w)){if(w.length)return S("line.colorscale"),o(y,m,f,S,{prefix:"line.",cLetter:"c"}),w.length;m.line.color=_}return 1/0}(i,l,u,p,c);T(l,p,c),Array.isArray(d)&&d.length||(l.visible=!1),n(l,d,"values",g);var v={weight:p.font.weight,style:p.font.style,variant:p.font.variant,family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};M.coerceFont(c,"labelfont",v),M.coerceFont(c,"tickfont",v),M.coerceFont(c,"rangefont",v),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(ee,z,e){var M=e(3400).isTypedArray;z.convertTypedArray=function(k){return M(k)?Array.prototype.slice.call(k):k},z.isOrdinal=function(k){return!!k.tickvals},z.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(ee,z,e){var M=e(61664);M.plot=e(24196),ee.exports=M},51352:function(ee,z,e){var M=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),o=e(30140).maxDimensionCount,T=e(3400),b=1e-6,h=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function a(d,g,v,y,m){var _=d._gl;_.enable(_.SCISSOR_TEST),_.scissor(g,v,y,m),d.clear({color:[0,0,0,0],depth:1})}function n(d,g,v,y,m,_){var f=_.key;v.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:h})}(d),v.drawCompleted=!0),function S(w){var E=Math.min(y,m-w*y);w===0&&(window.cancelAnimationFrame(v.currentRafs[f]),delete v.currentRafs[f],a(d,_.scissorX,_.scissorY,_.scissorWidth,_.viewBoxSize[1])),v.clearOnly||(_.count=2*E,_.offset=2*w*y,g(_),w*y+E<m&&(v.currentRafs[f]=window.requestAnimationFrame(function(){S(w+1)})),v.drawCompleted=!1)}(0)}function r(d,g){for(var v=new Array(256),y=0;y<256;y++)v[y]=d(y/255).concat(g);return v}function i(d,g){return(d>>>8*g)%256/255}function l(d,g,v){for(var y=new Array(8*g),m=0,_=0;_<g;_++)for(var f=0;f<2;f++)for(var S=0;S<4;S++){var w=4*d+S,E=v[64*_+w];w===63&&f===0&&(E*=-1),y[m++]=E}return y}function u(d){var g="0"+d;return g.substr(g.length-2)}function p(d){return d<o?"p"+u(d+1)+"_"+u(d+4):"colors"}function c(d,g,v,y,m,_,f,S,w,E,O,C,P,R){for(var j=[[],[]],D=0;D<64;D++)j[0][D]=D===m?1:0,j[1][D]=D===_?1:0;f*=R,S*=R,w*=R,E*=R;var N=d.lines.canvasOverdrag*R,W=d.domain,F=d.canvasWidth*R,V=d.canvasHeight*R,U=d.pad.l*R,te=d.pad.b*R,J=d.layoutHeight*R,X=d.layoutWidth*R,K=d.deselectedLines.color,Q=d.deselectedLines.opacity;return T.extendFlat({key:O,resolution:[F,V],viewBoxPos:[f+N,S],viewBoxSize:[w,E],i0:m,i1:_,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:C,contextColor:[K[0]/255,K[1]/255,K[2]/255,Q!=="auto"?K[3]*Q:Math.max(.00392156862745098,Math.pow(1/d.lines.color.length,.3333333333333333))],scissorX:(y===g?0:f+N)+(U-N)+X*W.x[0],scissorWidth:(y===v?F-f+N:w+.5)+(y===g?f+N:0),scissorY:S+te+J*W.y[0],scissorHeight:E,viewportX:U-N+X*W.x[0],viewportY:te+J*W.y[0],viewportWidth:F,viewportHeight:V},P)}function x(d){var g=2047,v=Math.max(0,Math.floor(d[0]*g),0),y=Math.min(g,Math.ceil(d[1]*g),g);return[Math.min(v,y),Math.max(v,y)]}ee.exports=function(d,g){var v,y,m,_,f,S=g.context,w=g.pick,E=g.regl,O=E._gl,C=O.getParameter(O.ALIASED_LINE_WIDTH_RANGE),P=Math.max(C[0],Math.min(C[1],g.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},j=function(V){for(var U={},te=0;te<=o;te+=4)U[p(te)]=V.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return U}(E),D=E.texture(t),N=[];F(g);var W=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:M,frag:k,primitive:"lines",lineWidth:P,attributes:j,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:D,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function F(V){v=V.model,y=V.viewModel,m=y.dimensions.slice(),_=m[0]?m[0].values.length:0;var U=v.lines,te=w?U.color.map(function(X,K){return K/U.color.length}):U.color,J=function(X,K,Q){for(var Z,re=new Array(X*(o+4)),oe=0,ae=0;ae<X;ae++){for(var ce=0;ce<o;ce++)re[oe++]=ce<K.length?K[ce].paddedUnitValues[ae]:.5;re[oe++]=i(ae,2),re[oe++]=i(ae,1),re[oe++]=i(ae,0),re[oe++]=(Z=Q[ae],Math.max(b,Math.min(.999999,Z)))}return re}(_,m,te);(function(X,K,Q){for(var Z=0;Z<=o;Z+=4)X[p(Z)](l(Z/4,K,Q))})(j,_,J),S||w||(D=E.texture(T.extendFlat({data:r(v.unitToColor,255)},t)))}return{render:function(V,U,te){var J,X,K,Q=V.length,Z=1/0,re=-1/0;for(J=0;J<Q;J++)V[J].dim0.canvasX<Z&&(Z=V[J].dim0.canvasX,X=J),V[J].dim1.canvasX>re&&(re=V[J].dim1.canvasX,K=J);Q===0&&a(E,0,0,v.canvasWidth,v.canvasHeight);var oe=function(_e){var se,ie,fe,Ee=[[],[]];for(fe=0;fe<64;fe++){var Te=!_e&&fe<m.length?m[fe].brush.filter.getBounds():[-1/0,1/0];Ee[0][fe]=Te[0],Ee[1][fe]=Te[1]}var Ae=new Array(16384);for(se=0;se<16384;se++)Ae[se]=255;if(!_e)for(se=0;se<m.length;se++){var Se=se%8,Oe=(se-Se)/8,De=Math.pow(2,Se),de=m[se].brush.filter.get();if(!(de.length<2)){var me=x(de[0])[1];for(ie=1;ie<de.length;ie++){var Me=x(de[ie]);for(fe=me+1;fe<Me[0];fe++)Ae[8*fe+Oe]&=~De;me=Math.max(me,Me[1])}}}var ze={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ae};return f?f(ze):f=E.texture(ze),{maskTexture:f,maskHeight:2048,loA:Ee[0].slice(0,16),loB:Ee[0].slice(16,32),loC:Ee[0].slice(32,48),loD:Ee[0].slice(48,64),hiA:Ee[1].slice(0,16),hiB:Ee[1].slice(16,32),hiC:Ee[1].slice(32,48),hiD:Ee[1].slice(48,64)}}(S);for(J=0;J<Q;J++){var ae=V[J],ce=ae.dim0.crossfilterDimensionIndex,he=ae.dim1.crossfilterDimensionIndex,pe=ae.canvasX,xe=ae.canvasY,be=pe+ae.panelSizeX,ve=ae.plotGlPixelRatio;if(U||!N[ce]||N[ce][0]!==pe||N[ce][1]!==be){N[ce]=[pe,be];var ge=c(v,X,K,J,ce,he,pe,xe,ae.panelSizeX,ae.panelSizeY,ae.dim0.crossfilterDimensionIndex,S?0:w?2:1,oe,ve);R.clearOnly=te;var we=U?v.lines.blockLineCount:_;n(E,W,R,we,_,ge)}}},readPixel:function(V,U){return E.read({x:V,y:U,width:1,height:1,data:s}),s},readPixels:function(V,U,te,J){var X=new Uint8Array(4*te*J);return E.read({x:V,y:U,width:te,height:J,data:X}),X},destroy:function(){for(var V in d.style["pointer-events"]="none",D.destroy(),f&&f.destroy(),j)j[V].destroy()},update:F}}},26284:function(ee){ee.exports=function(z,e,M,k){var o,T;for(k||(k=1/0),o=0;o<e.length;o++)(T=e[o]).visible&&(k=Math.min(k,T[M].length));for(k===1/0&&(k=0),z._length=k,o=0;o<e.length;o++)(T=e[o]).visible&&(T._length=k);return k}},36336:function(ee,z,e){var M=e(33428),k=e(3400),o=k.isArrayOrTypedArray,T=k.numberFormat,b=e(96824),h=e(54460),s=k.strRotate,t=k.strTranslate,a=e(72736),n=e(43616),r=e(8932),i=e(71688),l=i.keyFun,u=i.repeat,p=i.unwrap,c=e(95724),x=e(30140),d=e(71864),g=e(51352);function v(W,F,V){return k.aggNums(W,null,F,V)}function y(W,F){return _(v(Math.min,W,F),v(Math.max,W,F))}function m(W){var F=W.range;return F?_(F[0],F[1]):y(W.values,W._length)}function _(W,F){return!isNaN(W)&&isFinite(W)||(W=0),!isNaN(F)&&isFinite(F)||(F=0),W===F&&(W===0?(W-=1,F+=1):(W*=.9,F*=1.1)),[W,F]}function f(W,F,V,U,te){var J,X,K=m(V);return U?M.scale.ordinal().domain(U.map((J=T(V.tickformat),X=te,X?function(Q,Z){var re=X[Z];return re??J(Q)}:J))).range(U.map(function(Q){var Z=(Q-K[0])/(K[1]-K[0]);return W-F+Z*(2*F-W)})):M.scale.linear().domain(K).range([W-F,F])}function S(W){if(W.tickvals){var F=m(W);return M.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(V){return(V-F[0])/(F[1]-F[0])}))}}function w(W){var F=W.map(function(te){return te[0]}),V=W.map(function(te){var J=b(te[1]);return M.rgb("rgb("+J[0]+","+J[1]+","+J[2]+")")}),U="rgb".split("").map(function(te){return M.scale.linear().clamp(!0).domain(F).range(V.map((J=te,function(X){return X[J]})));var J});return function(te){return U.map(function(J){return J(te)})}}function E(W){return W.dimensions.some(function(F){return F.brush.filterSpecified})}function O(W,F,V){var U=p(F),te=U.trace,J=c.convertTypedArray(U.lineColor),X=te.line,K={color:b(te.unselected.line.color),opacity:te.unselected.line.opacity},Q=r.extractOpts(X),Z=Q.reversescale?r.flipScale(U.cscale):U.cscale,re=te.domain,oe=te.dimensions,ae=W.width,ce=te.labelangle,he=te.labelside,pe=te.labelfont,xe=te.tickfont,be=te.rangefont,ve=k.extendDeepNoArrays({},X,{color:J.map(M.scale.linear().domain(m({values:J,range:[Q.min,Q.max],_length:te._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),ge=Math.floor(ae*(re.x[1]-re.x[0])),we=Math.floor(W.height*(re.y[1]-re.y[0])),_e=W.margin||{l:80,r:80,t:100,b:80},se=ge,ie=we;return{key:V,colCount:oe.filter(c.isVisible).length,dimensions:oe,tickDistance:x.tickDistance,unitToColor:w(Z),lines:ve,deselectedLines:K,labelAngle:ce,labelSide:he,labelFont:pe,tickFont:xe,rangeFont:be,layoutWidth:ae,layoutHeight:W.height,domain:re,translateX:re.x[0]*ae,translateY:W.height-re.y[1]*W.height,pad:_e,canvasWidth:se*x.canvasPixelRatio+2*ve.canvasOverdrag,canvasHeight:ie*x.canvasPixelRatio,width:se,height:ie,canvasPixelRatio:x.canvasPixelRatio}}function C(W,F,V){var U=V.width,te=V.height,J=V.dimensions,X=V.canvasPixelRatio,K=function(ae){return U*ae/Math.max(1,V.colCount-1)},Q=x.verticalPadding/te,Z=function(ae,ce){return M.scale.linear().range([ce,ae-ce])}(te,x.verticalPadding),re={key:V.key,xScale:K,model:V,inBrushDrag:!1},oe={};return re.dimensions=J.filter(c.isVisible).map(function(ae,ce){var he=function(Se,Oe){return M.scale.linear().domain(m(Se)).range([Oe,1-Oe])}(ae,Q),pe=oe[ae.label];oe[ae.label]=(pe||0)+1;var xe=ae.label+(pe?"__"+pe:""),be=ae.constraintrange,ve=be&&be.length;ve&&!o(be[0])&&(be=[be]);var ge=ve?be.map(function(Se){return Se.map(he)}):[[-1/0,1/0]],we=ae.values;we.length>ae._length&&(we=we.slice(0,ae._length));var _e,se=ae.tickvals;function ie(Se,Oe){return{val:Se,text:_e[Oe]}}function fe(Se,Oe){return Se.val-Oe.val}if(o(se)&&se.length){k.isTypedArray(se)&&(se=Array.from(se)),_e=ae.ticktext,o(_e)&&_e.length?_e.length>se.length?_e=_e.slice(0,se.length):se.length>_e.length&&(se=se.slice(0,_e.length)):_e=se.map(T(ae.tickformat));for(var Ee=1;Ee<se.length;Ee++)if(se[Ee]<se[Ee-1]){for(var Te=se.map(ie).sort(fe),Ae=0;Ae<se.length;Ae++)se[Ae]=Te[Ae].val,_e[Ae]=Te[Ae].text;break}}else se=void 0;return we=c.convertTypedArray(we),{key:xe,label:ae.label,tickFormat:ae.tickformat,tickvals:se,ticktext:_e,ordinal:c.isOrdinal(ae),multiselect:ae.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:ae._index,height:te,values:we,paddedUnitValues:we.map(he),unitTickvals:se&&se.map(he),xScale:K,x:K(ce),canvasX:K(ce)*X,unitToPaddedPx:Z,domainScale:f(te,x.verticalPadding,ae,se,_e),ordinalScale:S(ae),parent:re,model:V,brush:d.makeBrush(W,ve,ge,function(){W.linePickActive(!1)},function(){var Se=re;Se.focusLayer&&Se.focusLayer.render(Se.panels,!0);var Oe=E(Se);!W.contextShown()&&Oe?(Se.contextLayer&&Se.contextLayer.render(Se.panels,!0),W.contextShown(!0)):W.contextShown()&&!Oe&&(Se.contextLayer&&Se.contextLayer.render(Se.panels,!0,!0),W.contextShown(!1))},function(Se){if(re.focusLayer.render(re.panels,!0),re.pickLayer&&re.pickLayer.render(re.panels,!0),W.linePickActive(!0),F&&F.filterChanged){var Oe=he.invert,De=Se.map(function(de){return de.map(Oe).sort(k.sorterAsc)}).sort(function(de,me){return de[0]-me[0]});F.filterChanged(re.key,ae._index,De)}})}}),re}function P(W){W.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(W,F){var V=F==="top"?1:-1,U=W*Math.PI/180;return{dir:V,dx:Math.sin(U),dy:Math.cos(U),degrees:W}}function j(W,F,V){for(var U=F.panels||(F.panels=[]),te=W.data(),J=0;J<te.length-1;J++){var X=U[J]||(U[J]={}),K=te[J],Q=te[J+1];X.dim0=K,X.dim1=Q,X.canvasX=K.canvasX,X.panelSizeX=Q.canvasX-K.canvasX,X.panelSizeY=F.model.canvasHeight,X.y=0,X.canvasY=0,X.plotGlPixelRatio=V}}function D(W,F){return h.tickText(W._ax,F,!1).text}function N(W,F){if(W.ordinal)return"";var V=W.domainScale.domain(),U=V[F?V.length-1:0];return D(W.model.dimensions[W.visibleIndex],U)}ee.exports=function(W,F,V,U){var te=W._context.staticPlot,J=W._fullLayout,X=J._toppaper,K=J._glcontainer,Q=W._context.plotGlPixelRatio,Z=W._fullLayout.paper_bgcolor;(function(Se){for(var Oe=0;Oe<Se.length;Oe++)for(var De=0;De<Se[Oe].length;De++)for(var de=Se[Oe][De].trace,me=de.dimensions,Me=0;Me<me.length;Me++){var ze=me[Me].values,Pe=me[Me]._ax;Pe&&(Pe.range?Pe.range=_(Pe.range[0],Pe.range[1]):Pe.range=y(ze,de._length),Pe.dtick||(Pe.dtick=.01*(Math.abs(Pe.range[1]-Pe.range[0])||1)),Pe.tickformat=me[Me].tickformat,h.calcTicks(Pe),Pe.cleanRange())}})(F);var re,oe,ae=(re=!0,oe=!1,{linePickActive:function(Se){return arguments.length?re=!!Se:re},contextShown:function(Se){return arguments.length?oe=!!Se:oe}}),ce=F.filter(function(Se){return p(Se).trace.visible}).map(O.bind(0,V)).map(C.bind(0,ae,U));K.each(function(Se,Oe){return k.extendFlat(Se,ce[Oe])});var he=K.selectAll(".gl-canvas").each(function(Se){Se.viewModel=ce[0],Se.viewModel.plotGlPixelRatio=Q,Se.viewModel.paperColor=Z,Se.model=Se.viewModel?Se.viewModel.model:null}),pe=null;he.filter(function(Se){return Se.pick}).style("pointer-events",te?"none":"auto").on("mousemove",function(Se){if(ae.linePickActive()&&Se.lineLayer&&U&&U.hover){var Oe=M.event,De=this.width,de=this.height,me=M.mouse(this),Me=me[0],ze=me[1];if(Me<0||ze<0||Me>=De||ze>=de)return;var Pe=Se.lineLayer.readPixel(Me,de-1-ze),Ne=Pe[3]!==0,Ve=Ne?Pe[2]+256*(Pe[1]+256*Pe[0]):null,Ye={x:Me,y:ze,clientX:Oe.clientX,clientY:Oe.clientY,dataIndex:Se.model.key,curveNumber:Ve};Ve!==pe&&(Ne?U.hover(Ye):U.unhover&&U.unhover(Ye),pe=Ve)}}),he.style("opacity",function(Se){return Se.pick?0:1}),X.style("background","rgba(255, 255, 255, 0)");var xe=X.selectAll("."+x.cn.parcoords).data(ce,l);xe.exit().remove(),xe.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),xe.attr("transform",function(Se){return t(Se.model.translateX,Se.model.translateY)});var be=xe.selectAll("."+x.cn.parcoordsControlView).data(u,l);be.enter().append("g").classed(x.cn.parcoordsControlView,!0),be.attr("transform",function(Se){return t(Se.model.pad.l,Se.model.pad.t)});var ve=be.selectAll("."+x.cn.yAxis).data(function(Se){return Se.dimensions},l);ve.enter().append("g").classed(x.cn.yAxis,!0),be.each(function(Se){j(ve,Se,Q)}),he.each(function(Se){if(Se.viewModel){!Se.lineLayer||U?Se.lineLayer=g(this,Se):Se.lineLayer.update(Se),(Se.key||Se.key===0)&&(Se.viewModel[Se.key]=Se.lineLayer);var Oe=!Se.context||U;Se.lineLayer.render(Se.viewModel.panels,Oe)}}),ve.attr("transform",function(Se){return t(Se.xScale(Se.xIndex),0)}),ve.call(M.behavior.drag().origin(function(Se){return Se}).on("drag",function(Se){var Oe=Se.parent;ae.linePickActive(!1),Se.x=Math.max(-x.overdrag,Math.min(Se.model.width+x.overdrag,M.event.x)),Se.canvasX=Se.x*Se.model.canvasPixelRatio,ve.sort(function(De,de){return De.x-de.x}).each(function(De,de){De.xIndex=de,De.x=Se===De?De.x:De.xScale(De.xIndex),De.canvasX=De.x*De.model.canvasPixelRatio}),j(ve,Oe,Q),ve.filter(function(De){return Math.abs(Se.xIndex-De.xIndex)!==0}).attr("transform",function(De){return t(De.xScale(De.xIndex),0)}),M.select(this).attr("transform",t(Se.x,0)),ve.each(function(De,de,me){me===Se.parent.key&&(Oe.dimensions[de]=De)}),Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!1,!E(Oe)),Oe.focusLayer.render&&Oe.focusLayer.render(Oe.panels)}).on("dragend",function(Se){var Oe=Se.parent;Se.x=Se.xScale(Se.xIndex),Se.canvasX=Se.x*Se.model.canvasPixelRatio,j(ve,Oe,Q),M.select(this).attr("transform",function(De){return t(De.x,0)}),Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!1,!E(Oe)),Oe.focusLayer&&Oe.focusLayer.render(Oe.panels),Oe.pickLayer&&Oe.pickLayer.render(Oe.panels,!0),ae.linePickActive(!0),U&&U.axesMoved&&U.axesMoved(Oe.key,Oe.dimensions.map(function(De){return De.crossfilterDimensionIndex}))})),ve.exit().remove();var ge=ve.selectAll("."+x.cn.axisOverlays).data(u,l);ge.enter().append("g").classed(x.cn.axisOverlays,!0),ge.selectAll("."+x.cn.axis).remove();var we=ge.selectAll("."+x.cn.axis).data(u,l);we.enter().append("g").classed(x.cn.axis,!0),we.each(function(Se){var Oe=Se.model.height/Se.model.tickDistance,De=Se.domainScale,de=De.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Oe,Se.tickFormat).tickValues(Se.ordinal?de:null).tickFormat(function(me){return c.isOrdinal(Se)?me:D(Se.model.dimensions[Se.visibleIndex],me)}).scale(De)),n.font(we.selectAll("text"),Se.model.tickFont)}),we.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),we.selectAll("text").style("text-shadow",a.makeTextShadow(Z)).style("cursor","default");var _e=ge.selectAll("."+x.cn.axisHeading).data(u,l);_e.enter().append("g").classed(x.cn.axisHeading,!0);var se=_e.selectAll("."+x.cn.axisTitle).data(u,l);se.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),se.text(function(Se){return Se.label}).each(function(Se){var Oe=M.select(this);n.font(Oe,Se.model.labelFont),a.convertToTspans(Oe,W)}).attr("transform",function(Se){var Oe=R(Se.model.labelAngle,Se.model.labelSide),De=x.axisTitleOffset;return(Oe.dir>0?"":t(0,2*De+Se.model.height))+s(Oe.degrees)+t(-De*Oe.dx,-De*Oe.dy)}).attr("text-anchor",function(Se){var Oe=R(Se.model.labelAngle,Se.model.labelSide);return 2*Math.abs(Oe.dx)>Math.abs(Oe.dy)?Oe.dir*Oe.dx<0?"start":"end":"middle"});var ie=ge.selectAll("."+x.cn.axisExtent).data(u,l);ie.enter().append("g").classed(x.cn.axisExtent,!0);var fe=ie.selectAll("."+x.cn.axisExtentTop).data(u,l);fe.enter().append("g").classed(x.cn.axisExtentTop,!0),fe.attr("transform",t(0,-x.axisExtentOffset));var Ee=fe.selectAll("."+x.cn.axisExtentTopText).data(u,l);Ee.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(P),Ee.text(function(Se){return N(Se,!0)}).each(function(Se){n.font(M.select(this),Se.model.rangeFont)});var Te=ie.selectAll("."+x.cn.axisExtentBottom).data(u,l);Te.enter().append("g").classed(x.cn.axisExtentBottom,!0),Te.attr("transform",function(Se){return t(0,Se.model.height+x.axisExtentOffset)});var Ae=Te.selectAll("."+x.cn.axisExtentBottomText).data(u,l);Ae.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(P),Ae.text(function(Se){return N(Se,!1)}).each(function(Se){n.font(M.select(this),Se.model.rangeFont)}),d.ensureAxisBrush(ge,Z,W)}},24196:function(ee,z,e){var M=e(36336),k=e(5048),o=e(95724).isVisible,T={};function b(h,s,t){var a=s.indexOf(t),n=h.indexOf(a);return n===-1&&(n+=s.length),n}(ee.exports=function(h,s){var t=h._fullLayout;if(k(h,[],T)){var a={},n={},r={},i={},l=t._size;s.forEach(function(u,p){var c=u[0].trace;r[p]=c.index;var x=i[p]=c._fullInput.index;a[p]=h.data[x].dimensions,n[p]=h.data[x].dimensions.slice()}),M(h,s,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(u,p,c){var x=n[u][p],d=c.map(function(f){return f.slice()}),g="dimensions["+p+"].constraintrange",v=t._tracePreGUI[h._fullData[r[u]]._fullInput.uid];if(v[g]===void 0){var y=x.constraintrange;v[g]=y||null}var m=h._fullData[r[u]].dimensions[p];d.length?(d.length===1&&(d=d[0]),x.constraintrange=d,m.constraintrange=d.slice(),d=[d]):(delete x.constraintrange,delete m.constraintrange,d=null);var _={};_[g]=d,h.emit("plotly_restyle",[_,[i[u]]])},hover:function(u){h.emit("plotly_hover",u)},unhover:function(u){h.emit("plotly_unhover",u)},axesMoved:function(u,p){var c=function(x,d){return function(g,v){return b(x,d,g)-b(x,d,v)}}(p,n[u].filter(o));a[u].sort(c),n[u].filter(function(x){return!o(x)}).sort(function(x){return n[u].indexOf(x)}).forEach(function(x){a[u].splice(a[u].indexOf(x),1),a[u].splice(n[u].indexOf(x),0,x)}),h.emit("plotly_restyle",[{dimensions:[a[u]]},[i[u]]])}})}}).reglPrecompiled=T},74996:function(ee,z,e){var M=e(45464),k=e(86968).u,o=e(25376),T=e(22548),b=e(21776).Ks,h=e(21776).Gw,s=e(92880).extendFlat,t=e(98192).c,a=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});ee.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},a,{}),outsidetextfont:s({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(ee,z,e){var M=e(7316);z.name="pie",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},45768:function(ee,z,e){var M=e(38248),k=e(49760),o=e(76308),T={};function b(s){return function(t,a){return!!t&&!!(t=k(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),s[a]||(s[a]=t),t)}}function h(s,t){var a,n=JSON.stringify(s),r=t[n];if(!r){for(r=s.slice(),a=0;a<s.length;a++)r.push(k(s[a]).lighten(20).toHexString());for(a=0;a<s.length;a++)r.push(k(s[a]).darken(20).toHexString());t[n]=r}return r}ee.exports={calc:function(s,t){var a,n,r=[],i=s._fullLayout,l=i.hiddenlabels||[],u=t.labels,p=t.marker.colors||[],c=t.values,x=t._length,d=t._hasValues&&x;if(t.dlabel)for(u=new Array(x),a=0;a<x;a++)u[a]=String(t.label0+a*t.dlabel);var g={},v=b(i["_"+t.type+"colormap"]),y=0,m=!1;for(a=0;a<x;a++){var _,f,S;if(d){if(_=c[a],!M(_))continue;_=+_}else _=1;(f=u[a])!==void 0&&f!==""||(f=a);var w=g[f=String(f)];w===void 0?(g[f]=r.length,(S=l.indexOf(f)!==-1)||(y+=_),r.push({v:_,label:f,color:v(p[a],f),i:a,pts:[a],hidden:S})):(m=!0,(n=r[w]).v+=_,n.pts.push(a),n.hidden||(y+=_),n.color===!1&&p[a]&&(n.color=v(p[a],f)))}return r=r.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?m:t.sort)&&r.sort(function(E,O){return O.v-E.v}),r[0]&&(r[0].vTotal=y),r},crossTraceCalc:function(s,t){var a=(t||{}).type;a||(a="pie");var n=s._fullLayout,r=s.calcdata,i=n[a+"colorway"],l=n["_"+a+"colormap"];n["extend"+a+"colors"]&&(i=h(i,T));for(var u=0,p=0;p<r.length;p++){var c=r[p];if(c[0].trace.type===a)for(var x=0;x<c.length;x++){var d=c[x];d.color===!1&&(l[d.label]?d.color=l[d.label]:(l[d.label]=d.color=i[u%i.length],u++))}}},makePullColorFn:b,generateExtendedColors:h}},74174:function(ee,z,e){var M=e(38248),k=e(3400),o=e(74996),T=e(86968).Q,b=e(31508).handleText,h=e(3400).coercePattern;function s(a,n){var r=k.isArrayOrTypedArray(a),i=k.isArrayOrTypedArray(n),l=Math.min(r?a.length:1/0,i?n.length:1/0);if(isFinite(l)||(l=0),l&&i){for(var u,p=0;p<l;p++){var c=n[p];if(M(c)&&c>0){u=!0;break}}u||(l=0)}return{hasLabels:r,hasValues:i,len:l}}function t(a,n,r,i,l){i("marker.line.width")&&i("marker.line.color",l?void 0:r.paper_bgcolor);var u=i("marker.colors");h(i,"marker.pattern",u),a.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=a.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=r.paper_bgcolor)}ee.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(a,n,r,i){function l(m,_){return k.coerce(a,n,o,m,_)}var u=s(l("labels"),l("values")),p=u.len;if(n._hasLabels=u.hasLabels,n._hasValues=u.hasValues,!n._hasLabels&&n._hasValues&&(l("label0"),l("dlabel")),p){n._length=p,t(a,n,i,l,!0),l("scalegroup");var c,x=l("text"),d=l("texttemplate");if(d||(c=l("textinfo",k.isArrayOrTypedArray(x)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),d||c&&c!=="none"){var g=l("textposition");b(a,n,i,l,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||g==="auto"||g==="outside")&&l("automargin"),(g==="inside"||g==="auto"||Array.isArray(g))&&l("insidetextorientation")}else c==="none"&&l("textposition","none");T(n,i,l);var v=l("hole");if(l("title.text")){var y=l("title.position",v?"middle center":"top center");v||y!=="middle center"||(n.title.position="top center"),k.coerceFont(l,"title.font",i.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else n.visible=!1}}},53644:function(ee,z,e){var M=e(10624).appendArrayMultiPointValues;ee.exports=function(k,o){var T={curveNumber:o.index,pointNumbers:k.pts,data:o._input,fullData:o,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),M(T,o,k.pts),o.type==="funnelarea"&&(delete T.v,delete T.i),T}},21552:function(ee,z,e){var M=e(43616),k=e(76308);ee.exports=function(o,T,b,h){var s=b.marker.pattern;s&&s.shape?M.pointStyle(o,b,h,T):k.fill(o,T.color)}},69656:function(ee,z,e){var M=e(3400);function k(o){return o.indexOf("e")!==-1?o.replace(/[.]?0+e/,"e"):o.indexOf(".")!==-1?o.replace(/[.]?0+$/,""):o}z.formatPiePercent=function(o,T){var b=k((100*o).toPrecision(3));return M.numSeparate(b,T)+"%"},z.formatPieValue=function(o,T){var b=k(o.toPrecision(10));return M.numSeparate(b,T)},z.getFirstFilled=function(o,T){if(M.isArrayOrTypedArray(o))for(var b=0;b<T.length;b++){var h=o[T[b]];if(h||h===0||h==="")return h}},z.castOption=function(o,T){return M.isArrayOrTypedArray(o)?z.getFirstFilled(o,T):o||void 0},z.getRotationAngle=function(o){return(o==="auto"?0:o)*Math.PI/180}},75792:function(ee,z,e){ee.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(ee){ee.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(ee,z,e){var M=e(3400),k=e(85204);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},37820:function(ee,z,e){var M=e(33428),k=e(7316),o=e(93024),T=e(76308),b=e(43616),h=e(3400),s=h.strScale,t=h.strTranslate,a=e(72736),n=e(82744),r=n.recordMinTextSize,i=n.clearMinTextSize,l=e(78048).TEXTPAD,u=e(69656),p=e(53644),c=e(3400).isValidTextValue;function x(W,F,V){var U=V[0],te=U.cx,J=U.cy,X=U.trace,K=X.type==="funnelarea";"_hasHoverLabel"in X||(X._hasHoverLabel=!1),"_hasHoverEvent"in X||(X._hasHoverEvent=!1),W.on("mouseover",function(Q){var Z=F._fullLayout,re=F._fullData[X.index];if(!F._dragging&&Z.hovermode!==!1){var oe=re.hoverinfo;if(Array.isArray(oe)&&(oe=o.castHoverinfo({hoverinfo:[u.castOption(oe,Q.pts)],_module:X._module},Z,0)),oe==="all"&&(oe="label+text+value+percent+name"),re.hovertemplate||oe!=="none"&&oe!=="skip"&&oe){var ae=Q.rInscribed||0,ce=te+Q.pxmid[0]*(1-ae),he=J+Q.pxmid[1]*(1-ae),pe=Z.separators,xe=[];if(oe&&oe.indexOf("label")!==-1&&xe.push(Q.label),Q.text=u.castOption(re.hovertext||re.text,Q.pts),oe&&oe.indexOf("text")!==-1){var be=Q.text;h.isValidTextValue(be)&&xe.push(be)}Q.value=Q.v,Q.valueLabel=u.formatPieValue(Q.v,pe),oe&&oe.indexOf("value")!==-1&&xe.push(Q.valueLabel),Q.percent=Q.v/U.vTotal,Q.percentLabel=u.formatPiePercent(Q.percent,pe),oe&&oe.indexOf("percent")!==-1&&xe.push(Q.percentLabel);var ve=re.hoverlabel,ge=ve.font,we=[];o.loneHover({trace:X,x0:ce-ae*U.r,x1:ce+ae*U.r,y:he,_x0:K?te+Q.TL[0]:ce-ae*U.r,_x1:K?te+Q.TR[0]:ce+ae*U.r,_y0:K?J+Q.TL[1]:he-ae*U.r,_y1:K?J+Q.BL[1]:he+ae*U.r,text:xe.join("<br>"),name:re.hovertemplate||oe.indexOf("name")!==-1?re.name:void 0,idealAlign:Q.pxmid[0]<0?"left":"right",color:u.castOption(ve.bgcolor,Q.pts)||Q.color,borderColor:u.castOption(ve.bordercolor,Q.pts),fontFamily:u.castOption(ge.family,Q.pts),fontSize:u.castOption(ge.size,Q.pts),fontColor:u.castOption(ge.color,Q.pts),nameLength:u.castOption(ve.namelength,Q.pts),textAlign:u.castOption(ve.align,Q.pts),hovertemplate:u.castOption(re.hovertemplate,Q.pts),hovertemplateLabels:Q,eventData:[p(Q,re)]},{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:F,inOut_bbox:we}),Q.bbox=we[0],X._hasHoverLabel=!0}X._hasHoverEvent=!0,F.emit("plotly_hover",{points:[p(Q,re)],event:M.event})}}),W.on("mouseout",function(Q){var Z=F._fullLayout,re=F._fullData[X.index],oe=M.select(this).datum();X._hasHoverEvent&&(Q.originalEvent=M.event,F.emit("plotly_unhover",{points:[p(oe,re)],event:M.event}),X._hasHoverEvent=!1),X._hasHoverLabel&&(o.loneUnhover(Z._hoverlayer.node()),X._hasHoverLabel=!1)}),W.on("click",function(Q){var Z=F._fullLayout,re=F._fullData[X.index];F._dragging||Z.hovermode===!1||(F._hoverdata=[p(Q,re)],o.click(F,M.event))})}function d(W,F,V){var U=u.castOption(W.insidetextfont.color,F.pts);!U&&W._input.textfont&&(U=u.castOption(W._input.textfont.color,F.pts));var te=u.castOption(W.insidetextfont.family,F.pts)||u.castOption(W.textfont.family,F.pts)||V.family,J=u.castOption(W.insidetextfont.size,F.pts)||u.castOption(W.textfont.size,F.pts)||V.size,X=u.castOption(W.insidetextfont.weight,F.pts)||u.castOption(W.textfont.weight,F.pts)||V.weight,K=u.castOption(W.insidetextfont.style,F.pts)||u.castOption(W.textfont.style,F.pts)||V.style,Q=u.castOption(W.insidetextfont.variant,F.pts)||u.castOption(W.textfont.variant,F.pts)||V.variant;return{color:U||T.contrast(F.color),family:te,size:J,weight:X,style:K,variant:Q}}function g(W,F){for(var V,U,te=0;te<W.length;te++)if((U=(V=W[te][0]).trace).title.text){var J=U.title.text;U._meta&&(J=h.templateString(J,U._meta));var X=b.tester.append("text").attr("data-notex",1).text(J).call(b.font,U.title.font).call(a.convertToTspans,F),K=b.bBox(X.node(),!0);V.titleBox={width:K.width,height:K.height},X.remove()}}function v(W,F,V){var U=V.r||F.rpx1,te=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var J,X=F.ring,K=X===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,Q=F.halfangle,Z=F.midangle,re=V.trace.insidetextorientation,oe=re==="horizontal",ae=re==="tangential",ce=re==="radial",he=re==="auto",pe=[];if(!he){var xe,be=function(ie,fe){if(function(Se,Oe){var De=Se.startangle,de=Se.stopangle;return De>Oe&&Oe>de||De<Oe&&Oe<de}(F,ie)){var Ee=Math.abs(ie-F.startangle),Te=Math.abs(ie-F.stopangle),Ae=Ee<Te?Ee:Te;(J=fe==="tan"?m(W,U,X,Ae,0):y(W,U,X,Ae,Math.PI/2)).textPosAngle=ie,pe.push(J)}};if(oe||ae){for(xe=4;xe>=-4;xe-=2)be(Math.PI*xe,"tan");for(xe=4;xe>=-4;xe-=2)be(Math.PI*(xe+1),"tan")}if(oe||ce){for(xe=4;xe>=-4;xe-=2)be(Math.PI*(xe+1.5),"rad");for(xe=4;xe>=-4;xe-=2)be(Math.PI*(xe+.5),"rad")}}if(K||he||oe){var ve=Math.sqrt(W.width*W.width+W.height*W.height);if((J={scale:te*U*2/ve,rCenter:1-te,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,J.scale>=1)return J;pe.push(J)}(he||ce)&&((J=y(W,U,X,Q,Z)).textPosAngle=(F.startangle+F.stopangle)/2,pe.push(J)),(he||ae)&&((J=m(W,U,X,Q,Z)).textPosAngle=(F.startangle+F.stopangle)/2,pe.push(J));for(var ge=0,we=0,_e=0;_e<pe.length;_e++){var se=pe[_e].scale;if(we<se&&(we=se,ge=_e),!he&&we>=1)break}return pe[ge]}function y(W,F,V,U,te){F=Math.max(0,F-2*l);var J=W.width/W.height,X=S(J,U,F,V);return{scale:2*X/W.height,rCenter:_(J,X/F),rotate:f(te)}}function m(W,F,V,U,te){F=Math.max(0,F-2*l);var J=W.height/W.width,X=S(J,U,F,V);return{scale:2*X/W.width,rCenter:_(J,X/F),rotate:f(te+Math.PI/2)}}function _(W,F){return Math.cos(F)-W*F}function f(W){return(180/Math.PI*W+720)%180-90}function S(W,F,V,U){var te=W+1/(2*Math.tan(F));return V*Math.min(1/(Math.sqrt(te*te+.5)+te),U/(Math.sqrt(W*W+U/2)+W))}function w(W,F){return W.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(W.halfangle)),W.ring/2):1}function E(W,F){var V=F.pxmid[0],U=F.pxmid[1],te=W.width/2,J=W.height/2;return V<0&&(te*=-1),U<0&&(J*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(J)*(te>0?1:-1)/2,y:J/(1+V*V/(U*U)),outside:!0}}function O(W,F){var V,U,te,J=W.trace,X={x:W.cx,y:W.cy},K={tx:0,ty:0};K.ty+=J.title.font.size,te=P(J),J.title.position.indexOf("top")!==-1?(X.y-=(1+te)*W.r,K.ty-=W.titleBox.height):J.title.position.indexOf("bottom")!==-1&&(X.y+=(1+te)*W.r);var Q,Z=W.r/((Q=W.trace.aspectratio)===void 0?1:Q),re=F.w*(J.domain.x[1]-J.domain.x[0])/2;return J.title.position.indexOf("left")!==-1?(re+=Z,X.x-=(1+te)*Z,K.tx+=W.titleBox.width/2):J.title.position.indexOf("center")!==-1?re*=2:J.title.position.indexOf("right")!==-1&&(re+=Z,X.x+=(1+te)*Z,K.tx-=W.titleBox.width/2),V=re/W.titleBox.width,U=C(W,F)/W.titleBox.height,{x:X.x,y:X.y,scale:Math.min(V,U),tx:K.tx,ty:K.ty}}function C(W,F){var V=W.trace,U=F.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(W.titleBox.height,U/2)}function P(W){var F,V=W.pull;if(!V)return 0;if(h.isArrayOrTypedArray(V))for(V=0,F=0;F<W.pull.length;F++)W.pull[F]>V&&(V=W.pull[F]);return V}function R(W,F){for(var V=[],U=0;U<W.length;U++){var te=W[U][0],J=te.trace,X=J.domain,K=F.w*(X.x[1]-X.x[0]),Q=F.h*(X.y[1]-X.y[0]);J.title.text&&J.title.position!=="middle center"&&(Q-=C(te,F));var Z=K/2,re=Q/2;J.type!=="funnelarea"||J.scalegroup||(re/=J.aspectratio),te.r=Math.min(Z,re)/(1+P(J)),te.cx=F.l+F.w*(J.domain.x[1]+J.domain.x[0])/2,te.cy=F.t+F.h*(1-J.domain.y[0])-Q/2,J.title.text&&J.title.position.indexOf("bottom")!==-1&&(te.cy-=C(te,F)),J.scalegroup&&V.indexOf(J.scalegroup)===-1&&V.push(J.scalegroup)}(function(oe,ae){for(var ce,he,pe,xe=0;xe<ae.length;xe++){var be=1/0,ve=ae[xe];for(he=0;he<oe.length;he++)if((pe=(ce=oe[he][0]).trace).scalegroup===ve){var ge;if(pe.type==="pie")ge=ce.r*ce.r;else if(pe.type==="funnelarea"){var we,_e;pe.aspectratio>1?_e=(we=ce.r)/pe.aspectratio:we=(_e=ce.r)*pe.aspectratio,ge=(we*=(1+pe.baseratio)/2)*_e}be=Math.min(be,ge/ce.vTotal)}for(he=0;he<oe.length;he++)if((pe=(ce=oe[he][0]).trace).scalegroup===ve){var se=be*ce.vTotal;pe.type==="funnelarea"&&(se/=(1+pe.baseratio)/2,se/=pe.aspectratio),ce.r=Math.sqrt(se)}}})(W,V)}function j(W,F){return[W*Math.sin(F),-W*Math.cos(F)]}function D(W,F,V){var U=W._fullLayout,te=V.trace,J=te.texttemplate,X=te.textinfo;if(!J&&X&&X!=="none"){var K,Q=X.split("+"),Z=function(ge){return Q.indexOf(ge)!==-1},re=Z("label"),oe=Z("text"),ae=Z("value"),ce=Z("percent"),he=U.separators;if(K=re?[F.label]:[],oe){var pe=u.getFirstFilled(te.text,F.pts);c(pe)&&K.push(pe)}ae&&K.push(u.formatPieValue(F.v,he)),ce&&K.push(u.formatPiePercent(F.v/V.vTotal,he)),F.text=K.join("<br>")}if(J){var xe=h.castOption(te,F.i,"texttemplate");if(xe){var be=function(ge){return{label:ge.label,value:ge.v,valueLabel:u.formatPieValue(ge.v,U.separators),percent:ge.v/V.vTotal,percentLabel:u.formatPiePercent(ge.v/V.vTotal,U.separators),color:ge.color,text:ge.text,customdata:h.castOption(te,ge.i,"customdata")}}(F),ve=u.getFirstFilled(te.text,F.pts);(c(ve)||ve==="")&&(be.text=ve),F.text=h.texttemplateString(xe,be,W._fullLayout._d3locale,be,te._meta||{})}else F.text=""}}function N(W,F){var V=W.rotate*Math.PI/180,U=Math.cos(V),te=Math.sin(V),J=(F.left+F.right)/2,X=(F.top+F.bottom)/2;W.textX=J*U-X*te,W.textY=J*te+X*U,W.noCenter=!0}ee.exports={plot:function(W,F){var V=W._context.staticPlot,U=W._fullLayout,te=U._size;i("pie",U),g(F,W),R(F,te);var J=h.makeTraceGroups(U._pielayer,F,"trace").each(function(X){var K=M.select(this),Q=X[0],Z=Q.trace;(function(re){var oe,ae,ce,he=re[0],pe=he.r,xe=he.trace,be=u.getRotationAngle(xe.rotation),ve=2*Math.PI/he.vTotal,ge="px0",we="px1";if(xe.direction==="counterclockwise"){for(oe=0;oe<re.length&&re[oe].hidden;oe++);if(oe===re.length)return;be+=ve*re[oe].v,ve*=-1,ge="px1",we="px0"}for(ce=j(pe,be),oe=0;oe<re.length;oe++)(ae=re[oe]).hidden||(ae[ge]=ce,ae.startangle=be,be+=ve*ae.v/2,ae.pxmid=j(pe,be),ae.midangle=be,ce=j(pe,be+=ve*ae.v/2),ae.stopangle=be,ae[we]=ce,ae.largeArc=ae.v>he.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/he.vTotal,.5),ae.ring=1-xe.hole,ae.rInscribed=w(ae,he))})(X),K.attr("stroke-linejoin","round"),K.each(function(){var re=M.select(this).selectAll("g.slice").data(X);re.enter().append("g").classed("slice",!0),re.exit().remove();var oe=[[[],[]],[[],[]]],ae=!1;re.each(function(we,_e){if(we.hidden)M.select(this).selectAll("path,g").remove();else{we.pointNumber=we.i,we.curveNumber=Z.index,oe[we.pxmid[1]<0?0:1][we.pxmid[0]<0?0:1].push(we);var se=Q.cx,ie=Q.cy,fe=M.select(this),Ee=fe.selectAll("path.surface").data([we]);if(Ee.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),fe.call(x,W,X),Z.pull){var Te=+u.castOption(Z.pull,we.pts)||0;Te>0&&(se+=Te*we.pxmid[0],ie+=Te*we.pxmid[1])}we.cxFinal=se,we.cyFinal=ie;var Ae=Z.hole;if(we.v===Q.vTotal){var Se="M"+(se+we.px0[0])+","+(ie+we.px0[1])+Me(we.px0,we.pxmid,!0,1)+Me(we.pxmid,we.px0,!0,1)+"Z";Ae?Ee.attr("d","M"+(se+Ae*we.px0[0])+","+(ie+Ae*we.px0[1])+Me(we.px0,we.pxmid,!1,Ae)+Me(we.pxmid,we.px0,!1,Ae)+"Z"+Se):Ee.attr("d",Se)}else{var Oe=Me(we.px0,we.px1,!0,1);if(Ae){var De=1-Ae;Ee.attr("d","M"+(se+Ae*we.px1[0])+","+(ie+Ae*we.px1[1])+Me(we.px1,we.px0,!1,Ae)+"l"+De*we.px0[0]+","+De*we.px0[1]+Oe+"Z")}else Ee.attr("d","M"+se+","+ie+"l"+we.px0[0]+","+we.px0[1]+Oe+"Z")}D(W,we,Q);var de=u.castOption(Z.textposition,we.pts),me=fe.selectAll("g.slicetext").data(we.text&&de!=="none"?[0]:[]);me.enter().append("g").classed("slicetext",!0),me.exit().remove(),me.each(function(){var ze=h.ensureSingle(M.select(this),"text","",function(vt){vt.attr("data-notex",1)}),Pe=h.ensureUniformFontSize(W,de==="outside"?function(vt,ht,et){return{color:u.castOption(vt.outsidetextfont.color,ht.pts)||u.castOption(vt.textfont.color,ht.pts)||et.color,family:u.castOption(vt.outsidetextfont.family,ht.pts)||u.castOption(vt.textfont.family,ht.pts)||et.family,size:u.castOption(vt.outsidetextfont.size,ht.pts)||u.castOption(vt.textfont.size,ht.pts)||et.size,weight:u.castOption(vt.outsidetextfont.weight,ht.pts)||u.castOption(vt.textfont.weight,ht.pts)||et.weight,style:u.castOption(vt.outsidetextfont.style,ht.pts)||u.castOption(vt.textfont.style,ht.pts)||et.style,variant:u.castOption(vt.outsidetextfont.variant,ht.pts)||u.castOption(vt.textfont.variant,ht.pts)||et.variant}}(Z,we,U.font):d(Z,we,U.font));ze.text(we.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Pe).call(a.convertToTspans,W);var Ne,Ve=b.bBox(ze.node());if(de==="outside")Ne=E(Ve,we);else if(Ne=v(Ve,we,Q),de==="auto"&&Ne.scale<1){var Ye=h.ensureUniformFontSize(W,Z.outsidetextfont);ze.call(b.font,Ye),Ne=E(Ve=b.bBox(ze.node()),we)}var at=Ne.textPosAngle,rt=at===void 0?we.pxmid:j(Q.r,at);if(Ne.targetX=se+rt[0]*Ne.rCenter+(Ne.x||0),Ne.targetY=ie+rt[1]*Ne.rCenter+(Ne.y||0),N(Ne,Ve),Ne.outside){var dt=Ne.targetY;we.yLabelMin=dt-Ve.height/2,we.yLabelMid=dt,we.yLabelMax=dt+Ve.height/2,we.labelExtraX=0,we.labelExtraY=0,ae=!0}Ne.fontSize=Pe.size,r(Z.type,Ne,U),X[_e].transform=Ne,h.setTransormAndDisplay(ze,Ne)})}function Me(ze,Pe,Ne,Ve){var Ye=Ve*(Pe[0]-ze[0]),at=Ve*(Pe[1]-ze[1]);return"a"+Ve*Q.r+","+Ve*Q.r+" 0 "+we.largeArc+(Ne?" 1 ":" 0 ")+Ye+","+at}});var ce=M.select(this).selectAll("g.titletext").data(Z.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var we,_e=h.ensureSingle(M.select(this),"text","",function(ie){ie.attr("data-notex",1)}),se=Z.title.text;Z._meta&&(se=h.templateString(se,Z._meta)),_e.text(se).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,Z.title.font).call(a.convertToTspans,W),we=Z.title.position==="middle center"?function(ie){var fe=Math.sqrt(ie.titleBox.width*ie.titleBox.width+ie.titleBox.height*ie.titleBox.height);return{x:ie.cx,y:ie.cy,scale:ie.trace.hole*ie.r*2/fe,tx:0,ty:-ie.titleBox.height/2+ie.trace.title.font.size}}(Q):O(Q,te),_e.attr("transform",t(we.x,we.y)+s(Math.min(1,we.scale))+t(we.tx,we.ty))}),ae&&function(we,_e){var se,ie,fe,Ee,Te,Ae,Se,Oe,De,de,me,Me,ze;function Pe(at,rt){return at.pxmid[1]-rt.pxmid[1]}function Ne(at,rt){return rt.pxmid[1]-at.pxmid[1]}function Ve(at,rt){rt||(rt={});var dt,vt,ht,et,$e=rt.labelExtraY+(ie?rt.yLabelMax:rt.yLabelMin),wt=ie?at.yLabelMin:at.yLabelMax,Pt=ie?at.yLabelMax:at.yLabelMin,Ot=at.cyFinal+Te(at.px0[1],at.px1[1]),At=$e-wt;if(At*Se>0&&(at.labelExtraY=At),h.isArrayOrTypedArray(_e.pull))for(vt=0;vt<de.length;vt++)(ht=de[vt])===at||(u.castOption(_e.pull,at.pts)||0)>=(u.castOption(_e.pull,ht.pts)||0)||((at.pxmid[1]-ht.pxmid[1])*Se>0?(At=ht.cyFinal+Te(ht.px0[1],ht.px1[1])-wt-at.labelExtraY)*Se>0&&(at.labelExtraY+=At):(Pt+at.labelExtraY-Ot)*Se>0&&(dt=3*Ae*Math.abs(vt-de.indexOf(at)),(et=ht.cxFinal+Ee(ht.px0[0],ht.px1[0])+dt-(at.cxFinal+at.pxmid[0])-at.labelExtraX)*Ae>0&&(at.labelExtraX+=et)))}for(ie=0;ie<2;ie++)for(fe=ie?Pe:Ne,Te=ie?Math.max:Math.min,Se=ie?1:-1,se=0;se<2;se++){for(Ee=se?Math.max:Math.min,Ae=se?1:-1,(Oe=we[ie][se]).sort(fe),De=we[1-ie][se],de=De.concat(Oe),Me=[],me=0;me<Oe.length;me++)Oe[me].yLabelMid!==void 0&&Me.push(Oe[me]);for(ze=!1,me=0;ie&&me<De.length;me++)if(De[me].yLabelMid!==void 0){ze=De[me];break}for(me=0;me<Me.length;me++){var Ye=me&&Me[me-1];ze&&!me&&(Ye=ze),Ve(Me[me],Ye)}}}(oe,Z),function(we,_e){we.each(function(se){var ie=M.select(this);if(se.labelExtraX||se.labelExtraY){var fe=ie.select("g.slicetext text");se.transform.targetX+=se.labelExtraX,se.transform.targetY+=se.labelExtraY,h.setTransormAndDisplay(fe,se.transform);var Ee=se.cxFinal+se.pxmid[0],Te="M"+Ee+","+(se.cyFinal+se.pxmid[1]),Ae=(se.yLabelMax-se.yLabelMin)*(se.pxmid[0]<0?-1:1)/4;if(se.labelExtraX){var Se=se.labelExtraX*se.pxmid[1]/se.pxmid[0],Oe=se.yLabelMid+se.labelExtraY-(se.cyFinal+se.pxmid[1]);Math.abs(Se)>Math.abs(Oe)?Te+="l"+Oe*se.pxmid[0]/se.pxmid[1]+","+Oe+"H"+(Ee+se.labelExtraX+Ae):Te+="l"+se.labelExtraX+","+Se+"v"+(Oe-Se)+"h"+Ae}else Te+="V"+(se.yLabelMid+se.labelExtraY)+"h"+Ae;h.ensureSingle(ie,"path","textline").call(T.stroke,_e.outsidetextfont.color).attr({"stroke-width":Math.min(2,_e.outsidetextfont.size/8),d:Te,fill:"none"})}else ie.select("path.textline").remove()})}(re,Z),ae&&Z.automargin){var he=b.bBox(K.node()),pe=Z.domain,xe=te.w*(pe.x[1]-pe.x[0]),be=te.h*(pe.y[1]-pe.y[0]),ve=(.5*xe-Q.r)/te.w,ge=(.5*be-Q.r)/te.h;k.autoMargin(W,"pie."+Z.uid+".automargin",{xl:pe.x[0]-ve,xr:pe.x[1]+ve,yb:pe.y[0]-ge,yt:pe.y[1]+ge,l:Math.max(Q.cx-Q.r-he.left,0),r:Math.max(he.right-(Q.cx+Q.r),0),b:Math.max(he.bottom-(Q.cy+Q.r),0),t:Math.max(Q.cy-Q.r-he.top,0),pad:5})}})});setTimeout(function(){J.selectAll("tspan").each(function(){var X=M.select(this);X.attr("dy")&&X.attr("dy",X.attr("dy"))})},0)},formatSliceLabel:D,transformInsideText:v,determineInsideTextFont:d,positionTitleOutside:O,prerenderTitles:g,layoutAreas:R,attachFxHandlers:x,computeTransform:N}},22152:function(ee,z,e){var M=e(33428),k=e(10528),o=e(82744).resizeText;ee.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");o(T,b,"pie"),b.each(function(h){var s=h[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(a){M.select(this).call(k,a,s,T)})})}},10528:function(ee,z,e){var M=e(76308),k=e(69656).castOption,o=e(21552);ee.exports=function(T,b,h,s){var t=h.marker.line,a=k(t.color,b.pts)||M.defaultLine,n=k(t.width,b.pts)||0;T.call(o,b,h,s).style("stroke-width",n).call(M.stroke,a)}},35484:function(ee,z,e){var M=e(52904);ee.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(ee,z,e){var M=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,o=e(43080),T=e(19280).findExtremes,b=e(44928);function h(t,a){this.scene=t,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=h.prototype;s.handlePick=function(t){var a=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:k(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},s.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},s.updateFast=function(t){var a,n,r,i,l,u,p=this.xData=this.pickXData=t.x,c=this.yData=this.pickYData=t.y,x=this.pickXYData=t.xy,d=t.xbounds&&t.ybounds,g=t.indices,v=this.bounds;if(x){if(r=x,a=x.length>>>1,d)v[0]=t.xbounds[0],v[2]=t.xbounds[1],v[1]=t.ybounds[0],v[3]=t.ybounds[1];else for(u=0;u<a;u++)i=r[2*u],l=r[2*u+1],i<v[0]&&(v[0]=i),i>v[2]&&(v[2]=i),l<v[1]&&(v[1]=l),l>v[3]&&(v[3]=l);if(g)n=g;else for(n=new Int32Array(a),u=0;u<a;u++)n[u]=u}else for(a=p.length,r=new Float32Array(2*a),n=new Int32Array(a),u=0;u<a;u++)i=p[u],l=c[u],n[u]=u,r[2*u]=i,r[2*u+1]=l,i<v[0]&&(v[0]=i),i>v[2]&&(v[2]=i),l<v[1]&&(v[1]=l),l>v[3]&&(v[3]=l);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var y=o(t.marker.color),m=o(t.marker.border.color),_=t.opacity*t.marker.opacity;y[3]*=_,this.pointcloudOptions.color=y;var f=t.marker.blend;f===null&&(f=p.length<100||c.length<100),this.pointcloudOptions.blend=f,m[3]*=_,this.pointcloudOptions.borderColor=m;var S=t.marker.sizemin,w=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,O=this.scene.yaxis,C=w/2||.5;t._extremes[E._id]=T(E,[v[0],v[2]],{ppad:C}),t._extremes[O._id]=T(O,[v[1],v[3]],{ppad:C})},s.dispose=function(){this.pointcloud.dispose()},ee.exports=function(t,a){var n=new h(t,a.uid);return n.update(a),n}},41904:function(ee,z,e){var M=e(3400),k=e(35484);ee.exports=function(o,T,b){function h(s,t){return M.coerce(o,T,k,s,t)}h("x"),h("y"),h("xbounds"),h("ybounds"),o.xy&&o.xy instanceof Float32Array&&(T.xy=o.xy),o.indices&&o.indices instanceof Int32Array&&(T.indices=o.indices),h("text"),h("marker.color",b),h("marker.opacity"),h("marker.blend"),h("marker.sizemin"),h("marker.sizemax"),h("marker.border.color",b),h("marker.border.arearatio"),T._length=null}},156:function(ee,z,e){ee.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(ee,z,e){var M=e(25376),k=e(45464),o=e(22548),T=e(55756),b=e(86968).u,h=e(21776).Ks,s=e(49084),t=e(31780).templatedArray,a=e(29736).descriptionOnlyNumbers,n=e(92880).extendFlat,r=e(67824).overrideAll;(ee.exports=r({hoverinfo:n({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:a("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:h({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:h({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(ee,z,e){var M=e(67824).overrideAll,k=e(84888)._M,o=e(59596),T=e(65460),b=e(93972),h=e(86476),s=e(22676).prepSelect,t=e(3400),a=e(24040),n="sankey";function r(i,l){var u=i._fullData[l],p=i._fullLayout,c=p.dragmode,x=p.dragmode==="pan"?"move":"crosshair",d=u._bgRect;if(d&&c!=="pan"&&c!=="zoom"){b(d,x);var g={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},v={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},y={gd:i,element:d.node(),plotinfo:{id:l,xaxis:g,yaxis:v,fillRangeItems:t.noop},subplot:l,xaxes:[g],yaxes:[v],doneFnCompleted:function(m){var _,f=i._fullData[l],S=f.node.groups.slice(),w=[];function E(R){for(var j=f._sankey.graph.nodes,D=0;D<j.length;D++)if(j[D].pointNumber===R)return j[D]}for(var O=0;O<m.length;O++){var C=E(m[O].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)w.push(C.childrenNodes[P].pointNumber);S[C.pointNumber-f.node._count]=!1}else w.push(C.pointNumber)}_=S.filter(Boolean).concat([w]),a.call("_guiRestyle",i,{"node.groups":[_]},l)},prepFn:function(m,_,f){s(m,_,f,y,c)}};h.init(y)}}z.name=n,z.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),z.plot=function(i){var l=k(i.calcdata,n)[0];o(i,l),z.updateFx(i)},z.clean=function(i,l,u,p){var c=p._has&&p._has(n),x=l._has&&l._has(n);c&&!x&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},z.updateFx=function(i){for(var l=0;l<i._fullData.length;l++)r(i,l)}},48068:function(ee,z,e){var M=e(78484),k=e(3400),o=e(71688).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,h=e(8932);ee.exports=function(s,t){var a=function(n){var r,i=n.node,l=n.link,u=[],p=T(l.color),c=T(l.hovercolor),x=T(l.customdata),d={},g={},v=l.colorscales.length;for(r=0;r<v;r++){var y=l.colorscales[r],m=h.extractScale(y,{cLetter:"c"}),_=h.makeColorScaleFunc(m);g[y.label]=_}var f=0;for(r=0;r<l.value.length;r++)l.source[r]>f&&(f=l.source[r]),l.target[r]>f&&(f=l.target[r]);var S,w=f+1;n.node._count=w;var E=n.node.groups,O={};for(r=0;r<E.length;r++){var C=E[r];for(S=0;S<C.length;S++){var P=C[S],R=w+r;O.hasOwnProperty(P)?k.warn("Node "+P+" is already part of a group."):O[P]=R}}var j={source:[],target:[]};for(r=0;r<l.value.length;r++){var D=l.value[r],N=l.source[r],W=l.target[r];if(D>0&&b(N,w)&&b(W,w)&&(!O.hasOwnProperty(N)||!O.hasOwnProperty(W)||O[N]!==O[W])){O.hasOwnProperty(W)&&(W=O[W]),O.hasOwnProperty(N)&&(N=O[N]),W=+W,d[N=+N]=d[W]=!0;var F="";l.label&&l.label[r]&&(F=l.label[r]);var V=null;F&&g.hasOwnProperty(F)&&(V=g[F]),u.push({pointNumber:r,label:F,color:p?l.color[r]:l.color,hovercolor:c?l.hovercolor[r]:l.hovercolor,customdata:x?l.customdata[r]:l.customdata,concentrationscale:V,source:N,target:W,value:+D}),j.source.push(N),j.target.push(W)}}var U=w+E.length,te=T(i.color),J=T(i.customdata),X=[];for(r=0;r<U;r++)if(d[r]){var K=i.label[r];X.push({group:r>w-1,childrenNodes:[],pointNumber:r,label:K,color:te?i.color[r]:i.color,customdata:J?i.customdata[r]:i.customdata})}var Q=!1;return function(Z,re,oe){for(var ae=k.init2dArray(Z,0),ce=0;ce<Math.min(re.length,oe.length);ce++)if(k.isIndex(re[ce],Z)&&k.isIndex(oe[ce],Z)){if(re[ce]===oe[ce])return!0;ae[re[ce]].push(oe[ce])}return M(ae).components.some(function(he){return he.length>1})}(U,j.source,j.target)&&(Q=!0),{circular:Q,links:u,nodes:X,groups:E,groupLookup:O}}(t);return o({circular:a.circular,_nodes:a.nodes,_links:a.links,_groups:a.groups,_groupLookup:a.groupLookup})}},11820:function(ee){ee.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(ee,z,e){var M=e(3400),k=e(41440),o=e(76308),T=e(49760),b=e(86968).Q,h=e(16132),s=e(31780),t=e(51272);function a(n,r){function i(l,u){return M.coerce(n,r,k.link.colorscales,l,u)}i("label"),i("cmin"),i("cmax"),i("colorscale")}ee.exports=function(n,r,i,l){function u(E,O){return M.coerce(n,r,k,E,O)}var p=M.extendDeep(l.hoverlabel,n.hoverlabel),c=n.node,x=s.newContainer(r,"node");function d(E,O){return M.coerce(c,x,k.node,E,O)}d("label"),d("groups"),d("x"),d("y"),d("pad"),d("thickness"),d("line.color"),d("line.width"),d("hoverinfo",n.hoverinfo),h(c,x,d,p),d("hovertemplate"),d("align");var g=l.colorway;d("color",x.label.map(function(E,O){return o.addOpacity(function(C){return g[C%g.length]}(O),.8)})),d("customdata");var v=n.link||{},y=s.newContainer(r,"link");function m(E,O){return M.coerce(v,y,k.link,E,O)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",n.hoverinfo),h(v,y,m,p),m("hovertemplate");var _,f=T(l.paper_bgcolor).getLuminance()<.333,S=m("color",f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function w(E){var O=T(E);if(!O.isValid())return E;var C=O.getAlpha();return C<=.8?O.setAlpha(C+.2):O=f?O.brighten():O.darken(),O.toRgbString()}m("hovercolor",Array.isArray(S)?S.map(w):w(S)),m("customdata"),t(v,y,{name:"colorscales",handleItemDefaults:a}),b(r,l,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(_="freeform"),u("arrangement",_),M.coerceFont(u,"textfont",M.extendFlat({},l.font)),r._length=null}},45499:function(ee,z,e){ee.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(ee,z,e){var M=e(33428),k=e(3400),o=k.numberFormat,T=e(83248),b=e(93024),h=e(76308),s=e(11820).cn,t=k._;function a(v){return v!==""}function n(v,y){return v.filter(function(m){return m.key===y.traceId})}function r(v,y){M.select(v).select("path").style("fill-opacity",y),M.select(v).select("rect").style("fill-opacity",y)}function i(v){M.select(v).select("text.name").style("fill","black")}function l(v){return function(y){return v.node.sourceLinks.indexOf(y.link)!==-1||v.node.targetLinks.indexOf(y.link)!==-1}}function u(v){return function(y){return y.node.sourceLinks.indexOf(v.link)!==-1||y.node.targetLinks.indexOf(v.link)!==-1}}function p(v,y,m){y&&m&&n(m,y).selectAll("."+s.sankeyLink).filter(l(y)).call(x.bind(0,y,m,!1))}function c(v,y,m){y&&m&&n(m,y).selectAll("."+s.sankeyLink).filter(l(y)).call(d.bind(0,y,m,!1))}function x(v,y,m,_){_.style("fill",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverHue}).style("fill-opacity",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverAlpha}),_.each(function(f){var S=f.link.label;S!==""&&n(y,v).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverHue}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverAlpha})}),m&&n(y,v).selectAll("."+s.sankeyNode).filter(u(v)).call(p)}function d(v,y,m,_){_.style("fill",function(f){return f.tinyColorHue}).style("fill-opacity",function(f){return f.tinyColorAlpha}),_.each(function(f){var S=f.link.label;S!==""&&n(y,v).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){return w.tinyColorHue}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),m&&n(y,v).selectAll(s.sankeyNode).filter(u(v)).call(c)}function g(v,y){var m=v.hoverlabel||{},_=k.nestedProperty(m,y).get();return!Array.isArray(_)&&_}ee.exports=function(v,y){for(var m=v._fullLayout,_=m._paper,f=m._size,S=0;S<v._fullData.length;S++)if(v._fullData[S].visible&&v._fullData[S].type===s.sankey&&!v._fullData[S]._viewInitial){var w=v._fullData[S].node;v._fullData[S]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(v,"source:")+" ",O=t(v,"target:")+" ",C=t(v,"concentration:")+" ",P=t(v,"incoming flow count:")+" ",R=t(v,"outgoing flow count:")+" ";T(v,_,y,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(x.bind(0,D,N,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,v.emit("plotly_hover",{event:M.event,points:[D.link]})))},follow:function(j,D){if(v._fullLayout.hovermode!==!1){var N=D.link.trace.link;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){for(var W=[],F=0,V=0;V<D.flow.links.length;V++){var U=D.flow.links[V];if(v._fullLayout.hovermode!=="closest"||D.link.pointNumber===U.pointNumber){D.link.pointNumber===U.pointNumber&&(F=V),U.fullData=U.trace,N=D.link.trace.link;var te=X(U),J={valueLabel:o(D.valueFormat)(U.value)+D.valueSuffix};W.push({x:te[0],y:te[1],name:J.valueLabel,text:[U.label||"",E+U.source.label,O+U.target.label,U.concentrationscale?C+o("%0.2f")(U.flow.labelConcentration):""].filter(a).join("<br>"),color:g(N,"bgcolor")||h.addOpacity(U.color,1),borderColor:g(N,"bordercolor"),fontFamily:g(N,"font.family"),fontSize:g(N,"font.size"),fontColor:g(N,"font.color"),fontWeight:g(N,"font.weight"),fontStyle:g(N,"font.style"),fontVariant:g(N,"font.variant"),nameLength:g(N,"namelength"),textAlign:g(N,"align"),idealAlign:M.event.x<te[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:J,eventData:[U]})}}b.loneHover(W,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:v,anchorIndex:F}).each(function(){D.link.concentrationscale||r(this,.65),i(this)})}}function X(K){var Q,Z;K.circular?(Q=(K.circularPathData.leftInnerExtent+K.circularPathData.rightInnerExtent)/2,Z=K.circularPathData.verticalFullExtent):(Q=(K.source.x1+K.target.x0)/2,Z=(K.y0+K.y1)/2);var re=[Q,Z];return K.trace.orientation==="v"&&re.reverse(),re[0]+=D.parent.translateX,re[1]+=D.parent.translateY,re}},unhover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(d.bind(0,D,N,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,v.emit("plotly_unhover",{event:M.event,points:[D.link]})),b.loneUnhover(m._hoverlayer.node()))},select:function(j,D){var N=D.link;N.originalEvent=M.event,v._hoverdata=[N],b.click(v,{target:!0})}},nodeEvents:{hover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(p,D,N),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,v.emit("plotly_hover",{event:M.event,points:[D.node]})))},follow:function(j,D){if(v._fullLayout.hovermode!==!1){var N=D.node.trace.node;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){var W=M.select(j).select("."+s.nodeRect),F=v._fullLayout._paperdiv.node().getBoundingClientRect(),V=W.node().getBoundingClientRect(),U=V.left-2-F.left,te=V.right+2-F.left,J=V.top+V.height/4-F.top,X={valueLabel:o(D.valueFormat)(D.node.value)+D.valueSuffix};D.node.fullData=D.node.trace,v._fullLayout._calcInverseTransform(v);var K=v._fullLayout._invScaleX,Q=v._fullLayout._invScaleY,Z=b.loneHover({x0:K*U,x1:K*te,y:Q*J,name:o(D.valueFormat)(D.node.value)+D.valueSuffix,text:[D.node.label,P+D.node.targetLinks.length,R+D.node.sourceLinks.length].filter(a).join("<br>"),color:g(N,"bgcolor")||D.tinyColorHue,borderColor:g(N,"bordercolor"),fontFamily:g(N,"font.family"),fontSize:g(N,"font.size"),fontColor:g(N,"font.color"),fontWeight:g(N,"font.weight"),fontStyle:g(N,"font.style"),fontVariant:g(N,"font.variant"),nameLength:g(N,"namelength"),textAlign:g(N,"align"),idealAlign:"left",hovertemplate:N.hovertemplate,hovertemplateLabels:X,eventData:[D.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:v});r(Z,.85),i(Z)}}},unhover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(c,D,N),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,v.emit("plotly_unhover",{event:M.event,points:[D.node]})),b.loneUnhover(m._hoverlayer.node()))},select:function(j,D,N){var W=D.node;W.originalEvent=M.event,v._hoverdata=[W],M.select(j).call(c,D,N),b.click(v,{target:!0})}}})}},83248:function(ee,z,e){var M=e(49812),k=e(67756).Gz,o=e(33428),T=e(26800),b=e(48932),h=e(11820),s=e(49760),t=e(76308),a=e(43616),n=e(3400),r=n.strTranslate,i=n.strRotate,l=e(71688),u=l.keyFun,p=l.repeat,c=l.unwrap,x=e(72736),d=e(24040),g=e(84284),v=g.CAP_SHIFT,y=g.LINE_SPACING;function m(V,U,te){var J,X=c(U),K=X.trace,Q=K.domain,Z=K.orientation==="h",re=K.node.pad,oe=K.node.thickness,ae={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[K.node.align],ce=V.width*(Q.x[1]-Q.x[0]),he=V.height*(Q.y[1]-Q.y[0]),pe=X._nodes,xe=X._links,be=X.circular;(J=be?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(h.sankeyIterations).size(Z?[ce,he]:[he,ce]).nodeWidth(oe).nodePadding(re).nodeId(function(Se){return Se.pointNumber}).nodeAlign(ae).nodes(pe).links(xe);var ve,ge,we,_e=J();for(var se in J.nodePadding()<re&&n.warn("node.pad was reduced to ",J.nodePadding()," to fit within the figure."),X._groupLookup){var ie,fe=parseInt(X._groupLookup[se]);for(ve=0;ve<_e.nodes.length;ve++)if(_e.nodes[ve].pointNumber===fe){ie=_e.nodes[ve];break}if(ie){var Ee={pointNumber:parseInt(se),x0:ie.x0,x1:ie.x1,y0:ie.y0,y1:ie.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};_e.nodes.unshift(Ee),ie.childrenNodes.unshift(Ee)}}if(function(){for(ve=0;ve<_e.nodes.length;ve++){var Se,Oe,De=_e.nodes[ve],de={};for(ge=0;ge<De.targetLinks.length;ge++)Se=(Oe=De.targetLinks[ge]).source.pointNumber+":"+Oe.target.pointNumber,de.hasOwnProperty(Se)||(de[Se]=[]),de[Se].push(Oe);var me=Object.keys(de);for(ge=0;ge<me.length;ge++){var Me=de[Se=me[ge]],ze=0,Pe={};for(we=0;we<Me.length;we++)Pe[(Oe=Me[we]).label]||(Pe[Oe.label]=0),Pe[Oe.label]+=Oe.value,ze+=Oe.value;for(we=0;we<Me.length;we++)(Oe=Me[we]).flow={value:ze,labelConcentration:Pe[Oe.label]/ze,concentration:Oe.value/ze,links:Me},Oe.concentrationscale&&(Oe.color=s(Oe.concentrationscale(Oe.flow.labelConcentration)))}var Ne=0;for(ge=0;ge<De.sourceLinks.length;ge++)Ne+=De.sourceLinks[ge].value;for(ge=0;ge<De.sourceLinks.length;ge++)(Oe=De.sourceLinks[ge]).concentrationOut=Oe.value/Ne;var Ve=0;for(ge=0;ge<De.targetLinks.length;ge++)Ve+=De.targetLinks[ge].value;for(ge=0;ge<De.targetLinks.length;ge++)(Oe=De.targetLinks[ge]).concenrationIn=Oe.value/Ve}}(),K.node.x.length&&K.node.y.length){for(ve=0;ve<Math.min(K.node.x.length,K.node.y.length,_e.nodes.length);ve++)if(K.node.x[ve]&&K.node.y[ve]){var Te=[K.node.x[ve]*ce,K.node.y[ve]*he];_e.nodes[ve].x0=Te[0]-oe/2,_e.nodes[ve].x1=Te[0]+oe/2;var Ae=_e.nodes[ve].y1-_e.nodes[ve].y0;_e.nodes[ve].y0=Te[1]-Ae/2,_e.nodes[ve].y1=Te[1]+Ae/2}K.arrangement==="snap"&&function(Se){var Oe,De,de=Se.map(function(Ne,Ve){return{x0:Ne.x0,index:Ve}}).sort(function(Ne,Ve){return Ne.x0-Ve.x0}),me=[],Me=-1,ze=-1/0;for(ve=0;ve<de.length;ve++){var Pe=Se[de[ve].index];Pe.x0>ze+oe&&(Me+=1,Oe=Pe.x0),ze=Pe.x0,me[Me]||(me[Me]=[]),me[Me].push(Pe),De=Oe-Pe.x0,Pe.x0+=De,Pe.x1+=De}return me}(pe=_e.nodes).forEach(function(Se){var Oe,De,de,me=0,Me=Se.length;for(Se.sort(function(ze,Pe){return ze.y0-Pe.y0}),de=0;de<Me;++de)(Oe=Se[de]).y0>=me||(De=me-Oe.y0)>1e-6&&(Oe.y0+=De,Oe.y1+=De),me=Oe.y1+re}),J.update(_e)}return{circular:be,key:te,trace:K,guid:n.randstr(),horizontal:Z,width:ce,height:he,nodePad:K.node.pad,nodeLineColor:K.node.line.color,nodeLineWidth:K.node.line.width,linkLineColor:K.link.line.color,linkLineWidth:K.link.line.width,linkArrowLength:K.link.arrowlen,valueFormat:K.valueformat,valueSuffix:K.valuesuffix,textFont:K.textfont,translateX:Q.x[0]*V.width+V.margin.l,translateY:V.height-Q.y[1]*V.height+V.margin.t,dragParallel:Z?he:ce,dragPerpendicular:Z?ce:he,arrangement:K.arrangement,sankey:J,graph:_e,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(V,U,te){var J=s(U.color),X=s(U.hovercolor),K=U.source.label+"|"+U.target.label+"__"+te;return U.trace=V.trace,U.curveNumber=V.trace.index,{circular:V.circular,key:K,traceId:V.key,pointNumber:U.pointNumber,link:U,tinyColorHue:t.tinyRGB(J),tinyColorAlpha:J.getAlpha(),tinyColorHoverHue:t.tinyRGB(X),tinyColorHoverAlpha:X.getAlpha(),linkPath:f,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,linkArrowLength:V.linkArrowLength,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:U.flow}}function f(){return function(V){var U=V.linkArrowLength;if(V.link.circular)return function(ve,ge){var we=ve.width/2,_e=ve.circularPathData;return ve.circularLinkType==="top"?"M "+(_e.targetX-ge)+" "+(_e.targetY+we)+" L"+(_e.rightInnerExtent-ge)+" "+(_e.targetY+we)+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightSmallArcRadius+we)+" 0 0 1 "+(_e.rightFullExtent-we-ge)+" "+(_e.targetY-_e.rightSmallArcRadius)+"L"+(_e.rightFullExtent-we-ge)+" "+_e.verticalRightInnerExtent+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightLargeArcRadius+we)+" 0 0 1 "+(_e.rightInnerExtent-ge)+" "+(_e.verticalFullExtent-we)+"L"+_e.leftInnerExtent+" "+(_e.verticalFullExtent-we)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftLargeArcRadius+we)+" 0 0 1 "+(_e.leftFullExtent+we)+" "+_e.verticalLeftInnerExtent+"L"+(_e.leftFullExtent+we)+" "+(_e.sourceY-_e.leftSmallArcRadius)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftSmallArcRadius+we)+" 0 0 1 "+_e.leftInnerExtent+" "+(_e.sourceY+we)+"L"+_e.sourceX+" "+(_e.sourceY+we)+"L"+_e.sourceX+" "+(_e.sourceY-we)+"L"+_e.leftInnerExtent+" "+(_e.sourceY-we)+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftSmallArcRadius-we)+" 0 0 0 "+(_e.leftFullExtent-we)+" "+(_e.sourceY-_e.leftSmallArcRadius)+"L"+(_e.leftFullExtent-we)+" "+_e.verticalLeftInnerExtent+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftLargeArcRadius-we)+" 0 0 0 "+_e.leftInnerExtent+" "+(_e.verticalFullExtent+we)+"L"+(_e.rightInnerExtent-ge)+" "+(_e.verticalFullExtent+we)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightLargeArcRadius-we)+" 0 0 0 "+(_e.rightFullExtent+we-ge)+" "+_e.verticalRightInnerExtent+"L"+(_e.rightFullExtent+we-ge)+" "+(_e.targetY-_e.rightSmallArcRadius)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightSmallArcRadius-we)+" 0 0 0 "+(_e.rightInnerExtent-ge)+" "+(_e.targetY-we)+"L"+(_e.targetX-ge)+" "+(_e.targetY-we)+(ge>0?"L"+_e.targetX+" "+_e.targetY:"")+"Z":"M "+(_e.targetX-ge)+" "+(_e.targetY-we)+" L"+(_e.rightInnerExtent-ge)+" "+(_e.targetY-we)+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightSmallArcRadius+we)+" 0 0 0 "+(_e.rightFullExtent-we-ge)+" "+(_e.targetY+_e.rightSmallArcRadius)+"L"+(_e.rightFullExtent-we-ge)+" "+_e.verticalRightInnerExtent+"A"+(_e.rightLargeArcRadius+we)+" "+(_e.rightLargeArcRadius+we)+" 0 0 0 "+(_e.rightInnerExtent-ge)+" "+(_e.verticalFullExtent+we)+"L"+_e.leftInnerExtent+" "+(_e.verticalFullExtent+we)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftLargeArcRadius+we)+" 0 0 0 "+(_e.leftFullExtent+we)+" "+_e.verticalLeftInnerExtent+"L"+(_e.leftFullExtent+we)+" "+(_e.sourceY+_e.leftSmallArcRadius)+"A"+(_e.leftLargeArcRadius+we)+" "+(_e.leftSmallArcRadius+we)+" 0 0 0 "+_e.leftInnerExtent+" "+(_e.sourceY-we)+"L"+_e.sourceX+" "+(_e.sourceY-we)+"L"+_e.sourceX+" "+(_e.sourceY+we)+"L"+_e.leftInnerExtent+" "+(_e.sourceY+we)+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftSmallArcRadius-we)+" 0 0 1 "+(_e.leftFullExtent-we)+" "+(_e.sourceY+_e.leftSmallArcRadius)+"L"+(_e.leftFullExtent-we)+" "+_e.verticalLeftInnerExtent+"A"+(_e.leftLargeArcRadius-we)+" "+(_e.leftLargeArcRadius-we)+" 0 0 1 "+_e.leftInnerExtent+" "+(_e.verticalFullExtent-we)+"L"+(_e.rightInnerExtent-ge)+" "+(_e.verticalFullExtent-we)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightLargeArcRadius-we)+" 0 0 1 "+(_e.rightFullExtent+we-ge)+" "+_e.verticalRightInnerExtent+"L"+(_e.rightFullExtent+we-ge)+" "+(_e.targetY+_e.rightSmallArcRadius)+"A"+(_e.rightLargeArcRadius-we)+" "+(_e.rightSmallArcRadius-we)+" 0 0 1 "+(_e.rightInnerExtent-ge)+" "+(_e.targetY+we)+"L"+(_e.targetX-ge)+" "+(_e.targetY+we)+(ge>0?"L"+_e.targetX+" "+_e.targetY:"")+"Z"}(V.link,U);var te=Math.abs((V.link.target.x0-V.link.source.x1)/2);U>te&&(U=te);var J=V.link.source.x1,X=V.link.target.x0-U,K=k(J,X),Q=K(.5),Z=K(.5),re=V.link.y0-V.link.width/2,oe=V.link.y0+V.link.width/2,ae=V.link.y1-V.link.width/2,ce=V.link.y1+V.link.width/2,he="M"+J+","+re,pe="C"+Q+","+re+" "+Z+","+ae+" "+X+","+ae,xe="C"+Z+","+ce+" "+Q+","+oe+" "+J+","+oe,be=U>0?"L"+(X+U)+","+(ae+V.link.width/2):"";return he+pe+(be+="L"+X+","+ce)+xe+"Z"}}function S(V,U){var te=s(U.color),J=h.nodePadAcross,X=V.nodePad/2;U.dx=U.x1-U.x0,U.dy=U.y1-U.y0;var K=U.dx,Q=Math.max(.5,U.dy),Z="node_"+U.pointNumber;return U.group&&(Z=n.randstr()),U.trace=V.trace,U.curveNumber=V.trace.index,{index:U.pointNumber,key:Z,partOfGroup:U.partOfGroup||!1,group:U.group,traceId:V.key,trace:V.trace,node:U,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(K),visibleHeight:Q,zoneX:-J,zoneY:-X,zoneWidth:K+2*J,zoneHeight:Q+2*X,labelY:V.horizontal?U.dy/2+1:U.dx/2+1,left:U.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,Z].join("_"),interactionState:V.interactionState,figure:V}}function w(V){V.attr("transform",function(U){return r(U.node.x0.toFixed(3),U.node.y0.toFixed(3))})}function E(V){V.call(w)}function O(V,U){V.call(E),U.attr("d",f())}function C(V){V.attr("width",function(U){return U.node.x1-U.node.x0}).attr("height",function(U){return U.visibleHeight})}function P(V){return V.link.width>1||V.linkLineWidth>0}function R(V){return r(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function j(V,U,te){V.on(".basic",null).on("mouseover.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(te.hover(this,J,U),J.interactionState.hovered=[this,J])}).on("mousemove.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(te.follow(this,J),J.interactionState.hovered=[this,J])}).on("mouseout.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(te.unhover(this,J,U),J.interactionState.hovered=!1)}).on("click.basic",function(J){J.interactionState.hovered&&(te.unhover(this,J,U),J.interactionState.hovered=!1),J.interactionState.dragInProgress||J.partOfGroup||te.select(this,J,U)})}function D(V,U,te,J){var X=o.behavior.drag().origin(function(K){return{x:K.node.x0+K.visibleWidth/2,y:K.node.y0+K.visibleHeight/2}}).on("dragstart",function(K){if(K.arrangement!=="fixed"&&(n.ensureSingle(J._fullLayout._infolayer,"g","dragcover",function(Z){J._fullLayout._dragCover=Z}),n.raiseToTop(this),K.interactionState.dragInProgress=K.node,W(K.node),K.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,K.interactionState.hovered),K.interactionState.hovered=!1),K.arrangement==="snap")){var Q=K.traceId+"|"+K.key;K.forceLayouts[Q]?K.forceLayouts[Q].alpha(1):function(Z,re,oe,ae){(function(he){for(var pe=0;pe<he.length;pe++)he[pe].y=(he[pe].y0+he[pe].y1)/2,he[pe].x=(he[pe].x0+he[pe].x1)/2})(oe.graph.nodes);var ce=oe.graph.nodes.filter(function(he){return he.originalX===oe.node.originalX}).filter(function(he){return!he.partOfGroup});oe.forceLayouts[re]=M.forceSimulation(ce).alphaDecay(0).force("collide",M.forceCollide().radius(function(he){return he.dy/2+oe.nodePad/2}).strength(1).iterations(h.forceIterations)).force("constrain",function(he,pe,xe,be){return function(){for(var ve=0,ge=0;ge<xe.length;ge++){var we=xe[ge];we===be.interactionState.dragInProgress?(we.x=we.lastDraggedX,we.y=we.lastDraggedY):(we.vx=(we.originalX-we.x)/h.forceTicksPerFrame,we.y=Math.min(be.size-we.dy/2,Math.max(we.dy/2,we.y))),ve=Math.max(ve,Math.abs(we.vx),Math.abs(we.vy))}!be.interactionState.dragInProgress&&ve<.1&&be.forceLayouts[pe].alpha()>0&&be.forceLayouts[pe].alpha(0)}}(0,re,ce,oe)).stop()}(0,Q,K),function(Z,re,oe,ae,ce){window.requestAnimationFrame(function he(){var pe;for(pe=0;pe<h.forceTicksPerFrame;pe++)oe.forceLayouts[ae].tick();if(function(be){for(var ve=0;ve<be.length;ve++)be[ve].y0=be[ve].y-be[ve].dy/2,be[ve].y1=be[ve].y0+be[ve].dy,be[ve].x0=be[ve].x-be[ve].dx/2,be[ve].x1=be[ve].x0+be[ve].dx}(oe.graph.nodes),oe.sankey.update(oe.graph),O(Z.filter(F(oe)),re),oe.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(he);else{var xe=oe.node.originalX;oe.node.x0=xe-oe.visibleWidth/2,oe.node.x1=xe+oe.visibleWidth/2,N(oe,ce)}})}(V,U,K,Q,J)}}).on("drag",function(K){if(K.arrangement!=="fixed"){var Q=o.event.x,Z=o.event.y;K.arrangement==="snap"?(K.node.x0=Q-K.visibleWidth/2,K.node.x1=Q+K.visibleWidth/2,K.node.y0=Z-K.visibleHeight/2,K.node.y1=Z+K.visibleHeight/2):(K.arrangement==="freeform"&&(K.node.x0=Q-K.visibleWidth/2,K.node.x1=Q+K.visibleWidth/2),Z=Math.max(0,Math.min(K.size-K.visibleHeight/2,Z)),K.node.y0=Z-K.visibleHeight/2,K.node.y1=Z+K.visibleHeight/2),W(K.node),K.arrangement!=="snap"&&(K.sankey.update(K.graph),O(V.filter(F(K)),U))}}).on("dragend",function(K){if(K.arrangement!=="fixed"){K.interactionState.dragInProgress=!1;for(var Q=0;Q<K.node.childrenNodes.length;Q++)K.node.childrenNodes[Q].x=K.node.x,K.node.childrenNodes[Q].y=K.node.y;K.arrangement!=="snap"&&N(K,J)}});V.on(".drag",null).call(X)}function N(V,U){for(var te=[],J=[],X=0;X<V.graph.nodes.length;X++){var K=(V.graph.nodes[X].x0+V.graph.nodes[X].x1)/2,Q=(V.graph.nodes[X].y0+V.graph.nodes[X].y1)/2;te.push(K/V.figure.width),J.push(Q/V.figure.height)}d.call("_guiRestyle",U,{"node.x":[te],"node.y":[J]},V.trace.index).then(function(){U._fullLayout._dragCover&&U._fullLayout._dragCover.remove()})}function W(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function F(V){return function(U){return U.node.originalX===V.node.originalX}}ee.exports=function(V,U,te,J,X){var K=V._context.staticPlot,Q=!1;n.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){Q=!0});var Z=V._fullLayout._dragCover,re=te.filter(function(ve){return c(ve).trace.visible}).map(m.bind(null,J)),oe=U.selectAll("."+h.cn.sankey).data(re,u);oe.exit().remove(),oe.enter().append("g").classed(h.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",K?"none":"auto").attr("transform",R),oe.each(function(ve,ge){V._fullData[ge]._sankey=ve;var we="bgsankey-"+ve.trace.uid+"-"+ge;n.ensureSingle(V._fullLayout._draggers,"rect",we),V._fullData[ge]._bgRect=o.select("."+we),V._fullData[ge]._bgRect.style("pointer-events",K?"none":"all").attr("width",ve.width).attr("height",ve.height).attr("x",ve.translateX).attr("y",ve.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(h.ease).duration(h.duration).attr("transform",R);var ae=oe.selectAll("."+h.cn.sankeyLinks).data(p,u);ae.enter().append("g").classed(h.cn.sankeyLinks,!0).style("fill","none");var ce=ae.selectAll("."+h.cn.sankeyLink).data(function(ve){return ve.graph.links.filter(function(ge){return ge.value}).map(_.bind(null,ve))},u);ce.enter().append("path").classed(h.cn.sankeyLink,!0).call(j,oe,X.linkEvents),ce.style("stroke",function(ve){return P(ve)?t.tinyRGB(s(ve.linkLineColor)):ve.tinyColorHue}).style("stroke-opacity",function(ve){return P(ve)?t.opacity(ve.linkLineColor):ve.tinyColorAlpha}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}).style("stroke-width",function(ve){return P(ve)?ve.linkLineWidth:1}).attr("d",f()),ce.style("opacity",function(){return V._context.staticPlot||Q||Z?1:0}).transition().ease(h.ease).duration(h.duration).style("opacity",1),ce.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var he=oe.selectAll("."+h.cn.sankeyNodeSet).data(p,u);he.enter().append("g").classed(h.cn.sankeyNodeSet,!0),he.style("cursor",function(ve){switch(ve.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pe=he.selectAll("."+h.cn.sankeyNode).data(function(ve){var ge=ve.graph.nodes;return function(we){var _e,se=[];for(_e=0;_e<we.length;_e++)we[_e].originalX=(we[_e].x0+we[_e].x1)/2,we[_e].originalY=(we[_e].y0+we[_e].y1)/2,se.indexOf(we[_e].originalX)===-1&&se.push(we[_e].originalX);for(se.sort(function(ie,fe){return ie-fe}),_e=0;_e<we.length;_e++)we[_e].originalLayerIndex=se.indexOf(we[_e].originalX),we[_e].originalLayer=we[_e].originalLayerIndex/(se.length-1)}(ge),ge.map(S.bind(null,ve))},u);pe.enter().append("g").classed(h.cn.sankeyNode,!0).call(w).style("opacity",function(ve){return!V._context.staticPlot&&!Q||ve.partOfGroup?0:1}),pe.call(j,oe,X.nodeEvents).call(D,ce,X,V),pe.transition().ease(h.ease).duration(h.duration).call(w).style("opacity",function(ve){return ve.partOfGroup?0:1}),pe.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var xe=pe.selectAll("."+h.cn.nodeRect).data(p);xe.enter().append("rect").classed(h.cn.nodeRect,!0).call(C),xe.style("stroke-width",function(ve){return ve.nodeLineWidth}).style("stroke",function(ve){return t.tinyRGB(s(ve.nodeLineColor))}).style("stroke-opacity",function(ve){return t.opacity(ve.nodeLineColor)}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}),xe.transition().ease(h.ease).duration(h.duration).call(C);var be=pe.selectAll("."+h.cn.nodeLabel).data(p);be.enter().append("text").classed(h.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(ve){return ve.node.label}).each(function(ve){var ge=o.select(this);a.font(ge,ve.textFont),x.convertToTspans(ge,V)}).style("text-shadow",x.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(ve){return ve.horizontal&&ve.left?"end":"start"}).attr("transform",function(ve){var ge=o.select(this),we=x.lineCount(ge),_e=ve.textFont.size*((we-1)*y-v),se=ve.nodeLineWidth/2+3,ie=((ve.horizontal?ve.visibleHeight:ve.visibleWidth)-_e)/2;ve.horizontal&&(ve.left?se=-se:se+=ve.visibleWidth);var fe=ve.horizontal?"":"scale(-1,1)"+i(90);return r(ve.horizontal?se:ie,ve.horizontal?ie:se)+fe}),be.transition().ease(h.ease).duration(h.duration)}},81128:function(ee){ee.exports=function(z,e){for(var M=[],k=z.cd[0].trace,o=k._sankey.graph.nodes,T=0;T<o.length;T++){var b=o[T];if(!b.partOfGroup){var h=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&h.reverse(),e&&e.contains(h,!1,T,z)&&M.push({pointNumber:b.pointNumber})}}return M}},20148:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.texttemplate,k,"txt"),M.mergeArray(o.hovertext,k,"htx"),M.mergeArray(o.customdata,k,"data"),M.mergeArray(o.textposition,k,"tp"),o.textfont&&(M.mergeArrayCastPositive(o.textfont.size,k,"ts"),M.mergeArray(o.textfont.color,k,"tc"),M.mergeArray(o.textfont.family,k,"tf"),M.mergeArray(o.textfont.weight,k,"tw"),M.mergeArray(o.textfont.style,k,"ty"),M.mergeArray(o.textfont.variant,k,"tv"));var b=o.marker;if(b){M.mergeArrayCastPositive(b.size,k,"ms"),M.mergeArrayCastPositive(b.opacity,k,"mo"),M.mergeArray(b.symbol,k,"mx"),M.mergeArray(b.angle,k,"ma"),M.mergeArray(b.standoff,k,"mf"),M.mergeArray(b.color,k,"mc");var h=b.line;b.line&&(M.mergeArray(h.color,k,"mlc"),M.mergeArrayCastPositive(h.width,k,"mlw"));var s=b.gradient;s&&s.type!=="none"&&(M.mergeArray(s.type,k,"mgt"),M.mergeArray(s.color,k,"mgc"))}}},52904:function(ee,z,e){var M=e(29736).axisHoverFormat,k=e(21776).Gw,o=e(21776).Ks,T=e(49084),b=e(25376),h=e(98192).u,s=e(98192).c,t=e(43616),a=e(88200),n=e(92880).extendFlat,r=e(98304);ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:a.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},h,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:r(!0),fillgradient:n({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:s,marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(ee,z,e){var M=e(38248),k=e(3400),o=e(54460),T=e(1220),b=e(39032).BADNUM,h=e(43028),s=e(90136),t=e(20148),a=e(4500);function n(p,c,x,d,g,v,y){var m=c._length,_=p._fullLayout,f=x._id,S=d._id,w=_._firstScatter[l(c)]===c.uid,E=(u(c,_,x,d)||{}).orientation,O=c.fill;x._minDtick=0,d._minDtick=0;var C={padded:!0},P={padded:!0};y&&(C.ppad=P.ppad=y);var R=m<2||g[0]!==g[m-1]||v[0]!==v[m-1];R&&(O==="tozerox"||O==="tonextx"&&(w||E==="h"))?C.tozero=!0:(c.error_y||{}).visible||O!=="tonexty"&&O!=="tozeroy"&&(h.hasMarkers(c)||h.hasText(c))||(C.padded=!1,C.ppad=0),R&&(O==="tozeroy"||O==="tonexty"&&(w||E==="v"))?P.tozero=!0:O!=="tonextx"&&O!=="tozerox"||(P.padded=!1),f&&(c._extremes[f]=o.findExtremes(x,g,C)),S&&(c._extremes[S]=o.findExtremes(d,v,P))}function r(p,c){if(h.hasMarkers(p)){var x,d=p.marker,g=1.6*(p.marker.sizeref||1);if(x=p.marker.sizemode==="area"?function(f){return Math.max(Math.sqrt((f||0)/g),3)}:function(f){return Math.max((f||0)/g,3)},k.isArrayOrTypedArray(d.size)){var v={type:"linear"};o.setConvert(v);for(var y=v.makeCalcdata(p.marker,"size"),m=new Array(c),_=0;_<c;_++)m[_]=x(y[_]);return m}return x(d.size)}}function i(p,c){var x=l(c),d=p._firstScatter;d[x]||(d[x]=c.uid)}function l(p){var c=p.stackgroup;return p.xaxis+p.yaxis+p.type+(c?"-"+c:"")}function u(p,c,x,d){var g=p.stackgroup;if(g){var v=c._scatterStackOpts[x._id+d._id][g],y=v.orientation==="v"?d:x;return y.type==="linear"||y.type==="log"?v:void 0}}ee.exports={calc:function(p,c){var x,d,g,v,y,m,_=p._fullLayout,f=c._xA=o.getFromId(p,c.xaxis||"x","x"),S=c._yA=o.getFromId(p,c.yaxis||"y","y"),w=f.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),O=T(c,f,"x",w),C=T(c,S,"y",E),P=O.vals,R=C.vals,j=c._length,D=new Array(j),N=c.ids,W=u(c,_,f,S),F=!1;i(_,c);var V,U="x",te="y";W?(k.pushUnique(W.traceIndices,c._expandedIndex),(x=W.orientation==="v")?(te="s",V="x"):(U="s",V="y"),y=W.stackgaps==="interpolate"):n(p,c,f,S,P,R,r(c,j));var J=!!c.xperiodalignment,X=!!c.yperiodalignment;for(d=0;d<j;d++){var K=D[d]={},Q=M(P[d]),Z=M(R[d]);Q&&Z?(K[U]=P[d],K[te]=R[d],J&&(K.orig_x=w[d],K.xEnd=O.ends[d],K.xStart=O.starts[d]),X&&(K.orig_y=E[d],K.yEnd=C.ends[d],K.yStart=C.starts[d])):W&&(x?Q:Z)?(K[V]=x?P[d]:R[d],K.gap=!0,y?(K.s=b,F=!0):K.s=0):K[U]=K[te]=b,N&&(K.id=String(N[d]))}if(t(D,c),s(p,c),a(D,c),W){for(d=0;d<D.length;)D[d][V]===b?D.splice(d,1):d++;if(k.sort(D,function(ce,he){return ce[V]-he[V]||ce.i-he.i}),F){for(d=0;d<D.length-1&&D[d].gap;)d++;for((m=D[d].s)||(m=D[d].s=0),g=0;g<d;g++)D[g].s=m;for(v=D.length-1;v>d&&D[v].gap;)v--;for(m=D[v].s,g=D.length-1;g>v;g--)D[g].s=m;for(;d<v;)if(D[++d].gap){for(g=d+1;D[g].gap;)g++;for(var re=D[d-1][V],oe=D[d-1].s,ae=(D[g].s-oe)/(D[g][V]-re);d<g;)D[d].s=oe+(D[d][V]-re)*ae,d++}}}return D},calcMarkerSize:r,calcAxisExpansion:n,setFirstScatter:i,getStackOpts:u}},4500:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){M.isArrayOrTypedArray(o.selectedpoints)&&M.tagSelected(k,o)}},90136:function(ee,z,e){var M=e(94288).hasColorscale,k=e(47128),o=e(43028);ee.exports=function(T,b){o.hasLines(b)&&M(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(b)&&(M(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),M(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(ee){ee.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(ee,z,e){var M=e(16356),k=e(96376).setGroupPositions;function o(T,b,h,s,t,a,n){t[s]=!0;var r={i:null,gap:!0,s:0};if(r[n]=h,T.splice(b,0,r),b&&h===T[b-1][n]){var i=T[b-1];r.s=i.s,r.i=i.i,r.gap=i.gap}else a&&(r.s=function(l,u,p,c){var x=l[u-1],d=l[u+1];return d?x?x.s+(d.s-x.s)*(p-x[c])/(d[c]-x[c]):d.s:x.s}(T,b,h,n));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ee.exports=function(T,b){T._fullLayout.scattermode==="group"&&function(V,U){for(var te=U.xaxis,J=U.yaxis,X=V._fullLayout,K=V._fullData,Q=V.calcdata,Z=[],re=[],oe=0;oe<K.length;oe++){var ae=K[oe];ae.visible===!0&&ae.type==="scatter"&&ae.xaxis===te._id&&ae.yaxis===J._id&&(ae.orientation==="h"?Z.push(Q[oe]):ae.orientation==="v"&&re.push(Q[oe]))}var ce={mode:X.scattermode,gap:X.scattergap};k(V,te,J,re,ce),k(V,J,te,Z,ce)}(T,b);var h=b.xaxis,s=b.yaxis,t=h._id+s._id,a=T._fullLayout._scatterStackOpts[t];if(a){var n,r,i,l,u,p,c,x,d,g,v,y,m,_,f,S=T.calcdata;for(var w in a){var E=(g=a[w]).traceIndices;if(E.length){for(v=g.stackgaps==="interpolate",y=g.groupnorm,g.orientation==="v"?(m="x",_="y"):(m="y",_="x"),f=new Array(E.length),n=0;n<f.length;n++)f[n]=!1;p=S[E[0]];var O=new Array(p.length);for(n=0;n<p.length;n++)O[n]=p[n][m];for(n=1;n<E.length;n++){for(u=S[E[n]],r=i=0;r<u.length;r++){for(c=u[r][m];c>O[i]&&i<O.length;i++)o(u,r,O[i],n,f,v,m),r++;if(c!==O[i]){for(l=0;l<n;l++)o(S[E[l]],i,c,l,f,v,m);O.splice(i,0,c)}i++}for(;i<O.length;i++)o(u,r,O[i],n,f,v,m),r++}var C=O.length;for(r=0;r<p.length;r++){for(x=p[r][_]=p[r].s,n=1;n<E.length;n++)(u=S[E[n]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,x+=u[r].s,u[r][_]=x;if(y)for(d=(y==="fraction"?x:x/100)||1,n=0;n<E.length;n++){var P=S[E[n]][r];P[_]/=d,P.sNorm=P.s/d}}for(n=0;n<E.length;n++){var R=(u=S[E[n]])[0].trace,j=M.calcMarkerSize(R,R._rawLength),D=Array.isArray(j);if(j&&f[n]||D){var N=j;for(j=new Array(C),r=0;r<C;r++)j[r]=u[r].gap?0:D?N[u[r].i]:N}var W=new Array(C),F=new Array(C);for(r=0;r<C;r++)W[r]=u[r].x,F[r]=u[r].y;M.calcAxisExpansion(T,R,h,s,W,F,j),u[0].t.orientation=g.orientation}}}}}},35036:function(ee,z,e){var M=e(3400),k=e(20011),o=e(52904);ee.exports=function(T,b){var h,s,t;function a(u){return M.coerce(s._input,s,o,u)}if(b.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(h=s._input,k(h,s,b,a));for(t=0;t<T.length;t++){var n=T[t];if(n.type==="scatter"){var r=n.fill;if(r!=="none"&&r!=="toself"&&(n.opacity=void 0,r==="tonexty"||r==="tonextx"))for(var i=t-1;i>=0;i--){var l=T[i];if(l.type==="scatter"&&l.xaxis===n.xaxis&&l.yaxis===n.yaxis){l.opacity=void 0;break}}}}}},18800:function(ee,z,e){var M=e(3400),k=e(24040),o=e(52904),T=e(88200),b=e(43028),h=e(43980),s=e(31147),t=e(43912),a=e(74428),n=e(66828),r=e(11731),i=e(124),l=e(70840),u=e(3400).coercePattern;ee.exports=function(p,c,x,d){function g(E,O){return M.coerce(p,c,o,E,O)}var v=h(p,c,d,g);if(v||(c.visible=!1),c.visible){s(p,c,d,g),g("xhoverformat"),g("yhoverformat"),g("zorder");var y=t(p,c,d,g);d.scattermode==="group"&&c.orientation===void 0&&g("orientation","v");var m=!y&&v<T.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",m),b.hasMarkers(c)&&a(p,c,x,d,g,{gradient:!0}),b.hasLines(c)&&(n(p,c,x,d,g,{backoff:!0}),r(p,c,g),g("connectgaps"),g("line.simplify")),b.hasText(c)&&(g("texttemplate"),i(p,c,d,g));var _=[];(b.hasMarkers(c)||b.hasText(c))&&(g("cliponaxis"),g("marker.maxdisplayed"),_.push("points")),g("fill",y?y.fillDflt:"none"),c.fill!=="none"&&(l(p,c,x,g,{moduleHasFillgradient:!0}),b.hasLines(c)||r(p,c,g),u(g,"fillpattern",c.fillcolor,!1));var f=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||_.push("fills"),g("hoveron",_.join("+")||"points"),c.hoveron!=="fills"&&g("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(p,c,f||S||x,{axis:"y"}),w(p,c,f||S||x,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,g)}}},98304:function(ee){ee.exports=function(z){return{valType:"color",editType:"style",anim:!0}}},70840:function(ee,z,e){var M=e(76308),k=e(3400).isArrayOrTypedArray;ee.exports=function(o,T,b,h,s){s||(s={});var t,a=!1;if(T.marker){var n=T.marker.color,r=(T.marker.line||{}).color;n&&!k(n)?a=n:r&&!k(r)&&(a=r)}if(s.moduleHasFillgradient&&h("fillgradient.type")!=="none"){h("fillgradient.start"),h("fillgradient.stop");var i=h("fillgradient.colorscale");i&&(t=function(l){for(var u=M.interpolate(l[0][1],l[1][1],.5),p=2;p<l.length;p++){var c=M.interpolate(l[p-1][1],l[p][1],.5);u=M.interpolate(u,c,l[p-1][0]/l[p][0])}return u}(i))}h("fillcolor",M.addOpacity((T.line||{}).color||a||t||b,.5))}},76688:function(ee,z,e){var M=e(54460);ee.exports=function(k,o,T){var b={},h={_fullLayout:T},s=M.getFromTrace(h,o,"x"),t=M.getFromTrace(h,o,"y"),a=k.orig_x;a===void 0&&(a=k.x);var n=k.orig_y;return n===void 0&&(n=k.y),b.xLabel=M.tickText(s,s.c2l(a),!0).text,b.yLabel=M.tickText(t,t.c2l(n),!0).text,b}},44928:function(ee,z,e){var M=e(76308),k=e(43028);ee.exports=function(o,T){var b,h;if(o.mode==="lines")return(b=o.line.color)&&M.opacity(b)?b:o.fillcolor;if(o.mode==="none")return o.fill?o.fillcolor:"";var s=T.mcc||(o.marker||{}).color,t=T.mlcc||((o.marker||{}).line||{}).color;return(h=s&&M.opacity(s)?s:t&&M.opacity(t)&&(T.mlw||((o.marker||{}).line||{}).width)?t:"")?M.opacity(h)<.3?M.addOpacity(h,.3):h:(b=(o.line||{}).color)&&M.opacity(b)&&k.hasLines(o)&&o.line.width?b:o.fillcolor}},20011:function(ee,z,e){var M=e(71888).getAxisGroup;ee.exports=function(k,o,T,b){var h=o.orientation,s=o[{v:"x",h:"y"}[h]+"axis"],t=M(T,s)+h,a=T._alignmentOpts||{},n=b("alignmentgroup"),r=a[t];r||(r=a[t]={});var i=r[n];i?i.traces.push(o):i=r[n]={traces:[o],alignmentIndex:Object.keys(r).length,offsetGroups:{}};var l=b("offsetgroup"),u=i.offsetGroups,p=u[l];l&&(p||(p=u[l]={offsetIndex:Object.keys(u).length}),o._offsetIndex=p.offsetIndex)}},98723:function(ee,z,e){var M=e(3400),k=e(93024),o=e(24040),T=e(44928),b=e(76308),h=M.fillText;ee.exports=function(s,t,a,n){var r=s.cd,i=r[0].trace,l=s.xa,u=s.ya,p=l.c2p(t),c=u.c2p(a),x=[p,c],d=i.hoveron||"",g=i.mode.indexOf("markers")!==-1?3:.5,v=!!i.xperiodalignment,y=!!i.yperiodalignment;if(d.indexOf("points")!==-1){var m=function(W){var F=Math.max(g,W.mrc||0),V=l.c2p(W.x)-p,U=u.c2p(W.y)-c;return Math.max(Math.sqrt(V*V+U*U)-F,1-g/F)},_=k.getDistanceFunction(n,function(W){if(v){var F=l.c2p(W.xStart),V=l.c2p(W.xEnd);return p>=Math.min(F,V)&&p<=Math.max(F,V)?0:1/0}var U=Math.max(3,W.mrc||0),te=1-1/U,J=Math.abs(l.c2p(W.x)-p);return J<U?te*J/U:J-U+te},function(W){if(y){var F=u.c2p(W.yStart),V=u.c2p(W.yEnd);return c>=Math.min(F,V)&&c<=Math.max(F,V)?0:1/0}var U=Math.max(3,W.mrc||0),te=1-1/U,J=Math.abs(u.c2p(W.y)-c);return J<U?te*J/U:J-U+te},m);if(k.getClosest(r,_,s),s.index!==!1){var f=r[s.index],S=l.c2p(f.x,!0),w=u.c2p(f.y,!0),E=f.mrc||1;s.index=f.i;var O=r[0].t.orientation,C=O&&(f.sNorm||f.s),P=O==="h"?C:f.orig_x!==void 0?f.orig_x:f.x,R=O==="v"?C:f.orig_y!==void 0?f.orig_y:f.y;return M.extendFlat(s,{color:T(i,f),x0:S-E,x1:S+E,xLabelVal:P,y0:w-E,y1:w+E,yLabelVal:R,spikeDistance:m(f),hovertemplate:i.hovertemplate}),h(f,i,s),o.getComponentMethod("errorbars","hoverInfo")(f,i,s),[s]}}function j(W){if(!W)return!1;var F=W.node();try{var V=new DOMPoint(x[0],x[1]);return F.isPointInFill(V)}catch{var U=F.ownerSVGElement.createSVGPoint();return U.x=x[0],U.y=x[1],F.isPointInFill(U)}}if(d.indexOf("fills")!==-1&&i._fillElement&&j(i._fillElement)&&!j(i._fillExclusionElement)){var D=function(W){var F,V,U,te,J,X,K,Q,Z,re=[],oe=1/0,ae=-1/0,ce=1/0,he=-1/0;for(F=0;F<W.length;F++){var pe=W[F];pe.contains(x)&&(re.push(pe),ce=Math.min(ce,pe.ymin),he=Math.max(he,pe.ymax))}if(re.length===0)return null;for(V=((ce=Math.max(ce,0))+(he=Math.min(he,u._length)))/2,F=0;F<re.length;F++)for(te=re[F].pts,U=1;U<te.length;U++)(Q=te[U-1][1])>V!=(Z=te[U][1])>=V&&(X=te[U-1][0],K=te[U][0],Z-Q&&(J=X+(K-X)*(V-Q)/(Z-Q),oe=Math.min(oe,J),ae=Math.max(ae,J)));return{x0:oe=Math.max(oe,0),x1:ae=Math.min(ae,l._length),y0:V,y1:V}}(i._polygons);D===null&&(D={x0:x[0],x1:x[0],y0:x[1],y1:x[1]});var N=b.defaultLine;return b.opacity(i.fillcolor)?N=i.fillcolor:b.opacity((i.line||{}).color)&&(N=i.line.color),M.extendFlat(s,{distance:s.maxHoverDistance,x0:D.x0,x1:D.x1,y0:D.y0,y1:D.y1,color:N,hovertemplate:!1}),delete s.index,i.text&&!M.isArrayOrTypedArray(i.text)?s.text=String(i.text):s.text=i.name,[s]}}},65875:function(ee,z,e){var M=e(43028);ee.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(ee){ee.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(ee,z,e){var M=e(3400),k=e(55308);ee.exports=function(o,T){var b,h=T.barmode==="group";T.scattermode==="group"&&(b=h?T.bargap:.2,M.coerce(o,T,k,"scattergap",b))}},66828:function(ee,z,e){var M=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,o=e(27260);ee.exports=function(T,b,h,s,t,a){a||(a={});var n=(T.marker||{}).color;n&&n._inputArray&&(n=n._inputArray),t("line.color",h),k(T,"line")?o(T,b,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!M(n)&&n||h),t("line.width"),a.noDash||t("line.dash"),a.backoff&&t("line.backoff")}},52340:function(ee,z,e){var M=e(43616),k=e(39032),o=k.BADNUM,T=k.LOG_CLIP,b=T+.5,h=T-.5,s=e(3400),t=s.segmentsIntersect,a=s.constrain,n=e(88200);ee.exports=function(r,i){var l,u,p,c,x,d,g,v,y,m,_,f,S,w,E,O,C,P,R=i.trace||{},j=i.xaxis,D=i.yaxis,N=j.type==="log",W=D.type==="log",F=j._length,V=D._length,U=i.backoff,te=R.marker,J=i.connectGaps,X=i.baseTolerance,K=i.shape,Q=K==="linear",Z=R.fill&&R.fill!=="none",re=[],oe=n.minTolerance,ae=r.length,ce=new Array(ae),he=0;function pe(At){var He=r[At];if(!He)return!1;var Ze=i.linearized?j.l2p(He.x):j.c2p(He.x),Be=i.linearized?D.l2p(He.y):D.c2p(He.y);if(Ze===o){if(N&&(Ze=j.c2p(He.x,!0)),Ze===o)return!1;W&&Be===o&&(Ze*=Math.abs(j._m*V*(j._m>0?b:h)/(D._m*F*(D._m>0?b:h)))),Ze*=1e3}if(Be===o){if(W&&(Be=D.c2p(He.y,!0)),Be===o)return!1;Be*=1e3}return[Ze,Be]}function xe(At,He,Ze,Be){var Ge=Ze-At,it=Be-He,tt=.5-At,Re=.5-He,Fe=Ge*Ge+it*it,nt=Ge*tt+it*Re;if(nt>0&&nt<Fe){var We=tt*it-Re*Ge;if(We*We<Fe)return!0}}function be(At,He){var Ze=At[0]/F,Be=At[1]/V,Ge=Math.max(0,-Ze,Ze-1,-Be,Be-1);return Ge&&C!==void 0&&xe(Ze,Be,C,P)&&(Ge=0),Ge&&He&&xe(Ze,Be,He[0]/F,He[1]/V)&&(Ge=0),(1+n.toleranceGrowth*Ge)*X}function ve(At,He){var Ze=At[0]-He[0],Be=At[1]-He[1];return Math.sqrt(Ze*Ze+Be*Be)}var ge,we,_e,se,ie,fe,Ee,Te=n.maxScreensAway,Ae=-F*Te,Se=F*(1+Te),Oe=-V*Te,De=V*(1+Te),de=[[Ae,Oe,Se,Oe],[Se,Oe,Se,De],[Se,De,Ae,De],[Ae,De,Ae,Oe]];function me(At){if(At[0]<Ae||At[0]>Se||At[1]<Oe||At[1]>De)return[a(At[0],Ae,Se),a(At[1],Oe,De)]}function Me(At,He){return At[0]===He[0]&&(At[0]===Ae||At[0]===Se)||At[1]===He[1]&&(At[1]===Oe||At[1]===De)||void 0}function ze(At,He,Ze){return function(Be,Ge){var it=me(Be),tt=me(Ge),Re=[];if(it&&tt&&Me(it,tt))return Re;it&&Re.push(it),tt&&Re.push(tt);var Fe=2*s.constrain((Be[At]+Ge[At])/2,He,Ze)-((it||Be)[At]+(tt||Ge)[At]);return Fe&&((it&&tt?Fe>0==it[At]>tt[At]?it:tt:it||tt)[At]+=Fe),Re}}function Pe(At){var He=At[0],Ze=At[1],Be=He===ce[he-1][0],Ge=Ze===ce[he-1][1];if(!Be||!Ge)if(he>1){var it=He===ce[he-2][0],tt=Ze===ce[he-2][1];Be&&(He===Ae||He===Se)&&it?tt?he--:ce[he-1]=At:Ge&&(Ze===Oe||Ze===De)&&tt?it?he--:ce[he-1]=At:ce[he++]=At}else ce[he++]=At}function Ne(At){ce[he-1][0]!==At[0]&&ce[he-1][1]!==At[1]&&Pe([_e,se]),Pe(At),ie=null,_e=se=0}K==="linear"||K==="spline"?Ee=function(At,He){for(var Ze=[],Be=0,Ge=0;Ge<4;Ge++){var it=de[Ge],tt=t(At[0],At[1],He[0],He[1],it[0],it[1],it[2],it[3]);tt&&(!Be||Math.abs(tt.x-Ze[0][0])>1||Math.abs(tt.y-Ze[0][1])>1)&&(tt=[tt.x,tt.y],Be&&ve(tt,At)<ve(Ze[0],At)?Ze.unshift(tt):Ze.push(tt),Be++)}return Ze}:K==="hv"||K==="vh"?Ee=function(At,He){var Ze=[],Be=me(At),Ge=me(He);return Be&&Ge&&Me(Be,Ge)||(Be&&Ze.push(Be),Ge&&Ze.push(Ge)),Ze}:K==="hvh"?Ee=ze(0,Ae,Se):K==="vhv"&&(Ee=ze(1,Oe,De));var Ve=s.isArrayOrTypedArray(te);function Ye(At){if(At&&U&&(At.i=l,At.d=r,At.trace=R,At.marker=Ve?te[At.i]:te,At.backoff=U),C=At[0]/F,P=At[1]/V,ge=At[0]<Ae?Ae:At[0]>Se?Se:0,we=At[1]<Oe?Oe:At[1]>De?De:0,ge||we){if(he)if(ie){var He=Ee(ie,At);He.length>1&&(Ne(He[0]),ce[he++]=He[1])}else fe=Ee(ce[he-1],At)[0],ce[he++]=fe;else ce[he++]=[ge||At[0],we||At[1]];var Ze=ce[he-1];ge&&we&&(Ze[0]!==ge||Ze[1]!==we)?(ie&&(_e!==ge&&se!==we?Pe(_e&&se?(Be=ie,it=(Ge=At)[0]-Be[0],tt=(Ge[1]-Be[1])/it,(Be[1]*Ge[0]-Ge[1]*Be[0])/it>0?[tt>0?Ae:Se,De]:[tt>0?Se:Ae,Oe]):[_e||ge,se||we]):_e&&se&&Pe([_e,se])),Pe([ge,we])):_e-ge&&se-we&&Pe([ge||_e,we||se]),ie=At,_e=ge,se=we}else ie&&Ne(Ee(ie,At)[0]),ce[he++]=At;var Be,Ge,it,tt}for(l=0;l<ae;l++)if(u=pe(l)){for(he=0,ie=null,Ye(u),l++;l<ae;l++){if(!(c=pe(l))){if(J)continue;break}if(Q&&i.simplify){var at=pe(l+1);if(m=ve(c,u),Z&&(he===0||he===ae-1)||!(m<be(c,at)*oe)){for(v=[(c[0]-u[0])/m,(c[1]-u[1])/m],x=u,_=m,f=w=E=0,g=!1,p=c,l++;l<r.length;l++){if(d=at,at=pe(l+1),!d){if(J)continue;break}if(O=(y=[d[0]-u[0],d[1]-u[1]])[0]*v[1]-y[1]*v[0],w=Math.min(w,O),(E=Math.max(E,O))-w>be(d,at))break;p=d,(S=y[0]*v[0]+y[1]*v[1])>_?(_=S,c=d,g=!1):S<f&&(f=S,x=d,g=!0)}if(g?(Ye(c),p!==x&&Ye(x)):(x!==u&&Ye(x),p!==c&&Ye(c)),Ye(p),l>=r.length||!d)break;Ye(d),u=d}}else Ye(c)}ie&&Pe([_e||ie[0],se||ie[1]]),re.push(ce.slice(0,he))}var rt=K.slice(K.length-1);if(U&&rt!=="h"&&rt!=="v"){for(var dt=!1,vt=-1,ht=[],et=0;et<re.length;et++)for(var $e=0;$e<re[et].length-1;$e++){var wt=re[et][$e],Pt=re[et][$e+1],Ot=M.applyBackoff(Pt,wt);Ot[0]===Pt[0]&&Ot[1]===Pt[1]||(dt=!0),ht[vt+1]||(ht[++vt]=[wt,[Ot[0],Ot[1]]])}return dt?ht:re}return re}},11731:function(ee){ee.exports=function(z,e,M){M("line.shape")==="spline"&&M("line.smoothing")}},14328:function(ee){var z={tonextx:1,tonexty:1,tonext:1};ee.exports=function(e,M,k){var o,T,b,h,s,t={},a=!1,n=-1,r=0,i=-1;for(T=0;T<k.length;T++)(b=(o=k[T][0].trace).stackgroup||"")?b in t?s=t[b]:(s=t[b]=r,r++):o.fill in z&&i>=0?s=i:(s=i=r,r++),s<n&&(a=!0),o._groupIndex=n=s;var l=k.slice();a&&l.sort(function(p,c){var x=p[0].trace,d=c[0].trace;return x._groupIndex-d._groupIndex||x.index-d.index});var u={};for(T=0;T<l.length;T++)b=(o=l[T][0].trace).stackgroup||"",o.visible===!0?(o._nexttrace=null,o.fill in z&&(h=u[b],o._prevtrace=h||null,h&&(h._nexttrace=o)),o._ownfill=o.fill&&(o.fill.substr(0,6)==="tozero"||o.fill==="toself"||o.fill.substr(0,2)==="to"&&!o._prevtrace),u[b]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return l}},7152:function(ee,z,e){var M=e(38248);ee.exports=function(k,o){o||(o=2);var T=k.marker,b=T.sizeref||1,h=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var a=s(t/o);return M(a)&&a>0?Math.max(a,h):0}}},5528:function(ee){ee.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(ee,z,e){var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(43028);ee.exports=function(b,h,s,t,a,n){var r=T.isBubble(b),i=(b.line||{}).color;n=n||{},i&&(s=i),a("marker.symbol"),a("marker.opacity",r?.7:1),a("marker.size"),n.noAngle||(a("marker.angle"),n.noAngleRef||a("marker.angleref"),n.noStandOff||a("marker.standoff")),a("marker.color",s),k(b,"marker")&&o(b,h,t,a,{prefix:"marker.",cLetter:"c"}),n.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),n.noLine||(a("marker.line.color",i&&!Array.isArray(i)&&h.marker.color!==i?i:r?M.background:M.defaultLine),k(b,"marker.line")&&o(b,h,t,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",r?1:0)),r&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),n.gradient&&a("marker.gradient.type")!=="none"&&a("marker.gradient.color")}},31147:function(ee,z,e){var M=e(3400).dateTick0,k=e(39032).ONEWEEK;function o(T,b){return M(b,T%k==0?1:0)}ee.exports=function(T,b,h,s,t){if(t||(t={x:!0,y:!0}),t.x){var a=s("xperiod");a&&(s("xperiod0",o(a,b.xcalendar)),s("xperiodalignment"))}if(t.y){var n=s("yperiod");n&&(s("yperiod0",o(n,b.ycalendar)),s("yperiodalignment"))}}},96504:function(ee,z,e){var M=e(33428),k=e(24040),o=e(3400),T=o.ensureSingle,b=o.identity,h=e(43616),s=e(43028),t=e(52340),a=e(14328),n=e(92065).tester;function r(i,l,u,p,c,x,d){var g,v=i._context.staticPlot;(function(Pe,Ne,Ve,Ye,at){var rt=Ve.xaxis,dt=Ve.yaxis,vt=M.extent(o.simpleMap(rt.range,rt.r2c)),ht=M.extent(o.simpleMap(dt.range,dt.r2c)),et=Ye[0].trace;if(s.hasMarkers(et)){var $e=et.marker.maxdisplayed;if($e!==0){var wt=Ye.filter(function(He){return He.x>=vt[0]&&He.x<=vt[1]&&He.y>=ht[0]&&He.y<=ht[1]}),Pt=Math.ceil(wt.length/$e),Ot=0;at.forEach(function(He,Ze){var Be=He[0].trace;s.hasMarkers(Be)&&Be.marker.maxdisplayed>0&&Ze<Ne&&Ot++});var At=Math.round(Ot*Pt/3+Math.floor(Ot/3)*Pt/7.1);Ye.forEach(function(He){delete He.vis}),wt.forEach(function(He,Ze){Math.round((Ze+At)%Pt)===0&&(He.vis=!0)})}}})(0,l,u,p,c);var y=!!d&&d.duration>0;function m(Pe){return y?Pe.transition():Pe}var _=u.xaxis,f=u.yaxis,S=p[0].trace,w=S.line,E=M.select(x),O=T(E,"g","errorbars"),C=T(E,"g","lines"),P=T(E,"g","points"),R=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(i,O,u,d),S.visible===!0){var j,D;m(E).style("opacity",S.opacity);var N,W,F=S.fill.charAt(S.fill.length-1);F!=="x"&&F!=="y"&&(F=""),F==="y"?(N=1,W=f.c2p(0,!0)):F==="x"&&(N=0,W=_.c2p(0,!0)),p[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var V,U,te="",J=[],X=S._prevtrace,K=null,Q=null;X&&(te=X._prevRevpath||"",D=X._nextFill,J=X._ownPolygons,K=X._fillsegments,Q=X._fillElement);var Z,re,oe,ae,ce,he,pe="",xe="",be=[];S._polygons=[];var ve=[],ge=[],we=o.noop;if(j=S._ownFill,s.hasLines(S)||S.fill!=="none"){D&&D.datum(p),["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1?(Z=h.steps(w.shape),re=h.steps(w.shape.split("").reverse().join(""))):Z=re=w.shape==="spline"?function(Pe){var Ne=Pe[Pe.length-1];return Pe.length>1&&Pe[0][0]===Ne[0]&&Pe[0][1]===Ne[1]?h.smoothclosed(Pe.slice(1),w.smoothing):h.smoothopen(Pe,w.smoothing)}:function(Pe){return"M"+Pe.join("L")},oe=function(Pe){return re(Pe.reverse())},ge=t(p,{xaxis:_,yaxis:f,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:S.fill}),ve=new Array(ge.length);var _e=0;for(g=0;g<ge.length;g++){var se,ie=ge[g];se&&F?se.push.apply(se,ie):(se=ie.slice(),ve[_e]=se,_e++)}S._fillElement=null,S._fillExclusionElement=Q,S._fillsegments=ve.slice(0,_e),ve=S._fillsegments,ge.length&&(ae=ge[0][0].slice(),he=(ce=ge[ge.length-1])[ce.length-1].slice()),we=function(Pe){return function(Ne){if(V=Z(Ne),U=oe(Ne),pe?F?(pe+="L"+V.substr(1),xe=U+"L"+xe.substr(1)):(pe+="Z"+V,xe=U+"Z"+xe):(pe=V,xe=U),s.hasLines(S)){var Ve=M.select(this);if(Ve.datum(p),Pe)m(Ve.style("opacity",0).attr("d",V).call(h.lineGroupStyle)).style("opacity",1);else{var Ye=m(Ve);Ye.attr("d",V),h.singleLineStyle(p,Ye)}}}}}var fe=C.selectAll(".js-line").data(ge);m(fe.exit()).style("opacity",0).remove(),fe.each(we(!1)),fe.enter().append("path").classed("js-line",!0).style("vector-effect",v?"none":"non-scaling-stroke").call(h.lineGroupStyle).each(we(!0)),h.setClipUrl(fe,u.layerClipId,i);var Ee=function(){var Pe=new Array(ve.length);for(g=0;g<ve.length;g++)Pe[g]=n(ve[g]);return Pe},Te=function(Pe){var Ne,Ve;if(Pe&&Pe.length!==0){for(Ne=new Array(Pe.length-1+ve.length),Ve=0;Ve<Pe.length-1;Ve++)Ne[Ve]=n(Pe[Ve]);var Ye=Pe[Pe.length-1].slice();for(Ye.reverse(),Ve=0;Ve<ve.length;Ve++)Ne[Pe.length-1+Ve]=n(ve[Ve].concat(Ye))}else for(Ne=new Array(ve.length),Ve=0;Ve<ve.length;Ve++){var at=ve[Ve][0].slice(),rt=ve[Ve][ve[Ve].length-1].slice();at[N]=rt[N]=W;var dt=[rt,at].concat(ve[Ve]);Ne[Ve]=n(dt)}return Ne};ge.length?(j?(j.datum(p),ae&&he&&(F?(ae[N]=he[N]=W,m(j).attr("d","M"+he+"L"+ae+"L"+pe.substr(1)).call(h.singleFillStyle,i),be=Te(null)):(m(j).attr("d",pe+"Z").call(h.singleFillStyle,i),be=Ee())),S._polygons=be,S._fillElement=j):D&&(S.fill.substr(0,6)==="tonext"&&pe&&te?(S.fill==="tonext"?(m(D).attr("d",pe+"Z"+te+"Z").call(h.singleFillStyle,i),be=Ee(),S._polygons=be.concat(J)):(m(D).attr("d",pe+"L"+te.substr(1)+"Z").call(h.singleFillStyle,i),be=Te(K),S._polygons=be),S._fillElement=D):Se(D)),S._prevRevpath=xe):(j?Se(j):D&&Se(D),S._prevRevpath=null),S._ownPolygons=be,P.datum(p),R.datum(p),function(Pe,Ne,Ve){var Ye,at=Ve[0].trace,rt=s.hasMarkers(at),dt=s.hasText(at),vt=Me(at),ht=ze,et=ze;if(rt||dt){var $e=b,wt=at.stackgroup,Pt=wt&&i._fullLayout._scatterStackOpts[_._id+f._id][wt].stackgaps==="infer zero";at.marker.maxdisplayed||at._needsCull?$e=Pt?De:Oe:wt&&!Pt&&($e=de),rt&&(ht=$e),dt&&(et=$e)}var Ot,At=(Ye=Pe.selectAll("path.point").data(ht,vt)).enter().append("path").classed("point",!0);y&&At.call(h.pointStyle,at,i).call(h.translatePoints,_,f).style("opacity",0).transition().style("opacity",1),Ye.order(),rt&&(Ot=h.makePointStyleFns(at)),Ye.each(function(He){var Ze=M.select(this),Be=m(Ze);h.translatePoint(He,Be,_,f)?(h.singlePointStyle(He,Be,at,Ot,i),u.layerClipId&&h.hideOutsideRangePoint(He,Be,_,f,at.xcalendar,at.ycalendar),at.customdata&&Ze.classed("plotly-customdata",He.data!==null&&He.data!==void 0)):Be.remove()}),y?Ye.exit().transition().style("opacity",0).remove():Ye.exit().remove(),(Ye=Ne.selectAll("g").data(et,vt)).enter().append("g").classed("textpoint",!0).append("text"),Ye.order(),Ye.each(function(He){var Ze=M.select(this),Be=m(Ze.select("text"));h.translatePoint(He,Be,_,f)?u.layerClipId&&h.hideOutsideRangePoint(He,Ze,_,f,at.xcalendar,at.ycalendar):Ze.remove()}),Ye.selectAll("text").call(h.textPointStyle,at,i).each(function(He){var Ze=_.c2p(He.x),Be=f.c2p(He.y);M.select(this).selectAll("tspan.line").each(function(){m(M.select(this)).attr({x:Ze,y:Be})})}),Ye.exit().remove()}(P,R,p);var Ae=S.cliponaxis===!1?null:u.layerClipId;h.setClipUrl(P,Ae,i),h.setClipUrl(R,Ae,i)}function Se(Pe){m(Pe).attr("d","M0,0Z")}function Oe(Pe){return Pe.filter(function(Ne){return!Ne.gap&&Ne.vis})}function De(Pe){return Pe.filter(function(Ne){return Ne.vis})}function de(Pe){return Pe.filter(function(Ne){return!Ne.gap})}function me(Pe){return Pe.id}function Me(Pe){if(Pe.ids)return me}function ze(){return!1}}ee.exports=function(i,l,u,p,c,x){var d,g,v=!c,y=!!c&&c.duration>0,m=a(i,l,u);(d=p.selectAll("g.trace").data(m,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),d.order(),function(_,f,S){f.each(function(w){var E=T(M.select(this),"g","fills");h.setClipUrl(E,S.layerClipId,_);var O=w[0].trace,C=[];O._ownfill&&C.push("_ownFill"),O._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,b);P.enter().append("g"),P.exit().each(function(R){O[R]=null}).remove(),P.order().each(function(R){O[R]=T(M.select(this),"path","js-fill")})})}(i,d,l),y?(x&&(g=x()),M.transition().duration(c.duration).ease(c.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){p.selectAll("g.trace").each(function(_,f){r(i,f,l,_,m,this,c)})})):d.each(function(_,f){r(i,f,l,_,m,this,c)}),v&&d.exit().remove(),p.selectAll("path:not([d])").remove()}},91560:function(ee,z,e){var M=e(43028);ee.exports=function(k,o){var T,b,h,s,t=k.cd,a=k.xaxis,n=k.yaxis,r=[],i=t[0].trace;if(!M.hasMarkers(i)&&!M.hasText(i))return[];if(o===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)b=t[T],h=a.c2p(b.x),s=n.c2p(b.y),b.i!==null&&o.contains([h,s],!1,T,k)?(r.push({pointNumber:b.i,x:a.c2d(b.x),y:n.c2d(b.y)}),b.selected=1):b.selected=0;return r}},43912:function(ee){var z=["orientation","groupnorm","stackgaps"];ee.exports=function(e,M,k,o){var T=k._scatterStackOpts,b=o("stackgroup");if(b){var h=M.xaxis+M.yaxis,s=T[h];s||(s=T[h]={});var t=s[b],a=!1;t?t.traces.push(M):(t=s[b]={traceIndices:[],traces:[M]},a=!0);for(var n={orientation:M.x&&!M.y?"h":"v"},r=0;r<z.length;r++){var i=z[r],l=i+"Found";if(!t[l]){var u=e[i]!==void 0,p=i==="orientation";if((u||a)&&(t[i]=o(i,n[i]),p&&(t.fillDflt=t[i]==="h"?"tonextx":"tonexty"),u&&(t[l]=!0,!a&&(delete t.traces[0][i],p))))for(var c=0;c<t.traces.length-1;c++){var x=t.traces[c];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},49224:function(ee,z,e){var M=e(33428),k=e(43616),o=e(24040);function T(h,s,t){k.pointStyle(h.selectAll("path.point"),s,t)}function b(h,s,t){k.textPointStyle(h.selectAll("text"),s,t)}ee.exports={style:function(h){var s=M.select(h).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(M.select(this),t.trace||t[0].trace,h)}),s.selectAll("g.text").each(function(t){b(M.select(this),t.trace||t[0].trace,h)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,h,!1),o.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:b,styleOnSelect:function(h,s,t){var a=s[0].trace;a.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),a),k.selectedTextStyle(t.selectAll("text"),a)):(T(t,a,h),b(t,a,h))}}},43028:function(ee,z,e){var M=e(3400),k=e(38116).isTypedArraySpec;ee.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){var T=o.marker;return M.isPlainObject(T)&&(M.isArrayOrTypedArray(T.size)||k(T.size))}}},124:function(ee,z,e){var M=e(3400);ee.exports=function(k,o,T,b,h){h=h||{},b("textposition"),M.coerceFont(b,"textfont",h.font||T.font,h),h.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},43980:function(ee,z,e){var M=e(3400),k=e(24040);ee.exports=function(o,T,b,h){var s,t=h("x"),a=h("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],b),t){var n=M.minRowLength(t);a?s=Math.min(n,M.minRowLength(a)):(s=n,h("y0"),h("dy"))}else{if(!a)return 0;s=M.minRowLength(a),h("x0"),h("dx")}return T._length=s,s}},91592:function(ee,z,e){var M=e(52904),k=e(25376),o=e(49084),T=e(29736).axisHoverFormat,b=e(21776).Ks,h=e(21776).Gw,s=e(45464),t=e(99168),a=e(87792),n=e(92880).extendFlat,r=e(67824).overrideAll,i=e(95376),l=M.line,u=M.marker,p=u.line,c=n({width:l.width,dash:{valType:"enumerated",values:i(t),dflt:"solid"}},o("line")),x=ee.exports=r({x:M.x,y:M.y,z:{valType:"data_array"},text:n({},M.text,{}),texttemplate:h({},{}),hovertext:n({},M.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:n({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:c,marker:n({symbol:{valType:"enumerated",values:i(a),dflt:"circle",arrayOk:!0},size:n({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:n({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:n({width:n({},p.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:n({},M.textposition,{dflt:"top center"}),textfont:k({editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:s.opacity,hoverinfo:n({},s.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},41484:function(ee,z,e){var M=e(20148),k=e(90136);ee.exports=function(o,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return M(b,T),k(o,T),b}},45156:function(ee,z,e){var M=e(24040);function k(o,T,b,h){if(!T||!T.visible)return null;for(var s=M.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(o.length),a=0;a<o.length;a++){var n=s(+o[a],a);if(h.type==="log"){var r=h.c2l(o[a]),i=o[a]-n[0],l=o[a]+n[1];if(t[a]=[(h.c2l(i,!0)-r)*b,(h.c2l(l,!0)-r)*b],i>0){var u=h.c2l(i);h._lowerLogErrorBound||(h._lowerLogErrorBound=u),h._lowerErrorBound=Math.min(h._lowerLogErrorBound,u)}}else t[a]=[-n[0]*b,n[1]*b]}return t}ee.exports=function(o,T,b){var h=[k(o.x,o.error_x,T[0],b.xaxis),k(o.y,o.error_y,T[1],b.yaxis),k(o.z,o.error_z,T[2],b.zaxis)],s=function(l){for(var u=0;u<l.length;u++)if(l[u])return l[u].length;return 0}(h);if(s===0)return null;for(var t=new Array(s),a=0;a<s;a++){for(var n=[[0,0,0],[0,0,0]],r=0;r<3;r++)if(h[r])for(var i=0;i<2;i++)n[i][r]=h[r][a][i];t[a]=n}return t}},41064:function(ee,z,e){var M=e(67792).gl_line3d,k=e(67792).gl_scatter3d,o=e(67792).gl_error3d,T=e(67792).gl_mesh3d,b=e(67792).delaunay_triangulate,h=e(3400),s=e(43080),t=e(33040).formatColor,a=e(7152),n=e(99168),r=e(87792),i=e(54460),l=e(10624).appendArrayPointValue,u=e(45156);function p(f,S){this.scene=f,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=p.prototype;function x(f){return f==null?0:f.indexOf("left")>-1?-1:f.indexOf("right")>-1?1:0}function d(f){return f==null?0:f.indexOf("top")>-1?-1:f.indexOf("bottom")>-1?1:0}function g(f,S){return S(4*f)}function v(f){return r[f]}function y(f,S,w,E,O){var C=null;if(h.isArrayOrTypedArray(f)){C=[];for(var P=0;P<S;P++)f[P]===void 0?C[P]=E:C[P]=w(f[P],O)}else C=w(f,h.identity);return C}function m(f){if(h.isArrayOrTypedArray(f)){var S=f[0];return h.isArrayOrTypedArray(S)&&(f=S),"rgb("+f.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function _(f){return h.isArrayOrTypedArray(f)?f.length===4&&typeof f[0]=="number"?m(f):f.map(m):null}c.handlePick=function(f){if(f.object&&(f.object===this.linePlot||f.object===this.delaunayMesh||f.object===this.textMarkers||f.object===this.scatterPlot)){var S=f.index=f.data.index;return f.object.highlight&&f.object.highlight(null),this.scatterPlot&&(f.object=this.scatterPlot,this.scatterPlot.highlight(f.data)),f.textLabel="",this.textLabels&&(h.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(f.textLabel=this.textLabels[S]):f.textLabel=this.textLabels),f.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(f){var S,w,E,O,C=this.scene.glplot.gl,P=n.solid;this.data=f;var R=function(N,W){var F,V,U,te,J,X,K=[],Q=N.fullSceneLayout,Z=N.dataScale,re=Q.xaxis,oe=Q.yaxis,ae=Q.zaxis,ce=W.marker,he=W.line,pe=W.x||[],xe=W.y||[],be=W.z||[],ve=pe.length,ge=W.xcalendar,we=W.ycalendar,_e=W.zcalendar;for(J=0;J<ve;J++)F=re.d2l(pe[J],0,ge)*Z[0],V=oe.d2l(xe[J],0,we)*Z[1],U=ae.d2l(be[J],0,_e)*Z[2],K[J]=[F,V,U];if(Array.isArray(W.text))X=W.text;else if(h.isTypedArray(W.text))X=Array.from(W.text);else if(W.text!==void 0)for(X=new Array(ve),J=0;J<ve;J++)X[J]=W.text;function se(Ne,Ve){var Ye=Q[Ne];return i.tickText(Ye,Ye.d2l(Ve),!0).text}var ie=W.texttemplate;if(ie){var fe=N.fullLayout._d3locale,Ee=Array.isArray(ie),Te=Ee?Math.min(ie.length,ve):ve,Ae=Ee?function(Ne){return ie[Ne]}:function(){return ie};for(X=new Array(Te),J=0;J<Te;J++){var Se={x:pe[J],y:xe[J],z:be[J]},Oe={xLabel:se("xaxis",pe[J]),yLabel:se("yaxis",xe[J]),zLabel:se("zaxis",be[J])},De={};l(De,W,J);var de=W._meta||{};X[J]=h.texttemplateString(Ae(J),Oe,fe,De,Se,de)}}if(te={position:K,mode:W.mode,text:X},"line"in W&&(te.lineColor=t(he,1,ve),te.lineWidth=he.width,te.lineDashes=he.dash),"marker"in W){var me=a(W);te.scatterColor=t(ce,1,ve),te.scatterSize=y(ce.size,ve,g,20,me),te.scatterMarker=y(ce.symbol,ve,v,""),te.scatterLineWidth=ce.line.width,te.scatterLineColor=t(ce.line,1,ve),te.scatterAngle=0}"textposition"in W&&(te.textOffset=function(Ne){var Ve=[0,0];if(Array.isArray(Ne))for(var Ye=0;Ye<Ne.length;Ye++)Ve[Ye]=[0,0],Ne[Ye]&&(Ve[Ye][0]=x(Ne[Ye]),Ve[Ye][1]=d(Ne[Ye]));else Ve[0]=x(Ne),Ve[1]=d(Ne);return Ve}(W.textposition),te.textColor=t(W.textfont,1,ve),te.textSize=y(W.textfont.size,ve,h.identity,12),te.textFontFamily=W.textfont.family,te.textFontWeight=W.textfont.weight,te.textFontStyle=W.textfont.style,te.textFontVariant=W.textfont.variant,te.textAngle=0);var Me=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],J=0;J<3;++J){var ze=W.projection[Me[J]];(te.project[J]=ze.show)&&(te.projectOpacity[J]=ze.opacity,te.projectScale[J]=ze.scale)}te.errorBounds=u(W,Z,Q);var Pe=function(Ne){for(var Ve=[0,0,0],Ye=[[0,0,0],[0,0,0],[0,0,0]],at=[1,1,1],rt=0;rt<3;rt++){var dt=Ne[rt];dt&&dt.copy_zstyle!==!1&&Ne[2].visible!==!1&&(dt=Ne[2]),dt&&dt.visible&&(Ve[rt]=dt.width/2,Ye[rt]=s(dt.color),at[rt]=dt.thickness)}return{capSize:Ve,color:Ye,lineWidth:at}}([W.error_x,W.error_y,W.error_z]);return te.errorColor=Pe.color,te.errorLineWidth=Pe.lineWidth,te.errorCapSize=Pe.capSize,te.delaunayAxis=W.surfaceaxis,te.delaunayColor=s(W.surfacecolor),te}(this.scene,f);"mode"in R&&(this.mode=R.mode),"lineDashes"in R&&R.lineDashes in n&&(P=n[R.lineDashes]),this.color=_(R.scatterColor)||_(R.lineColor),this.dataPoints=R.position,S={gl:this.scene.glplot.gl,position:R.position,color:R.lineColor,lineWidth:R.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:f.opacity,connectGaps:f.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=M(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=f.opacity;if(f.marker&&f.marker.opacity!==void 0&&(j*=f.marker.opacity),w={gl:this.scene.glplot.gl,position:R.position,color:R.scatterColor,size:R.scatterSize,glyph:R.scatterMarker,opacity:j,orthographic:!0,lineWidth:R.scatterLineWidth,lineColor:R.scatterLineColor,project:R.project,projectScale:R.projectScale,projectOpacity:R.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:R.position,glyph:R.text,color:R.textColor,size:R.textSize,angle:R.textAngle,alignment:R.textOffset,font:R.textFontFamily,fontWeight:R.textFontWeight,fontStyle:R.textFontStyle,fontVariant:R.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:f.opacity},this.textLabels=f.hovertext||f.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=k(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:R.position,color:R.errorColor,error:R.errorBounds,lineWidth:R.errorLineWidth,capSize:R.errorCapSize,opacity:f.opacity},this.errorBars?R.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):R.errorBounds&&(this.errorBars=o(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),R.delaunayAxis>=0){var D=function(N,W,F){var V,U=(F+1)%3,te=(F+2)%3,J=[],X=[];for(V=0;V<N.length;++V){var K=N[V];!isNaN(K[U])&&isFinite(K[U])&&!isNaN(K[te])&&isFinite(K[te])&&(J.push([K[U],K[te]]),X.push(V))}var Q=b(J);for(V=0;V<Q.length;++V)for(var Z=Q[V],re=0;re<Z.length;++re)Z[re]=X[Z[re]];return{positions:N,cells:Q,meshColor:W}}(R.position,R.delaunayColor,R.delaunayAxis);D.opacity=f.opacity,this.delaunayMesh?this.delaunayMesh.update(D):(D.gl=C,this.delaunayMesh=T(D),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ee.exports=function(f,S){var w=new p(f,S.uid);return w.update(S),w}},83484:function(ee,z,e){var M=e(24040),k=e(3400),o=e(43028),T=e(74428),b=e(66828),h=e(124),s=e(91592);ee.exports=function(t,a,n,r){function i(v,y){return k.coerce(t,a,s,v,y)}var l=function(v,y,m,_){var f=0,S=m("x"),w=m("y"),E=m("z");return M.getComponentMethod("calendars","handleTraceDefaults")(v,y,["x","y","z"],_),S&&w&&E&&(f=Math.min(S.length,w.length,E.length),y._length=y._xlength=y._ylength=y._zlength=f),f}(t,a,i,r);if(l){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),o.hasMarkers(a)&&T(t,a,n,r,i,{noSelect:!0,noAngle:!0}),o.hasLines(a)&&(i("connectgaps"),b(t,a,n,r,i)),o.hasText(a)&&(i("texttemplate"),h(t,a,r,i,{noSelect:!0}));var u=(a.line||{}).color,p=(a.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",u||p);for(var c=["x","y","z"],x=0;x<3;++x){var d="projection."+c[x];i(d+".show")&&(i(d+".opacity"),i(d+".scale"))}var g=M.getComponentMethod("errorbars","supplyDefaults");g(t,a,u||p||n,{axis:"z"}),g(t,a,u||p||n,{axis:"y",inherit:"z"}),g(t,a,u||p||n,{axis:"x",inherit:"z"})}else a.visible=!1}},3296:function(ee,z,e){ee.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(ee,z,e){var M=e(98304),k=e(52904),o=e(45464),T=e(21776).Ks,b=e(21776).Gw,h=e(49084),s=e(92880).extendFlat,t=k.marker,a=k.line,n=t.line;ee.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},k.mode,{dflt:"markers"}),text:s({},k.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},k.hovertext,{}),line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:s({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:s({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M(),marker:s({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:n.width,editType:"calc"},h("marker.line")),gradient:t.gradient,editType:"calc"},h("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:s({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:T(),zorder:k.zorder}},48228:function(ee,z,e){var M=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,h=e(50948);ee.exports=function(s,t){var a=t._carpetTrace=h(s,t);if(a&&a.visible&&a.visible!=="legendonly"){var n;t.xaxis=a.xaxis,t.yaxis=a.yaxis;var r,i,l=t._length,u=new Array(l),p=!1;for(n=0;n<l;n++)if(r=t.a[n],i=t.b[n],M(r)&&M(i)){var c=a.ab2xy(+r,+i,!0),x=a.isVisible(+r,+i);x||(p=!0),u[n]={x:c[0],y:c[1],a:r,b:i,vis:x}}else u[n]={x:!1,y:!1};return t._needsCull=p,u[0].carpet=a,u[0].trace=t,b(t,l),k(s,t),o(u,t),T(u,t),u}}},6176:function(ee,z,e){var M=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),h=e(11731),s=e(124),t=e(70840),a=e(90372);ee.exports=function(n,r,i,l){function u(g,v){return M.coerce(n,r,a,g,v)}u("carpet"),r.xaxis="x",r.yaxis="y";var p=u("a"),c=u("b"),x=Math.min(p.length,c.length);if(x){r._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(r)&&T(n,r,i,l,u,{gradient:!0}),o.hasLines(r)&&(b(n,r,i,l,u,{backoff:!0}),h(n,r,u),u("connectgaps")),o.hasText(r)&&s(n,r,l,u);var d=[];(o.hasMarkers(r)||o.hasText(r))&&(u("marker.maxdisplayed"),d.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,i,u),o.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||d.push("fills"),u("hoveron",d.join("+")||"points")!=="fills"&&u("hovertemplate"),u("zorder"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},89307:function(ee){ee.exports=function(z,e,M,k,o){var T=k[o];return z.a=T.a,z.b=T.b,z.y=T.y,z}},52364:function(ee){ee.exports=function(z,e){var M={},k=e._carpet,o=k.ab2ij([z.a,z.b]),T=Math.floor(o[0]),b=o[0]-T,h=Math.floor(o[1]),s=o[1]-h,t=k.evalxy([],T,h,b,s);return M.yLabel=t[1].toFixed(3),M}},58960:function(ee,z,e){var M=e(98723),k=e(3400).fillText;ee.exports=function(o,T,b,h){var s=M(o,T,b,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var a=1-t.y0/o.ya._length,n=o.xa._length,r=n*a/2,i=n-r;return t.x0=Math.max(Math.min(t.x0,i),r),t.x1=Math.max(Math.min(t.x1,i),r),s}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,p=u._carpet,c=u._module.formatLabels(l,u);t.yLabel=c.yLabel,delete t.text;var x=[];if(!u.hovertemplate){var d=(l.hi||u.hoverinfo).split("+");d.indexOf("all")!==-1&&(d=["a","b","text"]),d.indexOf("a")!==-1&&g(p.aaxis,l.a),d.indexOf("b")!==-1&&g(p.baxis,l.b),x.push("y: "+t.yLabel),d.indexOf("text")!==-1&&k(l,u,x),t.extraText=x.join("<br>")}return s}function g(v,y){var m;m=v.labelprefix&&v.labelprefix.length>0?v.labelprefix.replace(/ = $/,""):v._hovertitle,x.push(m+": "+y.toFixed(3)+v.labelsuffix)}}},4184:function(ee,z,e){ee.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(ee,z,e){var M=e(96504),k=e(54460),o=e(43616);ee.exports=function(T,b,h,s){var t,a,n,r=h[0][0].carpet,i=k.getFromId(T,r.xaxis||"x"),l=k.getFromId(T,r.yaxis||"y"),u={xaxis:i,yaxis:l,plot:b.plot};for(t=0;t<h.length;t++)(a=h[t][0].trace)._xA=i,a._yA=l;for(M(T,u,h,s),t=0;t<h.length;t++)a=h[t][0].trace,n=s.selectAll("g.trace"+a.uid+" .js-line"),o.setClipUrl(n,h[t][0].carpet._clipPathId,T)}},6096:function(ee,z,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),h=e(49084),s=e(98192).u,t=e(92880).extendFlat,a=e(67824).overrideAll,n=T.marker,r=T.line,i=n.line;ee.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:r.color,width:r.width,dash:s},connectgaps:T.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:t({},n.angleref,{values:["previous","up","north"]}),standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:i.width},h("marker.line")),gradient:n.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},25212:function(ee,z,e){var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),h=e(3400).isArrayOrTypedArray,s=e(3400)._;function t(a){return a&&typeof a=="string"}ee.exports=function(a,n){var r,i=h(n.locations),l=i?n.locations.length:n._length,u=new Array(l);r=n.geojson?function(v){return t(v)||M(v)}:t;for(var p=0;p<l;p++){var c=u[p]={};if(i){var x=n.locations[p];c.loc=r(x)?x:null}else{var d=n.lon[p],g=n.lat[p];M(d)&&M(g)?c.lonlat=[+d,+g]:c.lonlat=[k,k]}}return T(u,n),o(a,n),b(u,n),l&&(u[0].t={labels:{lat:s(a,"lat:")+" ",lon:s(a,"lon:")+" "}}),u}},86188:function(ee,z,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),h=e(70840),s=e(6096);ee.exports=function(t,a,n,r){function i(g,v){return M.coerce(t,a,s,g,v)}var l,u=i("locations");if(u&&u.length){var p,c=i("geojson");(typeof c=="string"&&c!==""||M.isPlainObject(c))&&(p="geojson-id"),i("locationmode",p)==="geojson-id"&&i("featureidkey"),l=u.length}else{var x=i("lon")||[],d=i("lat")||[];l=Math.min(x.length,d.length)}l?(a._length=l,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),k.hasMarkers(a)&&o(t,a,n,r,i,{gradient:!0}),k.hasLines(a)&&(T(t,a,n,r,i),i("connectgaps")),k.hasText(a)&&(i("texttemplate"),b(t,a,r,i)),i("fill"),a.fill!=="none"&&h(t,a,n,i),M.coerceSelectionMarkerOpacity(a,i)):a.visible=!1}},58544:function(ee){ee.exports=function(z,e,M,k,o){z.lon=e.lon,z.lat=e.lat,z.location=e.loc?e.loc:null;var T=k[o];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z}},56696:function(ee,z,e){var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.geo]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=M.tickText(h,h.c2l(s[0]),!0).text,b.latLabel=M.tickText(h,h.c2l(s[1]),!0).text,b}},64292:function(ee,z,e){var M=e(93024),k=e(39032).BADNUM,o=e(44928),T=e(3400).fillText,b=e(6096);ee.exports=function(h,s,t){var a=h.cd,n=a[0].trace,r=h.xa,i=h.ya,l=h.subplot,u=l.projection.isLonLatOverEdges,p=l.project;if(M.getClosest(a,function(m){var _=m.lonlat;if(_[0]===k||u(_))return 1/0;var f=p(_),S=p([s,t]),w=Math.abs(f[0]-S[0]),E=Math.abs(f[1]-S[1]),O=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-O,1-3/O)},h),h.index!==!1){var c=a[h.index],x=c.lonlat,d=[r.c2p(x),i.c2p(x)],g=c.mrc||1;h.x0=d[0]-g,h.x1=d[0]+g,h.y0=d[1]-g,h.y1=d[1]+g,h.loc=c.loc,h.lon=x[0],h.lat=x[1];var v={};v[n.geo]={_subplot:l};var y=n._module.formatLabels(c,n,v);return h.lonLabel=y.lonLabel,h.latLabel=y.latLabel,h.color=o(n,c),h.extraText=function(m,_,f,S){if(!m.hovertemplate){var w=_.hi||m.hoverinfo,E=w==="all"?b.hoverinfo.flags:w.split("+"),O=E.indexOf("location")!==-1&&Array.isArray(m.locations),C=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,R=E.indexOf("text")!==-1,j=[];return O?j.push(_.loc):C&&P?j.push("("+D(f.latLabel)+", "+D(f.lonLabel)+")"):C?j.push(S.lon+D(f.lonLabel)):P&&j.push(S.lat+D(f.latLabel)),R&&T(_,m,j),j.join("<br>")}function D(N){return N+""}}(n,c,h,a[0].t.labels),h.hovertemplate=n.hovertemplate,[h]}}},36952:function(ee,z,e){ee.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(ee,z,e){var M=e(33428),k=e(3400),o=e(59972).getTopojsonFeatures,T=e(44808),b=e(27144),h=e(19280).findExtremes,s=e(39032).BADNUM,t=e(16356).calcMarkerSize,a=e(43028),n=e(25064);ee.exports={calcGeoJSON:function(r,i){var l,u,p=r[0].trace,c=i[p.geo],x=c._subplot,d=p._length;if(k.isArrayOrTypedArray(p.locations)){var g=p.locationmode,v=g==="geojson-id"?b.extractTraceFeature(r):o(p,x.topojson);for(l=0;l<d;l++){u=r[l];var y=g==="geojson-id"?u.fOut:b.locationToFeature(g,u.loc,v);u.lonlat=y?y.properties.ct:[s,s]}}var m,_,f={padded:!0};if(c.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=b.computeBbox(b.getTraceGeojson(p));m=[S[0],S[2]],_=[S[1],S[3]]}else{for(m=new Array(d),_=new Array(d),l=0;l<d;l++)u=r[l],m[l]=u.lonlat[0],_[l]=u.lonlat[1];f.ppad=t(p,d)}p._extremes.lon=h(c.lonaxis._ax,m,f),p._extremes.lat=h(c.lataxis._ax,_,f)},plot:function(r,i,l){var u=i.layers.frontplot.select(".scatterlayer"),p=k.makeTraceGroups(u,l,"trace scattergeo");function c(x,d){x.lonlat[0]===s&&M.select(d).remove()}p.selectAll("*").remove(),p.each(function(x){var d=M.select(this),g=x[0].trace;if(a.hasLines(g)||g.fill!=="none"){var v=T.calcTraceToLineCoords(x),y=g.fill!=="none"?T.makePolygon(v):T.makeLine(v);d.selectAll("path.js-line").data([{geojson:y,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}a.hasMarkers(g)&&d.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){c(m,this)}),a.hasText(g)&&d.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){c(m,this)}),n(r,x)})}}},8796:function(ee,z,e){var M=e(43028),k=e(39032).BADNUM;ee.exports=function(o,T){var b,h,s,t,a,n=o.cd,r=o.xaxis,i=o.yaxis,l=[],u=n[0].trace;if(!M.hasMarkers(u)&&!M.hasText(u))return[];if(T===!1)for(a=0;a<n.length;a++)n[a].selected=0;else for(a=0;a<n.length;a++)(h=(b=n[a]).lonlat)[0]!==k&&(s=r.c2p(h),t=i.c2p(h),T.contains([s,t],null,a,o)?(l.push({pointNumber:a,lon:h[0],lat:h[1]}),b.selected=1):b.selected=0);return l}},25064:function(ee,z,e){var M=e(33428),k=e(43616),o=e(76308),T=e(49224),b=T.stylePoints,h=T.styleText;ee.exports=function(s,t){t&&function(a,n){var r=n[0].trace,i=n[0].node3;i.style("opacity",n[0].trace.opacity),b(i,r,a),h(i,r,a),i.selectAll("path.js-line").style("fill","none").each(function(l){var u=M.select(this),p=l.trace,c=p.line||{};u.call(o.stroke,c.color).call(k.dashLine,c.dash||"",c.width||0),p.fill!=="none"&&u.call(o.fill,p.fillcolor)})}(s,t)}},2876:function(ee,z,e){var M=e(45464),k=e(25376),o=e(98304),T=e(52904),b=e(29736).axisHoverFormat,h=e(49084),s=e(95376),t=e(92880).extendFlat,a=e(67824).overrideAll,n=e(67072).DASHES,r=T.line,i=T.marker,l=i.line,u=ee.exports=a({x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:T.text,hovertext:T.hovertext,textposition:T.textposition,textfont:k({editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:s(n),dflt:"solid"}},marker:t({},h("marker"),{symbol:i.symbol,angle:i.angle,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:t({},h("marker.line"),{width:l.width})}),connectgaps:T.connectgaps,fill:t({},T.fill,{dflt:"none"}),fillcolor:o(),selected:{marker:T.selected.marker,textfont:T.selected.textfont},unselected:{marker:T.unselected.marker,textfont:T.unselected.textfont},opacity:M.opacity},"calc","nested");u.x.editType=u.y.editType=u.x0.editType=u.y0.editType="calc+clearAxisTypes",u.hovertemplate=T.hovertemplate,u.texttemplate=T.texttemplate},64628:function(ee,z,e){var M=e(41272);ee.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:M.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(ee,z,e){var M=e(3108),k=e(3400),o=e(79811),T=e(19280).findExtremes,b=e(1220),h=e(16356),s=h.calcMarkerSize,t=h.calcAxisExpansion,a=h.setFirstScatter,n=e(90136),r=e(84236),i=e(74588),l=e(39032).BADNUM,u=e(67072).TOO_MANY_POINTS;function p(c,x,d){var g=c._extremes[x._id],v=T(x,d._bnds,{padded:!0});g.min=g.min.concat(v.min),g.max=g.max.concat(v.max)}ee.exports=function(c,x){var d,g=c._fullLayout,v=x._xA=o.getFromId(c,x.xaxis,"x"),y=x._yA=o.getFromId(c,x.yaxis,"y"),m=g._plots[x.xaxis+x.yaxis],_=x._length,f=_>=u,S=2*_,w={},E=v.makeCalcdata(x,"x"),O=y.makeCalcdata(x,"y"),C=b(x,v,"x",E),P=b(x,y,"y",O),R=C.vals,j=P.vals;x._x=R,x._y=j,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=O,x._yStarts=P.starts,x._yEnds=P.ends);var D=new Array(S),N=new Array(_);for(d=0;d<_;d++)D[2*d]=R[d]===l?NaN:R[d],D[2*d+1]=j[d]===l?NaN:j[d],N[d]=d;if(v.type==="log")for(d=0;d<S;d+=2)D[d]=v.c2l(D[d]);if(y.type==="log")for(d=1;d<S;d+=2)D[d]=y.c2l(D[d]);f&&v.type!=="log"&&y.type!=="log"?w.tree=M(D):w.ids=N,n(c,x);var W,F=function(U,te,J,X,K,Q){var Z=r.style(U,J);if(Z.marker&&(Z.marker.positions=X),Z.line&&X.length>1&&k.extendFlat(Z.line,r.linePositions(U,J,X)),Z.errorX||Z.errorY){var re=r.errorBarPositions(U,J,X,K,Q);Z.errorX&&k.extendFlat(Z.errorX,re.x),Z.errorY&&k.extendFlat(Z.errorY,re.y)}return Z.text&&(k.extendFlat(Z.text,{positions:X},r.textPosition(U,J,Z.text,Z.marker)),k.extendFlat(Z.textSel,{positions:X},r.textPosition(U,J,Z.text,Z.markerSel)),k.extendFlat(Z.textUnsel,{positions:X},r.textPosition(U,J,Z.text,Z.markerUnsel))),Z}(c,0,x,D,R,j),V=i(c,m);return a(g,x),f?F.marker&&(W=F.marker.sizeAvg||Math.max(F.marker.size,3)):W=s(x,_),t(c,x,v,y,R,j,W),F.errorX&&p(x,v,F.errorX),F.errorY&&p(x,y,F.errorY),F.fill&&!V.fill2d&&(V.fill2d=!0),F.marker&&!V.scatter2d&&(V.scatter2d=!0),F.line&&!V.line2d&&(V.line2d=!0),!F.errorX&&!F.errorY||V.error2d||(V.error2d=!0),F.text&&!V.glText&&(V.glText=!0),F.marker&&(F.marker.snap=_),V.lineOptions.push(F.line),V.errorXOptions.push(F.errorX),V.errorYOptions.push(F.errorY),V.fillOptions.push(F.fill),V.markerOptions.push(F.marker),V.markerSelectedOptions.push(F.markerSel),V.markerUnselectedOptions.push(F.markerUnsel),V.textOptions.push(F.text),V.textSelectedOptions.push(F.textSel),V.textUnselectedOptions.push(F.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),w._scene=V,w.index=V.count,w.x=R,w.y=j,w.positions=D,V.count++,[{x:!1,y:!1,t:w,trace:x}]}},67072:function(ee){ee.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(ee,z,e){var M=e(38248),k=e(20472),o=e(72160),T=e(24040),b=e(3400),h=b.isArrayOrTypedArray,s=e(43616),t=e(79811),a=e(33040).formatColor,n=e(43028),r=e(7152),i=e(80088),l=e(67072),u=e(13448).DESELECTDIM,p={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=e(10624).appendArrayPointValue;function x(O,C){var P,R=O._fullLayout,j=C._length,D=C.textfont,N=C.textposition,W=h(N)?N:[N],F=D.color,V=D.size,U=D.family,te=D.weight,J=D.style,X=D.variant,K={},Q=O._context.plotGlPixelRatio,Z=C.texttemplate;if(Z){K.text=[];var re=R._d3locale,oe=Array.isArray(Z),ae=oe?Math.min(Z.length,j):j,ce=oe?function(we){return Z[we]}:function(){return Z};for(P=0;P<ae;P++){var he={i:P},pe=C._module.formatLabels(he,C,R),xe={};c(xe,C,P);var be=C._meta||{};K.text.push(b.texttemplateString(ce(P),pe,re,xe,he,be))}}else h(C.text)&&C.text.length<j?K.text=C.text.slice():K.text=C.text;if(h(K.text))for(P=K.text.length;P<j;P++)K.text[P]="";for(K.opacity=C.opacity,K.font={},K.align=[],K.baseline=[],P=0;P<W.length;P++){var ve=W[P].split(/\s+/);switch(ve[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(ve[1])}switch(ve[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(ve[0])}}if(h(F))for(K.color=new Array(j),P=0;P<j;P++)K.color[P]=F[P];else K.color=F;if(h(V)||Array.isArray(U)||Array.isArray(te)||Array.isArray(J)||Array.isArray(X))for(K.font=new Array(j),P=0;P<j;P++){var ge=K.font[P]={};ge.size=(b.isTypedArray(V)?V[P]:h(V)?M(V[P])?V[P]:0:V)*Q,ge.family=Array.isArray(U)?U[P]:U,ge.weight=Array.isArray(te)?te[P]:te,ge.style=Array.isArray(J)?J[P]:J,ge.variant=Array.isArray(X)?X[P]:X}else K.font={size:V*Q,family:U,weight:te,style:J,variant:X};return K}function d(O,C){var P,R,j=C._length,D=C.marker,N={},W=h(D.symbol),F=h(D.angle),V=h(D.color),U=h(D.line.color),te=h(D.opacity),J=h(D.size),X=h(D.line.width);if(W||(R=i.isOpenSymbol(D.symbol)),W||V||U||te||F){N.symbols=new Array(j),N.angles=new Array(j),N.colors=new Array(j),N.borderColors=new Array(j);var K=D.symbol,Q=D.angle,Z=a(D,D.opacity,j),re=a(D.line,D.opacity,j);if(!h(re[0])){var oe=re;for(re=Array(j),P=0;P<j;P++)re[P]=oe}if(!h(Z[0])){var ae=Z;for(Z=Array(j),P=0;P<j;P++)Z[P]=ae}if(!h(K)){var ce=K;for(K=Array(j),P=0;P<j;P++)K[P]=ce}if(!h(Q)){var he=Q;for(Q=Array(j),P=0;P<j;P++)Q[P]=he}for(N.symbols=K,N.angles=Q,N.colors=Z,N.borderColors=re,P=0;P<j;P++)W&&(R=i.isOpenSymbol(D.symbol[P])),R&&(re[P]=Z[P].slice(),Z[P]=Z[P].slice(),Z[P][3]=0);for(N.opacity=C.opacity,N.markers=new Array(j),P=0;P<j;P++)N.markers[P]=E({mx:N.symbols[P],ma:N.angles[P]},C)}else R?(N.color=o(D.color,"uint8"),N.color[3]=0,N.borderColor=o(D.color,"uint8")):(N.color=o(D.color,"uint8"),N.borderColor=o(D.line.color,"uint8")),N.opacity=C.opacity*D.opacity,N.marker=E({mx:D.symbol,ma:D.angle},C);var pe,xe=r(C,1);if(J||X){var be,ve=N.sizes=new Array(j),ge=N.borderSizes=new Array(j),we=0;if(J){for(P=0;P<j;P++)ve[P]=xe(D.size[P]),we+=ve[P];be=we/j}else for(pe=xe(D.size),P=0;P<j;P++)ve[P]=pe;if(X)for(P=0;P<j;P++)ge[P]=D.line.width[P];else for(pe=D.line.width,P=0;P<j;P++)ge[P]=pe;N.sizeAvg=be}else N.size=xe(D&&D.size||10),N.borderSizes=xe(D.line.width);return N}function g(O,C,P){var R=C.marker,j={};return P&&(P.marker&&P.marker.symbol?j=d(0,b.extendFlat({},R,P.marker)):P.marker&&(P.marker.size&&(j.size=P.marker.size),P.marker.color&&(j.colors=P.marker.color),P.marker.opacity!==void 0&&(j.opacity=P.marker.opacity))),j}function v(O,C,P){var R={};if(!P)return R;if(P.textfont){var j={opacity:1,text:C.text,texttemplate:C.texttemplate,textposition:C.textposition,textfont:b.extendFlat({},C.textfont)};P.textfont&&b.extendFlat(j.textfont,P.textfont),R=x(O,j)}return R}function y(O,C,P){var R={capSize:2*C.width*P,lineWidth:C.thickness*P,color:C.color};return C.copy_ystyle&&(R=O.error_y),R}var m=l.SYMBOL_SDF_SIZE,_=l.SYMBOL_SIZE,f=l.SYMBOL_STROKE,S={},w=s.symbolFuncs[0](.05*_);function E(O,C){var P,R,j=O.mx;if(j==="circle")return null;var D=s.symbolNumber(j),N=s.symbolFuncs[D%100],W=!!s.symbolNoDot[D%100],F=!!s.symbolNoFill[D%100],V=i.isDotSymbol(j);if(O.ma&&(j+="_"+O.ma),S[j])return S[j];var U=s.getMarkerAngle(O,C);return P=V&&!W?N(1.1*_,U)+w:N(_,U),R=k(P,{w:m,h:m,viewBox:[-_,-_,_,_],stroke:F?f:-f}),S[j]=R,R||null}ee.exports={style:function(O,C){var P,R={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},j=O._context.plotGlPixelRatio;if(C.visible!==!0)return R;if(n.hasText(C)&&(R.text=x(O,C),R.textSel=v(O,C,C.selected),R.textUnsel=v(O,C,C.unselected)),n.hasMarkers(C)&&(R.marker=d(0,C),R.markerSel=g(0,C,C.selected),R.markerUnsel=g(0,C,C.unselected),!C.unselected&&h(C.marker.opacity))){var D=C.marker.opacity;for(R.markerUnsel.opacity=new Array(D.length),P=0;P<D.length;P++)R.markerUnsel.opacity[P]=u*D[P]}if(n.hasLines(C)){R.line={overlay:!0,thickness:C.line.width*j,color:C.line.color,opacity:C.opacity};var N=(l.DASHES[C.line.dash]||[1]).slice();for(P=0;P<N.length;++P)N[P]*=C.line.width*j;R.line.dashes=N}return C.error_x&&C.error_x.visible&&(R.errorX=y(C,C.error_x,j)),C.error_y&&C.error_y.visible&&(R.errorY=y(C,C.error_y,j)),C.fill&&C.fill!=="none"&&(R.fill={closed:!0,fill:C.fillcolor,thickness:0}),R},markerStyle:d,markerSelection:g,linePositions:function(O,C,P){var R,j,D=P.length,N=D/2;if(n.hasLines(C)&&N)if(C.line.shape==="hv"){for(R=[],j=0;j<N-1;j++)isNaN(P[2*j])||isNaN(P[2*j+1])?R.push(NaN,NaN,NaN,NaN):(R.push(P[2*j],P[2*j+1]),isNaN(P[2*j+2])||isNaN(P[2*j+3])?R.push(NaN,NaN):R.push(P[2*j+2],P[2*j+1]));R.push(P[D-2],P[D-1])}else if(C.line.shape==="hvh"){for(R=[],j=0;j<N-1;j++)if(isNaN(P[2*j])||isNaN(P[2*j+1])||isNaN(P[2*j+2])||isNaN(P[2*j+3]))isNaN(P[2*j])||isNaN(P[2*j+1])?R.push(NaN,NaN):R.push(P[2*j],P[2*j+1]),R.push(NaN,NaN);else{var W=(P[2*j]+P[2*j+2])/2;R.push(P[2*j],P[2*j+1],W,P[2*j+1],W,P[2*j+3])}R.push(P[D-2],P[D-1])}else if(C.line.shape==="vhv"){for(R=[],j=0;j<N-1;j++)if(isNaN(P[2*j])||isNaN(P[2*j+1])||isNaN(P[2*j+2])||isNaN(P[2*j+3]))isNaN(P[2*j])||isNaN(P[2*j+1])?R.push(NaN,NaN):R.push(P[2*j],P[2*j+1]),R.push(NaN,NaN);else{var F=(P[2*j+1]+P[2*j+3])/2;R.push(P[2*j],P[2*j+1],P[2*j],F,P[2*j+2],F)}R.push(P[D-2],P[D-1])}else if(C.line.shape==="vh"){for(R=[],j=0;j<N-1;j++)isNaN(P[2*j])||isNaN(P[2*j+1])?R.push(NaN,NaN,NaN,NaN):(R.push(P[2*j],P[2*j+1]),isNaN(P[2*j+2])||isNaN(P[2*j+3])?R.push(NaN,NaN):R.push(P[2*j],P[2*j+3]));R.push(P[D-2],P[D-1])}else R=P;var V=!1;for(j=0;j<R.length;j++)if(isNaN(R[j])){V=!0;break}var U=V||R.length>l.TOO_MANY_POINTS||n.hasMarkers(C)?"rect":"round";if(V&&C.connectgaps){var te=R[0],J=R[1];for(j=0;j<R.length;j+=2)isNaN(R[j])||isNaN(R[j+1])?(R[j]=te,R[j+1]=J):(te=R[j],J=R[j+1])}return{join:U,positions:R}},errorBarPositions:function(O,C,P,R,j){var D=T.getComponentMethod("errorbars","makeComputeError"),N=t.getFromId(O,C.xaxis,"x"),W=t.getFromId(O,C.yaxis,"y"),F=P.length/2,V={};function U(te,J){var X=J._id.charAt(0),K=C["error_"+X];if(K&&K.visible&&(J.type==="linear"||J.type==="log")){for(var Q=D(K),Z={x:0,y:1}[X],re={x:[0,1,2,3],y:[2,3,0,1]}[X],oe=new Float64Array(4*F),ae=1/0,ce=-1/0,he=0,pe=0;he<F;he++,pe+=4){var xe=te[he];if(M(xe)){var be=P[2*he+Z],ve=Q(xe,he),ge=ve[0],we=ve[1];if(M(ge)&&M(we)){var _e=xe-ge,se=xe+we;oe[pe+re[0]]=be-J.c2l(_e),oe[pe+re[1]]=J.c2l(se)-be,oe[pe+re[2]]=0,oe[pe+re[3]]=0,ae=Math.min(ae,xe-ge),ce=Math.max(ce,xe+we)}}}V[X]={positions:P,errors:oe,_bnds:[ae,ce]}}}return U(R,N),U(j,W),V},textPosition:function(O,C,P,R){var j,D=C._length,N={};if(n.hasMarkers(C)){var W=P.font,F=P.align,V=P.baseline;for(N.offset=new Array(D),j=0;j<D;j++){var U=R.sizes?R.sizes[j]:R.size,te=h(W)?W[j].size:W.size,J=h(F)?F.length>1?F[j]:F[0]:F,X=h(V)?V.length>1?V[j]:V[0]:V,K=p[J],Q=p[X],Z=U?U/.8+1:0,re=-Q*Z-.5*Q;N.offset[j]=[K*Z/te,re/te]}}return N}}},80220:function(ee,z,e){var M=e(3400),k=e(24040),o=e(80088),T=e(2876),b=e(88200),h=e(43028),s=e(43980),t=e(31147),a=e(74428),n=e(66828),r=e(70840),i=e(124);ee.exports=function(l,u,p,c){function x(S,w){return M.coerce(l,u,T,S,w)}var d=!!l.marker&&o.isOpenSymbol(l.marker.symbol),g=h.isBubble(l),v=s(l,u,c,x);if(v){t(l,u,c,x),x("xhoverformat"),x("yhoverformat");var y=v<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",y),h.hasMarkers(u)&&(a(l,u,p,c,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",d||g?1:0)),h.hasLines(u)&&(x("connectgaps"),n(l,u,p,c,x),x("line.shape")),h.hasText(u)&&(x("texttemplate"),i(l,u,c,x));var m=(u.line||{}).color,_=(u.marker||{}).color;x("fill"),u.fill!=="none"&&r(l,u,p,x);var f=k.getComponentMethod("errorbars","supplyDefaults");f(l,u,m||_||p,{axis:"y"}),f(l,u,m||_||p,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},26768:function(ee,z,e){var M=e(3400),k=e(76308),o=e(13448).DESELECTDIM;ee.exports={styleTextSelection:function(T){var b,h,s=T[0],t=s.trace,a=s.t,n=a._scene,r=a.index,i=n.selectBatch[r],l=n.unselectBatch[r],u=n.textOptions[r],p=n.textSelectedOptions[r]||{},c=n.textUnselectedOptions[r]||{},x=M.extendFlat({},u);if(i.length||l.length){var d=p.color,g=c.color,v=u.color,y=M.isArrayOrTypedArray(v);for(x.color=new Array(t._length),b=0;b<i.length;b++)h=i[b],x.color[h]=d||(y?v[h]:v);for(b=0;b<l.length;b++){h=l[b];var m=y?v[h]:v;x.color[h]=g||(d?m:k.addOpacity(m,o))}}n.glText[r].update(x)}}},99396:function(ee,z,e){var M=e(76688);ee.exports=function(k,o,T){var b=k.i;return"x"in k||(k.x=o._x[b]),"y"in k||(k.y=o._y[b]),M(k,o,T)}},80088:function(ee,z,e){var M=e(67072);z.isOpenSymbol=function(k){return typeof k=="string"?M.OPEN_RE.test(k):k%200>100},z.isDotSymbol=function(k){return typeof k=="string"?M.DOT_RE.test(k):k>200}},41272:function(ee,z,e){var M=e(24040),k=e(3400),o=e(44928);function T(b,h,s,t){var a=b.xa,n=b.ya,r=b.distance,i=b.dxy,l=b.index,u={pointNumber:l,x:h[l],y:s[l]};u.tx=k.isArrayOrTypedArray(t.text)?t.text[l]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var p=t.textfont;p&&(u.ts=k.isArrayOrTypedArray(p.size)?p.size[l]:p.size,u.tc=k.isArrayOrTypedArray(p.color)?p.color[l]:p.color,u.tf=Array.isArray(p.family)?p.family[l]:p.family,u.tw=Array.isArray(p.weight)?p.weight[l]:p.weight,u.ty=Array.isArray(p.style)?p.style[l]:p.style,u.tv=Array.isArray(p.variant)?p.variant[l]:p.variant);var c=t.marker;c&&(u.ms=k.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=k.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=k.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=k.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=k.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var x=c&&c.line;x&&(u.mlc=Array.isArray(x.color)?x.color[l]:x.color,u.mlw=k.isArrayOrTypedArray(x.width)?x.width[l]:x.width);var d=c&&c.gradient;d&&d.type!=="none"&&(u.mgt=Array.isArray(d.type)?d.type[l]:d.type,u.mgc=Array.isArray(d.color)?d.color[l]:d.color);var g=a.c2p(u.x,!0),v=n.c2p(u.y,!0),y=u.mrc||1,m=t.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[l]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[l]:m.bordercolor,u.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[l]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[l]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[l]:m.font.family,u.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[l]:m.namelength);var _=t.hoverinfo;_&&(u.hi=Array.isArray(_)?_[l]:_);var f=t.hovertemplate;f&&(u.ht=Array.isArray(f)?f[l]:f);var S={};S[b.index]=u;var w=t._origX,E=t._origY,O=k.extendFlat({},b,{color:o(t,u),x0:g-y,x1:g+y,xLabelVal:w?w[l]:u.x,y0:v-y,y1:v+y,yLabelVal:E?E[l]:u.y,cd:S,distance:r,spikeDistance:i,hovertemplate:u.ht});return u.htx?O.text=u.htx:u.tx?O.text=u.tx:t.text&&(O.text=t.text),k.fillText(u,t,O),M.getComponentMethod("errorbars","hoverInfo")(u,t,O),O}ee.exports={hoverPoints:function(b,h,s,t){var a,n,r,i,l,u,p,c,x,d,g=b.cd,v=g[0].t,y=g[0].trace,m=b.xa,_=b.ya,f=v.x,S=v.y,w=m.c2p(h),E=_.c2p(s),O=b.distance;if(v.tree){var C=m.p2c(w-O),P=m.p2c(w+O),R=_.p2c(E-O),j=_.p2c(E+O);a=t==="x"?v.tree.range(Math.min(C,P),Math.min(_._rl[0],_._rl[1]),Math.max(C,P),Math.max(_._rl[0],_._rl[1])):v.tree.range(Math.min(C,P),Math.min(R,j),Math.max(C,P),Math.max(R,j))}else a=v.ids;var D=O;if(t==="x"){var N=!!y.xperiodalignment,W=!!y.yperiodalignment;for(u=0;u<a.length;u++){if(i=f[n=a[u]],p=Math.abs(m.c2p(i)-w),N){var F=m.c2p(y._xStarts[n]),V=m.c2p(y._xEnds[n]);p=w>=Math.min(F,V)&&w<=Math.max(F,V)?0:1/0}if(p<D){if(D=p,l=S[n],c=_.c2p(l)-E,W){var U=_.c2p(y._yStarts[n]),te=_.c2p(y._yEnds[n]);c=E>=Math.min(U,te)&&E<=Math.max(U,te)?0:1/0}d=Math.sqrt(p*p+c*c),r=a[u]}}}else for(u=a.length-1;u>-1;u--)i=f[n=a[u]],l=S[n],p=m.c2p(i)-w,c=_.c2p(l)-E,(x=Math.sqrt(p*p+c*c))<D&&(D=d=x,r=n);return b.index=r,b.distance=D,b.dxy=d,r===void 0?[b]:[T(b,f,S,y)]},calcHover:T}},38983:function(ee,z,e){var M=e(64628);M.plot=e(89876),ee.exports=M},89876:function(ee,z,e){var M=e(38540),k=e(13472),o=e(24544),T=e(23352),b=e(3400),h=e(72760).selectMode,s=e(5048),t=e(43028),a=e(14328),n=e(26768).styleTextSelection,r={};function i(l,u,p,c){var x=l._size,d=l.width*c,g=l.height*c,v=x.l*c,y=x.b*c,m=x.r*c,_=x.t*c,f=x.w*c,S=x.h*c;return[v+u.domain[0]*f,y+p.domain[0]*S,d-m-(1-u.domain[1])*f,g-_-(1-p.domain[1])*S]}(ee.exports=function(l,u,p){if(p.length){var c,x,d=l._fullLayout,g=u._scene,v=u.xaxis,y=u.yaxis;if(g)if(s(l,["ANGLE_instanced_arrays","OES_element_index_uint"],r)){var m=g.count,_=d._glcanvas.data()[0].regl;if(a(l,u,p),g.dirty){if(!g.line2d&&!g.error2d||g.scatter2d||g.fill2d||g.glText||_.clear({}),g.error2d===!0&&(g.error2d=o(_)),g.line2d===!0&&(g.line2d=k(_)),g.scatter2d===!0&&(g.scatter2d=M(_)),g.fill2d===!0&&(g.fill2d=k(_)),g.glText===!0)for(g.glText=new Array(m),c=0;c<m;c++)g.glText[c]=new T(_);if(g.glText){if(m>g.glText.length){var f=m-g.glText.length;for(c=0;c<f;c++)g.glText.push(new T(_))}else if(m<g.glText.length){var S=g.glText.length-m;g.glText.splice(m,S).forEach(function(re){re.destroy()})}for(c=0;c<m;c++)g.glText[c].update(g.textOptions[c])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(re){if(re&&re.positions){for(var oe=re.positions,ae=0;ae<oe.length&&(isNaN(oe[ae])||isNaN(oe[ae+1]));)ae+=2;for(var ce=oe.length-2;ce>ae&&(isNaN(oe[ce])||isNaN(oe[ce+1]));)ce-=2;re.positions=oe.slice(ae,ce+2)}return re}),g.line2d.update(g.lineOptions)),g.error2d){var w=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(w)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=b.repeat(null,m),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(re,oe){var ae=p[oe];if(re&&ae&&ae[0]&&ae[0].trace){var ce,he,pe=ae[0],xe=pe.trace,be=pe.t,ve=g.lineOptions[oe],ge=[];xe._ownfill&&ge.push(oe),xe._nexttrace&&ge.push(oe+1),ge.length&&(g.fillOrder[oe]=ge);var we,_e,se=[],ie=ve&&ve.positions||be.positions;if(xe.fill==="tozeroy"){for(we=0;we<ie.length&&isNaN(ie[we+1]);)we+=2;for(_e=ie.length-2;_e>we&&isNaN(ie[_e+1]);)_e-=2;ie[we+1]!==0&&(se=[ie[we],0]),se=se.concat(ie.slice(we,_e+2)),ie[_e+1]!==0&&(se=se.concat([ie[_e],0]))}else if(xe.fill==="tozerox"){for(we=0;we<ie.length&&isNaN(ie[we]);)we+=2;for(_e=ie.length-2;_e>we&&isNaN(ie[_e]);)_e-=2;ie[we]!==0&&(se=[0,ie[we+1]]),se=se.concat(ie.slice(we,_e+2)),ie[_e]!==0&&(se=se.concat([0,ie[_e+1]]))}else if(xe.fill==="toself"||xe.fill==="tonext"){for(se=[],ce=0,re.splitNull=!0,he=0;he<ie.length;he+=2)(isNaN(ie[he])||isNaN(ie[he+1]))&&((se=se.concat(ie.slice(ce,he))).push(ie[ce],ie[ce+1]),se.push(null,null),ce=he+2);se=se.concat(ie.slice(ce)),ce&&se.push(ie[ce],ie[ce+1])}else{var fe=xe._nexttrace;if(fe){var Ee=g.lineOptions[oe+1];if(Ee){var Te=Ee.positions;if(xe.fill==="tonexty"){for(se=ie.slice(),oe=Math.floor(Te.length/2);oe--;){var Ae=Te[2*oe],Se=Te[2*oe+1];isNaN(Ae)||isNaN(Se)||se.push(Ae,Se)}re.fill=fe.fillcolor}}}}if(xe._prevtrace&&xe._prevtrace.fill==="tonext"){var Oe=g.lineOptions[oe-1].positions,De=se.length/2,de=[ce=De];for(he=0;he<Oe.length;he+=2)(isNaN(Oe[he])||isNaN(Oe[he+1]))&&(de.push(he/2+De+1),ce=he+2);se=se.concat(Oe),re.hole=de}return re.fillmode=xe.fill,re.opacity=xe.opacity,re.positions=se,re}}),g.fill2d.update(g.fillOptions))}var E=d.dragmode,O=h(E),C=d.clickmode.indexOf("select")>-1;for(c=0;c<m;c++){var P=p[c][0],R=P.trace,j=P.t,D=j.index,N=R._length,W=j.x,F=j.y;if(R.selectedpoints||O||C){if(O||(O=!0),R.selectedpoints){var V=g.selectBatch[D]=b.selIndices2selPoints(R),U={};for(x=0;x<V.length;x++)U[V[x]]=1;var te=[];for(x=0;x<N;x++)U[x]||te.push(x);g.unselectBatch[D]=te}var J=j.xpx=new Array(N),X=j.ypx=new Array(N);for(x=0;x<N;x++)J[x]=v.c2p(W[x]),X[x]=y.c2p(F[x])}else j.xpx=j.ypx=null}if(O){if(g.select2d||(g.select2d=M(d._glcanvas.data()[1].regl)),g.scatter2d){var K=new Array(m);for(c=0;c<m;c++)K[c]=g.selectBatch[c].length||g.unselectBatch[c].length?g.markerUnselectedOptions[c]:{};g.scatter2d.update(K)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&p.forEach(function(re){var oe=((re||[])[0]||{}).trace||{};t.hasText(oe)&&n(re)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var Q={viewport:i(d,v,y,l._context.plotGlPixelRatio),range:[(v._rl||v.range)[0],(y._rl||y.range)[0],(v._rl||v.range)[1],(y._rl||y.range)[1]]},Z=b.repeat(Q,g.count);g.fill2d&&g.fill2d.update(Z),g.line2d&&g.line2d.update(Z),g.error2d&&g.error2d.update(Z.concat(Z)),g.scatter2d&&g.scatter2d.update(Z),g.select2d&&g.select2d.update(Z),g.glText&&g.glText.forEach(function(re){re.update(Q)})}else g.init()}}).reglPrecompiled=r},74588:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){var T=o._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},h={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((T=o._scene={}).init=function(){M.extendFlat(T,h,b)},T.init(),T.update=function(s){var t=M.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var a=0;a<T.count;a++)T.glText[a].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,a=T.error2d,n=T.line2d,r=T.scatter2d,i=T.glText,l=T.select2d,u=T.selectBatch,p=T.unselectBatch,c=0;c<s;c++){if(t&&T.fillOrder[c]&&t.draw(T.fillOrder[c]),n&&T.lineOptions[c]&&n.draw(c),a&&(T.errorXOptions[c]&&a.draw(c),T.errorYOptions[c]&&a.draw(c+s)),r&&T.markerOptions[c])if(p[c].length){var x=M.repeat([],T.count);x[c]=p[c],r.draw(x)}else u[c].length||r.draw(c);i[c]&&T.textOptions[c]&&i[c].render()}l&&l.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,o._scene=null}),T.dirty||M.extendFlat(T,b),T}},73224:function(ee,z,e){var M=e(43028),k=e(26768).styleTextSelection;ee.exports=function(o,T){var b=o.cd,h=o.xaxis,s=o.yaxis,t=[],a=b[0].trace,n=b[0].t,r=a._length,i=n.x,l=n.y,u=n._scene,p=n.index;if(!u)return t;var c=M.hasText(a),x=M.hasMarkers(a),d=!x&&!c;if(a.visible!==!0||d)return t;var g=[],v=[];if(T!==!1&&!T.degenerate)for(var y=0;y<r;y++)T.contains([n.xpx[y],n.ypx[y]],!1,y,o)?(g.push(y),t.push({pointNumber:y,x:h.c2d(i[y]),y:s.c2d(l[y])})):v.push(y);if(x){var m=u.scatter2d;if(g.length||v.length){if(!u.selectBatch[p].length&&!u.unselectBatch[p].length){var _=new Array(u.count);_[p]=u.markerUnselectedOptions[p],m.update.apply(m,_)}}else{var f=new Array(u.count);f[p]=u.markerOptions[p],m.update.apply(m,f)}}return u.selectBatch[p]=g,u.unselectBatch[p]=v,c&&k(b),t}},31512:function(ee,z,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(6096),b=e(52904),h=e(5232),s=e(45464),t=e(49084),a=e(92880).extendFlat,n=e(67824).overrideAll,r=e(5232),i=T.line,l=T.marker;ee.exports=n({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:a({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:a({},l.opacity,{dflt:1})},mode:a({},b.mode,{dflt:"markers"}),text:a({},b.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:a({},b.hovertext,{}),line:{color:i.color,width:i.width},connectgaps:b.connectgaps,marker:a({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:T.fill,fillcolor:o(),textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:a({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},59392:function(ee,z,e){var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=e(44808),b=e(8932),h=e(43616),s=e(7152),t=e(43028),a=e(89032),n=e(10624).appendArrayPointValue,r=e(72736).NEWLINES,i=e(72736).BR_TAG_ALL;function l(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(g,v){return k.isArrayOrTypedArray(g)?v?function(y){return M(g[y])?+g[y]:0}:function(y){return g[y]}:g?function(){return g}:p}function p(){return""}function c(g){return g[0]===o}function x(g,v){var y;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(v)){y=["step",["get","point_count"],g[0]];for(var m=1;m<g.length;m++)y.push(v[m-1],g[m])}else y=g;return y}function d(g){var v=g.textfont,y="";v.weight==="bold"&&(y+=" Bold"),v.style==="italic"&&(y+=" Italic");var m=v.family;return y&&(m=m.replace(" Regular",y)),m.split(", ")}ee.exports=function(g,v){var y,m=v[0].trace,_=m.visible===!0&&m._length!==0,f=m.fill!=="none",S=t.hasLines(m),w=t.hasMarkers(m),E=t.hasText(m),O=w&&m.marker.symbol==="circle",C=w&&m.marker.symbol!=="circle",P=m.cluster&&m.cluster.enabled,R=l("fill"),j=l("line"),D=l("circle"),N=l("symbol"),W={fill:R,line:j,circle:D,symbol:N};if(!_)return W;if((f||S)&&(y=T.calcTraceToLineCoords(v)),f&&(R.geojson=T.makePolygon(y),R.layout.visibility="visible",k.extendFlat(R.paint,{"fill-color":m.fillcolor})),S&&(j.geojson=T.makeLine(y),j.layout.visibility="visible",k.extendFlat(j.paint,{"line-width":m.line.width,"line-color":m.line.color,"line-opacity":m.opacity})),O){var F=function(te){var J,X,K,Q,Z=te[0].trace,re=Z.marker,oe=Z.selectedpoints,ae=k.isArrayOrTypedArray(re.color),ce=k.isArrayOrTypedArray(re.size),he=k.isArrayOrTypedArray(re.opacity);function pe(ie){return Z.opacity*ie}ae&&(X=b.hasColorscale(Z,"marker")?b.makeColorScaleFuncFromTrace(re):k.identity),ce&&(K=s(Z)),he&&(Q=function(ie){return pe(M(ie)?+k.constrain(ie,0,1):0)});var xe,be,ve=[];for(J=0;J<te.length;J++){var ge=te[J],we=ge.lonlat;if(!c(we)){var _e={};X&&(_e.mcc=ge.mcc=X(ge.mc)),K&&(_e.mrc=ge.mrc=K(ge.ms)),Q&&(_e.mo=Q(ge.mo)),oe&&(_e.selected=ge.selected||0),ve.push({type:"Feature",id:J+1,geometry:{type:"Point",coordinates:we},properties:_e})}}if(oe)for(xe=h.makeSelectedPointStyleFns(Z),J=0;J<ve.length;J++){var se=ve[J].properties;xe.selectedOpacityFn&&(se.mo=pe(xe.selectedOpacityFn(se))),xe.selectedColorFn&&(se.mcc=xe.selectedColorFn(se)),xe.selectedSizeFn&&(se.mrc=xe.selectedSizeFn(se))}return{geojson:{type:"FeatureCollection",features:ve},mcc:ae||xe&&xe.selectedColorFn?{type:"identity",property:"mcc"}:re.color,mrc:ce||xe&&xe.selectedSizeFn?{type:"identity",property:"mrc"}:(be=re.size,be/2),mo:he||xe&&xe.selectedOpacityFn?{type:"identity",property:"mo"}:pe(re.opacity)}}(v);D.geojson=F.geojson,D.layout.visibility="visible",P&&(D.filter=["!",["has","point_count"]],W.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(m.cluster.color,m.cluster.step),"circle-radius":x(m.cluster.size,m.cluster.step),"circle-opacity":x(m.cluster.opacity,m.cluster.step)}},W.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":d(m),"text-size":12}}),k.extendFlat(D.paint,{"circle-color":F.mcc,"circle-radius":F.mrc,"circle-opacity":F.mo})}if(O&&P&&(D.filter=["!",["has","point_count"]]),(C||E)&&(N.geojson=function(te,J){for(var X=J._fullLayout,K=te[0].trace,Q=K.marker||{},Z=Q.symbol,re=Q.angle,oe=Z!=="circle"?u(Z):p,ae=re!=="auto"?u(re,!0):p,ce=t.hasText(K)?u(K.text):p,he=[],pe=0;pe<te.length;pe++){var xe=te[pe];if(!c(xe.lonlat)){var be,ve=K.texttemplate;if(ve){var ge=Array.isArray(ve)?ve[pe]||"":ve,we=K._module.formatLabels(xe,K,X),_e={};n(_e,K,xe.i);var se=K._meta||{};be=k.texttemplateString(ge,we,X._d3locale,_e,xe,se)}else be=ce(pe);be&&(be=be.replace(r,"").replace(i,`
`)),he.push({type:"Feature",geometry:{type:"Point",coordinates:xe.lonlat},properties:{symbol:oe(pe),angle:ae(pe),text:be}})}}return{type:"FeatureCollection",features:he}}(v,g),k.extendFlat(N.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),C&&(k.extendFlat(N.layout,{"icon-size":m.marker.size/10}),"angle"in m.marker&&m.marker.angle!=="auto"&&k.extendFlat(N.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),N.layout["icon-allow-overlap"]=m.marker.allowoverlap,k.extendFlat(N.paint,{"icon-opacity":m.opacity*m.marker.opacity,"icon-color":m.marker.color})),E)){var V=(m.marker||{}).size,U=a(m.textposition,V);k.extendFlat(N.layout,{"text-size":m.textfont.size,"text-anchor":U.anchor,"text-offset":U.offset,"text-font":d(m)}),k.extendFlat(N.paint,{"text-color":m.textfont.color,"text-opacity":m.opacity})}return W}},15752:function(ee,z,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),h=e(70840),s=e(31512),t=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];ee.exports=function(a,n,r,i){function l(m,_){return M.coerce(a,n,s,m,_)}function u(m,_){return M.coerce2(a,n,s,m,_)}var p=function(m,_,f){var S=f("lon")||[],w=f("lat")||[],E=Math.min(S.length,w.length);return _._length=E,E}(0,n,l);if(p){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),k.hasMarkers(n)){o(a,n,r,i,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var c=n.marker;c.symbol!=="circle"&&(M.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),M.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}k.hasLines(n)&&(T(a,n,r,i,l,{noDash:!0}),l("connectgaps"));var x=u("cluster.maxzoom"),d=u("cluster.step"),g=u("cluster.color",n.marker&&n.marker.color||r),v=u("cluster.size"),y=u("cluster.opacity");(l("cluster.enabled",x!==!1||d!==!1||g!==!1||v!==!1||y!==!1)||k.hasText(n))&&b(a,n,i,l,{noSelect:!0,noFontVariant:!0,font:{family:t.indexOf(i.font.family)!==-1?i.font.family:"Open Sans Regular",weight:i.font.weight,style:i.font.style,size:i.font.size,color:i.font.color}}),l("fill"),n.fill!=="none"&&h(a,n,r,l),M.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},37920:function(ee){ee.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z}},11960:function(ee,z,e){var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.subplot]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=M.tickText(h,h.c2l(s[0]),!0).text,b.latLabel=M.tickText(h,h.c2l(s[1]),!0).text,b}},63312:function(ee,z,e){var M=e(93024),k=e(3400),o=e(44928),T=k.fillText,b=e(39032).BADNUM,h=e(47552).traceLayerPrefix;function s(t,a,n){if(!t.hovertemplate){var r=(a.hi||t.hoverinfo).split("+"),i=r.indexOf("all")!==-1,l=r.indexOf("lon")!==-1,u=r.indexOf("lat")!==-1,p=a.lonlat,c=[];return i||l&&u?c.push("("+x(p[1])+", "+x(p[0])+")"):l?c.push(n.lon+x(p[0])):u&&c.push(n.lat+x(p[1])),(i||r.indexOf("text")!==-1)&&T(a,t,c),c.join("<br>")}function x(d){return d+""}}ee.exports={hoverPoints:function(t,a,n){var r=t.cd,i=r[0].trace,l=t.xa,u=t.ya,p=t.subplot,c=[],x=h+i.uid+"-circle",d=i.cluster&&i.cluster.enabled;if(d){var g=p.map.queryRenderedFeatures(null,{layers:[x]});c=g.map(function(P){return P.id})}var v=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),y=a-v;if(M.getClosest(r,function(P){var R=P.lonlat;if(R[0]===b||d&&c.indexOf(P.i+1)===-1)return 1/0;var j=k.modHalf(R[0],360),D=R[1],N=p.project([j,D]),W=N.x-l.c2p([y,D]),F=N.y-u.c2p([j,n]),V=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(W*W+F*F)-V,1-3/V)},t),t.index!==!1){var m=r[t.index],_=m.lonlat,f=[k.modHalf(_[0],360)+v,_[1]],S=l.c2p(f),w=u.c2p(f),E=m.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=w-E,t.y1=w+E;var O={};O[i.subplot]={_subplot:p};var C=i._module.formatLabels(m,i,O);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=o(i,m),t.extraText=s(i,m,r[0].t.labels),t.hovertemplate=i.hovertemplate,[t]}},getExtraText:s}},11572:function(ee,z,e){ee.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(ee,z,e){var M=e(3400),k=e(59392),o=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,t,a,n){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=a,this.isHidden=n,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol",cluster:o+t+"-cluster",clusterCount:o+t+"-cluster-count"},this.below=null}var h=b.prototype;h.addSource=function(s,t,a){var n={type:"geojson",data:t.geojson};a&&a.enabled&&M.extendFlat(n,{cluster:!0,clusterMaxZoom:a.maxzoom});var r=this.subplot.map.getSource(this.sourceIds[s]);r?r.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],n)},h.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},h.addLayer=function(s,t,a){var n={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(n.filter=t.filter);for(var r,i=this.layerIds[s],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===i){r=!0;break}r?(this.subplot.setOptions(i,"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&this.subplot.setOptions(i,"setPaintProperty",n.paint)):this.subplot.addLayer(n,a)},h.update=function(s){var t=s[0].trace,a=this.subplot,n=a.map,r=k(a.gd,s),i=a.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,p=this;function c(y){u?function(m){for(var _=T.cluster,f=_.length-1;f>=0;f--){var S=_[f];n.removeLayer(p.layerIds[S])}m||n.removeSource(p.sourceIds.circle)}(y):function(m){for(var _=T.nonCluster,f=_.length-1;f>=0;f--){var S=_[f];n.removeLayer(p.layerIds[S]),m||n.removeSource(p.sourceIds[S])}}(y)}function x(y){l?function(m){m||p.addSource("circle",r.circle,t.cluster);for(var _=T.cluster,f=0;f<_.length;f++){var S=_[f],w=r[S];p.addLayer(S,w,i)}}(y):function(m){for(var _=T.nonCluster,f=0;f<_.length;f++){var S=_[f],w=r[S];m||p.addSource(S,w),p.addLayer(S,w,i)}}(y)}function d(){for(var y=l?T.cluster:T.nonCluster,m=0;m<y.length;m++){var _=y[m],f=r[_];f&&(a.setOptions(p.layerIds[_],"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&(_!=="cluster"&&p.setSourceData(_,f),a.setOptions(p.layerIds[_],"setPaintProperty",f.paint)))}}var g=this.isHidden,v=t.visible!==!0;v?g||c():g?v||x():u!==l?(c(),x()):(this.below!==i&&(c(!0),x(!0)),d()),this.clusterEnabled=l,this.isHidden=v,this.below=i,s[0].trace._glTrace=this},h.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,a=t.length-1;a>=0;a--){var n=t[a];s.removeLayer(this.layerIds[n]),s.removeSource(this.sourceIds[n])}},ee.exports=function(s,t){var a,n,r,i=t[0].trace,l=i.cluster&&i.cluster.enabled,u=i.visible!==!0,p=new b(s,i.uid,l,u),c=k(s.gd,t),x=p.below=s.belowLookup["trace-"+i.uid];if(l)for(p.addSource("circle",c.circle,i.cluster),a=0;a<T.cluster.length;a++)r=c[n=T.cluster[a]],p.addLayer(n,r,x);else for(a=0;a<T.nonCluster.length;a++)r=c[n=T.nonCluster[a]],p.addSource(n,r,i.cluster),p.addLayer(n,r,x);return t[0].trace._glTrace=p,p}},404:function(ee,z,e){var M=e(3400),k=e(43028),o=e(39032).BADNUM;ee.exports=function(T,b){var h,s=T.cd,t=T.xaxis,a=T.yaxis,n=[],r=s[0].trace;if(!k.hasMarkers(r))return[];if(b===!1)for(h=0;h<s.length;h++)s[h].selected=0;else for(h=0;h<s.length;h++){var i=s[h],l=i.lonlat;if(l[0]!==o){var u=[M.modHalf(l[0],360),l[1]],p=[t.c2p(u),a.c2p(u)];b.contains(p,null,h,T)?(n.push({pointNumber:h,lon:l[0],lat:l[1]}),i.selected=1):i.selected=0}}return n}},8319:function(ee,z,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),h=e(45464),s=b.line;ee.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},h.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:M(),selected:b.selected,unselected:b.unselected}},58320:function(ee,z,e){var M=e(38248),k=e(39032).BADNUM,o=e(54460),T=e(90136),b=e(20148),h=e(4500),s=e(16356).calcMarkerSize;ee.exports=function(t,a){for(var n=t._fullLayout,r=a.subplot,i=n[r].radialaxis,l=n[r].angularaxis,u=i.makeCalcdata(a,"r"),p=l.makeCalcdata(a,"theta"),c=a._length,x=new Array(c),d=0;d<c;d++){var g=u[d],v=p[d],y=x[d]={};M(g)&&M(v)?(y.r=g,y.theta=v):y.r=k}var m=s(a,c);return a._extremes.x=o.findExtremes(i,u,{ppad:m}),T(t,a),b(x,a),h(x,a),x}},85968:function(ee,z,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),h=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,a=e(8319);function n(r,i,l,u){var p,c=u("r"),x=u("theta");if(M.isTypedArray(c)&&(i.r=c=Array.from(c)),M.isTypedArray(x)&&(i.theta=x=Array.from(x)),c)x?p=Math.min(c.length,x.length):(p=c.length,u("theta0"),u("dtheta"));else{if(!x)return 0;p=i.theta.length,u("r0"),u("dr")}return i._length=p,p}ee.exports={handleRThetaDefaults:n,supplyDefaults:function(r,i,l,u){function p(d,g){return M.coerce(r,i,a,d,g)}var c=n(0,i,0,p);if(c){p("thetaunit"),p("mode",c<t?"lines+markers":"lines"),p("text"),p("hovertext"),i.hoveron!=="fills"&&p("hovertemplate"),k.hasMarkers(i)&&o(r,i,l,u,p,{gradient:!0}),k.hasLines(i)&&(T(r,i,l,u,p,{backoff:!0}),b(r,i,p),p("connectgaps")),k.hasText(i)&&(p("texttemplate"),h(r,i,u,p));var x=[];(k.hasMarkers(i)||k.hasText(i))&&(p("cliponaxis"),p("marker.maxdisplayed"),x.push("points")),p("fill"),i.fill!=="none"&&(s(r,i,l,p),k.hasLines(i)||b(r,i,p)),i.fill!=="tonext"&&i.fill!=="toself"||x.push("fills"),p("hoveron",x.join("+")||"points"),M.coerceSelectionMarkerOpacity(i,p)}else i.visible=!1}}},22852:function(ee,z,e){var M=e(3400),k=e(54460);ee.exports=function(o,T,b){var h,s,t={},a=b[T.subplot]._subplot;a?(h=a.radialAxis,s=a.angularAxis):(h=(a=b[T.subplot]).radialaxis,s=a.angularaxis);var n=h.c2l(o.r);t.rLabel=k.tickText(h,n,!0).text;var r=s.thetaunit==="degrees"?M.rad2deg(o.theta):o.theta;return t.thetaLabel=k.tickText(s,r,!0).text,t}},8504:function(ee,z,e){var M=e(98723);function k(o,T,b,h){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="r",t._hovertitle="";var a={};a[T.subplot]={_subplot:b};var n=T._module.formatLabels(o,T,a);h.rLabel=n.rLabel,h.thetaLabel=n.thetaLabel;var r=o.hi||T.hoverinfo,i=[];function l(p,c){i.push(p._hovertitle+": "+c)}if(!T.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&l(s,h.rLabel),u.indexOf("theta")!==-1&&l(t,h.thetaLabel),u.indexOf("text")!==-1&&h.text&&(i.push(h.text),delete h.text),h.extraText=i.join("<br>")}}ee.exports={hoverPoints:function(o,T,b,h){var s=M(o,T,b,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var a=o.subplot,n=t.cd[t.index],r=t.trace;if(a.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,a,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:k}},76924:function(ee,z,e){ee.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(ee,z,e){var M=e(96504),k=e(39032).BADNUM;ee.exports=function(o,T,b){for(var h=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,a={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},n=T.radialAxis,r=T.angularAxis,i=0;i<b.length;i++)for(var l=b[i],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=s,l[0].trace._yA=t);var p=l[u],c=p.r;if(c===k)p.x=p.y=k;else{var x=n.c2g(c),d=r.c2g(p.theta);p.x=x*Math.cos(d),p.y=x*Math.sin(d)}}M(o,a,b,h)}},24396:function(ee,z,e){var M=e(8319),k=e(2876),o=e(21776).Gw;ee.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},27160:function(ee,z,e){ee.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(ee,z,e){var M=e(90136),k=e(16356).calcMarkerSize,o=e(84236),T=e(54460),b=e(67072).TOO_MANY_POINTS;ee.exports=function(h,s){var t=h._fullLayout,a=s.subplot,n=t[a].radialaxis,r=t[a].angularaxis,i=s._r=n.makeCalcdata(s,"r"),l=s._theta=r.makeCalcdata(s,"theta"),u=s._length,p={};u<i.length&&(i=i.slice(0,u)),u<l.length&&(l=l.slice(0,u)),p.r=i,p.theta=l,M(h,s);var c,x=p.opts=o.style(h,s);return u<b?c=k(s,u):x.marker&&(c=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(n,i,{ppad:c}),[{x:!1,y:!1,t:p,trace:s}]}},98608:function(ee,z,e){var M=e(3400),k=e(43028),o=e(85968).handleRThetaDefaults,T=e(74428),b=e(66828),h=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,a=e(24396);ee.exports=function(n,r,i,l){function u(c,x){return M.coerce(n,r,a,c,x)}var p=o(n,r,l,u);p?(u("thetaunit"),u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(r)&&T(n,r,i,l,u,{noAngleRef:!0,noStandOff:!0}),k.hasLines(r)&&(b(n,r,i,l,u),u("connectgaps")),k.hasText(r)&&(u("texttemplate"),h(n,r,l,u)),u("fill"),r.fill!=="none"&&s(n,r,i,u),M.coerceSelectionMarkerOpacity(r,u)):r.visible=!1}},94120:function(ee,z,e){var M=e(22852);ee.exports=function(k,o,T){var b=k.i;return"r"in k||(k.r=o._r[b]),"theta"in k||(k.theta=o._theta[b]),M(k,o,T)}},1600:function(ee,z,e){var M=e(41272),k=e(8504).makeHoverPointText;ee.exports={hoverPoints:function(o,T,b,h){var s=o.cd[0].t,t=s.r,a=s.theta,n=M.hoverPoints(o,T,b,h);if(n&&n[0].index!==!1){var r=n[0];if(r.index===void 0)return n;var i=o.subplot,l=r.cd[r.index],u=r.trace;if(l.r=t[r.index],l.theta=a[r.index],i.isPtInside(l))return r.xLabelVal=void 0,r.yLabelVal=void 0,k(l,u,i,r),n}}}},62944:function(ee,z,e){var M=e(27160);M.plot=e(56512),ee.exports=M},56512:function(ee,z,e){var M=e(3108),k=e(38248),o=e(89876),T=e(74588),b=e(84236),h=e(3400),s=e(67072).TOO_MANY_POINTS;ee.exports=function(t,a,n){if(n.length){var r=a.radialAxis,i=a.angularAxis,l=T(t,a);return n.forEach(function(u){if(u&&u[0]&&u[0].trace){var p,c=u[0],x=c.trace,d=c.t,g=x._length,v=d.r,y=d.theta,m=d.opts,_=v.slice(),f=y.slice();for(p=0;p<v.length;p++)a.isPtInside({r:v[p],theta:y[p]})||(_[p]=NaN,f[p]=NaN);var S=new Array(2*g),w=Array(g),E=Array(g);for(p=0;p<g;p++){var O,C,P=_[p];if(k(P)){var R=r.c2g(P),j=i.c2g(f[p],x.thetaunit);O=R*Math.cos(j),C=R*Math.sin(j)}else O=C=NaN;w[p]=S[2*p]=O,E[p]=S[2*p+1]=C}d.tree=M(S),m.marker&&g>=s&&(m.marker.cluster=d.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&h.extendFlat(m.line,b.linePositions(t,x,S)),m.text&&(h.extendFlat(m.text,{positions:S},b.textPosition(t,x,m.text,m.marker)),h.extendFlat(m.textSel,{positions:S},b.textPosition(t,x,m.text,m.markerSel)),h.extendFlat(m.textUnsel,{positions:S},b.textPosition(t,x,m.text,m.markerUnsel))),m.fill&&!l.fill2d&&(l.fill2d=!0),m.marker&&!l.scatter2d&&(l.scatter2d=!0),m.line&&!l.line2d&&(l.line2d=!0),m.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(m.line),l.fillOptions.push(m.fill),l.markerOptions.push(m.marker),l.markerSelectedOptions.push(m.markerSel),l.markerUnselectedOptions.push(m.markerUnsel),l.textOptions.push(m.text),l.textSelectedOptions.push(m.textSel),l.textUnselectedOptions.push(m.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),d.x=w,d.y=E,d.rawx=w,d.rawy=E,d.r=v,d.theta=y,d.positions=S,d._scene=l,d.index=l.count,l.count++}}),o(t,a,n)}},ee.exports.reglPrecompiled={}},69496:function(ee,z,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),h=e(45464),s=b.line;ee.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},h.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:M(),selected:b.selected,unselected:b.unselected}},47507:function(ee,z,e){var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),h=e(16356).calcMarkerSize;ee.exports=function(s,t){for(var a=s._fullLayout,n=t.subplot,r=a[n].realaxis,i=a[n].imaginaryaxis,l=r.makeCalcdata(t,"real"),u=i.makeCalcdata(t,"imag"),p=t._length,c=new Array(p),x=0;x<p;x++){var d=l[x],g=u[x],v=c[x]={};M(d)&&M(g)?(v.real=d,v.imag=g):v.real=k}return h(t,p),o(s,t),T(c,t),b(c,t),c}},76716:function(ee,z,e){var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),h=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,a=e(69496);ee.exports=function(n,r,i,l){function u(x,d){return M.coerce(n,r,a,x,d)}var p=function(x,d,g,v){var y,m=v("real"),_=v("imag");return m&&_&&(y=Math.min(m.length,_.length)),M.isTypedArray(m)&&(d.real=m=Array.from(m)),M.isTypedArray(_)&&(d.imag=_=Array.from(_)),d._length=y,y}(0,r,0,u);if(p){u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(r)&&o(n,r,i,l,u,{gradient:!0}),k.hasLines(r)&&(T(n,r,i,l,u,{backoff:!0}),b(n,r,u),u("connectgaps")),k.hasText(r)&&(u("texttemplate"),h(n,r,l,u));var c=[];(k.hasMarkers(r)||k.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),r.fill!=="none"&&(s(n,r,i,u),k.hasLines(r)||b(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},49504:function(ee,z,e){var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.subplot]._subplot;return b.realLabel=M.tickText(h.radialAxis,k.real,!0).text,b.imagLabel=M.tickText(h.angularAxis,k.imag,!0).text,b}},25292:function(ee,z,e){var M=e(98723);function k(o,T,b,h){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="real",t._hovertitle="imag";var a={};a[T.subplot]={_subplot:b};var n=T._module.formatLabels(o,T,a);h.realLabel=n.realLabel,h.imagLabel=n.imagLabel;var r=o.hi||T.hoverinfo,i=[];function l(p,c){i.push(p._hovertitle+": "+c)}if(!T.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&l(s,h.realLabel),u.indexOf("imag")!==-1&&l(t,h.imagLabel),u.indexOf("text")!==-1&&h.text&&(i.push(h.text),delete h.text),h.extraText=i.join("<br>")}}ee.exports={hoverPoints:function(o,T,b,h){var s=M(o,T,b,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var a=o.subplot,n=t.cd[t.index],r=t.trace;if(a.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,a,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:k}},95443:function(ee,z,e){ee.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(ee,z,e){var M=e(96504),k=e(39032).BADNUM,o=e(36416).smith;ee.exports=function(T,b,h){for(var s=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,a=b.yaxis,n={xaxis:t,yaxis:a,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},r=0;r<h.length;r++)for(var i=h[r],l=0;l<i.length;l++){l===0&&(i[0].trace._xA=t,i[0].trace._yA=a);var u=i[l],p=u.real;if(p===k)u.x=u.y=k;else{var c=o([p,u.imag]);u.x=c[0],u.y=c[1]}}M(T,n,h,s)}},5896:function(ee,z,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),h=e(49084),s=e(98192).u,t=e(92880).extendFlat,a=T.marker,n=T.line,r=a.line;ee.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width,dash:s,backoff:n.backoff,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o(),marker:t({symbol:a.symbol,opacity:a.opacity,angle:a.angle,angleref:a.angleref,standoff:a.standoff,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:t({width:r.width,editType:"calc"},h("marker.line")),gradient:a.gradient,editType:"calc"},h("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:M()}},34335:function(ee,z,e){var M=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,h=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};ee.exports=function(t,a){var n,r,i,l,u,p,c=t._fullLayout[a.subplot].sum,x=a.sum||c,d={a:a.a,b:a.b,c:a.c};for(n=0;n<h.length;n++)if(!d[i=h[n]]){for(u=d[s[i][0]],p=d[s[i][1]],l=new Array(u.length),r=0;r<u.length;r++)l[r]=x-u[r]-p[r];d[i]=l}var g,v,y,m,_,f,S=a._length,w=new Array(S);for(n=0;n<S;n++)g=d.a[n],v=d.b[n],y=d.c[n],M(g)&&M(v)&&M(y)?((m=c/((g=+g)+(v=+v)+(y=+y)))!=1&&(g*=m,v*=m,y*=m),f=g,_=y-v,w[n]={x:_,y:f,a:g,b:v,c:y}):w[n]={x:!1,y:!1};return b(a,S),k(t,a),o(w,a),T(w,a),w}},84256:function(ee,z,e){var M=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),h=e(11731),s=e(124),t=e(70840),a=e(5896);ee.exports=function(n,r,i,l){function u(v,y){return M.coerce(n,r,a,v,y)}var p,c=u("a"),x=u("b"),d=u("c");if(c?(p=c.length,x?(p=Math.min(p,x.length),d&&(p=Math.min(p,d.length))):p=d?Math.min(p,d.length):0):x&&d&&(p=Math.min(x.length,d.length)),p){r._length=p,u("sum"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),u("mode",p<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(r)&&T(n,r,i,l,u,{gradient:!0}),o.hasLines(r)&&(b(n,r,i,l,u,{backoff:!0}),h(n,r,u),u("connectgaps")),o.hasText(r)&&(u("texttemplate"),s(n,r,l,u));var g=[];(o.hasMarkers(r)||o.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),g.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,i,u),o.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},97476:function(ee){ee.exports=function(z,e,M,k,o){if(e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),k[o]){var T=k[o];z.a=T.a,z.b=T.b,z.c=T.c}else z.a=e.a,z.b=e.b,z.c=e.c;return z}},90404:function(ee,z,e){var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.subplot]._subplot;return b.aLabel=M.tickText(h.aaxis,k.a,!0).text,b.bLabel=M.tickText(h.baxis,k.b,!0).text,b.cLabel=M.tickText(h.caxis,k.c,!0).text,b}},26596:function(ee,z,e){var M=e(98723);ee.exports=function(k,o,T,b){var h=M(k,o,T,b);if(h&&h[0].index!==!1){var s=h[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,a=k.xa._length,n=a*t/2,r=a-n;return s.x0=Math.max(Math.min(s.x0,r),n),s.x1=Math.max(Math.min(s.x1,r),n),h}var i=s.cd[s.index],l=s.trace,u=s.subplot;s.a=i.a,s.b=i.b,s.c=i.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var p={};p[l.subplot]={_subplot:u};var c=l._module.formatLabels(i,l,p);s.aLabel=c.aLabel,s.bLabel=c.bLabel,s.cLabel=c.cLabel;var x=i.hi||l.hoverinfo,d=[];if(!l.hovertemplate){var g=x.split("+");g.indexOf("all")!==-1&&(g=["a","b","c"]),g.indexOf("a")!==-1&&v(u.aaxis,s.aLabel),g.indexOf("b")!==-1&&v(u.baxis,s.bLabel),g.indexOf("c")!==-1&&v(u.caxis,s.cLabel)}return s.extraText=d.join("<br>"),s.hovertemplate=l.hovertemplate,h}function v(y,m){d.push(y._hovertitle+": "+m)}}},34864:function(ee,z,e){ee.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(ee,z,e){var M=e(96504);ee.exports=function(k,o,T){var b=o.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var h=o.xaxis,s=o.yaxis,t={xaxis:h,yaxis:s,plot:b,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},a=o.layers.frontplot.select("g.scatterlayer"),n=0;n<T.length;n++){var r=T[n];r.length&&(r[0].trace._xA=h,r[0].trace._yA=s)}M(k,t,T,a)}},44524:function(ee,z,e){var M=e(52904),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(2876),h=e(33816).idRegex,s=e(31780).templatedArray,t=e(92880).extendFlat,a=M.marker,n=a.line,r=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},n.width,{editType:"calc"}),editType:"calc"}),i=t(k("marker"),{symbol:a.symbol,angle:a.angle,size:t({},a.size,{editType:"markerSize"}),sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:r,editType:"calc"});function l(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:h[u],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",ee.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),marker:i,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},28888:function(ee,z,e){var M=e(24040),k=e(12704);ee.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},M.register(k)},99332:function(ee,z,e){var M=e(13472),k=e(24040),o=e(5048),T=e(84888)._M,b=e(57952),h=e(79811).getFromId,s=e(54460).shouldShowZeroLine,t="splom",a={};function n(i,l,u){for(var p=u.matrixOptions.data.length,c=l._visibleDims,x=u.viewOpts.ranges=new Array(p),d=0;d<c.length;d++){var g=c[d],v=x[d]=new Array(4),y=h(i,l._diag[g][0]);y&&(v[0]=y.r2l(y.range[0]),v[2]=y.r2l(y.range[1]));var m=h(i,l._diag[g][1]);m&&(v[1]=m.r2l(m.range[0]),v[3]=m.r2l(m.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function r(i){var l=i._fullLayout,u=l._glcanvas.data()[0].regl,p=l._splomGrid;p||(p=l._splomGrid=M(u)),p.update(function(c){var x,d=c._context.plotGlPixelRatio,g=c._fullLayout,v=g._size,y=[0,0,g.width*d,g.height*d],m={};function _(U,te,J,X,K,Q){J*=d,X*=d,K*=d,Q*=d;var Z=te[U+"color"],re=te[U+"width"],oe=String(Z+re);oe in m?m[oe].data.push(NaN,NaN,J,X,K,Q):m[oe]={data:[J,X,K,Q],join:"rect",thickness:re*d,color:Z,viewport:y,range:y,overlay:!1}}for(x in g._splomSubplots){var f,S,w=g._plots[x],E=w.xaxis,O=w.yaxis,C=E._gridVals,P=O._gridVals,R=E._offset,j=E._length,D=O._length,N=v.b+O.domain[0]*v.h,W=-O._m,F=-W*O.r2l(O.range[0],O.calendar);if(E.showgrid)for(x=0;x<C.length;x++)f=R+E.l2p(C[x].x),_("grid",E,f,N,f,N+D);if(O.showgrid)for(x=0;x<P.length;x++)_("grid",O,R,S=N+F+W*P[x].x,R+j,S);s(c,E,O)&&(f=R+E.l2p(0),_("zeroline",E,f,N,f,N+D)),s(c,O,E)&&_("zeroline",O,R,S=N+F+0,R+j,S)}var V=[];for(x in m)V.push(m[x]);return V}(i))}ee.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(i){var l=i._fullLayout,u=k.getModule(t),p=T(i.calcdata,u)[0];o(i,["ANGLE_instanced_arrays","OES_element_index_uint"],a)&&(l._hasOnlyLargeSploms&&r(i),u.plot(i,{},p))},drag:function(i){var l=i.calcdata,u=i._fullLayout;u._hasOnlyLargeSploms&&r(i);for(var p=0;p<l.length;p++){var c=l[p][0].trace,x=u._splomScenes[c.uid];c.type==="splom"&&x&&x.matrix&&n(i,c,x)}},updateGrid:r,clean:function(i,l,u,p){var c,x={};if(p._splomScenes){for(c=0;c<i.length;c++){var d=i[c];d.type==="splom"&&(x[d.uid]=1)}for(c=0;c<u.length;c++){var g=u[c];if(!x[g.uid]){var v=p._splomScenes[g.uid];v&&v.destroy&&v.destroy(),p._splomScenes[g.uid]=null,delete p._splomScenes[g.uid]}}}Object.keys(p._splomScenes||{}).length===0&&delete p._splomScenes,p._splomGrid&&!l._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),b.clean(i,l,u,p)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:a}},66821:function(ee,z,e){var M=e(3400),k=e(79811),o=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,b=e(90136),h=e(84236).markerSelection,s=e(84236).markerStyle,t=e(72308),a=e(39032).BADNUM,n=e(67072).TOO_MANY_POINTS;ee.exports=function(r,i){var l,u,p,c,x,d,g=i.dimensions,v=i._length,y={},m=y.cdata=[],_=y.data=[],f=i._visibleDims=[];function S(E,O){for(var C=E.makeCalcdata({v:O.values,vcalendar:i.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===a?NaN:C[P];m.push(C),_.push(E.type==="log"?M.simpleMap(C,E.c2l):C)}for(l=0;l<g.length;l++)if((p=g[l]).visible){if(c=k.getFromId(r,i._diag[l][0]),x=k.getFromId(r,i._diag[l][1]),c&&x&&c.type!==x.type){M.log("Skipping splom dimension "+l+" with conflicting axis types");continue}c?(S(c,p),x&&x.type==="category"&&(x._categories=c._categories.slice())):S(x,p),f.push(l)}for(b(r,i),M.extendFlat(y,s(r,i)),d=m.length*v>n?y.sizeAvg||Math.max(y.size,3):o(i,v),u=0;u<f.length;u++)p=g[l=f[u]],c=k.getFromId(r,i._diag[l][0])||{},x=k.getFromId(r,i._diag[l][1])||{},T(r,i,c,x,m[u],m[u],d);var w=t(r,i);return w.matrix||(w.matrix=!0),w.matrixOptions=y,w.selectedOptions=h(r,i,i.selected),w.unselectedOptions=h(r,i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},69544:function(ee,z,e){var M=e(3400),k=e(51272),o=e(44524),T=e(43028),b=e(74428),h=e(26284),s=e(80088).isOpenSymbol;function t(a,n){function r(l,u){return M.coerce(a,n,o.dimensions,l,u)}r("label");var i=r("values");i&&i.length?r("visible"):n.visible=!1,r("axis.type"),r("axis.matches")}ee.exports=function(a,n,r,i){function l(v,y){return M.coerce(a,n,o,v,y)}var u=k(a,n,{name:"dimensions",handleItemDefaults:t}),p=l("diagonal.visible"),c=l("showupperhalf"),x=l("showlowerhalf");if(h(n,u,"values")&&(p||c||x)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),b(a,n,r,i,l,{noAngleRef:!0,noStandOff:!0});var d=s(n.marker.symbol),g=T.isBubble(n);l("marker.line.width",d||g?1:0),function(v,y,m,_){var f,S,w=y.dimensions,E=w.length,O=y.showupperhalf,C=y.showlowerhalf,P=y.diagonal.visible,R=new Array(E),j=new Array(E);for(f=0;f<E;f++){var D=f?f+1:"";R[f]="x"+D,j[f]="y"+D}var N=_("xaxes",R),W=_("yaxes",j),F=y._diag=new Array(E);y._xaxes={},y._yaxes={};var V=[],U=[];function te(ce,he,pe,xe){if(ce){var be=ce.charAt(0),ve=m._splomAxes[be];if(y["_"+be+"axes"][ce]=1,xe.push(ce),!(ce in ve)){var ge=ve[ce]={};pe&&(ge.label=pe.label||"",pe.visible&&pe.axis&&(pe.axis.type&&(ge.type=pe.axis.type),pe.axis.matches&&(ge.matches=he)))}}}var J=!P&&!C,X=!P&&!O;for(y._axesDim={},f=0;f<E;f++){var K=w[f],Q=f===0,Z=f===E-1,re=Q&&J||Z&&X?void 0:N[f],oe=Q&&X||Z&&J?void 0:W[f];te(re,oe,K,V),te(oe,re,K,U),F[f]=[re,oe],y._axesDim[re]=f,y._axesDim[oe]=f}for(f=0;f<V.length;f++)for(S=0;S<U.length;S++){var ae=V[f]+U[S];f>S&&O||f<S&&C?m._splomSubplots[ae]=1:f!==S||!P&&C&&O||(m._splomSubplots[ae]=1)}(!C||!P&&O&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,n,i,l),M.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},83156:function(ee,z,e){var M=e(3400),k=e(90136),o=e(84236).markerStyle;ee.exports=function(T,b){var h=b.trace,s=T._fullLayout._splomScenes[h.uid];if(s){k(T,h),M.extendFlat(s.matrixOptions,o(T,h));var t=M.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},50328:function(ee,z){z.getDimIndex=function(e,M){for(var k=M._id,o={x:0,y:1}[k.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++){var h=T[b];if(e._diag[h][o]===k)return b}return!1}},72248:function(ee,z,e){var M=e(50328),k=e(41272).calcHover,o=e(54460).getFromId,T=e(92880).extendFlat;function b(h,s,t,a){var n=h.cd[0].trace,r=h.scene.matrixOptions.cdata,i=h.xa,l=h.ya,u=i.c2p(s),p=l.c2p(t),c=h.distance,x=M.getDimIndex(n,i),d=M.getDimIndex(n,l);if(x===!1||d===!1)return[h];for(var g,v,y=r[x],m=r[d],_=c,f=0;f<y.length;f++)if(!a||f===h.index){var S=y[f],w=m[f],E=i.c2p(S)-u,O=l.c2p(w)-p,C=Math.sqrt(E*E+O*O);(a||C<_)&&(_=v=C,g=f)}return h.index=g,h.distance=_,h.dxy=v,g===void 0?[h]:[k(h,y,m,n)]}ee.exports={hoverPoints:function(h,s,t,a,n){n||(n={});var r=(a||"").charAt(0)==="x",i=(a||"").charAt(0)==="y",l=b(h,s,t);if((r||i)&&n.hoversubplots==="axis"&&l[0])for(var u=(r?h.xa:h.ya)._subplotsWith,p=n.gd,c=T({},h),x=0;x<u.length;x++){var d=u[x];if(d!==h.xa._id+h.ya._id){i?c.xa=o(p,d,"x"):c.ya=o(p,d,"y");var g=b(c,s,t,r||i);l=l.concat(g)}}return l}}},97924:function(ee,z,e){var M=e(28888);M.basePlotModule=e(99332),ee.exports=M},54840:function(ee,z,e){var M=e(55795),k=e(3400),o=e(79811),T=e(72760).selectMode;function b(h,s){var t,a,n,r,i,l=h._fullLayout,u=l._size,p=s.trace,c=s.t,x=l._splomScenes[p.uid],d=x.matrixOptions,g=d.cdata,v=l._glcanvas.data()[0].regl,y=l.dragmode;if(g.length!==0){d.lower=p.showupperhalf,d.upper=p.showlowerhalf,d.diagonal=p.diagonal.visible;var m=p._visibleDims,_=g.length,f=x.viewOpts={};for(f.ranges=new Array(_),f.domains=new Array(_),i=0;i<m.length;i++){n=m[i];var S=f.ranges[i]=new Array(4),w=f.domains[i]=new Array(4);(t=o.getFromId(h,p._diag[n][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(a=o.getFromId(h,p._diag[n][1]))&&(S[1]=a._rl[0],S[3]=a._rl[1],w[1]=a.domain[0],w[3]=a.domain[1])}var E=h._context.plotGlPixelRatio,O=u.l*E,C=u.b*E,P=u.w*E,R=u.h*E;f.viewport=[O,C,P+O,R+C],x.matrix===!0&&(x.matrix=M(v));var j=l.clickmode.indexOf("select")>-1,D=!0;if(T(y)||p.selectedpoints||j){var N=p._length;if(p.selectedpoints){x.selectBatch=p.selectedpoints;var W=p.selectedpoints,F={};for(n=0;n<W.length;n++)F[W[n]]=!0;var V=[];for(n=0;n<N;n++)F[n]||V.push(n);x.unselectBatch=V}var U=c.xpx=new Array(_),te=c.ypx=new Array(_);for(i=0;i<m.length;i++){if(n=m[i],t=o.getFromId(h,p._diag[n][0]))for(U[i]=new Array(N),r=0;r<N;r++)U[i][r]=t.c2p(g[i][r]);if(a=o.getFromId(h,p._diag[n][1]))for(te[i]=new Array(N),r=0;r<N;r++)te[i][r]=a.c2p(g[i][r])}if(x.selectBatch.length||x.unselectBatch.length){var J=k.extendFlat({},d,x.unselectedOptions,f),X=k.extendFlat({},d,x.selectedOptions,f);x.matrix.update(J,X),D=!1}}else c.xpx=c.ypx=null;if(D){var K=k.extendFlat({},d,f);x.matrix.update(K,null)}}}ee.exports=function(h,s,t){if(t.length)for(var a=0;a<t.length;a++)b(h,t[a][0])}},72308:function(ee,z,e){var M=e(3400);ee.exports=function(k,o){var T=k._fullLayout,b=o.uid,h=T._splomScenes;h||(h=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=h[o.uid];return t||((t=h[b]=M.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||M.extendFlat(t,s),t}},62500:function(ee,z,e){var M=e(3400),k=M.pushUnique,o=e(43028),T=e(50328);ee.exports=function(b,h){var s=b.cd,t=s[0].trace,a=s[0].t,n=b.scene,r=n.matrixOptions.cdata,i=b.xaxis,l=b.yaxis,u=[];if(!n)return u;var p=!o.hasMarkers(t)&&!o.hasText(t);if(t.visible!==!0||p)return u;var c=T.getDimIndex(t,i),x=T.getDimIndex(t,l);if(c===!1||x===!1)return u;var d=a.xpx[c],g=a.ypx[x],v=r[c],y=r[x],m=(b.scene.selectBatch||[]).slice(),_=[];if(h!==!1&&!h.degenerate)for(var f=0;f<v.length;f++)h.contains([d[f],g[f]],null,f,b)?(u.push({pointNumber:f,x:v[f],y:y[f]}),k(m,f)):m.indexOf(f)!==-1?k(m,f):_.push(f);var S=n.matrixOptions;return m.length||_.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,M.extendFlat({},S,n.selectedOptions,n.viewOpts)):n.matrix.update(S,null),n.selectBatch=m,n.unselectBatch=_,u}},90167:function(ee,z,e){var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),h=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:h({},b.showlegend,{dflt:!1})};h(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=h({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},3832:function(ee,z,e){var M=e(3400),k=e(47128);function o(h){var s,t,a,n,r,i,l,u,p,c,x,d,g=h._x,v=h._y,y=h._z,m=h._len,_=-1/0,f=1/0,S=-1/0,w=1/0,E=-1/0,O=1/0,C="";for(m&&(l=g[0],p=v[0],x=y[0]),m>1&&(u=g[m-1],c=v[m-1],d=y[m-1]),s=0;s<m;s++)_=Math.max(_,g[s]),f=Math.min(f,g[s]),S=Math.max(S,v[s]),w=Math.min(w,v[s]),E=Math.max(E,y[s]),O=Math.min(O,y[s]),n||g[s]===l||(n=!0,C+="x"),r||v[s]===p||(r=!0,C+="y"),i||y[s]===x||(i=!0,C+="z");n||(C+="x"),r||(C+="y"),i||(C+="z");var P=T(h._x),R=T(h._y),j=T(h._z);C=(C=(C=C.replace("x",(l>u?"-":"+")+"x")).replace("y",(p>c?"-":"+")+"y")).replace("z",(x>d?"-":"+")+"z");var D=function(){m=0,P=[],R=[],j=[]};(!m||m<P.length*R.length*j.length)&&D();var N=function(be){return be==="x"?g:be==="y"?v:y},W=function(be){return be==="x"?P:be==="y"?R:j},F=function(be){return be[m-1]<be[0]?-1:1},V=N(C[1]),U=N(C[3]),te=N(C[5]),J=W(C[1]).length,X=W(C[3]).length,K=W(C[5]).length,Q=!1,Z=function(be,ve,ge){return J*(X*be+ve)+ge},re=F(N(C[1])),oe=F(N(C[3])),ae=F(N(C[5]));for(s=0;s<K-1;s++){for(t=0;t<X-1;t++){for(a=0;a<J-1;a++){var ce=Z(s,t,a),he=Z(s,t,a+1),pe=Z(s,t+1,a),xe=Z(s+1,t,a);if(V[ce]*re<V[he]*re&&U[ce]*oe<U[pe]*oe&&te[ce]*ae<te[xe]*ae||(Q=!0),Q)break}if(Q)break}if(Q)break}return Q&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),D()),{xMin:f,yMin:w,zMin:O,xMax:_,yMax:S,zMax:E,Xs:P,Ys:R,Zs:j,len:m,fill:C}}function T(h){return M.distinctVals(h).vals}function b(h,s){if(s===void 0&&(s=h.length),M.isTypedArray(h))return h.subarray(0,s);for(var t=[],a=0;a<s;a++)t[a]=+h[a];return t}ee.exports={calc:function(h,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var t=o(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var a,n,r,i=0;s.starts&&(a=b(s.starts.x||[]),n=b(s.starts.y||[]),r=b(s.starts.z||[]),i=Math.min(a.length,n.length,r.length)),s._startsX=a||[],s._startsY=n||[],s._startsZ=r||[];var l,u=0,p=1/0;for(l=0;l<s._len;l++){var c=s._u[l],x=s._v[l],d=s._w[l],g=Math.sqrt(c*c+x*x+d*d);u=Math.max(u,g),p=Math.min(p,g)}for(k(h,s,{vals:[p,u],containerStr:"",cLetter:"c"}),l=0;l<i;l++){var v=a[l];t.xMax=Math.max(t.xMax,v),t.xMin=Math.min(t.xMin,v);var y=n[l];t.yMax=Math.max(t.yMax,y),t.yMin=Math.min(t.yMin,y);var m=r[l];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}s._slen=i,s._normMax=u,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:o}},25668:function(ee,z,e){var M=e(67792).gl_streamtube3d,k=M.createTubeMesh,o=e(3400),T=e(33040).parseColorScale,b=e(8932).extractOpts,h=e(52094),s={xaxis:0,yaxis:1,zaxis:2};function t(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var a=t.prototype;function n(l){var u=l.length;return u>2?l.slice(1,u-1):u===2?[(l[0]+l[1])/2]:l}function r(l){var u=l.length;return u===1?[.5,.5]:[l[1]-l[0],l[u-1]-l[u-2]]}function i(l,u){var p=l.fullSceneLayout,c=l.dataScale,x=u._len,d={};function g(J,X){var K=p[X],Q=c[s[X]];return o.simpleMap(J,function(Z){return K.d2l(Z)*Q})}if(d.vectors=h(g(u._u,"xaxis"),g(u._v,"yaxis"),g(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var v=g(u._Xs,"xaxis"),y=g(u._Ys,"yaxis"),m=g(u._Zs,"zaxis");if(d.meshgrid=[v,y,m],d.gridFill=u._gridFill,u._slen)d.startingPositions=h(g(u._startsX,"xaxis"),g(u._startsY,"yaxis"),g(u._startsZ,"zaxis"));else{for(var _=y[0],f=n(v),S=n(m),w=new Array(f.length*S.length),E=0,O=0;O<f.length;O++)for(var C=0;C<S.length;C++)w[E++]=[f[O],_,S[C]];d.startingPositions=w}d.colormap=T(u),d.tubeSize=u.sizeref,d.maxLength=u.maxdisplayed;var P=g(u._xbnds,"xaxis"),R=g(u._ybnds,"yaxis"),j=g(u._zbnds,"zaxis"),D=r(v),N=r(y),W=r(m),F=[[P[0]-D[0],R[0]-N[0],j[0]-W[0]],[P[1]+D[1],R[1]+N[1],j[1]+W[1]]],V=M(d,F),U=b(u);V.vertexIntensityBounds=[U.min/u._normMax,U.max/u._normMax];var te=u.lightposition;return V.lightPosition=[te.x,te.y,te.z],V.ambient=u.lighting.ambient,V.diffuse=u.lighting.diffuse,V.specular=u.lighting.specular,V.roughness=u.lighting.roughness,V.fresnel=u.lighting.fresnel,V.opacity=u.opacity,u._pad=V.tubeScale*u.sizeref*2,V}a.handlePick=function(l){var u=this.scene.fullSceneLayout,p=this.scene.dataScale;function c(g,v){var y=u[v],m=p[s[v]];return y.l2c(g)/m}if(l.object===this.mesh){var x=l.data.position,d=l.data.velocity;return l.traceCoordinate=[c(x[0],"xaxis"),c(x[1],"yaxis"),c(x[2],"zaxis"),c(d[0],"xaxis"),c(d[1],"yaxis"),c(d[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},a.update=function(l){this.data=l;var u=i(this.scene,l);this.mesh.update(u)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(l,u){var p=l.glplot.gl,c=i(l,u),x=k(p,c),d=new t(l,u.uid);return d.mesh=x,d.data=u,x._trace=d,l.glplot.add(x),d}},54304:function(ee,z,e){var M=e(3400),k=e(27260),o=e(90167);ee.exports=function(T,b,h,s){function t(p,c){return M.coerce(T,b,o,p,c)}var a=t("u"),n=t("v"),r=t("w"),i=t("x"),l=t("y"),u=t("z");a&&a.length&&n&&n.length&&r&&r.length&&i&&i.length&&l&&l.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},15436:function(ee,z,e){ee.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(M,k){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=k.traceCoordinate[3],M.tubev=k.traceCoordinate[4],M.tubew=k.traceCoordinate[5],M.norm=k.traceCoordinate[6],M.divergence=k.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},424:function(ee,z,e){var M=e(45464),k=e(21776).Ks,o=e(21776).Gw,T=e(49084),b=e(86968).u,h=e(74996),s=e(27328),t=e(92880).extendFlat,a=e(98192).c;ee.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},h.marker.line.color,{dflt:null}),width:t({},h.marker.line.width,{dflt:1}),editType:"calc"},pattern:a,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:h.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:t({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:h.textfont,insidetextorientation:h.insidetextorientation,insidetextfont:h.insidetextfont,outsidetextfont:t({},h.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:h.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(ee,z,e){var M=e(7316);z.name="sunburst",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},3776:function(ee,z,e){var M=e(74148),k=e(38248),o=e(3400),T=e(8932).makeColorScaleFuncFromTrace,b=e(45768).makePullColorFn,h=e(45768).generateExtendedColors,s=e(8932).calc,t=e(39032).ALMOST_EQUAL,a={},n={},r={};function i(l,u,p){var c=0,x=l.children;if(x){for(var d=x.length,g=0;g<d;g++)c+=i(x[g],u,p);p.branches&&c++}else p.leaves&&c++;return l.value=l.data.data.value=c,u._values||(u._values=[]),u._values[l.data.data.i]=c,c}z.calc=function(l,u){var p,c,x,d,g,v,y=l._fullLayout,m=u.ids,_=o.isArrayOrTypedArray(m),f=u.labels,S=u.parents,w=u.values,E=o.isArrayOrTypedArray(w),O=[],C={},P={},R=function(ae){return ae||typeof ae=="number"},j=function(ae){return!E||k(w[ae])&&w[ae]>=0};_?(p=Math.min(m.length,S.length),c=function(ae){return R(m[ae])&&j(ae)},x=function(ae){return String(m[ae])}):(p=Math.min(f.length,S.length),c=function(ae){return R(f[ae])&&j(ae)},x=function(ae){return String(f[ae])}),E&&(p=Math.min(p,w.length));for(var D=0;D<p;D++)if(c(D)){var N=x(D),W=R(S[D])?String(S[D]):"",F={i:D,id:N,pid:W,label:R(f[D])?String(f[D]):""};E&&(F.v=+w[D]),O.push(F),g=N,C[d=W]?C[d].push(g):C[d]=[g],P[g]=1}if(C[""]){if(C[""].length>1){for(var V=o.randstr(),U=0;U<O.length;U++)O[U].pid===""&&(O[U].pid=V);O.unshift({hasMultipleRoots:!0,id:V,pid:"",label:""})}}else{var te,J=[];for(te in C)P[te]||J.push(te);if(J.length!==1)return o.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",J.join(", ")].join(" "));te=J[0],O.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{v=M.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(O)}catch(ae){return o.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ae.message].join(" "))}var X=M.hierarchy(v),K=!1;if(E)switch(u.branchvalues){case"remainder":X.sum(function(ae){return ae.data.v});break;case"total":X.each(function(ae){var ce=ae.data.data,he=ce.v;if(ae.children){var pe=ae.children.reduce(function(xe,be){return xe+be.data.data.v},0);if((ce.hasImpliedRoot||ce.hasMultipleRoots)&&(he=pe),he<pe*t)return K=!0,o.warn(["Total value for node",ae.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,he,`
children sum =`,pe].join(" "))}ae.value=he})}else i(X,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!K){var Q,Z;u.sort&&X.sort(function(ae,ce){return ce.value-ae.value});var re=u.marker.colors||[],oe=!!re.length;return u._hasColorscale?(oe||(re=E?u.values:u._values),s(l,u,{vals:re,containerStr:"marker",cLetter:"c"}),Z=T(u.marker)):Q=b(y["_"+u.type+"colormap"]),X.each(function(ae){var ce=ae.data.data;ce.color=u._hasColorscale?Z(re[ce.i]):Q(re[ce.i],ce.id)}),O[0].hierarchy=X,O}},z._runCrossTraceCalc=function(l,u){var p=u._fullLayout,c=u.calcdata,x=p[l+"colorway"],d=p["_"+l+"colormap"];p["extend"+l+"colors"]&&(x=h(x,l==="icicle"?r:l==="treemap"?n:a));var g,v=0;function y(f){var S=f.data.data,w=S.id;S.color===!1&&(d[w]?S.color=d[w]:f.parent?f.parent.parent?S.color=f.parent.data.data.color:(d[w]=S.color=x[v%x.length],v++):S.color=g)}for(var m=0;m<c.length;m++){var _=c[m][0];_.trace.type===l&&_.hierarchy&&(g=_.trace.root.color,_.hierarchy.each(y))}},z.crossTraceCalc=function(l){return z._runCrossTraceCalc("sunburst",l)}},27328:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(ee,z,e){var M=e(3400),k=e(424),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleMarkerDefaults,h=e(8932),s=h.hasColorscale,t=h.handleDefaults;ee.exports=function(a,n,r,i){function l(g,v){return M.coerce(a,n,k,g,v)}var u=l("labels"),p=l("parents");if(u&&u.length&&p&&p.length){var c=l("values");c&&c.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),b(a,n,i,l);var x=n._hasColorscale=s(a,"marker","colors")||(a.marker||{}).coloraxis;x&&t(a,n,i,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",x?1:.7);var d=l("text");l("texttemplate"),n.texttemplate||l("textinfo",M.isArrayOrTypedArray(d)?"text+label":"label"),l("hovertext"),l("hovertemplate"),T(a,n,i,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),o(n,i,l),n._length=null}else n.visible=!1}},60404:function(ee,z,e){var M=e(43616),k=e(76308);ee.exports=function(o,T,b,h,s){var t=T.data.data,a=t.i,n=s||t.color;if(a>=0){T.i=t.i;var r=b.marker;r.pattern&&r.colors&&r.pattern.shape||(r.color=n,T.color=n),M.pointStyle(o,b,h,T)}else k.fill(o,n)}},45716:function(ee,z,e){var M=e(33428),k=e(24040),o=e(10624).appendArrayPointValue,T=e(93024),b=e(3400),h=e(95924),s=e(78176),t=e(69656).formatPieValue;function a(n,r,i){for(var l=n.data.data,u={curveNumber:r.index,pointNumber:l.i,data:r._input,fullData:r},p=0;p<i.length;p++){var c=i[p];c in n&&(u[c]=n[c])}return"parentString"in n&&!s.isHierarchyRoot(n)&&(u.parent=n.parentString),o(u,r,l.i),u}ee.exports=function(n,r,i,l,u){var p=l[0],c=p.trace,x=p.hierarchy,d=c.type==="sunburst",g=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),n.on("mouseover",function(v){var y=i._fullLayout;if(!i._dragging&&y.hovermode!==!1){var m,_=i._fullData[c.index],f=v.data.data,S=f.i,w=s.isHierarchyRoot(v),E=s.getParent(x,v),O=s.getValue(v),C=function(re){return b.castOption(_,S,re)},P=C("hovertemplate"),R=T.castHoverinfo(_,y,S),j=y.separators;if(P||R&&R!=="none"&&R!=="skip"){var D,N;d&&(D=p.cx+v.pxmid[0]*(1-v.rInscribed),N=p.cy+v.pxmid[1]*(1-v.rInscribed)),g&&(D=v._hoverX,N=v._hoverY);var W,F={},V=[],U=[],te=function(re){return V.indexOf(re)!==-1};R&&(V=R==="all"?_._module.attributes.hoverinfo.flags:R.split("+")),F.label=f.label,te("label")&&F.label&&U.push(F.label),f.hasOwnProperty("v")&&(F.value=f.v,F.valueLabel=t(F.value,j),te("value")&&U.push(F.valueLabel)),F.currentPath=v.currentPath=s.getPath(v.data),te("current path")&&!w&&U.push(F.currentPath);var J=[],X=function(){J.indexOf(W)===-1&&(U.push(W),J.push(W))};F.percentParent=v.percentParent=O/s.getValue(E),F.parent=v.parentString=s.getPtLabel(E),te("percent parent")&&(W=s.formatPercent(F.percentParent,j)+" of "+F.parent,X()),F.percentEntry=v.percentEntry=O/s.getValue(r),F.entry=v.entry=s.getPtLabel(r),!te("percent entry")||w||v.onPathbar||(W=s.formatPercent(F.percentEntry,j)+" of "+F.entry,X()),F.percentRoot=v.percentRoot=O/s.getValue(x),F.root=v.root=s.getPtLabel(x),te("percent root")&&!w&&(W=s.formatPercent(F.percentRoot,j)+" of "+F.root,X()),F.text=C("hovertext")||C("text"),te("text")&&(W=F.text,b.isValidTextValue(W)&&U.push(W)),m=[a(v,_,u.eventDataKeys)];var K={trace:_,y:N,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:U.join("<br>"),name:P||te("name")?_.name:void 0,color:C("hoverlabel.bgcolor")||f.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),fontWeight:C("hoverlabel.font.weight"),fontStyle:C("hoverlabel.font.style"),fontVariant:C("hoverlabel.font.variant"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:F,eventData:m};d&&(K.x0=D-v.rInscribed*v.rpx1,K.x1=D+v.rInscribed*v.rpx1,K.idealAlign=v.pxmid[0]<0?"left":"right"),g&&(K.x=D,K.idealAlign=D<0?"left":"right");var Q=[];T.loneHover(K,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:i,inOut_bbox:Q}),m[0].bbox=Q[0],c._hasHoverLabel=!0}if(g){var Z=n.select("path.surface");u.styleOne(Z,v,_,i,{hovered:!0})}c._hasHoverEvent=!0,i.emit("plotly_hover",{points:m||[a(v,_,u.eventDataKeys)],event:M.event})}}),n.on("mouseout",function(v){var y=i._fullLayout,m=i._fullData[c.index],_=M.select(this).datum();if(c._hasHoverEvent&&(v.originalEvent=M.event,i.emit("plotly_unhover",{points:[a(_,m,u.eventDataKeys)],event:M.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(y._hoverlayer.node()),c._hasHoverLabel=!1),g){var f=n.select("path.surface");u.styleOne(f,_,m,i,{hovered:!1})}}),n.on("click",function(v){var y=i._fullLayout,m=i._fullData[c.index],_=d&&(s.isHierarchyRoot(v)||s.isLeaf(v)),f=s.getPtId(v),S=s.isEntry(v)?s.findEntryWithChild(x,f):s.findEntryWithLevel(x,f),w=s.getPtId(S),E={points:[a(v,m,u.eventDataKeys)],event:M.event};_||(E.nextLevel=w);var O=h.triggerHandler(i,"plotly_"+c.type+"click",E);if(O!==!1&&y.hovermode&&(i._hoverdata=[a(v,m,u.eventDataKeys)],T.click(i,M.event)),!_&&O!==!1&&!i._dragging&&!i._transitioning){k.call("_storeDirectGUIEdit",m,y._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:w}],traces:[c.index]},P={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(y._hoverlayer.node()),k.call("animate",i,C,P)}})}},78176:function(ee,z,e){var M=e(3400),k=e(76308),o=e(93972),T=e(69656);function b(h){return h.data.data.pid}z.findEntryWithLevel=function(h,s){var t;return s&&h.eachAfter(function(a){if(z.getPtId(a)===s)return t=a.copy()}),t||h},z.findEntryWithChild=function(h,s){var t;return h.eachAfter(function(a){for(var n=a.children||[],r=0;r<n.length;r++){var i=n[r];if(z.getPtId(i)===s)return t=a.copy()}}),t||h},z.isEntry=function(h){return!h.parent},z.isLeaf=function(h){return!h.children},z.getPtId=function(h){return h.data.data.id},z.getPtLabel=function(h){return h.data.data.label},z.getValue=function(h){return h.value},z.isHierarchyRoot=function(h){return b(h)===""},z.setSliceCursor=function(h,s,t){var a=t.isTransitioning;if(!a){var n=h.datum();a=t.hideOnRoot&&z.isHierarchyRoot(n)||t.hideOnLeaves&&z.isLeaf(n)}o(h,a?null:"pointer")},z.getInsideTextFontKey=function(h,s,t,a,n){var r=(n||{}).onPathbar?"pathbar.textfont":"insidetextfont",i=t.data.data.i;return M.castOption(s,i,r+"."+h)||M.castOption(s,i,"textfont."+h)||a.size},z.getOutsideTextFontKey=function(h,s,t,a){var n=t.data.data.i;return M.castOption(s,n,"outsidetextfont."+h)||M.castOption(s,n,"textfont."+h)||a.size},z.isOutsideText=function(h,s){return!h._hasColorscale&&z.isHierarchyRoot(s)},z.determineTextFont=function(h,s,t,a){return z.isOutsideText(h,s)?function(n,r,i){return{color:z.getOutsideTextFontKey("color",n,r,i),family:z.getOutsideTextFontKey("family",n,r,i),size:z.getOutsideTextFontKey("size",n,r,i),weight:z.getOutsideTextFontKey("weight",n,r,i),style:z.getOutsideTextFontKey("style",n,r,i),variant:z.getOutsideTextFontKey("variant",n,r,i)}}(h,s,t):function(n,r,i,l){var u=(l||{}).onPathbar,p=r.data.data,c=p.i,x=M.castOption(n,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&n._input.textfont&&(x=M.castOption(n._input,c,"textfont.color")),{color:x||k.contrast(p.color),family:z.getInsideTextFontKey("family",n,r,i,l),size:z.getInsideTextFontKey("size",n,r,i,l),weight:z.getInsideTextFontKey("weight",n,r,i,l),style:z.getInsideTextFontKey("style",n,r,i,l),variant:z.getInsideTextFontKey("variant",n,r,i,l)}}(h,s,t,a)},z.hasTransition=function(h){return!!(h&&h.duration>0)},z.getMaxDepth=function(h){return h.maxdepth>=0?h.maxdepth:1/0},z.isHeader=function(h,s){return!(z.isLeaf(h)||h.depth===s._maxDepth-1)},z.getParent=function(h,s){return z.findEntryWithLevel(h,b(s))},z.listPath=function(h,s){var t=h.parent;if(!t)return[];var a=s?[t.data[s]]:[t];return z.listPath(t,s).concat(a)},z.getPath=function(h){return z.listPath(h,"label").join("/")+"/"},z.formatValue=T.formatPieValue,z.formatPercent=function(h,s){var t=M.formatPercent(h,0);return t==="0%"&&(t=T.formatPiePercent(h,s)),t}},5621:function(ee,z,e){ee.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(ee){ee.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(ee,z,e){var M=e(3400),k=e(84920);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},96488:function(ee,z,e){var M=e(33428),k=e(74148),o=e(67756).qy,T=e(43616),b=e(3400),h=e(72736),s=e(82744),t=s.recordMinTextSize,a=s.clearMinTextSize,n=e(37820),r=e(69656).getRotationAngle,i=n.computeTransform,l=n.transformInsideText,u=e(85676).styleOne,p=e(60100).resizeText,c=e(45716),x=e(27328),d=e(78176);function g(y,m,_,f){var S=y._context.staticPlot,w=y._fullLayout,E=!w.uniformtext.mode&&d.hasTransition(f),O=M.select(_).selectAll("g.slice"),C=m[0],P=C.trace,R=C.hierarchy,j=d.findEntryWithLevel(R,P.level),D=d.getMaxDepth(P),N=w._size,W=P.domain,F=N.w*(W.x[1]-W.x[0]),V=N.h*(W.y[1]-W.y[0]),U=.5*Math.min(F,V),te=C.cx=N.l+N.w*(W.x[1]+W.x[0])/2,J=C.cy=N.t+N.h*(1-W.y[0])-V/2;if(!j)return O.remove();var X=null,K={};E&&O.each(function(ie){K[d.getPtId(ie)]={rpx0:ie.rpx0,rpx1:ie.rpx1,x0:ie.x0,x1:ie.x1,transform:ie.transform},!X&&d.isEntry(ie)&&(X=ie)});var Q=function(ie){return k.partition().size([2*Math.PI,ie.height+1])(ie)}(j).descendants(),Z=j.height+1,re=0,oe=D;C.hasMultipleRoots&&d.isHierarchyRoot(j)&&(Q=Q.slice(1),Z-=1,re=1,oe+=1),Q=Q.filter(function(ie){return ie.y1<=oe});var ae=r(P.rotation);ae&&Q.forEach(function(ie){ie.x0+=ae,ie.x1+=ae});var ce=Math.min(Z,D),he=function(ie){return(ie-re)/ce*U},pe=function(ie,fe){return[ie*Math.cos(fe),-ie*Math.sin(fe)]},xe=function(ie){return b.pathAnnulus(ie.rpx0,ie.rpx1,ie.x0,ie.x1,te,J)},be=function(ie){return te+v(ie)[0]*(ie.transform.rCenter||0)+(ie.transform.x||0)},ve=function(ie){return J+v(ie)[1]*(ie.transform.rCenter||0)+(ie.transform.y||0)};(O=O.data(Q,d.getPtId)).enter().append("g").classed("slice",!0),E?O.exit().transition().each(function(){var ie=M.select(this);ie.select("path.surface").transition().attrTween("d",function(fe){var Ee=function(Te){var Ae,Se=d.getPtId(Te),Oe=K[Se],De=K[d.getPtId(j)];if(De){var de=(Te.x1>De.x1?2*Math.PI:0)+ae;Ae=Te.rpx1<De.rpx1?{x0:Te.x0,x1:Te.x1,rpx0:0,rpx1:0}:{x0:de,x1:de,rpx0:Te.rpx0,rpx1:Te.rpx1}}else{var me,Me=d.getPtId(Te.parent);O.each(function(Ye){if(d.getPtId(Ye)===Me)return me=Ye});var ze,Pe=me.children;Pe.forEach(function(Ye,at){if(d.getPtId(Ye)===Se)return ze=at});var Ne=Pe.length,Ve=o(me.x0,me.x1);Ae={rpx0:U,rpx1:U,x0:Ve(ze/Ne),x1:Ve((ze+1)/Ne)}}return o(Oe,Ae)}(fe);return function(Te){return xe(Ee(Te))}}),ie.select("g.slicetext").attr("opacity",0)}).remove():O.exit().remove(),O.order();var ge=null;if(E&&X){var we=d.getPtId(X);O.each(function(ie){ge===null&&d.getPtId(ie)===we&&(ge=ie.x1)})}var _e=O;function se(ie){var fe=ie.parent,Ee=K[d.getPtId(fe)],Te={};if(Ee){var Ae=fe.children,Se=Ae.indexOf(ie),Oe=Ae.length,De=o(Ee.x0,Ee.x1);Te.x0=De(Se/Oe),Te.x1=De(Se/Oe)}else Te.x0=Te.x1=0;return Te}E&&(_e=_e.transition().each("end",function(){var ie=M.select(this);d.setSliceCursor(ie,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),_e.each(function(ie){var fe=M.select(this),Ee=b.ensureSingle(fe,"path","surface",function(de){de.style("pointer-events",S?"none":"all")});ie.rpx0=he(ie.y0),ie.rpx1=he(ie.y1),ie.xmid=(ie.x0+ie.x1)/2,ie.pxmid=pe(ie.rpx1,ie.xmid),ie.midangle=-(ie.xmid-Math.PI/2),ie.startangle=-(ie.x0-Math.PI/2),ie.stopangle=-(ie.x1-Math.PI/2),ie.halfangle=.5*Math.min(b.angleDelta(ie.x0,ie.x1)||Math.PI,Math.PI),ie.ring=1-ie.rpx0/ie.rpx1,ie.rInscribed=function(de){return de.rpx0===0&&b.isFullCircle([de.x0,de.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(de.halfangle)),de.ring/2))}(ie),E?Ee.transition().attrTween("d",function(de){var me=function(Me){var ze,Pe=K[d.getPtId(Me)],Ne={x0:Me.x0,x1:Me.x1,rpx0:Me.rpx0,rpx1:Me.rpx1};if(Pe)ze=Pe;else if(X)if(Me.parent)if(ge){var Ve=(Me.x1>ge?2*Math.PI:0)+ae;ze={x0:Ve,x1:Ve}}else ze={rpx0:U,rpx1:U},b.extendFlat(ze,se(Me));else ze={rpx0:0,rpx1:0};else ze={x0:ae,x1:ae};return o(ze,Ne)}(de);return function(Me){return xe(me(Me))}}):Ee.attr("d",xe),fe.call(c,j,y,m,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),Ee.call(u,ie,P,y);var Te=b.ensureSingle(fe,"g","slicetext"),Ae=b.ensureSingle(Te,"text","",function(de){de.attr("data-notex",1)}),Se=b.ensureUniformFontSize(y,d.determineTextFont(P,ie,w.font));Ae.text(z.formatSliceLabel(ie,j,P,m,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Se).call(h.convertToTspans,y);var Oe=T.bBox(Ae.node());ie.transform=l(Oe,ie,C),ie.transform.targetX=be(ie),ie.transform.targetY=ve(ie);var De=function(de,me){var Me=de.transform;return i(Me,me),Me.fontSize=Se.size,t(P.type,Me,w),b.getTextTransform(Me)};E?Ae.transition().attrTween("transform",function(de){var me=function(Me){var ze,Pe=K[d.getPtId(Me)],Ne=Me.transform;if(Pe)ze=Pe;else if(ze={rpx1:Me.rpx1,transform:{textPosAngle:Ne.textPosAngle,scale:0,rotate:Ne.rotate,rCenter:Ne.rCenter,x:Ne.x,y:Ne.y}},X)if(Me.parent)if(ge){var Ve=Me.x1>ge?2*Math.PI:0;ze.x0=ze.x1=Ve}else b.extendFlat(ze,se(Me));else ze.x0=ze.x1=ae;else ze.x0=ze.x1=ae;var Ye=o(ze.transform.textPosAngle,Me.transform.textPosAngle),at=o(ze.rpx1,Me.rpx1),rt=o(ze.x0,Me.x0),dt=o(ze.x1,Me.x1),vt=o(ze.transform.scale,Ne.scale),ht=o(ze.transform.rotate,Ne.rotate),et=Ne.rCenter===0?3:ze.transform.rCenter===0?1/3:1,$e=o(ze.transform.rCenter,Ne.rCenter);return function(wt){var Pt=at(wt);rt(wt),dt(wt);var Ot=function(He){return $e(Math.pow(He,et))}(wt),At={rpx1:Pt,transform:{textPosAngle:Ye(wt),rCenter:Ot,x:Ne.x,y:Ne.y}};return t(P.type,Ne,w),{transform:{targetX:be(At),targetY:ve(At),scale:vt(wt),rotate:ht(wt),rCenter:Ot}}}}(de);return function(Me){return De(me(Me),Oe)}}):Ae.attr("transform",De(ie,Oe))})}function v(y){return m=y.rpx1,_=y.transform.textPosAngle,[m*Math.sin(_),-m*Math.cos(_)];var m,_}z.plot=function(y,m,_,f){var S,w,E=y._fullLayout,O=E._sunburstlayer,C=!_,P=!E.uniformtext.mode&&d.hasTransition(_);a("sunburst",E),(S=O.selectAll("g.trace.sunburst").data(m,function(R){return R[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(f&&(w=f()),M.transition().duration(_.duration).ease(_.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){O.selectAll("g.trace").each(function(R){g(y,R,this,_)})})):(S.each(function(R){g(y,R,this,_)}),E.uniformtext.mode&&p(y,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},z.formatSliceLabel=function(y,m,_,f,S){var w=_.texttemplate,E=_.textinfo;if(!(w||E&&E!=="none"))return"";var O=S.separators,C=f[0],P=y.data.data,R=C.hierarchy,j=d.isHierarchyRoot(y),D=d.getParent(R,y),N=d.getValue(y);if(!w){var W,F=E.split("+"),V=function(oe){return F.indexOf(oe)!==-1},U=[];if(V("label")&&P.label&&U.push(P.label),P.hasOwnProperty("v")&&V("value")&&U.push(d.formatValue(P.v,O)),!j){V("current path")&&U.push(d.getPath(y.data));var te=0;V("percent parent")&&te++,V("percent entry")&&te++,V("percent root")&&te++;var J=te>1;if(te){var X,K=function(oe){W=d.formatPercent(X,O),J&&(W+=" of "+oe),U.push(W)};V("percent parent")&&!j&&(X=N/d.getValue(D),K("parent")),V("percent entry")&&(X=N/d.getValue(m),K("entry")),V("percent root")&&(X=N/d.getValue(R),K("root"))}}return V("text")&&(W=b.castOption(_,P.i,"text"),b.isValidTextValue(W)&&U.push(W)),U.join("<br>")}var Q=b.castOption(_,P.i,"texttemplate");if(!Q)return"";var Z={};P.label&&(Z.label=P.label),P.hasOwnProperty("v")&&(Z.value=P.v,Z.valueLabel=d.formatValue(P.v,O)),Z.currentPath=d.getPath(y.data),j||(Z.percentParent=N/d.getValue(D),Z.percentParentLabel=d.formatPercent(Z.percentParent,O),Z.parent=d.getPtLabel(D)),Z.percentEntry=N/d.getValue(m),Z.percentEntryLabel=d.formatPercent(Z.percentEntry,O),Z.entry=d.getPtLabel(m),Z.percentRoot=N/d.getValue(R),Z.percentRootLabel=d.formatPercent(Z.percentRoot,O),Z.root=d.getPtLabel(R),P.hasOwnProperty("color")&&(Z.color=P.color);var re=b.castOption(_,P.i,"text");return(b.isValidTextValue(re)||re==="")&&(Z.text=re),Z.customdata=b.castOption(_,P.i,"customdata"),b.texttemplateString(Q,Z,S._d3locale,Z,_._meta||{})}},85676:function(ee,z,e){var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function h(s,t,a,n){var r=t.data.data,i=!t.children,l=r.i,u=o.castOption(a,l,"marker.line.color")||k.defaultLine,p=o.castOption(a,l,"marker.line.width")||0;s.call(b,t,a,n).style("stroke-width",p).call(k.stroke,u).style("opacity",i?a.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");T(s,t,"sunburst"),t.each(function(a){var n=M.select(this),r=a[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(i){M.select(this).call(h,i,r,s)})})},styleOne:h}},16716:function(ee,z,e){var M=e(76308),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(45464),h=e(92880).extendFlat,s=e(67824).overrideAll;function t(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var a=ee.exports=s(h({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:h({},k.zauto,{}),zmin:h({},k.zmin,{}),zmax:h({},k.zmax,{})},hoverinfo:h({},b.hoverinfo),showlegend:h({},b.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType="calc+clearAxisTypes",a.transforms=void 0},56576:function(ee,z,e){var M=e(47128);ee.exports=function(k,o){o.surfacecolor?M(k,o,{vals:o.surfacecolor,containerStr:"",cLetter:"c"}):M(k,o,{vals:o.z,containerStr:"",cLetter:"c"})}},79164:function(ee,z,e){var M=e(67792).gl_surface3d,k=e(67792).ndarray,o=e(67792).ndarray_linear_interpolate.d2,T=e(70448),b=e(11240),h=e(3400).isArrayOrTypedArray,s=e(33040).parseColorScale,t=e(43080),a=e(8932).extractOpts;function n(_,f,S){this.scene=_,this.uid=S,this.surface=f,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var r=n.prototype;r.getXat=function(_,f,S,w){var E=h(this.data.x)?h(this.data.x[0])?this.data.x[f][_]:this.data.x[_]:_;return S===void 0?E:w.d2l(E,0,S)},r.getYat=function(_,f,S,w){var E=h(this.data.y)?h(this.data.y[0])?this.data.y[f][_]:this.data.y[f]:f;return S===void 0?E:w.d2l(E,0,S)},r.getZat=function(_,f,S,w){var E=this.data.z[f][_];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[f][_]),S===void 0?E:w.d2l(E,0,S)},r.handlePick=function(_){if(_.object===this.surface){var f=(_.data.index[0]-1)/this.dataScaleX-1,S=(_.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round(f),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);_.index=[w,E],_.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],_.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var O=0;O<3;O++)_.dataCoordinate[O]!=null&&(_.dataCoordinate[O]*=this.scene.dataScale[O]);var C=this.data.hovertext||this.data.text;return h(C)&&C[E]&&C[E][w]!==void 0?_.textLabel=C[E][w]:_.textLabel=C||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(_,f){if(_<f)return 0;for(var S=0;Math.floor(_%f)===0;)_/=f,S++;return S}function u(_){for(var f=[],S=0;S<i.length;S++){var w=i[S];f.push(l(_,w))}return f}function p(_){for(var f=u(_),S=_,w=0;w<i.length;w++)if(f[w]>0){S=i[w];break}return S}function c(_,f){if(!(_<1||f<1)){for(var S=u(_),w=u(f),E=1,O=0;O<i.length;O++)E*=Math.pow(i[O],Math.max(S[O],w[O]));return E}}r.calcXnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getXat(f-1,0),E=this.getXat(f,0);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var O=0;for(f=1;f<_;f++)O+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(O/S[f-1]);return S},r.calcYnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getYat(0,f-1),E=this.getYat(0,f);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var O=0;for(f=1;f<_;f++)O+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(O/S[f-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],d=x[9],g=x[13];function v(_,f,S){var w=S[8]+S[2]*f[0]+S[5]*f[1];return _[0]=(S[6]+S[0]*f[0]+S[3]*f[1])/w,_[1]=(S[7]+S[1]*f[0]+S[4]*f[1])/w,_}function y(_,f,S){return function(w,E,O,C){for(var P=[0,0],R=w.shape[0],j=w.shape[1],D=0;D<R;D++)for(var N=0;N<j;N++)O(P,[D,N],C),w.set(D,N,o(E,P[0],P[1]))}(_,f,v,S),_}function m(_,f){for(var S=!1,w=0;w<_.length;w++)if(f===_[w]){S=!0;break}S===!1&&_.push(f)}r.estimateScale=function(_,f){for(var S=1+function(E){if(E.length!==0){for(var O=1,C=0;C<E.length;C++)O=c(O,E[C]);return O}}(f===0?this.calcXnums(_):this.calcYnums(_));S<d;)S*=2;for(;S>g;)S--,S/=p(S),++S<d&&(S=g);var w=Math.round(S/_);return w>1?w:1},r.refineCoords=function(_){for(var f=this.dataScaleX,S=this.dataScaleY,w=_[0].shape[0],E=_[0].shape[1],O=0|Math.floor(_[0].shape[0]*f+1),C=0|Math.floor(_[0].shape[1]*S+1),P=1+w+1,R=1+E+1,j=k(new Float32Array(P*R),[P,R]),D=[1/f,0,0,0,1/S,0,0,0,1],N=0;N<_.length;++N){this.surface.padField(j,_[N]);var W=k(new Float32Array(O*C),[O,C]);y(W,j,D),_[N]=W}},r.setContourLevels=function(){var _,f,S,w=[[],[],[]],E=[!1,!1,!1],O=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(O=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,f=this.contourStart[_];f<this.contourEnd[_];f+=this.contourSize[_])S=f*this.scene.dataScale[_],m(w[_],S);if(O){var C=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(C[_]=E[_]?w[_]:this.scene.contourLevels[_]);this.surface.update({levels:C})}},r.update=function(_){var f,S,w,E,O=this.scene,C=O.fullSceneLayout,P=this.surface,R=s(_),j=O.dataScale,D=_.z[0].length,N=_._ylength,W=O.contourLevels;this.data=_;var F=[];for(f=0;f<3;f++)for(F[f]=[],S=0;S<D;S++)F[f][S]=[];for(S=0;S<D;S++)for(w=0;w<N;w++)F[0][S][w]=this.getXat(S,w,_.xcalendar,C.xaxis),F[1][S][w]=this.getYat(S,w,_.ycalendar,C.yaxis),F[2][S][w]=this.getZat(S,w,_.zcalendar,C.zaxis);if(_.connectgaps)for(_._emptypoints=b(F[2]),T(F[2],_._emptypoints),_._interpolatedZ=[],S=0;S<D;S++)for(_._interpolatedZ[S]=[],w=0;w<N;w++)_._interpolatedZ[S][w]=F[2][S][w];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])==null?F[f][S][w]=NaN:E=F[f][S][w]*=j[f];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(this.minValues[f]>E&&(this.minValues[f]=E),this.maxValues[f]<E&&(this.maxValues[f]=E));for(f=0;f<3;f++)this.objectOffset[f]=.5*(this.minValues[f]+this.maxValues[f]);for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(F[f][S][w]-=this.objectOffset[f]);var V=[k(new Float32Array(D*N),[D,N]),k(new Float32Array(D*N),[D,N]),k(new Float32Array(D*N),[D,N])];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)V[f].set(S,w,F[f][S][w]);F=[];var U={colormap:R,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},te=a(_);if(U.intensityBounds=[te.min,te.max],_.surfacecolor){var J=k(new Float32Array(D*N),[D,N]);for(S=0;S<D;S++)for(w=0;w<N;w++)J.set(S,w,_.surfacecolor[w][S]);V.push(J)}else U.intensityBounds[0]*=j[2],U.intensityBounds[1]*=j[2];(g<V[0].shape[0]||g<V[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(V[0].shape[0],0),this.dataScaleY=this.estimateScale(V[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(V)),_.surfacecolor&&(U.intensity=V.pop());var X=[!0,!0,!0],K=["x","y","z"];for(f=0;f<3;++f){var Q=_.contours[K[f]];X[f]=Q.highlight,U.showContour[f]=Q.show||Q.highlight,U.showContour[f]&&(U.contourProject[f]=[Q.project.x,Q.project.y,Q.project.z],Q.show?(this.showContour[f]=!0,U.levels[f]=W[f],P.highlightColor[f]=U.contourColor[f]=t(Q.color),Q.usecolormap?P.highlightTint[f]=U.contourTint[f]=0:P.highlightTint[f]=U.contourTint[f]=1,U.contourWidth[f]=Q.width,this.contourStart[f]=Q.start,this.contourEnd[f]=Q.end,this.contourSize[f]=Q.size):(this.showContour[f]=!1,this.contourStart[f]=null,this.contourEnd[f]=null,this.contourSize[f]=0),Q.highlight&&(U.dynamicColor[f]=t(Q.highlightcolor),U.dynamicWidth[f]=Q.highlightwidth))}(function(Z){var re=Z[0].rgb,oe=Z[Z.length-1].rgb;return re[0]===oe[0]&&re[1]===oe[1]&&re[2]===oe[2]&&re[3]===oe[3]})(R)&&(U.vertexColor=!0),U.objectOffset=this.objectOffset,U.coords=V,P.update(U),P.visible=_.visible,P.enableDynamic=X,P.enableHighlight=X,P.snapToData=!0,"lighting"in _&&(P.ambientLight=_.lighting.ambient,P.diffuseLight=_.lighting.diffuse,P.specularLight=_.lighting.specular,P.roughness=_.lighting.roughness,P.fresnel=_.lighting.fresnel),"lightposition"in _&&(P.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ee.exports=function(_,f){var S=_.glplot.gl,w=M({gl:S}),E=new n(_,w,f.uid);return w._trace=E,E.update(f),_.glplot.add(w),E}},60192:function(ee,z,e){var M=e(24040),k=e(3400),o=e(27260),T=e(16716);function b(s,t,a,n){var r=n("opacityscale");r==="max"?t.opacityscale=[[0,.1],[1,1]]:r==="min"?t.opacityscale=[[0,1],[1,.1]]:r==="extremes"?t.opacityscale=function(i,l){for(var u=[],p=0;p<32;p++){var c=p/31,x=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,x))])}return u}():function(i){var l=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var u=0;u<i.length;u++){var p=i[u];if(p.length!==2||+p[0]<l)return!1;l=+p[0]}return!0}(r)||(t.opacityscale=void 0)}function h(s,t,a){t in s&&!(a in s)&&(s[a]=s[t])}ee.exports={supplyDefaults:function(s,t,a,n){var r,i;function l(m,_){return k.coerce(s,t,T,m,_)}var u=l("x"),p=l("y"),c=l("z");if(!c||!c.length||u&&u.length<1||p&&p.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],n),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){l(m)});var x=l("surfacecolor"),d=["x","y","z"];for(r=0;r<3;++r){var g="contours."+d[r],v=l(g+".show"),y=l(g+".highlight");if(v||y)for(i=0;i<3;++i)l(g+".project."+d[i]);v&&(l(g+".color"),l(g+".width"),l(g+".usecolormap")),y&&(l(g+".highlightcolor"),l(g+".highlightwidth")),l(g+".start"),l(g+".end"),l(g+".size")}x||(h(s,"zmin","cmin"),h(s,"zmax","cmax"),h(s,"zauto","cauto")),o(s,t,n,l,{prefix:"",cLetter:"c"}),b(0,t,0,l),t._length=null}},opacityscaleDefaults:b}},91304:function(ee,z,e){ee.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(ee,z,e){var M=e(13916),k=e(92880).extendFlat,o=e(67824).overrideAll,T=e(25376),b=e(86968).u,h=e(29736).descriptionOnlyNumbers;(ee.exports=o({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(ee,z,e){var M=e(84888)._M,k=e(24752),o="table";z.name=o,z.plot=function(T){var b=M(T.calcdata,o)[0];b.length&&k(T,b)},z.clean=function(T,b,h,s){var t=s._has&&s._has(o),a=b._has&&b._has(o);t&&!a&&s._paperdiv.selectAll(".table").remove()}},39312:function(ee,z,e){var M=e(71688).wrap;ee.exports=function(){return M({})}},23536:function(ee){ee.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(ee,z,e){var M=e(23536),k=e(92880).extendFlat,o=e(38248),T=e(38116).isTypedArray,b=e(38116).isArrayOrTypedArray;function h(l){if(b(l)){for(var u=0,p=0;p<l.length;p++)u=Math.max(u,h(l[p]));return u}return l}function s(l,u){return l+u}function t(l){var u,p=l.slice(),c=1/0,x=0;for(u=0;u<p.length;u++)T(p[u])?p[u]=Array.from(p[u]):b(p[u])||(p[u]=[p[u]]),c=Math.min(c,p[u].length),x=Math.max(x,p[u].length);if(c!==x)for(u=0;u<p.length;u++){var d=x-p[u].length;d&&(p[u]=p[u].concat(a(d)))}return p}function a(l){for(var u=new Array(l),p=0;p<l;p++)u[p]="";return u}function n(l){return l.calcdata.columns.reduce(function(u,p){return p.xIndex<l.xIndex?u+p.columnWidth:u},0)}function r(l,u){return Object.keys(l).map(function(p){return k({},l[p],{auxiliaryBlocks:u})})}function i(l,u){for(var p,c={},x=0,d=0,g={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,y=0,m=0;m<l.length;m++)p=l[m],g.rows.push({rowIndex:m,rowHeight:p}),((d+=p)>=u||m===l.length-1)&&(c[x]=g,g.key=y++,g.firstRowIndex=v,g.lastRowIndex=m,g={firstRowIndex:null,lastRowIndex:null,rows:[]},x+=d,v=m+1,d=0);return c}ee.exports=function(l,u){var p=t(u.cells.values),c=function(N){return N.slice(u.header.values.length,N.length)},x=t(u.header.values);x.length&&!x[0].length&&(x[0]=[""],x=t(x));var d=x.concat(c(p).map(function(){return a((x[0]||[""]).length)})),g=u.domain,v=Math.floor(l._fullLayout._size.w*(g.x[1]-g.x[0])),y=Math.floor(l._fullLayout._size.h*(g.y[1]-g.y[0])),m=u.header.values.length?d[0].map(function(){return u.header.height}):[M.emptyHeaderHeight],_=p.length?p[0].map(function(){return u.cells.height}):[],f=m.reduce(s,0),S=i(_,y-f+M.uplift),w=r(i(m,f),[]),E=r(S,w),O={},C=u._fullInput.columnorder;b(C)&&(C=Array.from(C)),C=C.concat(c(p.map(function(N,W){return W})));var P=d.map(function(N,W){var F=b(u.columnwidth)?u.columnwidth[Math.min(W,u.columnwidth.length-1)]:u.columnwidth;return o(F)?Number(F):1}),R=P.reduce(s,0);P=P.map(function(N){return N/R*v});var j=Math.max(h(u.header.line.width),h(u.cells.line.width)),D={key:u.uid+l._context.staticPlot,translateX:g.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-g.y[1]),size:l._fullLayout._size,width:v,maxLineWidth:j,height:y,columnOrder:C,groupHeight:y,rowBlocks:E,headerRowBlocks:w,scrollY:0,cells:k({},u.cells,{values:p}),headerCells:k({},u.header,{values:d}),gdColumns:d.map(function(N){return N[0]}),gdColumnsOriginalOrder:d.map(function(N){return N[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(N,W){var F=O[N];return O[N]=(F||0)+1,{key:N+"__"+O[N],label:N,specIndex:W,xIndex:C[W],xScale:n,x:void 0,calcdata:void 0,columnWidth:P[W]}})};return D.columns.forEach(function(N){N.calcdata=D,N.x=n(N)}),D}},53056:function(ee,z,e){var M=e(92880).extendFlat;z.splitToPanels=function(k){var o=[0,0],T=M({},k,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:M({},k.calcdata,{cells:k.calcdata.headerCells})});return[M({},k,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),M({},k,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},z.splitToCells=function(k){var o=function(T){var b=T.rowBlocks[T.page],h=b?b.rows[0].rowIndex:0;return[h,b?h+b.rows.length:0]}(k);return(k.values||[]).slice(o[0],o[1]).map(function(T,b){return{keyWithinBlock:b+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},53212:function(ee,z,e){var M=e(3400),k=e(60520),o=e(86968).Q;ee.exports=function(T,b,h,s){function t(a,n){return M.coerce(T,b,k,a,n)}o(b,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),M.coerceFont(t,"header.font",M.extendFlat({},s.font)),function(a,n){for(var r=a.columnorder||[],i=a.header.values.length,l=r.slice(0,i),u=l.slice().sort(function(x,d){return x-d}),p=l.map(function(x){return u.indexOf(x)}),c=p.length;c<i;c++)p.push(c);n("columnorder",p)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),M.coerceFont(t,"cells.font",M.extendFlat({},s.font)),b._length=null}},41724:function(ee,z,e){ee.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(ee,z,e){var M=e(23536),k=e(33428),o=e(3400),T=o.numberFormat,b=e(71688),h=e(43616),s=e(72736),t=e(3400).raiseToTop,a=e(3400).strTranslate,n=e(3400).cancelTransition,r=e(55992),i=e(53056),l=e(76308);function u(U){return Math.ceil(U.calcdata.maxLineWidth/2)}function p(U,te){return"clip"+U._fullLayout._uid+"_scrollAreaBottomClip_"+te.key}function c(U,te){return"clip"+U._fullLayout._uid+"_columnBoundaryClippath_"+te.calcdata.key+"_"+te.specIndex}function x(U){return[].concat.apply([],U.map(function(te){return te})).map(function(te){return te.__data__})}function d(U,te,J){var X=U.selectAll("."+M.cn.scrollbarKit).data(b.repeat,b.keyFun);X.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),X.each(function(oe){var ae=oe.scrollbarState;ae.totalHeight=function(ce){var he=ce.rowBlocks;return N(he,he.length-1)+(he.length?W(he[he.length-1],1/0):1)}(oe),ae.scrollableAreaHeight=oe.groupHeight-w(oe),ae.currentlyVisibleHeight=Math.min(ae.totalHeight,ae.scrollableAreaHeight),ae.ratio=ae.currentlyVisibleHeight/ae.totalHeight,ae.barLength=Math.max(ae.ratio*ae.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),ae.barWiggleRoom=ae.currentlyVisibleHeight-ae.barLength,ae.wiggleRoom=Math.max(0,ae.totalHeight-ae.scrollableAreaHeight),ae.topY=ae.barWiggleRoom===0?0:oe.scrollY/ae.wiggleRoom*ae.barWiggleRoom,ae.bottomY=ae.topY+ae.barLength,ae.dragMultiplier=ae.wiggleRoom/ae.barWiggleRoom}).attr("transform",function(oe){var ae=oe.width+M.scrollbarWidth/2+M.scrollbarOffset;return a(ae,w(oe))});var K=X.selectAll("."+M.cn.scrollbar).data(b.repeat,b.keyFun);K.enter().append("g").classed(M.cn.scrollbar,!0);var Q=K.selectAll("."+M.cn.scrollbarSlider).data(b.repeat,b.keyFun);Q.enter().append("g").classed(M.cn.scrollbarSlider,!0),Q.attr("transform",function(oe){return a(0,oe.scrollbarState.topY||0)});var Z=Q.selectAll("."+M.cn.scrollbarGlyph).data(b.repeat,b.keyFun);Z.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),Z.attr("y2",function(oe){return oe.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(oe){return oe.columnDragInProgress||!oe.scrollbarState.barWiggleRoom||J?0:.4}),Z.transition().delay(0).duration(0),Z.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var re=K.selectAll("."+M.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);re.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(oe){var ae=k.event.y,ce=this.getBoundingClientRect(),he=oe.scrollbarState,pe=ae-ce.top,xe=k.scale.linear().domain([0,he.scrollableAreaHeight]).range([0,he.totalHeight]).clamp(!0);he.topY<=pe&&pe<=he.bottomY||O(te,U,null,xe(pe-he.barLength/2))(oe)}).call(k.behavior.drag().origin(function(oe){return k.event.stopPropagation(),oe.scrollbarState.scrollbarScrollInProgress=!0,oe}).on("drag",O(te,U)).on("dragend",function(){})),re.attr("y2",function(oe){return oe.scrollbarState.scrollableAreaHeight}),te._context.staticPlot&&(Z.remove(),re.remove())}function g(U,te,J,X){var K=function(ae){var ce=ae.selectAll("."+M.cn.columnCells).data(b.repeat,b.keyFun);return ce.enter().append("g").classed(M.cn.columnCells,!0),ce.exit().remove(),ce}(J),Q=function(ae){var ce=ae.selectAll("."+M.cn.columnCell).data(i.splitToCells,function(he){return he.keyWithinBlock});return ce.enter().append("g").classed(M.cn.columnCell,!0),ce.exit().remove(),ce}(K);(function(ae){ae.each(function(ce,he){var pe=ce.calcdata.cells.font,xe=ce.column.specIndex,be={size:m(pe.size,xe,he),color:m(pe.color,xe,he),family:m(pe.family,xe,he),weight:m(pe.weight,xe,he),style:m(pe.style,xe,he),variant:m(pe.variant,xe,he)};ce.rowNumber=ce.key,ce.align=m(ce.calcdata.cells.align,xe,he),ce.cellBorderWidth=m(ce.calcdata.cells.line.width,xe,he),ce.font=be})})(Q);var Z=function(ae){var ce=ae.selectAll("."+M.cn.cellRect).data(b.repeat,function(he){return he.keyWithinBlock});return ce.enter().append("rect").classed(M.cn.cellRect,!0),ce}(Q);(function(ae){ae.attr("width",function(ce){return ce.column.columnWidth}).attr("stroke-width",function(ce){return ce.cellBorderWidth}).each(function(ce){var he=k.select(this);l.stroke(he,m(ce.calcdata.cells.line.color,ce.column.specIndex,ce.rowNumber)),l.fill(he,m(ce.calcdata.cells.fill.color,ce.column.specIndex,ce.rowNumber))})})(Z);var re=function(ae){var ce=ae.selectAll("."+M.cn.cellTextHolder).data(b.repeat,function(he){return he.keyWithinBlock});return ce.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ce}(Q),oe=function(ae){var ce=ae.selectAll("."+M.cn.cellText).data(b.repeat,function(he){return he.keyWithinBlock});return ce.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ce}(re);(function(ae){ae.each(function(ce){h.font(k.select(this),ce.font)})})(oe),v(oe,te,X,U),D(Q)}function v(U,te,J,X){U.text(function(K){var Q=K.column.specIndex,Z=K.rowNumber,re=K.value,oe=typeof re=="string",ae=oe&&re.match(/<br>/i),ce=!oe||ae;K.mayHaveMarkup=oe&&re.match(/[<&>]/);var he,pe=typeof(he=re)=="string"&&he.match(M.latexCheck);K.latex=pe;var xe,be,ve=pe?"":m(K.calcdata.cells.prefix,Q,Z)||"",ge=pe?"":m(K.calcdata.cells.suffix,Q,Z)||"",we=pe?null:m(K.calcdata.cells.format,Q,Z)||null,_e=ve+(we?T(we)(K.value):K.value)+ge;if(K.wrappingNeeded=!K.wrapped&&!ce&&!pe&&(xe=y(_e)),K.cellHeightMayIncrease=ae||pe||K.mayHaveMarkup||(xe===void 0?y(_e):xe),K.needsConvertToTspans=K.mayHaveMarkup||K.wrappingNeeded||K.latex,K.wrappingNeeded){var se=(M.wrapSplitCharacter===" "?_e.replace(/<a href=/gi,"<a_href="):_e).split(M.wrapSplitCharacter),ie=M.wrapSplitCharacter===" "?se.map(function(fe){return fe.replace(/<a_href=/gi,"<a href=")}):se;K.fragments=ie.map(function(fe){return{text:fe,width:null}}),K.fragments.push({fragment:M.wrapSpacer,width:null}),be=ie.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete K.fragments,be=_e;return be}).attr("dy",function(K){return K.needsConvertToTspans?0:"0.75em"}).each(function(K){var Q=this,Z=k.select(Q),re=K.wrappingNeeded?P:R;K.needsConvertToTspans?s.convertToTspans(Z,X,re(J,Q,te,X,K)):k.select(Q.parentNode).attr("transform",function(oe){return a(j(oe),M.cellPad)}).attr("text-anchor",function(oe){return{left:"start",center:"middle",right:"end"}[oe.align]})})}function y(U){return U.indexOf(M.wrapSplitCharacter)!==-1}function m(U,te,J){if(o.isArrayOrTypedArray(U)){var X=U[Math.min(te,U.length-1)];return o.isArrayOrTypedArray(X)?X[Math.min(J,X.length-1)]:X}return U}function _(U,te,J){U.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",a(te.x,J))}function f(U){return U.type==="cells"}function S(U){return U.type==="header"}function w(U){return(U.rowBlocks.length?U.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(te,J){return te+W(J,1/0)},0)}function E(U,te,J){var X=x(te)[0];if(X!==void 0){var K=X.rowBlocks,Q=X.calcdata,Z=N(K,K.length),re=X.calcdata.groupHeight-w(X),oe=Q.scrollY=Math.max(0,Math.min(Z-re,Q.scrollY)),ae=function(ce,he,pe){for(var xe=[],be=0,ve=0;ve<ce.length;ve++){for(var ge=ce[ve],we=ge.rows,_e=0,se=0;se<we.length;se++)_e+=we[se].rowHeight;ge.allRowsHeight=_e,he<be+_e&&he+pe>be&&xe.push(ve),be+=_e}return xe}(K,oe,re);ae.length===1&&(ae[0]===K.length-1?ae.unshift(ae[0]-1):ae.push(ae[0]+1)),ae[0]%2&&ae.reverse(),te.each(function(ce,he){ce.page=ae[he],ce.scrollY=oe}),te.attr("transform",function(ce){var he=N(ce.rowBlocks,ce.page)-ce.scrollY;return a(0,he)}),U&&(C(U,J,te,ae,X.prevPages,X,0),C(U,J,te,ae,X.prevPages,X,1),d(J,U))}}function O(U,te,J,X){return function(K){var Q=K.calcdata?K.calcdata:K,Z=te.filter(function(ce){return Q.key===ce.key}),re=J||Q.scrollbarState.dragMultiplier,oe=Q.scrollY;Q.scrollY=X===void 0?Q.scrollY+re*k.event.dy:X;var ae=Z.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(f);return E(U,ae,Z),Q.scrollY===oe}}function C(U,te,J,X,K,Q,Z){X[Z]!==K[Z]&&(clearTimeout(Q.currentRepaint[Z]),Q.currentRepaint[Z]=setTimeout(function(){var re=J.filter(function(oe,ae){return ae===Z&&X[ae]!==K[ae]});g(U,te,re,J),K[Z]=X[Z]}))}function P(U,te,J,X){return function(){var K=k.select(te.parentNode);K.each(function(Q){var Z=Q.fragments;K.selectAll("tspan.line").each(function(be,ve){Z[ve].width=this.getComputedTextLength()});var re,oe,ae=Z[Z.length-1].width,ce=Z.slice(0,-1),he=[],pe=0,xe=Q.column.columnWidth-2*M.cellPad;for(Q.value="";ce.length;)pe+(oe=(re=ce.shift()).width+ae)>xe&&(Q.value+=he.join(M.wrapSpacer)+M.lineBreaker,he=[],pe=0),he.push(re.text),pe+=oe;pe&&(Q.value+=he.join(M.wrapSpacer)),Q.wrapped=!0}),K.selectAll("tspan.line").remove(),v(K.select("."+M.cn.cellText),J,U,X),k.select(te.parentNode.parentNode).call(D)}}function R(U,te,J,X,K){return function(){if(!K.settledY){var Q=k.select(te.parentNode),Z=V(K),re=K.key-Z.firstRowIndex,oe=Z.rows[re].rowHeight,ae=K.cellHeightMayIncrease?te.parentNode.getBoundingClientRect().height+2*M.cellPad:oe,ce=Math.max(ae,oe);ce-Z.rows[re].rowHeight&&(Z.rows[re].rowHeight=ce,U.selectAll("."+M.cn.columnCell).call(D),E(null,U.filter(f),0),d(J,X,!0)),Q.attr("transform",function(){var he=this,pe=he.parentNode.getBoundingClientRect(),xe=k.select(he.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),be=he.transform.baseVal.consolidate(),ve=xe.top-pe.top+(be?be.matrix.f:M.cellPad);return a(j(K,k.select(he.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),ve)}),K.settledY=!0}}}function j(U,te){switch(U.align){case"left":default:return M.cellPad;case"right":return U.column.columnWidth-(te||0)-M.cellPad;case"center":return(U.column.columnWidth-(te||0))/2}}function D(U){U.attr("transform",function(te){var J=te.rowBlocks[0].auxiliaryBlocks.reduce(function(K,Q){return K+W(Q,1/0)},0),X=W(V(te),te.key);return a(0,X+J)}).selectAll("."+M.cn.cellRect).attr("height",function(te){return(J=V(te),X=te.key,J.rows[X-J.firstRowIndex]).rowHeight;var J,X})}function N(U,te){for(var J=0,X=te-1;X>=0;X--)J+=F(U[X]);return J}function W(U,te){for(var J=0,X=0;X<U.rows.length&&U.rows[X].rowIndex<te;X++)J+=U.rows[X].rowHeight;return J}function F(U){var te=U.allRowsHeight;if(te!==void 0)return te;for(var J=0,X=0;X<U.rows.length;X++)J+=U.rows[X].rowHeight;return U.allRowsHeight=J,J}function V(U){return U.rowBlocks[U.page]}ee.exports=function(U,te){var J=!U._context.staticPlot,X=U._fullLayout._paper.selectAll("."+M.cn.table).data(te.map(function(ge){var we=b.unwrap(ge).trace;return r(U,we)}),b.keyFun);X.exit().remove(),X.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),X.attr("width",function(ge){return ge.width+ge.size.l+ge.size.r}).attr("height",function(ge){return ge.height+ge.size.t+ge.size.b}).attr("transform",function(ge){return a(ge.translateX,ge.translateY)});var K=X.selectAll("."+M.cn.tableControlView).data(b.repeat,b.keyFun),Q=K.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(J){var Z="onwheel"in document?"wheel":"mousewheel";Q.on("mousemove",function(ge){K.filter(function(we){return ge===we}).call(d,U)}).on(Z,function(ge){if(!ge.scrollbarState.wheeling){ge.scrollbarState.wheeling=!0;var we=ge.scrollY+k.event.deltaY;O(U,K,null,we)(ge)||(k.event.stopPropagation(),k.event.preventDefault()),ge.scrollbarState.wheeling=!1}}).call(d,U,!0)}K.attr("transform",function(ge){return a(ge.size.l,ge.size.t)});var re=K.selectAll("."+M.cn.scrollBackground).data(b.repeat,b.keyFun);re.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),re.attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}),K.each(function(ge){h.setClipUrl(k.select(this),p(U,ge),U)});var oe=K.selectAll("."+M.cn.yColumn).data(function(ge){return ge.columns},b.keyFun);oe.enter().append("g").classed(M.cn.yColumn,!0),oe.exit().remove(),oe.attr("transform",function(ge){return a(ge.x,0)}),J&&oe.call(k.behavior.drag().origin(function(ge){return _(k.select(this),ge,-M.uplift),t(this),ge.calcdata.columnDragInProgress=!0,d(K.filter(function(we){return ge.calcdata.key===we.key}),U),ge}).on("drag",function(ge){var we=k.select(this),_e=function(se){return(ge===se?k.event.x:se.x)+se.columnWidth/2};ge.x=Math.max(-M.overdrag,Math.min(ge.calcdata.width+M.overdrag-ge.columnWidth,k.event.x)),x(oe).filter(function(se){return se.calcdata.key===ge.calcdata.key}).sort(function(se,ie){return _e(se)-_e(ie)}).forEach(function(se,ie){se.xIndex=ie,se.x=ge===se?se.x:se.xScale(se)}),oe.filter(function(se){return ge!==se}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(se){return a(se.x,0)}),we.call(n).attr("transform",a(ge.x,-M.uplift))}).on("dragend",function(ge){var we=k.select(this),_e=ge.calcdata;ge.x=ge.xScale(ge),ge.calcdata.columnDragInProgress=!1,_(we,ge,0),function(se,ie,fe){var Ee=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(Te,Ae){return fe[Ee.indexOf(Te)]-fe[Ee.indexOf(Ae)]}),ie.columnorder=fe,se.emit("plotly_restyle")}(U,_e,_e.columns.map(function(se){return se.xIndex}))})),oe.each(function(ge){h.setClipUrl(k.select(this),c(U,ge),U)});var ae=oe.selectAll("."+M.cn.columnBlock).data(i.splitToPanels,b.keyFun);ae.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(ge){return ge.key}),ae.style("cursor",function(ge){return ge.dragHandle?"ew-resize":ge.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ce=ae.filter(S),he=ae.filter(f);J&&he.call(k.behavior.drag().origin(function(ge){return k.event.stopPropagation(),ge}).on("drag",O(U,K,-1)).on("dragend",function(){})),g(U,K,ce,ae),g(U,K,he,ae);var pe=K.selectAll("."+M.cn.scrollAreaClip).data(b.repeat,b.keyFun);pe.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(ge){return p(U,ge)});var xe=pe.selectAll("."+M.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);xe.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),xe.attr("width",function(ge){return ge.width+2*M.overdrag}).attr("height",function(ge){return ge.height+M.uplift}),oe.selectAll("."+M.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var be=oe.selectAll("."+M.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);be.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),be.attr("id",function(ge){return c(U,ge)});var ve=be.selectAll("."+M.cn.columnBoundaryRect).data(b.repeat,b.keyFun);ve.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),ve.attr("width",function(ge){return ge.columnWidth+2*u(ge)}).attr("height",function(ge){return ge.calcdata.height+2*u(ge)+M.uplift}).attr("x",function(ge){return-u(ge)}).attr("y",function(ge){return-u(ge)}),E(null,he,K)}},40516:function(ee,z,e){var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),h=e(424),s=e(32984),t=e(92880).extendFlat,a=e(98192).c;ee.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:h.marker.colors,pattern:a,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:h.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:h.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:h.hoverinfo,hovertemplate:M({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:h.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(ee,z,e){var M=e(7316);z.name="treemap",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},97840:function(ee,z,e){var M=e(3776);z.r=function(k,o){return M.calc(k,o)},z.q=function(k){return M._runCrossTraceCalc("treemap",k)}},32984:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(ee,z,e){var M=e(3400),k=e(40516),o=e(76308),T=e(86968).Q,b=e(31508).handleText,h=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),a=t.hasColorscale,n=t.handleDefaults;ee.exports=function(r,i,l,u){function p(_,f){return M.coerce(r,i,k,_,f)}var c=p("labels"),x=p("parents");if(c&&c.length&&x&&x.length){var d=p("values");d&&d.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.packing")==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var g=p("text");p("texttemplate"),i.texttemplate||p("textinfo",M.isArrayOrTypedArray(g)?"text+label":"label"),p("hovertext"),p("hovertemplate");var v=p("pathbar.visible");b(r,i,u,p,"auto",{hasPathbar:v,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var y=i.textposition.indexOf("bottom")!==-1;s(r,i,u,p),(i._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis)?n(r,i,u,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(i.marker.colors||[]).length);var m=2*i.textfont.size;p("marker.pad.t",y?m/4:m),p("marker.pad.l",m/4),p("marker.pad.r",m/4),p("marker.pad.b",y?m:m/4),p("marker.cornerradius"),i._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},v&&(p("pathbar.thickness",i.pathbar.textfont.size+2*h),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(i,u,p),i._length=null}else i.visible=!1}},95808:function(ee,z,e){var M=e(33428),k=e(78176),o=e(82744).clearMinTextSize,T=e(60100).resizeText,b=e(52960);ee.exports=function(h,s,t,a,n){var r,i,l=n.type,u=n.drawDescendants,p=h._fullLayout,c=p["_"+l+"layer"],x=!t;o(l,p),(r=c.selectAll("g.trace."+l).data(s,function(d){return d[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),r.order(),!p.uniformtext.mode&&k.hasTransition(t)?(a&&(i=a()),M.transition().duration(t.duration).ease(t.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){c.selectAll("g.trace").each(function(d){b(h,d,this,t,u)})})):(r.each(function(d){b(h,d,this,t,u)}),p.uniformtext.mode&&T(h,c.selectAll(".trace"),l)),x&&r.exit().remove()}},27336:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),h=e(66192).styleOne,s=e(32984),t=e(78176),a=e(45716),n=!0;ee.exports=function(r,i,l,u,p){var c=p.barDifY,x=p.width,d=p.height,g=p.viewX,v=p.viewY,y=p.pathSlice,m=p.toMoveInsideSlice,_=p.strTransform,f=p.hasTransition,S=p.handleSlicesExit,w=p.makeUpdateSliceInterpolator,E=p.makeUpdateTextInterpolator,O={},C=r._context.staticPlot,P=r._fullLayout,R=i[0],j=R.trace,D=R.hierarchy,N=x/j._entryDepth,W=t.listPath(l.data,"id"),F=b(D.copy(),[x,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(U){var te=W.indexOf(U.data.id);return te!==-1&&(U.x0=N*te,U.x1=N*(te+1),U.y0=c,U.y1=c+d,U.onPathbar=!0,!0)})).reverse(),(u=u.data(F,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,n,O,[x,d],y),u.order();var V=u;f&&(V=V.transition().each("end",function(){var U=M.select(this);t.setSliceCursor(U,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(U){U._x0=g(U.x0),U._x1=g(U.x1),U._y0=v(U.y0),U._y1=v(U.y1),U._hoverX=g(U.x1-Math.min(x,d)/2),U._hoverY=v(U.y1-d/2);var te=M.select(this),J=k.ensureSingle(te,"path","surface",function(Z){Z.style("pointer-events",C?"none":"all")});f?J.transition().attrTween("d",function(Z){var re=w(Z,n,O,[x,d]);return function(oe){return y(re(oe))}}):J.attr("d",y),te.call(a,l,r,i,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),J.call(h,U,j,r,{hovered:!1}),U._text=(t.getPtLabel(U)||"").split("<br>").join(" ")||"";var X=k.ensureSingle(te,"g","slicetext"),K=k.ensureSingle(X,"text","",function(Z){Z.attr("data-notex",1)}),Q=k.ensureUniformFontSize(r,t.determineTextFont(j,U,P.font,{onPathbar:!0}));K.text(U._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,Q).call(T.convertToTspans,r),U.textBB=o.bBox(K.node()),U.transform=m(U,{fontSize:Q.size,onPathbar:!0}),U.transform.fontSize=Q.size,f?K.transition().attrTween("transform",function(Z){var re=E(Z,n,O,[x,d]);return function(oe){return _(re(oe))}}):K.attr("transform",_(U))})}},76477:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),h=e(66192).styleOne,s=e(32984),t=e(78176),a=e(45716),n=e(96488).formatSliceLabel,r=!1;ee.exports=function(i,l,u,p,c){var x=c.width,d=c.height,g=c.viewX,v=c.viewY,y=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,O=c.prevEntry,C=i._context.staticPlot,P=i._fullLayout,R=l[0].trace,j=R.textposition.indexOf("left")!==-1,D=R.textposition.indexOf("right")!==-1,N=R.textposition.indexOf("bottom")!==-1,W=!N&&!R.marker.pad.t||N&&!R.marker.pad.b,F=b(u,[x,d],{packing:R.tiling.packing,squarifyratio:R.tiling.squarifyratio,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,pad:{inner:R.tiling.pad,top:R.marker.pad.t,left:R.marker.pad.l,right:R.marker.pad.r,bottom:R.marker.pad.b}}).descendants(),V=1/0,U=-1/0;F.forEach(function(Q){var Z=Q.depth;Z>=R._maxDepth?(Q.x0=Q.x1=(Q.x0+Q.x1)/2,Q.y0=Q.y1=(Q.y0+Q.y1)/2):(V=Math.min(V,Z),U=Math.max(U,Z))}),p=p.data(F,t.getPtId),R._maxVisibleLayers=isFinite(U)?U-V+1:0,p.enter().append("g").classed("slice",!0),S(p,r,{},[x,d],y),p.order();var te=null;if(f&&O){var J=t.getPtId(O);p.each(function(Q){te===null&&t.getPtId(Q)===J&&(te={x0:Q.x0,x1:Q.x1,y0:Q.y0,y1:Q.y1})})}var X=function(){return te||{x0:0,x1:x,y0:0,y1:d}},K=p;return f&&(K=K.transition().each("end",function(){var Q=M.select(this);t.setSliceCursor(Q,i,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(Q){var Z=t.isHeader(Q,R);Q._x0=g(Q.x0),Q._x1=g(Q.x1),Q._y0=v(Q.y0),Q._y1=v(Q.y1),Q._hoverX=g(Q.x1-R.marker.pad.r),Q._hoverY=v(N?Q.y1-R.marker.pad.b/2:Q.y0+R.marker.pad.t/2);var re=M.select(this),oe=k.ensureSingle(re,"path","surface",function(be){be.style("pointer-events",C?"none":"all")});f?oe.transition().attrTween("d",function(be){var ve=w(be,r,X(),[x,d]);return function(ge){return y(ve(ge))}}):oe.attr("d",y),re.call(a,u,i,l,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,i,{isTransitioning:i._transitioning}),oe.call(h,Q,R,i,{hovered:!1}),Q.x0===Q.x1||Q.y0===Q.y1?Q._text="":Q._text=Z?W?"":t.getPtLabel(Q)||"":n(Q,u,R,l,P)||"";var ae=k.ensureSingle(re,"g","slicetext"),ce=k.ensureSingle(ae,"text","",function(be){be.attr("data-notex",1)}),he=k.ensureUniformFontSize(i,t.determineTextFont(R,Q,P.font)),pe=Q._text||" ",xe=Z&&pe.indexOf("<br>")===-1;ce.text(pe).classed("slicetext",!0).attr("text-anchor",D?"end":j||xe?"start":"middle").call(o.font,he).call(T.convertToTspans,i),Q.textBB=o.bBox(ce.node()),Q.transform=m(Q,{fontSize:he.size,isHeader:Z}),Q.transform.fontSize=he.size,f?ce.transition().attrTween("transform",function(be){var ve=E(be,r,X(),[x,d]);return function(ge){return _(ve(ge))}}):ce.attr("transform",_(Q))}),te}},83024:function(ee){ee.exports=function z(e,M,k){var o;k.swapXY&&(o=e.x0,e.x0=e.y0,e.y0=o,o=e.x1,e.x1=e.y1,e.y1=o),k.flipX&&(o=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-o),k.flipY&&(o=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-o);var T=e.children;if(T)for(var b=0;b<T.length;b++)z(T[b],M,k)}},31991:function(ee,z,e){ee.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(ee){ee.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(ee,z,e){var M=e(3400),k=e(45392);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},13832:function(ee,z,e){var M=e(74148),k=e(83024);ee.exports=function(o,T,b){var h,s=b.flipX,t=b.flipY,a=b.packing==="dice-slice",n=b.pad[t?"bottom":"top"],r=b.pad[s?"right":"left"],i=b.pad[s?"left":"right"],l=b.pad[t?"top":"bottom"];a&&(h=r,r=n,n=h,h=i,i=l,l=h);var u=M.treemap().tile(function(p,c){switch(p){case"squarify":return M.treemapSquarify.ratio(c);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(r).paddingRight(i).paddingTop(n).paddingBottom(l).size(a?[T[1],T[0]]:T)(o);return(a||s||t)&&k(u,T,{swapXY:a,flipX:s,flipY:t}),u}},53264:function(ee,z,e){var M=e(95808),k=e(76477);ee.exports=function(o,T,b,h){return M(o,T,b,h,{type:"treemap",drawDescendants:k})}},52960:function(ee,z,e){var M=e(33428),k=e(67756).qy,o=e(78176),T=e(3400),b=e(78048).TEXTPAD,h=e(98184).toMoveInsideBar,s=e(82744).recordMinTextSize,t=e(32984),a=e(27336);function n(r){return o.isHierarchyRoot(r)?"":o.getPtId(r)}ee.exports=function(r,i,l,u,p){var c=r._fullLayout,x=i[0],d=x.trace,g=d.type==="icicle",v=x.hierarchy,y=o.findEntryWithLevel(v,d.level),m=M.select(l),_=m.selectAll("g.pathbar"),f=m.selectAll("g.slice");if(!y)return _.remove(),void f.remove();var S=o.isHierarchyRoot(y),w=!c.uniformtext.mode&&o.hasTransition(u),E=o.getMaxDepth(d),O=c._size,C=d.domain,P=O.w*(C.x[1]-C.x[0]),R=O.h*(C.y[1]-C.y[0]),j=P,D=d.pathbar.thickness,N=d.marker.line.width+t.gapWithPathbar,W=d.pathbar.visible?d.pathbar.side.indexOf("bottom")>-1?R+N:-(D+N):0,F={x0:j,x1:j,y0:W,y1:W+D},V=function(me,Me,ze){var Pe=d.tiling.pad,Ne=function(rt){return rt-Pe<=Me.x0},Ve=function(rt){return rt+Pe>=Me.x1},Ye=function(rt){return rt-Pe<=Me.y0},at=function(rt){return rt+Pe>=Me.y1};return me.x0===Me.x0&&me.x1===Me.x1&&me.y0===Me.y0&&me.y1===Me.y1?{x0:me.x0,x1:me.x1,y0:me.y0,y1:me.y1}:{x0:Ne(me.x0-Pe)?0:Ve(me.x0-Pe)?ze[0]:me.x0,x1:Ne(me.x1+Pe)?0:Ve(me.x1+Pe)?ze[0]:me.x1,y0:Ye(me.y0-Pe)?0:at(me.y0-Pe)?ze[1]:me.y0,y1:Ye(me.y1+Pe)?0:at(me.y1+Pe)?ze[1]:me.y1}},U=null,te={},J={},X=null,K=function(me,Me){return Me?te[n(me)]:J[n(me)]};x.hasMultipleRoots&&S&&E++,d._maxDepth=E,d._backgroundColor=c.paper_bgcolor,d._entryDepth=y.data.depth,d._atRootLevel=S;var Q=-P/2+O.l+O.w*(C.x[1]+C.x[0])/2,Z=-R/2+O.t+O.h*(1-(C.y[1]+C.y[0])/2),re=function(me){return Q+me},oe=function(me){return Z+me},ae=oe(0),ce=re(0),he=function(me){return ce+me},pe=function(me){return ae+me};function xe(me,Me){return me+","+Me}var be=he(0),ve=function(me){me.x=Math.max(be,me.x)},ge=d.pathbar.edgeshape,we=d[g?"tiling":"marker"].pad,_e=function(me){return d.textposition.indexOf(me)!==-1},se=_e("top"),ie=_e("left"),fe=_e("right"),Ee=_e("bottom"),Te=function(me,Me){var ze=me.x0,Pe=me.x1,Ne=me.y0,Ve=me.y1,Ye=me.textBB,at=se||Me.isHeader&&!Ee?"start":Ee?"end":"middle",rt=_e("right"),dt=_e("left")||Me.onPathbar?-1:rt?1:0;if(Me.isHeader){if((ze+=(g?we:we.l)-b)>=(Pe-=(g?we:we.r)-b)){var vt=(ze+Pe)/2;ze=vt,Pe=vt}var ht;Ee?Ne<(ht=Ve-(g?we:we.b))&&ht<Ve&&(Ne=ht):Ne<(ht=Ne+(g?we:we.t))&&ht<Ve&&(Ve=ht)}var et=h(ze,Pe,Ne,Ve,Ye,{isHorizontal:!1,constrained:!0,angle:0,anchor:at,leftToRight:dt});return et.fontSize=Me.fontSize,et.targetX=re(et.targetX),et.targetY=oe(et.targetY),isNaN(et.targetX)||isNaN(et.targetY)?{}:(ze!==Pe&&Ne!==Ve&&s(d.type,et,c),{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY})},Ae=function(me,Me){for(var ze,Pe=0,Ne=me;!ze&&Pe<E;)Pe++,(Ne=Ne.parent)?ze=K(Ne,Me):Pe=E;return ze||{}},Se=function(me,Me,ze,Pe,Ne){var Ve,Ye=K(me,Me);if(Ye)Ve=Ye;else if(Me)Ve=F;else if(U)if(me.parent){var at=X||ze;at&&!Me?Ve=V(me,at,Pe):(Ve={},T.extendFlat(Ve,Ae(me,Me)))}else Ve=T.extendFlat({},me),g&&(Ne.orientation==="h"?Ne.flipX?Ve.x0=me.x1:Ve.x1=0:Ne.flipY?Ve.y0=me.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:me.x0,x1:me.x1,y0:me.y0,y1:me.y1})},Oe=function(me,Me,ze,Pe){var Ne=K(me,Me),Ve={},Ye=function(rt,dt,vt,ht){if(dt)return te[n(v)]||F;var et=J[d.level]||vt;return function($e){return $e.data.depth-y.data.depth<E}(rt)?V(rt,et,ht):{}}(me,Me,ze,Pe);T.extendFlat(Ve,{transform:Te({x0:Ye.x0,x1:Ye.x1,y0:Ye.y0,y1:Ye.y1,textBB:me.textBB,_text:me._text},{isHeader:o.isHeader(me,d)})}),Ne?Ve=Ne:me.parent&&T.extendFlat(Ve,Ae(me,Me));var at=me.transform;return me.x0!==me.x1&&me.y0!==me.y1&&s(d.type,at,c),k(Ve,{transform:{scale:at.scale,rotate:at.rotate,textX:at.textX,textY:at.textY,anchorX:at.anchorX,anchorY:at.anchorY,targetX:at.targetX,targetY:at.targetY}})},De=function(me,Me,ze,Pe,Ne){var Ve=Pe[0],Ye=Pe[1];w?me.exit().transition().each(function(){var at=M.select(this);at.select("path.surface").transition().attrTween("d",function(rt){var dt=function(vt,ht,et,$e){var wt,Pt=K(vt,ht);if(ht)wt=F;else{var Ot=K(y,ht);wt=Ot?V(vt,Ot,$e):{}}return k(Pt,wt)}(rt,Me,0,[Ve,Ye]);return function(vt){return Ne(dt(vt))}}),at.select("g.slicetext").attr("opacity",0)}).remove():me.exit().remove()},de=function(me){var Me=me.transform;return me.x0!==me.x1&&me.y0!==me.y1&&s(d.type,Me,c),T.getTextTransform({textX:Me.textX,textY:Me.textY,anchorX:Me.anchorX,anchorY:Me.anchorY,targetX:Me.targetX,targetY:Me.targetY,scale:Me.scale,rotate:Me.rotate})};w&&(_.each(function(me){te[n(me)]={x0:me.x0,x1:me.x1,y0:me.y0,y1:me.y1},me.transform&&(te[n(me)].transform={textX:me.transform.textX,textY:me.transform.textY,anchorX:me.transform.anchorX,anchorY:me.transform.anchorY,targetX:me.transform.targetX,targetY:me.transform.targetY,scale:me.transform.scale,rotate:me.transform.rotate})}),f.each(function(me){J[n(me)]={x0:me.x0,x1:me.x1,y0:me.y0,y1:me.y1},me.transform&&(J[n(me)].transform={textX:me.transform.textX,textY:me.transform.textY,anchorX:me.transform.anchorX,anchorY:me.transform.anchorY,targetX:me.transform.targetX,targetY:me.transform.targetY,scale:me.transform.scale,rotate:me.transform.rotate}),!U&&o.isEntry(me)&&(U=me)})),X=p(r,i,y,f,{width:P,height:R,viewX:re,viewY:oe,pathSlice:function(me){var Me=re(me.x0),ze=re(me.x1),Pe=oe(me.y0),Ne=oe(me.y1),Ve=ze-Me,Ye=Ne-Pe;if(!Ve||!Ye)return"";var at=d.marker.cornerradius||0,rt=Math.min(at,Ve/2,Ye/2);rt&&me.data&&me.data.data&&me.data.data.label&&(se&&(rt=Math.min(rt,we.t)),ie&&(rt=Math.min(rt,we.l)),fe&&(rt=Math.min(rt,we.r)),Ee&&(rt=Math.min(rt,we.b)));var dt=function(vt,ht){return rt?"a"+xe(rt,rt)+" 0 0 1 "+xe(vt,ht):""};return"M"+xe(Me,Pe+rt)+dt(rt,-rt)+"L"+xe(ze-rt,Pe)+dt(rt,rt)+"L"+xe(ze,Ne-rt)+dt(-rt,rt)+"L"+xe(Me+rt,Ne)+dt(-rt,-rt)+"Z"},toMoveInsideSlice:Te,prevEntry:U,makeUpdateSliceInterpolator:Se,makeUpdateTextInterpolator:Oe,handleSlicesExit:De,hasTransition:w,strTransform:de}),d.pathbar.visible?a(r,i,y,_,{barDifY:W,width:j,height:D,viewX:he,viewY:pe,pathSlice:function(me){var Me=he(Math.max(Math.min(me.x0,me.x0),0)),ze=he(Math.min(Math.max(me.x1,me.x1),j)),Pe=pe(me.y0),Ne=pe(me.y1),Ve=D/2,Ye={},at={};Ye.x=Me,at.x=ze,Ye.y=at.y=(Pe+Ne)/2;var rt={x:Me,y:Pe},dt={x:ze,y:Pe},vt={x:ze,y:Ne},ht={x:Me,y:Ne};return ge===">"?(rt.x-=Ve,dt.x-=Ve,vt.x-=Ve,ht.x-=Ve):ge==="/"?(vt.x-=Ve,ht.x-=Ve,Ye.x-=Ve/2,at.x-=Ve/2):ge==="\\"?(rt.x-=Ve,dt.x-=Ve,Ye.x-=Ve/2,at.x-=Ve/2):ge==="<"&&(Ye.x-=Ve,at.x-=Ve),ve(rt),ve(ht),ve(Ye),ve(dt),ve(vt),ve(at),"M"+xe(rt.x,rt.y)+"L"+xe(dt.x,dt.y)+"L"+xe(at.x,at.y)+"L"+xe(vt.x,vt.y)+"L"+xe(ht.x,ht.y)+"L"+xe(Ye.x,Ye.y)+"Z"},toMoveInsideSlice:Te,makeUpdateSliceInterpolator:Se,makeUpdateTextInterpolator:Oe,handleSlicesExit:De,hasTransition:w,strTransform:de}):_.remove()}},66192:function(ee,z,e){var M=e(33428),k=e(76308),o=e(3400),T=e(78176),b=e(82744).resizeText,h=e(60404);function s(t,a,n,r,i){var l,u,p=(i||{}).hovered,c=a.data.data,x=c.i,d=c.color,g=T.isHierarchyRoot(a),v=1;if(p)l=n._hovered.marker.line.color,u=n._hovered.marker.line.width;else if(g&&d===n.root.color)v=100,l="rgba(0,0,0,0)",u=0;else if(l=o.castOption(n,x,"marker.line.color")||k.defaultLine,u=o.castOption(n,x,"marker.line.width")||0,!n._hasColorscale&&!a.onPathbar){var y=n.marker.depthfade;if(y){var m,_=k.combine(k.addOpacity(n._backgroundColor,.75),d);if(y===!0){var f=T.getMaxDepth(n);m=isFinite(f)?T.isLeaf(a)?0:n._maxVisibleLayers-(a.data.depth-n._entryDepth):a.data.height+1}else m=a.data.depth-n._entryDepth,n._atRootLevel||m++;if(m>0)for(var S=0;S<m;S++){var w=.5*S/m;d=k.combine(k.addOpacity(_,w),d)}}}t.call(h,a,n,r,d).style("stroke-width",u).call(k.stroke,l).style("opacity",v)}ee.exports={style:function(t){var a=t._fullLayout._treemaplayer.selectAll(".trace");b(t,a,"treemap"),a.each(function(n){var r=M.select(this),i=n[0].trace;r.style("opacity",i.opacity),r.selectAll("path.surface").each(function(l){M.select(this).call(s,l,i,t,{hovered:!1})})})},styleOne:s}},13988:function(ee,z,e){var M=e(63188),k=e(92880).extendFlat,o=e(29736).axisHoverFormat;ee.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:k({},M.name,{}),orientation:k({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:k({},M.boxpoints,{}),jitter:k({},M.jitter,{}),pointpos:k({},M.pointpos,{}),width:k({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:M.zorder}},67064:function(ee,z,e){var M=e(3400),k=e(54460),o=e(62555),T=e(63800),b=e(39032).BADNUM;function h(t,a,n){var r=a.max-a.min;if(!r)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,r/1e4);var i=n.length,l=M.stdev(n,i-1,a.mean);return Math.max(function(u,p,c){return 1.059*Math.min(p,c/1.349)*Math.pow(u,-.2)}(i,l,a.q3-a.q1),r/100)}function s(t,a,n,r){var i,l=t.spanmode,u=t.span||[],p=[a.min,a.max],c=[a.min-2*r,a.max+2*r];function x(g){var v=u[g],y=n.type==="multicategory"?n.r2c(v):n.d2c(v,0,t[a.valLetter+"calendar"]);return y===b?c[g]:y}var d={type:"linear",range:i=l==="soft"?c:l==="hard"?p:[x(0),x(1)]};return k.setConvert(d),d.cleanRange(),i}ee.exports=function(t,a){var n=o(t,a);if(n[0].t.empty)return n;for(var r=t._fullLayout,i=k.getFromId(t,a[a.orientation==="h"?"xaxis":"yaxis"]),l=1/0,u=-1/0,p=0,c=0,x=0;x<n.length;x++){var d=n[x],g=d.pts.map(T.extractVal),v=d.bandwidth=h(a,d,g),y=d.span=s(a,d,i,v);if(d.min===d.max&&v===0)y=d.span=[d.min,d.max],d.density=[{v:1,t:y[0]}],d.bandwidth=v,p=Math.max(p,1);else{var m=y[1]-y[0],_=Math.ceil(m/(v/3)),f=m/_;if(!isFinite(f)||!isFinite(_))return M.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var S=T.makeKDE(d,a,g);d.density=new Array(_);for(var w=0,E=y[0];E<y[1]+f/2;w++,E+=f){var O=S(E);d.density[w]={v:O,t:E},p=Math.max(p,O)}}c=Math.max(c,g.length),l=Math.min(l,y[0]),u=Math.max(u,y[1])}var C=k.findExtremes(i,[l,u],{padded:!0});if(a._extremes[i._id]=C,a.width)n[0].t.maxKDE=p;else{var P=r._violinScaleGroupStats,R=a.scalegroup,j=P[R];j?(j.maxKDE=Math.max(j.maxKDE,p),j.maxCount=Math.max(j.maxCount,c)):P[R]={maxKDE:p,maxCount:c}}return n[0].t.labels.kde=M._(t,"kde:"),n}},14348:function(ee,z,e){var M=e(96404).setPositionOffset,k=["v","h"];ee.exports=function(o,T){for(var b=o.calcdata,h=T.xaxis,s=T.yaxis,t=0;t<k.length;t++){for(var a=k[t],n=a==="h"?s:h,r=[],i=0;i<b.length;i++){var l=b[i],u=l[0].t,p=l[0].trace;p.visible!==!0||p.type!=="violin"||u.empty||p.orientation!==a||p.xaxis!==h._id||p.yaxis!==s._id||r.push(i)}M("violin",o,r,n)}}},36240:function(ee,z,e){var M=e(3400),k=e(76308),o=e(90624),T=e(13988);ee.exports=function(b,h,s,t){function a(m,_){return M.coerce(b,h,T,m,_)}function n(m,_){return M.coerce2(b,h,T,m,_)}if(o.handleSampleDefaults(b,h,a,t),h.visible!==!1){a("bandwidth"),a("side"),a("width")||(a("scalegroup",h.name),a("scalemode"));var r,i=a("span");Array.isArray(i)&&(r="manual"),a("spanmode",r);var l=a("line.color",(b.marker||{}).color||s),u=a("line.width"),p=a("fillcolor",k.addOpacity(h.line.color,.5));o.handlePointsDefaults(b,h,a,{prefix:""});var c=n("box.width"),x=n("box.fillcolor",p),d=n("box.line.color",l),g=n("box.line.width",u);a("box.visible",!!(c||x||d||g))||(h.box={visible:!1});var v=n("meanline.color",l),y=n("meanline.width",u);a("meanline.visible",!!(v||y))||(h.meanline={visible:!1}),a("quartilemethod"),a("zorder")}}},63800:function(ee,z,e){var M=e(3400),k=function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)};z.makeKDE=function(o,T,b){var h=b.length,s=k,t=o.bandwidth,a=1/(h*t);return function(n){for(var r=0,i=0;i<h;i++)r+=s((n-b[i])/t);return a*r}},z.getPositionOnKdePath=function(o,T,b){var h,s;T.orientation==="h"?(h="y",s="x"):(h="x",s="y");var t=M.findPointOnPath(o.path,b,s,{pathLength:o.pathLength}),a=o.posCenterPx,n=t[h];return[n,T.side==="both"?2*a-n:a]},z.getKdeValue=function(o,T,b){var h=o.pts.map(z.extractVal);return z.makeKDE(o,T,h)(b)/o.posDensityScale},z.extractVal=function(o){return o.v}},78e3:function(ee,z,e){var M=e(76308),k=e(3400),o=e(54460),T=e(27576),b=e(63800);ee.exports=function(h,s,t,a,n){n||(n={});var r,i,l=n.hoverLayer,u=h.cd,p=u[0].trace,c=p.hoveron,x=c.indexOf("violins")!==-1,d=c.indexOf("kde")!==-1,g=[];if(x||d){var v=T.hoverOnBoxes(h,s,t,a);if(d&&v.length>0){var y,m,_,f,S,w=h.xa,E=h.ya;p.orientation==="h"?(S=s,y="y",_=E,m="x",f=w):(S=t,y="x",_=w,m="y",f=E);var O=u[h.index];if(S>=O.span[0]&&S<=O.span[1]){var C=k.extendFlat({},h),P=f.c2p(S,!0),R=b.getKdeValue(O,p,S),j=b.getPositionOnKdePath(O,p,P),D=_._offset,N=_._length;C[y+"0"]=j[0],C[y+"1"]=j[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+o.hoverLabelText(f,S,p[m+"hoverformat"])+", "+u[0].t.labels.kde+" "+R.toFixed(3);for(var W=0,F=0;F<v.length;F++)if(v[F].attr==="med"){W=F;break}C.spikeDistance=v[W].spikeDistance;var V=y+"Spike";C[V]=v[W][V],v[W].spikeDistance=void 0,v[W][V]=void 0,C.hovertemplate=!1,g.push(C),(i={})[y+"1"]=k.constrain(D+j[0],D,D+N),i[y+"2"]=k.constrain(D+j[1],D,D+N),i[m+"1"]=i[m+"2"]=f._offset+P}}x&&(g=g.concat(v))}c.indexOf("points")!==-1&&(r=T.hoverOnPoints(h,s,t));var U=l.selectAll(".violinline-"+p.uid).data(i?[0]:[]);return U.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),U.exit().remove(),U.attr(i).call(M.stroke,h.color),a==="closest"?r?[r]:g:(r&&g.push(r),g)}},22869:function(ee,z,e){ee.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(ee,z,e){var M=e(16560),k=e(3400).extendFlat;ee.exports={violinmode:k({},M.boxmode,{}),violingap:k({},M.boxgap,{}),violingroupgap:k({},M.boxgroupgap,{})}},8939:function(ee,z,e){var M=e(3400),k=e(98228),o=e(68832);ee.exports=function(T,b,h){o._supply(T,b,h,function(s,t){return M.coerce(T,b,k,s,t)},"violin")}},5140:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(18728),b=e(52340),h=e(63800);ee.exports=function(s,t,a,n){var r=s._context.staticPlot,i=s._fullLayout,l=t.xaxis,u=t.yaxis;function p(c,x){var d=b(c,{xaxis:l,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(d[0],1)}k.makeTraceGroups(n,a,"trace violins").each(function(c){var x=M.select(this),d=c[0],g=d.t,v=d.trace;if(v.visible!==!0||g.empty)x.remove();else{var y=g.bPos,m=g.bdPos,_=t[g.valLetter+"axis"],f=t[g.posLetter+"axis"],S=v.side==="both",w=S||v.side==="positive",E=S||v.side==="negative",O=x.selectAll("path.violin").data(k.identity);O.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","violin"),O.exit().remove(),O.each(function(F){var V,U,te,J,X,K,Q,Z,re=M.select(this),oe=F.density,ae=oe.length,ce=f.c2l(F.pos+y,!0),he=f.l2p(ce);if(v.width)V=g.maxKDE/m;else{var pe=i._violinScaleGroupStats[v.scalegroup];V=v.scalemode==="count"?pe.maxKDE/m*(pe.maxCount/F.pts.length):pe.maxKDE/m}if(w){for(Q=new Array(ae),X=0;X<ae;X++)(Z=Q[X]={})[g.posLetter]=ce+oe[X].v/V,Z[g.valLetter]=_.c2l(oe[X].t,!0);U=p(Q,v)}if(E){for(Q=new Array(ae),K=0,X=ae-1;K<ae;K++,X--)(Z=Q[K]={})[g.posLetter]=ce-oe[X].v/V,Z[g.valLetter]=_.c2l(oe[X].t,!0);te=p(Q,v)}if(S)J=U+"L"+te.substr(1)+"Z";else{var xe=[he,_.c2p(oe[0].t)],be=[he,_.c2p(oe[ae-1].t)];v.orientation==="h"&&(xe.reverse(),be.reverse()),J=w?"M"+xe+"L"+U.substr(1)+"L"+be:"M"+be+"L"+te.substr(1)+"L"+xe}re.attr("d",J),F.posCenterPx=he,F.posDensityScale=V*m,F.path=re.node(),F.pathLength=F.path.getTotalLength()/(S?2:1)});var C,P,R,j=v.box,D=j.width,N=(j.line||{}).width;S?(C=m*D,P=0):w?(C=[0,m*D/2],P=N*{x:1,y:-1}[g.posLetter]):(C=[m*D/2,0],P=N*{x:-1,y:1}[g.posLetter]),T.plotBoxAndWhiskers(x,{pos:f,val:_},v,{bPos:y,bdPos:C,bPosPxOffset:P}),T.plotBoxMean(x,{pos:f,val:_},v,{bPos:y,bdPos:C,bPosPxOffset:P}),!v.box.visible&&v.meanline.visible&&(R=k.identity);var W=x.selectAll("path.meanline").data(R||[]);W.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",r?"none":"non-scaling-stroke"),W.exit().remove(),W.each(function(F){var V=_.c2p(F.mean,!0),U=h.getPositionOnKdePath(F,v,V);M.select(this).attr("d",v.orientation==="h"?"M"+V+","+U[0]+"V"+U[1]:"M"+U[0]+","+V+"H"+U[1])}),T.plotPoints(x,{x:l,y:u},v,g)}})}},95908:function(ee,z,e){var M=e(33428),k=e(76308),o=e(49224).stylePoints;ee.exports=function(T){var b=M.select(T).selectAll("g.trace.violins");b.style("opacity",function(h){return h[0].trace.opacity}),b.each(function(h){var s=h[0].trace,t=M.select(this),a=s.box||{},n=a.line||{},r=s.meanline||{},i=r.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",n.width+"px").call(k.stroke,n.color).call(k.fill,a.fillcolor);var l={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};t.selectAll("path.mean").style(l).call(k.stroke,r.color),t.selectAll("path.meanline").style(l).call(k.stroke,r.color),o(t,s,T)})}},58168:function(ee,z,e){var M=e(49084),k=e(50048),o=e(16716),T=e(45464),b=e(92880).extendFlat,h=e(67824).overrideAll,s=ee.exports=h(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:o.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},91976:function(ee,z,e){var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,h=e(52094),s=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function a(r,i,l){this.scene=r,this.uid=l,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var n=a.prototype;n.handlePick=function(r){if(r.object===this.mesh){var i=r.data.index,l=this.data._meshX[i],u=this.data._meshY[i],p=this.data._meshZ[i],c=this.data._Ys.length,x=this.data._Zs.length,d=s(l,this.data._Xs).id,g=s(u,this.data._Ys).id,v=s(p,this.data._Zs).id,y=r.index=v+x*g+x*c*d;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var m=this.data.hovertext||this.data.text;return o(m)&&m[y]!==void 0?r.textLabel=m[y]:m&&(r.textLabel=m),!0}},n.update=function(r){var i=this.scene,l=i.fullSceneLayout;function u(x,d,g,v){return d.map(function(y){return x.d2l(y,0,v)*g})}this.data=t(r);var p={positions:h(u(l.xaxis,r._meshX,i.dataScale[0],r.xcalendar),u(l.yaxis,r._meshY,i.dataScale[1],r.ycalendar),u(l.zaxis,r._meshZ,i.dataScale[2],r.zcalendar)),cells:h(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:T(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},c=b(r);p.vertexIntensity=r._meshIntensity,p.vertexIntensityBounds=[c.min,c.max],p.colormap=k(r),this.mesh.update(p)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(r,i){var l=r.glplot.gl,u=M({gl:l}),p=new a(r,u,i.uid);return u._trace=p,p.update(i),r.glplot.add(u),p}},12448:function(ee,z,e){var M=e(3400),k=e(58168),o=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;ee.exports=function(b,h,s,t){function a(n,r){return M.coerce(b,h,k,n,r)}o(b,h,s,t,a),T(b,h,t,a)}},67776:function(ee,z,e){ee.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(ee,z,e){var M=e(20832),k=e(52904).line,o=e(45464),T=e(29736).axisHoverFormat,b=e(21776).Ks,h=e(21776).Gw,s=e(10213),t=e(92880).extendFlat,a=e(76308);function n(r){return{marker:{color:t({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ee.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:t({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:n(),decreasing:n(),totals:n(),connector:{line:{color:t({},k.color,{dflt:a.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,zorder:M.zorder}},73540:function(ee,z,e){var M=e(54460),k=e(1220),o=e(3400).mergeArray,T=e(4500),b=e(39032).BADNUM;function h(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}ee.exports=function(t,a){var n,r,i,l,u,p,c=M.getFromId(t,a.xaxis||"x"),x=M.getFromId(t,a.yaxis||"y");a.orientation==="h"?(n=c.makeCalcdata(a,"x"),i=x.makeCalcdata(a,"y"),l=k(a,x,"y",i),u=!!a.yperiodalignment,p="y"):(n=x.makeCalcdata(a,"y"),i=c.makeCalcdata(a,"x"),l=k(a,c,"x",i),u=!!a.xperiodalignment,p="x"),r=l.vals;for(var d,g=Math.min(r.length,n.length),v=new Array(g),y=0,m=!1,_=0;_<g;_++){var f=n[_]||0,S=!1;(n[_]!==b||s(a.measure[_])||h(a.measure[_]))&&_+1<g&&(n[_+1]!==b||s(a.measure[_+1])||h(a.measure[_+1]))&&(S=!0);var w=v[_]={i:_,p:r[_],s:f,rawS:f,cNext:S};h(a.measure[_])?(y=w.s,w.isSum=!0,w.dir="totals",w.s=y):s(a.measure[_])?(w.isSum=!0,w.dir="totals",w.s=y):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",d=w.s,w.s=y+d,y+=d),w.dir==="totals"&&(m=!0),u&&(v[_].orig_p=i[_],v[_][p+"End"]=l.ends[_],v[_][p+"Start"]=l.starts[_]),a.ids&&(w.id=String(a.ids[_])),w.v=(a.base||0)+y}return v.length&&(v[0].hasTotals=m),o(a.text,v,"tx"),o(a.hovertext,v,"htx"),T(v,a),v}},10213:function(ee){ee.exports={eventDataKeys:["initial","delta","final"]}},50152:function(ee,z,e){var M=e(96376).setGroupPositions;ee.exports=function(k,o){var T,b,h=k._fullLayout,s=k._fullData,t=k.calcdata,a=o.xaxis,n=o.yaxis,r=[],i=[],l=[];for(b=0;b<s.length;b++){var u=s[b];u.visible===!0&&u.xaxis===a._id&&u.yaxis===n._id&&u.type==="waterfall"&&(T=t[b],u.orientation==="h"?l.push(T):i.push(T),r.push(T))}var p={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};for(M(k,a,n,i,p),M(k,n,a,l,p),b=0;b<r.length;b++){T=r[b];for(var c=0;c<T.length;c++){var x=T[c];x.isSum===!1&&(x.s0+=c===0?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},24224:function(ee,z,e){var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),h=e(65776),s=e(76308),t=e(48164),a=t.INCREASING.COLOR,n=t.DECREASING.COLOR;function r(i,l,u){i(l+".marker.color",u),i(l+".marker.line.color",s.defaultLine),i(l+".marker.line.width")}ee.exports={supplyDefaults:function(i,l,u,p){function c(d,g){return M.coerce(i,l,h,d,g)}if(T(i,l,p,c)){b(i,l,p,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",l.x&&!l.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");o(i,l,p,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(c("texttemplate"),l.texttemplate||c("textinfo")),r(c,"increasing",a),r(c,"decreasing",n),r(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))),c("zorder")}else l.visible=!1},crossTraceDefaults:function(i,l){var u,p;function c(d){return M.coerce(p._input,p,h,d)}if(l.waterfallmode==="group")for(var x=0;x<i.length;x++)u=(p=i[x])._input,k(u,p,l,c)}}},53256:function(ee){ee.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"initial"in e&&(z.initial=e.initial),"delta"in e&&(z.delta=e.delta),"final"in e&&(z.final=e.final),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},94196:function(ee,z,e){var M=e(54460).hoverLabelText,k=e(76308).opacity,o=e(63400).hoverOnBars,T=e(48164),b=T.INCREASING.SYMBOL,h=T.DECREASING.SYMBOL;ee.exports=function(s,t,a,n,r){var i=o(s,t,a,n,r);if(i){var l=i.cd,u=l[0].trace,p=u.orientation==="h",c=p?"x":"y",x=p?s.xa:s.ya,d=l[i.index],g=d.isSum?d.b+d.s:d.rawS;i.initial=d.b+d.s-g,i.delta=g,i.final=i.initial+i.delta;var v=w(Math.abs(i.delta));i.deltaLabel=g<0?"("+v+")":v,i.finalLabel=w(i.final),i.initialLabel=w(i.initial);var y=d.hi||u.hoverinfo,m=[];if(y&&y!=="none"&&y!=="skip"){var _=y==="all",f=y.split("+"),S=function(E){return _||f.indexOf(E)!==-1};d.isSum||(!S("final")||S(p?"x":"y")||m.push(i.finalLabel),S("delta")&&(g<0?m.push(i.deltaLabel+" "+h):m.push(i.deltaLabel+" "+b)),S("initial")&&m.push("Initial: "+i.initialLabel))}return m.length&&(i.extraText=m.join("<br>")),i.color=function(E,O){var C=E[O.dir].marker,P=C.color,R=C.line.color,j=C.line.width;return k(P)?P:k(R)&&j?R:void 0}(u,d),[i]}function w(E){return M(x,E,u[c+"hoverformat"])}}},95952:function(ee,z,e){ee.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(ee){ee.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(ee,z,e){var M=e(3400),k=e(91352);ee.exports=function(o,T,b){var h=!1;function s(n,r){return M.coerce(o,T,k,n,r)}for(var t=0;t<b.length;t++){var a=b[t];if(a.visible&&a.type==="waterfall"){h=!0;break}}h&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},64488:function(ee,z,e){var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),h=e(82744).clearMinTextSize;ee.exports=function(s,t,a,n){var r=s._fullLayout;h("waterfall",r),b.plot(s,t,a,n,{mode:r.waterfallmode,norm:r.waterfallmode,gap:r.waterfallgap,groupgap:r.waterfallgroupgap}),function(i,l,u,p){var c=l.xaxis,x=l.yaxis;k.makeTraceGroups(p,u,"trace bars").each(function(d){var g=M.select(this),v=d[0].trace,y=k.ensureSingle(g,"g","lines");if(v.connector&&v.connector.visible){var m=v.orientation==="h",_=v.connector.mode,f=y.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var O=function(j,D,N,W){var F=[],V=[],U=W?D:N,te=W?N:D;return F[0]=U.c2p(j.s0,!0),V[0]=te.c2p(j.p0,!0),F[1]=U.c2p(j.s1,!0),V[1]=te.c2p(j.p1,!0),F[2]=U.c2p(j.nextS0,!0),V[2]=te.c2p(j.nextP0,!0),W?[F,V]:[V,F]}(w,c,x,m),C=O[0],P=O[1],R="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&(_==="spanning"&&!w.isSum&&E>0&&(R+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),_!=="between"&&(w.isSum||E<S-1)&&(R+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(R+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),R===""&&(R="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",R).call(o.setClipUrl,l.layerClipId,i)}})}else y.remove()})}(s,t,a,n)}},12252:function(ee,z,e){var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),h=e(82744).resizeText,s=b.styleTextPoints;ee.exports={style:function(t,a,n){var r=n||M.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");h(t,r,"waterfall"),r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var l=M.select(this),u=i[0].trace;l.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u[p.dir].marker;M.select(this).call(o.fill,c.color).call(o.stroke,c.line.color).call(k.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!p.selected?T:1)}}),s(l,u,t),l.selectAll(".lines").each(function(){var p=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},84224:function(ee,z,e){var M=e(54460),k=e(3400),o=e(73060),T=e(60468).W,b=e(39032).BADNUM;z.moduleType="transform",z.name="aggregate";var h=z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=h.aggregations;function t(i,l,u,p){if(p.enabled){for(var c=p.target,x=k.nestedProperty(l,c),d=x.get(),g=function(m,_){var f=m.func,S=_.d2c,w=_.c2d;switch(f){case"count":return a;case"first":return n;case"last":return r;case"sum":return function(E,O){for(var C=0,P=0;P<O.length;P++){var R=S(E[O[P]]);R!==b&&(C+=R)}return w(C)};case"avg":return function(E,O){for(var C=0,P=0,R=0;R<O.length;R++){var j=S(E[O[R]]);j!==b&&(C+=j,P++)}return P?w(C/P):b};case"min":return function(E,O){for(var C=1/0,P=0;P<O.length;P++){var R=S(E[O[P]]);R!==b&&(C=Math.min(C,R))}return C===1/0?b:w(C)};case"max":return function(E,O){for(var C=-1/0,P=0;P<O.length;P++){var R=S(E[O[P]]);R!==b&&(C=Math.max(C,R))}return C===-1/0?b:w(C)};case"range":return function(E,O){for(var C=1/0,P=-1/0,R=0;R<O.length;R++){var j=S(E[O[R]]);j!==b&&(C=Math.min(C,j),P=Math.max(P,j))}return P===-1/0||C===1/0?b:w(P-C)};case"change":return function(E,O){var C=S(E[O[0]]),P=S(E[O[O.length-1]]);return C===b||P===b?b:w(P-C)};case"median":return function(E,O){for(var C=[],P=0;P<O.length;P++){var R=S(E[O[P]]);R!==b&&C.push(R)}if(!C.length)return b;C.sort(k.sorterAsc);var j=(C.length-1)/2;return w((C[Math.floor(j)]+C[Math.ceil(j)])/2)};case"mode":return function(E,O){for(var C={},P=0,R=b,j=0;j<O.length;j++){var D=S(E[O[j]]);if(D!==b){var N=C[D]=(C[D]||0)+1;N>P&&(P=N,R=D)}}return P?w(R):b};case"rms":return function(E,O){for(var C=0,P=0,R=0;R<O.length;R++){var j=S(E[O[R]]);j!==b&&(C+=j*j,P++)}return P?w(Math.sqrt(C/P)):b};case"stddev":return function(E,O){var C,P=0,R=0,j=1,D=b;for(C=0;C<O.length&&D===b;C++)D=S(E[O[C]]);if(D===b)return b;for(;C<O.length;C++){var N=S(E[O[C]]);if(N!==b){var W=N-D;P+=W,R+=W*W,j++}}var F=m.funcmode==="sample"?j-1:j;return F?Math.sqrt((R-P*P/j)/F):0}}}(p,M.getDataConversions(i,l,c,d)),v=new Array(u.length),y=0;y<u.length;y++)v[y]=g(d,u[y]);x.set(v),p.func==="count"&&k.pushUnique(l._arrayAttrs,c)}}function a(i,l){return l.length}function n(i,l){return i[l[0]]}function r(i,l){return i[l[l.length-1]]}z.supplyDefaults=function(i,l){var u,p={};function c(w,E){return k.coerce(i,p,h,w,E)}if(!c("enabled"))return p;var x=o.findArrayAttributes(l),d={};for(u=0;u<x.length;u++)d[x[u]]=1;var g=c("groups");if(!Array.isArray(g)){if(!d[g])return p.enabled=!1,p;d[g]=0}var v,y=i.aggregations||[],m=p.aggregations=new Array(y.length);function _(w,E){return k.coerce(y[u],v,s,w,E)}for(u=0;u<y.length;u++){v={_index:u};var f=_("target"),S=_("func");_("enabled")&&f&&(d[f]||S==="count"&&d[f]===void 0)?(S==="stddev"&&_("funcmode"),d[f]=0,m[u]=v):m[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)d[x[u]]&&m.push({target:x[u],func:s.func.dflt,enabled:!0,_index:-1});return p},z.calcTransform=function(i,l,u){if(u.enabled){var p=u.groups,c=k.getTargetArray(l,{target:p});if(c){var x,d,g,v,y={},m={},_=[],f=T(l.transforms,u),S=c.length;for(l._length&&(S=Math.min(S,l._length)),x=0;x<S;x++)(g=y[d=c[x]])===void 0?(y[d]=_.length,v=[x],_.push(v),m[y[d]]=f(x)):(_[g].push(x),m[y[d]]=(m[y[d]]||[]).concat(f(x)));u._indexToPoints=m;var w=u.aggregations;for(x=0;x<w.length;x++)t(i,l,_,w[x]);typeof p=="string"&&t(i,l,_,{target:p,func:"first",enabled:!0}),l._length=_.length}}}},76744:function(ee,z,e){var M=e(3400),k=e(24040),o=e(54460),T=e(60468).W,b=e(69104),h=b.COMPARISON_OPS,s=b.INTERVAL_OPS,t=b.SET_OPS;z.moduleType="transform",z.name="filter",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(h).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},z.supplyDefaults=function(a){var n={};function r(u,p){return M.coerce(a,n,z.attributes,u,p)}if(r("enabled")){var i=r("target");if(M.isArrayOrTypedArray(i)&&i.length===0)return n.enabled=!1,n;r("preservegaps"),r("operation"),r("value");var l=k.getComponentMethod("calendars","handleDefaults");l(a,n,"valuecalendar",null),l(a,n,"targetcalendar",null)}return n},z.calcTransform=function(a,n,r){if(r.enabled){var i=M.getTargetArray(n,r);if(i){var l=r.target,u=i.length;n._length&&(u=Math.min(u,n._length));var p=r.targetcalendar,c=n._arrayAttrs,x=r.preservegaps;if(typeof l=="string"){var d=M.nestedProperty(n,l+"calendar").get();d&&(p=d)}var g,v,y=function(O,C,P){var R=O.operation,j=O.value,D=M.isArrayOrTypedArray(j);function N(U){return U.indexOf(R)!==-1}var W,F=function(U){return C(U,0,O.valuecalendar)},V=function(U){return C(U,0,P)};switch(N(h)?W=F(D?j[0]:j):N(s)?W=D?[F(j[0]),F(j[1])]:[F(j),F(j)]:N(t)&&(W=D?j.map(F):[F(j)]),R){case"=":return function(U){return V(U)===W};case"!=":return function(U){return V(U)!==W};case"<":return function(U){return V(U)<W};case"<=":return function(U){return V(U)<=W};case">":return function(U){return V(U)>W};case">=":return function(U){return V(U)>=W};case"[]":return function(U){var te=V(U);return te>=W[0]&&te<=W[1]};case"()":return function(U){var te=V(U);return te>W[0]&&te<W[1]};case"[)":return function(U){var te=V(U);return te>=W[0]&&te<W[1]};case"(]":return function(U){var te=V(U);return te>W[0]&&te<=W[1]};case"][":return function(U){var te=V(U);return te<=W[0]||te>=W[1]};case")(":return function(U){var te=V(U);return te<W[0]||te>W[1]};case"](":return function(U){var te=V(U);return te<=W[0]||te>W[1]};case")[":return function(U){var te=V(U);return te<W[0]||te>=W[1]};case"{}":return function(U){return W.indexOf(V(U))!==-1};case"}{":return function(U){return W.indexOf(V(U))===-1}}}(r,o.getDataToCoordFunc(a,n,l,i),p),m={},_={},f=0;x?(g=function(O){m[O.astr]=M.extendDeep([],O.get()),O.set(new Array(u))},v=function(O,C){var P=m[O.astr][C];O.get()[C]=P}):(g=function(O){m[O.astr]=M.extendDeep([],O.get()),O.set([])},v=function(O,C){var P=m[O.astr][C];O.get().push(P)}),E(g);for(var S=T(n.transforms,r),w=0;w<u;w++)y(i[w])?(E(v,w),_[f++]=S(w)):x&&f++;r._indexToPoints=_,n._length=f}}function E(O,C){for(var P=0;P<c.length;P++)O(M.nestedProperty(n,c[P]),C)}}},32028:function(ee,z,e){var M=e(3400),k=e(73060),o=e(7316),T=e(60468).W;function b(h,s){var t,a,n,r,i,l,u,p,c,x,d=s.transform,g=s.transformIndex,v=h.transforms[g].groups,y=T(h.transforms,d);if(!M.isArrayOrTypedArray(v)||v.length===0)return[h];var m=M.filterUnique(v),_=new Array(m.length),f=v.length,S=k.findArrayAttributes(h),w=d.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;d.styles&&(x=M.keyedContainer(d,"styles","target","value.name"));var O={},C={};for(t=0;t<m.length;t++){O[l=m[t]]=t,C[l]=0,(u=_[t]=M.extendDeepNoArrays({},h))._group=l,u.transforms[g]._indexToPoints={};var P=null;for(x&&(P=x.get(l)),u.name=P||P===""?P:M.templateString(d.nameformat,{trace:h.name,group:l}),p=u.transforms,u.transforms=[],a=0;a<p.length;a++)u.transforms[a]=M.extendDeepNoArrays({},p[a]);for(a=0;a<S.length;a++)M.nestedProperty(u,S[a]).set([])}for(n=0;n<S.length;n++){for(r=S[n],a=0,c=[];a<m.length;a++)c[a]=M.nestedProperty(_[a],r).get();for(i=M.nestedProperty(h,r).get(),a=0;a<f;a++)c[O[v[a]]].push(i[a])}for(a=0;a<f;a++)(u=_[O[v[a]]]).transforms[g]._indexToPoints[C[v[a]]]=y(a),C[v[a]]++;for(t=0;t<m.length;t++)l=m[t],u=_[t],o.clearExpandedTraceDefaultColors(u),u=M.extendDeepNoArrays(u,E[l]||{});return _}z.moduleType="transform",z.name="groupby",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},z.supplyDefaults=function(h,s,t){var a,n={};function r(c,x){return M.coerce(h,n,z.attributes,c,x)}if(!r("enabled"))return n;r("groups"),r("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var i=h.styles,l=n.styles=[];if(i)for(a=0;a<i.length;a++){var u=l[a]={};M.coerce(i[a],l[a],z.attributes.styles,"target");var p=M.coerce(i[a],l[a],z.attributes.styles,"value");M.isPlainObject(p)?u.value=M.extendDeep({},p):p&&delete u.value}return n},z.transform=function(h,s){var t,a,n,r=[];for(a=0;a<h.length;a++)for(t=b(h[a],s),n=0;n<t.length;n++)r.push(t[n]);return r}},60468:function(ee,z){z.W=function(e,M){for(var k,o,T=0;T<e.length&&(k=e[T])!==M;T++)k._indexToPoints&&k.enabled!==!1&&(o=k._indexToPoints);var b=o?function(h){return o[h]}:function(h){return[h]};return b}},76272:function(ee,z,e){var M=e(3400),k=e(54460),o=e(60468).W,T=e(39032).BADNUM;z.moduleType="transform",z.name="sort",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},z.supplyDefaults=function(b){var h={};function s(t,a){return M.coerce(b,h,z.attributes,t,a)}return s("enabled")&&(s("target"),s("order")),h},z.calcTransform=function(b,h,s){if(s.enabled){var t=M.getTargetArray(h,s);if(t){var a=s.target,n=t.length;h._length&&(n=Math.min(n,h._length));var r,i,l=h._arrayAttrs,u=function(v,y,m,_){var f,S=new Array(_),w=new Array(_);for(f=0;f<_;f++)S[f]={v:y[f],i:f};for(S.sort(function(E,O){switch(E.order){case"ascending":return function(C,P){var R=O(C.v),j=O(P.v);return R===T?1:j===T?-1:R-j};case"descending":return function(C,P){var R=O(C.v),j=O(P.v);return R===T?1:j===T?-1:j-R}}}(v,m)),f=0;f<_;f++)w[f]=S[f].i;return w}(s,t,k.getDataToCoordFunc(b,h,a,t),n),p=o(h.transforms,s),c={};for(r=0;r<l.length;r++){var x=M.nestedProperty(h,l[r]),d=x.get(),g=new Array(n);for(i=0;i<n;i++)g[i]=d[u[i]];x.set(g)}for(i=0;i<n;i++)c[i]=p(u[i]);s._indexToPoints=c,h._length=n}}}},25788:function(ee,z){z.version="2.32.0"},67792:function(ee,z,e){var M=e(4168);(function(){var k={1964:function(h,s,t){h.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(h,s,t){function a(de,me){for(var Me=0;Me<me.length;Me++){var ze=me[Me];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(de,n(ze.key),ze)}}function n(de){var me=function(Me,ze){if(u(Me)!="object"||!Me)return Me;var Pe=Me[Symbol.toPrimitive];if(Pe!==void 0){var Ne=Pe.call(Me,"string");if(u(Ne)!="object")return Ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Me)}(de);return u(me)=="symbol"?me:me+""}function r(){try{var de=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!de})()}function i(de){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(me){return me.__proto__||Object.getPrototypeOf(me)},i(de)}function l(de,me){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Me,ze){return Me.__proto__=ze,Me},l(de,me)}function u(de){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me},u(de)}var p=t(7507),c=t(3778),x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.hp=v,s.IS=50;var d=2147483647;function g(de){if(de>d)throw new RangeError('The value "'+de+'" is invalid for option "size"');var me=new Uint8Array(de);return Object.setPrototypeOf(me,v.prototype),me}function v(de,me,Me){if(typeof de=="number"){if(typeof me=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(de)}return y(de,me,Me)}function y(de,me,Me){if(typeof de=="string")return function(Ne,Ve){if(typeof Ve=="string"&&Ve!==""||(Ve="utf8"),!v.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);var Ye=0|E(Ne,Ve),at=g(Ye),rt=at.write(Ne,Ve);return rt!==Ye&&(at=at.slice(0,rt)),at}(de,me);if(ArrayBuffer.isView(de))return function(Ne){if(Te(Ne,Uint8Array)){var Ve=new Uint8Array(Ne);return S(Ve.buffer,Ve.byteOffset,Ve.byteLength)}return f(Ne)}(de);if(de==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(de));if(Te(de,ArrayBuffer)||de&&Te(de.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Te(de,SharedArrayBuffer)||de&&Te(de.buffer,SharedArrayBuffer)))return S(de,me,Me);if(typeof de=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ze=de.valueOf&&de.valueOf();if(ze!=null&&ze!==de)return v.from(ze,me,Me);var Pe=function(Ne){if(v.isBuffer(Ne)){var Ve=0|w(Ne.length),Ye=g(Ve);return Ye.length===0||Ne.copy(Ye,0,0,Ve),Ye}return Ne.length!==void 0?typeof Ne.length!="number"||Ae(Ne.length)?g(0):f(Ne):Ne.type==="Buffer"&&Array.isArray(Ne.data)?f(Ne.data):void 0}(de);if(Pe)return Pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof de[Symbol.toPrimitive]=="function")return v.from(de[Symbol.toPrimitive]("string"),me,Me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(de))}function m(de){if(typeof de!="number")throw new TypeError('"size" argument must be of type number');if(de<0)throw new RangeError('The value "'+de+'" is invalid for option "size"')}function _(de){return m(de),g(de<0?0:0|w(de))}function f(de){for(var me=de.length<0?0:0|w(de.length),Me=g(me),ze=0;ze<me;ze+=1)Me[ze]=255&de[ze];return Me}function S(de,me,Me){if(me<0||de.byteLength<me)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<me+(Me||0))throw new RangeError('"length" is outside of buffer bounds');var ze;return ze=me===void 0&&Me===void 0?new Uint8Array(de):Me===void 0?new Uint8Array(de,me):new Uint8Array(de,me,Me),Object.setPrototypeOf(ze,v.prototype),ze}function w(de){if(de>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|de}function E(de,me){if(v.isBuffer(de))return de.length;if(ArrayBuffer.isView(de)||Te(de,ArrayBuffer))return de.byteLength;if(typeof de!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(de));var Me=de.length,ze=arguments.length>2&&arguments[2]===!0;if(!ze&&Me===0)return 0;for(var Pe=!1;;)switch(me){case"ascii":case"latin1":case"binary":return Me;case"utf8":case"utf-8":return ie(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Me;case"hex":return Me>>>1;case"base64":return fe(de).length;default:if(Pe)return ze?-1:ie(de).length;me=(""+me).toLowerCase(),Pe=!0}}function O(de,me,Me){var ze=!1;if((me===void 0||me<0)&&(me=0),me>this.length||((Me===void 0||Me>this.length)&&(Me=this.length),Me<=0)||(Me>>>=0)<=(me>>>=0))return"";for(de||(de="utf8");;)switch(de){case"hex":return K(this,me,Me);case"utf8":case"utf-8":return U(this,me,Me);case"ascii":return J(this,me,Me);case"latin1":case"binary":return X(this,me,Me);case"base64":return V(this,me,Me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,me,Me);default:if(ze)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),ze=!0}}function C(de,me,Me){var ze=de[me];de[me]=de[Me],de[Me]=ze}function P(de,me,Me,ze,Pe){if(de.length===0)return-1;if(typeof Me=="string"?(ze=Me,Me=0):Me>2147483647?Me=2147483647:Me<-2147483648&&(Me=-2147483648),Ae(Me=+Me)&&(Me=Pe?0:de.length-1),Me<0&&(Me=de.length+Me),Me>=de.length){if(Pe)return-1;Me=de.length-1}else if(Me<0){if(!Pe)return-1;Me=0}if(typeof me=="string"&&(me=v.from(me,ze)),v.isBuffer(me))return me.length===0?-1:R(de,me,Me,ze,Pe);if(typeof me=="number")return me&=255,typeof Uint8Array.prototype.indexOf=="function"?Pe?Uint8Array.prototype.indexOf.call(de,me,Me):Uint8Array.prototype.lastIndexOf.call(de,me,Me):R(de,[me],Me,ze,Pe);throw new TypeError("val must be string, number or Buffer")}function R(de,me,Me,ze,Pe){var Ne,Ve=1,Ye=de.length,at=me.length;if(ze!==void 0&&((ze=String(ze).toLowerCase())==="ucs2"||ze==="ucs-2"||ze==="utf16le"||ze==="utf-16le")){if(de.length<2||me.length<2)return-1;Ve=2,Ye/=2,at/=2,Me/=2}function rt(et,$e){return Ve===1?et[$e]:et.readUInt16BE($e*Ve)}if(Pe){var dt=-1;for(Ne=Me;Ne<Ye;Ne++)if(rt(de,Ne)===rt(me,dt===-1?0:Ne-dt)){if(dt===-1&&(dt=Ne),Ne-dt+1===at)return dt*Ve}else dt!==-1&&(Ne-=Ne-dt),dt=-1}else for(Me+at>Ye&&(Me=Ye-at),Ne=Me;Ne>=0;Ne--){for(var vt=!0,ht=0;ht<at;ht++)if(rt(de,Ne+ht)!==rt(me,ht)){vt=!1;break}if(vt)return Ne}return-1}function j(de,me,Me,ze){Me=Number(Me)||0;var Pe=de.length-Me;ze?(ze=Number(ze))>Pe&&(ze=Pe):ze=Pe;var Ne,Ve=me.length;for(ze>Ve/2&&(ze=Ve/2),Ne=0;Ne<ze;++Ne){var Ye=parseInt(me.substr(2*Ne,2),16);if(Ae(Ye))return Ne;de[Me+Ne]=Ye}return Ne}function D(de,me,Me,ze){return Ee(ie(me,de.length-Me),de,Me,ze)}function N(de,me,Me,ze){return Ee(function(Pe){for(var Ne=[],Ve=0;Ve<Pe.length;++Ve)Ne.push(255&Pe.charCodeAt(Ve));return Ne}(me),de,Me,ze)}function W(de,me,Me,ze){return Ee(fe(me),de,Me,ze)}function F(de,me,Me,ze){return Ee(function(Pe,Ne){for(var Ve,Ye,at,rt=[],dt=0;dt<Pe.length&&!((Ne-=2)<0);++dt)Ye=(Ve=Pe.charCodeAt(dt))>>8,at=Ve%256,rt.push(at),rt.push(Ye);return rt}(me,de.length-Me),de,Me,ze)}function V(de,me,Me){return me===0&&Me===de.length?p.fromByteArray(de):p.fromByteArray(de.slice(me,Me))}function U(de,me,Me){Me=Math.min(de.length,Me);for(var ze=[],Pe=me;Pe<Me;){var Ne=de[Pe],Ve=null,Ye=Ne>239?4:Ne>223?3:Ne>191?2:1;if(Pe+Ye<=Me){var at=void 0,rt=void 0,dt=void 0,vt=void 0;switch(Ye){case 1:Ne<128&&(Ve=Ne);break;case 2:(192&(at=de[Pe+1]))==128&&(vt=(31&Ne)<<6|63&at)>127&&(Ve=vt);break;case 3:at=de[Pe+1],rt=de[Pe+2],(192&at)==128&&(192&rt)==128&&(vt=(15&Ne)<<12|(63&at)<<6|63&rt)>2047&&(vt<55296||vt>57343)&&(Ve=vt);break;case 4:at=de[Pe+1],rt=de[Pe+2],dt=de[Pe+3],(192&at)==128&&(192&rt)==128&&(192&dt)==128&&(vt=(15&Ne)<<18|(63&at)<<12|(63&rt)<<6|63&dt)>65535&&vt<1114112&&(Ve=vt)}}Ve===null?(Ve=65533,Ye=1):Ve>65535&&(Ve-=65536,ze.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),ze.push(Ve),Pe+=Ye}return function(ht){var et=ht.length;if(et<=te)return String.fromCharCode.apply(String,ht);for(var $e="",wt=0;wt<et;)$e+=String.fromCharCode.apply(String,ht.slice(wt,wt+=te));return $e}(ze)}v.TYPED_ARRAY_SUPPORT=function(){try{var de=new Uint8Array(1),me={foo:function(){return 42}};return Object.setPrototypeOf(me,Uint8Array.prototype),Object.setPrototypeOf(de,me),de.foo()===42}catch{return!1}}(),v.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function(de,me,Me){return y(de,me,Me)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function(de,me,Me){return function(ze,Pe,Ne){return m(ze),ze<=0?g(ze):Pe!==void 0?typeof Ne=="string"?g(ze).fill(Pe,Ne):g(ze).fill(Pe):g(ze)}(de,me,Me)},v.allocUnsafe=function(de){return _(de)},v.allocUnsafeSlow=function(de){return _(de)},v.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==v.prototype},v.compare=function(de,me){if(Te(de,Uint8Array)&&(de=v.from(de,de.offset,de.byteLength)),Te(me,Uint8Array)&&(me=v.from(me,me.offset,me.byteLength)),!v.isBuffer(de)||!v.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===me)return 0;for(var Me=de.length,ze=me.length,Pe=0,Ne=Math.min(Me,ze);Pe<Ne;++Pe)if(de[Pe]!==me[Pe]){Me=de[Pe],ze=me[Pe];break}return Me<ze?-1:ze<Me?1:0},v.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(de,me){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return v.alloc(0);var Me;if(me===void 0)for(me=0,Me=0;Me<de.length;++Me)me+=de[Me].length;var ze=v.allocUnsafe(me),Pe=0;for(Me=0;Me<de.length;++Me){var Ne=de[Me];if(Te(Ne,Uint8Array))Pe+Ne.length>ze.length?(v.isBuffer(Ne)||(Ne=v.from(Ne)),Ne.copy(ze,Pe)):Uint8Array.prototype.set.call(ze,Ne,Pe);else{if(!v.isBuffer(Ne))throw new TypeError('"list" argument must be an Array of Buffers');Ne.copy(ze,Pe)}Pe+=Ne.length}return ze},v.byteLength=E,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var de=this.length;if(de%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var me=0;me<de;me+=2)C(this,me,me+1);return this},v.prototype.swap32=function(){var de=this.length;if(de%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var me=0;me<de;me+=4)C(this,me,me+3),C(this,me+1,me+2);return this},v.prototype.swap64=function(){var de=this.length;if(de%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var me=0;me<de;me+=8)C(this,me,me+7),C(this,me+1,me+6),C(this,me+2,me+5),C(this,me+3,me+4);return this},v.prototype.toString=function(){var de=this.length;return de===0?"":arguments.length===0?U(this,0,de):O.apply(this,arguments)},v.prototype.toLocaleString=v.prototype.toString,v.prototype.equals=function(de){if(!v.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de||v.compare(this,de)===0},v.prototype.inspect=function(){var de="",me=s.IS;return de=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(de+=" ... "),"<Buffer "+de+">"},x&&(v.prototype[x]=v.prototype.inspect),v.prototype.compare=function(de,me,Me,ze,Pe){if(Te(de,Uint8Array)&&(de=v.from(de,de.offset,de.byteLength)),!v.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(de));if(me===void 0&&(me=0),Me===void 0&&(Me=de?de.length:0),ze===void 0&&(ze=0),Pe===void 0&&(Pe=this.length),me<0||Me>de.length||ze<0||Pe>this.length)throw new RangeError("out of range index");if(ze>=Pe&&me>=Me)return 0;if(ze>=Pe)return-1;if(me>=Me)return 1;if(this===de)return 0;for(var Ne=(Pe>>>=0)-(ze>>>=0),Ve=(Me>>>=0)-(me>>>=0),Ye=Math.min(Ne,Ve),at=this.slice(ze,Pe),rt=de.slice(me,Me),dt=0;dt<Ye;++dt)if(at[dt]!==rt[dt]){Ne=at[dt],Ve=rt[dt];break}return Ne<Ve?-1:Ve<Ne?1:0},v.prototype.includes=function(de,me,Me){return this.indexOf(de,me,Me)!==-1},v.prototype.indexOf=function(de,me,Me){return P(this,de,me,Me,!0)},v.prototype.lastIndexOf=function(de,me,Me){return P(this,de,me,Me,!1)},v.prototype.write=function(de,me,Me,ze){if(me===void 0)ze="utf8",Me=this.length,me=0;else if(Me===void 0&&typeof me=="string")ze=me,Me=this.length,me=0;else{if(!isFinite(me))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");me>>>=0,isFinite(Me)?(Me>>>=0,ze===void 0&&(ze="utf8")):(ze=Me,Me=void 0)}var Pe=this.length-me;if((Me===void 0||Me>Pe)&&(Me=Pe),de.length>0&&(Me<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var Ne=!1;;)switch(ze){case"hex":return j(this,de,me,Me);case"utf8":case"utf-8":return D(this,de,me,Me);case"ascii":case"latin1":case"binary":return N(this,de,me,Me);case"base64":return W(this,de,me,Me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,de,me,Me);default:if(Ne)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),Ne=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;function J(de,me,Me){var ze="";Me=Math.min(de.length,Me);for(var Pe=me;Pe<Me;++Pe)ze+=String.fromCharCode(127&de[Pe]);return ze}function X(de,me,Me){var ze="";Me=Math.min(de.length,Me);for(var Pe=me;Pe<Me;++Pe)ze+=String.fromCharCode(de[Pe]);return ze}function K(de,me,Me){var ze=de.length;(!me||me<0)&&(me=0),(!Me||Me<0||Me>ze)&&(Me=ze);for(var Pe="",Ne=me;Ne<Me;++Ne)Pe+=Se[de[Ne]];return Pe}function Q(de,me,Me){for(var ze=de.slice(me,Me),Pe="",Ne=0;Ne<ze.length-1;Ne+=2)Pe+=String.fromCharCode(ze[Ne]+256*ze[Ne+1]);return Pe}function Z(de,me,Me){if(de%1!=0||de<0)throw new RangeError("offset is not uint");if(de+me>Me)throw new RangeError("Trying to access beyond buffer length")}function re(de,me,Me,ze,Pe,Ne){if(!v.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if(me>Pe||me<Ne)throw new RangeError('"value" argument is out of bounds');if(Me+ze>de.length)throw new RangeError("Index out of range")}function oe(de,me,Me,ze,Pe){ge(me,ze,Pe,de,Me,7);var Ne=Number(me&BigInt(4294967295));de[Me++]=Ne,Ne>>=8,de[Me++]=Ne,Ne>>=8,de[Me++]=Ne,Ne>>=8,de[Me++]=Ne;var Ve=Number(me>>BigInt(32)&BigInt(4294967295));return de[Me++]=Ve,Ve>>=8,de[Me++]=Ve,Ve>>=8,de[Me++]=Ve,Ve>>=8,de[Me++]=Ve,Me}function ae(de,me,Me,ze,Pe){ge(me,ze,Pe,de,Me,7);var Ne=Number(me&BigInt(4294967295));de[Me+7]=Ne,Ne>>=8,de[Me+6]=Ne,Ne>>=8,de[Me+5]=Ne,Ne>>=8,de[Me+4]=Ne;var Ve=Number(me>>BigInt(32)&BigInt(4294967295));return de[Me+3]=Ve,Ve>>=8,de[Me+2]=Ve,Ve>>=8,de[Me+1]=Ve,Ve>>=8,de[Me]=Ve,Me+8}function ce(de,me,Me,ze,Pe,Ne){if(Me+ze>de.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("Index out of range")}function he(de,me,Me,ze,Pe){return me=+me,Me>>>=0,Pe||ce(de,0,Me,4),c.write(de,me,Me,ze,23,4),Me+4}function pe(de,me,Me,ze,Pe){return me=+me,Me>>>=0,Pe||ce(de,0,Me,8),c.write(de,me,Me,ze,52,8),Me+8}v.prototype.slice=function(de,me){var Me=this.length;(de=~~de)<0?(de+=Me)<0&&(de=0):de>Me&&(de=Me),(me=me===void 0?Me:~~me)<0?(me+=Me)<0&&(me=0):me>Me&&(me=Me),me<de&&(me=de);var ze=this.subarray(de,me);return Object.setPrototypeOf(ze,v.prototype),ze},v.prototype.readUintLE=v.prototype.readUIntLE=function(de,me,Me){de>>>=0,me>>>=0,Me||Z(de,me,this.length);for(var ze=this[de],Pe=1,Ne=0;++Ne<me&&(Pe*=256);)ze+=this[de+Ne]*Pe;return ze},v.prototype.readUintBE=v.prototype.readUIntBE=function(de,me,Me){de>>>=0,me>>>=0,Me||Z(de,me,this.length);for(var ze=this[de+--me],Pe=1;me>0&&(Pe*=256);)ze+=this[de+--me]*Pe;return ze},v.prototype.readUint8=v.prototype.readUInt8=function(de,me){return de>>>=0,me||Z(de,1,this.length),this[de]},v.prototype.readUint16LE=v.prototype.readUInt16LE=function(de,me){return de>>>=0,me||Z(de,2,this.length),this[de]|this[de+1]<<8},v.prototype.readUint16BE=v.prototype.readUInt16BE=function(de,me){return de>>>=0,me||Z(de,2,this.length),this[de]<<8|this[de+1]},v.prototype.readUint32LE=v.prototype.readUInt32LE=function(de,me){return de>>>=0,me||Z(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+16777216*this[de+3]},v.prototype.readUint32BE=v.prototype.readUInt32BE=function(de,me){return de>>>=0,me||Z(de,4,this.length),16777216*this[de]+(this[de+1]<<16|this[de+2]<<8|this[de+3])},v.prototype.readBigUInt64LE=Oe(function(de){we(de>>>=0,"offset");var me=this[de],Me=this[de+7];me!==void 0&&Me!==void 0||_e(de,this.length-8);var ze=me+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24),Pe=this[++de]+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+Me*Math.pow(2,24);return BigInt(ze)+(BigInt(Pe)<<BigInt(32))}),v.prototype.readBigUInt64BE=Oe(function(de){we(de>>>=0,"offset");var me=this[de],Me=this[de+7];me!==void 0&&Me!==void 0||_e(de,this.length-8);var ze=me*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de],Pe=this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+Me;return(BigInt(ze)<<BigInt(32))+BigInt(Pe)}),v.prototype.readIntLE=function(de,me,Me){de>>>=0,me>>>=0,Me||Z(de,me,this.length);for(var ze=this[de],Pe=1,Ne=0;++Ne<me&&(Pe*=256);)ze+=this[de+Ne]*Pe;return ze>=(Pe*=128)&&(ze-=Math.pow(2,8*me)),ze},v.prototype.readIntBE=function(de,me,Me){de>>>=0,me>>>=0,Me||Z(de,me,this.length);for(var ze=me,Pe=1,Ne=this[de+--ze];ze>0&&(Pe*=256);)Ne+=this[de+--ze]*Pe;return Ne>=(Pe*=128)&&(Ne-=Math.pow(2,8*me)),Ne},v.prototype.readInt8=function(de,me){return de>>>=0,me||Z(de,1,this.length),128&this[de]?-1*(255-this[de]+1):this[de]},v.prototype.readInt16LE=function(de,me){de>>>=0,me||Z(de,2,this.length);var Me=this[de]|this[de+1]<<8;return 32768&Me?4294901760|Me:Me},v.prototype.readInt16BE=function(de,me){de>>>=0,me||Z(de,2,this.length);var Me=this[de+1]|this[de]<<8;return 32768&Me?4294901760|Me:Me},v.prototype.readInt32LE=function(de,me){return de>>>=0,me||Z(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},v.prototype.readInt32BE=function(de,me){return de>>>=0,me||Z(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},v.prototype.readBigInt64LE=Oe(function(de){we(de>>>=0,"offset");var me=this[de],Me=this[de+7];me!==void 0&&Me!==void 0||_e(de,this.length-8);var ze=this[de+4]+this[de+5]*Math.pow(2,8)+this[de+6]*Math.pow(2,16)+(Me<<24);return(BigInt(ze)<<BigInt(32))+BigInt(me+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24))}),v.prototype.readBigInt64BE=Oe(function(de){we(de>>>=0,"offset");var me=this[de],Me=this[de+7];me!==void 0&&Me!==void 0||_e(de,this.length-8);var ze=(me<<24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de];return(BigInt(ze)<<BigInt(32))+BigInt(this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+Me)}),v.prototype.readFloatLE=function(de,me){return de>>>=0,me||Z(de,4,this.length),c.read(this,de,!0,23,4)},v.prototype.readFloatBE=function(de,me){return de>>>=0,me||Z(de,4,this.length),c.read(this,de,!1,23,4)},v.prototype.readDoubleLE=function(de,me){return de>>>=0,me||Z(de,8,this.length),c.read(this,de,!0,52,8)},v.prototype.readDoubleBE=function(de,me){return de>>>=0,me||Z(de,8,this.length),c.read(this,de,!1,52,8)},v.prototype.writeUintLE=v.prototype.writeUIntLE=function(de,me,Me,ze){de=+de,me>>>=0,Me>>>=0,ze||re(this,de,me,Me,Math.pow(2,8*Me)-1,0);var Pe=1,Ne=0;for(this[me]=255&de;++Ne<Me&&(Pe*=256);)this[me+Ne]=de/Pe&255;return me+Me},v.prototype.writeUintBE=v.prototype.writeUIntBE=function(de,me,Me,ze){de=+de,me>>>=0,Me>>>=0,ze||re(this,de,me,Me,Math.pow(2,8*Me)-1,0);var Pe=Me-1,Ne=1;for(this[me+Pe]=255&de;--Pe>=0&&(Ne*=256);)this[me+Pe]=de/Ne&255;return me+Me},v.prototype.writeUint8=v.prototype.writeUInt8=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,1,255,0),this[me]=255&de,me+1},v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,2,65535,0),this[me]=255&de,this[me+1]=de>>>8,me+2},v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,2,65535,0),this[me]=de>>>8,this[me+1]=255&de,me+2},v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,4,4294967295,0),this[me+3]=de>>>24,this[me+2]=de>>>16,this[me+1]=de>>>8,this[me]=255&de,me+4},v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,4,4294967295,0),this[me]=de>>>24,this[me+1]=de>>>16,this[me+2]=de>>>8,this[me+3]=255&de,me+4},v.prototype.writeBigUInt64LE=Oe(function(de){return oe(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeBigUInt64BE=Oe(function(de){return ae(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeIntLE=function(de,me,Me,ze){if(de=+de,me>>>=0,!ze){var Pe=Math.pow(2,8*Me-1);re(this,de,me,Me,Pe-1,-Pe)}var Ne=0,Ve=1,Ye=0;for(this[me]=255&de;++Ne<Me&&(Ve*=256);)de<0&&Ye===0&&this[me+Ne-1]!==0&&(Ye=1),this[me+Ne]=(de/Ve>>0)-Ye&255;return me+Me},v.prototype.writeIntBE=function(de,me,Me,ze){if(de=+de,me>>>=0,!ze){var Pe=Math.pow(2,8*Me-1);re(this,de,me,Me,Pe-1,-Pe)}var Ne=Me-1,Ve=1,Ye=0;for(this[me+Ne]=255&de;--Ne>=0&&(Ve*=256);)de<0&&Ye===0&&this[me+Ne+1]!==0&&(Ye=1),this[me+Ne]=(de/Ve>>0)-Ye&255;return me+Me},v.prototype.writeInt8=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,1,127,-128),de<0&&(de=255+de+1),this[me]=255&de,me+1},v.prototype.writeInt16LE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,2,32767,-32768),this[me]=255&de,this[me+1]=de>>>8,me+2},v.prototype.writeInt16BE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,2,32767,-32768),this[me]=de>>>8,this[me+1]=255&de,me+2},v.prototype.writeInt32LE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,4,2147483647,-2147483648),this[me]=255&de,this[me+1]=de>>>8,this[me+2]=de>>>16,this[me+3]=de>>>24,me+4},v.prototype.writeInt32BE=function(de,me,Me){return de=+de,me>>>=0,Me||re(this,de,me,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[me]=de>>>24,this[me+1]=de>>>16,this[me+2]=de>>>8,this[me+3]=255&de,me+4},v.prototype.writeBigInt64LE=Oe(function(de){return oe(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeBigInt64BE=Oe(function(de){return ae(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeFloatLE=function(de,me,Me){return he(this,de,me,!0,Me)},v.prototype.writeFloatBE=function(de,me,Me){return he(this,de,me,!1,Me)},v.prototype.writeDoubleLE=function(de,me,Me){return pe(this,de,me,!0,Me)},v.prototype.writeDoubleBE=function(de,me,Me){return pe(this,de,me,!1,Me)},v.prototype.copy=function(de,me,Me,ze){if(!v.isBuffer(de))throw new TypeError("argument should be a Buffer");if(Me||(Me=0),ze||ze===0||(ze=this.length),me>=de.length&&(me=de.length),me||(me=0),ze>0&&ze<Me&&(ze=Me),ze===Me||de.length===0||this.length===0)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(Me<0||Me>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),de.length-me<ze-Me&&(ze=de.length-me+Me);var Pe=ze-Me;return this===de&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(me,Me,ze):Uint8Array.prototype.set.call(de,this.subarray(Me,ze),me),Pe},v.prototype.fill=function(de,me,Me,ze){if(typeof de=="string"){if(typeof me=="string"?(ze=me,me=0,Me=this.length):typeof Me=="string"&&(ze=Me,Me=this.length),ze!==void 0&&typeof ze!="string")throw new TypeError("encoding must be a string");if(typeof ze=="string"&&!v.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(de.length===1){var Pe=de.charCodeAt(0);(ze==="utf8"&&Pe<128||ze==="latin1")&&(de=Pe)}}else typeof de=="number"?de&=255:typeof de=="boolean"&&(de=Number(de));if(me<0||this.length<me||this.length<Me)throw new RangeError("Out of range index");if(Me<=me)return this;var Ne;if(me>>>=0,Me=Me===void 0?this.length:Me>>>0,de||(de=0),typeof de=="number")for(Ne=me;Ne<Me;++Ne)this[Ne]=de;else{var Ve=v.isBuffer(de)?de:v.from(de,ze),Ye=Ve.length;if(Ye===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Ne=0;Ne<Me-me;++Ne)this[Ne+me]=Ve[Ne%Ye]}return this};var xe={};function be(de,me,Me){xe[de]=function(ze){function Pe(){var Ye,at,rt,dt;return function(vt,ht){if(!(vt instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,Pe),at=this,rt=i(rt=Pe),Ye=function(vt,ht){if(ht&&(u(ht)==="object"||typeof ht=="function"))return ht;if(ht!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(et){if(et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et}(vt)}(at,r()?Reflect.construct(rt,[],i(at).constructor):rt.apply(at,dt)),Object.defineProperty(Ye,"message",{value:me.apply(Ye,arguments),writable:!0,configurable:!0}),Ye.name="".concat(Ye.name," [").concat(de,"]"),Ye.stack,delete Ye.name,Ye}return function(Ye,at){if(typeof at!="function"&&at!==null)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(at&&at.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),Object.defineProperty(Ye,"prototype",{writable:!1}),at&&l(Ye,at)}(Pe,ze),Ne=Pe,(Ve=[{key:"code",get:function(){return de},set:function(Ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ye,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(de,"]: ").concat(this.message)}}])&&a(Ne.prototype,Ve),Object.defineProperty(Ne,"prototype",{writable:!1}),Ne;var Ne,Ve}(Me)}function ve(de){for(var me="",Me=de.length,ze=de[0]==="-"?1:0;Me>=ze+4;Me-=3)me="_".concat(de.slice(Me-3,Me)).concat(me);return"".concat(de.slice(0,Me)).concat(me)}function ge(de,me,Me,ze,Pe,Ne){if(de>Me||de<me){var Ve,Ye=typeof me=="bigint"?"n":"";throw Ve=me===0||me===BigInt(0)?">= 0".concat(Ye," and < 2").concat(Ye," ** ").concat(8*(Ne+1)).concat(Ye):">= -(2".concat(Ye," ** ").concat(8*(Ne+1)-1).concat(Ye,") and < 2 ** ")+"".concat(8*(Ne+1)-1).concat(Ye),new xe.ERR_OUT_OF_RANGE("value",Ve,de)}(function(at,rt,dt){we(rt,"offset"),at[rt]!==void 0&&at[rt+dt]!==void 0||_e(rt,at.length-(dt+1))})(ze,Pe,Ne)}function we(de,me){if(typeof de!="number")throw new xe.ERR_INVALID_ARG_TYPE(me,"number",de)}function _e(de,me,Me){throw Math.floor(de)!==de?(we(de,Me),new xe.ERR_OUT_OF_RANGE("offset","an integer",de)):me<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(me),de)}be("ERR_BUFFER_OUT_OF_BOUNDS",function(de){return de?"".concat(de," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(de,me){return'The "'.concat(de,'" argument must be of type number. Received type ').concat(u(me))},TypeError),be("ERR_OUT_OF_RANGE",function(de,me,Me){var ze='The value of "'.concat(de,'" is out of range.'),Pe=Me;return Number.isInteger(Me)&&Math.abs(Me)>Math.pow(2,32)?Pe=ve(String(Me)):typeof Me=="bigint"&&(Pe=String(Me),(Me>Math.pow(BigInt(2),BigInt(32))||Me<-Math.pow(BigInt(2),BigInt(32)))&&(Pe=ve(Pe)),Pe+="n"),ze+" It must be ".concat(me,". Received ").concat(Pe)},RangeError);var se=/[^+/0-9A-Za-z-_]/g;function ie(de,me){var Me;me=me||1/0;for(var ze=de.length,Pe=null,Ne=[],Ve=0;Ve<ze;++Ve){if((Me=de.charCodeAt(Ve))>55295&&Me<57344){if(!Pe){if(Me>56319){(me-=3)>-1&&Ne.push(239,191,189);continue}if(Ve+1===ze){(me-=3)>-1&&Ne.push(239,191,189);continue}Pe=Me;continue}if(Me<56320){(me-=3)>-1&&Ne.push(239,191,189),Pe=Me;continue}Me=65536+(Pe-55296<<10|Me-56320)}else Pe&&(me-=3)>-1&&Ne.push(239,191,189);if(Pe=null,Me<128){if((me-=1)<0)break;Ne.push(Me)}else if(Me<2048){if((me-=2)<0)break;Ne.push(Me>>6|192,63&Me|128)}else if(Me<65536){if((me-=3)<0)break;Ne.push(Me>>12|224,Me>>6&63|128,63&Me|128)}else{if(!(Me<1114112))throw new Error("Invalid code point");if((me-=4)<0)break;Ne.push(Me>>18|240,Me>>12&63|128,Me>>6&63|128,63&Me|128)}}return Ne}function fe(de){return p.toByteArray(function(me){if((me=(me=me.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;me.length%4!=0;)me+="=";return me}(de))}function Ee(de,me,Me,ze){var Pe;for(Pe=0;Pe<ze&&!(Pe+Me>=me.length||Pe>=de.length);++Pe)me[Pe+Me]=de[Pe];return Pe}function Te(de,me){return de instanceof me||de!=null&&de.constructor!=null&&de.constructor.name!=null&&de.constructor.name===me.name}function Ae(de){return de!=de}var Se=function(){for(var de="0123456789abcdef",me=new Array(256),Me=0;Me<16;++Me)for(var ze=16*Me,Pe=0;Pe<16;++Pe)me[ze+Pe]=de[Me]+de[Pe];return me}();function Oe(de){return typeof BigInt>"u"?De:de}function De(){throw new Error("BigInt not supported")}},9216:function(h){h.exports=n,h.exports.isMobile=n,h.exports.default=n;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,a=/android|ipad|playbook|silk/i;function n(r){r||(r={});var i=r.ua;if(i||typeof navigator>"u"||(i=navigator.userAgent),i&&i.headers&&typeof i.headers["user-agent"]=="string"&&(i=i.headers["user-agent"]),typeof i!="string")return!1;var l=s.test(i)&&!t.test(i)||!!r.tablet&&a.test(i);return!l&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&i.indexOf("Macintosh")!==-1&&i.indexOf("Safari")!==-1&&(l=!0),l}},6296:function(h,s,t){h.exports=function(u){var p=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],x=u.up||[0,1,0],d=u.distanceLimits||[0,1/0],g=u.mode||"turntable",v=a(),y=n(),m=r();return v.setDistanceLimits(d[0],d[1]),v.lookAt(0,p,c,x),y.setDistanceLimits(d[0],d[1]),y.lookAt(0,p,c,x),m.setDistanceLimits(d[0],d[1]),m.lookAt(0,p,c,x),new i({turntable:v,orbit:y,matrix:m},g)};var a=t(7261),n=t(9977),r=t(4192);function i(u,p){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=p,this._active=u[p],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=i.prototype;l.flush=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].flush(u)},l.idle=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].idle(u)},l.lookAt=function(u,p,c,x){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].lookAt(u,p,c,x)},l.rotate=function(u,p,c,x){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].rotate(u,p,c,x)},l.pan=function(u,p,c,x){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].pan(u,p,c,x)},l.translate=function(u,p,c,x){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].translate(u,p,c,x)},l.setMatrix=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setMatrix(u,p)},l.setDistanceLimits=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistanceLimits(u,p)},l.setDistance=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistance(u,p)},l.recalcMatrix=function(u){this._active.recalcMatrix(u)},l.getDistance=function(u){return this._active.getDistance(u)},l.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},l.lastT=function(){return this._active.lastT()},l.setMode=function(u){if(u!==this._mode){var p=this._controllerNames.indexOf(u);if(!(p<0)){var c=this._active,x=this._controllerList[p],d=Math.max(c.lastT(),x.lastT());c.recalcMatrix(d),x.setMatrix(d,c.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},7169:function(h,s,t){var a=typeof WeakMap>"u"?t(1538):WeakMap,n=t(2762),r=t(8116),i=new a;h.exports=function(l){var u=i.get(l),p=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!p||!l.isBuffer(p)){var c=n(l,new Float32Array([-1,-1,-1,4,4,-1]));(u=r(l,[{buffer:c,type:l.FLOAT,size:2}]))._triangleBuffer=c,i.set(l,u)}u.bind(),l.drawArrays(l.TRIANGLES,0,3),u.unbind()}},1085:function(h,s,t){var a=t(1371);h.exports=function(n,r,i){r=typeof r=="number"?r:1,i=i||": ";var l=n.split(/\r?\n/),u=String(l.length+r-1).length;return l.map(function(p,c){var x=c+r,d=String(x).length;return a(x,u-d)+i+p}).join(`
`)}},3952:function(h,s,t){h.exports=function(r){var i=r.length;if(i===0)return[];if(i===1)return[0];for(var l=r[0].length,u=[r[0]],p=[0],c=1;c<i;++c)if(u.push(r[c]),n(u,l)){if(p.push(c),p.length===l+1)return p}else u.pop();return p};var a=t(3250);function n(r,i){for(var l=new Array(i+1),u=0;u<r.length;++u)l[u]=r[u];for(u=0;u<=r.length;++u){for(var p=r.length;p<=i;++p){for(var c=new Array(i),x=0;x<i;++x)c[x]=Math.pow(p+1-u,x);l[p]=c}if(a.apply(void 0,l))return!0}return!1}},5995:function(h,s,t){h.exports=function(r,i){return a(i).filter(function(l){for(var u=new Array(l.length),p=0;p<l.length;++p)u[p]=i[l[p]];return n(u)*r<1})};var a=t(7642),n=t(6037)},3502:function(h,s,t){h.exports=function(r,i){return n(a(r,i))};var a=t(5995),n=t(9127)},6468:function(h){h.exports=function(s){return atob(s)}},2642:function(h,s,t){h.exports=function(r,i){for(var l=i.length,u=new Array(l+1),p=0;p<l;++p){for(var c=new Array(l+1),x=0;x<=l;++x)c[x]=r[x][p];u[p]=c}for(u[l]=new Array(l+1),p=0;p<=l;++p)u[l][p]=1;var d=new Array(l+1);for(p=0;p<l;++p)d[p]=i[p];d[l]=1;var g=a(u,d),v=n(g[l+1]);v===0&&(v=1);var y=new Array(l+1);for(p=0;p<=l;++p)y[p]=n(g[p])/v;return y};var a=t(727);function n(r){for(var i=0,l=0;l<r.length;++l)i+=r[l];return i}},7507:function(h,s){s.byteLength=function(p){var c=l(p),x=c[0],d=c[1];return 3*(x+d)/4-d},s.toByteArray=function(p){var c,x,d=l(p),g=d[0],v=d[1],y=new n(function(f,S,w){return 3*(S+w)/4-w}(0,g,v)),m=0,_=v>0?g-4:g;for(x=0;x<_;x+=4)c=a[p.charCodeAt(x)]<<18|a[p.charCodeAt(x+1)]<<12|a[p.charCodeAt(x+2)]<<6|a[p.charCodeAt(x+3)],y[m++]=c>>16&255,y[m++]=c>>8&255,y[m++]=255&c;return v===2&&(c=a[p.charCodeAt(x)]<<2|a[p.charCodeAt(x+1)]>>4,y[m++]=255&c),v===1&&(c=a[p.charCodeAt(x)]<<10|a[p.charCodeAt(x+1)]<<4|a[p.charCodeAt(x+2)]>>2,y[m++]=c>>8&255,y[m++]=255&c),y},s.fromByteArray=function(p){for(var c,x=p.length,d=x%3,g=[],v=16383,y=0,m=x-d;y<m;y+=v)g.push(u(p,y,y+v>m?m:y+v));return d===1?(c=p[x-1],g.push(t[c>>2]+t[c<<4&63]+"==")):d===2&&(c=(p[x-2]<<8)+p[x-1],g.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),g.join("")};for(var t=[],a=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)t[i]=r[i],a[r.charCodeAt(i)]=i;function l(p){var c=p.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=p.indexOf("=");return x===-1&&(x=c),[x,x===c?0:4-x%4]}function u(p,c,x){for(var d,g,v=[],y=c;y<x;y+=3)d=(p[y]<<16&16711680)+(p[y+1]<<8&65280)+(255&p[y+2]),v.push(t[(g=d)>>18&63]+t[g>>12&63]+t[g>>6&63]+t[63&g]);return v.join("")}a[45]=62,a[95]=63},3865:function(h,s,t){var a=t(869);h.exports=function(n,r){return a(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},1318:function(h){h.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},8697:function(h,s,t){var a=t(869);h.exports=function(n,r){return a(n[0].mul(r[1]),n[1].mul(r[0]))}},7842:function(h,s,t){var a=t(6330),n=t(1533),r=t(2651),i=t(4387),l=t(869),u=t(8697);h.exports=function p(c,x){if(a(c))return x?u(c,p(x)):[c[0].clone(),c[1].clone()];var d,g,v=0;if(n(c))d=c.clone();else if(typeof c=="string")d=i(c);else{if(c===0)return[r(0),r(1)];if(c===Math.floor(c))d=r(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),v-=256;d=r(c)}}if(a(x))d.mul(x[1]),g=x[0].clone();else if(n(x))g=x.clone();else if(typeof x=="string")g=i(x);else if(x)if(x===Math.floor(x))g=r(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),v+=256;g=r(x)}else g=r(1);return v>0?d=d.ushln(v):v<0&&(g=g.ushln(-v)),l(d,g)}},6330:function(h,s,t){var a=t(1533);h.exports=function(n){return Array.isArray(n)&&n.length===2&&a(n[0])&&a(n[1])}},5716:function(h,s,t){var a=t(6859);h.exports=function(n){return n.cmp(new a(0))}},1369:function(h,s,t){var a=t(5716);h.exports=function(n){var r=n.length,i=n.words,l=0;if(r===1)l=i[0];else if(r===2)l=i[0]+67108864*i[1];else for(var u=0;u<r;u++)l+=i[u]*Math.pow(67108864,u);return a(n)*l}},4025:function(h,s,t){var a=t(2361),n=t(8828).countTrailingZeros;h.exports=function(r){var i=n(a.lo(r));if(i<32)return i;var l=n(a.hi(r));return l>20?52:l+32}},1533:function(h,s,t){t(6859),h.exports=function(a){return a&&typeof a=="object"&&!!a.words}},2651:function(h,s,t){var a=t(6859),n=t(2361);h.exports=function(r){var i=n.exponent(r);return i<52?new a(r):new a(r*Math.pow(2,52-i)).ushln(i-52)}},869:function(h,s,t){var a=t(2651),n=t(5716);h.exports=function(r,i){var l=n(r),u=n(i);if(l===0)return[a(0),a(1)];if(u===0)return[a(0),a(0)];u<0&&(r=r.neg(),i=i.neg());var p=r.gcd(i);return p.cmpn(1)?[r.div(p),i.div(p)]:[r,i]}},4387:function(h,s,t){var a=t(6859);h.exports=function(n){return new a(n)}},6504:function(h,s,t){var a=t(869);h.exports=function(n,r){return a(n[0].mul(r[0]),n[1].mul(r[1]))}},7721:function(h,s,t){var a=t(5716);h.exports=function(n){return a(n[0])*a(n[1])}},5572:function(h,s,t){var a=t(869);h.exports=function(n,r){return a(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},946:function(h,s,t){var a=t(1369),n=t(4025);h.exports=function(r){var i=r[0],l=r[1];if(i.cmpn(0)===0)return 0;var u=i.abs().divmod(l.abs()),p=u.div,c=a(p),x=u.mod,d=i.negative!==l.negative?-1:1;if(x.cmpn(0)===0)return d*c;if(c){var g=n(c)+4;return d*(c+(y=a(x.ushln(g).divRound(l)))*Math.pow(2,-g))}var v=l.bitLength()-x.bitLength()+53,y=a(x.ushln(v).divRound(l));return v<1023?d*y*Math.pow(2,-v):d*(y*=Math.pow(2,-1023))*Math.pow(2,1023-v)}},2478:function(h){function s(l,u,p,c,x){for(var d=x+1;c<=x;){var g=c+x>>>1,v=l[g];(p!==void 0?p(v,u):v-u)>=0?(d=g,x=g-1):c=g+1}return d}function t(l,u,p,c,x){for(var d=x+1;c<=x;){var g=c+x>>>1,v=l[g];(p!==void 0?p(v,u):v-u)>0?(d=g,x=g-1):c=g+1}return d}function a(l,u,p,c,x){for(var d=c-1;c<=x;){var g=c+x>>>1,v=l[g];(p!==void 0?p(v,u):v-u)<0?(d=g,c=g+1):x=g-1}return d}function n(l,u,p,c,x){for(var d=c-1;c<=x;){var g=c+x>>>1,v=l[g];(p!==void 0?p(v,u):v-u)<=0?(d=g,c=g+1):x=g-1}return d}function r(l,u,p,c,x){for(;c<=x;){var d=c+x>>>1,g=l[d],v=p!==void 0?p(g,u):g-u;if(v===0)return d;v<=0?c=d+1:x=d-1}return-1}function i(l,u,p,c,x,d){return typeof p=="function"?d(l,u,p,c===void 0?0:0|c,x===void 0?l.length-1:0|x):d(l,u,void 0,p===void 0?0:0|p,c===void 0?l.length-1:0|c)}h.exports={ge:function(l,u,p,c,x){return i(l,u,p,c,x,s)},gt:function(l,u,p,c,x){return i(l,u,p,c,x,t)},lt:function(l,u,p,c,x){return i(l,u,p,c,x,a)},le:function(l,u,p,c,x){return i(l,u,p,c,x,n)},eq:function(l,u,p,c,x){return i(l,u,p,c,x,r)}}},8828:function(h,s){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,i;return r=(n>65535)<<4,r|=i=((n>>>=r)>255)<<3,r|=i=((n>>>=i)>15)<<2,(r|=i=((n>>>=i)>3)<<1)|(n>>>=i)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var a=new Array(256);(function(n){for(var r=0;r<256;++r){var i=r,l=r,u=7;for(i>>>=1;i;i>>>=1)l<<=1,l|=1&i,--u;n[r]=l<<u&255}})(a),s.reverse=function(n){return a[255&n]<<24|a[n>>>8&255]<<16|a[n>>>16&255]<<8|a[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,i){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},6859:function(h,s,t){(function(a,n){function r(D,N){if(!D)throw new Error(N||"Assertion failed")}function i(D,N){D.super_=N;var W=function(){};W.prototype=N.prototype,D.prototype=new W,D.prototype.constructor=D}function l(D,N,W){if(l.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&(N!=="le"&&N!=="be"||(W=N,N=10),this._init(D||0,N||10,W||"be"))}var u;typeof a=="object"?a.exports=l:n.BN=l,l.BN=l,l.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(7790).Buffer}catch{}function p(D,N){var W=D.charCodeAt(N);return W>=65&&W<=70?W-55:W>=97&&W<=102?W-87:W-48&15}function c(D,N,W){var F=p(D,W);return W-1>=N&&(F|=p(D,W-1)<<4),F}function x(D,N,W,F){for(var V=0,U=Math.min(D.length,W),te=N;te<U;te++){var J=D.charCodeAt(te)-48;V*=F,V+=J>=49?J-49+10:J>=17?J-17+10:J}return V}l.isBN=function(D){return D instanceof l||D!==null&&typeof D=="object"&&D.constructor.wordSize===l.wordSize&&Array.isArray(D.words)},l.max=function(D,N){return D.cmp(N)>0?D:N},l.min=function(D,N){return D.cmp(N)<0?D:N},l.prototype._init=function(D,N,W){if(typeof D=="number")return this._initNumber(D,N,W);if(typeof D=="object")return this._initArray(D,N,W);N==="hex"&&(N=16),r(N===(0|N)&&N>=2&&N<=36);var F=0;(D=D.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<D.length&&(N===16?this._parseHex(D,F,W):(this._parseBase(D,N,F),W==="le"&&this._initArray(this.toArray(),N,W)))},l.prototype._initNumber=function(D,N,W){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(r(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),W==="le"&&this._initArray(this.toArray(),N,W)},l.prototype._initArray=function(D,N,W){if(r(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,U,te=0;if(W==="be")for(F=D.length-1,V=0;F>=0;F-=3)U=D[F]|D[F-1]<<8|D[F-2]<<16,this.words[V]|=U<<te&67108863,this.words[V+1]=U>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);else if(W==="le")for(F=0,V=0;F<D.length;F+=3)U=D[F]|D[F+1]<<8|D[F+2]<<16,this.words[V]|=U<<te&67108863,this.words[V+1]=U>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);return this.strip()},l.prototype._parseHex=function(D,N,W){this.length=Math.ceil((D.length-N)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,U=0,te=0;if(W==="be")for(F=D.length-1;F>=N;F-=2)V=c(D,N,F)<<U,this.words[te]|=67108863&V,U>=18?(U-=18,te+=1,this.words[te]|=V>>>26):U+=8;else for(F=(D.length-N)%2==0?N+1:N;F<D.length;F+=2)V=c(D,N,F)<<U,this.words[te]|=67108863&V,U>=18?(U-=18,te+=1,this.words[te]|=V>>>26):U+=8;this.strip()},l.prototype._parseBase=function(D,N,W){this.words=[0],this.length=1;for(var F=0,V=1;V<=67108863;V*=N)F++;F--,V=V/N|0;for(var U=D.length-W,te=U%F,J=Math.min(U,U-te)+W,X=0,K=W;K<J;K+=F)X=x(D,K,K+F,N),this.imuln(V),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(te!==0){var Q=1;for(X=x(D,K,D.length,N),K=0;K<te;K++)Q*=N;this.imuln(Q),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},l.prototype.copy=function(D){D.words=new Array(this.length);for(var N=0;N<this.length;N++)D.words[N]=this.words[N];D.length=this.length,D.negative=this.negative,D.red=this.red},l.prototype.clone=function(){var D=new l(null);return this.copy(D),D},l.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(D,N,W){W.negative=N.negative^D.negative;var F=D.length+N.length|0;W.length=F,F=F-1|0;var V=0|D.words[0],U=0|N.words[0],te=V*U,J=67108863&te,X=te/67108864|0;W.words[0]=J;for(var K=1;K<F;K++){for(var Q=X>>>26,Z=67108863&X,re=Math.min(K,N.length-1),oe=Math.max(0,K-D.length+1);oe<=re;oe++){var ae=K-oe|0;Q+=(te=(V=0|D.words[ae])*(U=0|N.words[oe])+Z)/67108864|0,Z=67108863&te}W.words[K]=0|Z,X=0|Q}return X!==0?W.words[K]=0|X:W.length--,W.strip()}l.prototype.toString=function(D,N){var W;if(N=0|N||1,(D=D||10)===16||D==="hex"){W="";for(var F=0,V=0,U=0;U<this.length;U++){var te=this.words[U],J=(16777215&(te<<F|V)).toString(16);W=(V=te>>>24-F&16777215)!=0||U!==this.length-1?d[6-J.length]+J+W:J+W,(F+=2)>=26&&(F-=26,U--)}for(V!==0&&(W=V.toString(16)+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}if(D===(0|D)&&D>=2&&D<=36){var X=g[D],K=v[D];W="";var Q=this.clone();for(Q.negative=0;!Q.isZero();){var Z=Q.modn(K).toString(D);W=(Q=Q.idivn(K)).isZero()?Z+W:d[X-Z.length]+Z+W}for(this.isZero()&&(W="0"+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}r(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=67108864*this.words[1]:this.length===3&&this.words[2]===1?D+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(D,N){return r(u!==void 0),this.toArrayLike(u,D,N)},l.prototype.toArray=function(D,N){return this.toArrayLike(Array,D,N)},l.prototype.toArrayLike=function(D,N,W){var F=this.byteLength(),V=W||Math.max(1,F);r(F<=V,"byte array longer than desired length"),r(V>0,"Requested array length <= 0"),this.strip();var U,te,J=N==="le",X=new D(V),K=this.clone();if(J){for(te=0;!K.isZero();te++)U=K.andln(255),K.iushrn(8),X[te]=U;for(;te<V;te++)X[te]=0}else{for(te=0;te<V-F;te++)X[te]=0;for(te=0;!K.isZero();te++)U=K.andln(255),K.iushrn(8),X[V-te-1]=U}return X},Math.clz32?l.prototype._countBits=function(D){return 32-Math.clz32(D)}:l.prototype._countBits=function(D){var N=D,W=0;return N>=4096&&(W+=13,N>>>=13),N>=64&&(W+=7,N>>>=7),N>=8&&(W+=4,N>>>=4),N>=2&&(W+=2,N>>>=2),W+N},l.prototype._zeroBits=function(D){if(D===0)return 26;var N=D,W=0;return(8191&N)==0&&(W+=13,N>>>=13),(127&N)==0&&(W+=7,N>>>=7),(15&N)==0&&(W+=4,N>>>=4),(3&N)==0&&(W+=2,N>>>=2),(1&N)==0&&W++,W},l.prototype.bitLength=function(){var D=this.words[this.length-1],N=this._countBits(D);return 26*(this.length-1)+N},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,N=0;N<this.length;N++){var W=this._zeroBits(this.words[N]);if(D+=W,W!==26)break}return D},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},l.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var N=0;N<D.length;N++)this.words[N]=this.words[N]|D.words[N];return this.strip()},l.prototype.ior=function(D){return r((this.negative|D.negative)==0),this.iuor(D)},l.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},l.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},l.prototype.iuand=function(D){var N;N=this.length>D.length?D:this;for(var W=0;W<N.length;W++)this.words[W]=this.words[W]&D.words[W];return this.length=N.length,this.strip()},l.prototype.iand=function(D){return r((this.negative|D.negative)==0),this.iuand(D)},l.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},l.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},l.prototype.iuxor=function(D){var N,W;this.length>D.length?(N=this,W=D):(N=D,W=this);for(var F=0;F<W.length;F++)this.words[F]=N.words[F]^W.words[F];if(this!==N)for(;F<N.length;F++)this.words[F]=N.words[F];return this.length=N.length,this.strip()},l.prototype.ixor=function(D){return r((this.negative|D.negative)==0),this.iuxor(D)},l.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},l.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},l.prototype.inotn=function(D){r(typeof D=="number"&&D>=0);var N=0|Math.ceil(D/26),W=D%26;this._expand(N),W>0&&N--;for(var F=0;F<N;F++)this.words[F]=67108863&~this.words[F];return W>0&&(this.words[F]=~this.words[F]&67108863>>26-W),this.strip()},l.prototype.notn=function(D){return this.clone().inotn(D)},l.prototype.setn=function(D,N){r(typeof D=="number"&&D>=0);var W=D/26|0,F=D%26;return this._expand(W+1),this.words[W]=N?this.words[W]|1<<F:this.words[W]&~(1<<F),this.strip()},l.prototype.iadd=function(D){var N,W,F;if(this.negative!==0&&D.negative===0)return this.negative=0,N=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,N=this.isub(D),D.negative=1,N._normSign();this.length>D.length?(W=this,F=D):(W=D,F=this);for(var V=0,U=0;U<F.length;U++)N=(0|W.words[U])+(0|F.words[U])+V,this.words[U]=67108863&N,V=N>>>26;for(;V!==0&&U<W.length;U++)N=(0|W.words[U])+V,this.words[U]=67108863&N,V=N>>>26;if(this.length=W.length,V!==0)this.words[this.length]=V,this.length++;else if(W!==this)for(;U<W.length;U++)this.words[U]=W.words[U];return this},l.prototype.add=function(D){var N;return D.negative!==0&&this.negative===0?(D.negative=0,N=this.sub(D),D.negative^=1,N):D.negative===0&&this.negative!==0?(this.negative=0,N=D.sub(this),this.negative=1,N):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},l.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var N=this.iadd(D);return D.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var W,F,V=this.cmp(D);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;V>0?(W=this,F=D):(W=D,F=this);for(var U=0,te=0;te<F.length;te++)U=(N=(0|W.words[te])-(0|F.words[te])+U)>>26,this.words[te]=67108863&N;for(;U!==0&&te<W.length;te++)U=(N=(0|W.words[te])+U)>>26,this.words[te]=67108863&N;if(U===0&&te<W.length&&W!==this)for(;te<W.length;te++)this.words[te]=W.words[te];return this.length=Math.max(this.length,te),W!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(D){return this.clone().isub(D)};var m=function(D,N,W){var F,V,U,te=D.words,J=N.words,X=W.words,K=0,Q=0|te[0],Z=8191&Q,re=Q>>>13,oe=0|te[1],ae=8191&oe,ce=oe>>>13,he=0|te[2],pe=8191&he,xe=he>>>13,be=0|te[3],ve=8191&be,ge=be>>>13,we=0|te[4],_e=8191&we,se=we>>>13,ie=0|te[5],fe=8191&ie,Ee=ie>>>13,Te=0|te[6],Ae=8191&Te,Se=Te>>>13,Oe=0|te[7],De=8191&Oe,de=Oe>>>13,me=0|te[8],Me=8191&me,ze=me>>>13,Pe=0|te[9],Ne=8191&Pe,Ve=Pe>>>13,Ye=0|J[0],at=8191&Ye,rt=Ye>>>13,dt=0|J[1],vt=8191&dt,ht=dt>>>13,et=0|J[2],$e=8191&et,wt=et>>>13,Pt=0|J[3],Ot=8191&Pt,At=Pt>>>13,He=0|J[4],Ze=8191&He,Be=He>>>13,Ge=0|J[5],it=8191&Ge,tt=Ge>>>13,Re=0|J[6],Fe=8191&Re,nt=Re>>>13,We=0|J[7],ct=8191&We,pt=We>>>13,gt=0|J[8],ut=8191&gt,kt=gt>>>13,yt=0|J[9],Mt=8191&yt,Lt=yt>>>13;W.negative=D.negative^N.negative,W.length=19;var Ct=(K+(F=Math.imul(Z,at))|0)+((8191&(V=(V=Math.imul(Z,rt))+Math.imul(re,at)|0))<<13)|0;K=((U=Math.imul(re,rt))+(V>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,F=Math.imul(ae,at),V=(V=Math.imul(ae,rt))+Math.imul(ce,at)|0,U=Math.imul(ce,rt);var It=(K+(F=F+Math.imul(Z,vt)|0)|0)+((8191&(V=(V=V+Math.imul(Z,ht)|0)+Math.imul(re,vt)|0))<<13)|0;K=((U=U+Math.imul(re,ht)|0)+(V>>>13)|0)+(It>>>26)|0,It&=67108863,F=Math.imul(pe,at),V=(V=Math.imul(pe,rt))+Math.imul(xe,at)|0,U=Math.imul(xe,rt),F=F+Math.imul(ae,vt)|0,V=(V=V+Math.imul(ae,ht)|0)+Math.imul(ce,vt)|0,U=U+Math.imul(ce,ht)|0;var Wt=(K+(F=F+Math.imul(Z,$e)|0)|0)+((8191&(V=(V=V+Math.imul(Z,wt)|0)+Math.imul(re,$e)|0))<<13)|0;K=((U=U+Math.imul(re,wt)|0)+(V>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(ve,at),V=(V=Math.imul(ve,rt))+Math.imul(ge,at)|0,U=Math.imul(ge,rt),F=F+Math.imul(pe,vt)|0,V=(V=V+Math.imul(pe,ht)|0)+Math.imul(xe,vt)|0,U=U+Math.imul(xe,ht)|0,F=F+Math.imul(ae,$e)|0,V=(V=V+Math.imul(ae,wt)|0)+Math.imul(ce,$e)|0,U=U+Math.imul(ce,wt)|0;var Nt=(K+(F=F+Math.imul(Z,Ot)|0)|0)+((8191&(V=(V=V+Math.imul(Z,At)|0)+Math.imul(re,Ot)|0))<<13)|0;K=((U=U+Math.imul(re,At)|0)+(V>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,F=Math.imul(_e,at),V=(V=Math.imul(_e,rt))+Math.imul(se,at)|0,U=Math.imul(se,rt),F=F+Math.imul(ve,vt)|0,V=(V=V+Math.imul(ve,ht)|0)+Math.imul(ge,vt)|0,U=U+Math.imul(ge,ht)|0,F=F+Math.imul(pe,$e)|0,V=(V=V+Math.imul(pe,wt)|0)+Math.imul(xe,$e)|0,U=U+Math.imul(xe,wt)|0,F=F+Math.imul(ae,Ot)|0,V=(V=V+Math.imul(ae,At)|0)+Math.imul(ce,Ot)|0,U=U+Math.imul(ce,At)|0;var Bt=(K+(F=F+Math.imul(Z,Ze)|0)|0)+((8191&(V=(V=V+Math.imul(Z,Be)|0)+Math.imul(re,Ze)|0))<<13)|0;K=((U=U+Math.imul(re,Be)|0)+(V>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,F=Math.imul(fe,at),V=(V=Math.imul(fe,rt))+Math.imul(Ee,at)|0,U=Math.imul(Ee,rt),F=F+Math.imul(_e,vt)|0,V=(V=V+Math.imul(_e,ht)|0)+Math.imul(se,vt)|0,U=U+Math.imul(se,ht)|0,F=F+Math.imul(ve,$e)|0,V=(V=V+Math.imul(ve,wt)|0)+Math.imul(ge,$e)|0,U=U+Math.imul(ge,wt)|0,F=F+Math.imul(pe,Ot)|0,V=(V=V+Math.imul(pe,At)|0)+Math.imul(xe,Ot)|0,U=U+Math.imul(xe,At)|0,F=F+Math.imul(ae,Ze)|0,V=(V=V+Math.imul(ae,Be)|0)+Math.imul(ce,Ze)|0,U=U+Math.imul(ce,Be)|0;var Ht=(K+(F=F+Math.imul(Z,it)|0)|0)+((8191&(V=(V=V+Math.imul(Z,tt)|0)+Math.imul(re,it)|0))<<13)|0;K=((U=U+Math.imul(re,tt)|0)+(V>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,F=Math.imul(Ae,at),V=(V=Math.imul(Ae,rt))+Math.imul(Se,at)|0,U=Math.imul(Se,rt),F=F+Math.imul(fe,vt)|0,V=(V=V+Math.imul(fe,ht)|0)+Math.imul(Ee,vt)|0,U=U+Math.imul(Ee,ht)|0,F=F+Math.imul(_e,$e)|0,V=(V=V+Math.imul(_e,wt)|0)+Math.imul(se,$e)|0,U=U+Math.imul(se,wt)|0,F=F+Math.imul(ve,Ot)|0,V=(V=V+Math.imul(ve,At)|0)+Math.imul(ge,Ot)|0,U=U+Math.imul(ge,At)|0,F=F+Math.imul(pe,Ze)|0,V=(V=V+Math.imul(pe,Be)|0)+Math.imul(xe,Ze)|0,U=U+Math.imul(xe,Be)|0,F=F+Math.imul(ae,it)|0,V=(V=V+Math.imul(ae,tt)|0)+Math.imul(ce,it)|0,U=U+Math.imul(ce,tt)|0;var Qt=(K+(F=F+Math.imul(Z,Fe)|0)|0)+((8191&(V=(V=V+Math.imul(Z,nt)|0)+Math.imul(re,Fe)|0))<<13)|0;K=((U=U+Math.imul(re,nt)|0)+(V>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,F=Math.imul(De,at),V=(V=Math.imul(De,rt))+Math.imul(de,at)|0,U=Math.imul(de,rt),F=F+Math.imul(Ae,vt)|0,V=(V=V+Math.imul(Ae,ht)|0)+Math.imul(Se,vt)|0,U=U+Math.imul(Se,ht)|0,F=F+Math.imul(fe,$e)|0,V=(V=V+Math.imul(fe,wt)|0)+Math.imul(Ee,$e)|0,U=U+Math.imul(Ee,wt)|0,F=F+Math.imul(_e,Ot)|0,V=(V=V+Math.imul(_e,At)|0)+Math.imul(se,Ot)|0,U=U+Math.imul(se,At)|0,F=F+Math.imul(ve,Ze)|0,V=(V=V+Math.imul(ve,Be)|0)+Math.imul(ge,Ze)|0,U=U+Math.imul(ge,Be)|0,F=F+Math.imul(pe,it)|0,V=(V=V+Math.imul(pe,tt)|0)+Math.imul(xe,it)|0,U=U+Math.imul(xe,tt)|0,F=F+Math.imul(ae,Fe)|0,V=(V=V+Math.imul(ae,nt)|0)+Math.imul(ce,Fe)|0,U=U+Math.imul(ce,nt)|0;var Cn=(K+(F=F+Math.imul(Z,ct)|0)|0)+((8191&(V=(V=V+Math.imul(Z,pt)|0)+Math.imul(re,ct)|0))<<13)|0;K=((U=U+Math.imul(re,pt)|0)+(V>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,F=Math.imul(Me,at),V=(V=Math.imul(Me,rt))+Math.imul(ze,at)|0,U=Math.imul(ze,rt),F=F+Math.imul(De,vt)|0,V=(V=V+Math.imul(De,ht)|0)+Math.imul(de,vt)|0,U=U+Math.imul(de,ht)|0,F=F+Math.imul(Ae,$e)|0,V=(V=V+Math.imul(Ae,wt)|0)+Math.imul(Se,$e)|0,U=U+Math.imul(Se,wt)|0,F=F+Math.imul(fe,Ot)|0,V=(V=V+Math.imul(fe,At)|0)+Math.imul(Ee,Ot)|0,U=U+Math.imul(Ee,At)|0,F=F+Math.imul(_e,Ze)|0,V=(V=V+Math.imul(_e,Be)|0)+Math.imul(se,Ze)|0,U=U+Math.imul(se,Be)|0,F=F+Math.imul(ve,it)|0,V=(V=V+Math.imul(ve,tt)|0)+Math.imul(ge,it)|0,U=U+Math.imul(ge,tt)|0,F=F+Math.imul(pe,Fe)|0,V=(V=V+Math.imul(pe,nt)|0)+Math.imul(xe,Fe)|0,U=U+Math.imul(xe,nt)|0,F=F+Math.imul(ae,ct)|0,V=(V=V+Math.imul(ae,pt)|0)+Math.imul(ce,ct)|0,U=U+Math.imul(ce,pt)|0;var Tn=(K+(F=F+Math.imul(Z,ut)|0)|0)+((8191&(V=(V=V+Math.imul(Z,kt)|0)+Math.imul(re,ut)|0))<<13)|0;K=((U=U+Math.imul(re,kt)|0)+(V>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,F=Math.imul(Ne,at),V=(V=Math.imul(Ne,rt))+Math.imul(Ve,at)|0,U=Math.imul(Ve,rt),F=F+Math.imul(Me,vt)|0,V=(V=V+Math.imul(Me,ht)|0)+Math.imul(ze,vt)|0,U=U+Math.imul(ze,ht)|0,F=F+Math.imul(De,$e)|0,V=(V=V+Math.imul(De,wt)|0)+Math.imul(de,$e)|0,U=U+Math.imul(de,wt)|0,F=F+Math.imul(Ae,Ot)|0,V=(V=V+Math.imul(Ae,At)|0)+Math.imul(Se,Ot)|0,U=U+Math.imul(Se,At)|0,F=F+Math.imul(fe,Ze)|0,V=(V=V+Math.imul(fe,Be)|0)+Math.imul(Ee,Ze)|0,U=U+Math.imul(Ee,Be)|0,F=F+Math.imul(_e,it)|0,V=(V=V+Math.imul(_e,tt)|0)+Math.imul(se,it)|0,U=U+Math.imul(se,tt)|0,F=F+Math.imul(ve,Fe)|0,V=(V=V+Math.imul(ve,nt)|0)+Math.imul(ge,Fe)|0,U=U+Math.imul(ge,nt)|0,F=F+Math.imul(pe,ct)|0,V=(V=V+Math.imul(pe,pt)|0)+Math.imul(xe,ct)|0,U=U+Math.imul(xe,pt)|0,F=F+Math.imul(ae,ut)|0,V=(V=V+Math.imul(ae,kt)|0)+Math.imul(ce,ut)|0,U=U+Math.imul(ce,kt)|0;var hn=(K+(F=F+Math.imul(Z,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(Z,Lt)|0)+Math.imul(re,Mt)|0))<<13)|0;K=((U=U+Math.imul(re,Lt)|0)+(V>>>13)|0)+(hn>>>26)|0,hn&=67108863,F=Math.imul(Ne,vt),V=(V=Math.imul(Ne,ht))+Math.imul(Ve,vt)|0,U=Math.imul(Ve,ht),F=F+Math.imul(Me,$e)|0,V=(V=V+Math.imul(Me,wt)|0)+Math.imul(ze,$e)|0,U=U+Math.imul(ze,wt)|0,F=F+Math.imul(De,Ot)|0,V=(V=V+Math.imul(De,At)|0)+Math.imul(de,Ot)|0,U=U+Math.imul(de,At)|0,F=F+Math.imul(Ae,Ze)|0,V=(V=V+Math.imul(Ae,Be)|0)+Math.imul(Se,Ze)|0,U=U+Math.imul(Se,Be)|0,F=F+Math.imul(fe,it)|0,V=(V=V+Math.imul(fe,tt)|0)+Math.imul(Ee,it)|0,U=U+Math.imul(Ee,tt)|0,F=F+Math.imul(_e,Fe)|0,V=(V=V+Math.imul(_e,nt)|0)+Math.imul(se,Fe)|0,U=U+Math.imul(se,nt)|0,F=F+Math.imul(ve,ct)|0,V=(V=V+Math.imul(ve,pt)|0)+Math.imul(ge,ct)|0,U=U+Math.imul(ge,pt)|0,F=F+Math.imul(pe,ut)|0,V=(V=V+Math.imul(pe,kt)|0)+Math.imul(xe,ut)|0,U=U+Math.imul(xe,kt)|0;var Zt=(K+(F=F+Math.imul(ae,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(ae,Lt)|0)+Math.imul(ce,Mt)|0))<<13)|0;K=((U=U+Math.imul(ce,Lt)|0)+(V>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,F=Math.imul(Ne,$e),V=(V=Math.imul(Ne,wt))+Math.imul(Ve,$e)|0,U=Math.imul(Ve,wt),F=F+Math.imul(Me,Ot)|0,V=(V=V+Math.imul(Me,At)|0)+Math.imul(ze,Ot)|0,U=U+Math.imul(ze,At)|0,F=F+Math.imul(De,Ze)|0,V=(V=V+Math.imul(De,Be)|0)+Math.imul(de,Ze)|0,U=U+Math.imul(de,Be)|0,F=F+Math.imul(Ae,it)|0,V=(V=V+Math.imul(Ae,tt)|0)+Math.imul(Se,it)|0,U=U+Math.imul(Se,tt)|0,F=F+Math.imul(fe,Fe)|0,V=(V=V+Math.imul(fe,nt)|0)+Math.imul(Ee,Fe)|0,U=U+Math.imul(Ee,nt)|0,F=F+Math.imul(_e,ct)|0,V=(V=V+Math.imul(_e,pt)|0)+Math.imul(se,ct)|0,U=U+Math.imul(se,pt)|0,F=F+Math.imul(ve,ut)|0,V=(V=V+Math.imul(ve,kt)|0)+Math.imul(ge,ut)|0,U=U+Math.imul(ge,kt)|0;var an=(K+(F=F+Math.imul(pe,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(pe,Lt)|0)+Math.imul(xe,Mt)|0))<<13)|0;K=((U=U+Math.imul(xe,Lt)|0)+(V>>>13)|0)+(an>>>26)|0,an&=67108863,F=Math.imul(Ne,Ot),V=(V=Math.imul(Ne,At))+Math.imul(Ve,Ot)|0,U=Math.imul(Ve,At),F=F+Math.imul(Me,Ze)|0,V=(V=V+Math.imul(Me,Be)|0)+Math.imul(ze,Ze)|0,U=U+Math.imul(ze,Be)|0,F=F+Math.imul(De,it)|0,V=(V=V+Math.imul(De,tt)|0)+Math.imul(de,it)|0,U=U+Math.imul(de,tt)|0,F=F+Math.imul(Ae,Fe)|0,V=(V=V+Math.imul(Ae,nt)|0)+Math.imul(Se,Fe)|0,U=U+Math.imul(Se,nt)|0,F=F+Math.imul(fe,ct)|0,V=(V=V+Math.imul(fe,pt)|0)+Math.imul(Ee,ct)|0,U=U+Math.imul(Ee,pt)|0,F=F+Math.imul(_e,ut)|0,V=(V=V+Math.imul(_e,kt)|0)+Math.imul(se,ut)|0,U=U+Math.imul(se,kt)|0;var $t=(K+(F=F+Math.imul(ve,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(ve,Lt)|0)+Math.imul(ge,Mt)|0))<<13)|0;K=((U=U+Math.imul(ge,Lt)|0)+(V>>>13)|0)+($t>>>26)|0,$t&=67108863,F=Math.imul(Ne,Ze),V=(V=Math.imul(Ne,Be))+Math.imul(Ve,Ze)|0,U=Math.imul(Ve,Be),F=F+Math.imul(Me,it)|0,V=(V=V+Math.imul(Me,tt)|0)+Math.imul(ze,it)|0,U=U+Math.imul(ze,tt)|0,F=F+Math.imul(De,Fe)|0,V=(V=V+Math.imul(De,nt)|0)+Math.imul(de,Fe)|0,U=U+Math.imul(de,nt)|0,F=F+Math.imul(Ae,ct)|0,V=(V=V+Math.imul(Ae,pt)|0)+Math.imul(Se,ct)|0,U=U+Math.imul(Se,pt)|0,F=F+Math.imul(fe,ut)|0,V=(V=V+Math.imul(fe,kt)|0)+Math.imul(Ee,ut)|0,U=U+Math.imul(Ee,kt)|0;var ln=(K+(F=F+Math.imul(_e,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(_e,Lt)|0)+Math.imul(se,Mt)|0))<<13)|0;K=((U=U+Math.imul(se,Lt)|0)+(V>>>13)|0)+(ln>>>26)|0,ln&=67108863,F=Math.imul(Ne,it),V=(V=Math.imul(Ne,tt))+Math.imul(Ve,it)|0,U=Math.imul(Ve,tt),F=F+Math.imul(Me,Fe)|0,V=(V=V+Math.imul(Me,nt)|0)+Math.imul(ze,Fe)|0,U=U+Math.imul(ze,nt)|0,F=F+Math.imul(De,ct)|0,V=(V=V+Math.imul(De,pt)|0)+Math.imul(de,ct)|0,U=U+Math.imul(de,pt)|0,F=F+Math.imul(Ae,ut)|0,V=(V=V+Math.imul(Ae,kt)|0)+Math.imul(Se,ut)|0,U=U+Math.imul(Se,kt)|0;var mn=(K+(F=F+Math.imul(fe,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(fe,Lt)|0)+Math.imul(Ee,Mt)|0))<<13)|0;K=((U=U+Math.imul(Ee,Lt)|0)+(V>>>13)|0)+(mn>>>26)|0,mn&=67108863,F=Math.imul(Ne,Fe),V=(V=Math.imul(Ne,nt))+Math.imul(Ve,Fe)|0,U=Math.imul(Ve,nt),F=F+Math.imul(Me,ct)|0,V=(V=V+Math.imul(Me,pt)|0)+Math.imul(ze,ct)|0,U=U+Math.imul(ze,pt)|0,F=F+Math.imul(De,ut)|0,V=(V=V+Math.imul(De,kt)|0)+Math.imul(de,ut)|0,U=U+Math.imul(de,kt)|0;var xn=(K+(F=F+Math.imul(Ae,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(Ae,Lt)|0)+Math.imul(Se,Mt)|0))<<13)|0;K=((U=U+Math.imul(Se,Lt)|0)+(V>>>13)|0)+(xn>>>26)|0,xn&=67108863,F=Math.imul(Ne,ct),V=(V=Math.imul(Ne,pt))+Math.imul(Ve,ct)|0,U=Math.imul(Ve,pt),F=F+Math.imul(Me,ut)|0,V=(V=V+Math.imul(Me,kt)|0)+Math.imul(ze,ut)|0,U=U+Math.imul(ze,kt)|0;var Pn=(K+(F=F+Math.imul(De,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(De,Lt)|0)+Math.imul(de,Mt)|0))<<13)|0;K=((U=U+Math.imul(de,Lt)|0)+(V>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,F=Math.imul(Ne,ut),V=(V=Math.imul(Ne,kt))+Math.imul(Ve,ut)|0,U=Math.imul(Ve,kt);var Mn=(K+(F=F+Math.imul(Me,Mt)|0)|0)+((8191&(V=(V=V+Math.imul(Me,Lt)|0)+Math.imul(ze,Mt)|0))<<13)|0;K=((U=U+Math.imul(ze,Lt)|0)+(V>>>13)|0)+(Mn>>>26)|0,Mn&=67108863;var _n=(K+(F=Math.imul(Ne,Mt))|0)+((8191&(V=(V=Math.imul(Ne,Lt))+Math.imul(Ve,Mt)|0))<<13)|0;return K=((U=Math.imul(Ve,Lt))+(V>>>13)|0)+(_n>>>26)|0,_n&=67108863,X[0]=Ct,X[1]=It,X[2]=Wt,X[3]=Nt,X[4]=Bt,X[5]=Ht,X[6]=Qt,X[7]=Cn,X[8]=Tn,X[9]=hn,X[10]=Zt,X[11]=an,X[12]=$t,X[13]=ln,X[14]=mn,X[15]=xn,X[16]=Pn,X[17]=Mn,X[18]=_n,K!==0&&(X[19]=K,W.length++),W};function _(D,N,W){return new f().mulp(D,N,W)}function f(D,N){this.x=D,this.y=N}Math.imul||(m=y),l.prototype.mulTo=function(D,N){var W,F=this.length+D.length;return W=this.length===10&&D.length===10?m(this,D,N):F<63?y(this,D,N):F<1024?function(V,U,te){te.negative=U.negative^V.negative,te.length=V.length+U.length;for(var J=0,X=0,K=0;K<te.length-1;K++){var Q=X;X=0;for(var Z=67108863&J,re=Math.min(K,U.length-1),oe=Math.max(0,K-V.length+1);oe<=re;oe++){var ae=K-oe,ce=(0|V.words[ae])*(0|U.words[oe]),he=67108863&ce;Z=67108863&(he=he+Z|0),X+=(Q=(Q=Q+(ce/67108864|0)|0)+(he>>>26)|0)>>>26,Q&=67108863}te.words[K]=Z,J=Q,Q=X}return J!==0?te.words[K]=J:te.length--,te.strip()}(this,D,N):_(this,D,N),W},f.prototype.makeRBT=function(D){for(var N=new Array(D),W=l.prototype._countBits(D)-1,F=0;F<D;F++)N[F]=this.revBin(F,W,D);return N},f.prototype.revBin=function(D,N,W){if(D===0||D===W-1)return D;for(var F=0,V=0;V<N;V++)F|=(1&D)<<N-V-1,D>>=1;return F},f.prototype.permute=function(D,N,W,F,V,U){for(var te=0;te<U;te++)F[te]=N[D[te]],V[te]=W[D[te]]},f.prototype.transform=function(D,N,W,F,V,U){this.permute(U,D,N,W,F,V);for(var te=1;te<V;te<<=1)for(var J=te<<1,X=Math.cos(2*Math.PI/J),K=Math.sin(2*Math.PI/J),Q=0;Q<V;Q+=J)for(var Z=X,re=K,oe=0;oe<te;oe++){var ae=W[Q+oe],ce=F[Q+oe],he=W[Q+oe+te],pe=F[Q+oe+te],xe=Z*he-re*pe;pe=Z*pe+re*he,he=xe,W[Q+oe]=ae+he,F[Q+oe]=ce+pe,W[Q+oe+te]=ae-he,F[Q+oe+te]=ce-pe,oe!==J&&(xe=X*Z-K*re,re=X*re+K*Z,Z=xe)}},f.prototype.guessLen13b=function(D,N){var W=1|Math.max(N,D),F=1&W,V=0;for(W=W/2|0;W;W>>>=1)V++;return 1<<V+1+F},f.prototype.conjugate=function(D,N,W){if(!(W<=1))for(var F=0;F<W/2;F++){var V=D[F];D[F]=D[W-F-1],D[W-F-1]=V,V=N[F],N[F]=-N[W-F-1],N[W-F-1]=-V}},f.prototype.normalize13b=function(D,N){for(var W=0,F=0;F<N/2;F++){var V=8192*Math.round(D[2*F+1]/N)+Math.round(D[2*F]/N)+W;D[F]=67108863&V,W=V<67108864?0:V/67108864|0}return D},f.prototype.convert13b=function(D,N,W,F){for(var V=0,U=0;U<N;U++)V+=0|D[U],W[2*U]=8191&V,V>>>=13,W[2*U+1]=8191&V,V>>>=13;for(U=2*N;U<F;++U)W[U]=0;r(V===0),r((-8192&V)==0)},f.prototype.stub=function(D){for(var N=new Array(D),W=0;W<D;W++)N[W]=0;return N},f.prototype.mulp=function(D,N,W){var F=2*this.guessLen13b(D.length,N.length),V=this.makeRBT(F),U=this.stub(F),te=new Array(F),J=new Array(F),X=new Array(F),K=new Array(F),Q=new Array(F),Z=new Array(F),re=W.words;re.length=F,this.convert13b(D.words,D.length,te,F),this.convert13b(N.words,N.length,K,F),this.transform(te,U,J,X,F,V),this.transform(K,U,Q,Z,F,V);for(var oe=0;oe<F;oe++){var ae=J[oe]*Q[oe]-X[oe]*Z[oe];X[oe]=J[oe]*Z[oe]+X[oe]*Q[oe],J[oe]=ae}return this.conjugate(J,X,F),this.transform(J,X,re,U,F,V),this.conjugate(re,U,F),this.normalize13b(re,F),W.negative=D.negative^N.negative,W.length=D.length+N.length,W.strip()},l.prototype.mul=function(D){var N=new l(null);return N.words=new Array(this.length+D.length),this.mulTo(D,N)},l.prototype.mulf=function(D){var N=new l(null);return N.words=new Array(this.length+D.length),_(this,D,N)},l.prototype.imul=function(D){return this.clone().mulTo(D,this)},l.prototype.imuln=function(D){r(typeof D=="number"),r(D<67108864);for(var N=0,W=0;W<this.length;W++){var F=(0|this.words[W])*D,V=(67108863&F)+(67108863&N);N>>=26,N+=F/67108864|0,N+=V>>>26,this.words[W]=67108863&V}return N!==0&&(this.words[W]=N,this.length++),this},l.prototype.muln=function(D){return this.clone().imuln(D)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(D){var N=function(U){for(var te=new Array(U.bitLength()),J=0;J<te.length;J++){var X=J/26|0,K=J%26;te[J]=(U.words[X]&1<<K)>>>K}return te}(D);if(N.length===0)return new l(1);for(var W=this,F=0;F<N.length&&N[F]===0;F++,W=W.sqr());if(++F<N.length)for(var V=W.sqr();F<N.length;F++,V=V.sqr())N[F]!==0&&(W=W.mul(V));return W},l.prototype.iushln=function(D){r(typeof D=="number"&&D>=0);var N,W=D%26,F=(D-W)/26,V=67108863>>>26-W<<26-W;if(W!==0){var U=0;for(N=0;N<this.length;N++){var te=this.words[N]&V,J=(0|this.words[N])-te<<W;this.words[N]=J|U,U=te>>>26-W}U&&(this.words[N]=U,this.length++)}if(F!==0){for(N=this.length-1;N>=0;N--)this.words[N+F]=this.words[N];for(N=0;N<F;N++)this.words[N]=0;this.length+=F}return this.strip()},l.prototype.ishln=function(D){return r(this.negative===0),this.iushln(D)},l.prototype.iushrn=function(D,N,W){var F;r(typeof D=="number"&&D>=0),F=N?(N-N%26)/26:0;var V=D%26,U=Math.min((D-V)/26,this.length),te=67108863^67108863>>>V<<V,J=W;if(F-=U,F=Math.max(0,F),J){for(var X=0;X<U;X++)J.words[X]=this.words[X];J.length=U}if(U!==0)if(this.length>U)for(this.length-=U,X=0;X<this.length;X++)this.words[X]=this.words[X+U];else this.words[0]=0,this.length=1;var K=0;for(X=this.length-1;X>=0&&(K!==0||X>=F);X--){var Q=0|this.words[X];this.words[X]=K<<26-V|Q>>>V,K=Q&te}return J&&K!==0&&(J.words[J.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(D,N,W){return r(this.negative===0),this.iushrn(D,N,W)},l.prototype.shln=function(D){return this.clone().ishln(D)},l.prototype.ushln=function(D){return this.clone().iushln(D)},l.prototype.shrn=function(D){return this.clone().ishrn(D)},l.prototype.ushrn=function(D){return this.clone().iushrn(D)},l.prototype.testn=function(D){r(typeof D=="number"&&D>=0);var N=D%26,W=(D-N)/26,F=1<<N;return!(this.length<=W||!(this.words[W]&F))},l.prototype.imaskn=function(D){r(typeof D=="number"&&D>=0);var N=D%26,W=(D-N)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(N!==0&&W++,this.length=Math.min(W,this.length),N!==0){var F=67108863^67108863>>>N<<N;this.words[this.length-1]&=F}return this.strip()},l.prototype.maskn=function(D){return this.clone().imaskn(D)},l.prototype.iaddn=function(D){return r(typeof D=="number"),r(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},l.prototype._iaddn=function(D){this.words[0]+=D;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},l.prototype.isubn=function(D){if(r(typeof D=="number"),r(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},l.prototype.addn=function(D){return this.clone().iaddn(D)},l.prototype.subn=function(D){return this.clone().isubn(D)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(D,N,W){var F,V,U=D.length+W;this._expand(U);var te=0;for(F=0;F<D.length;F++){V=(0|this.words[F+W])+te;var J=(0|D.words[F])*N;te=((V-=67108863&J)>>26)-(J/67108864|0),this.words[F+W]=67108863&V}for(;F<this.length-W;F++)te=(V=(0|this.words[F+W])+te)>>26,this.words[F+W]=67108863&V;if(te===0)return this.strip();for(r(te===-1),te=0,F=0;F<this.length;F++)te=(V=-(0|this.words[F])+te)>>26,this.words[F]=67108863&V;return this.negative=1,this.strip()},l.prototype._wordDiv=function(D,N){var W=(this.length,D.length),F=this.clone(),V=D,U=0|V.words[V.length-1];(W=26-this._countBits(U))!=0&&(V=V.ushln(W),F.iushln(W),U=0|V.words[V.length-1]);var te,J=F.length-V.length;if(N!=="mod"){(te=new l(null)).length=J+1,te.words=new Array(te.length);for(var X=0;X<te.length;X++)te.words[X]=0}var K=F.clone()._ishlnsubmul(V,1,J);K.negative===0&&(F=K,te&&(te.words[J]=1));for(var Q=J-1;Q>=0;Q--){var Z=67108864*(0|F.words[V.length+Q])+(0|F.words[V.length+Q-1]);for(Z=Math.min(Z/U|0,67108863),F._ishlnsubmul(V,Z,Q);F.negative!==0;)Z--,F.negative=0,F._ishlnsubmul(V,1,Q),F.isZero()||(F.negative^=1);te&&(te.words[Q]=Z)}return te&&te.strip(),F.strip(),N!=="div"&&W!==0&&F.iushrn(W),{div:te||null,mod:F}},l.prototype.divmod=function(D,N,W){return r(!D.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&D.negative===0?(U=this.neg().divmod(D,N),N!=="mod"&&(F=U.div.neg()),N!=="div"&&(V=U.mod.neg(),W&&V.negative!==0&&V.iadd(D)),{div:F,mod:V}):this.negative===0&&D.negative!==0?(U=this.divmod(D.neg(),N),N!=="mod"&&(F=U.div.neg()),{div:F,mod:U.mod}):(this.negative&D.negative)!=0?(U=this.neg().divmod(D.neg(),N),N!=="div"&&(V=U.mod.neg(),W&&V.negative!==0&&V.isub(D)),{div:U.div,mod:V}):D.length>this.length||this.cmp(D)<0?{div:new l(0),mod:this}:D.length===1?N==="div"?{div:this.divn(D.words[0]),mod:null}:N==="mod"?{div:null,mod:new l(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new l(this.modn(D.words[0]))}:this._wordDiv(D,N);var F,V,U},l.prototype.div=function(D){return this.divmod(D,"div",!1).div},l.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},l.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},l.prototype.divRound=function(D){var N=this.divmod(D);if(N.mod.isZero())return N.div;var W=N.div.negative!==0?N.mod.isub(D):N.mod,F=D.ushrn(1),V=D.andln(1),U=W.cmp(F);return U<0||V===1&&U===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},l.prototype.modn=function(D){r(D<=67108863);for(var N=67108864%D,W=0,F=this.length-1;F>=0;F--)W=(N*W+(0|this.words[F]))%D;return W},l.prototype.idivn=function(D){r(D<=67108863);for(var N=0,W=this.length-1;W>=0;W--){var F=(0|this.words[W])+67108864*N;this.words[W]=F/D|0,N=F%D}return this.strip()},l.prototype.divn=function(D){return this.clone().idivn(D)},l.prototype.egcd=function(D){r(D.negative===0),r(!D.isZero());var N=this,W=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var F=new l(1),V=new l(0),U=new l(0),te=new l(1),J=0;N.isEven()&&W.isEven();)N.iushrn(1),W.iushrn(1),++J;for(var X=W.clone(),K=N.clone();!N.isZero();){for(var Q=0,Z=1;(N.words[0]&Z)==0&&Q<26;++Q,Z<<=1);if(Q>0)for(N.iushrn(Q);Q-- >0;)(F.isOdd()||V.isOdd())&&(F.iadd(X),V.isub(K)),F.iushrn(1),V.iushrn(1);for(var re=0,oe=1;(W.words[0]&oe)==0&&re<26;++re,oe<<=1);if(re>0)for(W.iushrn(re);re-- >0;)(U.isOdd()||te.isOdd())&&(U.iadd(X),te.isub(K)),U.iushrn(1),te.iushrn(1);N.cmp(W)>=0?(N.isub(W),F.isub(U),V.isub(te)):(W.isub(N),U.isub(F),te.isub(V))}return{a:U,b:te,gcd:W.iushln(J)}},l.prototype._invmp=function(D){r(D.negative===0),r(!D.isZero());var N=this,W=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var F,V=new l(1),U=new l(0),te=W.clone();N.cmpn(1)>0&&W.cmpn(1)>0;){for(var J=0,X=1;(N.words[0]&X)==0&&J<26;++J,X<<=1);if(J>0)for(N.iushrn(J);J-- >0;)V.isOdd()&&V.iadd(te),V.iushrn(1);for(var K=0,Q=1;(W.words[0]&Q)==0&&K<26;++K,Q<<=1);if(K>0)for(W.iushrn(K);K-- >0;)U.isOdd()&&U.iadd(te),U.iushrn(1);N.cmp(W)>=0?(N.isub(W),V.isub(U)):(W.isub(N),U.isub(V))}return(F=N.cmpn(1)===0?V:U).cmpn(0)<0&&F.iadd(D),F},l.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var N=this.clone(),W=D.clone();N.negative=0,W.negative=0;for(var F=0;N.isEven()&&W.isEven();F++)N.iushrn(1),W.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;W.isEven();)W.iushrn(1);var V=N.cmp(W);if(V<0){var U=N;N=W,W=U}else if(V===0||W.cmpn(1)===0)break;N.isub(W)}return W.iushln(F)},l.prototype.invm=function(D){return this.egcd(D).a.umod(D)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(D){return this.words[0]&D},l.prototype.bincn=function(D){r(typeof D=="number");var N=D%26,W=(D-N)/26,F=1<<N;if(this.length<=W)return this._expand(W+1),this.words[W]|=F,this;for(var V=F,U=W;V!==0&&U<this.length;U++){var te=0|this.words[U];V=(te+=V)>>>26,te&=67108863,this.words[U]=te}return V!==0&&(this.words[U]=V,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(D){var N,W=D<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;if(this.strip(),this.length>1)N=1;else{W&&(D=-D),r(D<=67108863,"Number is too big");var F=0|this.words[0];N=F===D?0:F<D?-1:1}return this.negative!==0?0|-N:N},l.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var N=this.ucmp(D);return this.negative!==0?0|-N:N},l.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var N=0,W=this.length-1;W>=0;W--){var F=0|this.words[W],V=0|D.words[W];if(F!==V){F<V?N=-1:F>V&&(N=1);break}}return N},l.prototype.gtn=function(D){return this.cmpn(D)===1},l.prototype.gt=function(D){return this.cmp(D)===1},l.prototype.gten=function(D){return this.cmpn(D)>=0},l.prototype.gte=function(D){return this.cmp(D)>=0},l.prototype.ltn=function(D){return this.cmpn(D)===-1},l.prototype.lt=function(D){return this.cmp(D)===-1},l.prototype.lten=function(D){return this.cmpn(D)<=0},l.prototype.lte=function(D){return this.cmp(D)<=0},l.prototype.eqn=function(D){return this.cmpn(D)===0},l.prototype.eq=function(D){return this.cmp(D)===0},l.red=function(D){return new R(D)},l.prototype.toRed=function(D){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},l.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(D){return this.red=D,this},l.prototype.forceRed=function(D){return r(!this.red,"Already a number in reduction context"),this._forceRed(D)},l.prototype.redAdd=function(D){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},l.prototype.redIAdd=function(D){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},l.prototype.redSub=function(D){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},l.prototype.redISub=function(D){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},l.prototype.redShl=function(D){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},l.prototype.redMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},l.prototype.redIMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},l.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(D){return r(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var S={k256:null,p224:null,p192:null,p25519:null};function w(D,N){this.name=D,this.p=new l(N,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function O(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(D){if(typeof D=="string"){var N=l._prime(D);this.m=N.p,this.prime=N}else r(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}function j(D){R.call(this,D),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var D=new l(null);return D.words=new Array(Math.ceil(this.n/13)),D},w.prototype.ireduce=function(D){var N,W=D;do this.split(W,this.tmp),N=(W=(W=this.imulK(W)).iadd(this.tmp)).bitLength();while(N>this.n);var F=N<this.n?-1:W.ucmp(this.p);return F===0?(W.words[0]=0,W.length=1):F>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},w.prototype.split=function(D,N){D.iushrn(this.n,0,N)},w.prototype.imulK=function(D){return D.imul(this.k)},i(E,w),E.prototype.split=function(D,N){for(var W=4194303,F=Math.min(D.length,9),V=0;V<F;V++)N.words[V]=D.words[V];if(N.length=F,D.length<=9)return D.words[0]=0,void(D.length=1);var U=D.words[9];for(N.words[N.length++]=U&W,V=10;V<D.length;V++){var te=0|D.words[V];D.words[V-10]=(te&W)<<4|U>>>22,U=te}U>>>=22,D.words[V-10]=U,U===0&&D.length>10?D.length-=10:D.length-=9},E.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var N=0,W=0;W<D.length;W++){var F=0|D.words[W];N+=977*F,D.words[W]=67108863&N,N=64*F+(N/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D},i(O,w),i(C,w),i(P,w),P.prototype.imulK=function(D){for(var N=0,W=0;W<D.length;W++){var F=19*(0|D.words[W])+N,V=67108863&F;F>>>=26,D.words[W]=V,N=F}return N!==0&&(D.words[D.length++]=N),D},l._prime=function(D){if(S[D])return S[D];var N;if(D==="k256")N=new E;else if(D==="p224")N=new O;else if(D==="p192")N=new C;else{if(D!=="p25519")throw new Error("Unknown prime "+D);N=new P}return S[D]=N,N},R.prototype._verify1=function(D){r(D.negative===0,"red works only with positives"),r(D.red,"red works only with red numbers")},R.prototype._verify2=function(D,N){r((D.negative|N.negative)==0,"red works only with positives"),r(D.red&&D.red===N.red,"red works only with red numbers")},R.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},R.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},R.prototype.add=function(D,N){this._verify2(D,N);var W=D.add(N);return W.cmp(this.m)>=0&&W.isub(this.m),W._forceRed(this)},R.prototype.iadd=function(D,N){this._verify2(D,N);var W=D.iadd(N);return W.cmp(this.m)>=0&&W.isub(this.m),W},R.prototype.sub=function(D,N){this._verify2(D,N);var W=D.sub(N);return W.cmpn(0)<0&&W.iadd(this.m),W._forceRed(this)},R.prototype.isub=function(D,N){this._verify2(D,N);var W=D.isub(N);return W.cmpn(0)<0&&W.iadd(this.m),W},R.prototype.shl=function(D,N){return this._verify1(D),this.imod(D.ushln(N))},R.prototype.imul=function(D,N){return this._verify2(D,N),this.imod(D.imul(N))},R.prototype.mul=function(D,N){return this._verify2(D,N),this.imod(D.mul(N))},R.prototype.isqr=function(D){return this.imul(D,D.clone())},R.prototype.sqr=function(D){return this.mul(D,D)},R.prototype.sqrt=function(D){if(D.isZero())return D.clone();var N=this.m.andln(3);if(r(N%2==1),N===3){var W=this.m.add(new l(1)).iushrn(2);return this.pow(D,W)}for(var F=this.m.subn(1),V=0;!F.isZero()&&F.andln(1)===0;)V++,F.iushrn(1);r(!F.isZero());var U=new l(1).toRed(this),te=U.redNeg(),J=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new l(2*X*X).toRed(this);this.pow(X,J).cmp(te)!==0;)X.redIAdd(te);for(var K=this.pow(X,F),Q=this.pow(D,F.addn(1).iushrn(1)),Z=this.pow(D,F),re=V;Z.cmp(U)!==0;){for(var oe=Z,ae=0;oe.cmp(U)!==0;ae++)oe=oe.redSqr();r(ae<re);var ce=this.pow(K,new l(1).iushln(re-ae-1));Q=Q.redMul(ce),K=ce.redSqr(),Z=Z.redMul(K),re=ae}return Q},R.prototype.invm=function(D){var N=D._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},R.prototype.pow=function(D,N){if(N.isZero())return new l(1).toRed(this);if(N.cmpn(1)===0)return D.clone();var W=new Array(16);W[0]=new l(1).toRed(this),W[1]=D;for(var F=2;F<W.length;F++)W[F]=this.mul(W[F-1],D);var V=W[0],U=0,te=0,J=N.bitLength()%26;for(J===0&&(J=26),F=N.length-1;F>=0;F--){for(var X=N.words[F],K=J-1;K>=0;K--){var Q=X>>K&1;V!==W[0]&&(V=this.sqr(V)),Q!==0||U!==0?(U<<=1,U|=Q,(++te==4||F===0&&K===0)&&(V=this.mul(V,W[U]),te=0,U=0)):te=0}J=26}return V},R.prototype.convertTo=function(D){var N=D.umod(this.m);return N===D?N.clone():N},R.prototype.convertFrom=function(D){var N=D.clone();return N.red=null,N},l.mont=function(D){return new j(D)},i(j,R),j.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},j.prototype.convertFrom=function(D){var N=this.imod(D.mul(this.rinv));return N.red=null,N},j.prototype.imul=function(D,N){if(D.isZero()||N.isZero())return D.words[0]=0,D.length=1,D;var W=D.imul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=W.isub(F).iushrn(this.shift),U=V;return V.cmp(this.m)>=0?U=V.isub(this.m):V.cmpn(0)<0&&(U=V.iadd(this.m)),U._forceRed(this)},j.prototype.mul=function(D,N){if(D.isZero()||N.isZero())return new l(0)._forceRed(this);var W=D.mul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=W.isub(F).iushrn(this.shift),U=V;return V.cmp(this.m)>=0?U=V.isub(this.m):V.cmpn(0)<0&&(U=V.iadd(this.m)),U._forceRed(this)},j.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}})(h=t.nmd(h),this)},6204:function(h){h.exports=function(s){var t,a,n,r=s.length,i=0;for(t=0;t<r;++t)i+=s[t].length;var l=new Array(i),u=0;for(t=0;t<r;++t){var p=s[t],c=p.length;for(a=0;a<c;++a){var x=l[u++]=new Array(c-1),d=0;for(n=0;n<c;++n)n!==a&&(x[d++]=p[n]);if(1&a){var g=x[1];x[1]=x[0],x[0]=g}}}return l}},6867:function(h,s,t){h.exports=function(x,d,g){switch(arguments.length){case 1:return a=[],p(v=x,v,c,!0),a;case 2:return typeof d=="function"?p(x,x,d,!0):function(y,m){return a=[],p(y,m,c,!1),a}(x,d);case 3:return p(x,d,g,!1);default:throw new Error("box-intersect: Invalid arguments")}var v};var a,n=t(1888),r=t(855),i=t(7150);function l(x,d){for(var g=0;g<x;++g)if(!(d[g]<=d[g+x]))return!0;return!1}function u(x,d,g,v){for(var y=0,m=0,_=0,f=x.length;_<f;++_){var S=x[_];if(!l(d,S)){for(var w=0;w<2*d;++w)g[y++]=S[w];v[m++]=_}}return m}function p(x,d,g,v){var y=x.length,m=d.length;if(!(y<=0||m<=0)){var _=x[0].length>>>1;if(!(_<=0)){var f,S=n.mallocDouble(2*_*y),w=n.mallocInt32(y);if((y=u(x,_,S,w))>0){if(_===1&&v)r.init(y),f=r.sweepComplete(_,g,0,y,S,w,0,y,S,w);else{var E=n.mallocDouble(2*_*m),O=n.mallocInt32(m);(m=u(d,_,E,O))>0&&(r.init(y+m),f=_===1?r.sweepBipartite(_,g,0,y,S,w,0,m,E,O):i(_,g,v,y,S,w,m,E,O),n.free(E),n.free(O))}n.free(S),n.free(w)}return f}}}function c(x,d){a.push([x,d])}},2455:function(h,s){function t(a){return a?function(n,r,i,l,u,p,c,x,d,g,v){return u-l>d-x?function(y,m,_,f,S,w,E,O,C,P,R){for(var j=2*y,D=f,N=j*f;D<S;++D,N+=j){var W=w[m+N],F=w[m+N+y],V=E[D];e:for(var U=O,te=j*O;U<C;++U,te+=j){var J=P[m+te],X=P[m+te+y],K=R[U];if(!(X<W||F<J)){for(var Q=m+1;Q<y;++Q){var Z=w[Q+N],re=w[Q+y+N],oe=P[Q+te],ae=P[Q+y+te];if(re<oe||ae<Z)continue e}var ce=_(V,K);if(ce!==void 0)return ce}}}}(n,r,i,l,u,p,c,x,d,g,v):function(y,m,_,f,S,w,E,O,C,P,R){for(var j=2*y,D=O,N=j*O;D<C;++D,N+=j){var W=P[m+N],F=P[m+N+y],V=R[D];e:for(var U=f,te=j*f;U<S;++U,te+=j){var J=w[m+te],X=w[m+te+y],K=E[U];if(!(F<J||X<W)){for(var Q=m+1;Q<y;++Q){var Z=w[Q+te],re=w[Q+y+te],oe=P[Q+N],ae=P[Q+y+N];if(re<oe||ae<Z)continue e}var ce=_(K,V);if(ce!==void 0)return ce}}}}(n,r,i,l,u,p,c,x,d,g,v)}:function(n,r,i,l,u,p,c,x,d,g,v,y){return p-u>g-d?l?function(m,_,f,S,w,E,O,C,P,R,j){for(var D=2*m,N=S,W=D*S;N<w;++N,W+=D){var F=E[_+W],V=E[_+W+m],U=O[N];e:for(var te=C,J=D*C;te<P;++te,J+=D){var X=R[_+J],K=j[te];if(!(X<=F||V<X)){for(var Q=_+1;Q<m;++Q){var Z=E[Q+W],re=E[Q+m+W],oe=R[Q+J],ae=R[Q+m+J];if(re<oe||ae<Z)continue e}var ce=f(K,U);if(ce!==void 0)return ce}}}}(n,r,i,u,p,c,x,d,g,v,y):function(m,_,f,S,w,E,O,C,P,R,j){for(var D=2*m,N=S,W=D*S;N<w;++N,W+=D){var F=E[_+W],V=E[_+W+m],U=O[N];e:for(var te=C,J=D*C;te<P;++te,J+=D){var X=R[_+J],K=j[te];if(!(X<F||V<X)){for(var Q=_+1;Q<m;++Q){var Z=E[Q+W],re=E[Q+m+W],oe=R[Q+J],ae=R[Q+m+J];if(re<oe||ae<Z)continue e}var ce=f(U,K);if(ce!==void 0)return ce}}}}(n,r,i,u,p,c,x,d,g,v,y):l?function(m,_,f,S,w,E,O,C,P,R,j){for(var D=2*m,N=C,W=D*C;N<P;++N,W+=D){var F=R[_+W],V=j[N];e:for(var U=S,te=D*S;U<w;++U,te+=D){var J=E[_+te],X=E[_+te+m],K=O[U];if(!(F<=J||X<F)){for(var Q=_+1;Q<m;++Q){var Z=E[Q+te],re=E[Q+m+te],oe=R[Q+W],ae=R[Q+m+W];if(re<oe||ae<Z)continue e}var ce=f(V,K);if(ce!==void 0)return ce}}}}(n,r,i,u,p,c,x,d,g,v,y):function(m,_,f,S,w,E,O,C,P,R,j){for(var D=2*m,N=C,W=D*C;N<P;++N,W+=D){var F=R[_+W],V=j[N];e:for(var U=S,te=D*S;U<w;++U,te+=D){var J=E[_+te],X=E[_+te+m],K=O[U];if(!(F<J||X<F)){for(var Q=_+1;Q<m;++Q){var Z=E[Q+te],re=E[Q+m+te],oe=R[Q+W],ae=R[Q+m+W];if(re<oe||ae<Z)continue e}var ce=f(K,V);if(ce!==void 0)return ce}}}}(n,r,i,u,p,c,x,d,g,v,y)}}s.partial=t(!1),s.full=t(!0)},7150:function(h,s,t){h.exports=function(D,N,W,F,V,U,te,J,X){(function(ze,Pe){var Ne=8*n.log2(Pe+1)*(ze+1)|0,Ve=n.nextPow2(w*Ne);O.length<Ve&&(a.free(O),O=a.mallocInt32(Ve));var Ye=n.nextPow2(E*Ne);C.length<Ye&&(a.free(C),C=a.mallocDouble(Ye))})(D,F+te);var K,Q=0,Z=2*D;for(P(Q++,0,0,F,0,te,W?16:0,-1/0,1/0),W||P(Q++,0,0,te,0,F,1,-1/0,1/0);Q>0;){var re=(Q-=1)*w,oe=O[re],ae=O[re+1],ce=O[re+2],he=O[re+3],pe=O[re+4],xe=O[re+5],be=Q*E,ve=C[be],ge=C[be+1],we=1&xe,_e=!!(16&xe),se=V,ie=U,fe=J,Ee=X;if(we&&(se=J,ie=X,fe=V,Ee=U),!(2&xe&&ae>=(ce=m(D,oe,ae,ce,se,ie,ge))||4&xe&&(ae=_(D,oe,ae,ce,se,ie,ve))>=ce)){var Te=ce-ae,Ae=pe-he;if(_e){if(D*Te*(Te+Ae)<g){if((K=u.scanComplete(D,oe,N,ae,ce,se,ie,he,pe,fe,Ee))!==void 0)return K;continue}}else{if(D*Math.min(Te,Ae)<x){if((K=i(D,oe,N,we,ae,ce,se,ie,he,pe,fe,Ee))!==void 0)return K;continue}if(D*Te*Ae<d){if((K=u.scanBipartite(D,oe,N,we,ae,ce,se,ie,he,pe,fe,Ee))!==void 0)return K;continue}}var Se=v(D,oe,ae,ce,se,ie,ve,ge);if(ae<Se)if(D*(Se-ae)<x){if((K=l(D,oe+1,N,ae,Se,se,ie,he,pe,fe,Ee))!==void 0)return K}else if(oe===D-2){if((K=we?u.sweepBipartite(D,N,he,pe,fe,Ee,ae,Se,se,ie):u.sweepBipartite(D,N,ae,Se,se,ie,he,pe,fe,Ee))!==void 0)return K}else P(Q++,oe+1,ae,Se,he,pe,we,-1/0,1/0),P(Q++,oe+1,he,pe,ae,Se,1^we,-1/0,1/0);if(Se<ce){var Oe=p(D,oe,he,pe,fe,Ee),De=fe[Z*Oe+oe],de=y(D,oe,Oe,pe,fe,Ee,De);if(de<pe&&P(Q++,oe,Se,ce,de,pe,(4|we)+(_e?16:0),De,ge),he<Oe&&P(Q++,oe,Se,ce,he,Oe,(2|we)+(_e?16:0),ve,De),Oe+1===de){if((K=_e?j(D,oe,N,Se,ce,se,ie,Oe,fe,Ee[Oe]):R(D,oe,N,we,Se,ce,se,ie,Oe,fe,Ee[Oe]))!==void 0)return K}else if(Oe<de){var me;if(_e){if(Se<(me=f(D,oe,Se,ce,se,ie,De))){var Me=y(D,oe,Se,me,se,ie,De);if(oe===D-2){if(Se<Me&&(K=u.sweepComplete(D,N,Se,Me,se,ie,Oe,de,fe,Ee))!==void 0||Me<me&&(K=u.sweepBipartite(D,N,Me,me,se,ie,Oe,de,fe,Ee))!==void 0)return K}else Se<Me&&P(Q++,oe+1,Se,Me,Oe,de,16,-1/0,1/0),Me<me&&(P(Q++,oe+1,Me,me,Oe,de,0,-1/0,1/0),P(Q++,oe+1,Oe,de,Me,me,1,-1/0,1/0))}}else Se<(me=we?S(D,oe,Se,ce,se,ie,De):f(D,oe,Se,ce,se,ie,De))&&(oe===D-2?K=we?u.sweepBipartite(D,N,Oe,de,fe,Ee,Se,me,se,ie):u.sweepBipartite(D,N,Se,me,se,ie,Oe,de,fe,Ee):(P(Q++,oe+1,Se,me,Oe,de,we,-1/0,1/0),P(Q++,oe+1,Oe,de,Se,me,1^we,-1/0,1/0)))}}}}};var a=t(1888),n=t(8828),r=t(2455),i=r.partial,l=r.full,u=t(855),p=t(3545),c=t(8105),x=128,d=1<<22,g=1<<22,v=c("!(lo>=p0)&&!(p1>=hi)"),y=c("lo===p0"),m=c("lo<p0"),_=c("hi<=p0"),f=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),w=6,E=2,O=a.mallocInt32(1024),C=a.mallocDouble(1024);function P(D,N,W,F,V,U,te,J,X){var K=w*D;O[K]=N,O[K+1]=W,O[K+2]=F,O[K+3]=V,O[K+4]=U,O[K+5]=te;var Q=E*D;C[Q]=J,C[Q+1]=X}function R(D,N,W,F,V,U,te,J,X,K,Q){var Z=2*D,re=X*Z,oe=K[re+N];e:for(var ae=V,ce=V*Z;ae<U;++ae,ce+=Z){var he=te[ce+N],pe=te[ce+N+D];if(!(oe<he||pe<oe||F&&oe===he)){for(var xe,be=J[ae],ve=N+1;ve<D;++ve){he=te[ce+ve],pe=te[ce+ve+D];var ge=K[re+ve],we=K[re+ve+D];if(pe<ge||we<he)continue e}if((xe=F?W(Q,be):W(be,Q))!==void 0)return xe}}}function j(D,N,W,F,V,U,te,J,X,K){var Q=2*D,Z=J*Q,re=X[Z+N];e:for(var oe=F,ae=F*Q;oe<V;++oe,ae+=Q){var ce=te[oe];if(ce!==K){var he=U[ae+N],pe=U[ae+N+D];if(!(re<he||pe<re)){for(var xe=N+1;xe<D;++xe){he=U[ae+xe],pe=U[ae+xe+D];var be=X[Z+xe],ve=X[Z+xe+D];if(pe<be||ve<he)continue e}var ge=W(ce,K);if(ge!==void 0)return ge}}}}},3545:function(h,s,t){h.exports=function(i,l,u,p,c,x){if(p<=u+1)return u;for(var d=u,g=p,v=p+u>>>1,y=2*i,m=v,_=c[y*v+l];d<g;){if(g-d<n){r(i,l,d,g,c,x),_=c[y*v+l];break}var f=g-d,S=Math.random()*f+d|0,w=c[y*S+l],E=Math.random()*f+d|0,O=c[y*E+l],C=Math.random()*f+d|0,P=c[y*C+l];w<=O?P>=O?(m=E,_=O):w>=P?(m=S,_=w):(m=C,_=P):O>=P?(m=E,_=O):P>=w?(m=S,_=w):(m=C,_=P);for(var R=y*(g-1),j=y*m,D=0;D<y;++D,++R,++j){var N=c[R];c[R]=c[j],c[j]=N}var W=x[g-1];for(x[g-1]=x[m],x[m]=W,R=y*(g-1),j=y*(m=a(i,l,d,g-1,c,x,_)),D=0;D<y;++D,++R,++j)N=c[R],c[R]=c[j],c[j]=N;if(W=x[g-1],x[g-1]=x[m],x[m]=W,v<m){for(g=m-1;d<g&&c[y*(g-1)+l]===_;)g-=1;g+=1}else{if(!(m<v))break;for(d=m+1;d<g&&c[y*d+l]===_;)d+=1}}return a(i,l,u,v,c,x,c[y*v+l])};var a=t(8105)("lo<p0"),n=8;function r(i,l,u,p,c,x){for(var d=2*i,g=d*(u+1)+l,v=u+1;v<p;++v,g+=d)for(var y=c[g],m=v,_=d*(v-1);m>u&&c[_+l]>y;--m,_-=d){for(var f=_,S=_+d,w=0;w<d;++w,++f,++S){var E=c[f];c[f]=c[S],c[S]=E}var O=x[m];x[m]=x[m-1],x[m-1]=O}}},8105:function(h){h.exports=function(t){return s[t]};var s={"lo===p0":function(t,a,n,r,i,l,u){for(var p=2*t,c=p*n,x=c,d=n,g=a,v=n;r>v;++v,c+=p)if(i[c+g]===u)if(d===v)d+=1,x+=p;else{for(var y=0;p>y;++y){var m=i[c+y];i[c+y]=i[x],i[x++]=m}var _=l[v];l[v]=l[d],l[d++]=_}return d},"lo<p0":function(t,a,n,r,i,l,u){for(var p=2*t,c=p*n,x=c,d=n,g=a,v=n;r>v;++v,c+=p)if(i[c+g]<u)if(d===v)d+=1,x+=p;else{for(var y=0;p>y;++y){var m=i[c+y];i[c+y]=i[x],i[x++]=m}var _=l[v];l[v]=l[d],l[d++]=_}return d},"lo<=p0":function(t,a,n,r,i,l,u){for(var p=2*t,c=p*n,x=c,d=n,g=t+a,v=n;r>v;++v,c+=p)if(i[c+g]<=u)if(d===v)d+=1,x+=p;else{for(var y=0;p>y;++y){var m=i[c+y];i[c+y]=i[x],i[x++]=m}var _=l[v];l[v]=l[d],l[d++]=_}return d},"hi<=p0":function(t,a,n,r,i,l,u){for(var p=2*t,c=p*n,x=c,d=n,g=t+a,v=n;r>v;++v,c+=p)if(i[c+g]<=u)if(d===v)d+=1,x+=p;else{for(var y=0;p>y;++y){var m=i[c+y];i[c+y]=i[x],i[x++]=m}var _=l[v];l[v]=l[d],l[d++]=_}return d},"lo<p0&&p0<=hi":function(t,a,n,r,i,l,u){for(var p=2*t,c=p*n,x=c,d=n,g=a,v=t+a,y=n;r>y;++y,c+=p){var m=i[c+g],_=i[c+v];if(m<u&&u<=_)if(d===y)d+=1,x+=p;else{for(var f=0;p>f;++f){var S=i[c+f];i[c+f]=i[x],i[x++]=S}var w=l[y];l[y]=l[d],l[d++]=w}}return d},"lo<=p0&&p0<=hi":function(t,a,n,r,i,l,u){for(var p=2*t,c=p*n,x=c,d=n,g=a,v=t+a,y=n;r>y;++y,c+=p){var m=i[c+g],_=i[c+v];if(m<=u&&u<=_)if(d===y)d+=1,x+=p;else{for(var f=0;p>f;++f){var S=i[c+f];i[c+f]=i[x],i[x++]=S}var w=l[y];l[y]=l[d],l[d++]=w}}return d},"!(lo>=p0)&&!(p1>=hi)":function(t,a,n,r,i,l,u,p){for(var c=2*t,x=c*n,d=x,g=n,v=a,y=t+a,m=n;r>m;++m,x+=c){var _=i[x+v],f=i[x+y];if(!(_>=u||p>=f))if(g===m)g+=1,d+=c;else{for(var S=0;c>S;++S){var w=i[x+S];i[x+S]=i[d],i[d++]=w}var E=l[m];l[m]=l[g],l[g++]=E}}return g}}},1811:function(h){h.exports=function(c,x){x<=4*s?t(0,x-1,c):p(0,x-1,c)};var s=32;function t(c,x,d){for(var g=2*(c+1),v=c+1;v<=x;++v){for(var y=d[g++],m=d[g++],_=v,f=g-2;_-- >c;){var S=d[f-2],w=d[f-1];if(S<y||S===y&&w<m)break;d[f]=S,d[f+1]=w,f-=2}d[f]=y,d[f+1]=m}}function a(c,x,d){x*=2;var g=d[c*=2],v=d[c+1];d[c]=d[x],d[c+1]=d[x+1],d[x]=g,d[x+1]=v}function n(c,x,d){x*=2,d[c*=2]=d[x],d[c+1]=d[x+1]}function r(c,x,d,g){x*=2,d*=2;var v=g[c*=2],y=g[c+1];g[c]=g[x],g[c+1]=g[x+1],g[x]=g[d],g[x+1]=g[d+1],g[d]=v,g[d+1]=y}function i(c,x,d,g,v){x*=2,v[c*=2]=v[x],v[x]=d,v[c+1]=v[x+1],v[x+1]=g}function l(c,x,d){x*=2;var g=d[c*=2],v=d[x];return!(g<v)&&(g!==v||d[c+1]>d[x+1])}function u(c,x,d,g){var v=g[c*=2];return v<x||v===x&&g[c+1]<d}function p(c,x,d){var g=(x-c+1)/6|0,v=c+g,y=x-g,m=c+x>>1,_=m-g,f=m+g,S=v,w=_,E=m,O=f,C=y,P=c+1,R=x-1,j=0;l(S,w,d)&&(j=S,S=w,w=j),l(O,C,d)&&(j=O,O=C,C=j),l(S,E,d)&&(j=S,S=E,E=j),l(w,E,d)&&(j=w,w=E,E=j),l(S,O,d)&&(j=S,S=O,O=j),l(E,O,d)&&(j=E,E=O,O=j),l(w,C,d)&&(j=w,w=C,C=j),l(w,E,d)&&(j=w,w=E,E=j),l(O,C,d)&&(j=O,O=C,C=j);for(var D=d[2*w],N=d[2*w+1],W=d[2*O],F=d[2*O+1],V=2*S,U=2*E,te=2*C,J=2*v,X=2*m,K=2*y,Q=0;Q<2;++Q){var Z=d[V+Q],re=d[U+Q],oe=d[te+Q];d[J+Q]=Z,d[X+Q]=re,d[K+Q]=oe}n(_,c,d),n(f,x,d);for(var ae=P;ae<=R;++ae)if(u(ae,D,N,d))ae!==P&&a(ae,P,d),++P;else if(!u(ae,W,F,d))for(;;){if(u(R,W,F,d)){u(R,D,N,d)?(r(ae,P,R,d),++P,--R):(a(ae,R,d),--R);break}if(--R<ae)break}i(c,P-1,D,N,d),i(x,R+1,W,F,d),P-2-c<=s?t(c,P-2,d):p(c,P-2,d),x-(R+2)<=s?t(R+2,x,d):p(R+2,x,d),R-P<=s?t(P,R,d):p(P,R,d)}},855:function(h,s,t){h.exports={init:function(_){var f=n.nextPow2(_);u.length<f&&(a.free(u),u=a.mallocInt32(f)),p.length<f&&(a.free(p),p=a.mallocInt32(f)),c.length<f&&(a.free(c),c=a.mallocInt32(f)),x.length<f&&(a.free(x),x=a.mallocInt32(f)),d.length<f&&(a.free(d),d=a.mallocInt32(f)),g.length<f&&(a.free(g),g=a.mallocInt32(f));var S=8*f;v.length<S&&(a.free(v),v=a.mallocDouble(S))},sweepBipartite:function(_,f,S,w,E,O,C,P,R,j){for(var D=0,N=2*_,W=_-1,F=N-1,V=S;V<w;++V){var U=O[V],te=N*V;v[D++]=E[te+W],v[D++]=-(U+1),v[D++]=E[te+F],v[D++]=U}for(V=C;V<P;++V){U=j[V]+i;var J=N*V;v[D++]=R[J+W],v[D++]=-U,v[D++]=R[J+F],v[D++]=U}var X=D>>>1;r(v,X);var K=0,Q=0;for(V=0;V<X;++V){var Z=0|v[2*V+1];if(Z>=i)y(c,x,Q--,Z=Z-i|0);else if(Z>=0)y(u,p,K--,Z);else if(Z<=-i){Z=-Z-i|0;for(var re=0;re<K;++re)if((oe=f(u[re],Z))!==void 0)return oe;m(c,x,Q++,Z)}else{for(Z=-Z-1|0,re=0;re<Q;++re){var oe;if((oe=f(Z,c[re]))!==void 0)return oe}m(u,p,K++,Z)}}},sweepComplete:function(_,f,S,w,E,O,C,P,R,j){for(var D=0,N=2*_,W=_-1,F=N-1,V=S;V<w;++V){var U=O[V]+1<<1,te=N*V;v[D++]=E[te+W],v[D++]=-U,v[D++]=E[te+F],v[D++]=U}for(V=C;V<P;++V){U=j[V]+1<<1;var J=N*V;v[D++]=R[J+W],v[D++]=1|-U,v[D++]=R[J+F],v[D++]=1|U}var X=D>>>1;r(v,X);var K=0,Q=0,Z=0;for(V=0;V<X;++V){var re=0|v[2*V+1],oe=1&re;if(V<X-1&&re>>1==v[2*V+3]>>1&&(oe=2,V+=1),re<0){for(var ae=-(re>>1)-1,ce=0;ce<Z;++ce)if((he=f(d[ce],ae))!==void 0)return he;if(oe!==0){for(ce=0;ce<K;++ce)if((he=f(u[ce],ae))!==void 0)return he}if(oe!==1)for(ce=0;ce<Q;++ce){var he;if((he=f(c[ce],ae))!==void 0)return he}oe===0?m(u,p,K++,ae):oe===1?m(c,x,Q++,ae):oe===2&&m(d,g,Z++,ae)}else ae=(re>>1)-1,oe===0?y(u,p,K--,ae):oe===1?y(c,x,Q--,ae):oe===2&&y(d,g,Z--,ae)}},scanBipartite:function(_,f,S,w,E,O,C,P,R,j,D,N){var W=0,F=2*_,V=f,U=f+_,te=1,J=1;w?J=i:te=i;for(var X=E;X<O;++X){var K=X+te,Q=F*X;v[W++]=C[Q+V],v[W++]=-K,v[W++]=C[Q+U],v[W++]=K}for(X=R;X<j;++X){K=X+J;var Z=F*X;v[W++]=D[Z+V],v[W++]=-K}var re=W>>>1;r(v,re);var oe=0;for(X=0;X<re;++X){var ae=0|v[2*X+1];if(ae<0){var ce=!1;if((K=-ae)>=i?(ce=!w,K-=i):(ce=!!w,K-=1),ce)m(u,p,oe++,K);else{var he=N[K],pe=F*K,xe=D[pe+f+1],be=D[pe+f+1+_];e:for(var ve=0;ve<oe;++ve){var ge=u[ve],we=F*ge;if(!(be<C[we+f+1]||C[we+f+1+_]<xe)){for(var _e=f+2;_e<_;++_e)if(D[pe+_e+_]<C[we+_e]||C[we+_e+_]<D[pe+_e])continue e;var se,ie=P[ge];if((se=w?S(he,ie):S(ie,he))!==void 0)return se}}}}else y(u,p,oe--,ae-te)}},scanComplete:function(_,f,S,w,E,O,C,P,R,j,D){for(var N=0,W=2*_,F=f,V=f+_,U=w;U<E;++U){var te=U+i,J=W*U;v[N++]=O[J+F],v[N++]=-te,v[N++]=O[J+V],v[N++]=te}for(U=P;U<R;++U){te=U+1;var X=W*U;v[N++]=j[X+F],v[N++]=-te}var K=N>>>1;r(v,K);var Q=0;for(U=0;U<K;++U){var Z=0|v[2*U+1];if(Z<0)if((te=-Z)>=i)u[Q++]=te-i;else{var re=D[te-=1],oe=W*te,ae=j[oe+f+1],ce=j[oe+f+1+_];e:for(var he=0;he<Q;++he){var pe=u[he],xe=C[pe];if(xe===re)break;var be=W*pe;if(!(ce<O[be+f+1]||O[be+f+1+_]<ae)){for(var ve=f+2;ve<_;++ve)if(j[oe+ve+_]<O[be+ve]||O[be+ve+_]<j[oe+ve])continue e;var ge=S(xe,re);if(ge!==void 0)return ge}}}else{for(te=Z-i,he=Q-1;he>=0;--he)if(u[he]===te){for(ve=he+1;ve<Q;++ve)u[ve-1]=u[ve];break}--Q}}}};var a=t(1888),n=t(8828),r=t(1811),i=1<<28,l=1024,u=a.mallocInt32(l),p=a.mallocInt32(l),c=a.mallocInt32(l),x=a.mallocInt32(l),d=a.mallocInt32(l),g=a.mallocInt32(l),v=a.mallocDouble(8192);function y(_,f,S,w){var E=f[w],O=_[S-1];_[E]=O,f[O]=E}function m(_,f,S,w){_[S]=w,f[w]=S}},2538:function(h,s,t){var a=t(8902),n=t(5542),r=t(2272),i=t(5023);function l(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,x){return c[0]-x[0]||c[1]-x[1]}function p(c,x,d){return x in c?c[x]:d}h.exports=function(c,x,d){Array.isArray(x)?(d=d||{},x=x||[]):(d=x||{},x=[]);var g=!!p(d,"delaunay",!0),v=!!p(d,"interior",!0),y=!!p(d,"exterior",!0),m=!!p(d,"infinity",!1);if(!v&&!y||c.length===0)return[];var _=a(c,x);if(g||v!==y||m){for(var f=n(c.length,function(E){return E.map(l).sort(u)}(x)),S=0;S<_.length;++S){var w=_[S];f.addTriangle(w[0],w[1],w[2])}return g&&r(c,f),y?v?m?i(f,0,m):f.cells():i(f,1,m):i(f,-1)}return _}},2272:function(h,s,t){var a=t(2646)[4];function n(r,i,l,u,p,c){var x=i.opposite(u,p);if(!(x<0)){if(p<u){var d=u;u=p,p=d,d=c,c=x,x=d}i.isConstraint(u,p)||a(r[u],r[p],r[c],r[x])<0&&l.push(u,p)}}t(2478),h.exports=function(r,i){for(var l=[],u=r.length,p=i.stars,c=0;c<u;++c)for(var x=p[c],d=1;d<x.length;d+=2)if(!((m=x[d])<c||i.isConstraint(c,m))){for(var g=x[d-1],v=-1,y=1;y<x.length;y+=2)if(x[y-1]===m){v=x[y];break}v<0||a(r[c],r[m],r[g],r[v])<0&&l.push(c,m)}for(;l.length>0;){for(var m=l.pop(),_=(g=-1,v=-1,x=p[c=l.pop()],1);_<x.length;_+=2){var f=x[_-1],S=x[_];f===m?v=S:S===m&&(g=f)}g<0||v<0||a(r[c],r[m],r[g],r[v])>=0||(i.flip(c,m),n(r,i,l,g,c,v),n(r,i,l,c,v,g),n(r,i,l,v,m,g),n(r,i,l,m,g,v))}}},5023:function(h,s,t){var a,n=t(2478);function r(l,u,p,c,x,d,g){this.cells=l,this.neighbor=u,this.flags=c,this.constraint=p,this.active=x,this.next=d,this.boundary=g}function i(l,u){return l[0]-u[0]||l[1]-u[1]||l[2]-u[2]}h.exports=function(l,u,p){var c=function(C,P){for(var R=C.cells(),j=R.length,D=0;D<j;++D){var N=(Z=R[D])[0],W=Z[1],F=Z[2];W<F?W<N&&(Z[0]=W,Z[1]=F,Z[2]=N):F<N&&(Z[0]=F,Z[1]=N,Z[2]=W)}R.sort(i);var V=new Array(j);for(D=0;D<V.length;++D)V[D]=0;var U=[],te=[],J=new Array(3*j),X=new Array(3*j),K=null;P&&(K=[]);var Q=new r(R,J,X,V,U,te,K);for(D=0;D<j;++D)for(var Z=R[D],re=0;re<3;++re){N=Z[re],W=Z[(re+1)%3];var oe=J[3*D+re]=Q.locate(W,N,C.opposite(W,N)),ae=X[3*D+re]=C.isConstraint(N,W);oe<0&&(ae?te.push(D):(U.push(D),V[D]=1),P&&K.push([W,N,-1]))}return Q}(l,p);if(u===0)return p?c.cells.concat(c.boundary):c.cells;for(var x=1,d=c.active,g=c.next,v=c.flags,y=c.cells,m=c.constraint,_=c.neighbor;d.length>0||g.length>0;){for(;d.length>0;){var f=d.pop();if(v[f]!==-x){v[f]=x,y[f];for(var S=0;S<3;++S){var w=_[3*f+S];w>=0&&v[w]===0&&(m[3*f+S]?g.push(w):(d.push(w),v[w]=x))}}}var E=g;g=d,d=E,g.length=0,x=-x}var O=function(C,P,R){for(var j=0,D=0;D<C.length;++D)P[D]===R&&(C[j++]=C[D]);return C.length=j,C}(y,v,u);return p?O.concat(c.boundary):O},r.prototype.locate=(a=[0,0,0],function(l,u,p){var c=l,x=u,d=p;return u<p?u<l&&(c=u,x=p,d=l):p<l&&(c=p,x=l,d=u),c<0?-1:(a[0]=c,a[1]=x,a[2]=d,n.eq(this.cells,a,i))})},8902:function(h,s,t){var a=t(2478),n=t(3250)[3];function r(g,v,y,m,_){this.a=g,this.b=v,this.idx=y,this.lowerIds=m,this.upperIds=_}function i(g,v,y,m){this.a=g,this.b=v,this.type=y,this.idx=m}function l(g,v){var y=g.a[0]-v.a[0]||g.a[1]-v.a[1]||g.type-v.type;return y||(g.type!==0&&(y=n(g.a,g.b,v.b))?y:g.idx-v.idx)}function u(g,v){return n(g.a,g.b,v)}function p(g,v,y,m,_){for(var f=a.lt(v,m,u),S=a.gt(v,m,u),w=f;w<S;++w){for(var E=v[w],O=E.lowerIds,C=O.length;C>1&&n(y[O[C-2]],y[O[C-1]],m)>0;)g.push([O[C-1],O[C-2],_]),C-=1;O.length=C,O.push(_);var P=E.upperIds;for(C=P.length;C>1&&n(y[P[C-2]],y[P[C-1]],m)<0;)g.push([P[C-2],P[C-1],_]),C-=1;P.length=C,P.push(_)}}function c(g,v){var y;return(y=g.a[0]<v.a[0]?n(g.a,g.b,v.a):n(v.b,v.a,g.a))?y:(y=v.b[0]<g.b[0]?n(g.a,g.b,v.b):n(v.b,v.a,g.b))||g.idx-v.idx}function x(g,v,y){var m=a.le(g,y,c),_=g[m],f=_.upperIds,S=f[f.length-1];_.upperIds=[S],g.splice(m+1,0,new r(y.a,y.b,y.idx,[S],f))}function d(g,v,y){var m=y.a;y.a=y.b,y.b=m;var _=a.eq(g,y,c),f=g[_];g[_-1].upperIds=f.upperIds,g.splice(_,1)}h.exports=function(g,v){for(var y=g.length,m=v.length,_=[],f=0;f<y;++f)_.push(new i(g[f],null,0,f));for(f=0;f<m;++f){var S=v[f],w=g[S[0]],E=g[S[1]];w[0]<E[0]?_.push(new i(w,E,2,f),new i(E,w,1,f)):w[0]>E[0]&&_.push(new i(E,w,2,f),new i(w,E,1,f))}_.sort(l);for(var O=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),C=[new r([O,1],[O,0],-1,[],[])],P=[],R=(f=0,_.length);f<R;++f){var j=_[f],D=j.type;D===0?p(P,C,g,j.a,j.idx):D===2?x(C,0,j):d(C,0,j)}return P}},5542:function(h,s,t){var a=t(2478);function n(l,u){this.stars=l,this.edges=u}h.exports=function(l,u){for(var p=new Array(l),c=0;c<l;++c)p[c]=[];return new n(p,u)};var r=n.prototype;function i(l,u,p){for(var c=1,x=l.length;c<x;c+=2)if(l[c-1]===u&&l[c]===p)return l[c-1]=l[x-2],l[c]=l[x-1],void(l.length=x-2)}r.isConstraint=function(){var l=[0,0];function u(p,c){return p[0]-c[0]||p[1]-c[1]}return function(p,c){return l[0]=Math.min(p,c),l[1]=Math.max(p,c),a.eq(this.edges,l,u)>=0}}(),r.removeTriangle=function(l,u,p){var c=this.stars;i(c[l],u,p),i(c[u],p,l),i(c[p],l,u)},r.addTriangle=function(l,u,p){var c=this.stars;c[l].push(u,p),c[u].push(p,l),c[p].push(l,u)},r.opposite=function(l,u){for(var p=this.stars[u],c=1,x=p.length;c<x;c+=2)if(p[c]===l)return p[c-1];return-1},r.flip=function(l,u){var p=this.opposite(l,u),c=this.opposite(u,l);this.removeTriangle(l,u,p),this.removeTriangle(u,l,c),this.addTriangle(l,c,p),this.addTriangle(u,p,c)},r.edges=function(){for(var l=this.stars,u=[],p=0,c=l.length;p<c;++p)for(var x=l[p],d=0,g=x.length;d<g;d+=2)u.push([x[d],x[d+1]]);return u},r.cells=function(){for(var l=this.stars,u=[],p=0,c=l.length;p<c;++p)for(var x=l[p],d=0,g=x.length;d<g;d+=2){var v=x[d],y=x[d+1];p<Math.min(v,y)&&u.push([p,v,y])}return u}},2419:function(h){h.exports=function(s){for(var t=1,a=1;a<s.length;++a)for(var n=0;n<a;++n)if(s[a]<s[n])t=-t;else if(s[n]===s[a])return 0;return t}},3628:function(h,s,t){var a=t(1338),n=t(727);function r(u,p){for(var c=0,x=u.length,d=0;d<x;++d)c+=u[d]*p[d];return c}function i(u){var p=u.length;if(p===0)return[];u[0].length;var c=a([u.length+1,u.length+1],1),x=a([u.length+1],1);c[p][p]=0;for(var d=0;d<p;++d){for(var g=0;g<=d;++g)c[g][d]=c[d][g]=2*r(u[d],u[g]);x[d]=r(u[d],u[d])}var v=n(c,x),y=0,m=v[p+1];for(d=0;d<m.length;++d)y+=m[d];var _=new Array(p);for(d=0;d<p;++d){m=v[d];var f=0;for(g=0;g<m.length;++g)f+=m[g];_[d]=f/y}return _}function l(u){if(u.length===0)return[];for(var p=u[0].length,c=a([p]),x=i(u),d=0;d<u.length;++d)for(var g=0;g<p;++g)c[g]+=u[d][g]*x[d];return c}l.barycenetric=i,h.exports=l},6037:function(h,s,t){h.exports=function(n){for(var r=a(n),i=0,l=0;l<n.length;++l)for(var u=n[l],p=0;p<r.length;++p)i+=Math.pow(u[p]-r[p],2);return Math.sqrt(i/n.length)};var a=t(3628)},332:function(h,s,t){h.exports=function(S,w,E){var O;if(E){O=w;for(var C=new Array(w.length),P=0;P<w.length;++P){var R=w[P];C[P]=[R[0],R[1],E[P]]}w=C}for(var j=function(D,N,W){var F=v(D,[],g(D));return _(N,F,W),!!F}(S,w,!!E);f(S,w,!!E);)j=!0;if(E&&j)for(O.length=0,E.length=0,P=0;P<w.length;++P)R=w[P],O.push([R[0],R[1]]),E.push(R[2]);return j};var a=t(1755),n=t(6867),r=t(1125),i=t(7842),l=t(1318),u=t(946),p=t(5838),c=t(1278),x=t(3637);function d(S){var w=u(S);return[c(w,-1/0),c(w,1/0)]}function g(S){for(var w=new Array(S.length),E=0;E<S.length;++E){var O=S[E];w[E]=[c(O[0],-1/0),c(O[1],-1/0),c(O[0],1/0),c(O[1],1/0)]}return w}function v(S,w,E){for(var O=w.length,C=new a(O),P=[],R=0;R<w.length;++R){var j=w[R],D=d(j[0]),N=d(j[1]);P.push([c(D[0],-1/0),c(N[0],-1/0),c(D[1],1/0),c(N[1],1/0)])}n(P,function(te,J){C.link(te,J)});var W=!0,F=new Array(O);for(R=0;R<O;++R)(U=C.find(R))!==R&&(W=!1,S[U]=[Math.min(S[R][0],S[U][0]),Math.min(S[R][1],S[U][1])]);if(W)return null;var V=0;for(R=0;R<O;++R){var U;(U=C.find(R))===R?(F[R]=V,S[V++]=S[R]):F[R]=-1}for(S.length=V,R=0;R<O;++R)F[R]<0&&(F[R]=F[C.find(R)]);return F}function y(S,w){return S[0]-w[0]||S[1]-w[1]}function m(S,w){return S[0]-w[0]||S[1]-w[1]||(S[2]<w[2]?-1:S[2]>w[2]?1:0)}function _(S,w,E){if(S.length!==0){if(w)for(var O=0;O<S.length;++O){var C=w[(R=S[O])[0]],P=w[R[1]];R[0]=Math.min(C,P),R[1]=Math.max(C,P)}else for(O=0;O<S.length;++O){var R;C=(R=S[O])[0],P=R[1],R[0]=Math.min(C,P),R[1]=Math.max(C,P)}E?S.sort(m):S.sort(y);var j=1;for(O=1;O<S.length;++O){var D=S[O-1],N=S[O];(N[0]!==D[0]||N[1]!==D[1]||E&&N[2]!==D[2])&&(S[j++]=N)}S.length=j}}function f(S,w,E){var O=function(D,N){for(var W=new Array(N.length),F=0;F<N.length;++F){var V=N[F],U=D[V[0]],te=D[V[1]];W[F]=[c(Math.min(U[0],te[0]),-1/0),c(Math.min(U[1],te[1]),-1/0),c(Math.max(U[0],te[0]),1/0),c(Math.max(U[1],te[1]),1/0)]}return W}(S,w),C=function(D,N,W){var F=[];return n(W,function(V,U){var te=N[V],J=N[U];if(te[0]!==J[0]&&te[0]!==J[1]&&te[1]!==J[0]&&te[1]!==J[1]){var X=D[te[0]],K=D[te[1]],Q=D[J[0]],Z=D[J[1]];r(X,K,Q,Z)&&F.push([V,U])}}),F}(S,w,O),P=function(D,N,W,F){var V=[];return n(W,F,function(U,te){var J=N[U];if(J[0]!==te&&J[1]!==te){var X=D[te],K=D[J[0]],Q=D[J[1]];r(K,Q,X,X)&&V.push([U,te])}}),V}(S,w,O,g(S)),R=function(D,N,W,F,V){var U,te,J=D.map(function(se){return[i(se[0]),i(se[1])]});for(U=0;U<W.length;++U){var X=W[U];te=X[0];var K=X[1],Q=N[te],Z=N[K],re=x(p(D[Q[0]]),p(D[Q[1]]),p(D[Z[0]]),p(D[Z[1]]));if(re){var oe=D.length;D.push([u(re[0]),u(re[1])]),J.push(re),F.push([te,oe],[K,oe])}}for(F.sort(function(se,ie){if(se[0]!==ie[0])return se[0]-ie[0];var fe=J[se[1]],Ee=J[ie[1]];return l(fe[0],Ee[0])||l(fe[1],Ee[1])}),U=F.length-1;U>=0;--U){var ae=N[te=(we=F[U])[0]],ce=ae[0],he=ae[1],pe=D[ce],xe=D[he];if((pe[0]-xe[0]||pe[1]-xe[1])<0){var be=ce;ce=he,he=be}ae[0]=ce;var ve,ge=ae[1]=we[1];for(V&&(ve=ae[2]);U>0&&F[U-1][0]===te;){var we,_e=(we=F[--U])[1];V?N.push([ge,_e,ve]):N.push([ge,_e]),ge=_e}V?N.push([ge,he,ve]):N.push([ge,he])}return J}(S,w,C,P,E),j=v(S,R);return _(w,j,E),!!j||C.length>0||P.length>0}},3637:function(h,s,t){h.exports=function(x,d,g,v){var y=l(d,x),m=l(v,g),_=c(y,m);if(i(_)===0)return null;var f=c(m,l(x,g)),S=n(f,_),w=p(y,S);return u(x,w)};var a=t(6504),n=t(8697),r=t(5572),i=t(7721),l=t(544),u=t(2653),p=t(8987);function c(x,d){return r(a(x[0],d[1]),a(x[1],d[0]))}},3642:function(h){h.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(h,s,t){var a=t(3642),n=t(395);function r(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function i(u){for(var p,c="#",x=0;x<3;++x)c+=("00"+(p=(p=u[x]).toString(16))).substr(p.length);return c}function l(u){return"rgba("+u.join(",")+")"}h.exports=function(u){var p,c,x,d,g,v,y,m,_,f;if(u||(u={}),m=(u.nshades||72)-1,y=u.format||"hex",(v=u.colormap)||(v="jet"),typeof v=="string"){if(v=v.toLowerCase(),!a[v])throw Error(v+" not a supported colorscale");g=a[v]}else{if(!Array.isArray(v))throw Error("unsupported colormap option",v);g=v.slice()}if(g.length>m+1)throw new Error(v+" map requires nshades to be at least size "+g.length);_=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],p=g.map(function(C){return Math.round(C.index*m)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var S=g.map(function(C,P){var R=g[P].index,j=g[P].rgb.slice();return j.length===4&&j[3]>=0&&j[3]<=1||(j[3]=_[0]+(_[1]-_[0])*R),j}),w=[];for(f=0;f<p.length-1;++f){d=p[f+1]-p[f],c=S[f],x=S[f+1];for(var E=0;E<d;E++){var O=E/d;w.push([Math.round(n(c[0],x[0],O)),Math.round(n(c[1],x[1],O)),Math.round(n(c[2],x[2],O)),n(c[3],x[3],O)])}}return w.push(g[g.length-1].rgb.concat(_[1])),y==="hex"?w=w.map(i):y==="rgbaString"?w=w.map(l):y==="float"&&(w=w.map(r)),w}},3140:function(h,s,t){h.exports=function(p,c,x,d){var g=a(c,x,d);if(g===0){var v=n(a(p,c,x)),y=n(a(p,c,d));if(v===y){if(v===0){var m=u(p,c,x);return m===u(p,c,d)?0:m?1:-1}return 0}return y===0?v>0||u(p,c,d)?-1:1:v===0?y>0||u(p,c,x)?1:-1:n(y-v)}var _=a(p,c,x);return _>0?g>0&&a(p,c,d)>0?1:-1:_<0?g>0||a(p,c,d)>0?1:-1:a(p,c,d)>0||u(p,c,x)?1:-1};var a=t(3250),n=t(8572),r=t(9362),i=t(5382),l=t(8210);function u(p,c,x){var d=r(p[0],-c[0]),g=r(p[1],-c[1]),v=r(x[0],-c[0]),y=r(x[1],-c[1]),m=l(i(d,v),i(g,y));return m[m.length-1]>=0}},8572:function(h){h.exports=function(s){return s<0?-1:s>0?1:0}},8507:function(h){h.exports=function(a,n){var r=a.length,i=a.length-n.length;if(i)return i;switch(r){case 0:return 0;case 1:return a[0]-n[0];case 2:return a[0]+a[1]-n[0]-n[1]||s(a[0],a[1])-s(n[0],n[1]);case 3:var l=a[0]+a[1],u=n[0]+n[1];if(i=l+a[2]-(u+n[2]))return i;var p=s(a[0],a[1]),c=s(n[0],n[1]);return s(p,a[2])-s(c,n[2])||s(p+a[2],l)-s(c+n[2],u);case 4:var x=a[0],d=a[1],g=a[2],v=a[3],y=n[0],m=n[1],_=n[2],f=n[3];return x+d+g+v-(y+m+_+f)||s(x,d,g,v)-s(y,m,_,f,y)||s(x+d,x+g,x+v,d+g,d+v,g+v)-s(y+m,y+_,y+f,m+_,m+f,_+f)||s(x+d+g,x+d+v,x+g+v,d+g+v)-s(y+m+_,y+m+f,y+_+f,m+_+f);default:for(var S=a.slice().sort(t),w=n.slice().sort(t),E=0;E<r;++E)if(i=S[E]-w[E])return i;return 0}};var s=Math.min;function t(a,n){return a-n}},3788:function(h,s,t){var a=t(8507),n=t(2419);h.exports=function(r,i){return a(r,i)||n(r)-n(i)}},7352:function(h,s,t){var a=t(5721),n=t(4750),r=t(2690);h.exports=function(i){var l=i.length;if(l===0)return[];if(l===1)return[[0]];var u=i[0].length;return u===0?[]:u===1?a(i):u===2?n(i):r(i,u)}},5721:function(h){h.exports=function(s){for(var t=0,a=0,n=1;n<s.length;++n)s[n][0]<s[t][0]&&(t=n),s[n][0]>s[a][0]&&(a=n);return t<a?[[t],[a]]:t>a?[[a],[t]]:[[t]]}},4750:function(h,s,t){h.exports=function(n){var r=a(n),i=r.length;if(i<=2)return[];for(var l=new Array(i),u=r[i-1],p=0;p<i;++p){var c=r[p];l[p]=[u,c],u=c}return l};var a=t(3090)},2690:function(h,s,t){h.exports=function(r,i){try{return a(r,!0)}catch{var l=n(r);if(l.length<=i)return[];var u=function(c,x){for(var d=c.length,g=new Array(d),v=0;v<x.length;++v)g[v]=c[x[v]];var y=x.length;for(v=0;v<d;++v)x.indexOf(v)<0&&(g[y++]=c[v]);return g}(r,l);return function(c,x){for(var d=c.length,g=x.length,v=0;v<d;++v)for(var y=c[v],m=0;m<y.length;++m){var _=y[m];if(_<g)y[m]=x[_];else{_-=g;for(var f=0;f<g;++f)_>=x[f]&&(_+=1);y[m]=_}}return c}(a(u,!0),l)}};var a=t(8954),n=t(3952)},4769:function(h){h.exports=function(s,t,a,n,r,i){var l=r-1,u=r*r,p=l*l,c=(1+2*r)*p,x=r*p,d=u*(3-2*r),g=u*l;if(s.length){i||(i=new Array(s.length));for(var v=s.length-1;v>=0;--v)i[v]=c*s[v]+x*t[v]+d*a[v]+g*n[v];return i}return c*s+x*t+d*a+g*n},h.exports.derivative=function(s,t,a,n,r,i){var l=6*r*r-6*r,u=3*r*r-4*r+1,p=-6*r*r+6*r,c=3*r*r-2*r;if(s.length){i||(i=new Array(s.length));for(var x=s.length-1;x>=0;--x)i[x]=l*s[x]+u*t[x]+p*a[x]+c*n[x];return i}return l*s+u*t+p*a[x]+c*n}},7642:function(h,s,t){var a=t(8954),n=t(1682);function r(l,u){this.point=l,this.index=u}function i(l,u){for(var p=l.point,c=u.point,x=p.length,d=0;d<x;++d){var g=c[d]-p[d];if(g)return g}return 0}h.exports=function(l,u){var p=l.length;if(p===0)return[];var c=l[0].length;if(c<1)return[];if(c===1)return function(R,j,D){if(R===1)return D?[[-1,0]]:[];var N=j.map(function(te,J){return[te[0],J]});N.sort(function(te,J){return te[0]-J[0]});for(var W=new Array(R-1),F=1;F<R;++F){var V=N[F-1],U=N[F];W[F-1]=[V[1],U[1]]}return D&&W.push([-1,W[0][1]],[W[R-1][1],-1]),W}(p,l,u);for(var x=new Array(p),d=1,g=0;g<p;++g){for(var v=l[g],y=new Array(c+1),m=0,_=0;_<c;++_){var f=v[_];y[_]=f,m+=f*f}y[c]=m,x[g]=new r(y,g),d=Math.max(m,d)}n(x,i),p=x.length;var S=new Array(p+c+1),w=new Array(p+c+1),E=(c+1)*(c+1)*d,O=new Array(c+1);for(g=0;g<=c;++g)O[g]=0;for(O[c]=E,S[0]=O.slice(),w[0]=-1,g=0;g<=c;++g)(y=O.slice())[g]=1,S[g+1]=y,w[g+1]=-1;for(g=0;g<p;++g){var C=x[g];S[g+c+1]=C.point,w[g+c+1]=C.index}var P=a(S,!1);if(P=u?P.filter(function(R){for(var j=0,D=0;D<=c;++D){var N=w[R[D]];if(N<0&&++j>=2)return!1;R[D]=N}return!0}):P.filter(function(R){for(var j=0;j<=c;++j){var D=w[R[j]];if(D<0)return!1;R[j]=D}return!0}),1&c)for(g=0;g<P.length;++g)y=(C=P[g])[0],C[0]=C[1],C[1]=y;return P}},2361:function(h){var s=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),a=new Uint32Array(t.buffer);t[0]=1,s=!0,a[1]===1072693248?(h.exports=function(r){return t[0]=r,[a[0],a[1]]},h.exports.pack=function(r,i){return a[0]=r,a[1]=i,t[0]},h.exports.lo=function(r){return t[0]=r,a[0]},h.exports.hi=function(r){return t[0]=r,a[1]}):a[0]===1072693248?(h.exports=function(r){return t[0]=r,[a[1],a[0]]},h.exports.pack=function(r,i){return a[1]=r,a[0]=i,t[0]},h.exports.lo=function(r){return t[0]=r,a[1]},h.exports.hi=function(r){return t[0]=r,a[0]}):s=!1}if(!s){var n=new Buffer(8);h.exports=function(r){return n.writeDoubleLE(r,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},h.exports.pack=function(r,i){return n.writeUInt32LE(r,0,!0),n.writeUInt32LE(i,4,!0),n.readDoubleLE(0,!0)},h.exports.lo=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(0,!0)},h.exports.hi=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(4,!0)}}h.exports.sign=function(r){return h.exports.hi(r)>>>31},h.exports.exponent=function(r){return(h.exports.hi(r)<<1>>>21)-1023},h.exports.fraction=function(r){var i=h.exports.lo(r),l=h.exports.hi(r),u=1048575&l;return 2146435072&l&&(u+=1048576),[i,u]},h.exports.denormalized=function(r){return!(2146435072&h.exports.hi(r))}},1338:function(h){function s(t,a,n){var r=0|t[n];if(r<=0)return[];var i,l=new Array(r);if(n===t.length-1)for(i=0;i<r;++i)l[i]=a;else for(i=0;i<r;++i)l[i]=s(t,a,n+1);return l}h.exports=function(t,a){switch(a===void 0&&(a=0),typeof t){case"number":if(t>0)return function(n,r){var i,l;for(i=new Array(n),l=0;l<n;++l)i[l]=r;return i}(0|t,a);break;case"object":if(typeof t.length=="number")return s(t,a,0)}return[]}},3134:function(h,s,t){h.exports=function(n,r){var i=n.length;if(typeof r!="number"){r=0;for(var l=0;l<i;++l){var u=n[l];r=Math.max(r,u[0],u[1])}r=1+(0|r)}r|=0;var p=new Array(r);for(l=0;l<r;++l)p[l]=[];for(l=0;l<i;++l)p[(u=n[l])[0]].push(u[1]),p[u[1]].push(u[0]);for(var c=0;c<r;++c)a(p[c],function(x,d){return x-d});return p};var a=t(1682)},5033:function(h){h.exports=function(s,t,a){var n=t||0,r=a||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[n*s[12]+s[8],n*s[13]+s[9],n*s[14]+s[10],n*s[15]+s[11]],[r*s[12]-s[8],r*s[13]-s[9],r*s[14]-s[10],r*s[15]-s[11]]]}},9215:function(h,s,t){h.exports=function(p,c,x){switch(arguments.length){case 0:return new i([0],[0],0);case 1:return typeof p=="number"?new i(d=u(p),d,0):new i(p,u(p.length),0);case 2:var d;if(typeof c=="number")return new i(p,d=u(p.length),+c);x=0;case 3:if(p.length!==c.length)throw new Error("state and velocity lengths must match");return new i(p,c,x)}};var a=t(4769),n=t(2478);function r(p,c,x){return Math.min(c,Math.max(p,x))}function i(p,c,x){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=p.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[x],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var l=i.prototype;function u(p){for(var c=new Array(p),x=0;x<p;++x)c[x]=0;return c}l.flush=function(p){var c=n.gt(this._time,p)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},l.curve=function(p){var c=this._time,x=c.length,d=n.le(c,p),g=this._scratch[0],v=this._state,y=this._velocity,m=this.dimension,_=this.bounds;if(d<0)for(var f=m-1,S=0;S<m;++S,--f)g[S]=v[f];else if(d>=x-1){f=v.length-1;var w=p-c[x-1];for(S=0;S<m;++S,--f)g[S]=v[f]+w*y[f]}else{f=m*(d+1)-1;var E=c[d],O=c[d+1]-E||1,C=this._scratch[1],P=this._scratch[2],R=this._scratch[3],j=this._scratch[4],D=!0;for(S=0;S<m;++S,--f)C[S]=v[f],R[S]=y[f]*O,P[S]=v[f+m],j[S]=y[f+m]*O,D=D&&C[S]===P[S]&&R[S]===j[S]&&R[S]===0;if(D)for(S=0;S<m;++S)g[S]=C[S];else a(C,R,P,j,(p-E)/O,g)}var N=_[0],W=_[1];for(S=0;S<m;++S)g[S]=r(N[S],W[S],g[S]);return g},l.dcurve=function(p){var c=this._time,x=c.length,d=n.le(c,p),g=this._scratch[0],v=this._state,y=this._velocity,m=this.dimension;if(d>=x-1)for(var _=v.length-1,f=(c[x-1],0);f<m;++f,--_)g[f]=y[_];else{_=m*(d+1)-1;var S=c[d],w=c[d+1]-S||1,E=this._scratch[1],O=this._scratch[2],C=this._scratch[3],P=this._scratch[4],R=!0;for(f=0;f<m;++f,--_)E[f]=v[_],C[f]=y[_]*w,O[f]=v[_+m],P[f]=y[_+m]*w,R=R&&E[f]===O[f]&&C[f]===P[f]&&C[f]===0;if(R)for(f=0;f<m;++f)g[f]=0;else for(a.derivative(E,C,O,P,(p-S)/w,g),f=0;f<m;++f)g[f]/=w}return g},l.lastT=function(){var p=this._time;return p[p.length-1]},l.stable=function(){for(var p=this._velocity,c=p.length,x=this.dimension-1;x>=0;--x)if(p[--c])return!1;return!0},l.jump=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var d=this._state,g=this._velocity,v=d.length-this.dimension,y=this.bounds,m=y[0],_=y[1];this._time.push(c,p);for(var f=0;f<2;++f)for(var S=0;S<x;++S)d.push(d[v++]),g.push(0);for(this._time.push(p),S=x;S>0;--S)d.push(r(m[S-1],_[S-1],arguments[S])),g.push(0)}},l.push=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var d=this._state,g=this._velocity,v=d.length-this.dimension,y=p-c,m=this.bounds,_=m[0],f=m[1],S=y>1e-6?1/y:0;this._time.push(p);for(var w=x;w>0;--w){var E=r(_[w-1],f[w-1],arguments[w]);d.push(E),g.push((E-d[v++])*S)}}},l.set=function(p){var c=this.dimension;if(!(p<this.lastT()||arguments.length!==c+1)){var x=this._state,d=this._velocity,g=this.bounds,v=g[0],y=g[1];this._time.push(p);for(var m=c;m>0;--m)x.push(r(v[m-1],y[m-1],arguments[m])),d.push(0)}},l.move=function(p){var c=this.lastT(),x=this.dimension;if(!(p<=c||arguments.length!==x+1)){var d=this._state,g=this._velocity,v=d.length-this.dimension,y=this.bounds,m=y[0],_=y[1],f=p-c,S=f>1e-6?1/f:0;this._time.push(p);for(var w=x;w>0;--w){var E=arguments[w];d.push(r(m[w-1],_[w-1],d[v++]+E)),g.push(E*S)}}},l.idle=function(p){var c=this.lastT();if(!(p<c)){var x=this.dimension,d=this._state,g=this._velocity,v=d.length-x,y=this.bounds,m=y[0],_=y[1],f=p-c;this._time.push(p);for(var S=x-1;S>=0;--S)d.push(r(m[S],_[S],d[v]+f*g[v])),g.push(0),v+=1}}},3840:function(h){function s(v,y,m,_,f,S){this._color=v,this.key=y,this.value=m,this.left=_,this.right=f,this._count=S}function t(v){return new s(v._color,v.key,v.value,v.left,v.right,v._count)}function a(v,y){return new s(v,y.key,y.value,y.left,y.right,y._count)}function n(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function r(v,y){this._compare=v,this.root=y}h.exports=function(v){return new r(v||g,null)};var i=r.prototype;function l(v,y){var m;return y.left&&(m=l(v,y.left))?m:(m=v(y.key,y.value))||(y.right?l(v,y.right):void 0)}function u(v,y,m,_){if(y(v,_.key)<=0){var f;if(_.left&&(f=u(v,y,m,_.left))||(f=m(_.key,_.value)))return f}if(_.right)return u(v,y,m,_.right)}function p(v,y,m,_,f){var S,w=m(v,f.key),E=m(y,f.key);if(w<=0&&(f.left&&(S=p(v,y,m,_,f.left))||E>0&&(S=_(f.key,f.value))))return S;if(E>0&&f.right)return p(v,y,m,_,f.right)}function c(v,y){this.tree=v,this._stack=y}Object.defineProperty(i,"keys",{get:function(){var v=[];return this.forEach(function(y,m){v.push(y)}),v}}),Object.defineProperty(i,"values",{get:function(){var v=[];return this.forEach(function(y,m){v.push(m)}),v}}),Object.defineProperty(i,"length",{get:function(){return this.root?this.root._count:0}}),i.insert=function(v,y){for(var m=this._compare,_=this.root,f=[],S=[];_;){var w=m(v,_.key);f.push(_),S.push(w),_=w<=0?_.left:_.right}f.push(new s(0,v,y,null,null,1));for(var E=f.length-2;E>=0;--E)_=f[E],S[E]<=0?f[E]=new s(_._color,_.key,_.value,f[E+1],_.right,_._count+1):f[E]=new s(_._color,_.key,_.value,_.left,f[E+1],_._count+1);for(E=f.length-1;E>1;--E){var O=f[E-1];if(_=f[E],O._color===1||_._color===1)break;var C=f[E-2];if(C.left===O)if(O.left===_){if(!(P=C.right)||P._color!==0){C._color=0,C.left=O.right,O._color=1,O.right=C,f[E-2]=O,f[E-1]=_,n(C),n(O),E>=3&&((R=f[E-3]).left===C?R.left=O:R.right=O);break}O._color=1,C.right=a(1,P),C._color=0,E-=1}else{if(!(P=C.right)||P._color!==0){O.right=_.left,C._color=0,C.left=_.right,_._color=1,_.left=O,_.right=C,f[E-2]=_,f[E-1]=O,n(C),n(O),n(_),E>=3&&((R=f[E-3]).left===C?R.left=_:R.right=_);break}O._color=1,C.right=a(1,P),C._color=0,E-=1}else if(O.right===_){if(!(P=C.left)||P._color!==0){C._color=0,C.right=O.left,O._color=1,O.left=C,f[E-2]=O,f[E-1]=_,n(C),n(O),E>=3&&((R=f[E-3]).right===C?R.right=O:R.left=O);break}O._color=1,C.left=a(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||P._color!==0){var R;O.left=_.right,C._color=0,C.right=_.left,_._color=1,_.right=O,_.left=C,f[E-2]=_,f[E-1]=O,n(C),n(O),n(_),E>=3&&((R=f[E-3]).right===C?R.right=_:R.left=_);break}O._color=1,C.left=a(1,P),C._color=0,E-=1}}return f[0]._color=1,new r(m,f[0])},i.forEach=function(v,y,m){if(this.root)switch(arguments.length){case 1:return l(v,this.root);case 2:return u(y,this._compare,v,this.root);case 3:return this._compare(y,m)>=0?void 0:p(y,m,this._compare,v,this.root)}},Object.defineProperty(i,"begin",{get:function(){for(var v=[],y=this.root;y;)v.push(y),y=y.left;return new c(this,v)}}),Object.defineProperty(i,"end",{get:function(){for(var v=[],y=this.root;y;)v.push(y),y=y.right;return new c(this,v)}}),i.at=function(v){if(v<0)return new c(this,[]);for(var y=this.root,m=[];;){if(m.push(y),y.left){if(v<y.left._count){y=y.left;continue}v-=y.left._count}if(!v)return new c(this,m);if(v-=1,!y.right||v>=y.right._count)break;y=y.right}return new c(this,[])},i.ge=function(v){for(var y=this._compare,m=this.root,_=[],f=0;m;){var S=y(v,m.key);_.push(m),S<=0&&(f=_.length),m=S<=0?m.left:m.right}return _.length=f,new c(this,_)},i.gt=function(v){for(var y=this._compare,m=this.root,_=[],f=0;m;){var S=y(v,m.key);_.push(m),S<0&&(f=_.length),m=S<0?m.left:m.right}return _.length=f,new c(this,_)},i.lt=function(v){for(var y=this._compare,m=this.root,_=[],f=0;m;){var S=y(v,m.key);_.push(m),S>0&&(f=_.length),m=S<=0?m.left:m.right}return _.length=f,new c(this,_)},i.le=function(v){for(var y=this._compare,m=this.root,_=[],f=0;m;){var S=y(v,m.key);_.push(m),S>=0&&(f=_.length),m=S<0?m.left:m.right}return _.length=f,new c(this,_)},i.find=function(v){for(var y=this._compare,m=this.root,_=[];m;){var f=y(v,m.key);if(_.push(m),f===0)return new c(this,_);m=f<=0?m.left:m.right}return new c(this,[])},i.remove=function(v){var y=this.find(v);return y?y.remove():this},i.get=function(v){for(var y=this._compare,m=this.root;m;){var _=y(v,m.key);if(_===0)return m.value;m=_<=0?m.left:m.right}};var x=c.prototype;function d(v,y){v.key=y.key,v.value=y.value,v.left=y.left,v.right=y.right,v._color=y._color,v._count=y._count}function g(v,y){return v<y?-1:v>y?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new c(this.tree,this._stack.slice())},x.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var y=new Array(v.length),m=v[v.length-1];y[y.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var _=v.length-2;_>=0;--_)(m=v[_]).left===v[_+1]?y[_]=new s(m._color,m.key,m.value,y[_+1],m.right,m._count):y[_]=new s(m._color,m.key,m.value,m.left,y[_+1],m._count);if((m=y[y.length-1]).left&&m.right){var f=y.length;for(m=m.left;m.right;)y.push(m),m=m.right;var S=y[f-1];for(y.push(new s(m._color,S.key,S.value,m.left,m.right,m._count)),y[f-1].key=m.key,y[f-1].value=m.value,_=y.length-2;_>=f;--_)m=y[_],y[_]=new s(m._color,m.key,m.value,m.left,y[_+1],m._count);y[f-1].left=y[f]}if((m=y[y.length-1])._color===0){var w=y[y.length-2];for(w.left===m?w.left=null:w.right===m&&(w.right=null),y.pop(),_=0;_<y.length;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(m.left||m.right){for(m.left?d(m,m.left):m.right&&d(m,m.right),m._color=1,_=0;_<y.length-1;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(y.length===1)return new r(this.tree._compare,null);for(_=0;_<y.length;++_)y[_]._count--;var E=y[y.length-2];return function(O){for(var C,P,R,j,D=O.length-1;D>=0;--D){if(C=O[D],D===0)return void(C._color=1);if((P=O[D-1]).left===C){if((R=P.right).right&&R.right._color===0)return j=(R=P.right=t(R)).right=t(R.right),P.right=R.left,R.left=P,R.right=j,R._color=P._color,C._color=1,P._color=1,j._color=1,n(P),n(R),D>1&&((N=O[D-2]).left===P?N.left=R:N.right=R),void(O[D-1]=R);if(R.left&&R.left._color===0)return j=(R=P.right=t(R)).left=t(R.left),P.right=j.left,R.left=j.right,j.left=P,j.right=R,j._color=P._color,P._color=1,R._color=1,C._color=1,n(P),n(R),n(j),D>1&&((N=O[D-2]).left===P?N.left=j:N.right=j),void(O[D-1]=j);if(R._color===1){if(P._color===0)return P._color=1,void(P.right=a(0,R));P.right=a(0,R);continue}R=t(R),P.right=R.left,R.left=P,R._color=P._color,P._color=0,n(P),n(R),D>1&&((N=O[D-2]).left===P?N.left=R:N.right=R),O[D-1]=R,O[D]=P,D+1<O.length?O[D+1]=C:O.push(C),D+=2}else{if((R=P.left).left&&R.left._color===0)return j=(R=P.left=t(R)).left=t(R.left),P.left=R.right,R.right=P,R.left=j,R._color=P._color,C._color=1,P._color=1,j._color=1,n(P),n(R),D>1&&((N=O[D-2]).right===P?N.right=R:N.left=R),void(O[D-1]=R);if(R.right&&R.right._color===0)return j=(R=P.left=t(R)).right=t(R.right),P.left=j.right,R.right=j.left,j.right=P,j.left=R,j._color=P._color,P._color=1,R._color=1,C._color=1,n(P),n(R),n(j),D>1&&((N=O[D-2]).right===P?N.right=j:N.left=j),void(O[D-1]=j);if(R._color===1){if(P._color===0)return P._color=1,void(P.left=a(0,R));P.left=a(0,R);continue}var N;R=t(R),P.left=R.right,R.right=P,R._color=P._color,P._color=0,n(P),n(R),D>1&&((N=O[D-2]).right===P?N.right=R:N.left=R),O[D-1]=R,O[D]=P,D+1<O.length?O[D+1]=C:O.push(C),D+=2}}}(y),E.left===m?E.left=null:E.right=null,new r(this.tree._compare,y[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var v=0,y=this._stack;if(y.length===0){var m=this.tree.root;return m?m._count:0}y[y.length-1].left&&(v=y[y.length-1].left._count);for(var _=y.length-2;_>=0;--_)y[_+1]===y[_].right&&(++v,y[_].left&&(v+=y[_].left._count));return v},enumerable:!0}),x.next=function(){var v=this._stack;if(v.length!==0){var y=v[v.length-1];if(y.right)for(y=y.right;y;)v.push(y),y=y.left;else for(v.pop();v.length>0&&v[v.length-1].right===y;)y=v[v.length-1],v.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var y=v.length-1;y>0;--y)if(v[y-1].left===v[y])return!0;return!1}}),x.update=function(v){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var m=new Array(y.length),_=y[y.length-1];m[m.length-1]=new s(_._color,_.key,v,_.left,_.right,_._count);for(var f=y.length-2;f>=0;--f)(_=y[f]).left===y[f+1]?m[f]=new s(_._color,_.key,_.value,m[f+1],_.right,_._count):m[f]=new s(_._color,_.key,_.value,_.left,m[f+1],_._count);return new r(this.tree._compare,m[0])},x.prev=function(){var v=this._stack;if(v.length!==0){var y=v[v.length-1];if(y.left)for(y=y.left;y;)v.push(y),y=y.right;else for(v.pop();v.length>0&&v[v.length-1].left===y;)y=v[v.length-1],v.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var y=v.length-1;y>0;--y)if(v[y-1].right===v[y])return!0;return!1}})},3837:function(h,s,t){h.exports=function(w,E){var O=new c(w);return O.update(E),O};var a=t(4935),n=t(501),r=t(5304),i=t(6429),l=t(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function p(w,E){return w[0]=E[0],w[1]=E[1],w[2]=E[2],w}function c(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(w)}var x=c.prototype;function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(w){function E(X,K,Q){if(Q in w){var Z,re=w[Q],oe=this[Q];(X?Array.isArray(re)&&Array.isArray(re[0]):Array.isArray(re))?this[Q]=Z=[K(re[0]),K(re[1]),K(re[2])]:this[Q]=Z=[K(re),K(re),K(re)];for(var ae=0;ae<3;++ae)if(Z[ae]!==oe[ae])return!0}return!1}w=w||{};var O,C=E.bind(this,!1,Number),P=E.bind(this,!1,Boolean),R=E.bind(this,!1,String),j=E.bind(this,!0,function(X){if(Array.isArray(X)){if(X.length===3)return[+X[0],+X[1],+X[2],1];if(X.length===4)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),D=!1,N=!1;if("bounds"in w)for(var W=w.bounds,F=0;F<2;++F)for(var V=0;V<3;++V)W[F][V]!==this.bounds[F][V]&&(N=!0),this.bounds[F][V]=W[F][V];if("ticks"in w)for(O=w.ticks,D=!0,this.autoTicks=!1,F=0;F<3;++F)this.tickSpacing[F]=0;else C("tickSpacing")&&(this.autoTicks=!0,N=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),N=!0,D=!0,this._firstInit=!1),N&&this.autoTicks&&(O=l.create(this.bounds,this.tickSpacing),D=!0),D){for(F=0;F<3;++F)O[F].sort(function(X,K){return X.x-K.x});l.equal(O,this.ticks)?D=!1:this.ticks=O}P("tickEnable"),R("tickFont")&&(D=!0),R("tickFontStyle")&&(D=!0),R("tickFontWeight")&&(D=!0),R("tickFontVariant")&&(D=!0),C("tickSize"),C("tickAngle"),C("tickPad"),j("tickColor");var U=R("labels");R("labelFont")&&(U=!0),R("labelFontStyle")&&(U=!0),R("labelFontWeight")&&(U=!0),R("labelFontVariant")&&(U=!0),P("labelEnable"),C("labelSize"),C("labelPad"),j("labelColor"),P("lineEnable"),P("lineMirror"),C("lineWidth"),j("lineColor"),P("lineTickEnable"),P("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),j("lineTickColor"),P("gridEnable"),C("gridWidth"),j("gridColor"),P("zeroEnable"),j("zeroLineColor"),C("zeroLineWidth"),P("backgroundEnable"),j("backgroundColor");var te=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],J=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(U||D)&&this._text.update(this.bounds,this.labels,te,this.ticks,J):this._text=a(this.gl,this.bounds,this.labels,te,this.ticks,J),this._lines&&D&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var g=[new d,new d,new d];function v(w,E,O,C,P){for(var R=w.primalOffset,j=w.primalMinor,D=w.mirrorOffset,N=w.mirrorMinor,W=C[E],F=0;F<3;++F)if(E!==F){var V=R,U=D,te=j,J=N;W&1<<F&&(V=D,U=R,te=N,J=j),V[F]=O[0][F],U[F]=O[1][F],P[F]>0?(te[F]=-1,J[F]=0):(te[F]=0,J[F]=1)}}var y=[0,0,0],m={model:u,view:u,projection:u,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(w){};var _=[0,0,0],f=[0,0,0],S=[0,0,0];x.draw=function(w){w=w||m;for(var E=this.gl,O=w.model||u,C=w.view||u,P=w.projection||u,R=this.bounds,j=w._ortho||!1,D=i(O,C,P,R,j),N=D.cubeEdges,W=D.axis,F=C[12],V=C[13],U=C[14],te=C[15],J=(j?2:1)*this.pixelRatio*(P[3]*F+P[7]*V+P[11]*U+P[15]*te)/E.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=N[X],this.lastCubeProps.axis[X]=W[X];var K=g;for(X=0;X<3;++X)v(g[X],X,this.bounds,N,W);E=this.gl;var Q,Z,re,oe=y;for(X=0;X<3;++X)this.backgroundEnable[X]?oe[X]=W[X]:oe[X]=0;for(this._background.draw(O,C,P,R,oe,this.backgroundColor),this._lines.bind(O,C,P,this),X=0;X<3;++X){var ae=[0,0,0];W[X]>0?ae[X]=R[1][X]:ae[X]=R[0][X];for(var ce=0;ce<2;++ce){var he=(X+1+ce)%3,pe=(X+1+(1^ce))%3;this.gridEnable[he]&&this._lines.drawGrid(he,pe,this.bounds,ae,this.gridColor[he],this.gridWidth[he]*this.pixelRatio)}for(ce=0;ce<2;++ce)he=(X+1+ce)%3,pe=(X+1+(1^ce))%3,this.zeroEnable[pe]&&Math.min(R[0][pe],R[1][pe])<=0&&Math.max(R[0][pe],R[1][pe])>=0&&this._lines.drawZero(he,pe,this.bounds,ae,this.zeroLineColor[pe],this.zeroLineWidth[pe]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,K[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,K[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var xe=p(_,K[X].primalMinor),be=p(f,K[X].mirrorMinor),ve=this.lineTickLength;for(ce=0;ce<3;++ce){var ge=J/O[5*ce];xe[ce]*=ve[ce]*ge,be[ce]*=ve[ce]*ge}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,K[X].primalOffset,xe,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,K[X].mirrorOffset,be,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function we(Te){(re=[0,0,0])[Te]=1}function _e(Te,Ae,Se){var Oe=(Te+1)%3,De=(Te+2)%3,de=Ae[Oe],me=Ae[De],Me=Se[Oe],ze=Se[De];de>0&&ze>0||de>0&&ze<0||de<0&&ze>0||de<0&&ze<0?we(Oe):(me>0&&Me>0||me>0&&Me<0||me<0&&Me>0||me<0&&Me<0)&&we(De)}for(this._lines.unbind(),this._text.bind(O,C,P,this.pixelRatio),X=0;X<3;++X){var se=K[X].primalMinor,ie=K[X].mirrorMinor,fe=p(S,K[X].primalOffset);for(ce=0;ce<3;++ce)this.lineTickEnable[X]&&(fe[ce]+=J*se[ce]*Math.max(this.lineTickLength[ce],0)/O[5*ce]);var Ee=[0,0,0];if(Ee[X]=1,this.tickEnable[X]){for(this.tickAngle[X]===-3600?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,Z=1,(Q=[this.tickAlign[X],.5,Z])[0]==="auto"?Q[0]=0:Q[0]=parseInt(""+Q[0]),re=[0,0,0],_e(X,se,ie),ce=0;ce<3;++ce)fe[ce]+=J*se[ce]*this.tickPad[ce]/O[5*ce];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],fe,this.tickColor[X],Ee,re,Q)}if(this.labelEnable[X]){for(Z=0,re=[0,0,0],this.labels[X].length>4&&(we(X),Z=1),(Q=[this.labelAlign[X],.5,Z])[0]==="auto"?Q[0]=0:Q[0]=parseInt(""+Q[0]),ce=0;ce<3;++ce)fe[ce]+=J*se[ce]*this.labelPad[ce]/O[5*ce];fe[X]+=.5*(R[0][X]+R[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],fe,this.labelColor[X],[0,0,0],re,Q)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(h,s,t){h.exports=function(u){for(var p=[],c=[],x=0,d=0;d<3;++d)for(var g=(d+1)%3,v=(d+2)%3,y=[0,0,0],m=[0,0,0],_=-1;_<=1;_+=2){c.push(x,x+2,x+1,x+1,x+2,x+3),y[d]=_,m[d]=_;for(var f=-1;f<=1;f+=2){y[g]=f;for(var S=-1;S<=1;S+=2)y[v]=S,p.push(y[0],y[1],y[2],m[0],m[1],m[2]),x+=1}var w=g;g=v,v=w}var E=a(u,new Float32Array(p)),O=a(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),C=n(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],O),P=r(u);return P.attributes.position.location=0,P.attributes.normal.location=1,new i(u,E,C,P)};var a=t(2762),n=t(8116),r=t(1879).bg;function i(u,p,c,x){this.gl=u,this.buffer=p,this.vao=c,this.shader=x}var l=i.prototype;l.draw=function(u,p,c,x,d,g){for(var v=!1,y=0;y<3;++y)v=v||d[y];if(v){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:p,projection:c,bounds:x,enable:d,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(h,s,t){h.exports=function(f,S,w,E,O){n(l,S,f),n(l,w,l);for(var C=0,P=0;P<2;++P){c[2]=E[P][2];for(var R=0;R<2;++R){c[1]=E[R][1];for(var j=0;j<2;++j)c[0]=E[j][0],d(u[C],c,l),C+=1}}var D=-1;for(P=0;P<8;++P){for(var N=u[P][3],W=0;W<3;++W)p[P][W]=u[P][W]/N;O&&(p[P][2]*=-1),N<0&&(D<0||p[P][2]<p[D][2])&&(D=P)}if(D<0){D=0;for(var F=0;F<3;++F){for(var V=(F+2)%3,U=(F+1)%3,te=-1,J=-1,X=0;X<2;++X){var K=(Z=X<<F)+(X<<V)+(1-X<<U),Q=Z+(1-X<<V)+(X<<U);i(p[Z],p[K],p[Q],x)<0||(X?te=1:J=1)}if(te<0||J<0)J>te&&(D|=1<<F);else{for(X=0;X<2;++X){K=(Z=X<<F)+(X<<V)+(1-X<<U),Q=Z+(1-X<<V)+(X<<U);var Z,re=v([u[Z],u[K],u[Q],u[Z+(1<<V)+(1<<U)]]);X?te=re:J=re}J>te&&(D|=1<<F)}}}var oe=7^D,ae=-1;for(P=0;P<8;++P)P!==D&&P!==oe&&(ae<0||p[ae][1]>p[P][1])&&(ae=P);var ce=-1;for(P=0;P<3;++P)(pe=ae^1<<P)!==D&&pe!==oe&&(ce<0&&(ce=pe),(U=p[pe])[0]<p[ce][0]&&(ce=pe));var he=-1;for(P=0;P<3;++P){var pe;(pe=ae^1<<P)!==D&&pe!==oe&&pe!==ce&&(he<0&&(he=pe),(U=p[pe])[0]>p[he][0]&&(he=pe))}var xe=y;xe[0]=xe[1]=xe[2]=0,xe[a.log2(ce^ae)]=ae&ce,xe[a.log2(ae^he)]=ae&he;var be=7^he;be===D||be===oe?(be=7^ce,xe[a.log2(he^be)]=be&he):xe[a.log2(ce^be)]=be&ce;var ve=m,ge=D;for(F=0;F<3;++F)ve[F]=ge&1<<F?-1:1;return _};var a=t(8828),n=t(6760),r=t(5202),i=t(3250),l=new Array(16),u=new Array(8),p=new Array(8),c=new Array(3),x=[0,0,0];function d(f,S,w){for(var E=0;E<4;++E){f[E]=w[12+E];for(var O=0;O<3;++O)f[E]+=S[O]*w[4*O+E]}}(function(){for(var f=0;f<8;++f)u[f]=[1,1,1,1],p[f]=[1,1,1]})();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(f){for(var S=0;S<g.length;++S)if((f=r.positive(f,g[S])).length<3)return 0;var w=f[0],E=w[0]/w[3],O=w[1]/w[3],C=0;for(S=1;S+1<f.length;++S){var P=f[S],R=f[S+1],j=P[0]/P[3]-E,D=P[1]/P[3]-O,N=R[0]/R[3]-E,W=R[1]/R[3]-O;C+=Math.abs(j*W-D*N)}return C}var y=[1,1,1],m=[0,0,0],_={cubeEdges:y,axis:m}},501:function(h,s,t){h.exports=function(y,m,_){var f=[],S=[0,0,0],w=[0,0,0],E=[0,0,0],O=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=f.length/3|0,R=0;R<_[C].length;++R){var j=+_[C][R].x;f.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1)}var D=f.length/3|0;S[C]=P,w[C]=D-P,P=f.length/3|0;for(var N=0;N<_[C].length;++N)j=+_[C][N].x,f.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1);D=f.length/3|0,E[C]=P,O[C]=D-P}var W=a(y,new Float32Array(f)),F=n(y,[{buffer:W,type:y.FLOAT,size:3,stride:0,offset:0}]),V=r(y);return V.attributes.position.location=0,new g(y,W,F,V,w,S,O,E)};var a=t(2762),n=t(8116),r=t(1879).n,i=[0,0,0],l=[0,0,0],u=[0,0,0],p=[0,0,0],c=[1,1];function x(y){return y[0]=y[1]=y[2]=0,y}function d(y,m){return y[0]=m[0],y[1]=m[1],y[2]=m[2],y}function g(y,m,_,f,S,w,E,O){this.gl=y,this.vertBuffer=m,this.vao=_,this.shader=f,this.tickCount=S,this.tickOffset=w,this.gridCount=E,this.gridOffset=O}var v=g.prototype;v.bind=function(y,m,_){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=m,this.shader.uniforms.projection=_,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(y,m,_,f,S){var w=x(l);this.shader.uniforms.majorAxis=l,w[y]=m[1][y]-m[0][y],this.shader.uniforms.minorAxis=w;var E,O=d(p,_);O[y]+=m[0][y],this.shader.uniforms.offset=O,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=f,(E=x(u))[(y+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(y+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(y,m,_,f,S){if(this.tickCount[y]){var w=x(i);w[y]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=S;var E=x(u);E[y]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},v.drawGrid=function(y,m,_,f,S,w){if(this.gridCount[y]){var E=x(l);E[m]=_[1][m]-_[0][m],this.shader.uniforms.minorAxis=E;var O=d(p,f);O[m]+=_[0][m],this.shader.uniforms.offset=O;var C=x(i);C[y]=1,this.shader.uniforms.majorAxis=C;var P=x(u);P[y]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},v.drawZero=function(y,m,_,f,S,w){var E=x(l);this.shader.uniforms.majorAxis=E,E[y]=_[1][y]-_[0][y],this.shader.uniforms.minorAxis=E;var O=d(p,f);O[y]+=_[0][y],this.shader.uniforms.offset=O;var C=x(u);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(h,s,t){var a=t(3236),n=t(9405),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),i=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.n=function(x){return n(x,r,i,null,[{name:"position",type:"vec3"}])};var l=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.Q=function(x){return n(x,l,u,null,[{name:"position",type:"vec3"}])};var p=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=a([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return n(x,p,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(h,s,t){h.exports=function(d,g,v,y,m,_){var f=a(d),S=n(d,[{buffer:f,size:3}]),w=i(d);w.attributes.position.location=0;var E=new p(d,w,f,S);return E.update(g,v,y,m,_),E};var a=t(2762),n=t(8116),r=t(4359),i=t(1879).Q,l=window||M.global||{},u=l.__TEXT_CACHE||{};function p(d,g,v,y){this.gl=d,this.shader=g,this.buffer=v,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var c=p.prototype,x=[0,0];c.bind=function(d,g,v,y){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=d,m.view=g,m.projection=v,m.pixelScale=y,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},c.unbind=function(){this.vao.unbind()},c.update=function(d,g,v,y,m){var _=[];function f(D,N,W,F,V,U){var te=[W.style,W.weight,W.variant,W.family].join("_"),J=u[te];J||(J=u[te]={});var X=J[N];X||(X=J[N]=function(pe,xe){try{return r(pe,xe)}catch(be){return console.warn('error vectorizing text:"'+pe+'" error:',be),{cells:[],positions:[]}}}(N,{triangles:!0,font:W.family,fontStyle:W.style,fontWeight:W.weight,fontVariant:W.variant,textAlign:"center",textBaseline:"middle",lineSpacing:V,styletags:U}));for(var K=(F||12)/12,Q=X.positions,Z=X.cells,re=0,oe=Z.length;re<oe;++re)for(var ae=Z[re],ce=2;ce>=0;--ce){var he=Q[ae[ce]];_.push(K*he[0],-K*he[1],D)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],O=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=_.length/3|0,f(.5*(d[0][P]+d[1][P]),g[P],v[P],12,1.25,C),O[P]=(_.length/3|0)-E[P],S[P]=_.length/3|0;for(var R=0;R<y[P].length;++R)if(y[P][R].text){var j={family:y[P][R].font||m[P].family,style:m[P].fontStyle||m[P].style,weight:m[P].fontWeight||m[P].weight,variant:m[P].fontVariant||m[P].variant};f(y[P][R].x,y[P][R].text,j,y[P][R].fontSize||12,1.25,C)}w[P]=(_.length/3|0)-S[P]}this.buffer.update(_),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=O},c.drawTicks=function(d,g,v,y,m,_,f,S){this.tickCount[d]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=v,this.shader.uniforms.scale=g,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))},c.drawLabel=function(d,g,v,y,m,_,f,S){this.labelCount[d]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=v,this.shader.uniforms.scale=g,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(h,s){function t(a,n){var r=a+"",i=r.indexOf("."),l=0;i>=0&&(l=r.length-i-1);var u=Math.pow(10,l),p=Math.round(a*n*u),c=p+"";if(c.indexOf("e")>=0)return c;var x=p/u,d=p%u;p<0?(x=0|-Math.ceil(x),d=0|-d):(x=0|Math.floor(x),d|=0);var g=""+x;if(p<0&&(g="-"+g),l){for(var v=""+d;v.length<l;)v="0"+v;return g+"."+v}return g}s.create=function(a,n){for(var r=[],i=0;i<3;++i){for(var l=[],u=(a[0][i],a[1][i],0);u*n[i]<=a[1][i];++u)l.push({x:u*n[i],text:t(n[i],u)});for(u=-1;u*n[i]>=a[0][i];--u)l.push({x:u*n[i],text:t(n[i],u)});r.push(l)}return r},s.equal=function(a,n){for(var r=0;r<3;++r){if(a[r].length!==n[r].length)return!1;for(var i=0;i<a[r].length;++i){var l=a[r][i],u=n[r][i];if(l.x!==u.x||l.text!==u.text||l.font!==u.font||l.fontColor!==u.fontColor||l.fontSize!==u.fontSize||l.dx!==u.dx||l.dy!==u.dy)return!1}}return!0}},5445:function(h,s,t){h.exports=function(_,f,S,w,E){var O=f.model||p,C=f.view||p,P=f.projection||p,R=f._ortho||!1,j=_.bounds,D=(E=E||r(O,C,P,j,R)).axis;i(c,C,O),i(c,P,c);for(var N=y,W=0;W<3;++W)N[W].lo=1/0,N[W].hi=-1/0,N[W].pixelsPerDataUnit=1/0;var F=a(l(c,c));l(c,c);for(var V=0;V<3;++V){var U=(V+1)%3,te=(V+2)%3,J=m;e:for(W=0;W<2;++W){var X=[];if(D[V]<0!=!!W){J[V]=j[W][V];for(var K=0;K<2;++K){J[U]=j[K^W][U];for(var Q=0;Q<2;++Q)J[te]=j[Q^K^W][te],X.push(J.slice())}var Z=R?5:4;for(K=Z;K===Z;++K){if(X.length===0)continue e;X=n.positive(X,F[K])}for(K=0;K<X.length;++K){te=X[K];var re=v(m,c,te,S,w);for(Q=0;Q<3;++Q)N[Q].lo=Math.min(N[Q].lo,te[Q]),N[Q].hi=Math.max(N[Q].hi,te[Q]),Q!==V&&(N[Q].pixelsPerDataUnit=Math.min(N[Q].pixelsPerDataUnit,Math.abs(re[Q])))}}}}return N};var a=t(5033),n=t(5202),r=t(6429),i=t(6760),l=t(5665),u=t(5352),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function x(_,f,S){this.lo=_,this.hi=f,this.pixelsPerDataUnit=S}var d=[0,0,0,1],g=[0,0,0,1];function v(_,f,S,w,E){for(var O=0;O<3;++O){for(var C=d,P=g,R=0;R<3;++R)P[R]=C[R]=S[R];P[3]=C[3]=1,P[O]+=1,u(P,P,f),P[3]<0&&(_[O]=1/0),C[O]-=1,u(C,C,f),C[3]<0&&(_[O]=1/0);var j=(C[0]/C[3]-P[0]/P[3])*w,D=(C[1]/C[3]-P[1]/P[3])*E;_[O]=.25*Math.sqrt(j*j+D*D)}return _}var y=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],m=[0,0,0]},2762:function(h,s,t){var a=t(1888),n=t(5298),r=t(9618),i=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(x,d,g,v,y){this.gl=x,this.type=d,this.handle=g,this.length=v,this.usage=y}var u=l.prototype;function p(x,d,g,v,y,m){var _=y.length*y.BYTES_PER_ELEMENT;if(m<0)return x.bufferData(d,y,v),_;if(_+m>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(d,m,y),g}function c(x,d){for(var g=a.malloc(x.length,d),v=x.length,y=0;y<v;++y)g[y]=x[y];return g}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,d){if(typeof d!="number"&&(d=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var g=x.dtype;if(i.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&g!=="uint16"?"uint32":"uint16"),g===x.dtype&&function(_,f){for(var S=1,w=f.length-1;w>=0;--w){if(f[w]!==S)return!1;S*=_[w]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=p(this.gl,this.type,this.length,this.usage,x.data,d):this.length=p(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),d);else{var v=a.malloc(x.size,g),y=r(v,x.shape);n.assign(y,x),this.length=p(this.gl,this.type,this.length,this.usage,d<0?v:v.subarray(0,x.size),d),a.free(v)}}else if(Array.isArray(x)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(x,"uint16"):c(x,"float32"),this.length=p(this.gl,this.type,this.length,this.usage,d<0?m:m.subarray(0,x.length),d),a.free(m)}else if(typeof x=="object"&&typeof x.length=="number")this.length=p(this.gl,this.type,this.length,this.usage,x,d);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(d>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},h.exports=function(x,d,g,v){if(g=g||x.ARRAY_BUFFER,v=v||x.DYNAMIC_DRAW,g!==x.ARRAY_BUFFER&&g!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(v!==x.DYNAMIC_DRAW&&v!==x.STATIC_DRAW&&v!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=x.createBuffer(),m=new l(x,g,y,0,v);return m.update(d),m}},6405:function(h,s,t){var a=t(2931);h.exports=function(r,i){var l=r.positions,u=r.vectors,p={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(r.positions.length===0)return i&&(i[0]=[0,0,0],i[1]=[0,0,0]),p;for(var c=0,x=1/0,d=-1/0,g=1/0,v=-1/0,y=1/0,m=-1/0,_=null,f=null,S=[],w=1/0,E=!1,O=r.coneSizemode==="raw",C=0;C<l.length;C++){var P=l[C];x=Math.min(P[0],x),d=Math.max(P[0],d),g=Math.min(P[1],g),v=Math.max(P[1],v),y=Math.min(P[2],y),m=Math.max(P[2],m);var R=u[C];if(a.length(R)>c&&(c=a.length(R)),C&&!O){var j=2*a.distance(_,P)/(a.length(f)+a.length(R));j?(w=Math.min(w,j),E=!1):E=!0}E||(_=P,f=R),S.push(R)}var D=[x,g,y],N=[d,v,m];i&&(i[0]=D,i[1]=N),c===0&&(c=1);var W=1/c;isFinite(w)||(w=1),p.vectorScale=w;var F=r.coneSize||(O?1:.5);r.absoluteConeSize&&(F=r.absoluteConeSize*W),p.coneScale=F,C=0;for(var V=0;C<l.length;C++)for(var U=(P=l[C])[0],te=P[1],J=P[2],X=S[C],K=a.length(X)*W,Q=0;Q<8;Q++){p.positions.push([U,te,J,V++]),p.positions.push([U,te,J,V++]),p.positions.push([U,te,J,V++]),p.positions.push([U,te,J,V++]),p.positions.push([U,te,J,V++]),p.positions.push([U,te,J,V++]),p.vectors.push(X),p.vectors.push(X),p.vectors.push(X),p.vectors.push(X),p.vectors.push(X),p.vectors.push(X),p.vertexIntensity.push(K,K,K),p.vertexIntensity.push(K,K,K);var Z=p.positions.length;p.cells.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}return p};var n=t(614);h.exports.createMesh=t(9060),h.exports.createConeMesh=function(r,i){return h.exports.createMesh(r,i,{shaders:n,traceType:"cone"})}},9060:function(h,s,t){var a=t(9405),n=t(2762),r=t(8116),i=t(7766),l=t(6760),u=t(7608),p=t(9618),c=t(6729),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(v,y,m,_,f,S,w,E,O,C,P){this.gl=v,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=m,this.pickShader=_,this.trianglePositions=f,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=O,this.triangleIds=w,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var g=d.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(v){this.pickId=v},g.update=function(v){v=v||{};var y=this.gl;this.dirty=!0,"lightPosition"in v&&(this.lightPosition=v.lightPosition),"opacity"in v&&(this.opacity=v.opacity),"ambient"in v&&(this.ambientLight=v.ambient),"diffuse"in v&&(this.diffuseLight=v.diffuse),"specular"in v&&(this.specularLight=v.specular),"roughness"in v&&(this.roughness=v.roughness),"fresnel"in v&&(this.fresnel=v.fresnel),v.tubeScale!==void 0&&(this.tubeScale=v.tubeScale),v.vectorScale!==void 0&&(this.vectorScale=v.vectorScale),v.coneScale!==void 0&&(this.coneScale=v.coneScale),v.coneOffset!==void 0&&(this.coneOffset=v.coneOffset),v.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(re){for(var oe=c({colormap:re,nshades:256,format:"rgba"}),ae=new Uint8Array(1024),ce=0;ce<256;++ce){for(var he=oe[ce],pe=0;pe<3;++pe)ae[4*ce+pe]=he[pe];ae[4*ce+3]=255*he[3]}return p(ae,[256,256,4],[4,0,1])}(v.colormap)),this.texture.generateMipmap());var m=v.cells,_=v.positions,f=v.vectors;if(_&&m&&f){var S=[],w=[],E=[],O=[],C=[];this.cells=m,this.positions=_,this.vectors=f;var P=v.meshColor||[1,1,1,1],R=v.vertexIntensity,j=1/0,D=-1/0;if(R)if(v.vertexIntensityBounds)j=+v.vertexIntensityBounds[0],D=+v.vertexIntensityBounds[1];else for(var N=0;N<R.length;++N){var W=R[N];j=Math.min(j,W),D=Math.max(D,W)}else for(N=0;N<_.length;++N)W=_[N][2],j=Math.min(j,W),D=Math.max(D,W);for(this.intensity=R||function(re){for(var oe=re.length,ae=new Array(oe),ce=0;ce<oe;++ce)ae[ce]=re[ce][2];return ae}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<_.length;++N)for(var F=_[N],V=0;V<3;++V)!isNaN(F[V])&&isFinite(F[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],F[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],F[V]));var U=0;e:for(N=0;N<m.length;++N){var te=m[N];if(te.length===3){for(V=0;V<3;++V){F=_[X=te[V]];for(var J=0;J<3;++J)if(isNaN(F[J])||!isFinite(F[J]))continue e}for(V=0;V<3;++V){var X;F=_[X=te[2-V]],S.push(F[0],F[1],F[2],F[3]);var K=f[X];w.push(K[0],K[1],K[2],K[3]||0);var Q,Z=P;Z.length===3?E.push(Z[0],Z[1],Z[2],1):E.push(Z[0],Z[1],Z[2],Z[3]),Q=R?[(R[X]-j)/(D-j),0]:[(F[2]-j)/(D-j),0],O.push(Q[0],Q[1]),C.push(N)}U+=1}}this.triangleCount=U,this.trianglePositions.update(S),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(C))}},g.drawTransparent=g.draw=function(v){v=v||{};for(var y=this.gl,m=v.model||x,_=v.view||x,f=v.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);var E={model:m,view:_,projection:f,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),y.disable(y.CULL_FACE),this.texture.bind(0);var O=new Array(16);for(l(O,E.view,E.model),l(O,E.projection,O),u(O,O),w=0;w<3;++w)E.eyePosition[w]=O[12+w]/O[15];var C=O[15];for(w=0;w<3;++w)C+=this.lightPosition[w]*O[4*w+3];for(w=0;w<3;++w){for(var P=O[12+w],R=0;R<3;++R)P+=O[4*R+w]*this.lightPosition[R];E.lightPosition[w]=P/C}if(this.triangleCount>0){var j=this.triShader;j.bind(),j.uniforms=E,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(v){v=v||{};for(var y=this.gl,m=v.model||x,_=v.view||x,f=v.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);this._model=[].slice.call(m),this._view=[].slice.call(_),this._projection=[].slice.call(f),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var E={model:m,view:_,projection:f,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(v){if(!v||v.id!==this.pickId)return null;var y=v.value[0]+256*v.value[1]+65536*v.value[2],m=this.cells[y],_=this.positions[m[1]].slice(0,3),f={position:_,dataCoordinate:_,index:Math.floor(m[1]/48)};return this.traceType==="cone"?f.index=Math.floor(m[1]/48):this.traceType==="streamtube"&&(f.intensity=this.intensity[m[1]],f.velocity=this.vectors[m[1]].slice(0,3),f.divergence=this.vectors[m[1]][3],f.index=y),f},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},h.exports=function(v,y,m){var _=m.shaders;arguments.length===1&&(v=(y=v).gl);var f=function(D,N){var W=a(D,N.meshShader.vertex,N.meshShader.fragment,null,N.meshShader.attributes);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.vector.location=4,W}(v,_),S=function(D,N){var W=a(D,N.pickShader.vertex,N.pickShader.fragment,null,N.pickShader.attributes);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.vector.location=4,W}(v,_),w=i(v,p(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=v.LINEAR_MIPMAP_LINEAR,w.magFilter=v.LINEAR;var E=n(v),O=n(v),C=n(v),P=n(v),R=n(v),j=new d(v,w,f,S,E,O,R,C,P,r(v,[{buffer:E,type:v.FLOAT,size:4},{buffer:R,type:v.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:v.FLOAT,size:4},{buffer:P,type:v.FLOAT,size:2},{buffer:O,type:v.FLOAT,size:4}]),m.traceType||"cone");return j.update(y),j}},614:function(h,s,t){var a=t(3236),n=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),i=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:i,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(h){h.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(h,s,t){var a=t(737);h.exports=function(n){return a[n]}},9165:function(h,s,t){h.exports=function(d){var g=d.gl,v=a(g),y=n(g,[{buffer:v,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:v,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:v,type:g.FLOAT,size:3,offset:28,stride:40}]),m=r(g);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var _=new l(g,v,y,m);return _.update(d),_};var a=t(2762),n=t(8116),r=t(3436),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(d,g,v,y){this.gl=d,this.shader=y,this.buffer=g,this.vao=v,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=l.prototype;function p(d,g){for(var v=0;v<3;++v)d[0][v]=Math.min(d[0][v],g[v]),d[1][v]=Math.max(d[1][v],g[v])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(d){var g=this.gl,v=this.shader.uniforms;this.shader.bind();var y=v.view=d.view||i,m=v.projection=d.projection||i;v.model=d.model||i,v.clipBounds=this.clipBounds,v.opacity=this.opacity;var _=y[12],f=y[13],S=y[14],w=y[15],E=(d._ortho?2:1)*this.pixelRatio*(m[3]*_+m[7]*f+m[11]*S+m[15]*w)/g.drawingBufferHeight;this.vao.bind();for(var O=0;O<3;++O)g.lineWidth(this.lineWidth[O]*this.pixelRatio),v.capSize=this.capSize[O]*E,this.lineCount[O]&&g.drawArrays(g.LINES,this.lineOffset[O],this.lineCount[O]);this.vao.unbind()};var c=function(){for(var d=new Array(3),g=0;g<3;++g){for(var v=[],y=1;y<=2;++y)for(var m=-1;m<=1;m+=2){var _=[0,0,0];_[(y+g)%3]=m,v.push(_)}d[g]=v}return d}();function x(d,g,v,y){for(var m=c[y],_=0;_<m.length;++_){var f=m[_];d.push(g[0],g[1],g[2],v[0],v[1],v[2],v[3],f[0],f[1],f[2])}return m.length}u.update=function(d){"lineWidth"in(d=d||{})&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=d.color||[[0,0,0],[0,0,0],[0,0,0]],v=d.position,y=d.error;if(Array.isArray(g[0])||(g=[g,g,g]),v&&y){var m=[],_=v.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=f;e:for(var w=0;w<_;++w){for(var E=v[w],O=0;O<3;++O)if(isNaN(E[O])||!isFinite(E[O]))continue e;var C,P=y[w],R=g[S];Array.isArray(R[0])&&(R=g[w]),R.length===3?R=[R[0],R[1],R[2],1]:R.length===4&&(R=[R[0],R[1],R[2],R[3]],!this.hasAlpha&&R[3]<1&&(this.hasAlpha=!0)),!isNaN(P[0][S])&&!isNaN(P[1][S])&&(P[0][S]<0&&((C=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],R[0],R[1],R[2],R[3],0,0,0,C[0],C[1],C[2],R[0],R[1],R[2],R[3],0,0,0),p(this.bounds,C),f+=2+x(m,C,R,S)),P[1][S]>0&&((C=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],R[0],R[1],R[2],R[3],0,0,0,C[0],C[1],C[2],R[0],R[1],R[2],R[3],0,0,0),p(this.bounds,C),f+=2+x(m,C,R,S)))}this.lineCount[S]=f-this.lineOffset[S]}this.buffer.update(m)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(h,s,t){var a=t(3236),n=t(9405),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);h.exports=function(l){return n(l,r,i,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(h,s,t){var a=t(7766);h.exports=function(_,f,S,w){n||(n=_.FRAMEBUFFER_UNSUPPORTED,r=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,i=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(N,W){var F=N.getParameter(W.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(F+1);for(var V=0;V<=F;++V){for(var U=new Array(F),te=0;te<V;++te)U[te]=N.COLOR_ATTACHMENT0+te;for(te=V;te<F;++te)U[te]=N.NONE;u[V]=U}}(_,E),Array.isArray(f)&&(w=S,S=0|f[1],f=0|f[0]),typeof f!="number")throw new Error("gl-fbo: Missing shape parameter");var O=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(f<0||f>O||S<0||S>O)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(w=w||{})){if((C=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=_.UNSIGNED_BYTE,R=_.getExtension("OES_texture_float");if(w.float&&C>0){if(!R)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else w.preferFloat&&C>0&&R&&(P=_.FLOAT);var j=!0;"depth"in w&&(j=!!w.depth);var D=!1;return"stencil"in w&&(D=!!w.stencil),new v(_,f,S,P,C,j,D,E)};var n,r,i,l,u=null;function p(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function c(_,f){_.bindFramebuffer(_.FRAMEBUFFER,f[0]),_.bindRenderbuffer(_.RENDERBUFFER,f[1]),_.bindTexture(_.TEXTURE_2D,f[2])}function x(_){switch(_){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case i:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(_,f,S,w,E,O){if(!w)return null;var C=a(_,f,S,E,w);return C.magFilter=_.NEAREST,C.minFilter=_.NEAREST,C.mipSamples=1,C.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,O,_.TEXTURE_2D,C.handle,0),C}function g(_,f,S,w,E){var O=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,O),_.renderbufferStorage(_.RENDERBUFFER,w,f,S),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,O),O}function v(_,f,S,w,E,O,C,P){this.gl=_,this._shape=[0|f,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var R=0;R<E;++R)this.color[R]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=O,this._useStencil=C;var j=this,D=[0|f,0|S];Object.defineProperties(D,{0:{get:function(){return j._shape[0]},set:function(N){return j.width=N}},1:{get:function(){return j._shape[1]},set:function(N){return j.height=N}}}),this._shapeVector=D,function(N){var W=p(N.gl),F=N.gl,V=N.handle=F.createFramebuffer(),U=N._shape[0],te=N._shape[1],J=N.color.length,X=N._ext,K=N._useStencil,Q=N._useDepth,Z=N._colorType;F.bindFramebuffer(F.FRAMEBUFFER,V);for(var re=0;re<J;++re)N.color[re]=d(F,U,te,Z,F.RGBA,F.COLOR_ATTACHMENT0+re);J===0?(N._color_rb=g(F,U,te,F.RGBA4,F.COLOR_ATTACHMENT0),X&&X.drawBuffersWEBGL(u[0])):J>1&&X.drawBuffersWEBGL(u[J]);var oe=F.getExtension("WEBGL_depth_texture");oe?K?N.depth=d(F,U,te,oe.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Q&&(N.depth=d(F,U,te,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):Q&&K?N._depth_rb=g(F,U,te,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Q?N._depth_rb=g(F,U,te,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):K&&(N._depth_rb=g(F,U,te,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var ae=F.checkFramebufferStatus(F.FRAMEBUFFER);if(ae!==F.FRAMEBUFFER_COMPLETE){for(N._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(N.handle),N.handle=null,N.depth&&(N.depth.dispose(),N.depth=null),N._depth_rb&&(F.deleteRenderbuffer(N._depth_rb),N._depth_rb=null),re=0;re<N.color.length;++re)N.color[re].dispose(),N.color[re]=null;N._color_rb&&(F.deleteRenderbuffer(N._color_rb),N._color_rb=null),c(F,W),x(ae)}c(F,W)}(this)}var y=v.prototype;function m(_,f,S){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==f||_._shape[1]!==S){var w=_.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=f,_._shape[1]=S;for(var O=p(w),C=0;C<_.color.length;++C)_.color[C].shape=_._shape;_._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,_._shape[0],_._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,_.handle);var P=w.checkFramebufferStatus(w.FRAMEBUFFER);P!==w.FRAMEBUFFER_COMPLETE&&(_.dispose(),c(w,O),x(P)),c(w,O)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|_[0],S=0|_[1];return m(this,f,S),[f,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return m(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,m(this,this._shape[0],_),_},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(h,s,t){var a=t(3387).sprintf,n=t(5171),r=t(1848),i=t(1085);h.exports=function(l,u,p){var c=r(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";p!==void 0&&(x=p===n.FRAGMENT_SHADER?"fragment":"vertex");for(var d=a(`Error compiling %s shader %s:
`,x,c),g=a("%s%s",d,l),v=l.split(`
`),y={},m=0;m<v.length;m++){var _=v[m];if(_!==""&&_!=="\0"){var f=parseInt(_.split(":")[2]);if(isNaN(f))throw new Error(a("Could not parse error: %s",_));y[f]=_}}var S=i(u).split(`
`);for(m=0;m<S.length;m++)if((y[m+3]||y[m+2]||y[m+1])&&(d+=S[m]+`
`,y[m+1])){var w=y[m+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=a(`^^^ %s

`,w)}return{long:d.trim(),short:g.trim()}}},2510:function(h,s,t){h.exports=function(g,v){var y=g.gl,m=new p(g,i(y,u.vertex,u.fragment),i(y,u.pickVertex,u.pickFragment),l(y),l(y),l(y),l(y));return m.update(v),g.addObject(m),m};var a=t(2478),n=t(7762),r=t(1888),i=t(9405),l=t(2762),u=t(6768);function p(g,v,y,m,_,f,S){this.plot=g,this.shader=v,this.pickShader=y,this.positionBuffer=m,this.weightBuffer=_,this.colorBuffer=f,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,x=p.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,v=this.shader,y=this.bounds,m=this.numVertices;if(!(m<=0)){var _=g.gl,f=g.dataBox,S=y[2]-y[0],w=y[3]-y[1],E=f[2]-f[0],O=f[3]-f[1];c[0]=2*S/E,c[4]=2*w/O,c[6]=2*(y[0]-f[0])/E-1,c[7]=2*(y[1]-f[1])/O-1,v.bind();var C=v.uniforms;C.viewTransform=c,C.shape=this.shape;var P=v.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,m)}}),x.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(y){var m=this.plot,_=this.pickShader,f=this.bounds,S=this.numVertices;if(!(S<=0)){var w=m.gl,E=m.dataBox,O=f[2]-f[0],C=f[3]-f[1],P=E[2]-E[0],R=E[3]-E[1];g[0]=2*O/P,g[4]=2*C/R,g[6]=2*(f[0]-E[0])/P-1,g[7]=2*(f[1]-E[1])/R-1;for(var j=0;j<4;++j)v[j]=y>>8*j&255;this.pickOffset=y,_.bind();var D=_.uniforms;D.viewTransform=g,D.pickOffset=v,D.shape=this.shape;var N=_.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),y+this.shape[0]*this.shape[1]}}}(),x.pick=function(g,v,y){var m=this.pickOffset,_=this.shape[0]*this.shape[1];if(y<m||y>=m+_)return null;var f=y-m,S=this.xData,w=this.yData;return{object:this,pointId:f,dataCoord:[S[f%this.shape[0]],w[f/this.shape[0]|0]]}},x.update=function(g){var v=(g=g||{}).shape||[0,0],y=g.x||n(v[0]),m=g.y||n(v[1]),_=g.z||new Float32Array(v[0]*v[1]),f=g.zsmooth!==!1;this.xData=y,this.yData=m;var S,w,E,O,C=g.colorLevels||[0],P=g.colorValues||[0,0,0,1],R=C.length,j=this.bounds;f?(S=j[0]=y[0],w=j[1]=m[0],E=j[2]=y[y.length-1],O=j[3]=m[m.length-1]):(S=j[0]=y[0]+(y[1]-y[0])/2,w=j[1]=m[0]+(m[1]-m[0])/2,E=j[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,O=j[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var D=1/(E-S),N=1/(O-w),W=v[0],F=v[1];this.shape=[W,F];var V=(f?(W-1)*(F-1):W*F)*(d.length>>>1);this.numVertices=V;for(var U=r.mallocUint8(4*V),te=r.mallocFloat32(2*V),J=r.mallocUint8(2*V),X=r.mallocUint32(V),K=0,Q=f?W-1:W,Z=f?F-1:F,re=0;re<Z;++re){var oe,ae;f?(oe=N*(m[re]-w),ae=N*(m[re+1]-w)):(oe=re<F-1?N*(m[re]-(m[re+1]-m[re])/2-w):N*(m[re]-(m[re]-m[re-1])/2-w),ae=re<F-1?N*(m[re]+(m[re+1]-m[re])/2-w):N*(m[re]+(m[re]-m[re-1])/2-w));for(var ce=0;ce<Q;++ce){var he,pe;f?(he=D*(y[ce]-S),pe=D*(y[ce+1]-S)):(he=ce<W-1?D*(y[ce]-(y[ce+1]-y[ce])/2-S):D*(y[ce]-(y[ce]-y[ce-1])/2-S),pe=ce<W-1?D*(y[ce]+(y[ce+1]-y[ce])/2-S):D*(y[ce]+(y[ce]-y[ce-1])/2-S));for(var xe=0;xe<d.length;xe+=2){var be,ve,ge,we,_e=d[xe],se=d[xe+1],ie=_[f?(re+se)*W+(ce+_e):re*W+ce],fe=a.le(C,ie);if(fe<0)be=P[0],ve=P[1],ge=P[2],we=P[3];else if(fe===R-1)be=P[4*R-4],ve=P[4*R-3],ge=P[4*R-2],we=P[4*R-1];else{var Ee=(ie-C[fe])/(C[fe+1]-C[fe]),Te=1-Ee,Ae=4*fe,Se=4*(fe+1);be=Te*P[Ae]+Ee*P[Se],ve=Te*P[Ae+1]+Ee*P[Se+1],ge=Te*P[Ae+2]+Ee*P[Se+2],we=Te*P[Ae+3]+Ee*P[Se+3]}U[4*K]=255*be,U[4*K+1]=255*ve,U[4*K+2]=255*ge,U[4*K+3]=255*we,te[2*K]=.5*he+.5*pe,te[2*K+1]=.5*oe+.5*ae,J[2*K]=_e,J[2*K+1]=se,X[K]=re*W+ce,K+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(J),this.colorBuffer.update(U),this.idBuffer.update(X),r.free(te),r.free(U),r.free(J),r.free(X)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(h,s,t){var a=t(3236);h.exports={fragment:a([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(h,s,t){var a=t(3236),n=t(9405),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(p){return n(p,r,i,null,u)},s.createPickShader=function(p){return n(p,r,l,null,u)}},5714:function(h,s,t){h.exports=function(S){var w=S.gl||S.scene&&S.scene.gl,E=x(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var O=d(w);O.attributes.position.location=0,O.attributes.nextPosition.location=1,O.attributes.arcLength.location=2,O.attributes.lineWidth.location=3,O.attributes.color.location=4;for(var C=a(w),P=n(w,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),R=p(new Array(1024),[256,1,4]),j=0;j<1024;++j)R.data[j]=255;var D=r(w,R);D.wrap=w.REPEAT;var N=new _(w,E,O,C,P,D);return N.update(S),N};var a=t(2762),n=t(8116),r=t(7766),i=new Uint8Array(4),l=new Float32Array(i.buffer),u=t(2478),p=t(9618),c=t(7319),x=c.createShader,d=c.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(S,w){for(var E=0,O=0;O<3;++O){var C=S[O]-w[O];E+=C*C}return Math.sqrt(E)}function y(S){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(S[0][E],w[0][E]),w[1][E]=Math.min(S[1][E],w[1][E]);return w}function m(S,w,E,O){this.arcLength=S,this.position=w,this.index=E,this.dataCoordinate=O}function _(S,w,E,O,C,P){this.gl=S,this.shader=w,this.pickShader=E,this.buffer=O,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=_.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(S){this.pickId=S},f.drawTransparent=f.draw=function(S){if(this.vertexCount){var w=this.gl,E=this.shader,O=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},O.bind(),O.draw(w.TRIANGLE_STRIP,this.vertexCount),O.unbind()}},f.drawPick=function(S){if(this.vertexCount){var w=this.gl,E=this.pickShader,O=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},O.bind(),O.draw(w.TRIANGLE_STRIP,this.vertexCount),O.unbind()}},f.update=function(S){var w,E;this.dirty=!0;var O=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],R=[],j=0,D=0,N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=S.position||S.positions;if(W){var F=S.color||S.colors||[0,0,0,1],V=S.lineWidth||1,U=!1;e:for(w=1;w<W.length;++w){var te,J,X,K=W[w-1],Q=W[w];for(P.push(j),R.push(K.slice()),E=0;E<3;++E){if(isNaN(K[E])||isNaN(Q[E])||!isFinite(K[E])||!isFinite(Q[E])){if(!O&&C.length>0){for(var Z=0;Z<24;++Z)C.push(C[C.length-12]);D+=2,U=!0}continue e}N[0][E]=Math.min(N[0][E],K[E],Q[E]),N[1][E]=Math.max(N[1][E],K[E],Q[E])}Array.isArray(F[0])?(te=F.length>w-1?F[w-1]:F.length>0?F[F.length-1]:[0,0,0,1],J=F.length>w?F[w]:F.length>0?F[F.length-1]:[0,0,0,1]):te=J=F,te.length===3&&(te=[te[0],te[1],te[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),X=Array.isArray(V)?V.length>w-1?V[w-1]:V.length>0?V[V.length-1]:[0,0,0,1]:V;var re=j;if(j+=v(K,Q),U){for(E=0;E<2;++E)C.push(K[0],K[1],K[2],Q[0],Q[1],Q[2],re,X,te[0],te[1],te[2],te[3]);D+=2,U=!1}C.push(K[0],K[1],K[2],Q[0],Q[1],Q[2],re,X,te[0],te[1],te[2],te[3],K[0],K[1],K[2],Q[0],Q[1],Q[2],re,-X,te[0],te[1],te[2],te[3],Q[0],Q[1],Q[2],K[0],K[1],K[2],j,-X,J[0],J[1],J[2],J[3],Q[0],Q[1],Q[2],K[0],K[1],K[2],j,X,J[0],J[1],J[2],J[3]),D+=4}}if(this.buffer.update(C),P.push(j),R.push(W[W.length-1].slice()),this.bounds=N,this.vertexCount=D,this.points=R,this.arcLength=P,"dashes"in S){var oe=S.dashes.slice();for(oe.unshift(0),w=1;w<oe.length;++w)oe[w]=oe[w-1]+oe[w];var ae=p(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)ae.set(w,0,E,0);1&u.le(oe,oe[oe.length-1]*w/255)?ae.set(w,0,0,0):ae.set(w,0,0,255)}this.texture.setPixels(ae)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(S){if(!S||S.id!==this.pickId)return null;var w=function(W,F,V,U){return i[0]=0,i[1]=V,i[2]=F,i[3]=W,l[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var O=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),R=1-P,j=[0,0,0],D=0;D<3;++D)j[D]=R*O[D]+P*C[D];var N=Math.min(P<.5?E:E+1,this.points.length-1);return new m(w,j,N,this.points[N])}},1903:function(h){h.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},6864:function(h){h.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},9921:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2],r=s[3],i=s[4],l=s[5],u=s[6],p=s[7],c=s[8],x=s[9],d=s[10],g=s[11],v=s[12],y=s[13],m=s[14],_=s[15];return(t*l-a*i)*(d*_-g*m)-(t*u-n*i)*(x*_-g*y)+(t*p-r*i)*(x*m-d*y)+(a*u-n*l)*(c*_-g*v)-(a*p-r*l)*(c*m-d*v)+(n*p-r*u)*(c*y-x*v)}},7399:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],i=t[3],l=a+a,u=n+n,p=r+r,c=a*l,x=n*l,d=n*u,g=r*l,v=r*u,y=r*p,m=i*l,_=i*u,f=i*p;return s[0]=1-d-y,s[1]=x+f,s[2]=g-_,s[3]=0,s[4]=x-f,s[5]=1-c-y,s[6]=v+m,s[7]=0,s[8]=g+_,s[9]=v-m,s[10]=1-c-d,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},6743:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2],l=t[3],u=n+n,p=r+r,c=i+i,x=n*u,d=n*p,g=n*c,v=r*p,y=r*c,m=i*c,_=l*u,f=l*p,S=l*c;return s[0]=1-(v+m),s[1]=d+S,s[2]=g-f,s[3]=0,s[4]=d-S,s[5]=1-(x+m),s[6]=y+_,s[7]=0,s[8]=g+f,s[9]=y-_,s[10]=1-(x+v),s[11]=0,s[12]=a[0],s[13]=a[1],s[14]=a[2],s[15]=1,s}},7894:function(h){h.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7608:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],i=t[3],l=t[4],u=t[5],p=t[6],c=t[7],x=t[8],d=t[9],g=t[10],v=t[11],y=t[12],m=t[13],_=t[14],f=t[15],S=a*u-n*l,w=a*p-r*l,E=a*c-i*l,O=n*p-r*u,C=n*c-i*u,P=r*c-i*p,R=x*m-d*y,j=x*_-g*y,D=x*f-v*y,N=d*_-g*m,W=d*f-v*m,F=g*f-v*_,V=S*F-w*W+E*N+O*D-C*j+P*R;return V?(V=1/V,s[0]=(u*F-p*W+c*N)*V,s[1]=(r*W-n*F-i*N)*V,s[2]=(m*P-_*C+f*O)*V,s[3]=(g*C-d*P-v*O)*V,s[4]=(p*D-l*F-c*j)*V,s[5]=(a*F-r*D+i*j)*V,s[6]=(_*E-y*P-f*w)*V,s[7]=(x*P-g*E+v*w)*V,s[8]=(l*W-u*D+c*R)*V,s[9]=(n*D-a*W-i*R)*V,s[10]=(y*C-m*E+f*S)*V,s[11]=(d*E-x*C-v*S)*V,s[12]=(u*j-l*N-p*R)*V,s[13]=(a*N-n*j+r*R)*V,s[14]=(m*w-y*O-_*S)*V,s[15]=(x*O-d*w+g*S)*V,s):null}},6582:function(h,s,t){var a=t(7894);h.exports=function(n,r,i,l){var u,p,c,x,d,g,v,y,m,_,f=r[0],S=r[1],w=r[2],E=l[0],O=l[1],C=l[2],P=i[0],R=i[1],j=i[2];return Math.abs(f-P)<1e-6&&Math.abs(S-R)<1e-6&&Math.abs(w-j)<1e-6?a(n):(v=f-P,y=S-R,m=w-j,u=O*(m*=_=1/Math.sqrt(v*v+y*y+m*m))-C*(y*=_),p=C*(v*=_)-E*m,c=E*y-O*v,(_=Math.sqrt(u*u+p*p+c*c))?(u*=_=1/_,p*=_,c*=_):(u=0,p=0,c=0),x=y*c-m*p,d=m*u-v*c,g=v*p-y*u,(_=Math.sqrt(x*x+d*d+g*g))?(x*=_=1/_,d*=_,g*=_):(x=0,d=0,g=0),n[0]=u,n[1]=x,n[2]=v,n[3]=0,n[4]=p,n[5]=d,n[6]=y,n[7]=0,n[8]=c,n[9]=g,n[10]=m,n[11]=0,n[12]=-(u*f+p*S+c*w),n[13]=-(x*f+d*S+g*w),n[14]=-(v*f+y*S+m*w),n[15]=1,n)}},6760:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2],l=t[3],u=t[4],p=t[5],c=t[6],x=t[7],d=t[8],g=t[9],v=t[10],y=t[11],m=t[12],_=t[13],f=t[14],S=t[15],w=a[0],E=a[1],O=a[2],C=a[3];return s[0]=w*n+E*u+O*d+C*m,s[1]=w*r+E*p+O*g+C*_,s[2]=w*i+E*c+O*v+C*f,s[3]=w*l+E*x+O*y+C*S,w=a[4],E=a[5],O=a[6],C=a[7],s[4]=w*n+E*u+O*d+C*m,s[5]=w*r+E*p+O*g+C*_,s[6]=w*i+E*c+O*v+C*f,s[7]=w*l+E*x+O*y+C*S,w=a[8],E=a[9],O=a[10],C=a[11],s[8]=w*n+E*u+O*d+C*m,s[9]=w*r+E*p+O*g+C*_,s[10]=w*i+E*c+O*v+C*f,s[11]=w*l+E*x+O*y+C*S,w=a[12],E=a[13],O=a[14],C=a[15],s[12]=w*n+E*u+O*d+C*m,s[13]=w*r+E*p+O*g+C*_,s[14]=w*i+E*c+O*v+C*f,s[15]=w*l+E*x+O*y+C*S,s}},4040:function(h){h.exports=function(s,t,a,n,r,i,l){var u=1/(t-a),p=1/(n-r),c=1/(i-l);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*p,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+a)*u,s[13]=(r+n)*p,s[14]=(l+i)*c,s[15]=1,s}},4772:function(h){h.exports=function(s,t,a,n,r){var i=1/Math.tan(t/2),l=1/(n-r);return s[0]=i/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(r+n)*l,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*r*n*l,s[15]=0,s}},6079:function(h){h.exports=function(s,t,a,n){var r,i,l,u,p,c,x,d,g,v,y,m,_,f,S,w,E,O,C,P,R,j,D,N,W=n[0],F=n[1],V=n[2],U=Math.sqrt(W*W+F*F+V*V);return Math.abs(U)<1e-6?null:(W*=U=1/U,F*=U,V*=U,r=Math.sin(a),l=1-(i=Math.cos(a)),u=t[0],p=t[1],c=t[2],x=t[3],d=t[4],g=t[5],v=t[6],y=t[7],m=t[8],_=t[9],f=t[10],S=t[11],w=W*W*l+i,E=F*W*l+V*r,O=V*W*l-F*r,C=W*F*l-V*r,P=F*F*l+i,R=V*F*l+W*r,j=W*V*l+F*r,D=F*V*l-W*r,N=V*V*l+i,s[0]=u*w+d*E+m*O,s[1]=p*w+g*E+_*O,s[2]=c*w+v*E+f*O,s[3]=x*w+y*E+S*O,s[4]=u*C+d*P+m*R,s[5]=p*C+g*P+_*R,s[6]=c*C+v*P+f*R,s[7]=x*C+y*P+S*R,s[8]=u*j+d*D+m*N,s[9]=p*j+g*D+_*N,s[10]=c*j+v*D+f*N,s[11]=x*j+y*D+S*N,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},5567:function(h){h.exports=function(s,t,a){var n=Math.sin(a),r=Math.cos(a),i=t[4],l=t[5],u=t[6],p=t[7],c=t[8],x=t[9],d=t[10],g=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=i*r+c*n,s[5]=l*r+x*n,s[6]=u*r+d*n,s[7]=p*r+g*n,s[8]=c*r-i*n,s[9]=x*r-l*n,s[10]=d*r-u*n,s[11]=g*r-p*n,s}},2408:function(h){h.exports=function(s,t,a){var n=Math.sin(a),r=Math.cos(a),i=t[0],l=t[1],u=t[2],p=t[3],c=t[8],x=t[9],d=t[10],g=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=i*r-c*n,s[1]=l*r-x*n,s[2]=u*r-d*n,s[3]=p*r-g*n,s[8]=i*n+c*r,s[9]=l*n+x*r,s[10]=u*n+d*r,s[11]=p*n+g*r,s}},7089:function(h){h.exports=function(s,t,a){var n=Math.sin(a),r=Math.cos(a),i=t[0],l=t[1],u=t[2],p=t[3],c=t[4],x=t[5],d=t[6],g=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=i*r+c*n,s[1]=l*r+x*n,s[2]=u*r+d*n,s[3]=p*r+g*n,s[4]=c*r-i*n,s[5]=x*r-l*n,s[6]=d*r-u*n,s[7]=g*r-p*n,s}},2504:function(h){h.exports=function(s,t,a){var n=a[0],r=a[1],i=a[2];return s[0]=t[0]*n,s[1]=t[1]*n,s[2]=t[2]*n,s[3]=t[3]*n,s[4]=t[4]*r,s[5]=t[5]*r,s[6]=t[6]*r,s[7]=t[7]*r,s[8]=t[8]*i,s[9]=t[9]*i,s[10]=t[10]*i,s[11]=t[11]*i,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},7656:function(h){h.exports=function(s,t,a){var n,r,i,l,u,p,c,x,d,g,v,y,m=a[0],_=a[1],f=a[2];return t===s?(s[12]=t[0]*m+t[4]*_+t[8]*f+t[12],s[13]=t[1]*m+t[5]*_+t[9]*f+t[13],s[14]=t[2]*m+t[6]*_+t[10]*f+t[14],s[15]=t[3]*m+t[7]*_+t[11]*f+t[15]):(n=t[0],r=t[1],i=t[2],l=t[3],u=t[4],p=t[5],c=t[6],x=t[7],d=t[8],g=t[9],v=t[10],y=t[11],s[0]=n,s[1]=r,s[2]=i,s[3]=l,s[4]=u,s[5]=p,s[6]=c,s[7]=x,s[8]=d,s[9]=g,s[10]=v,s[11]=y,s[12]=n*m+u*_+d*f+t[12],s[13]=r*m+p*_+g*f+t[13],s[14]=i*m+c*_+v*f+t[14],s[15]=l*m+x*_+y*f+t[15]),s}},5665:function(h){h.exports=function(s,t){if(s===t){var a=t[1],n=t[2],r=t[3],i=t[6],l=t[7],u=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=a,s[6]=t[9],s[7]=t[13],s[8]=n,s[9]=i,s[11]=t[14],s[12]=r,s[13]=l,s[14]=u}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},7626:function(h,s,t){var a=t(2642),n=t(9346);function r(u,p){for(var c=[0,0,0,0],x=0;x<4;++x)for(var d=0;d<4;++d)c[d]+=u[4*x+d]*p[x];return c}function i(u,p,c,x,d){for(var g=r(x,r(c,r(p,[u[0],u[1],u[2],1]))),v=0;v<3;++v)g[v]/=g[3];return[.5*d[0]*(1+g[0]),.5*d[1]*(1-g[1])]}function l(u,p){for(var c=[0,0,0],x=0;x<u.length;++x)for(var d=u[x],g=p[x],v=0;v<3;++v)c[v]+=g*d[v];return c}h.exports=function(u,p,c,x,d,g){if(u.length===1)return[0,u[0].slice()];for(var v=new Array(u.length),y=0;y<u.length;++y)v[y]=i(u[y],c,x,d,g);var m=0,_=1/0;for(y=0;y<v.length;++y){for(var f=0,S=0;S<2;++S)f+=Math.pow(v[y][S]-p[S],2);f<_&&(_=f,m=y)}var w=function(O,C){if(O.length===2){for(var P=0,R=0,j=0;j<2;++j)P+=Math.pow(C[j]-O[0][j],2),R+=Math.pow(C[j]-O[1][j],2);return(P=Math.sqrt(P))+(R=Math.sqrt(R))<1e-6?[1,0]:[R/(P+R),P/(R+P)]}if(O.length===3){var D=[0,0];return n(O[0],O[1],O[2],C,D),a(O,D)}return[]}(v,p),E=0;for(y=0;y<3;++y){if(w[y]<-.001||w[y]>1.0001)return null;E+=w[y]}return Math.abs(E-1)>.001?null:[m,l(u,w),w]}},840:function(h,s,t){var a=t(3236),n=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),r=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),p=a([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),x=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=a([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),v=a([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:i,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:u,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:d,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:v,attributes:[{name:"position",type:"vec3"}]}},7201:function(h,s,t){var a=t(9405),n=t(2762),r=t(8116),i=t(7766),l=t(8406),u=t(6760),p=t(7608),c=t(9618),x=t(6729),d=t(7765),g=t(1888),v=t(840),y=t(7626),m=v.meshShader,_=v.wireShader,f=v.pointShader,S=v.pickShader,w=v.pointPickShader,E=v.contourShader,O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(F,V,U,te,J,X,K,Q,Z,re,oe,ae,ce,he,pe,xe,be,ve,ge,we,_e,se,ie,fe,Ee,Te,Ae){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=U,this.lineShader=te,this.pointShader=J,this.pickShader=X,this.pointPickShader=K,this.contourShader=Q,this.trianglePositions=Z,this.triangleColors=oe,this.triangleNormals=ce,this.triangleUVs=ae,this.triangleIds=re,this.triangleVAO=he,this.triangleCount=0,this.lineWidth=1,this.edgePositions=pe,this.edgeColors=be,this.edgeUVs=ve,this.edgeIds=xe,this.edgeVAO=ge,this.edgeCount=0,this.pointPositions=we,this.pointColors=se,this.pointUVs=ie,this.pointSizes=fe,this.pointIds=_e,this.pointVAO=Ee,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Ae,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=O,this._view=O,this._projection=O,this._resolution=[1,1]}var P=C.prototype;function R(F,V){if(!V||!V.length)return 1;for(var U=0;U<V.length;++U){if(V.length<2)return 1;if(V[U][0]===F)return V[U][1];if(V[U][0]>F&&U>0){var te=(V[U][0]-F)/(V[U][0]-V[U-1][0]);return V[U][1]*(1-te)+te*V[U-1][1]}}return 1}function j(F){var V=a(F,f.vertex,f.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}function D(F){var V=a(F,S.vertex,S.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}function N(F){var V=a(F,w.vertex,w.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}function W(F){var V=a(F,E.vertex,E.fragment);return V.attributes.position.location=0,V}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(F){this.pickId=F},P.highlight=function(F){if(F&&this.contourEnable){for(var V=d(this.cells,this.intensity,F.intensity),U=V.cells,te=V.vertexIds,J=V.vertexWeights,X=U.length,K=g.mallocFloat32(6*X),Q=0,Z=0;Z<X;++Z)for(var re=U[Z],oe=0;oe<2;++oe){var ae=re[0];re.length===2&&(ae=re[oe]);for(var ce=te[ae][0],he=te[ae][1],pe=J[ae],xe=1-pe,be=this.positions[ce],ve=this.positions[he],ge=0;ge<3;++ge)K[Q++]=pe*be[ge]+xe*ve[ge]}this.contourCount=Q/3|0,this.contourPositions.update(K.subarray(0,Q)),g.free(K)}else this.contourCount=0},P.update=function(F){F=F||{};var V=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=i(V,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(function(Pt,Ot){for(var At=x({colormap:Pt,nshades:256,format:"rgba"}),He=new Uint8Array(1024),Ze=0;Ze<256;++Ze){for(var Be=At[Ze],Ge=0;Ge<3;++Ge)He[4*Ze+Ge]=Be[Ge];He[4*Ze+3]=Ot?255*R(Ze/255,Ot):255*Be[3]}return c(He,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var U=F.cells,te=F.positions;if(te&&U){var J=[],X=[],K=[],Q=[],Z=[],re=[],oe=[],ae=[],ce=[],he=[],pe=[],xe=[],be=[],ve=[];this.cells=U,this.positions=te;var ge=F.vertexNormals,we=F.cellNormals,_e=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,se=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!we&&(we=l.faceNormals(U,te,se)),we||ge||(ge=l.vertexNormals(U,te,_e));var ie=F.vertexColors,fe=F.cellColors,Ee=F.meshColor||[1,1,1,1],Te=F.vertexUVs,Ae=F.vertexIntensity,Se=F.cellUVs,Oe=F.cellIntensity,De=1/0,de=-1/0;if(!Te&&!Se)if(Ae)if(F.vertexIntensityBounds)De=+F.vertexIntensityBounds[0],de=+F.vertexIntensityBounds[1];else for(var me=0;me<Ae.length;++me){var Me=Ae[me];De=Math.min(De,Me),de=Math.max(de,Me)}else if(Oe)if(F.cellIntensityBounds)De=+F.cellIntensityBounds[0],de=+F.cellIntensityBounds[1];else for(me=0;me<Oe.length;++me)Me=Oe[me],De=Math.min(De,Me),de=Math.max(de,Me);else for(me=0;me<te.length;++me)Me=te[me][2],De=Math.min(De,Me),de=Math.max(de,Me);this.intensity=Ae||Oe||function(Pt){for(var Ot=Pt.length,At=new Array(Ot),He=0;He<Ot;++He)At[He]=Pt[He][2];return At}(te),this.pickVertex=!(Oe||fe);var ze=F.pointSizes,Pe=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],me=0;me<te.length;++me)for(var Ne=te[me],Ve=0;Ve<3;++Ve)!isNaN(Ne[Ve])&&isFinite(Ne[Ve])&&(this.bounds[0][Ve]=Math.min(this.bounds[0][Ve],Ne[Ve]),this.bounds[1][Ve]=Math.max(this.bounds[1][Ve],Ne[Ve]));var Ye=0,at=0,rt=0;e:for(me=0;me<U.length;++me){var dt=U[me];switch(dt.length){case 1:for(Ne=te[ht=dt[0]],Ve=0;Ve<3;++Ve)if(isNaN(Ne[Ve])||!isFinite(Ne[Ve]))continue e;he.push(Ne[0],Ne[1],Ne[2]),et=ie?ie[ht]:fe?fe[me]:Ee,this.opacityscale&&Ae?X.push(et[0],et[1],et[2],this.opacity*R((Ae[ht]-De)/(de-De),this.opacityscale)):et.length===3?pe.push(et[0],et[1],et[2],this.opacity):(pe.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),$e=Te?Te[ht]:Ae?[(Ae[ht]-De)/(de-De),0]:Se?Se[me]:Oe?[(Oe[me]-De)/(de-De),0]:[(Ne[2]-De)/(de-De),0],xe.push($e[0],$e[1]),ze?be.push(ze[ht]):be.push(Pe),ve.push(me),rt+=1;break;case 2:for(Ve=0;Ve<2;++Ve){Ne=te[ht=dt[Ve]];for(var vt=0;vt<3;++vt)if(isNaN(Ne[vt])||!isFinite(Ne[vt]))continue e}for(Ve=0;Ve<2;++Ve)Ne=te[ht=dt[Ve]],re.push(Ne[0],Ne[1],Ne[2]),et=ie?ie[ht]:fe?fe[me]:Ee,this.opacityscale&&Ae?X.push(et[0],et[1],et[2],this.opacity*R((Ae[ht]-De)/(de-De),this.opacityscale)):et.length===3?oe.push(et[0],et[1],et[2],this.opacity):(oe.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),$e=Te?Te[ht]:Ae?[(Ae[ht]-De)/(de-De),0]:Se?Se[me]:Oe?[(Oe[me]-De)/(de-De),0]:[(Ne[2]-De)/(de-De),0],ae.push($e[0],$e[1]),ce.push(me);at+=1;break;case 3:for(Ve=0;Ve<3;++Ve)for(Ne=te[ht=dt[Ve]],vt=0;vt<3;++vt)if(isNaN(Ne[vt])||!isFinite(Ne[vt]))continue e;for(Ve=0;Ve<3;++Ve){var ht,et,$e,wt;Ne=te[ht=dt[2-Ve]],J.push(Ne[0],Ne[1],Ne[2]),(et=ie?ie[ht]:fe?fe[me]:Ee)?this.opacityscale&&Ae?X.push(et[0],et[1],et[2],this.opacity*R((Ae[ht]-De)/(de-De),this.opacityscale)):et.length===3?X.push(et[0],et[1],et[2],this.opacity):(X.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)):X.push(.5,.5,.5,1),$e=Te?Te[ht]:Ae?[(Ae[ht]-De)/(de-De),0]:Se?Se[me]:Oe?[(Oe[me]-De)/(de-De),0]:[(Ne[2]-De)/(de-De),0],Q.push($e[0],$e[1]),wt=ge?ge[ht]:we[me],K.push(wt[0],wt[1],wt[2]),Z.push(me)}Ye+=1}}this.pointCount=rt,this.edgeCount=at,this.triangleCount=Ye,this.pointPositions.update(he),this.pointColors.update(pe),this.pointUVs.update(xe),this.pointSizes.update(be),this.pointIds.update(new Uint32Array(ve)),this.edgePositions.update(re),this.edgeColors.update(oe),this.edgeUVs.update(ae),this.edgeIds.update(new Uint32Array(ce)),this.trianglePositions.update(J),this.triangleColors.update(X),this.triangleUVs.update(Q),this.triangleNormals.update(K),this.triangleIds.update(new Uint32Array(Z))}},P.drawTransparent=P.draw=function(F){F=F||{};for(var V=this.gl,U=F.model||O,te=F.view||O,J=F.projection||O,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)X[0][K]=Math.max(X[0][K],this.clipBounds[0][K]),X[1][K]=Math.min(X[1][K],this.clipBounds[1][K]);var Q={model:U,view:te,projection:J,inverseModel:O.slice(),clipBounds:X,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Q.inverseModel=p(Q.inverseModel,Q.model),V.disable(V.CULL_FACE),this.texture.bind(0);var Z=new Array(16);for(u(Z,Q.view,Q.model),u(Z,Q.projection,Z),p(Z,Z),K=0;K<3;++K)Q.eyePosition[K]=Z[12+K]/Z[15];var re,oe=Z[15];for(K=0;K<3;++K)oe+=this.lightPosition[K]*Z[4*K+3];for(K=0;K<3;++K){for(var ae=Z[12+K],ce=0;ce<3;++ce)ae+=Z[4*ce+K]*this.lightPosition[ce];Q.lightPosition[K]=ae/oe}this.triangleCount>0&&((re=this.triShader).bind(),re.uniforms=Q,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((re=this.lineShader).bind(),re.uniforms=Q,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((re=this.pointShader).bind(),re.uniforms=Q,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((re=this.contourShader).bind(),re.uniforms=Q,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(F){F=F||{};for(var V=this.gl,U=F.model||O,te=F.view||O,J=F.projection||O,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)X[0][K]=Math.max(X[0][K],this.clipBounds[0][K]),X[1][K]=Math.min(X[1][K],this.clipBounds[1][K]);this._model=[].slice.call(U),this._view=[].slice.call(te),this._projection=[].slice.call(J),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var Q,Z={model:U,view:te,projection:J,clipBounds:X,pickId:this.pickId/255};(Q=this.pickShader).bind(),Q.uniforms=Z,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((Q=this.pointPickShader).bind(),Q.uniforms=Z,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var V=F.value[0]+256*F.value[1]+65536*F.value[2],U=this.cells[V],te=this.positions,J=new Array(U.length),X=0;X<U.length;++X)J[X]=te[U[X]];var K=F.coord[0],Q=F.coord[1];if(!this.pickVertex){var Z=this.positions[U[0]],re=this.positions[U[1]],oe=this.positions[U[2]],ae=[(Z[0]+re[0]+oe[0])/3,(Z[1]+re[1]+oe[1])/3,(Z[2]+re[2]+oe[2])/3];return{_cellCenter:!0,position:[K,Q],index:V,cell:U,cellId:V,intensity:this.intensity[V],dataCoordinate:ae}}var ce=y(J,[K*this.pixelRatio,this._resolution[1]-Q*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ce)return null;var he=ce[2],pe=0;for(X=0;X<U.length;++X)pe+=he[X]*this.intensity[U[X]];return{position:ce[1],index:U[ce[0]],cell:U,cellId:V,intensity:pe,dataCoordinate:this.positions[U[ce[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},h.exports=function(F,V){if(arguments.length===1&&(F=(V=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var U=function(Oe){var De=a(Oe,m.vertex,m.fragment);return De.attributes.position.location=0,De.attributes.color.location=2,De.attributes.uv.location=3,De.attributes.normal.location=4,De}(F),te=function(Oe){var De=a(Oe,_.vertex,_.fragment);return De.attributes.position.location=0,De.attributes.color.location=2,De.attributes.uv.location=3,De}(F),J=j(F),X=D(F),K=N(F),Q=W(F),Z=i(F,c(new Uint8Array([255,255,255,255]),[1,1,4]));Z.generateMipmap(),Z.minFilter=F.LINEAR_MIPMAP_LINEAR,Z.magFilter=F.LINEAR;var re=n(F),oe=n(F),ae=n(F),ce=n(F),he=n(F),pe=r(F,[{buffer:re,type:F.FLOAT,size:3},{buffer:he,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:F.FLOAT,size:4},{buffer:ae,type:F.FLOAT,size:2},{buffer:ce,type:F.FLOAT,size:3}]),xe=n(F),be=n(F),ve=n(F),ge=n(F),we=r(F,[{buffer:xe,type:F.FLOAT,size:3},{buffer:ge,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:F.FLOAT,size:4},{buffer:ve,type:F.FLOAT,size:2}]),_e=n(F),se=n(F),ie=n(F),fe=n(F),Ee=n(F),Te=r(F,[{buffer:_e,type:F.FLOAT,size:3},{buffer:Ee,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:F.FLOAT,size:4},{buffer:ie,type:F.FLOAT,size:2},{buffer:fe,type:F.FLOAT,size:1}]),Ae=n(F),Se=new C(F,Z,U,te,J,X,K,Q,re,he,oe,ae,ce,pe,xe,ge,be,ve,we,_e,Ee,se,ie,fe,Te,Ae,r(F,[{buffer:Ae,type:F.FLOAT,size:3}]));return Se.update(V),Se}},8120:function(h,s,t){h.exports=function(c){var x=c.gl;return new i(c,a(x,[0,0,0,1,1,0,1,1]),n(x,r.boxVert,r.lineFrag))};var a=t(2762),n=t(9405),r=t(3603);function i(c,x,d){this.plot=c,this.vbo=x,this.shader=d}var l,u,p=i.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawBox=(l=[0,0],u=[0,0],function(c,x,d,g,v){var y=this.plot,m=this.shader,_=y.gl;l[0]=c,l[1]=x,u[0]=d,u[1]=g,m.uniforms.lo=l,m.uniforms.hi=u,m.uniforms.color=v,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(h,s,t){h.exports=function(y){var m=y.gl;return new l(y,a(m),n(m,i.gridVert,i.gridFrag),n(m,i.tickVert,i.gridFrag))};var a=t(2762),n=t(9405),r=t(2478),i=t(3603);function l(y,m,_,f){this.plot=y,this.vbo=m,this.shader=_,this.tickShader=f,this.ticks=[[],[]]}function u(y,m){return y-m}var p,c,x,d,g,v=l.prototype;v.draw=(p=[0,0],c=[0,0],x=[0,0],function(){for(var y=this.plot,m=this.vbo,_=this.shader,f=this.ticks,S=y.gl,w=y._tickBounds,E=y.dataBox,O=y.viewBox,C=y.gridLineWidth,P=y.gridLineColor,R=y.gridLineEnable,j=y.pixelRatio,D=0;D<2;++D){var N=w[D],W=w[D+2]-N,F=.5*(E[D+2]+E[D]),V=E[D+2]-E[D];c[D]=2*W/V,p[D]=2*(N-F)/V}_.bind(),m.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=p,_.uniforms.dataScale=c;var U=0;for(D=0;D<2;++D){x[0]=x[1]=0,x[D]=1,_.uniforms.dataAxis=x,_.uniforms.lineWidth=C[D]/(O[D+2]-O[D])*j,_.uniforms.color=P[D];var te=6*f[D].length;R[D]&&te&&S.drawArrays(S.TRIANGLES,U,te),U+=te}}),v.drawTickMarks=function(){var y=[0,0],m=[0,0],_=[1,0],f=[0,1],S=[0,0],w=[0,0];return function(){for(var E=this.plot,O=this.vbo,C=this.tickShader,P=this.ticks,R=E.gl,j=E._tickBounds,D=E.dataBox,N=E.viewBox,W=E.pixelRatio,F=E.screenBox,V=F[2]-F[0],U=F[3]-F[1],te=N[2]-N[0],J=N[3]-N[1],X=0;X<2;++X){var K=j[X],Q=j[X+2]-K,Z=.5*(D[X+2]+D[X]),re=D[X+2]-D[X];m[X]=2*Q/re,y[X]=2*(K-Z)/re}m[0]*=te/V,y[0]*=te/V,m[1]*=J/U,y[1]*=J/U,C.bind(),O.bind(),C.attributes.dataCoord.pointer();var oe=C.uniforms;oe.dataShift=y,oe.dataScale=m;var ae=E.tickMarkLength,ce=E.tickMarkWidth,he=E.tickMarkColor,pe=6*P[0].length,xe=Math.min(r.ge(P[0],(D[0]-j[0])/(j[2]-j[0]),u),P[0].length),be=Math.min(r.gt(P[0],(D[2]-j[0])/(j[2]-j[0]),u),P[0].length),ve=0+6*xe,ge=6*Math.max(0,be-xe),we=Math.min(r.ge(P[1],(D[1]-j[1])/(j[3]-j[1]),u),P[1].length),_e=Math.min(r.gt(P[1],(D[3]-j[1])/(j[3]-j[1]),u),P[1].length),se=pe+6*we,ie=6*Math.max(0,_e-we);S[0]=2*(N[0]-ae[1])/V-1,S[1]=(N[3]+N[1])/U-1,w[0]=ae[1]*W/V,w[1]=ce[1]*W/U,ie&&(oe.color=he[1],oe.tickScale=w,oe.dataAxis=f,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,se,ie)),S[0]=(N[2]+N[0])/V-1,S[1]=2*(N[1]-ae[0])/U-1,w[0]=ce[0]*W/V,w[1]=ae[0]*W/U,ge&&(oe.color=he[0],oe.tickScale=w,oe.dataAxis=_,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,ve,ge)),S[0]=2*(N[2]+ae[3])/V-1,S[1]=(N[3]+N[1])/U-1,w[0]=ae[3]*W/V,w[1]=ce[3]*W/U,ie&&(oe.color=he[3],oe.tickScale=w,oe.dataAxis=f,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,se,ie)),S[0]=(N[2]+N[0])/V-1,S[1]=2*(N[3]+ae[2])/U-1,w[0]=ce[2]*W/V,w[1]=ae[2]*W/U,ge&&(oe.color=he[2],oe.tickScale=w,oe.dataAxis=_,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,ve,ge))}}(),v.update=(d=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(y){for(var m=y.ticks,_=y.bounds,f=new Float32Array(18*(m[0].length+m[1].length)),S=(this.plot.zeroLineEnable,0),w=[[],[]],E=0;E<2;++E)for(var O=w[E],C=m[E],P=_[E],R=_[E+2],j=0;j<C.length;++j){var D=(C[j].x-P)/(R-P);O.push(D);for(var N=0;N<6;++N)f[S++]=D,f[S++]=d[N],f[S++]=g[N]}this.ticks=w,this.vbo.update(f)}),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(h,s,t){h.exports=function(c){var x=c.gl;return new i(c,a(x,[-1,-1,-1,1,1,-1,1,1]),n(x,r.lineVert,r.lineFrag))};var a=t(2762),n=t(9405),r=t(3603);function i(c,x,d){this.plot=c,this.vbo=x,this.shader=d}var l,u,p=i.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawLine=(l=[0,0],u=[0,0],function(c,x,d,g,v,y){var m=this.plot,_=this.shader,f=m.gl;l[0]=c,l[1]=x,u[0]=d,u[1]=g,_.uniforms.start=l,_.uniforms.end=u,_.uniforms.width=v*m.pixelRatio,_.uniforms.color=y,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(h,s,t){var a=t(3236),n=a([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);h.exports={lineVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:a([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(h,s,t){h.exports=function(m){var _=m.gl;return new u(m,a(_),n(_,l.textVert,l.textFrag))};var a=t(2762),n=t(9405),r=t(529),i=t(2478),l=t(3603);function u(m,_,f){this.plot=m,this.vbo=_,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,c,x,d,g,v,y=u.prototype;y.drawTicks=(p=[0,0],c=[0,0],x=[0,0],function(m){var _=this.plot,f=this.shader,S=this.tickX[m],w=this.tickOffset[m],E=_.gl,O=_.viewBox,C=_.dataBox,P=_.screenBox,R=_.pixelRatio,j=_.tickEnable,D=_.tickPad,N=_.tickColor,W=_.tickAngle,F=_.labelEnable,V=_.labelPad,U=_.labelColor,te=_.labelAngle,J=this.labelOffset[m],X=this.labelCount[m],K=i.lt(S,C[m]),Q=i.le(S,C[m+2]);p[0]=p[1]=0,p[m]=1,c[m]=(O[2+m]+O[m])/(P[2+m]-P[m])-1;var Z=2/P[2+(1^m)]-P[1^m];c[1^m]=Z*O[1^m]-1,j[m]&&(c[1^m]-=Z*R*D[m],K<Q&&w[Q]>w[K]&&(f.uniforms.dataAxis=p,f.uniforms.screenOffset=c,f.uniforms.color=N[m],f.uniforms.angle=W[m],E.drawArrays(E.TRIANGLES,w[K],w[Q]-w[K]))),F[m]&&X&&(c[1^m]-=Z*R*V[m],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=U[m],f.uniforms.angle=te[m],E.drawArrays(E.TRIANGLES,J,X)),c[1^m]=Z*O[2+(1^m)]-1,j[m+2]&&(c[1^m]+=Z*R*D[m+2],K<Q&&w[Q]>w[K]&&(f.uniforms.dataAxis=p,f.uniforms.screenOffset=c,f.uniforms.color=N[m+2],f.uniforms.angle=W[m+2],E.drawArrays(E.TRIANGLES,w[K],w[Q]-w[K]))),F[m+2]&&X&&(c[1^m]+=Z*R*V[m+2],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=U[m+2],f.uniforms.angle=te[m+2],E.drawArrays(E.TRIANGLES,J,X))}),y.drawTitle=function(){var m=[0,0],_=[0,0];return function(){var f=this.plot,S=this.shader,w=f.gl,E=f.screenBox,O=f.titleCenter,C=f.titleAngle,P=f.titleColor,R=f.pixelRatio;if(this.titleCount){for(var j=0;j<2;++j)_[j]=2*(O[j]*R-E[j])/(E[2+j]-E[j])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=_,S.uniforms.angle=C,S.uniforms.color=P,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}}(),y.bind=(d=[0,0],g=[0,0],v=[0,0],function(){var m=this.plot,_=this.shader,f=m._tickBounds,S=m.dataBox,w=m.screenBox,E=m.viewBox;_.bind();for(var O=0;O<2;++O){var C=f[O],P=f[O+2]-C,R=.5*(S[O+2]+S[O]),j=S[O+2]-S[O],D=E[O],N=E[O+2]-D,W=w[O],F=w[O+2]-W;g[O]=2*P/j*N/F,d[O]=2*(C-R)/j*N/F}v[1]=2*m.pixelRatio/(w[3]-w[1]),v[0]=v[1]*(w[3]-w[1])/(w[2]-w[0]),_.uniforms.dataScale=g,_.uniforms.dataShift=d,_.uniforms.textScale=v,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),y.update=function(m){var _,f,S,w,E,O=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var R=[Math.floor(O.length/3)],j=[-1/0],D=C[E];for(_=0;_<D.length;++_){var N=D[_],W=N.x,F=N.text,V=N.font||"sans-serif",U=N.fontStyle||"normal",te=N.fontWeight||"normal",J=N.fontVariant||"normal";w=N.fontSize||12;for(var X=1/(P[E+2]-P[E]),K=P[E],Q=F.split(`
`),Z=0;Z<Q.length;Z++)for(S=r(V,Q[Z],{fontStyle:U,fontWeight:te,fontVariant:J}).data,f=0;f<S.length;f+=2)O.push(S[f]*w,-S[f+1]*w-Z*w*1.2,(W-K)*X);R.push(Math.floor(O.length/3)),j.push(W)}this.tickOffset[E]=R,this.tickX[E]=j}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(O.length/3),S=r(m.labelFont[E],m.labels[E],{fontStyle:m.labelFontStyle[E],fontWeight:m.labelFontWeight[E],fontVariant:m.labelFontVariant[E],textAlign:"center"}).data,w=m.labelSize[E],_=0;_<S.length;_+=2)O.push(S[_]*w,-S[_+1]*w,0);this.labelCount[E]=Math.floor(O.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(O.length/3),S=r(m.titleFont,m.title,{fontStyle:m.titleFontStyle,fontWeight:m.titleFontWeight,fontVariant:m.titleFontVariant}).data,w=m.titleSize,_=0;_<S.length;_+=2)O.push(S[_]*w,-S[_+1]*w,0);this.titleCount=Math.floor(O.length/3)-this.titleOffset,this.vbo.update(O)},y.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(h,s,t){h.exports=function(d){var g=d.gl,v=new u(g,a(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return v.grid=n(v),v.text=r(v),v.line=i(v),v.box=l(v),v.update(d),v};var a=t(3589),n=t(1913),r=t(2142),i=t(4747),l=t(8120);function u(d,g){this.gl=d,this.pickBuffer=g,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var p=u.prototype;function c(d){for(var g=d.slice(),v=0;v<g.length;++v)g[v]=g[v].slice();return g}function x(d,g){return d.x-g.x}p.setDirty=function(){this.dirty=this.pickDirty=!0},p.setOverlayDirty=function(){this.dirty=!0},p.nextDepthValue=function(){return this._depthCounter++/65536},p.draw=function(){var d=this.gl,g=this.screenBox,v=this.viewBox,y=this.dataBox,m=this.pixelRatio,_=this.grid,f=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;d.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),d.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]);var O=this.backgroundColor;d.clearColor(O[0]*O[3],O[1]*O[3],O[2]*O[3],O[3]),d.clear(d.COLOR_BUFFER_BIT),_.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,R=this.zeroLineWidth;if(C[0]||C[1]){f.bind();for(var j=0;j<2;++j)if(C[j]&&y[j]<=0&&y[j+2]>=0){var D=g[j]-y[j]*(g[j+2]-g[j])/(y[j+2]-y[j]);j===0?f.drawLine(D,g[1],D,g[3],R[j],P[j]):f.drawLine(g[0],D,g[2],D,R[j],P[j])}}for(j=0;j<w.length;++j)w[j].draw();d.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),d.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),f.bind();var N=this.borderLineEnable,W=this.borderLineWidth,F=this.borderLineColor;for(N[1]&&f.drawLine(v[0],v[1]-.5*W[1]*m,v[0],v[3]+.5*W[3]*m,W[1],F[1]),N[0]&&f.drawLine(v[0]-.5*W[0]*m,v[1],v[2]+.5*W[2]*m,v[1],W[0],F[0]),N[3]&&f.drawLine(v[2],v[1]-.5*W[1]*m,v[2],v[3]+.5*W[3]*m,W[3],F[3]),N[2]&&f.drawLine(v[0]-.5*W[0]*m,v[3],v[2]+.5*W[2]*m,v[3],W[2],F[2]),S.bind(),j=0;j<2;++j)S.drawTicks(j);this.titleEnable&&S.drawTitle();var V=this.overlays;for(j=0;j<V.length;++j)V[j].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}},p.drawPick=function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var g=1,v=this.objects,y=0;y<v.length;++y)g=v[y].drawPick(g);d.end()}},p.pick=function(d,g){if(!this.static){var v=this.pixelRatio,y=this.pickPixelRatio,m=this.viewBox,_=0|Math.round((d-m[0]/v)*y),f=0|Math.round((g-m[1]/v)*y),S=this.pickBuffer.query(_,f,this.pickRadius);if(!S)return null;for(var w=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,O=0;O<E.length;++O){var C=E[O].pick(_,f,w);if(C)return C}return null}},p.setScreenBox=function(d){var g=this.screenBox,v=this.pixelRatio;g[0]=0|Math.round(d[0]*v),g[1]=0|Math.round(d[1]*v),g[2]=0|Math.round(d[2]*v),g[3]=0|Math.round(d[3]*v),this.setDirty()},p.setDataBox=function(d){var g=this.dataBox;(g[0]!==d[0]||g[1]!==d[1]||g[2]!==d[2]||g[3]!==d[3])&&(g[0]=d[0],g[1]=d[1],g[2]=d[2],g[3]=d[3],this.setDirty())},p.setViewBox=function(d){var g=this.pixelRatio,v=this.viewBox;v[0]=0|Math.round(d[0]*g),v[1]=0|Math.round(d[1]*g),v[2]=0|Math.round(d[2]*g),v[3]=0|Math.round(d[3]*g);var y=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((d[2]-d[0])*y),0|Math.round((d[3]-d[1])*y)],this.setDirty()},p.update=function(d){d=d||{};var g=this.gl;this.pixelRatio=d.pixelRatio||1;var v=this.pixelRatio;this.pickPixelRatio=Math.max(v,1),this.setScreenBox(d.screenBox||[0,0,g.drawingBufferWidth/v,g.drawingBufferHeight/v]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/v,.125*(this.screenBox[3]-this.screenBox[1])/v,.875*(this.screenBox[2]-this.screenBox[0])/v,.875*(this.screenBox[3]-this.screenBox[1])/v]);var y=this.viewBox,m=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(d.dataBox||[-10,-10/m,10,10/m]),this.borderColor=d.borderColor!==!1&&(d.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(y[0]+y[2])/v,(y[3]+120)/v]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=d.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var S=0;S<2;++S){var w=_[S].slice(0);w.length!==0&&(w.sort(x),f[S]=Math.min(f[S],w[0].x),f[S+2]=Math.max(f[S+2],w[w.length-1].x))}this.grid.update({bounds:f,ticks:_}),this.text.update({bounds:f,ticks:_,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],labelFontStyle:d.labelFontStyle||["normal","normal"],labelFontWeight:d.labelFontWeight||["normal","normal"],labelFontVariant:d.labelFontVariant||["normal","normal"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif",titleFontStyle:d.titleFontStyle||"normal",titleFontWeight:d.titleFontWeight||"normal",titleFontVariant:d.titleFontVariant||"normal"}),this.static=!!d.static,this.setDirty()},p.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();for(this.objects.length=0,d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},p.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},p.removeObject=function(d){for(var g=this.objects,v=0;v<g.length;++v)if(g[v]===d){g.splice(v,1),this.setDirty();break}},p.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},p.removeOverlay=function(d){for(var g=this.overlays,v=0;v<g.length;++v)if(g[v]===d){g.splice(v,1),this.setOverlayDirty();break}}},4437:function(h,s,t){h.exports=function(p,c){p=p||document.body;var x=[.01,1/0];"distanceLimits"in(c=c||{})&&(x[0]=c.distanceLimits[0],x[1]=c.distanceLimits[1]),"zoomMin"in c&&(x[0]=c.zoomMin),"zoomMax"in c&&(x[1]=c.zoomMax);var d=n({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:x}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0,y=p.clientWidth,m=p.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:d,element:p,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:d.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var f=a(),S=this.delay,w=f-2*S;d.idle(f-S),d.recalcMatrix(w),d.flush(f-(100+2*S));for(var E=!0,O=d.computedMatrix,C=0;C<16;++C)E=E&&g[C]===O[C],g[C]=O[C];var P=p.clientWidth===y&&p.clientHeight===m;return y=p.clientWidth,m=p.clientHeight,E?!P:(v=Math.exp(d.computedRadius[0]),!0)},lookAt:function(f,S,w){d.lookAt(d.lastT(),f,S,w)},rotate:function(f,S,w){d.rotate(d.lastT(),f,S,w)},pan:function(f,S,w){d.pan(d.lastT(),f,S,w)},translate:function(f,S,w){d.translate(d.lastT(),f,S,w)}};return Object.defineProperties(_,{matrix:{get:function(){return d.computedMatrix},set:function(f){return d.setMatrix(d.lastT(),f),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(f){var S=d.computedUp.slice(),w=d.computedEye.slice(),E=d.computedCenter.slice();if(d.setMode(f),f==="turntable"){var O=a();d._active.lookAt(O,w,E,S),d._active.lookAt(O+500,w,E,[0,0,1]),d._active.flush(O)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(f){return d.lookAt(d.lastT(),null,f),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(f){return d.lookAt(d.lastT(),f),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(f){return d.lookAt(d.lastT(),null,null,f),d.computedUp},enumerable:!0},distance:{get:function(){return v},set:function(f){return d.setDistance(d.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(x)},set:function(f){return d.setDistanceLimits(f),f},enumerable:!0}}),p.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function f(S,w,E,O){var C=_.keyBindingMode;if(C!==!1){var P=C==="rotate",R=C==="pan",j=C==="zoom",D=!!O.control,N=!!O.alt,W=!!O.shift,F=!!(1&S),V=!!(2&S),U=!!(4&S),te=1/p.clientHeight,J=te*(w-_._lastX),X=te*(E-_._lastY),K=_.flipX?1:-1,Q=_.flipY?1:-1,Z=Math.PI*_.rotateSpeed,re=a();if(_._lastX!==-1&&_._lastY!==-1&&((P&&F&&!D&&!N&&!W||F&&!D&&!N&&W)&&d.rotate(re,K*Z*J,-Q*Z*X,0),(R&&F&&!D&&!N&&!W||V||F&&D&&!N&&!W)&&d.pan(re,-_.translateSpeed*J*v,_.translateSpeed*X*v,0),j&&F&&!D&&!N&&!W||U||F&&!D&&N&&!W)){var oe=-_.zoomSpeed*X/window.innerHeight*(re-d.lastT())*100;d.pan(re,0,0,v*(Math.exp(oe)-1))}return _._lastX=w,_._lastY=E,_._lastMods=O,!0}}_.mouseListener=r(p,f),p.addEventListener("touchstart",function(S){var w=l(S.changedTouches[0],p);f(0,w[0],w[1],_._lastMods),f(1,w[0],w[1],_._lastMods)},!!u&&{passive:!0}),p.addEventListener("touchmove",function(S){var w=l(S.changedTouches[0],p);f(1,w[0],w[1],_._lastMods),S.preventDefault()},!!u&&{passive:!1}),p.addEventListener("touchend",function(S){f(0,_._lastX,_._lastY,_._lastMods)},!!u&&{passive:!0}),_.wheelListener=i(p,function(S,w){if(_.keyBindingMode!==!1&&_.enableWheel){var E=_.flipX?1:-1,O=_.flipY?1:-1,C=a();if(Math.abs(S)>Math.abs(w))d.rotate(C,0,0,-S*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var P=-_.zoomSpeed*O*w/window.innerHeight*(C-d.lastT())/20;d.pan(C,0,0,v*(Math.exp(P)-1))}}},!0)},_.enableMouseListeners(),_};var a=t(3025),n=t(6296),r=t(351),i=t(8512),l=t(24),u=t(7520)},799:function(h,s,t){var a=t(3236),n=t(9405),r=a([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),i=a([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);h.exports=function(l){return n(l,r,i,null,[{name:"position",type:"vec2"}])}},4100:function(h,s,t){var a=t(4437),n=t(3837),r=t(5445),i=t(4449),l=t(3589),u=t(2260),p=t(7169),c=t(351),x=t(4772),d=t(4040),g=t(799),v=t(9216)({tablet:!0,featureDetect:!0});function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(f){var S=Math.round(Math.log(Math.abs(f))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(f*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(f/w)*w):Math.ceil(f)}function _(f){return typeof f!="boolean"||f}h.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var S=f.canvas;S||(S=document.createElement("canvas"),f.container?f.container.appendChild(S):document.body.appendChild(S));var w=f.gl;if(w||(f.glOptions&&(v=!!f.glOptions.preserveDrawingBuffer),w=function(ge,we){var _e=null;try{(_e=ge.getContext("webgl",we))||(_e=ge.getContext("experimental-webgl",we))}catch{return null}return _e}(S,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!w)throw new Error("webgl not supported");var E=f.bounds||[[-10,-10,-10],[10,10,10]],O=new y,C=u(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!v}),P=g(w),R=f.cameraObject&&f.cameraObject._ortho===!0||f.camera.projection&&f.camera.projection.type==="orthographic"||!1,j={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:R},D=f.axes||{},N=n(w,D);N.enable=!D.disable;var W=f.spikes||{},F=i(w,W),V=[],U=[],te=[],J=[],X=!0,K=!0,Q={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Z=(K=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),re=f.cameraObject||a(S,j),oe={gl:w,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:S,selection:O,camera:re,axes:N,axesPixels:null,spikes:F,bounds:E,objects:V,shape:Z,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:_(f.autoResize),autoBounds:_(f.autoBounds),autoScale:!!f.autoScale,autoCenter:_(f.autoCenter),clipToBounds:_(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:Q,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ge){this.aspect[0]=ge.x,this.aspect[1]=ge.y,this.aspect[2]=ge.z,K=!0},setBounds:function(ge,we){this.bounds[0][ge]=we.min,this.bounds[1][ge]=we.max},setClearColor:function(ge){this.clearColor=ge},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[w.drawingBufferWidth/oe.pixelRatio|0,w.drawingBufferHeight/oe.pixelRatio|0];function ce(){if(!oe._stopped&&oe.autoResize){var ge=S.parentNode,we=1,_e=1;ge&&ge!==document.body?(we=ge.clientWidth,_e=ge.clientHeight):(we=window.innerWidth,_e=window.innerHeight);var se=0|Math.ceil(we*oe.pixelRatio),ie=0|Math.ceil(_e*oe.pixelRatio);if(se!==S.width||ie!==S.height){S.width=se,S.height=ie;var fe=S.style;fe.position=fe.position||"absolute",fe.left="0px",fe.top="0px",fe.width=we+"px",fe.height=_e+"px",X=!0}}}function he(){for(var ge=V.length,we=J.length,_e=0;_e<we;++_e)te[_e]=0;e:for(_e=0;_e<ge;++_e){var se=V[_e],ie=se.pickSlots;if(ie){for(var fe=0;fe<we;++fe)if(te[fe]+ie<255){U[_e]=fe,se.setPickBase(te[fe]+1),te[fe]+=ie;continue e}var Ee=l(w,Z);U[_e]=we,J.push(Ee),te.push(ie),se.setPickBase(1),we+=1}else U[_e]=-1}for(;we>0&&te[we-1]===0;)te.pop(),J.pop().dispose()}function pe(){if(oe.contextLost)return!0;w.isContextLost()&&(oe.contextLost=!0,oe.mouseListener.enabled=!1,oe.selection.object=null,oe.oncontextloss&&oe.oncontextloss())}oe.autoResize&&ce(),window.addEventListener("resize",ce),oe.update=function(ge){oe._stopped||(X=!0,K=!0)},oe.add=function(ge){oe._stopped||(ge.axes=N,V.push(ge),U.push(-1),X=!0,K=!0,he())},oe.remove=function(ge){if(!oe._stopped){var we=V.indexOf(ge);we<0||(V.splice(we,1),U.pop(),X=!0,K=!0,he())}},oe.dispose=function(){if(!oe._stopped&&(oe._stopped=!0,window.removeEventListener("resize",ce),S.removeEventListener("webglcontextlost",pe),oe.mouseListener.enabled=!1,!oe.contextLost)){N.dispose(),F.dispose();for(var ge=0;ge<V.length;++ge)V[ge].dispose();for(C.dispose(),ge=0;ge<J.length;++ge)J[ge].dispose();P.dispose(),w=null,N=null,F=null,V=[]}},oe._mouseRotating=!1,oe._prevButtons=0,oe.enableMouseListeners=function(){oe.mouseListener=c(S,function(ge,we,_e){if(!oe._stopped){var se=J.length,ie=V.length,fe=O.object;O.distance=1/0,O.mouse[0]=we,O.mouse[1]=_e,O.object=null,O.screen=null,O.dataCoordinate=O.dataPosition=null;var Ee=!1;if(ge&&oe._prevButtons)oe._mouseRotating=!0;else{oe._mouseRotating&&(K=!0),oe._mouseRotating=!1;for(var Te=0;Te<se;++Te){var Ae=J[Te].query(we,ae[1]-_e-1,oe.pickRadius);if(Ae){if(Ae.distance>O.distance)continue;for(var Se=0;Se<ie;++Se){var Oe=V[Se];if(U[Se]===Te){var De=Oe.pick(Ae);De&&(O.buttons=ge,O.screen=Ae.coord,O.distance=Ae.distance,O.object=Oe,O.index=De.distance,O.dataPosition=De.position,O.dataCoordinate=De.dataCoordinate,O.data=De,Ee=!0)}}}}}fe&&fe!==O.object&&(fe.highlight&&fe.highlight(null),X=!0),O.object&&(O.object.highlight&&O.object.highlight(O.data),X=!0),(Ee=Ee||O.object!==fe)&&oe.onselect&&oe.onselect(O),1&ge&&!(1&oe._prevButtons)&&oe.onclick&&oe.onclick(O),oe._prevButtons=ge}})},S.addEventListener("webglcontextlost",pe);var xe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=[xe[0].slice(),xe[1].slice()];function ve(){if(!pe()){ce();var ge=oe.camera.tick();Q.view=oe.camera.matrix,X=X||ge,K=K||ge,N.pixelRatio=oe.pixelRatio,F.pixelRatio=oe.pixelRatio;var we=V.length,_e=xe[0],se=xe[1];_e[0]=_e[1]=_e[2]=1/0,se[0]=se[1]=se[2]=-1/0;for(var ie=0;ie<we;++ie){(Pe=V[ie]).pixelRatio=oe.pixelRatio,Pe.axes=oe.axes,X=X||!!Pe.dirty,K=K||!!Pe.dirty;var fe=Pe.bounds;if(fe)for(var Ee=fe[0],Te=fe[1],Ae=0;Ae<3;++Ae)_e[Ae]=Math.min(_e[Ae],Ee[Ae]),se[Ae]=Math.max(se[Ae],Te[Ae])}var Se=oe.bounds;if(oe.autoBounds)for(Ae=0;Ae<3;++Ae){if(se[Ae]<_e[Ae])_e[Ae]=-1,se[Ae]=1;else{_e[Ae]===se[Ae]&&(_e[Ae]-=1,se[Ae]+=1);var Oe=.05*(se[Ae]-_e[Ae]);_e[Ae]=_e[Ae]-Oe,se[Ae]=se[Ae]+Oe}Se[0][Ae]=_e[Ae],Se[1][Ae]=se[Ae]}var De=!1;for(Ae=0;Ae<3;++Ae)De=De||be[0][Ae]!==Se[0][Ae]||be[1][Ae]!==Se[1][Ae],be[0][Ae]=Se[0][Ae],be[1][Ae]=Se[1][Ae];if(K=K||De,X=X||De){if(De){var de=[0,0,0];for(ie=0;ie<3;++ie)de[ie]=m((Se[1][ie]-Se[0][ie])/10);N.autoTicks?N.update({bounds:Se,tickSpacing:de}):N.update({bounds:Se})}var me=w.drawingBufferWidth,Me=w.drawingBufferHeight;for(Z[0]=me,Z[1]=Me,ae[0]=0|Math.max(me/oe.pixelRatio,1),ae[1]=0|Math.max(Me/oe.pixelRatio,1),function(Ne,Ve){var Ye=Ne.bounds,at=Ne.cameraParams,rt=at.projection,dt=at.model,vt=Ne.gl.drawingBufferWidth,ht=Ne.gl.drawingBufferHeight,et=Ne.zNear,$e=Ne.zFar,wt=Ne.fovy,Pt=vt/ht;Ve?(d(rt,-Pt,Pt,-1,1,et,$e),at._ortho=!0):(x(rt,wt,Pt,et,$e),at._ortho=!1);for(var Ot=0;Ot<16;++Ot)dt[Ot]=0;dt[15]=1;var At=0;for(Ot=0;Ot<3;++Ot)At=Math.max(At,Ye[1][Ot]-Ye[0][Ot]);for(Ot=0;Ot<3;++Ot)Ne.autoScale?dt[5*Ot]=Ne.aspect[Ot]/(Ye[1][Ot]-Ye[0][Ot]):dt[5*Ot]=1/At,Ne.autoCenter&&(dt[12+Ot]=.5*-dt[5*Ot]*(Ye[0][Ot]+Ye[1][Ot]))}(oe,R),ie=0;ie<we;++ie)(Pe=V[ie]).axesBounds=Se,oe.clipToBounds&&(Pe.clipBounds=Se);O.object&&(oe.snapToData?F.position=O.dataCoordinate:F.position=O.dataPosition,F.bounds=Se),K&&(K=!1,function(){if(!pe()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var Ne=V.length,Ve=J.length,Ye=0;Ye<Ve;++Ye){var at=J[Ye];at.shape=ae,at.begin();for(var rt=0;rt<Ne;++rt)if(U[rt]===Ye){var dt=V[rt];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(Q))}at.end()}}}()),oe.axesPixels=r(oe.axes,Q,me,Me),oe.onrender&&oe.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,me,Me),oe.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var ze=!1;for(N.enable&&(ze=ze||N.isTransparent(),N.draw(Q)),F.axes=N,O.object&&F.draw(Q),w.disable(w.CULL_FACE),ie=0;ie<we;++ie)(Pe=V[ie]).axes=N,Pe.pixelRatio=oe.pixelRatio,Pe.isOpaque&&Pe.isOpaque()&&Pe.draw(Q),Pe.isTransparent&&Pe.isTransparent()&&(ze=!0);if(ze){for(C.shape=Z,C.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),N.enable&&N.isTransparent()&&N.drawTransparent(Q),ie=0;ie<we;++ie)(Pe=V[ie]).isOpaque&&Pe.isOpaque()&&Pe.draw(Q);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),N.isTransparent()&&N.drawTransparent(Q),ie=0;ie<we;++ie){var Pe;(Pe=V[ie]).isTransparent&&Pe.isTransparent()&&Pe.drawTransparent(Q)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,p(w),w.disable(w.BLEND)}for(X=!1,ie=0;ie<we;++ie)V[ie].dirty=!1}}}return oe.enableMouseListeners(),function ge(){oe._stopped||oe.contextLost||(ve(),requestAnimationFrame(ge))}(),oe.redraw=function(){oe._stopped||(X=!0,ve())},oe},createCamera:a}},6640:function(h,s,t){var a=t(3236);s.pointVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=a([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(h,s,t){var a=t(9405),n=t(2762),r=t(1888),i=t(6640);function l(x,d,g,v,y){this.plot=x,this.offsetBuffer=d,this.pickBuffer=g,this.shader=v,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}h.exports=function(x,d){var g=x.gl,v=new l(x,n(g),n(g),a(g,i.pointVertex,i.pointFragment),a(g,i.pickVertex,i.pickFragment));return v.update(d),x.addObject(v),v};var u,p,c=l.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(x){var d;function g(w,E){return w in x?x[w]:E}x=x||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var v=x.positions.length>>>1,y=x.positions instanceof Float32Array,m=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=v,_=x.positions,f=y?_:r.mallocFloat32(_.length),S=m?x.idToIndex:r.mallocInt32(v);if(y||f.set(_),!m)for(f.set(_),d=0;d<v;d++)S[d]=d;this.points=_,this.offsetBuffer.update(f),this.pickBuffer.update(S),y||r.free(f),m||r.free(S),this.pointCount=v,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(x){var d=x!==void 0,g=d?this.pickShader:this.shader,v=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return x;var m=y[2]-y[0],_=y[3]-y[1],f=function(O,C){var P,R=0,j=O.length>>>1;for(P=0;P<j;P++){var D=O[2*P],N=O[2*P+1];D>=C[0]&&D<=C[2]&&N>=C[1]&&N<=C[3]&&R++}return R}(this.points,y),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));u[0]=2/m,u[4]=2/_,u[6]=-2*y[0]/m-1,u[7]=-2*y[1]/_-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=u,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=S<5,g.uniforms.pointSize=S,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(p[0]=255&x,p[1]=x>>8&255,p[2]=x>>16&255,p[3]=x>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(v.UNSIGNED_BYTE),g.uniforms.pickOffset=p,this.pickOffset=x);var w=v.getParameter(v.BLEND),E=v.getParameter(v.DITHER);return w&&!this.blend&&v.disable(v.BLEND),E&&v.disable(v.DITHER),v.drawArrays(v.POINTS,0,this.pointCount),w&&!this.blend&&v.enable(v.BLEND),E&&v.enable(v.DITHER),x+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(x,d,g){var v=this.pickOffset,y=this.pointCount;if(g<v||g>=v+y)return null;var m=g-v,_=this.points;return{object:this,pointId:m,dataCoord:[_[2*m],_[2*m+1]]}}},783:function(h){h.exports=function(s,t,a,n){var r,i,l,u,p,c=t[0],x=t[1],d=t[2],g=t[3],v=a[0],y=a[1],m=a[2],_=a[3];return(i=c*v+x*y+d*m+g*_)<0&&(i=-i,v=-v,y=-y,m=-m,_=-_),1-i>1e-6?(r=Math.acos(i),l=Math.sin(r),u=Math.sin((1-n)*r)/l,p=Math.sin(n*r)/l):(u=1-n,p=n),s[0]=u*c+p*v,s[1]=u*x+p*y,s[2]=u*d+p*m,s[3]=u*g+p*_,s}},5964:function(h){h.exports=function(s){return s||s===0?s.toString():""}},9366:function(h,s,t){var a=t(4359);h.exports=function(r,i,l){var u=[i.style,i.weight,i.variant,i.family].join("_"),p=n[u];if(p||(p=n[u]={}),r in p)return p[r];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:i.family,fontStyle:i.style,fontWeight:i.weight,fontVariant:i.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},x=a(r,c);c.triangles=!1;var d,g,v=a(r,c);if(l&&l!==1){for(d=0;d<x.positions.length;++d)for(g=0;g<x.positions[d].length;++g)x.positions[d][g]/=l;for(d=0;d<v.positions.length;++d)for(g=0;g<v.positions[d].length;++g)v.positions[d][g]/=l}var y=[[1/0,1/0],[-1/0,-1/0]],m=v.positions.length;for(d=0;d<m;++d){var _=v.positions[d];for(g=0;g<2;++g)y[0][g]=Math.min(y[0][g],_[g]),y[1][g]=Math.max(y[1][g],_[g])}return p[r]=[x,v,y]};var n={}},1283:function(h,s,t){var a=t(9405),n=t(3236),r=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),i=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),p=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:r,fragment:u,attributes:c},d={vertex:i,fragment:u,attributes:c},g={vertex:l,fragment:u,attributes:c},v={vertex:r,fragment:p,attributes:c},y={vertex:i,fragment:p,attributes:c},m={vertex:l,fragment:p,attributes:c};function _(f,S){var w=a(f,S),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}s.createPerspective=function(f){return _(f,x)},s.createOrtho=function(f){return _(f,d)},s.createProject=function(f){return _(f,g)},s.createPickPerspective=function(f){return _(f,v)},s.createPickOrtho=function(f){return _(f,y)},s.createPickProject=function(f){return _(f,m)}},8418:function(h,s,t){var a=t(5219),n=t(2762),r=t(8116),i=t(1888),l=t(6760),u=t(1283),p=t(9366),c=t(5964),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(U,te){var J=U[0],X=U[1],K=U[2],Q=U[3];return U[0]=te[0]*J+te[4]*X+te[8]*K+te[12]*Q,U[1]=te[1]*J+te[5]*X+te[9]*K+te[13]*Q,U[2]=te[2]*J+te[6]*X+te[10]*K+te[14]*Q,U[3]=te[3]*J+te[7]*X+te[11]*K+te[15]*Q,U}function g(U,te,J,X){return d(X,X),d(X,X),d(X,X)}function v(U,te){this.index=U,this.dataCoordinate=this.position=te}function y(U){return U===!0||U>1?1:U}function m(U,te,J,X,K,Q,Z,re,oe,ae,ce,he){this.gl=U,this.pixelRatio=1,this.shader=te,this.orthoShader=J,this.projectShader=X,this.pointBuffer=K,this.colorBuffer=Q,this.glyphBuffer=Z,this.idBuffer=re,this.vao=oe,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ae,this.pickOrthoShader=ce,this.pickProjectShader=he,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}h.exports=function(U){var te=U.gl,J=u.createPerspective(te),X=u.createOrtho(te),K=u.createProject(te),Q=u.createPickPerspective(te),Z=u.createPickOrtho(te),re=u.createPickProject(te),oe=n(te),ae=n(te),ce=n(te),he=n(te),pe=new m(te,J,X,K,oe,ae,ce,he,r(te,[{buffer:oe,size:3,type:te.FLOAT},{buffer:ae,size:4,type:te.FLOAT},{buffer:ce,size:2,type:te.FLOAT},{buffer:he,size:4,type:te.UNSIGNED_BYTE,normalized:!0}]),Q,Z,re);return pe.update(U),pe};var _=m.prototype;_.pickSlots=1,_.setPickBase=function(U){this.pickId=U},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&!this.projectHasAlpha)return!0;return!1};var f=[0,0],S=[0,0,0],w=[0,0,0],E=[0,0,0,1],O=[0,0,0,1],C=x.slice(),P=[0,0,0],R=[[0,0,0],[0,0,0]];function j(U){return U[0]=U[1]=U[2]=0,U}function D(U,te){return U[0]=te[0],U[1]=te[1],U[2]=te[2],U[3]=1,U}function N(U,te,J,X){return U[0]=te[0],U[1]=te[1],U[2]=te[2],U[J]=X,U}var W=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function F(U,te,J,X,K,Q,Z){var re=J.gl;if((Q===J.projectHasAlpha||Z)&&function(ae,ce,he,pe){var xe,be=ce.axesProject,ve=ce.gl,ge=ae.uniforms,we=he.model||x,_e=he.view||x,se=he.projection||x,ie=ce.axesBounds,fe=function(Ye){for(var at=R,rt=0;rt<2;++rt)for(var dt=0;dt<3;++dt)at[rt][dt]=Math.max(Math.min(Ye[rt][dt],1e8),-1e8);return at}(ce.clipBounds);xe=ce.axes&&ce.axes.lastCubeProps?ce.axes.lastCubeProps.axis:[1,1,1],f[0]=2/ve.drawingBufferWidth,f[1]=2/ve.drawingBufferHeight,ae.bind(),ge.view=_e,ge.projection=se,ge.screenSize=f,ge.highlightId=ce.highlightId,ge.highlightScale=ce.highlightScale,ge.clipBounds=fe,ge.pickGroup=ce.pickId/255,ge.pixelRatio=pe;for(var Ee=0;Ee<3;++Ee)if(be[Ee]){ge.scale=ce.projectScale[Ee],ge.opacity=ce.projectOpacity[Ee];for(var Te=C,Ae=0;Ae<16;++Ae)Te[Ae]=0;for(Ae=0;Ae<4;++Ae)Te[5*Ae]=1;Te[5*Ee]=0,xe[Ee]<0?Te[12+Ee]=ie[0][Ee]:Te[12+Ee]=ie[1][Ee],l(Te,we,Te),ge.model=Te;var Se=(Ee+1)%3,Oe=(Ee+2)%3,De=j(S),de=j(w);De[Se]=1,de[Oe]=1;var me=g(0,0,0,D(E,De)),Me=g(0,0,0,D(O,de));if(Math.abs(me[1])>Math.abs(Me[1])){var ze=me;me=Me,Me=ze,ze=De,De=de,de=ze;var Pe=Se;Se=Oe,Oe=Pe}me[0]<0&&(De[Se]=-1),Me[1]>0&&(de[Oe]=-1);var Ne=0,Ve=0;for(Ae=0;Ae<4;++Ae)Ne+=Math.pow(we[4*Se+Ae],2),Ve+=Math.pow(we[4*Oe+Ae],2);De[Se]/=Math.sqrt(Ne),de[Oe]/=Math.sqrt(Ve),ge.axes[0]=De,ge.axes[1]=de,ge.fragClipBounds[0]=N(P,fe[0],Ee,-1e8),ge.fragClipBounds[1]=N(P,fe[1],Ee,1e8),ce.vao.bind(),ce.vao.draw(ve.TRIANGLES,ce.vertexCount),ce.lineWidth>0&&(ve.lineWidth(ce.lineWidth*pe),ce.vao.draw(ve.LINES,ce.lineVertexCount,ce.vertexCount)),ce.vao.unbind()}}(te,J,X,K),Q===J.hasAlpha||Z){U.bind();var oe=U.uniforms;oe.model=X.model||x,oe.view=X.view||x,oe.projection=X.projection||x,f[0]=2/re.drawingBufferWidth,f[1]=2/re.drawingBufferHeight,oe.screenSize=f,oe.highlightId=J.highlightId,oe.highlightScale=J.highlightScale,oe.fragClipBounds=W,oe.clipBounds=J.axes.bounds,oe.opacity=J.opacity,oe.pickGroup=J.pickId/255,oe.pixelRatio=K,J.vao.bind(),J.vao.draw(re.TRIANGLES,J.vertexCount),J.lineWidth>0&&(re.lineWidth(J.lineWidth*K),J.vao.draw(re.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}function V(U,te,J,X){var K;K=Array.isArray(U)?te<U.length?U[te]:void 0:U,K=c(K);var Q=!0;a(K)&&(K="",Q=!1),J||(J={});var Z=J.family;Array.isArray(Z)&&(Z=Z[te]),Z||(Z="normal");var re=J.weight;Array.isArray(re)&&(re=re[te]),re||(re="normal");var oe=J.style;Array.isArray(oe)&&(oe=oe[te]),oe||(oe="normal");var ae=J.variant;Array.isArray(ae)&&(ae=ae[te]),ae||(ae="normal");var ce=p(K,{family:Z,weight:re,style:oe,variant:ae},X);return{mesh:(ce=p(K,J,X))[0],lines:ce[1],bounds:ce[2],visible:Q}}_.draw=function(U){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,U,this.pixelRatio,!1,!1)},_.drawTransparent=function(U){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,U,this.pixelRatio,!0,!1)},_.drawPick=function(U){F(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,U,1,!0,!0)},_.pick=function(U){if(!U||U.id!==this.pickId)return null;var te=U.value[2]+(U.value[1]<<8)+(U.value[0]<<16);if(te>=this.pointCount||te<0)return null;var J=this.points[te],X=this._selectResult;X.index=te;for(var K=0;K<3;++K)X.position[K]=X.dataCoordinate[K]=J[K];return X},_.highlight=function(U){if(U){var te=U.index,J=255&te,X=te>>8&255,K=te>>16&255;this.highlightId=[J/255,X/255,K/255,0]}else this.highlightId=[1,1,1,1]},_.update=function(U){if("perspective"in(U=U||{})&&(this.useOrtho=!U.perspective),"orthographic"in U&&(this.useOrtho=!!U.orthographic),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"project"in U)if(Array.isArray(U.project))this.axesProject=U.project;else{var te=!!U.project;this.axesProject=[te,te,te]}if("projectScale"in U)if(Array.isArray(U.projectScale))this.projectScale=U.projectScale.slice();else{var J=+U.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in U){Array.isArray(U.projectOpacity)?this.projectOpacity=U.projectOpacity.slice():(J=+U.projectOpacity,this.projectOpacity=[J,J,J]);for(var X=0;X<3;++X)this.projectOpacity[X]=y(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in U&&(this.opacity=y(U.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K,Q,Z=U.position,re={family:U.font||"normal",style:U.fontStyle||"normal",weight:U.fontWeight||"normal",variant:U.fontVariant||"normal"},oe=U.alignment||[0,0];if(oe.length===2)K=oe[0],Q=oe[1];else for(K=[],Q=[],X=0;X<oe.length;++X)K[X]=oe[X][0],Q[X]=oe[X][1];var ae=[1/0,1/0,1/0],ce=[-1/0,-1/0,-1/0],he=U.glyph,pe=U.color,xe=U.size,be=U.angle,ve=U.lineColor,ge=-1,we=0,_e=0,se=0;if(Z.length){se=Z.length;e:for(X=0;X<se;++X){for(var ie=Z[X],fe=0;fe<3;++fe)if(isNaN(ie[fe])||!isFinite(ie[fe]))continue e;var Ee=(at=V(he,X,re,this.pixelRatio)).mesh,Te=at.lines,Ae=at.bounds;we+=3*Ee.cells.length,_e+=2*Te.edges.length}}var Se=we+_e,Oe=i.mallocFloat(3*Se),De=i.mallocFloat(4*Se),de=i.mallocFloat(2*Se),me=i.mallocUint32(Se);if(Se>0){var Me=0,ze=we,Pe=[0,0,0,1],Ne=[0,0,0,1],Ve=Array.isArray(pe)&&Array.isArray(pe[0]),Ye=Array.isArray(ve)&&Array.isArray(ve[0]);e:for(X=0;X<se;++X){for(ge+=1,ie=Z[X],fe=0;fe<3;++fe){if(isNaN(ie[fe])||!isFinite(ie[fe]))continue e;ce[fe]=Math.max(ce[fe],ie[fe]),ae[fe]=Math.min(ae[fe],ie[fe])}Ee=(at=V(he,X,re,this.pixelRatio)).mesh,Te=at.lines,Ae=at.bounds;var at,rt=at.visible;if(rt)if(Array.isArray(pe)){if((dt=Ve?X<pe.length?pe[X]:[0,0,0,0]:pe).length===3){for(fe=0;fe<3;++fe)Pe[fe]=dt[fe];Pe[3]=1}else if(dt.length===4){for(fe=0;fe<4;++fe)Pe[fe]=dt[fe];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Pe[0]=Pe[1]=Pe[2]=0,Pe[3]=1;else Pe=[1,1,1,0];if(rt)if(Array.isArray(ve)){var dt;if((dt=Ye?X<ve.length?ve[X]:[0,0,0,0]:ve).length===3){for(fe=0;fe<3;++fe)Ne[fe]=dt[fe];Ne[fe]=1}else if(dt.length===4){for(fe=0;fe<4;++fe)Ne[fe]=dt[fe];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Ne[0]=Ne[1]=Ne[2]=0,Ne[3]=1;else Ne=[1,1,1,0];var vt=.5;rt?Array.isArray(xe)?vt=X<xe.length?+xe[X]:12:xe?vt=+xe:this.useOrtho&&(vt=12):vt=0;var ht=0;Array.isArray(be)?ht=X<be.length?+be[X]:0:be&&(ht=+be);var et=Math.cos(ht),$e=Math.sin(ht);for(ie=Z[X],fe=0;fe<3;++fe)ce[fe]=Math.max(ce[fe],ie[fe]),ae[fe]=Math.min(ae[fe],ie[fe]);var wt=K,Pt=Q;wt=0,Array.isArray(K)?wt=X<K.length?K[X]:0:K&&(wt=K),Pt=0,Array.isArray(Q)?Pt=X<Q.length?Q[X]:0:Q&&(Pt=Q);var Ot=[wt*=wt>0?1-Ae[0][0]:wt<0?1+Ae[1][0]:1,Pt*=Pt>0?1-Ae[0][1]:Pt<0?1+Ae[1][1]:1],At=Ee.cells||[],He=Ee.positions||[];for(fe=0;fe<At.length;++fe)for(var Ze=At[fe],Be=0;Be<3;++Be){for(var Ge=0;Ge<3;++Ge)Oe[3*Me+Ge]=ie[Ge];for(Ge=0;Ge<4;++Ge)De[4*Me+Ge]=Pe[Ge];me[Me]=ge;var it=He[Ze[Be]];de[2*Me]=vt*(et*it[0]-$e*it[1]+Ot[0]),de[2*Me+1]=vt*($e*it[0]+et*it[1]+Ot[1]),Me+=1}for(At=Te.edges,He=Te.positions,fe=0;fe<At.length;++fe)for(Ze=At[fe],Be=0;Be<2;++Be){for(Ge=0;Ge<3;++Ge)Oe[3*ze+Ge]=ie[Ge];for(Ge=0;Ge<4;++Ge)De[4*ze+Ge]=Ne[Ge];me[ze]=ge,it=He[Ze[Be]],de[2*ze]=vt*(et*it[0]-$e*it[1]+Ot[0]),de[2*ze+1]=vt*($e*it[0]+et*it[1]+Ot[1]),ze+=1}}}this.bounds=[ae,ce],this.points=Z,this.pointCount=Z.length,this.vertexCount=we,this.lineVertexCount=_e,this.pointBuffer.update(Oe),this.colorBuffer.update(De),this.glyphBuffer.update(de),this.idBuffer.update(me),i.free(Oe),i.free(De),i.free(de),i.free(me)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(h,s,t){var a=t(3236);s.boxVertex=a([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=a([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(h,s,t){var a=t(9405),n=t(2762),r=t(4298);function i(u,p,c){this.plot=u,this.boxBuffer=p,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}h.exports=function(u,p){var c=u.gl,x=new i(u,n(c,[0,0,0,1,1,0,1,1]),a(c,r.boxVertex,r.boxFragment));return x.update(p),u.addOverlay(x),x};var l=i.prototype;l.draw=function(){if(this.enabled){var u=this.plot,p=this.selectBox,c=this.borderWidth,x=(this.innerFill,this.innerColor),d=(this.outerFill,this.outerColor),g=this.borderColor,v=u.box,y=u.screenBox,m=u.dataBox,_=u.viewBox,f=u.pixelRatio,S=(p[0]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],w=(p[1]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1],E=(p[2]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],O=(p[3]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1];if(S=Math.max(S,_[0]),w=Math.max(w,_[1]),E=Math.min(E,_[2]),O=Math.min(O,_[3]),!(E<S||O<w)){v.bind();var C=y[2]-y[0],P=y[3]-y[1];if(this.outerFill&&(v.drawBox(0,0,C,w,d),v.drawBox(0,w,S,O,d),v.drawBox(0,O,C,P,d),v.drawBox(E,w,C,O,d)),this.innerFill&&v.drawBox(S,w,E,O,x),c>0){var R=c*f;v.drawBox(S-R,w-R,E+R,w+R,g),v.drawBox(S-R,O-R,E+R,O+R,g),v.drawBox(S-R,w-R,S+R,O+R,g),v.drawBox(E-R,w-R,E+R,O+R,g)}}}},l.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(h,s,t){h.exports=function(c,x){var d=x[0],g=x[1];return new u(c,a(c,d,g,{}),n.mallocUint8(d*g*4))};var a=t(2260),n=t(1888),r=t(9618),i=t(8828).nextPow2;function l(c,x,d,g,v){this.coord=[c,x],this.id=d,this.value=g,this.distance=v}function u(c,x,d){this.gl=c,this.fbo=x,this.buffer=d,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(x.bind(),c.readPixels(0,0,x.shape[0],x.shape[1],c.RGBA,c.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var p=u.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var x=this.fbo.shape[0],d=this.fbo.shape[1];if(d*x*4>this.buffer.length){n.free(this.buffer);for(var g=this.buffer=n.mallocUint8(i(d*x*4)),v=0;v<d*x*4;++v)g[v]=255}return c}}}),p.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},p.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(c,x,d){if(!this.gl)return null;var g=this.fbo.shape.slice();c|=0,x|=0,typeof d!="number"&&(d=1);var v=0|Math.min(Math.max(c-d,0),g[0]),y=0|Math.min(Math.max(c+d,0),g[0]),m=0|Math.min(Math.max(x-d,0),g[1]),_=0|Math.min(Math.max(x+d,0),g[1]);if(y<=v||_<=m)return null;var f=[y-v,_-m],S=r(this.buffer,[f[0],f[1],4],[4,4*g[0],1],4*(v+g[0]*m)),w=function(C,P,R){for(var j=1e8,D=-1,N=-1,W=C.shape[0],F=C.shape[1],V=0;V<W;V++)for(var U=0;U<F;U++){var te=C.get(V,U,0),J=C.get(V,U,1),X=C.get(V,U,2),K=C.get(V,U,3);if(te<255||J<255||X<255||K<255){var Q=P-V,Z=R-U,re=Q*Q+Z*Z;re<j&&(j=re,D=V,N=U)}}return[D,N,j]}(S.hi(f[0],f[1],1),d,d),E=w[0],O=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new l(E+v|0,O+m|0,S.get(E,O,0),[S.get(E,O,1),S.get(E,O,2),S.get(E,O,3)],Math.sqrt(w[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(h,s,t){var a=t(3327),n=t(8731),r=t(216),i=t(5091),l=t(2145),u=t(8866);function p(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=p.prototype;function x(d,g){return d.name<g.name?-1:1}c.bind=function(){var d;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),v=this.gl.lastAttribCount;if(g>v)for(d=v;d<g;d++)this.gl.enableVertexAttribArray(d);else if(v>g)for(d=g;d<v;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},c.dispose=function(){for(var d=this.gl.lastAttribCount,g=0;g<d;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(d,g,v,y){if(!g||arguments.length===1){var m=d;d=m.vertex,g=m.fragment,v=m.uniforms,y=m.attributes}var _=this,f=_.gl,S=_._vref;_._vref=i.shader(f,f.VERTEX_SHADER,d),S&&S.dispose(),_.vertShader=_._vref.shader;var w=this._fref;if(_._fref=i.shader(f,f.FRAGMENT_SHADER,g),w&&w.dispose(),_.fragShader=_._fref.shader,!v||!y){var E=f.createProgram();if(f.attachShader(E,_.fragShader),f.attachShader(E,_.vertShader),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){var O=f.getProgramInfoLog(E);throw new u(O,"Error linking program:"+O)}v=v||l.uniforms(f,E),y=y||l.attributes(f,E),f.deleteProgram(E)}(y=y.slice()).sort(x);var C,P=[],R=[],j=[];for(C=0;C<y.length;++C){var D=y[C];if(D.type.indexOf("mat")>=0){for(var N=0|D.type.charAt(D.type.length-1),W=new Array(N),F=0;F<N;++F)W[F]=j.length,R.push(D.name+"["+F+"]"),typeof D.location=="number"?j.push(D.location+F):Array.isArray(D.location)&&D.location.length===N&&typeof D.location[F]=="number"?j.push(0|D.location[F]):j.push(-1);P.push({name:D.name,type:D.type,locations:W})}else P.push({name:D.name,type:D.type,locations:[j.length]}),R.push(D.name),typeof D.location=="number"?j.push(0|D.location):j.push(-1)}var V=0;for(C=0;C<j.length;++C)if(j[C]<0){for(;j.indexOf(V)>=0;)V+=1;j[C]=V}var U=new Array(v.length);function te(){_.program=i.program(f,_._vref,_._fref,R,j);for(var J=0;J<v.length;++J)U[J]=f.getUniformLocation(_.program,v[J].name)}te(),_._relink=te,_.types={uniforms:r(v),attributes:r(y)},_.attributes=n(f,_,P,j),Object.defineProperty(_,"uniforms",a(f,_,v,U))},h.exports=function(d,g,v,y,m){var _=new p(d);return _.update(g,v,y,m),_}},8866:function(h){function s(t,a,n){this.shortMessage=a||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(a||t||"")+(n?`
`+n:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,h.exports=s},8731:function(h,s,t){h.exports=function(p,c,x,d){for(var g={},v=0,y=x.length;v<y;++v){var m=x[v],_=m.name,f=m.type,S=m.locations;switch(f){case"bool":case"int":case"float":l(p,c,S[0],d,1,g,_);break;default:if(f.indexOf("vec")>=0){if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new a("","Invalid data type for attribute "+_+": "+f);l(p,c,S[0],d,w,g,_)}else{if(!(f.indexOf("mat")>=0))throw new a("","Unknown data type for attribute "+_+": "+f);var w;if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new a("","Invalid data type for attribute "+_+": "+f);u(p,c,S,d,w,g,_)}}}return g};var a=t(8866);function n(p,c,x,d,g,v){this._gl=p,this._wrapper=c,this._index=x,this._locations=d,this._dimension=g,this._constFunc=v}var r=n.prototype;r.pointer=function(p,c,x,d){var g=this,v=g._gl,y=g._locations[g._index];v.vertexAttribPointer(y,g._dimension,p||v.FLOAT,!!c,x||0,d||0),v.enableVertexAttribArray(y)},r.set=function(p,c,x,d){return this._constFunc(this._locations[this._index],p,c,x,d)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=0|p,this._wrapper.program=null),0|p}});var i=[function(p,c,x){return x.length===void 0?p.vertexAttrib1f(c,x):p.vertexAttrib1fv(c,x)},function(p,c,x,d){return x.length===void 0?p.vertexAttrib2f(c,x,d):p.vertexAttrib2fv(c,x)},function(p,c,x,d,g){return x.length===void 0?p.vertexAttrib3f(c,x,d,g):p.vertexAttrib3fv(c,x)},function(p,c,x,d,g,v){return x.length===void 0?p.vertexAttrib4f(c,x,d,g,v):p.vertexAttrib4fv(c,x)}];function l(p,c,x,d,g,v,y){var m=i[g],_=new n(p,c,x,d,g,m);Object.defineProperty(v,y,{set:function(f){return p.disableVertexAttribArray(d[x]),m(p,d[x],f),f},get:function(){return _},enumerable:!0})}function u(p,c,x,d,g,v,y){for(var m=new Array(g),_=new Array(g),f=0;f<g;++f)l(p,c,x[f],d,g,m,f),_[f]=m[f];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var O=0;O<g;++O)_[O].location=E[O];else for(O=0;O<g;++O)_[O].location=E+O;return E},get:function(){for(var E=new Array(g),O=0;O<g;++O)E[O]=d[x[O]];return E},enumerable:!0}),m.pointer=function(E,O,C,P){E=E||p.FLOAT,O=!!O,C=C||g*g,P=P||0;for(var R=0;R<g;++R){var j=d[x[R]];p.vertexAttribPointer(j,g,E,O,C,P+R*g),p.enableVertexAttribArray(j)}};var S=new Array(g),w=p["vertexAttrib"+g+"fv"];Object.defineProperty(v,y,{set:function(E){for(var O=0;O<g;++O){var C=d[x[O]];if(p.disableVertexAttribArray(C),Array.isArray(E[0]))w.call(p,C,E[O]);else{for(var P=0;P<g;++P)S[P]=E[g*O+P];w.call(p,C,S)}}return E},get:function(){return m},enumerable:!0})}},3327:function(h,s,t){var a=t(216),n=t(8866);function r(l){return function(){return l}}function i(l,u){for(var p=new Array(l),c=0;c<l;++c)p[c]=u;return p}h.exports=function(l,u,p,c){function x(m){return function(_){for(var f=d("",m),S=0;S<f.length;++S){var w=f[S],E=w[0],O=w[1];if(c[O]){var C=_;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var R=P.indexOf("["),j=P.slice(0,R),D=P.slice(R+1,P.length-1);C=j?_[j][D]:_[D]}else C=_[P]}var N,W=p[O].type;switch(W){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(c[O],C);break;case"float":l.uniform1f(c[O],C);break;default:var F=W.indexOf("vec");if(!(0<=F&&F<=1&&W.length===4+F)){if(W.indexOf("mat")===0&&W.length===4){if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+W);l["uniformMatrix"+N+"fv"](c[O],!1,C);break}throw new n("","Unknown uniform data type for "+name+": "+W)}if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid data type");switch(W.charAt(0)){case"b":case"i":l["uniform"+N+"iv"](c[O],C);break;case"v":l["uniform"+N+"fv"](c[O],C);break;default:throw new n("","Unrecognized data type for vector "+name+": "+W)}}}}}}function d(m,_){if(typeof _!="object")return[[m,_]];var f=[];for(var S in _){var w=_[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof w=="object"?f.push.apply(f,d(E,w)):f.push([E,w])}return f}function g(m,_,f){if(typeof f=="object"){var S=v(f);Object.defineProperty(m,_,{get:r(S),set:x(f),enumerable:!0,configurable:!1})}else c[f]?Object.defineProperty(m,_,{get:(w=f,function(E,O,C){return E.getUniform(O.program,C[w])}),set:x(f),enumerable:!0,configurable:!1}):m[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var O=E.indexOf("vec");if(0<=O&&O<=1&&E.length===4+O){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new n("","Invalid data type");return E.charAt(0)==="b"?i(C,!1):i(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);return i(C*C,0)}throw new n("","Unknown uniform data type for "+name+": "+E)}}(p[f].type);var w}function v(m){var _;if(Array.isArray(m)){_=new Array(m.length);for(var f=0;f<m.length;++f)g(_,f,m[f])}else for(var S in _={},m)g(_,S,m[S]);return _}var y=a(p,!0);return{get:r(v(y)),set:x(y),enumerable:!0,configurable:!0}}},216:function(h){h.exports=function(s,t){for(var a={},n=0;n<s.length;++n)for(var r=s[n].name.split("."),i=a,l=0;l<r.length;++l){var u=r[l].split("[");if(u.length>1){u[0]in i||(i[u[0]]=[]),i=i[u[0]];for(var p=1;p<u.length;++p){var c=parseInt(u[p]);p<u.length-1||l<r.length-1?(c in i||(p<u.length-1?i[c]=[]:i[c]={}),i=i[c]):i[c]=t?n:s[n].type}}else l<r.length-1?(u[0]in i||(i[u[0]]={}),i=i[u[0]]):i[u[0]]=t?n:s[n].type}return a}},2145:function(h,s){s.uniforms=function(r,i){for(var l=r.getProgramParameter(i,r.ACTIVE_UNIFORMS),u=[],p=0;p<l;++p){var c=r.getActiveUniform(i,p);if(c){var x=n(r,c.type);if(c.size>1)for(var d=0;d<c.size;++d)u.push({name:c.name.replace("[0]","["+d+"]"),type:x});else u.push({name:c.name,type:x})}}return u},s.attributes=function(r,i){for(var l=r.getProgramParameter(i,r.ACTIVE_ATTRIBUTES),u=[],p=0;p<l;++p){var c=r.getActiveAttrib(i,p);c&&u.push({name:c.name,type:n(r,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function n(r,i){if(!a){var l=Object.keys(t);a={};for(var u=0;u<l.length;++u){var p=l[u];a[r[p]]=t[p]}}return a[i]}},5091:function(h,s,t){s.shader=function(x,d,g){return c(x).getShaderReference(d,g)},s.program=function(x,d,g,v,y){return c(x).getProgram(d,g,v,y)};var a=t(8866),n=t(2992),r=new(typeof WeakMap>"u"?t(606):WeakMap),i=0;function l(x,d,g,v,y,m,_){this.id=x,this.src=d,this.type=g,this.shader=v,this.count=m,this.programs=[],this.cache=_}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,d=x.gl,g=this.programs,v=0,y=g.length;v<y;++v){var m=x.programs[g[v]];m&&(delete x.programs[v],d.deleteProgram(m))}d.deleteShader(this.shader),delete x.shaders[this.type===d.FRAGMENT_SHADER|0][this.src]}};var p=u.prototype;function c(x){var d=r.get(x);return d||(d=new u(x),r.set(x,d)),d}p.getShaderReference=function(x,d){var g=this.gl,v=this.shaders[x===g.FRAGMENT_SHADER|0],y=v[d];if(y&&g.isShader(y.shader))y.count+=1;else{var m=function(_,f,S){var w=_.createShader(f);if(_.shaderSource(w,S),_.compileShader(w),!_.getShaderParameter(w,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(w);try{var O=n(E,S,f)}catch(C){throw console.warn("Failed to format compiler error: "+C),new a(E,`Error compiling shader:
`+E)}throw new a(E,O.short,O.long)}return w}(g,x,d);y=v[d]=new l(i++,d,x,m,[],1,this)}return y},p.getProgram=function(x,d,g,v){var y=[x.id,d.id,g.join(":"),v.join(":")].join("@"),m=this.programs[y];return m&&this.gl.isProgram(m)||(this.programs[y]=m=function(_,f,S,w,E){var O=_.createProgram();_.attachShader(O,f),_.attachShader(O,S);for(var C=0;C<w.length;++C)_.bindAttribLocation(O,E[C],w[C]);if(_.linkProgram(O),!_.getProgramParameter(O,_.LINK_STATUS)){var P=_.getProgramInfoLog(O);throw new a(P,"Error linking program: "+P)}return O}(this.gl,x.shader,d.shader,g,v),x.programs.push(y),d.programs.push(y)),m}},4098:function(h){function s(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}h.exports=function(a,n){var r=new s(a);return r.update(n),a.addOverlay(r),r};var t=s.prototype;t.update=function(a){a=a||{},this.enable=(a.enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var a=this.enable,n=this.width,r=this.color,i=this.center,l=this.plot,u=l.line,p=l.dataBox,c=l.viewBox;if(u.bind(),p[0]<=i[0]&&i[0]<=p[2]&&p[1]<=i[1]&&i[1]<=p[3]){var x=c[0]+(i[0]-p[0])/(p[2]-p[0])*(c[2]-c[0]),d=c[1]+(i[1]-p[1])/(p[3]-p[1])*(c[3]-c[1]);a[0]&&u.drawLine(x,d,c[0],d,n[0],r[0]),a[1]&&u.drawLine(x,d,x,c[1],n[1],r[1]),a[2]&&u.drawLine(x,d,c[2],d,n[2],r[2]),a[3]&&u.drawLine(x,d,x,c[3],n[3],r[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(h,s,t){var a=t(3236),n=t(9405),r=a([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),i=a([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);h.exports=function(l){return n(l,r,i,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(h,s,t){var a=t(2762),n=t(8116),r=t(1493);h.exports=function(d,g){var v=[];function y(w,E,O,C,P,R){var j=[w,E,O,0,0,0,1];j[C+3]=1,j[C]=P,v.push.apply(v,j),j[6]=-1,v.push.apply(v,j),j[C]=R,v.push.apply(v,j),v.push.apply(v,j),j[6]=1,v.push.apply(v,j),j[C]=P,v.push.apply(v,j)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var m=a(d,v),_=n(d,[{type:d.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:m,size:1,offset:24,stride:28}]),f=r(d);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var S=new l(d,m,_,f);return S.update(g),S};var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(d,g,v,y){this.gl=d,this.buffer=g,this.vao=v,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=l.prototype,p=[0,0,0],c=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(d){},u.draw=function(d){var g=this.gl,v=this.vao,y=this.shader;v.bind(),y.bind();var m,_=d.model||i,f=d.view||i,S=d.projection||i;this.axes&&(m=this.axes.lastCubeProps.axis);for(var w=p,E=c,O=0;O<3;++O)m&&m[O]<0?(w[O]=this.bounds[0][O],E[O]=this.bounds[1][O]):(w[O]=this.bounds[1][O],E[O]=this.bounds[0][O]);for(x[0]=g.drawingBufferWidth,x[1]=g.drawingBufferHeight,y.uniforms.model=_,y.uniforms.view=f,y.uniforms.projection=S,y.uniforms.coordinates=[this.position,w,E],y.uniforms.colors=this.colors,y.uniforms.screenShape=x,O=0;O<3;++O)y.uniforms.lineWidth=this.lineWidth[O]*this.pixelRatio,this.enabled[O]&&(v.draw(g.TRIANGLES,6,6*O),this.drawSides[O]&&v.draw(g.TRIANGLES,12,18+12*O));v.unbind()},u.update=function(d){d&&("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(h,s,t){var a=t(3236),n=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=a([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),i=a([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:i,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(h,s,t){var a=t(2931),n=t(9970),r=["xyz","xzy","yxz","yzx","zxy","zyx"],i=function(x,d){var g,v=x.length;for(g=0;g<v;g++){var y=x[g];if(y===d)return g;if(y>d)return g-1}return g},l=function(x,d,g){return x<d?d:x>g?g:x},u=function(x){var d=1/0;x.sort(function(m,_){return m-_});for(var g=x.length,v=1;v<g;v++){var y=Math.abs(x[v]-x[v-1]);y<d&&(d=y)}return d};h.exports=function(x,d){var g=x.startingPositions,v=x.maxLength||1e3,y=x.tubeSize||1,m=x.absoluteTubeSize,_=x.gridFill||"+x+y+z",f={};_.indexOf("-x")!==-1&&(f.reversedX=!0),_.indexOf("-y")!==-1&&(f.reversedY=!0),_.indexOf("-z")!==-1&&(f.reversedZ=!0),f.filled=r.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(ve){return function(ge,we,_e){var se=we.vectors,ie=we.meshgrid,fe=ge[0],Ee=ge[1],Te=ge[2],Ae=ie[0].length,Se=ie[1].length,Oe=ie[2].length,De=i(ie[0],fe),de=i(ie[1],Ee),me=i(ie[2],Te),Me=De+1,ze=de+1,Pe=me+1;if(De=l(De,0,Ae-1),Me=l(Me,0,Ae-1),de=l(de,0,Se-1),ze=l(ze,0,Se-1),me=l(me,0,Oe-1),Pe=l(Pe,0,Oe-1),De<0||de<0||me<0||Me>Ae-1||ze>Se-1||Pe>Oe-1)return a.create();var Ne,Ve,Ye,at,rt,dt,vt=ie[0][De],ht=ie[0][Me],et=ie[1][de],$e=ie[1][ze],wt=ie[2][me],Pt=(fe-vt)/(ht-vt),Ot=(Ee-et)/($e-et),At=(Te-wt)/(ie[2][Pe]-wt);switch(isFinite(Pt)||(Pt=.5),isFinite(Ot)||(Ot=.5),isFinite(At)||(At=.5),_e.reversedX&&(De=Ae-1-De,Me=Ae-1-Me),_e.reversedY&&(de=Se-1-de,ze=Se-1-ze),_e.reversedZ&&(me=Oe-1-me,Pe=Oe-1-Pe),_e.filled){case 5:rt=me,dt=Pe,Ye=de*Oe,at=ze*Oe,Ne=De*Oe*Se,Ve=Me*Oe*Se;break;case 4:rt=me,dt=Pe,Ne=De*Oe,Ve=Me*Oe,Ye=de*Oe*Ae,at=ze*Oe*Ae;break;case 3:Ye=de,at=ze,rt=me*Se,dt=Pe*Se,Ne=De*Se*Oe,Ve=Me*Se*Oe;break;case 2:Ye=de,at=ze,Ne=De*Se,Ve=Me*Se,rt=me*Se*Ae,dt=Pe*Se*Ae;break;case 1:Ne=De,Ve=Me,rt=me*Ae,dt=Pe*Ae,Ye=de*Ae*Oe,at=ze*Ae*Oe;break;default:Ne=De,Ve=Me,Ye=de*Ae,at=ze*Ae,rt=me*Ae*Se,dt=Pe*Ae*Se}var He=se[Ne+Ye+rt],Ze=se[Ne+Ye+dt],Be=se[Ne+at+rt],Ge=se[Ne+at+dt],it=se[Ve+Ye+rt],tt=se[Ve+Ye+dt],Re=se[Ve+at+rt],Fe=se[Ve+at+dt],nt=a.create(),We=a.create(),ct=a.create(),pt=a.create();a.lerp(nt,He,it,Pt),a.lerp(We,Ze,tt,Pt),a.lerp(ct,Be,Re,Pt),a.lerp(pt,Ge,Fe,Pt);var gt=a.create(),ut=a.create();a.lerp(gt,nt,ct,Ot),a.lerp(ut,We,pt,Ot);var kt=a.create();return a.lerp(kt,gt,ut,At),kt}(ve,x,f)},w=x.getDivergence||function(ve,ge){var we=a.create(),_e=1e-4;a.add(we,ve,[_e,0,0]);var se=S(we);a.subtract(se,se,ge),a.scale(se,se,1/_e),a.add(we,ve,[0,_e,0]);var ie=S(we);a.subtract(ie,ie,ge),a.scale(ie,ie,1/_e),a.add(we,ve,[0,0,_e]);var fe=S(we);return a.subtract(fe,fe,ge),a.scale(fe,fe,1/_e),a.add(we,se,ie),a.add(we,we,fe),we},E=[],O=d[0][0],C=d[0][1],P=d[0][2],R=d[1][0],j=d[1][1],D=d[1][2],N=function(ve){var ge=ve[0],we=ve[1],_e=ve[2];return!(ge<O||ge>R||we<C||we>j||_e<P||_e>D)},W=10*a.distance(d[0],d[1])/v,F=W*W,V=1,U=0,te=g.length;te>1&&(V=function(ve){for(var ge=[],we=[],_e=[],se={},ie={},fe={},Ee=ve.length,Te=0;Te<Ee;Te++){var Ae=ve[Te],Se=Ae[0],Oe=Ae[1],De=Ae[2];se[Se]||(ge.push(Se),se[Se]=!0),ie[Oe]||(we.push(Oe),ie[Oe]=!0),fe[De]||(_e.push(De),fe[De]=!0)}var de=u(ge),me=u(we),Me=u(_e),ze=Math.min(de,me,Me);return isFinite(ze)?ze:1}(g));for(var J=0;J<te;J++){var X=a.create();a.copy(X,g[J]);var K=[X],Q=[],Z=S(X),re=X;Q.push(Z);var oe=[],ae=w(X,Z),ce=a.length(ae);isFinite(ce)&&ce>U&&(U=ce),oe.push(ce),E.push({points:K,velocities:Q,divergences:oe});for(var he=0;he<100*v&&K.length<v&&N(X);){he++;var pe=a.clone(Z),xe=a.squaredLength(pe);if(xe===0)break;xe>F&&a.scale(pe,pe,W/Math.sqrt(xe)),a.add(pe,pe,X),Z=S(pe),a.squaredDistance(re,pe)-F>-1e-4*F&&(K.push(pe),re=pe,Q.push(Z),ae=w(pe,Z),ce=a.length(ae),isFinite(ce)&&ce>U&&(U=ce),oe.push(ce)),X=pe}}var be=function(ve,ge,we,_e){for(var se=0,ie=0;ie<ve.length;ie++)for(var fe=ve[ie].velocities,Ee=0;Ee<fe.length;Ee++)se=Math.max(se,a.length(fe[Ee]));var Te=ve.map(function(Ne){return function(Ve,Ye,at,rt){for(var dt=Ve.points,vt=Ve.velocities,ht=Ve.divergences,et=[],$e=[],wt=[],Pt=[],Ot=[],At=[],He=0,Ze=0,Be=n.create(),Ge=n.create(),it=0;it<dt.length;it++){var tt=dt[it],Re=vt[it],Fe=ht[it];Ye===0&&(Fe=.05*at),Ze=a.length(Re)/rt,Be=n.create(),a.copy(Be,Re),Be[3]=Fe;for(var nt=0;nt<8;nt++)Ot[nt]=[tt[0],tt[1],tt[2],nt];if(Pt.length>0)for(nt=0;nt<8;nt++){var We=(nt+1)%8;et.push(Pt[nt],Ot[nt],Ot[We],Ot[We],Pt[We],Pt[nt]),wt.push(Ge,Be,Be,Be,Ge,Ge),At.push(He,Ze,Ze,Ze,He,He);var ct=et.length;$e.push([ct-6,ct-5,ct-4],[ct-3,ct-2,ct-1])}var pt=Pt;Pt=Ot,Ot=pt;var gt=Ge;Ge=Be,Be=gt;var ut=He;He=Ze,Ze=ut}return{positions:et,cells:$e,vectors:wt,vertexIntensity:At}}(Ne,we,_e,se)}),Ae=[],Se=[],Oe=[],De=[];for(ie=0;ie<Te.length;ie++){var de=Te[ie],me=Ae.length;for(Ae=Ae.concat(de.positions),Oe=Oe.concat(de.vectors),De=De.concat(de.vertexIntensity),Ee=0;Ee<de.cells.length;Ee++){var Me=de.cells[Ee],ze=[];Se.push(ze);for(var Pe=0;Pe<Me.length;Pe++)ze.push(Me[Pe]+me)}}return{positions:Ae,cells:Se,vectors:Oe,vertexIntensity:De,colormap:ge}}(E,x.colormap,U,V);return m?be.tubeScale=m:(U===0&&(U=1),be.tubeScale=.5*y*V/U),be};var p=t(6740),c=t(6405).createMesh;h.exports.createTubeMesh=function(x,d){return c(x,d,{shaders:p,traceType:"streamtube"})}},990:function(h,s,t){var a=t(9405),n=t(3236),r=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),i=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(p){var c=a(p,r,i,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(p){var c=a(p,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(p){var c=a(p,l,i,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(p){var c=a(p,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},9499:function(h,s,t){h.exports=function(ae){var ce=ae.gl,he=f(ce),pe=w(ce),xe=S(ce),be=E(ce),ve=n(ce),ge=r(ce,[{buffer:ve,size:4,stride:O,offset:0},{buffer:ve,size:3,stride:O,offset:16},{buffer:ve,size:3,stride:O,offset:28}]),we=n(ce),_e=r(ce,[{buffer:we,size:4,stride:20,offset:0},{buffer:we,size:1,stride:20,offset:16}]),se=n(ce),ie=r(ce,[{buffer:se,size:2,type:ce.FLOAT}]),fe=i(ce,1,D,ce.RGBA,ce.UNSIGNED_BYTE);fe.minFilter=ce.LINEAR,fe.magFilter=ce.LINEAR;var Ee=new N(ce,[0,0],[[0,0,0],[0,0,0]],he,pe,ve,ge,fe,xe,be,we,_e,se,ie,[0,0,0]),Te={levels:[[],[],[]]};for(var Ae in ae)Te[Ae]=ae[Ae];return Te.colormap=Te.colormap||"jet",Ee.update(Te),Ee};var a=t(8828),n=t(2762),r=t(8116),i=t(7766),l=t(1888),u=t(6729),p=t(5298),c=t(9994),x=t(9618),d=t(3711),g=t(6760),v=t(7608),y=t(2478),m=t(6199),_=t(990),f=_.createShader,S=_.createContourShader,w=_.createPickShader,E=_.createPickContourShader,O=40,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],R=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function j(ae,ce,he,pe,xe){this.position=ae,this.index=ce,this.uv=he,this.level=pe,this.dataCoordinate=xe}(function(){for(var ae=0;ae<3;++ae){var ce=R[ae],he=(ae+2)%3;ce[(ae+1)%3+0]=1,ce[he+3]=1,ce[ae+6]=1}})();var D=256;function N(ae,ce,he,pe,xe,be,ve,ge,we,_e,se,ie,fe,Ee,Te){this.gl=ae,this.shape=ce,this.bounds=he,this.objectOffset=Te,this.intensityBounds=[],this._shader=pe,this._pickShader=xe,this._coordinateBuffer=be,this._vao=ve,this._colorMap=ge,this._contourShader=we,this._contourPickShader=_e,this._contourBuffer=se,this._contourVAO=ie,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new j([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=fe,this._dynamicVAO=Ee,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var W=N.prototype;W.genColormap=function(ae,ce){var he=!1,pe=c([u({colormap:ae,nshades:D,format:"rgba"}).map(function(xe,be){var ve=ce?function(ge,we){if(!we||!we.length)return 1;for(var _e=0;_e<we.length;++_e){if(we.length<2)return 1;if(we[_e][0]===ge)return we[_e][1];if(we[_e][0]>ge&&_e>0){var se=(we[_e][0]-ge)/(we[_e][0]-we[_e-1][0]);return we[_e][1]*(1-se)+se*we[_e-1][1]}}return 1}(be/255,ce):xe[3];return ve<1&&(he=!0),[xe[0],xe[1],xe[2],255*ve]})]);return p.divseq(pe,255),this.hasAlphaScale=he,pe},W.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},W.isOpaque=function(){return!this.isTransparent()},W.pickSlots=1,W.setPickBase=function(ae){this.pickId=ae};var F=[0,0,0],V={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function U(ae,ce){var he,pe,xe,be=ce.axes&&ce.axes.lastCubeProps.axis||F,ve=ce.showSurface,ge=ce.showContour;for(he=0;he<3;++he)for(ve=ve||ce.surfaceProject[he],pe=0;pe<3;++pe)ge=ge||ce.contourProject[he][pe];for(he=0;he<3;++he){var we=V.projections[he];for(pe=0;pe<16;++pe)we[pe]=0;for(pe=0;pe<4;++pe)we[5*pe]=1;we[5*he]=0,we[12+he]=ce.axesBounds[+(be[he]>0)][he],g(we,ae.model,we);var _e=V.clipBounds[he];for(xe=0;xe<2;++xe)for(pe=0;pe<3;++pe)_e[xe][pe]=ae.clipBounds[xe][pe];_e[0][he]=-1e8,_e[1][he]=1e8}return V.showSurface=ve,V.showContour=ge,V}var te={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},J=C.slice(),X=[1,0,0,0,1,0,0,0,1];function K(ae,ce){ae=ae||{};var he=this.gl;he.disable(he.CULL_FACE),this._colorMap.bind(0);var pe=te;pe.model=ae.model||C,pe.view=ae.view||C,pe.projection=ae.projection||C,pe.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],pe.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],pe.objectOffset=this.objectOffset,pe.contourColor=this.contourColor[0],pe.inverseModel=v(pe.inverseModel,pe.model);for(var xe=0;xe<2;++xe)for(var be=pe.clipBounds[xe],ve=0;ve<3;++ve)be[ve]=Math.min(Math.max(this.clipBounds[xe][ve],-1e8),1e8);pe.kambient=this.ambientLight,pe.kdiffuse=this.diffuseLight,pe.kspecular=this.specularLight,pe.roughness=this.roughness,pe.fresnel=this.fresnel,pe.opacity=this.opacity,pe.height=0,pe.permutation=X,pe.vertexColor=this.vertexColor;var ge=J;for(g(ge,pe.view,pe.model),g(ge,pe.projection,ge),v(ge,ge),xe=0;xe<3;++xe)pe.eyePosition[xe]=ge[12+xe]/ge[15];var we=ge[15];for(xe=0;xe<3;++xe)we+=this.lightPosition[xe]*ge[4*xe+3];for(xe=0;xe<3;++xe){var _e=ge[12+xe];for(ve=0;ve<3;++ve)_e+=ge[4*ve+xe]*this.lightPosition[ve];pe.lightPosition[xe]=_e/we}var se=U(pe,this);if(se.showSurface){for(this._shader.bind(),this._shader.uniforms=pe,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(he.TRIANGLES,this._vertexCount),xe=0;xe<3;++xe)this.surfaceProject[xe]&&this.vertexCount&&(this._shader.uniforms.model=se.projections[xe],this._shader.uniforms.clipBounds=se.clipBounds[xe],this._vao.draw(he.TRIANGLES,this._vertexCount));this._vao.unbind()}if(se.showContour){var ie=this._contourShader;pe.kambient=1,pe.kdiffuse=0,pe.kspecular=0,pe.opacity=1,ie.bind(),ie.uniforms=pe;var fe=this._contourVAO;for(fe.bind(),xe=0;xe<3;++xe)for(ie.uniforms.permutation=R[xe],he.lineWidth(this.contourWidth[xe]*this.pixelRatio),ve=0;ve<this.contourLevels[xe].length;++ve)ve===this.highlightLevel[xe]?(ie.uniforms.contourColor=this.highlightColor[xe],ie.uniforms.contourTint=this.highlightTint[xe]):ve!==0&&ve-1!==this.highlightLevel[xe]||(ie.uniforms.contourColor=this.contourColor[xe],ie.uniforms.contourTint=this.contourTint[xe]),this._contourCounts[xe][ve]&&(ie.uniforms.height=this.contourLevels[xe][ve],fe.draw(he.LINES,this._contourCounts[xe][ve],this._contourOffsets[xe][ve]));for(xe=0;xe<3;++xe)for(ie.uniforms.model=se.projections[xe],ie.uniforms.clipBounds=se.clipBounds[xe],ve=0;ve<3;++ve)if(this.contourProject[xe][ve]){ie.uniforms.permutation=R[ve],he.lineWidth(this.contourWidth[ve]*this.pixelRatio);for(var Ee=0;Ee<this.contourLevels[ve].length;++Ee)Ee===this.highlightLevel[ve]?(ie.uniforms.contourColor=this.highlightColor[ve],ie.uniforms.contourTint=this.highlightTint[ve]):Ee!==0&&Ee-1!==this.highlightLevel[ve]||(ie.uniforms.contourColor=this.contourColor[ve],ie.uniforms.contourTint=this.contourTint[ve]),this._contourCounts[ve][Ee]&&(ie.uniforms.height=this.contourLevels[ve][Ee],fe.draw(he.LINES,this._contourCounts[ve][Ee],this._contourOffsets[ve][Ee]))}for(fe.unbind(),(fe=this._dynamicVAO).bind(),xe=0;xe<3;++xe)if(this._dynamicCounts[xe]!==0)for(ie.uniforms.model=pe.model,ie.uniforms.clipBounds=pe.clipBounds,ie.uniforms.permutation=R[xe],he.lineWidth(this.dynamicWidth[xe]*this.pixelRatio),ie.uniforms.contourColor=this.dynamicColor[xe],ie.uniforms.contourTint=this.dynamicTint[xe],ie.uniforms.height=this.dynamicLevel[xe],fe.draw(he.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]),ve=0;ve<3;++ve)this.contourProject[ve][xe]&&(ie.uniforms.model=se.projections[ve],ie.uniforms.clipBounds=se.clipBounds[ve],fe.draw(he.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]));fe.unbind()}}W.draw=function(ae){return K.call(this,ae,!1)},W.drawTransparent=function(ae){return K.call(this,ae,!0)};var Q={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Z(ae,ce){return Array.isArray(ae)?[ce(ae[0]),ce(ae[1]),ce(ae[2])]:[ce(ae),ce(ae),ce(ae)]}function re(ae){return Array.isArray(ae)?ae.length===3?[ae[0],ae[1],ae[2],1]:[ae[0],ae[1],ae[2],ae[3]]:[0,0,0,1]}function oe(ae){if(Array.isArray(ae)){if(Array.isArray(ae))return[re(ae[0]),re(ae[1]),re(ae[2])];var ce=re(ae);return[ce.slice(),ce.slice(),ce.slice()]}}W.drawPick=function(ae){ae=ae||{};var ce=this.gl;ce.disable(ce.CULL_FACE);var he=Q;he.model=ae.model||C,he.view=ae.view||C,he.projection=ae.projection||C,he.shape=this._field[2].shape,he.pickId=this.pickId/255,he.lowerBound=this.bounds[0],he.upperBound=this.bounds[1],he.objectOffset=this.objectOffset,he.permutation=X;for(var pe=0;pe<2;++pe)for(var xe=he.clipBounds[pe],be=0;be<3;++be)xe[be]=Math.min(Math.max(this.clipBounds[pe][be],-1e8),1e8);var ve=U(he,this);if(ve.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=he,this._vao.bind(),this._vao.draw(ce.TRIANGLES,this._vertexCount),pe=0;pe<3;++pe)this.surfaceProject[pe]&&(this._pickShader.uniforms.model=ve.projections[pe],this._pickShader.uniforms.clipBounds=ve.clipBounds[pe],this._vao.draw(ce.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ve.showContour){var ge=this._contourPickShader;ge.bind(),ge.uniforms=he;var we=this._contourVAO;for(we.bind(),be=0;be<3;++be)for(ce.lineWidth(this.contourWidth[be]*this.pixelRatio),ge.uniforms.permutation=R[be],pe=0;pe<this.contourLevels[be].length;++pe)this._contourCounts[be][pe]&&(ge.uniforms.height=this.contourLevels[be][pe],we.draw(ce.LINES,this._contourCounts[be][pe],this._contourOffsets[be][pe]));for(pe=0;pe<3;++pe)for(ge.uniforms.model=ve.projections[pe],ge.uniforms.clipBounds=ve.clipBounds[pe],be=0;be<3;++be)if(this.contourProject[pe][be]){ge.uniforms.permutation=R[be],ce.lineWidth(this.contourWidth[be]*this.pixelRatio);for(var _e=0;_e<this.contourLevels[be].length;++_e)this._contourCounts[be][_e]&&(ge.uniforms.height=this.contourLevels[be][_e],we.draw(ce.LINES,this._contourCounts[be][_e],this._contourOffsets[be][_e]))}we.unbind()}},W.pick=function(ae){if(!ae||ae.id!==this.pickId)return null;var ce=this._field[2].shape,he=this._pickResult,pe=ce[0]*(ae.value[0]+(ae.value[2]>>4)/16)/255,xe=Math.floor(pe),be=pe-xe,ve=ce[1]*(ae.value[1]+(15&ae.value[2])/16)/255,ge=Math.floor(ve),we=ve-ge;xe+=1,ge+=1;var _e=he.position;_e[0]=_e[1]=_e[2]=0;for(var se=0;se<2;++se)for(var ie=se?be:1-be,fe=0;fe<2;++fe)for(var Ee=xe+se,Te=ge+fe,Ae=ie*(fe?we:1-we),Se=0;Se<3;++Se)_e[Se]+=this._field[Se].get(Ee,Te)*Ae;for(var Oe=this._pickResult.level,De=0;De<3;++De)if(Oe[De]=y.le(this.contourLevels[De],_e[De]),Oe[De]<0)this.contourLevels[De].length>0&&(Oe[De]=0);else if(Oe[De]<this.contourLevels[De].length-1){var de=this.contourLevels[De][Oe[De]],me=this.contourLevels[De][Oe[De]+1];Math.abs(de-_e[De])>Math.abs(me-_e[De])&&(Oe[De]+=1)}for(he.index[0]=be<.5?xe:xe+1,he.index[1]=we<.5?ge:ge+1,he.uv[0]=pe/ce[0],he.uv[1]=ve/ce[1],Se=0;Se<3;++Se)he.dataCoordinate[Se]=this._field[Se].get(he.index[0],he.index[1]);return he},W.padField=function(ae,ce){var he=ce.shape.slice(),pe=ae.shape.slice();p.assign(ae.lo(1,1).hi(he[0],he[1]),ce),p.assign(ae.lo(1).hi(he[0],1),ce.hi(he[0],1)),p.assign(ae.lo(1,pe[1]-1).hi(he[0],1),ce.lo(0,he[1]-1).hi(he[0],1)),p.assign(ae.lo(0,1).hi(1,he[1]),ce.hi(1)),p.assign(ae.lo(pe[0]-1,1).hi(1,he[1]),ce.lo(he[0]-1)),ae.set(0,0,ce.get(0,0)),ae.set(0,pe[1]-1,ce.get(0,he[1]-1)),ae.set(pe[0]-1,0,ce.get(he[0]-1,0)),ae.set(pe[0]-1,pe[1]-1,ce.get(he[0]-1,he[1]-1))},W.update=function(ae){ae=ae||{},this.objectOffset=ae.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ae&&(this.contourWidth=Z(ae.contourWidth,Number)),"showContour"in ae&&(this.showContour=Z(ae.showContour,Boolean)),"showSurface"in ae&&(this.showSurface=!!ae.showSurface),"contourTint"in ae&&(this.contourTint=Z(ae.contourTint,Boolean)),"contourColor"in ae&&(this.contourColor=oe(ae.contourColor)),"contourProject"in ae&&(this.contourProject=Z(ae.contourProject,function(an){return Z(an,Boolean)})),"surfaceProject"in ae&&(this.surfaceProject=ae.surfaceProject),"dynamicColor"in ae&&(this.dynamicColor=oe(ae.dynamicColor)),"dynamicTint"in ae&&(this.dynamicTint=Z(ae.dynamicTint,Number)),"dynamicWidth"in ae&&(this.dynamicWidth=Z(ae.dynamicWidth,Number)),"opacity"in ae&&(this.opacity=ae.opacity),"opacityscale"in ae&&(this.opacityscale=ae.opacityscale),"colorBounds"in ae&&(this.colorBounds=ae.colorBounds),"vertexColor"in ae&&(this.vertexColor=ae.vertexColor?1:0),"colormap"in ae&&this._colorMap.setPixels(this.genColormap(ae.colormap,this.opacityscale));var ce=ae.field||ae.coords&&ae.coords[2]||null,he=!1;if(ce||(ce=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ae||"coords"in ae){var pe=(ce.shape[0]+2)*(ce.shape[1]+2);pe>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(a.nextPow2(pe))),this._field[2]=x(this._field[2].data,[ce.shape[0]+2,ce.shape[1]+2]),this.padField(this._field[2],ce),this.shape=ce.shape.slice();for(var xe=this.shape,be=0;be<2;++be)this._field[2].size>this._field[be].data.length&&(l.freeFloat(this._field[be].data),this._field[be].data=l.mallocFloat(this._field[2].size)),this._field[be]=x(this._field[be].data,[xe[0]+2,xe[1]+2]);if(ae.coords){var ve=ae.coords;if(!Array.isArray(ve)||ve.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(be=0;be<2;++be){var ge=ve[be];for(fe=0;fe<2;++fe)if(ge.shape[fe]!==xe[fe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[be],ge)}}else if(ae.ticks){var we=ae.ticks;if(!Array.isArray(we)||we.length!==2)throw new Error("gl-surface: invalid ticks");for(be=0;be<2;++be){var _e=we[be];if((Array.isArray(_e)||_e.length)&&(_e=x(_e)),_e.shape[0]!==xe[be])throw new Error("gl-surface: invalid tick length");var se=x(_e.data,xe);se.stride[be]=_e.stride[0],se.stride[1^be]=0,this.padField(this._field[be],se)}}else{for(be=0;be<2;++be){var ie=[0,0];ie[be]=1,this._field[be]=x(this._field[be].data,[xe[0]+2,xe[1]+2],ie,0)}this._field[0].set(0,0,0);for(var fe=0;fe<xe[0];++fe)this._field[0].set(fe+1,0,fe);for(this._field[0].set(xe[0]+1,0,xe[0]-1),this._field[1].set(0,0,0),fe=0;fe<xe[1];++fe)this._field[1].set(0,fe+1,fe);this._field[1].set(0,xe[1]+1,xe[1]-1)}var Ee=this._field,Te=x(l.mallocFloat(3*Ee[2].size*2),[3,xe[0]+2,xe[1]+2,2]);for(be=0;be<3;++be)m(Te.pick(be),Ee[be],"mirror");var Ae=x(l.mallocFloat(3*Ee[2].size),[xe[0]+2,xe[1]+2,3]);for(be=0;be<xe[0]+2;++be)for(fe=0;fe<xe[1]+2;++fe){var Se=Te.get(0,be,fe,0),Oe=Te.get(0,be,fe,1),De=Te.get(1,be,fe,0),de=Te.get(1,be,fe,1),me=Te.get(2,be,fe,0),Me=Te.get(2,be,fe,1),ze=De*Me-de*me,Pe=me*Oe-Me*Se,Ne=Se*de-Oe*De,Ve=Math.sqrt(ze*ze+Pe*Pe+Ne*Ne);Ve<1e-8?(Ve=Math.max(Math.abs(ze),Math.abs(Pe),Math.abs(Ne)))<1e-8?(Ne=1,Pe=ze=0,Ve=1):Ve=1/Ve:Ve=1/Math.sqrt(Ve),Ae.set(be,fe,0,ze*Ve),Ae.set(be,fe,1,Pe*Ve),Ae.set(be,fe,2,Ne*Ve)}l.free(Te.data);var Ye=[1/0,1/0,1/0],at=[-1/0,-1/0,-1/0],rt=1/0,dt=-1/0,vt=(xe[0]-1)*(xe[1]-1)*6,ht=l.mallocFloat(a.nextPow2(10*vt)),et=0,$e=0;for(be=0;be<xe[0]-1;++be)e:for(fe=0;fe<xe[1]-1;++fe){for(var wt=0;wt<2;++wt)for(var Pt=0;Pt<2;++Pt)for(var Ot=0;Ot<3;++Ot){var At=this._field[Ot].get(1+be+wt,1+fe+Pt);if(isNaN(At)||!isFinite(At))continue e}for(Ot=0;Ot<6;++Ot){var He=be+P[Ot][0],Ze=fe+P[Ot][1],Be=this._field[0].get(He+1,Ze+1),Ge=this._field[1].get(He+1,Ze+1);At=this._field[2].get(He+1,Ze+1),ze=Ae.get(He+1,Ze+1,0),Pe=Ae.get(He+1,Ze+1,1),Ne=Ae.get(He+1,Ze+1,2),ae.intensity&&(it=ae.intensity.get(He,Ze));var it=ae.intensity?ae.intensity.get(He,Ze):At+this.objectOffset[2];ht[et++]=He,ht[et++]=Ze,ht[et++]=Be,ht[et++]=Ge,ht[et++]=At,ht[et++]=0,ht[et++]=it,ht[et++]=ze,ht[et++]=Pe,ht[et++]=Ne,Ye[0]=Math.min(Ye[0],Be+this.objectOffset[0]),Ye[1]=Math.min(Ye[1],Ge+this.objectOffset[1]),Ye[2]=Math.min(Ye[2],At+this.objectOffset[2]),rt=Math.min(rt,it),at[0]=Math.max(at[0],Be+this.objectOffset[0]),at[1]=Math.max(at[1],Ge+this.objectOffset[1]),at[2]=Math.max(at[2],At+this.objectOffset[2]),dt=Math.max(dt,it),$e+=1}}for(ae.intensityBounds&&(rt=+ae.intensityBounds[0],dt=+ae.intensityBounds[1]),be=6;be<et;be+=10)ht[be]=(ht[be]-rt)/(dt-rt);this._vertexCount=$e,this._coordinateBuffer.update(ht.subarray(0,et)),l.freeFloat(ht),l.free(Ae.data),this.bounds=[Ye,at],this.intensity=ae.intensity||this._field[2],this.intensityBounds[0]===rt&&this.intensityBounds[1]===dt||(he=!0),this.intensityBounds=[rt,dt]}if("levels"in ae){var tt=ae.levels;for(tt=Array.isArray(tt[0])?tt.slice():[[],[],tt],be=0;be<3;++be)tt[be]=tt[be].slice(),tt[be].sort(function(an,$t){return an-$t});for(be=0;be<3;++be)for(fe=0;fe<tt[be].length;++fe)tt[be][fe]-=this.objectOffset[be];e:for(be=0;be<3;++be){if(tt[be].length!==this.contourLevels[be].length){he=!0;break}for(fe=0;fe<tt[be].length;++fe)if(tt[be][fe]!==this.contourLevels[be][fe]){he=!0;break e}}this.contourLevels=tt}if(he){Ee=this._field,xe=this.shape;for(var Re=[],Fe=0;Fe<3;++Fe){var nt=this.contourLevels[Fe],We=[],ct=[],pt=[0,0,0];for(be=0;be<nt.length;++be){var gt=d(this._field[Fe],nt[be]);We.push(Re.length/5|0),$e=0;e:for(fe=0;fe<gt.cells.length;++fe){var ut=gt.cells[fe];for(Ot=0;Ot<2;++Ot){var kt=gt.positions[ut[Ot]],yt=kt[0],Mt=0|Math.floor(yt),Lt=yt-Mt,Ct=kt[1],It=0|Math.floor(Ct),Wt=Ct-It,Nt=!1;t:for(var Bt=0;Bt<3;++Bt){pt[Bt]=0;var Ht=(Fe+Bt+1)%3;for(wt=0;wt<2;++wt){var Qt=wt?Lt:1-Lt;for(He=0|Math.min(Math.max(Mt+wt,0),xe[0]),Pt=0;Pt<2;++Pt){var Cn=Pt?Wt:1-Wt;if(Ze=0|Math.min(Math.max(It+Pt,0),xe[1]),At=Bt<2?this._field[Ht].get(He,Ze):(this.intensity.get(He,Ze)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(At)||isNaN(At)){Nt=!0;break t}var Tn=Qt*Cn;pt[Bt]+=Tn*At}}}if(Nt){if(Ot>0){for(var hn=0;hn<5;++hn)Re.pop();$e-=1}continue e}Re.push(pt[0],pt[1],kt[0],kt[1],pt[2]),$e+=1}}ct.push($e)}this._contourOffsets[Fe]=We,this._contourCounts[Fe]=ct}var Zt=l.mallocFloat(Re.length);for(be=0;be<Re.length;++be)Zt[be]=Re[be];this._contourBuffer.update(Zt),l.freeFloat(Zt)}},W.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ae=0;ae<3;++ae)l.freeFloat(this._field[ae].data)},W.highlight=function(ae){var ce,he;if(!ae)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ce=0;ce<3;++ce)this.enableHighlight[ce]?this.highlightLevel[ce]=ae.level[ce]:this.highlightLevel[ce]=-1;for(he=this.snapToData?ae.dataCoordinate:ae.position,ce=0;ce<3;++ce)he[ce]-=this.objectOffset[ce];if(this.enableDynamic[0]&&he[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&he[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&he[2]!==this.dynamicLevel[2]){for(var pe=0,xe=this.shape,be=l.mallocFloat(12*xe[0]*xe[1]),ve=0;ve<3;++ve)if(this.enableDynamic[ve]){this.dynamicLevel[ve]=he[ve];var ge=(ve+1)%3,we=(ve+2)%3,_e=this._field[ve],se=this._field[ge],ie=this._field[we],fe=d(_e,he[ve]),Ee=fe.cells,Te=fe.positions;for(this._dynamicOffsets[ve]=pe,ce=0;ce<Ee.length;++ce)for(var Ae=Ee[ce],Se=0;Se<2;++Se){var Oe=Te[Ae[Se]],De=+Oe[0],de=0|De,me=0|Math.min(de+1,xe[0]),Me=De-de,ze=1-Me,Pe=+Oe[1],Ne=0|Pe,Ve=0|Math.min(Ne+1,xe[1]),Ye=Pe-Ne,at=1-Ye,rt=ze*at,dt=ze*Ye,vt=Me*at,ht=Me*Ye,et=rt*se.get(de,Ne)+dt*se.get(de,Ve)+vt*se.get(me,Ne)+ht*se.get(me,Ve),$e=rt*ie.get(de,Ne)+dt*ie.get(de,Ve)+vt*ie.get(me,Ne)+ht*ie.get(me,Ve);if(isNaN(et)||isNaN($e)){Se&&(pe-=1);break}be[2*pe+0]=et,be[2*pe+1]=$e,pe+=1}this._dynamicCounts[ve]=pe-this._dynamicOffsets[ve]}else this.dynamicLevel[ve]=NaN,this._dynamicCounts[ve]=0;this._dynamicBuffer.update(be.subarray(0,2*pe)),l.freeFloat(be)}}},7766:function(h,s,t){var a=t(9618),n=t(5298),r=t(1888);h.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(i||function(w){i=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],l=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],u=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return m(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var f=arguments[1],S=p(f)?f:f.raw;if(S)return function(w,E,O,C,P,R){var j=y(w);return w.texImage2D(w.TEXTURE_2D,0,P,P,R,E),new d(w,j,O,C,P,R)}(_,S,0|f.width,0|f.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return function(w,E){var O=E.dtype,C=E.shape.slice(),P=w.getParameter(w.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var R=v(C,E.stride.slice()),j=0;O==="float32"?j=w.FLOAT:O==="float64"?(j=w.FLOAT,R=!1,O="float32"):O==="uint8"?j=w.UNSIGNED_BYTE:(j=w.UNSIGNED_BYTE,R=!1,O="uint8");var D,N,W=0;if(C.length===2)W=w.LUMINANCE,C=[C[0],C[1],1],E=a(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)W=w.ALPHA;else if(C[2]===2)W=w.LUMINANCE_ALPHA;else if(C[2]===3)W=w.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");W=w.RGBA}}j!==w.FLOAT||w.getExtension("OES_texture_float")||(j=w.UNSIGNED_BYTE,R=!1);var F=E.size;if(R)D=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var V=[C[2],C[2]*C[0],1];N=r.malloc(F,O);var U=a(N,C,V,0);O!=="float32"&&O!=="float64"||j!==w.UNSIGNED_BYTE?n.assign(U,E):c(U,E),D=N.subarray(0,F)}var te=y(w);return w.texImage2D(w.TEXTURE_2D,0,W,C[0],C[1],0,W,j,D),R||r.free(N),new d(w,te,C[0],C[1],W,j)}(_,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var i=null,l=null,u=null;function p(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var c=function(_,f){n.muls(_,f,255)};function x(_,f,S){var w=_.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[f,S],_.bind(),w.texImage2D(w.TEXTURE_2D,0,_.format,f,S,0,_.format,_.type,null),_._mipLevels=[0],_}function d(_,f,S,w,E,O){this.gl=_,this.handle=f,this.format=E,this.type=O,this._shape=[S,w],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,P=[this._wrapS,this._wrapT];Object.defineProperties(P,[{get:function(){return C._wrapS},set:function(j){return C.wrapS=j}},{get:function(){return C._wrapT},set:function(j){return C.wrapT=j}}]),this._wrapVector=P;var R=[this._shape[0],this._shape[1]];Object.defineProperties(R,[{get:function(){return C._shape[0]},set:function(j){return C.width=j}},{get:function(){return C._shape[1]},set:function(j){return C.height=j}}]),this._shapeVector=R}var g=d.prototype;function v(_,f){return _.length===3?f[2]===1&&f[1]===_[0]*_[2]&&f[0]===_[2]:f[0]===1&&f[1]===_[0]}function y(_){var f=_.createTexture();return _.bindTexture(_.TEXTURE_2D,f),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),f}function m(_,f,S,w,E){var O=_.getParameter(_.MAX_TEXTURE_SIZE);if(f<0||f>O||S<0||S>O)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=y(_);return _.texImage2D(_.TEXTURE_2D,0,w,f,S,0,w,E,null),new d(_,C,f,S,w,E)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&i.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&i.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var f=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),f!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(u.indexOf(_[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return x(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_}}}),g.bind=function(_){var f=this.gl;return _!==void 0&&f.activeTexture(f.TEXTURE0+(0|_)),f.bindTexture(f.TEXTURE_2D,this.handle),_!==void 0?0|_:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),f=0;_>0;++f,_>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},g.setPixels=function(_,f,S,w){var E=this.gl;this.bind(),Array.isArray(f)?(w=S,S=0|f[1],f=0|f[0]):(f=f||0,S=S||0),w=w||0;var O=p(_)?_:_.raw;if(O)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,f,S,this.format,this.type,O);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||f+_.shape[1]>this._shape[1]>>>w||S+_.shape[0]>this._shape[0]>>>w||f<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(C,P,R,j,D,N,W,F){var V=F.dtype,U=F.shape.slice();if(U.length<2||U.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,J=0,X=v(U,F.stride.slice());if(V==="float32"?te=C.FLOAT:V==="float64"?(te=C.FLOAT,X=!1,V="float32"):V==="uint8"?te=C.UNSIGNED_BYTE:(te=C.UNSIGNED_BYTE,X=!1,V="uint8"),U.length===2)J=C.LUMINANCE,U=[U[0],U[1],1],F=a(F.data,U,[F.stride[0],F.stride[1],1],F.offset);else{if(U.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(U[2]===1)J=C.ALPHA;else if(U[2]===2)J=C.LUMINANCE_ALPHA;else if(U[2]===3)J=C.RGB;else{if(U[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");J=C.RGBA}U[2]}if(J!==C.LUMINANCE&&J!==C.ALPHA||D!==C.LUMINANCE&&D!==C.ALPHA||(J=D),J!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var K=F.size,Q=W.indexOf(j)<0;if(Q&&W.push(j),te===N&&X)F.offset===0&&F.data.length===K?Q?C.texImage2D(C.TEXTURE_2D,j,D,U[0],U[1],0,D,N,F.data):C.texSubImage2D(C.TEXTURE_2D,j,P,R,U[0],U[1],D,N,F.data):Q?C.texImage2D(C.TEXTURE_2D,j,D,U[0],U[1],0,D,N,F.data.subarray(F.offset,F.offset+K)):C.texSubImage2D(C.TEXTURE_2D,j,P,R,U[0],U[1],D,N,F.data.subarray(F.offset,F.offset+K));else{var Z;Z=N===C.FLOAT?r.mallocFloat32(K):r.mallocUint8(K);var re=a(Z,U,[U[2],U[2]*U[0],1]);te===C.FLOAT&&N===C.UNSIGNED_BYTE?c(re,F):n.assign(re,F),Q?C.texImage2D(C.TEXTURE_2D,j,D,U[0],U[1],0,D,N,Z.subarray(0,K)):C.texSubImage2D(C.TEXTURE_2D,j,P,R,U[0],U[1],D,N,Z.subarray(0,K)),N===C.FLOAT?r.freeFloat32(Z):r.freeUint8(Z)}})(E,f,S,w,this.format,this.type,this._mipLevels,_)}}},1433:function(h){h.exports=function(s,t,a){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var n=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(a){if(a.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<a.length;++r){var i=a[r];if(i.buffer){var l=i.buffer,u=i.size||4,p=i.type||s.FLOAT,c=!!i.normalized,x=i.stride||0,d=i.offset||0;l.bind(),s.enableVertexAttribArray(r),s.vertexAttribPointer(r,u,p,c,x,d)}else{if(typeof i=="number")s.vertexAttrib1f(r,i);else if(i.length===1)s.vertexAttrib1f(r,i[0]);else if(i.length===2)s.vertexAttrib2f(r,i[0],i[1]);else if(i.length===3)s.vertexAttrib3f(r,i[0],i[1],i[2]);else{if(i.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(r,i[0],i[1],i[2],i[3])}s.disableVertexAttribArray(r)}}for(;r<n;++r)s.disableVertexAttribArray(r)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),r=0;r<n;++r)s.disableVertexAttribArray(r)}},870:function(h,s,t){var a=t(1433);function n(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){a(this.gl,this._elements,this._attributes)},n.prototype.update=function(r,i,l){this._elements=i,this._attributes=r,this._elementsType=l||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(r,i,l){l=l||0;var u=this.gl;this._elements?u.drawElements(r,i,this._elementsType,l):u.drawArrays(r,l,i)},h.exports=function(r){return new n(r)}},7518:function(h,s,t){var a=t(1433);function n(i,l,u,p,c,x){this.location=i,this.dimension=l,this.a=u,this.b=p,this.c=c,this.d=x}function r(i,l,u){this.gl=i,this._ext=l,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=i.UNSIGNED_SHORT}n.prototype.bind=function(i){switch(this.dimension){case 1:i.vertexAttrib1f(this.location,this.a);break;case 2:i.vertexAttrib2f(this.location,this.a,this.b);break;case 3:i.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:i.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var i=0;i<this._attribs.length;++i)this._attribs[i].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(i,l,u){if(this.bind(),a(this.gl,l,i),this.unbind(),this._attribs.length=0,i)for(var p=0;p<i.length;++p){var c=i[p];typeof c=="number"?this._attribs.push(new n(p,1,c)):Array.isArray(c)&&this._attribs.push(new n(p,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!l,this._elementsType=u||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(i,l,u){u=u||0;var p=this.gl;this._useElements?p.drawElements(i,l,this._elementsType,u):p.drawArrays(i,u,l)},h.exports=function(i,l){return new r(i,l,l.createVertexArrayOES())}},8116:function(h,s,t){var a=t(7518),n=t(870);function r(i){this.bindVertexArrayOES=i.bindVertexArray.bind(i),this.createVertexArrayOES=i.createVertexArray.bind(i),this.deleteVertexArrayOES=i.deleteVertexArray.bind(i)}h.exports=function(i,l,u,p){var c,x=i.createVertexArray?new r(i):i.getExtension("OES_vertex_array_object");return(c=x?a(i,x):n(i)).update(l,u,p),c}},5632:function(h){h.exports=function(s,t,a){return s[0]=t[0]+a[0],s[1]=t[1]+a[1],s[2]=t[2]+a[2],s}},8192:function(h,s,t){h.exports=function(i,l){var u=a(i[0],i[1],i[2]),p=a(l[0],l[1],l[2]);n(u,u),n(p,p);var c=r(u,p);return c>1?0:Math.acos(c)};var a=t(2825),n=t(3536),r=t(244)},9226:function(h){h.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},3126:function(h){h.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},3990:function(h){h.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},1091:function(h){h.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},5911:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2],l=a[0],u=a[1],p=a[2];return s[0]=r*p-i*u,s[1]=i*l-n*p,s[2]=n*u-r*l,s}},5455:function(h,s,t){h.exports=t(7056)},7056:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return Math.sqrt(a*a+n*n+r*r)}},4008:function(h,s,t){h.exports=t(6690)},6690:function(h){h.exports=function(s,t,a){return s[0]=t[0]/a[0],s[1]=t[1]/a[1],s[2]=t[2]/a[2],s}},244:function(h){h.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},2613:function(h){h.exports=1e-6},9922:function(h,s,t){h.exports=function(n,r){var i=n[0],l=n[1],u=n[2],p=r[0],c=r[1],x=r[2];return Math.abs(i-p)<=a*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(l-c)<=a*Math.max(1,Math.abs(l),Math.abs(c))&&Math.abs(u-x)<=a*Math.max(1,Math.abs(u),Math.abs(x))};var a=t(2613)},9265:function(h){h.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},2681:function(h){h.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},5137:function(h,s,t){h.exports=function(n,r,i,l,u,p){var c,x;for(r||(r=3),i||(i=0),x=l?Math.min(l*r+i,n.length):n.length,c=i;c<x;c+=r)a[0]=n[c],a[1]=n[c+1],a[2]=n[c+2],u(a,a,p),n[c]=a[0],n[c+1]=a[1],n[c+2]=a[2];return n};var a=t(1091)()},2825:function(h){h.exports=function(s,t,a){var n=new Float32Array(3);return n[0]=s,n[1]=t,n[2]=a,n}},2931:function(h,s,t){h.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(h){h.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},868:function(h,s,t){h.exports=t(1387)},1387:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2];return Math.sqrt(t*t+a*a+n*n)}},6658:function(h){h.exports=function(s,t,a,n){var r=t[0],i=t[1],l=t[2];return s[0]=r+n*(a[0]-r),s[1]=i+n*(a[1]-i),s[2]=l+n*(a[2]-l),s}},7417:function(h){h.exports=function(s,t,a){return s[0]=Math.max(t[0],a[0]),s[1]=Math.max(t[1],a[1]),s[2]=Math.max(t[2],a[2]),s}},8107:function(h){h.exports=function(s,t,a){return s[0]=Math.min(t[0],a[0]),s[1]=Math.min(t[1],a[1]),s[2]=Math.min(t[2],a[2]),s}},4505:function(h,s,t){h.exports=t(5847)},5847:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a[0],s[1]=t[1]*a[1],s[2]=t[2]*a[2],s}},5093:function(h){h.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},3536:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],i=a*a+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i),s}},7636:function(h){h.exports=function(s,t){t=t||1;var a=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*t;return s[0]=Math.cos(a)*r,s[1]=Math.sin(a)*r,s[2]=n*t,s}},6894:function(h){h.exports=function(s,t,a,n){var r=a[1],i=a[2],l=t[1]-r,u=t[2]-i,p=Math.sin(n),c=Math.cos(n);return s[0]=t[0],s[1]=r+l*c-u*p,s[2]=i+l*p+u*c,s}},109:function(h){h.exports=function(s,t,a,n){var r=a[0],i=a[2],l=t[0]-r,u=t[2]-i,p=Math.sin(n),c=Math.cos(n);return s[0]=r+u*p+l*c,s[1]=t[1],s[2]=i+u*c-l*p,s}},8692:function(h){h.exports=function(s,t,a,n){var r=a[0],i=a[1],l=t[0]-r,u=t[1]-i,p=Math.sin(n),c=Math.cos(n);return s[0]=r+l*c-u*p,s[1]=i+l*p+u*c,s[2]=t[2],s}},2447:function(h){h.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},6621:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a,s}},8489:function(h){h.exports=function(s,t,a,n){return s[0]=t[0]+a[0]*n,s[1]=t[1]+a[1]*n,s[2]=t[2]+a[2]*n,s}},1463:function(h){h.exports=function(s,t,a,n){return s[0]=t,s[1]=a,s[2]=n,s}},6141:function(h,s,t){h.exports=t(2953)},5486:function(h,s,t){h.exports=t(3066)},2953:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return a*a+n*n+r*r}},3066:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2];return t*t+a*a+n*n}},2229:function(h,s,t){h.exports=t(6843)},6843:function(h){h.exports=function(s,t,a){return s[0]=t[0]-a[0],s[1]=t[1]-a[1],s[2]=t[2]-a[2],s}},492:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2];return s[0]=n*a[0]+r*a[3]+i*a[6],s[1]=n*a[1]+r*a[4]+i*a[7],s[2]=n*a[2]+r*a[5]+i*a[8],s}},5673:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2],l=a[3]*n+a[7]*r+a[11]*i+a[15];return l=l||1,s[0]=(a[0]*n+a[4]*r+a[8]*i+a[12])/l,s[1]=(a[1]*n+a[5]*r+a[9]*i+a[13])/l,s[2]=(a[2]*n+a[6]*r+a[10]*i+a[14])/l,s}},264:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2],l=a[0],u=a[1],p=a[2],c=a[3],x=c*n+u*i-p*r,d=c*r+p*n-l*i,g=c*i+l*r-u*n,v=-l*n-u*r-p*i;return s[0]=x*c+v*-l+d*-p-g*-u,s[1]=d*c+v*-u+g*-l-x*-p,s[2]=g*c+v*-p+x*-u-d*-l,s}},4361:function(h){h.exports=function(s,t,a){return s[0]=t[0]+a[0],s[1]=t[1]+a[1],s[2]=t[2]+a[2],s[3]=t[3]+a[3],s}},2335:function(h){h.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},2933:function(h){h.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},7536:function(h){h.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},4691:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],i=t[3]-s[3];return Math.sqrt(a*a+n*n+r*r+i*i)}},1373:function(h){h.exports=function(s,t,a){return s[0]=t[0]/a[0],s[1]=t[1]/a[1],s[2]=t[2]/a[2],s[3]=t[3]/a[3],s}},3750:function(h){h.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},3390:function(h){h.exports=function(s,t,a,n){var r=new Float32Array(4);return r[0]=s,r[1]=t,r[2]=a,r[3]=n,r}},9970:function(h,s,t){h.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(h){h.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},6808:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2],r=s[3];return Math.sqrt(t*t+a*a+n*n+r*r)}},2573:function(h){h.exports=function(s,t,a,n){var r=t[0],i=t[1],l=t[2],u=t[3];return s[0]=r+n*(a[0]-r),s[1]=i+n*(a[1]-i),s[2]=l+n*(a[2]-l),s[3]=u+n*(a[3]-u),s}},160:function(h){h.exports=function(s,t,a){return s[0]=Math.max(t[0],a[0]),s[1]=Math.max(t[1],a[1]),s[2]=Math.max(t[2],a[2]),s[3]=Math.max(t[3],a[3]),s}},2334:function(h){h.exports=function(s,t,a){return s[0]=Math.min(t[0],a[0]),s[1]=Math.min(t[1],a[1]),s[2]=Math.min(t[2],a[2]),s[3]=Math.min(t[3],a[3]),s}},3576:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a[0],s[1]=t[1]*a[1],s[2]=t[2]*a[2],s[3]=t[3]*a[3],s}},1498:function(h){h.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},5177:function(h){h.exports=function(s,t){var a=t[0],n=t[1],r=t[2],i=t[3],l=a*a+n*n+r*r+i*i;return l>0&&(l=1/Math.sqrt(l),s[0]=a*l,s[1]=n*l,s[2]=r*l,s[3]=i*l),s}},9131:function(h,s,t){var a=t(5177),n=t(9288);h.exports=function(r,i){return i=i||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),a(r,r),n(r,r,i),r}},9288:function(h){h.exports=function(s,t,a){return s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a,s[3]=t[3]*a,s}},4844:function(h){h.exports=function(s,t,a,n){return s[0]=t[0]+a[0]*n,s[1]=t[1]+a[1]*n,s[2]=t[2]+a[2]*n,s[3]=t[3]+a[3]*n,s}},4578:function(h){h.exports=function(s,t,a,n,r){return s[0]=t,s[1]=a,s[2]=n,s[3]=r,s}},7960:function(h){h.exports=function(s,t){var a=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],i=t[3]-s[3];return a*a+n*n+r*r+i*i}},483:function(h){h.exports=function(s){var t=s[0],a=s[1],n=s[2],r=s[3];return t*t+a*a+n*n+r*r}},6860:function(h){h.exports=function(s,t,a){return s[0]=t[0]-a[0],s[1]=t[1]-a[1],s[2]=t[2]-a[2],s[3]=t[3]-a[3],s}},5352:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2],l=t[3];return s[0]=a[0]*n+a[4]*r+a[8]*i+a[12]*l,s[1]=a[1]*n+a[5]*r+a[9]*i+a[13]*l,s[2]=a[2]*n+a[6]*r+a[10]*i+a[14]*l,s[3]=a[3]*n+a[7]*r+a[11]*i+a[15]*l,s}},4041:function(h){h.exports=function(s,t,a){var n=t[0],r=t[1],i=t[2],l=a[0],u=a[1],p=a[2],c=a[3],x=c*n+u*i-p*r,d=c*r+p*n-l*i,g=c*i+l*r-u*n,v=-l*n-u*r-p*i;return s[0]=x*c+v*-l+d*-p-g*-u,s[1]=d*c+v*-u+g*-l-x*-p,s[2]=g*c+v*-p+x*-u-d*-l,s[3]=t[3],s}},1848:function(h,s,t){var a=t(4905),n=t(6468);h.exports=function(r){for(var i=Array.isArray(r)?r:a(r),l=0;l<i.length;l++){var u=i[l];if(u.type==="preprocessor"){var p=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var c=p[1],x=p[2];return(c?n(x):x).trim()}}}}},5874:function(h,s,t){h.exports=function(C){var P,R,j,D=0,N=0,W=u,F=[],V=[],U=1,te=0,J=0,X=!1,K=!1,Q="",Z=r,re=a;(C=C||{}).version==="300 es"&&(Z=l,re=i);var oe={},ae={};for(D=0;D<Z.length;D++)oe[Z[D]]=!0;for(D=0;D<re.length;D++)ae[re[D]]=!0;return function(fe){return V=[],fe!==null?function(Ee){var Te;for(D=0,Ee.toString&&(Ee=Ee.toString()),Q+=Ee.replace(/\r\n/g,`
`),j=Q.length;P=Q[D],D<j;){switch(Te=D,W){case c:D=be();break;case x:case d:D=xe();break;case g:D=ve();break;case v:D=_e();break;case E:D=we();break;case y:D=se();break;case p:D=ie();break;case S:D=pe();break;case u:D=he()}Te!==D&&(Q[Te]===`
`?(te=0,++U):++te)}return N+=D,Q=Q.slice(D),V}(fe):(F.length&&ce(F.join("")),W=w,ce("(eof)"),V)};function ce(fe){fe.length&&V.push({type:O[W],data:fe,position:J,line:U,column:te})}function he(){return F=F.length?[]:F,R==="/"&&P==="*"?(J=N+D-1,W=c,R=P,D+1):R==="/"&&P==="/"?(J=N+D-1,W=x,R=P,D+1):P==="#"?(W=d,J=N+D,D):/\s/.test(P)?(W=S,J=N+D,D):(X=/\d/.test(P),K=/[^\w_]/.test(P),J=N+D,W=X?v:K?g:p,D)}function pe(){return/[^\s]/g.test(P)?(ce(F.join("")),W=u,D):(F.push(P),R=P,D+1)}function xe(){return P!=="\r"&&P!==`
`||R==="\\"?(F.push(P),R=P,D+1):(ce(F.join("")),W=u,D)}function be(){return P==="/"&&R==="*"?(F.push(P),ce(F.join("")),W=u,D+1):(F.push(P),R=P,D+1)}function ve(){if(R==="."&&/\d/.test(P))return W=y,D;if(R==="/"&&P==="*")return W=c,D;if(R==="/"&&P==="/")return W=x,D;if(P==="."&&F.length){for(;ge(F););return W=y,D}if(P===";"||P===")"||P==="("){if(F.length)for(;ge(F););return ce(P),W=u,D+1}var fe=F.length===2&&P!=="=";if(/[\w_\d\s]/.test(P)||fe){for(;ge(F););return W=u,D}return F.push(P),R=P,D+1}function ge(fe){for(var Ee,Te,Ae=0;;){if(Ee=n.indexOf(fe.slice(0,fe.length+Ae).join("")),Te=n[Ee],Ee===-1){if(Ae--+fe.length>0)continue;Te=fe.slice(0,1).join("")}return ce(Te),J+=Te.length,(F=F.slice(Te.length)).length}}function we(){return/[^a-fA-F0-9]/.test(P)?(ce(F.join("")),W=u,D):(F.push(P),R=P,D+1)}function _e(){return P==="."||/[eE]/.test(P)?(F.push(P),W=y,R=P,D+1):P==="x"&&F.length===1&&F[0]==="0"?(W=E,F.push(P),R=P,D+1):/[^\d]/.test(P)?(ce(F.join("")),W=u,D):(F.push(P),R=P,D+1)}function se(){return P==="f"&&(F.push(P),R=P,D+=1),/[eE]/.test(P)?(F.push(P),R=P,D+1):(P!=="-"&&P!=="+"||!/[eE]/.test(R))&&/[^\d]/.test(P)?(ce(F.join("")),W=u,D):(F.push(P),R=P,D+1)}function ie(){if(/[^\d\w_]/.test(P)){var fe=F.join("");return W=ae[fe]?f:oe[fe]?_:m,ce(F.join("")),W=u,D}return F.push(P),R=P,D+1}};var a=t(620),n=t(7827),r=t(6852),i=t(7932),l=t(3508),u=999,p=9999,c=0,x=1,d=2,g=3,v=4,y=5,m=6,_=7,f=8,S=9,w=10,E=11,O=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(h,s,t){var a=t(6852);a=a.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),h.exports=a.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(h){h.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(h,s,t){var a=t(620);h.exports=a.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(h){h.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(h){h.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(h,s,t){var a=t(5874);h.exports=function(n,r){var i=a(r),l=[];return(l=l.concat(i(n))).concat(i(null))}},3236:function(h){h.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),a=[],n=0;n<s.length-1;n++)a.push(s[n],t[n]||"");return a.push(s[n]),a.join("")}},7520:function(h,s,t){var a=t(9507);h.exports=a&&function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}()},3778:function(h,s){s.read=function(t,a,n,r,i){var l,u,p=8*i-r-1,c=(1<<p)-1,x=c>>1,d=-7,g=n?i-1:0,v=n?-1:1,y=t[a+g];for(g+=v,l=y&(1<<-d)-1,y>>=-d,d+=p;d>0;l=256*l+t[a+g],g+=v,d-=8);for(u=l&(1<<-d)-1,l>>=-d,d+=r;d>0;u=256*u+t[a+g],g+=v,d-=8);if(l===0)l=1-x;else{if(l===c)return u?NaN:1/0*(y?-1:1);u+=Math.pow(2,r),l-=x}return(y?-1:1)*u*Math.pow(2,l-r)},s.write=function(t,a,n,r,i,l){var u,p,c,x=8*l-i-1,d=(1<<x)-1,g=d>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:l-1,m=r?1:-1,_=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(p=isNaN(a)?1:0,u=d):(u=Math.floor(Math.log(a)/Math.LN2),a*(c=Math.pow(2,-u))<1&&(u--,c*=2),(a+=u+g>=1?v/c:v*Math.pow(2,1-g))*c>=2&&(u++,c/=2),u+g>=d?(p=0,u=d):u+g>=1?(p=(a*c-1)*Math.pow(2,i),u+=g):(p=a*Math.pow(2,g-1)*Math.pow(2,i),u=0));i>=8;t[n+y]=255&p,y+=m,p/=256,i-=8);for(u=u<<i|p,x+=i;x>0;t[n+y]=255&u,y+=m,u/=256,x-=8);t[n+y-m]|=128*_}},8954:function(h,s,t){h.exports=function(x,d){var g=x.length;if(g===0)throw new Error("Must have at least d+1 points");var v=x[0].length;if(g<=v)throw new Error("Must input at least d+1 points");var y=x.slice(0,v+1),m=a.apply(void 0,y);if(m===0)throw new Error("Input not in general position");for(var _=new Array(v+1),f=0;f<=v;++f)_[f]=f;m<0&&(_[0]=1,_[1]=0);var S=new r(_,new Array(v+1),!1),w=S.adjacent,E=new Array(v+2);for(f=0;f<=v;++f){for(var O=_.slice(),C=0;C<=v;++C)C===f&&(O[C]=-1);var P=O[0];O[0]=O[1],O[1]=P;var R=new r(O,new Array(v+1),!0);w[f]=R,E[f]=R}for(E[v+1]=S,f=0;f<=v;++f){O=w[f].vertices;var j=w[f].adjacent;for(C=0;C<=v;++C){var D=O[C];if(D<0)j[C]=S;else for(var N=0;N<=v;++N)w[N].vertices.indexOf(D)<0&&(j[C]=w[N])}}var W=new p(v,y,E),F=!!d;for(f=v+1;f<g;++f)W.insert(x[f],F);return W.boundary()};var a=t(3250),n=t(6803).Fw;function r(x,d,g){this.vertices=x,this.adjacent=d,this.boundary=g,this.lastVisited=-1}function i(x,d,g){this.vertices=x,this.cell=d,this.index=g}function l(x,d){return n(x.vertices,d.vertices)}r.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var d=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=d};var u=[];function p(x,d,g){this.dimension=x,this.vertices=d,this.simplices=g,this.interior=g.filter(function(_){return!_.boundary}),this.tuple=new Array(x+1);for(var v=0;v<=x;++v)this.tuple[v]=this.vertices[v];var y,m=u[x];m||(m=u[x]=((y=a[x+1])||(y=a),function(_){return function(){var f=this.tuple;return _.apply(this,f)}}(y))),this.orient=m}var c=p.prototype;c.handleBoundaryDegeneracy=function(x,d){var g=this.dimension,v=this.vertices.length-1,y=this.tuple,m=this.vertices,_=[x];for(x.lastVisited=-v;_.length>0;)for(var f=(x=_.pop()).adjacent,S=0;S<=g;++S){var w=f[S];if(w.boundary&&!(w.lastVisited<=-v)){for(var E=w.vertices,O=0;O<=g;++O){var C=E[O];y[O]=C<0?d:m[C]}var P=this.orient();if(P>0)return w;w.lastVisited=-v,P===0&&_.push(w)}}return null},c.walk=function(x,d){var g=this.vertices.length-1,v=this.dimension,y=this.vertices,m=this.tuple,_=d?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[_];e:for(;!f.boundary;){for(var S=f.vertices,w=f.adjacent,E=0;E<=v;++E)m[E]=y[S[E]];for(f.lastVisited=g,E=0;E<=v;++E){var O=w[E];if(!(O.lastVisited>=g)){var C=m[E];m[E]=x;var P=this.orient();if(m[E]=C,P<0){f=O;continue e}O.boundary?O.lastVisited=-g:O.lastVisited=g}}return}return f},c.addPeaks=function(x,d){var g=this.vertices.length-1,v=this.dimension,y=this.vertices,m=this.tuple,_=this.interior,f=this.simplices,S=[d];d.lastVisited=g,d.vertices[d.vertices.indexOf(-1)]=g,d.boundary=!1,_.push(d);for(var w=[];S.length>0;){var E=(d=S.pop()).vertices,O=d.adjacent,C=E.indexOf(g);if(!(C<0)){for(var P=0;P<=v;++P)if(P!==C){var R=O[P];if(R.boundary&&!(R.lastVisited>=g)){var j=R.vertices;if(R.lastVisited!==-g){for(var D=0,N=0;N<=v;++N)j[N]<0?(D=N,m[N]=x):m[N]=y[j[N]];if(this.orient()>0){j[D]=g,R.boundary=!1,_.push(R),S.push(R),R.lastVisited=g;continue}R.lastVisited=-g}var W=R.adjacent,F=E.slice(),V=O.slice(),U=new r(F,V,!0);f.push(U);var te=W.indexOf(d);if(!(te<0))for(W[te]=U,V[C]=R,F[P]=-1,V[P]=d,O[P]=U,U.flip(),N=0;N<=v;++N){var J=F[N];if(!(J<0||J===g)){for(var X=new Array(v-1),K=0,Q=0;Q<=v;++Q){var Z=F[Q];Z<0||Q===N||(X[K++]=Z)}w.push(new i(X,U,N))}}}}}}for(w.sort(l),P=0;P+1<w.length;P+=2){var re=w[P],oe=w[P+1],ae=re.index,ce=oe.index;ae<0||ce<0||(re.cell.adjacent[re.index]=oe.cell,oe.cell.adjacent[oe.index]=re.cell)}},c.insert=function(x,d){var g=this.vertices;g.push(x);var v=this.walk(x,d);if(v){for(var y=this.dimension,m=this.tuple,_=0;_<=y;++_){var f=v.vertices[_];m[_]=f<0?x:g[f]}var S=this.orient(m);S<0||(S!==0||(v=this.handleBoundaryDegeneracy(v,x)))&&this.addPeaks(x,v)}},c.boundary=function(){for(var x=this.dimension,d=[],g=this.simplices,v=g.length,y=0;y<v;++y){var m=g[y];if(m.boundary){for(var _=new Array(x),f=m.vertices,S=0,w=0,E=0;E<=x;++E)f[E]>=0?_[S++]=f[E]:w=1&E;if(w===(1&x)){var O=_[0];_[0]=_[1],_[1]=O}d.push(_)}}return d}},3352:function(h,s,t){var a=t(2478);function n(S,w,E,O,C){this.mid=S,this.left=w,this.right=E,this.leftPoints=O,this.rightPoints=C,this.count=(w?w.count:0)+(E?E.count:0)+O.length}h.exports=function(S){return S&&S.length!==0?new _(m(S)):new _(null)};var r=n.prototype;function i(S,w){S.mid=w.mid,S.left=w.left,S.right=w.right,S.leftPoints=w.leftPoints,S.rightPoints=w.rightPoints,S.count=w.count}function l(S,w){var E=m(w);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,w){var E=S.intervals([]);E.push(w),l(S,E)}function p(S,w){var E=S.intervals([]),O=E.indexOf(w);return O<0?0:(E.splice(O,1),l(S,E),1)}function c(S,w,E){for(var O=0;O<S.length&&S[O][0]<=w;++O){var C=E(S[O]);if(C)return C}}function x(S,w,E){for(var O=S.length-1;O>=0&&S[O][1]>=w;--O){var C=E(S[O]);if(C)return C}}function d(S,w){for(var E=0;E<S.length;++E){var O=w(S[E]);if(O)return O}}function g(S,w){return S-w}function v(S,w){return S[0]-w[0]||S[1]-w[1]}function y(S,w){return S[1]-w[1]||S[0]-w[0]}function m(S){if(S.length===0)return null;for(var w=[],E=0;E<S.length;++E)w.push(S[E][0],S[E][1]);w.sort(g);var O=w[w.length>>1],C=[],P=[],R=[];for(E=0;E<S.length;++E){var j=S[E];j[1]<O?C.push(j):O<j[0]?P.push(j):R.push(j)}var D=R,N=R.slice();return D.sort(v),N.sort(y),new n(O,m(C),m(P),D,N)}function _(S){this.root=S}r.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},r.insert=function(S){var w=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?u(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?u(this,S):this.right.insert(S):this.right=m([S]);else{var E=a.ge(this.leftPoints,S,v),O=a.ge(this.rightPoints,S,y);this.leftPoints.splice(E,0,S),this.rightPoints.splice(O,0,S)}},r.remove=function(S){var w=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?p(this,S):(P=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?p(this,S):(P=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,O=this.left;O.right;)E=O,O=O.right;if(E===this)O.right=this.right;else{var C=this.left,P=this.right;E.count-=O.count,E.right=O.left,O.left=C,O.right=P}i(this,O),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return 1}for(C=a.ge(this.leftPoints,S,v);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){for(this.count-=1,this.leftPoints.splice(C,1),P=a.ge(this.rightPoints,S,y);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1}return 0},r.queryPoint=function(S,w){return S<this.mid?this.left&&(E=this.left.queryPoint(S,w))?E:c(this.leftPoints,S,w):S>this.mid?this.right&&(E=this.right.queryPoint(S,w))?E:x(this.rightPoints,S,w):d(this.leftPoints,w);var E},r.queryInterval=function(S,w,E){var O;return S<this.mid&&this.left&&(O=this.left.queryInterval(S,w,E))||w>this.mid&&this.right&&(O=this.right.queryInterval(S,w,E))?O:w<this.mid?c(this.leftPoints,w,E):S>this.mid?x(this.rightPoints,S,E):d(this.leftPoints,E)};var f=_.prototype;f.insert=function(S){this.root?this.root.insert(S):this.root=new n(S[0],null,null,[S],[S])},f.remove=function(S){if(this.root){var w=this.root.remove(S);return w===2&&(this.root=null),w!==0}return!1},f.queryPoint=function(S,w){if(this.root)return this.root.queryPoint(S,w)},f.queryInterval=function(S,w,E){if(S<=w&&this.root)return this.root.queryInterval(S,w,E)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(h){h.exports=function(s){for(var t=new Array(s),a=0;a<s;++a)t[a]=a;return t}},9507:function(h){h.exports=!0},7163:function(h){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}h.exports=function(t){return t!=null&&(s(t)||function(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&s(a.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(h){h.exports=function(s){for(var t,a=s.length,n=0;n<a;n++)if(((t=s.charCodeAt(n))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(h){h.exports=function(s,t,a){return s*(1-a)+t*a}},2652:function(h,s,t){var a=t(4335),n=t(6864),r=t(1903),i=t(9921),l=t(7608),u=t(5665),p={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},c=n(),x=n(),d=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];function y(m,_,f,S,w){m[0]=_[0]*S+f[0]*w,m[1]=_[1]*S+f[1]*w,m[2]=_[2]*S+f[2]*w}h.exports=function(m,_,f,S,w,E){if(_||(_=[0,0,0]),f||(f=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!a(c,m)||(r(x,c),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(i(x)<1e-8)))return!1;var O,C,P,R,j,D,N,W=c[3],F=c[7],V=c[11],U=c[12],te=c[13],J=c[14],X=c[15];if(W!==0||F!==0||V!==0){if(d[0]=W,d[1]=F,d[2]=V,d[3]=X,!l(x,x))return!1;u(x,x),O=w,P=x,R=(C=d)[0],j=C[1],D=C[2],N=C[3],O[0]=P[0]*R+P[4]*j+P[8]*D+P[12]*N,O[1]=P[1]*R+P[5]*j+P[9]*D+P[13]*N,O[2]=P[2]*R+P[6]*j+P[10]*D+P[14]*N,O[3]=P[3]*R+P[7]*j+P[11]*D+P[15]*N}else w[0]=w[1]=w[2]=0,w[3]=1;if(_[0]=U,_[1]=te,_[2]=J,function(Q,Z){Q[0][0]=Z[0],Q[0][1]=Z[1],Q[0][2]=Z[2],Q[1][0]=Z[4],Q[1][1]=Z[5],Q[1][2]=Z[6],Q[2][0]=Z[8],Q[2][1]=Z[9],Q[2][2]=Z[10]}(g,c),f[0]=p.length(g[0]),p.normalize(g[0],g[0]),S[0]=p.dot(g[0],g[1]),y(g[1],g[1],g[0],1,-S[0]),f[1]=p.length(g[1]),p.normalize(g[1],g[1]),S[0]/=f[1],S[1]=p.dot(g[0],g[2]),y(g[2],g[2],g[0],1,-S[1]),S[2]=p.dot(g[1],g[2]),y(g[2],g[2],g[1],1,-S[2]),f[2]=p.length(g[2]),p.normalize(g[2],g[2]),S[1]/=f[2],S[2]/=f[2],p.cross(v,g[1],g[2]),p.dot(g[0],v)<0)for(var K=0;K<3;K++)f[K]*=-1,g[K][0]*=-1,g[K][1]*=-1,g[K][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4335:function(h){h.exports=function(s,t){var a=t[15];if(a===0)return!1;for(var n=1/a,r=0;r<16;r++)s[r]=t[r]*n;return!0}},7442:function(h,s,t){var a=t(6658),n=t(7182),r=t(2652),i=t(9921),l=t(8648),u=x(),p=x(),c=x();function x(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(g){return[g||0,g||0,g||0]}h.exports=function(g,v,y,m){if(i(v)===0||i(y)===0)return!1;var _=r(v,u.translate,u.scale,u.skew,u.perspective,u.quaternion),f=r(y,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!(!_||!f||(a(c.translate,u.translate,p.translate,m),a(c.skew,u.skew,p.skew,m),a(c.scale,u.scale,p.scale,m),a(c.perspective,u.perspective,p.perspective,m),l(c.quaternion,u.quaternion,p.quaternion,m),n(g,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},7182:function(h,s,t){var a={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},n=(a.create(),a.create());h.exports=function(r,i,l,u,p,c){return a.identity(r),a.fromRotationTranslation(r,c,i),r[3]=p[0],r[7]=p[1],r[11]=p[2],r[15]=p[3],a.identity(n),u[2]!==0&&(n[9]=u[2],a.multiply(r,r,n)),u[1]!==0&&(n[9]=0,n[8]=u[1],a.multiply(r,r,n)),u[0]!==0&&(n[8]=0,n[4]=u[0],a.multiply(r,r,n)),a.scale(r,r,l),r}},4192:function(h,s,t){var a=t(2478),n=t(7442),r=t(7608),i=t(5567),l=t(2408),u=t(7089),p=t(6582),c=t(7656),x=(t(2504),t(3536)),d=[0,0,0];function g(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}h.exports=function(m){return new g((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var v=g.prototype;v.recalcMatrix=function(m){var _=this._time,f=a.le(_,m),S=this.computedMatrix;if(!(f<0)){var w=this._components;if(f===_.length-1)for(var E=16*f,O=0;O<16;++O)S[O]=w[E++];else{var C=_[f+1]-_[f],P=(E=16*f,this.prevMatrix),R=!0;for(O=0;O<16;++O)P[O]=w[E++];var j=this.nextMatrix;for(O=0;O<16;++O)j[O]=w[E++],R=R&&P[O]===j[O];if(C<1e-6||R)for(O=0;O<16;++O)S[O]=P[O];else n(S,P,j,(m-_[f])/C)}var D=this.computedUp;D[0]=S[1],D[1]=S[5],D[2]=S[9],x(D,D);var N=this.computedInverse;r(N,S);var W=this.computedEye,F=N[15];W[0]=N[12]/F,W[1]=N[13]/F,W[2]=N[14]/F;var V=this.computedCenter,U=Math.exp(this.computedRadius[0]);for(O=0;O<3;++O)V[O]=W[O]-S[2+4*O]*U}},v.idle=function(m){if(!(m<this.lastT())){for(var _=this._components,f=_.length-16,S=0;S<16;++S)_.push(_[f++]);this._time.push(m)}},v.flush=function(m){var _=a.gt(this._time,m)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(m,_,f,S){this.recalcMatrix(m),_=_||this.computedEye,f=f||d,S=S||this.computedUp,this.setMatrix(m,p(this.computedMatrix,_,f,S));for(var w=0,E=0;E<3;++E)w+=Math.pow(f[E]-_[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},v.rotate=function(m,_,f,S){this.recalcMatrix(m);var w=this.computedInverse;_&&l(w,w,_),f&&i(w,w,f),S&&u(w,w,S),this.setMatrix(m,r(this.computedMatrix,w))};var y=[0,0,0];v.pan=function(m,_,f,S){y[0]=-(_||0),y[1]=-(f||0),y[2]=-(S||0),this.recalcMatrix(m);var w=this.computedInverse;c(w,w,y),this.setMatrix(m,r(w,w))},v.translate=function(m,_,f,S){y[0]=_||0,y[1]=f||0,y[2]=S||0,this.recalcMatrix(m);var w=this.computedMatrix;c(w,w,y),this.setMatrix(m,w)},v.setMatrix=function(m,_){if(!(m<this.lastT())){this._time.push(m);for(var f=0;f<16;++f)this._components.push(_[f])}},v.setDistance=function(m,_){this.computedRadius[0]=_},v.setDistanceLimits=function(m,_){var f=this._limits;f[0]=m,f[1]=_},v.getDistanceLimits=function(m){var _=this._limits;return m?(m[0]=_[0],m[1]=_[1],m):_}},3090:function(h,s,t){h.exports=function(n){var r=n.length;if(r<3){for(var i=new Array(r),l=0;l<r;++l)i[l]=l;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:i}var u=new Array(r);for(l=0;l<r;++l)u[l]=l;u.sort(function(_,f){return n[_][0]-n[f][0]||n[_][1]-n[f][1]});var p=[u[0],u[1]],c=[u[0],u[1]];for(l=2;l<r;++l){for(var x=u[l],d=n[x],g=p.length;g>1&&a(n[p[g-2]],n[p[g-1]],d)<=0;)g-=1,p.pop();for(p.push(x),g=c.length;g>1&&a(n[c[g-2]],n[c[g-1]],d)>=0;)g-=1,c.pop();c.push(x)}i=new Array(c.length+p.length-2);for(var v=0,y=(l=0,p.length);l<y;++l)i[v++]=p[l];for(var m=c.length-2;m>0;--m)i[v++]=c[m];return i};var a=t(3250)[3]},351:function(h,s,t){h.exports=function(n,r){r||(r=n,n=window);var i=0,l=0,u=0,p={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function x(E){var O=!1;return"altKey"in E&&(O=O||E.altKey!==p.alt,p.alt=!!E.altKey),"shiftKey"in E&&(O=O||E.shiftKey!==p.shift,p.shift=!!E.shiftKey),"ctrlKey"in E&&(O=O||E.ctrlKey!==p.control,p.control=!!E.ctrlKey),"metaKey"in E&&(O=O||E.metaKey!==p.meta,p.meta=!!E.metaKey),O}function d(E,O){var C=a.x(O),P=a.y(O);"buttons"in O&&(E=0|O.buttons),(E!==i||C!==l||P!==u||x(O))&&(i=0|E,l=C||0,u=P||0,r&&r(i,l,u,p))}function g(E){d(0,E)}function v(){(i||l||u||p.shift||p.alt||p.meta||p.control)&&(l=u=0,i=0,p.shift=p.alt=p.control=p.meta=!1,r&&r(0,0,0,p))}function y(E){x(E)&&r&&r(i,l,u,p)}function m(E){a.buttons(E)===0?d(0,E):d(i,E)}function _(E){d(i|a.buttons(E),E)}function f(E){d(i&~a.buttons(E),E)}function S(){c||(c=!0,n.addEventListener("mousemove",m),n.addEventListener("mousedown",_),n.addEventListener("mouseup",f),n.addEventListener("mouseleave",g),n.addEventListener("mouseenter",g),n.addEventListener("mouseout",g),n.addEventListener("mouseover",g),n.addEventListener("blur",v),n.addEventListener("keyup",y),n.addEventListener("keydown",y),n.addEventListener("keypress",y),n!==window&&(window.addEventListener("blur",v),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}S();var w={element:n};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,n.removeEventListener("mousemove",m),n.removeEventListener("mousedown",_),n.removeEventListener("mouseup",f),n.removeEventListener("mouseleave",g),n.removeEventListener("mouseenter",g),n.removeEventListener("mouseout",g),n.removeEventListener("mouseover",g),n.removeEventListener("blur",v),n.removeEventListener("keyup",y),n.removeEventListener("keydown",y),n.removeEventListener("keypress",y),n!==window&&(window.removeEventListener("blur",v),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),w};var a=t(4687)},24:function(h){var s={left:0,top:0};h.exports=function(t,a,n){a=a||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r,i=t.clientX||0,l=t.clientY||0,u=(r=a)===window||r===document||r===document.body?s:r.getBoundingClientRect();return n[0]=i-u.left,n[1]=l-u.top,n}},4687:function(h,s){function t(a){return a.target||a.srcElement||window}s.buttons=function(a){if(typeof a=="object"){if("buttons"in a)return a.buttons;if("which"in a){if((n=a.which)===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in a){var n;if((n=a.button)===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0},s.element=t,s.x=function(a){if(typeof a=="object"){if("offsetX"in a)return a.offsetX;var n=t(a).getBoundingClientRect();return a.clientX-n.left}return 0},s.y=function(a){if(typeof a=="object"){if("offsetY"in a)return a.offsetY;var n=t(a).getBoundingClientRect();return a.clientY-n.top}return 0}},8512:function(h,s,t){var a=t(665);h.exports=function(n,r,i){typeof n=="function"&&(i=!!r,r=n,n=window);var l=a("ex",n),u=function(p){i&&p.preventDefault();var c=p.deltaX||0,x=p.deltaY||0,d=p.deltaZ||0,g=1;switch(p.deltaMode){case 1:g=l;break;case 2:g=window.innerHeight}if(x*=g,d*=g,(c*=g)||x||d)return r(c,x,d,p)};return n.addEventListener("wheel",u),u}},2640:function(h,s,t){var a=t(1888);h.exports=function(r){function i(d){throw new Error("ndarray-extract-contour: "+d)}typeof r!="object"&&i("Must specify arguments");var l=r.order;Array.isArray(l)||i("Must specify order");var u=r.arrayArguments||1;u<1&&i("Must have at least one array argument"),(r.scalarArguments||0)<0&&i("Scalar arg count must be > 0"),typeof r.vertex!="function"&&i("Must specify vertex creation function"),typeof r.cell!="function"&&i("Must specify cell creation function"),typeof r.phase!="function"&&i("Must specify phase function");for(var p=r.getters||[],c=new Array(u),x=0;x<u;++x)p.indexOf(x)>=0?c[x]=!0:c[x]=!1;return function(d,g,v,y,m,_){var f=[_,m].join(",");return(0,n[f])(d,g,v,a.mallocUint32,a.freeUint32)}(r.vertex,r.cell,r.phase,0,l,c)};var n={"false,0,1":function(r,i,l,u,p){return function(c,x,d,g){var v,y=0|c.shape[0],m=0|c.shape[1],_=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,O=0|-S,C=0,P=0|-w,R=0,j=-S-w|0,D=0,N=0|S,W=w-S*y|0,F=0,V=0,U=0,te=2*y|0,J=u(te),X=u(te),K=0,Q=0,Z=-1,re=-1,oe=0,ae=0|-y,ce=0|y,he=0,pe=-y-1|0,xe=y-1|0,be=0,ve=0,ge=0;for(F=0;F<y;++F)J[K++]=l(_[E],x,d,g),E+=N;if(E+=W,m>0){if(V=1,J[K++]=l(_[E],x,d,g),E+=N,y>0)for(F=1,v=_[E],Q=J[K]=l(v,x,d,g),oe=J[K+Z],he=J[K+ae],be=J[K+pe],Q===oe&&Q===he&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,oe,he,be,x,d,g),ve=X[K]=U++),K+=1,E+=N,F=2;F<y;++F)v=_[E],Q=J[K]=l(v,x,d,g),oe=J[K+Z],he=J[K+ae],be=J[K+pe],Q===oe&&Q===he&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,oe,he,be,x,d,g),ve=X[K]=U++,be!==oe&&i(X[K+Z],ve,D,C,be,oe,x,d,g)),K+=1,E+=N;for(E+=W,K=0,ge=Z,Z=re,re=ge,ge=ae,ae=ce,ce=ge,ge=pe,pe=xe,xe=ge,V=2;V<m;++V){if(J[K++]=l(_[E],x,d,g),E+=N,y>0)for(F=1,v=_[E],Q=J[K]=l(v,x,d,g),oe=J[K+Z],he=J[K+ae],be=J[K+pe],Q===oe&&Q===he&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,oe,he,be,x,d,g),ve=X[K]=U++,be!==he&&i(X[K+ae],ve,R,D,he,be,x,d,g)),K+=1,E+=N,F=2;F<y;++F)v=_[E],Q=J[K]=l(v,x,d,g),oe=J[K+Z],he=J[K+ae],be=J[K+pe],Q===oe&&Q===he&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,oe,he,be,x,d,g),ve=X[K]=U++,be!==he&&i(X[K+ae],ve,R,D,he,be,x,d,g),be!==oe&&i(X[K+Z],ve,D,C,be,oe,x,d,g)),K+=1,E+=N;1&V&&(K=0),ge=Z,Z=re,re=ge,ge=ae,ae=ce,ce=ge,ge=pe,pe=xe,xe=ge,E+=W}}p(X),p(J)}},"false,1,0":function(r,i,l,u,p){return function(c,x,d,g){var v,y=0|c.shape[0],m=0|c.shape[1],_=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,O=0|-S,C=0,P=0|-w,R=0,j=-S-w|0,D=0,N=0|w,W=S-w*m|0,F=0,V=0,U=0,te=2*m|0,J=u(te),X=u(te),K=0,Q=0,Z=-1,re=-1,oe=0,ae=0|-m,ce=0|m,he=0,pe=-m-1|0,xe=m-1|0,be=0,ve=0,ge=0;for(V=0;V<m;++V)J[K++]=l(_[E],x,d,g),E+=N;if(E+=W,y>0){if(F=1,J[K++]=l(_[E],x,d,g),E+=N,m>0)for(V=1,v=_[E],Q=J[K]=l(v,x,d,g),he=J[K+ae],oe=J[K+Z],be=J[K+pe],Q===he&&Q===oe&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,he,oe,be,x,d,g),ve=X[K]=U++),K+=1,E+=N,V=2;V<m;++V)v=_[E],Q=J[K]=l(v,x,d,g),he=J[K+ae],oe=J[K+Z],be=J[K+pe],Q===he&&Q===oe&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,he,oe,be,x,d,g),ve=X[K]=U++,be!==oe&&i(X[K+Z],ve,R,D,oe,be,x,d,g)),K+=1,E+=N;for(E+=W,K=0,ge=ae,ae=ce,ce=ge,ge=Z,Z=re,re=ge,ge=pe,pe=xe,xe=ge,F=2;F<y;++F){if(J[K++]=l(_[E],x,d,g),E+=N,m>0)for(V=1,v=_[E],Q=J[K]=l(v,x,d,g),he=J[K+ae],oe=J[K+Z],be=J[K+pe],Q===he&&Q===oe&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,he,oe,be,x,d,g),ve=X[K]=U++,be!==he&&i(X[K+ae],ve,D,C,be,he,x,d,g)),K+=1,E+=N,V=2;V<m;++V)v=_[E],Q=J[K]=l(v,x,d,g),he=J[K+ae],oe=J[K+Z],be=J[K+pe],Q===he&&Q===oe&&Q===be||(C=_[E+O],R=_[E+P],D=_[E+j],r(F,V,v,C,R,D,Q,he,oe,be,x,d,g),ve=X[K]=U++,be!==oe&&i(X[K+Z],ve,R,D,oe,be,x,d,g),be!==he&&i(X[K+ae],ve,D,C,be,he,x,d,g)),K+=1,E+=N;1&F&&(K=0),ge=ae,ae=ce,ce=ge,ge=Z,Z=re,re=ge,ge=pe,pe=xe,xe=ge,E+=W}}p(X),p(J)}}}},6199:function(h,s,t){var a=t(1338),n={zero:function(y,m,_,f){var S=y[0];f|=0;var w=0,E=_[0];for(w=0;w<S;++w)m[f]=0,f+=E},fdTemplate1:function(y,m,_,f,S,w,E){var O=y[0],C=_[0],P=-1*C,R=C;f|=0,E|=0;var j=0,D=C,N=w[0];for(j=0;j<O;++j)S[E]=.5*(m[f+P]-m[f+R]),f+=D,E+=N},fdTemplate2:function(y,m,_,f,S,w,E,O,C,P){var R=y[0],j=y[1],D=_[0],N=_[1],W=w[0],F=w[1],V=C[0],U=C[1],te=-1*D,J=D,X=-1*N,K=N;f|=0,E|=0,P|=0;var Q=0,Z=0,re=N,oe=D-j*N,ae=F,ce=W-j*F,he=U,pe=V-j*U;for(Z=0;Z<R;++Z){for(Q=0;Q<j;++Q)S[E]=.5*(m[f+te]-m[f+J]),O[P]=.5*(m[f+X]-m[f+K]),f+=re,E+=ae,P+=he;f+=oe,E+=ce,P+=pe}}},r={cdiff:function(y){var m={};return function(_,f,S){var w=_.dtype,E=_.order,O=f.dtype,C=f.order,P=S.dtype,R=S.order,j=[w,E.join(),O,C.join(),P,R.join()].join(),D=m[j];return D||(m[j]=D=y([w,E,O,C,P,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}},zero:function(y){var m={};return function(_){var f=_.dtype,S=_.order,w=[f,S.join()].join(),E=m[w];return E||(m[w]=E=y([f,S])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(y){var m={};return function(_,f){var S=_.dtype,w=_.order,E=f.dtype,O=f.order,C=[S,w.join(),E,O.join()].join(),P=m[C];return P||(m[C]=P=y([S,w,E,O])),P(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(y){var m={};return function(_,f,S){var w=_.dtype,E=_.order,O=f.dtype,C=f.order,P=S.dtype,R=S.order,j=[w,E.join(),O,C.join(),P,R.join()].join(),D=m[j];return D||(m[j]=D=y([w,E,O,C,P,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}}};function i(y){return(0,r[y.funcName])(l.bind(void 0,y))}function l(y){return n[y.funcName]}function u(y){return i({funcName:y.funcName})}var p={},c={},x=u({funcName:"cdiff"}),d=u({funcName:"zero"});function g(y){return y in p?p[y]:p[y]=u({funcName:"fdTemplate"+y})}function v(y,m,_,f){return function(S,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&f(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(w.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(w.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}h.exports=function(y,m,_){return Array.isArray(_)||(_=a(m.dimension,typeof _=="string"?_:"clamp")),m.size===0?y:m.dimension===0?(y.set(0),y):function(f){var S=f.join();if(C=c[S])return C;for(var w=f.length,E=[x,d],O=1;O<=w;++O)E.push(g(O));var C=v.apply(void 0,E);return c[S]=C,C}(_)(y,m)}},4317:function(h){function s(r,i){var l=Math.floor(i),u=i-l,p=0<=l&&l<r.shape[0],c=0<=l+1&&l+1<r.shape[0];return(1-u)*(p?+r.get(l):0)+u*(c?+r.get(l+1):0)}function t(r,i,l){var u=Math.floor(i),p=i-u,c=0<=u&&u<r.shape[0],x=0<=u+1&&u+1<r.shape[0],d=Math.floor(l),g=l-d,v=0<=d&&d<r.shape[1],y=0<=d+1&&d+1<r.shape[1],m=c&&v?r.get(u,d):0,_=c&&y?r.get(u,d+1):0;return(1-g)*((1-p)*m+p*(x&&v?r.get(u+1,d):0))+g*((1-p)*_+p*(x&&y?r.get(u+1,d+1):0))}function a(r,i,l,u){var p=Math.floor(i),c=i-p,x=0<=p&&p<r.shape[0],d=0<=p+1&&p+1<r.shape[0],g=Math.floor(l),v=l-g,y=0<=g&&g<r.shape[1],m=0<=g+1&&g+1<r.shape[1],_=Math.floor(u),f=u-_,S=0<=_&&_<r.shape[2],w=0<=_+1&&_+1<r.shape[2],E=x&&y&&S?r.get(p,g,_):0,O=x&&m&&S?r.get(p,g+1,_):0,C=d&&y&&S?r.get(p+1,g,_):0,P=d&&m&&S?r.get(p+1,g+1,_):0,R=x&&y&&w?r.get(p,g,_+1):0,j=x&&m&&w?r.get(p,g+1,_+1):0;return(1-f)*((1-v)*((1-c)*E+c*C)+v*((1-c)*O+c*P))+f*((1-v)*((1-c)*R+c*(d&&y&&w?r.get(p+1,g,_+1):0))+v*((1-c)*j+c*(d&&m&&w?r.get(p+1,g+1,_+1):0)))}function n(r){var i,l,u=0|r.shape.length,p=new Array(u),c=new Array(u),x=new Array(u),d=new Array(u);for(i=0;i<u;++i)l=+arguments[i+1],p[i]=Math.floor(l),c[i]=l-p[i],x[i]=0<=p[i]&&p[i]<r.shape[i],d[i]=0<=p[i]+1&&p[i]+1<r.shape[i];var g,v,y,m=0;e:for(i=0;i<1<<u;++i){for(v=1,y=r.offset,g=0;g<u;++g)if(i&1<<g){if(!d[g])continue e;v*=c[g],y+=r.stride[g]*(p[g]+1)}else{if(!x[g])continue e;v*=1-c[g],y+=r.stride[g]*p[g]}m+=v*r.data[y]}return m}h.exports=function(r,i,l,u){switch(r.shape.length){case 0:return 0;case 1:return s(r,i);case 2:return t(r,i,l);case 3:return a(r,i,l,u);default:return n.apply(void 0,arguments)}},h.exports.d1=s,h.exports.d2=t,h.exports.d3=a},5298:function(h,s){var t={"float64,2,1,0":function(){return function(l,u,p,c,x){var d=l[0],g=l[1],v=l[2],y=p[0],m=p[1],_=p[2];c|=0;var f=0,S=0,w=0,E=_,O=m-v*_,C=y-g*m;for(w=0;w<d;++w){for(S=0;S<g;++S){for(f=0;f<v;++f)u[c]/=x,c+=E;c+=O}c+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,u,p,c,x,d,g,v){for(var y=l[0],m=l[1],_=l[2],f=p[0],S=p[1],w=p[2],E=d[0],O=d[1],C=d[2],P=c|=0,R=g|=0,j=0|l[0];j>0;){j<64?(y=j,j=0):(y=64,j-=64);for(var D=0|l[1];D>0;){D<64?(m=D,D=0):(m=64,D-=64),c=P+j*f+D*S,g=R+j*E+D*O;var N=0,W=0,F=0,V=w,U=f-_*w,te=S-y*f,J=C,X=E-_*C,K=O-y*E;for(F=0;F<m;++F){for(W=0;W<y;++W){for(N=0;N<_;++N)u[c]=x[g]*v,c+=V,g+=J;c+=U,g+=X}c+=te,g+=K}}}}},"float32,1,0,float32,1,0":function(){return function(l,u,p,c,x,d,g){var v=l[0],y=l[1],m=p[0],_=p[1],f=d[0],S=d[1];c|=0,g|=0;var w=0,E=0,O=_,C=m-y*_,P=S,R=f-y*S;for(E=0;E<v;++E){for(w=0;w<y;++w)u[c]=x[g],c+=O,g+=P;c+=C,g+=R}}},"float32,1,0,float32,0,1":function(){return function(l,u,p,c,x,d,g){for(var v=l[0],y=l[1],m=p[0],_=p[1],f=d[0],S=d[1],w=c|=0,E=g|=0,O=0|l[1];O>0;){O<64?(y=O,O=0):(y=64,O-=64);for(var C=0|l[0];C>0;){C<64?(v=C,C=0):(v=64,C-=64),c=w+O*_+C*m,g=E+O*S+C*f;var P=0,R=0,j=_,D=m-y*_,N=S,W=f-y*S;for(R=0;R<v;++R){for(P=0;P<y;++P)u[c]=x[g],c+=j,g+=N;c+=D,g+=W}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,u,p,c,x,d,g){for(var v=l[0],y=l[1],m=l[2],_=p[0],f=p[1],S=p[2],w=d[0],E=d[1],O=d[2],C=c|=0,P=g|=0,R=0|l[2];R>0;){R<64?(m=R,R=0):(m=64,R-=64);for(var j=0|l[0];j>0;){j<64?(v=j,j=0):(v=64,j-=64);for(var D=0|l[1];D>0;){D<64?(y=D,D=0):(y=64,D-=64),c=C+R*S+j*_+D*f,g=P+R*O+j*w+D*E;var N=0,W=0,F=0,V=S,U=_-m*S,te=f-v*_,J=O,X=w-m*O,K=E-v*w;for(F=0;F<y;++F){for(W=0;W<v;++W){for(N=0;N<m;++N)u[c]=x[g],c+=V,g+=J;c+=U,g+=X}c+=te,g+=K}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,u,p,c,x,d,g){var v=l[0],y=l[1],m=l[2],_=p[0],f=p[1],S=p[2],w=d[0],E=d[1],O=d[2];c|=0,g|=0;var C=0,P=0,R=0,j=S,D=_-m*S,N=f-v*_,W=O,F=w-m*O,V=E-v*w;for(R=0;R<y;++R){for(P=0;P<v;++P){for(C=0;C<m;++C)u[c]=x[g],c+=j,g+=W;c+=D,g+=F}c+=N,g+=V}}}},a=function(l,u){var p=u.join(",");return(0,t[p])()},n={mul:function(l){var u={};return function(p,c,x){var d=p.dtype,g=p.order,v=c.dtype,y=c.order,m=x.dtype,_=x.order,f=[d,g.join(),v,y.join(),m,_.join()].join(),S=u[f];return S||(u[f]=S=l([d,g,v,y,m,_])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},muls:function(l){var u={};return function(p,c,x){var d=p.dtype,g=p.order,v=c.dtype,y=c.order,m=[d,g.join(),v,y.join()].join(),_=u[m];return _||(u[m]=_=l([d,g,v,y])),_(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},mulseq:function(l){var u={};return function(p,c){var x=p.dtype,d=p.order,g=[x,d.join()].join(),v=u[g];return v||(u[g]=v=l([x,d])),v(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},div:function(l){var u={};return function(p,c,x){var d=p.dtype,g=p.order,v=c.dtype,y=c.order,m=x.dtype,_=x.order,f=[d,g.join(),v,y.join(),m,_.join()].join(),S=u[f];return S||(u[f]=S=l([d,g,v,y,m,_])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},divs:function(l){var u={};return function(p,c,x){var d=p.dtype,g=p.order,v=c.dtype,y=c.order,m=[d,g.join(),v,y.join()].join(),_=u[m];return _||(u[m]=_=l([d,g,v,y])),_(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},divseq:function(l){var u={};return function(p,c){var x=p.dtype,d=p.order,g=[x,d.join()].join(),v=u[g];return v||(u[g]=v=l([x,d])),v(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},assign:function(l){var u={};return function(p,c){var x=p.dtype,d=p.order,g=c.dtype,v=c.order,y=[x,d.join(),g,v.join()].join(),m=u[y];return m||(u[y]=m=l([x,d,g,v])),m(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset)}}};function r(l){return u={funcName:l.funcName},(0,n[u.funcName])(a.bind(void 0,u));var u}var i={mul:"*",div:"/"};(function(){for(var l in i)s[l]=r({funcName:l}),s[l+"s"]=r({funcName:l+"s"}),s[l+"seq"]=r({funcName:l+"seq"})})(),s.assign=r({funcName:"assign"})},9994:function(h,s,t){var a=t(9618),n=t(8277);h.exports=function(r,i){for(var l=[],u=r,p=1;Array.isArray(u);)l.push(u.length),p*=u.length,u=u[0];return l.length===0?a():(i||(i=a(new Float64Array(p),l)),n(i,r),i)}},8277:function(h){h.exports=function(s){var t={};return function(a,n){var r=a.dtype,i=a.order,l=[r,i.join()].join(),u=t[l];return u||(t[l]=u=s([r,i])),u(a.shape.slice(0),a.data,a.stride,0|a.offset,n)}}((function(){return function(s,t,a,n,r){var i=s[0],l=s[1],u=s[2],p=a[0],c=a[1],x=a[2],d=[0,0,0];n|=0;var g=0,v=0,y=0,m=x,_=c-u*x,f=p-l*c;for(y=0;y<i;++y){for(v=0;v<l;++v){for(g=0;g<u;++g){var S,w=r;for(S=0;S<d.length-1;++S)w=w[d[S]];t[n]=w[d[d.length-1]],n+=m,++d[2]}n+=_,d[2]-=u,++d[1]}n+=f,d[1]-=l,++d[0]}}}).bind(void 0,{funcName:"convert"}))},7640:function(h,s,t){var a=t(1888);function n(u){return u==="uint32"?[a.mallocUint32,a.freeUint32]:null}var r={"uint32,1,0":function(u,p){return function(c,x,d,g,v,y,m,_,f,S,w){var E,O,C,P,R,j,D,N,W=c*v+g,F=u(_);for(E=c+1;E<=x;++E){for(O=E,C=W+=v,R=0,j=W,P=0;P<_;++P)F[R++]=d[j],j+=f;e:for(;O-- >c;){R=0,j=C-v;t:for(P=0;P<_;++P){if((D=d[j])<(N=F[R]))break e;if(D>N)break t;j+=S,R+=w}for(R=C,j=C-v,P=0;P<_;++P)d[R]=d[j],R+=f,j+=f;C-=v}for(R=C,j=0,P=0;P<_;++P)d[R]=F[j++],R+=f}p(F)}}},i={"uint32,1,0":function(u,p,c){return function x(d,g,v,y,m,_,f,S,w,E,O){var C,P,R,j,D,N,W,F,V,U,te,J,X,K,Q,Z,re,oe,ae,ce,he,pe,xe,be,ve,ge=(g-d+1)/6|0,we=d+ge,_e=g-ge,se=d+g>>1,ie=se-ge,fe=se+ge,Ee=we,Te=ie,Ae=se,Se=fe,Oe=_e,De=d+1,de=g-1,me=!0,Me=0,ze=0,Pe=0,Ne=S,Ve=p(Ne),Ye=p(Ne);te=m*Ee,J=m*Te,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Ee,Ee=Te,Te=P;break e}if(Pe<0)break e;ve+=E}te=m*Se,J=m*Oe,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Se,Se=Oe,Oe=P;break e}if(Pe<0)break e;ve+=E}te=m*Ee,J=m*Ae,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Ee,Ee=Ae,Ae=P;break e}if(Pe<0)break e;ve+=E}te=m*Te,J=m*Ae,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Te,Te=Ae,Ae=P;break e}if(Pe<0)break e;ve+=E}te=m*Ee,J=m*Se,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Ee,Ee=Se,Se=P;break e}if(Pe<0)break e;ve+=E}te=m*Ae,J=m*Se,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Ae,Ae=Se,Se=P;break e}if(Pe<0)break e;ve+=E}te=m*Te,J=m*Oe,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Te,Te=Oe,Oe=P;break e}if(Pe<0)break e;ve+=E}te=m*Te,J=m*Ae,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Te,Te=Ae,Ae=P;break e}if(Pe<0)break e;ve+=E}te=m*Se,J=m*Oe,ve=y;e:for(U=0;U<S;++U){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){P=Se,Se=Oe,Oe=P;break e}if(Pe<0)break e;ve+=E}for(te=m*Ee,J=m*Te,X=m*Ae,K=m*Se,Q=m*Oe,Z=m*we,re=m*se,oe=m*_e,be=0,ve=y,U=0;U<S;++U)W=te+ve,F=J+ve,V=X+ve,ae=K+ve,ce=Q+ve,he=Z+ve,pe=re+ve,xe=oe+ve,Ve[be]=v[F],Ye[be]=v[ae],me=me&&Ve[be]===Ye[be],R=v[W],j=v[V],D=v[ce],v[he]=R,v[pe]=j,v[xe]=D,++be,ve+=w;for(te=m*ie,J=m*d,ve=y,U=0;U<S;++U)F=J+ve,v[W=te+ve]=v[F],ve+=w;for(te=m*fe,J=m*g,ve=y,U=0;U<S;++U)F=J+ve,v[W=te+ve]=v[F],ve+=w;if(me)for(N=De;N<=de;++N){for(W=y+N*m,be=0,U=0;U<S&&(Pe=v[W]-Ve[be])==0;++U)be+=O,W+=E;if(Pe!==0)if(Pe<0){if(N!==De)for(te=m*N,J=m*De,ve=y,U=0;U<S;++U)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;++De}else for(;;){for(W=y+de*m,be=0,U=0;U<S&&(Pe=v[W]-Ve[be])==0;++U)be+=O,W+=E;if(!(Pe>0)){if(Pe<0){for(te=m*N,J=m*De,X=m*de,ve=y,U=0;U<S;++U)F=J+ve,V=X+ve,C=v[W=te+ve],v[W]=v[F],v[F]=v[V],v[V]=C,ve+=w;++De,--de;break}for(te=m*N,J=m*de,ve=y,U=0;U<S;++U)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;--de;break}de--}}else for(N=De;N<=de;++N){for(W=y+N*m,be=0,U=0;U<S&&(Me=v[W]-Ve[be])==0;++U)be+=O,W+=E;if(Me<0){if(N!==De)for(te=m*N,J=m*De,ve=y,U=0;U<S;++U)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;++De}else{for(W=y+N*m,be=0,U=0;U<S&&(ze=v[W]-Ye[be])==0;++U)be+=O,W+=E;if(ze>0)for(;;){for(W=y+de*m,be=0,U=0;U<S&&(Pe=v[W]-Ye[be])==0;++U)be+=O,W+=E;if(!(Pe>0)){for(W=y+de*m,be=0,U=0;U<S&&(Pe=v[W]-Ve[be])==0;++U)be+=O,W+=E;if(Pe<0){for(te=m*N,J=m*De,X=m*de,ve=y,U=0;U<S;++U)F=J+ve,V=X+ve,C=v[W=te+ve],v[W]=v[F],v[F]=v[V],v[V]=C,ve+=w;++De,--de}else{for(te=m*N,J=m*de,ve=y,U=0;U<S;++U)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;--de}break}if(--de<N)break}}}for(te=m*d,J=m*(De-1),be=0,ve=y,U=0;U<S;++U)F=J+ve,v[W=te+ve]=v[F],v[F]=Ve[be],++be,ve+=w;for(te=m*g,J=m*(de+1),be=0,ve=y,U=0;U<S;++U)F=J+ve,v[W=te+ve]=v[F],v[F]=Ye[be],++be,ve+=w;if(De-2-d<=32?u(d,De-2,v,y,m,_,f,S,w,E,O):x(d,De-2,v,y,m,_,f,S,w,E,O),g-(de+2)<=32?u(de+2,g,v,y,m,_,f,S,w,E,O):x(de+2,g,v,y,m,_,f,S,w,E,O),me)return c(Ve),void c(Ye);if(De<we&&de>_e){e:for(;;){for(W=y+De*m,be=0,ve=y,U=0;U<S;++U){if(v[W]!==Ve[be])break e;++be,W+=w}++De}e:for(;;){for(W=y+de*m,be=0,ve=y,U=0;U<S;++U){if(v[W]!==Ye[be])break e;++be,W+=w}--de}for(N=De;N<=de;++N){for(W=y+N*m,be=0,U=0;U<S&&(Me=v[W]-Ve[be])==0;++U)be+=O,W+=E;if(Me===0){if(N!==De)for(te=m*N,J=m*De,ve=y,U=0;U<S;++U)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;++De}else{for(W=y+N*m,be=0,U=0;U<S&&(ze=v[W]-Ye[be])==0;++U)be+=O,W+=E;if(ze===0)for(;;){for(W=y+de*m,be=0,U=0;U<S&&(Pe=v[W]-Ye[be])==0;++U)be+=O,W+=E;if(Pe!==0){for(W=y+de*m,be=0,U=0;U<S&&(Pe=v[W]-Ve[be])==0;++U)be+=O,W+=E;if(Pe<0){for(te=m*N,J=m*De,X=m*de,ve=y,U=0;U<S;++U)F=J+ve,V=X+ve,C=v[W=te+ve],v[W]=v[F],v[F]=v[V],v[V]=C,ve+=w;++De,--de}else{for(te=m*N,J=m*de,ve=y,U=0;U<S;++U)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;--de}break}if(--de<N)break}}}}c(Ve),c(Ye),de-De<=32?u(De,de,v,y,m,_,f,S,w,E,O):x(De,de,v,y,m,_,f,S,w,E,O)}}},l={"uint32,1,0":function(u,p){return function(c){var x=c.data,d=0|c.offset,g=c.shape,v=c.stride,y=0|v[0],m=0|g[0],_=0|v[1],f=0|g[1],S=_,w=_;m<=32?u(0,m-1,x,d,y,_,m,f,S,w,1):p(0,m-1,x,d,y,_,m,f,S,w,1)}}};h.exports=function(u,p){var c=[p,u].join(","),x=l[c],d=function(v,y){var m=n(y),_=[y,v].join(","),f=r[_];return m?f(m[0],m[1]):f()}(u,p),g=function(v,y,m){var _=n(y),f=[y,v].join(","),S=i[f];return v.length>1&&_?S(m,_[0],_[1]):S(m)}(u,p,d);return x(d,g)}},446:function(h,s,t){var a=t(7640),n={};h.exports=function(r){var i=r.order,l=r.dtype,u=[i,l].join(":"),p=n[u];return p||(n[u]=p=a(i,l)),p(r),r}},9618:function(h,s,t){var a=t(7163),n=typeof Float64Array<"u";function r(c,x){return c[0]-x[0]}function i(){var c,x=this.stride,d=new Array(x.length);for(c=0;c<d.length;++c)d[c]=[Math.abs(x[c]),c];d.sort(r);var g=new Array(d.length);for(c=0;c<g.length;++c)g[c]=d[c][1];return g}var l={T:function(c){function x(g){this.data=g}var d=x.prototype;return d.dtype=c,d.index=function(){return-1},d.size=0,d.dimension=-1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new x(this.data)},d.get=d.set=function(){},d.pick=function(){return null},function(g){return new x(g)}},0:function(c,x){function d(v,y){this.data=v,this.offset=y}var g=d.prototype;return g.dtype=c,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new d(this.data,this.offset)},g.pick=function(){return x(this.data)},g.valueOf=g.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(v){return c==="generic"?this.data.set(this.offset,v):this.data[this.offset]=v},function(v,y,m,_){return new d(v,_)}},1:function(c,x,d){function g(y,m,_,f){this.data=y,this.shape=[m],this.stride=[_],this.offset=0|f}var v=g.prototype;return v.dtype=c,v.dimension=1,Object.defineProperty(v,"size",{get:function(){return this.shape[0]}}),v.order=[0],v.set=function(y,m){return c==="generic"?this.data.set(this.offset+this.stride[0]*y,m):this.data[this.offset+this.stride[0]*y]=m},v.get=function(y){return c==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},v.index=function(y){return this.offset+this.stride[0]*y},v.hi=function(y){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,this.stride[0],this.offset)},v.lo=function(y){var m=this.offset,_=0,f=this.shape[0],S=this.stride[0];return typeof y=="number"&&y>=0&&(m+=S*(_=0|y),f-=_),new g(this.data,f,S,m)},v.step=function(y){var m=this.shape[0],_=this.stride[0],f=this.offset,S=0,w=Math.ceil;return typeof y=="number"&&((S=0|y)<0?(f+=_*(m-1),m=w(-m/S)):m=w(m/S),_*=S),new g(this.data,m,_,f)},v.transpose=function(y){y=y===void 0?0:0|y;var m=this.shape,_=this.stride;return new g(this.data,m[y],_[y],this.offset)},v.pick=function(y){var m=[],_=[],f=this.offset;return typeof y=="number"&&y>=0?f=f+this.stride[0]*y|0:(m.push(this.shape[0]),_.push(this.stride[0])),(0,x[m.length+1])(this.data,m,_,f)},function(y,m,_,f){return new g(y,m[0],_[0],f)}},2:function(c,x,d){function g(y,m,_,f,S,w){this.data=y,this.shape=[m,_],this.stride=[f,S],this.offset=0|w}var v=g.prototype;return v.dtype=c,v.dimension=2,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(v,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),v.set=function(y,m,_){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m,_):this.data[this.offset+this.stride[0]*y+this.stride[1]*m]=_},v.get=function(y,m){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m):this.data[this.offset+this.stride[0]*y+this.stride[1]*m]},v.index=function(y,m){return this.offset+this.stride[0]*y+this.stride[1]*m},v.hi=function(y,m){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},v.lo=function(y,m){var _=this.offset,f=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],O=this.stride[1];return typeof y=="number"&&y>=0&&(_+=E*(f=0|y),S-=f),typeof m=="number"&&m>=0&&(_+=O*(f=0|m),w-=f),new g(this.data,S,w,E,O,_)},v.step=function(y,m){var _=this.shape[0],f=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,O=0,C=Math.ceil;return typeof y=="number"&&((O=0|y)<0?(E+=S*(_-1),_=C(-_/O)):_=C(_/O),S*=O),typeof m=="number"&&((O=0|m)<0?(E+=w*(f-1),f=C(-f/O)):f=C(f/O),w*=O),new g(this.data,_,f,S,w,E)},v.transpose=function(y,m){y=y===void 0?0:0|y,m=m===void 0?1:0|m;var _=this.shape,f=this.stride;return new g(this.data,_[y],_[m],f[y],f[m],this.offset)},v.pick=function(y,m){var _=[],f=[],S=this.offset;return typeof y=="number"&&y>=0?S=S+this.stride[0]*y|0:(_.push(this.shape[0]),f.push(this.stride[0])),typeof m=="number"&&m>=0?S=S+this.stride[1]*m|0:(_.push(this.shape[1]),f.push(this.stride[1])),(0,x[_.length+1])(this.data,_,f,S)},function(y,m,_,f){return new g(y,m[0],m[1],_[0],_[1],f)}},3:function(c,x,d){function g(y,m,_,f,S,w,E,O){this.data=y,this.shape=[m,_,f],this.stride=[S,w,E],this.offset=0|O}var v=g.prototype;return v.dtype=c,v.dimension=3,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(v,"order",{get:function(){var y=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return y>m?m>_?[2,1,0]:y>_?[1,2,0]:[1,0,2]:y>_?[2,0,1]:_>m?[0,1,2]:[0,2,1]}}),v.set=function(y,m,_,f){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_,f):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_]=f},v.get=function(y,m,_){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_]},v.index=function(y,m,_){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_},v.hi=function(y,m,_){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},v.lo=function(y,m,_){var f=this.offset,S=0,w=this.shape[0],E=this.shape[1],O=this.shape[2],C=this.stride[0],P=this.stride[1],R=this.stride[2];return typeof y=="number"&&y>=0&&(f+=C*(S=0|y),w-=S),typeof m=="number"&&m>=0&&(f+=P*(S=0|m),E-=S),typeof _=="number"&&_>=0&&(f+=R*(S=0|_),O-=S),new g(this.data,w,E,O,C,P,R,f)},v.step=function(y,m,_){var f=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],O=this.stride[1],C=this.stride[2],P=this.offset,R=0,j=Math.ceil;return typeof y=="number"&&((R=0|y)<0?(P+=E*(f-1),f=j(-f/R)):f=j(f/R),E*=R),typeof m=="number"&&((R=0|m)<0?(P+=O*(S-1),S=j(-S/R)):S=j(S/R),O*=R),typeof _=="number"&&((R=0|_)<0?(P+=C*(w-1),w=j(-w/R)):w=j(w/R),C*=R),new g(this.data,f,S,w,E,O,C,P)},v.transpose=function(y,m,_){y=y===void 0?0:0|y,m=m===void 0?1:0|m,_=_===void 0?2:0|_;var f=this.shape,S=this.stride;return new g(this.data,f[y],f[m],f[_],S[y],S[m],S[_],this.offset)},v.pick=function(y,m,_){var f=[],S=[],w=this.offset;return typeof y=="number"&&y>=0?w=w+this.stride[0]*y|0:(f.push(this.shape[0]),S.push(this.stride[0])),typeof m=="number"&&m>=0?w=w+this.stride[1]*m|0:(f.push(this.shape[1]),S.push(this.stride[1])),typeof _=="number"&&_>=0?w=w+this.stride[2]*_|0:(f.push(this.shape[2]),S.push(this.stride[2])),(0,x[f.length+1])(this.data,f,S,w)},function(y,m,_,f){return new g(y,m[0],m[1],m[2],_[0],_[1],_[2],f)}},4:function(c,x,d){function g(y,m,_,f,S,w,E,O,C,P){this.data=y,this.shape=[m,_,f,S],this.stride=[w,E,O,C],this.offset=0|P}var v=g.prototype;return v.dtype=c,v.dimension=4,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(v,"order",{get:d}),v.set=function(y,m,_,f,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f,S):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f]=S},v.get=function(y,m,_,f){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f]},v.index=function(y,m,_,f){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f},v.hi=function(y,m,_,f){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},v.lo=function(y,m,_,f){var S=this.offset,w=0,E=this.shape[0],O=this.shape[1],C=this.shape[2],P=this.shape[3],R=this.stride[0],j=this.stride[1],D=this.stride[2],N=this.stride[3];return typeof y=="number"&&y>=0&&(S+=R*(w=0|y),E-=w),typeof m=="number"&&m>=0&&(S+=j*(w=0|m),O-=w),typeof _=="number"&&_>=0&&(S+=D*(w=0|_),C-=w),typeof f=="number"&&f>=0&&(S+=N*(w=0|f),P-=w),new g(this.data,E,O,C,P,R,j,D,N,S)},v.step=function(y,m,_,f){var S=this.shape[0],w=this.shape[1],E=this.shape[2],O=this.shape[3],C=this.stride[0],P=this.stride[1],R=this.stride[2],j=this.stride[3],D=this.offset,N=0,W=Math.ceil;return typeof y=="number"&&((N=0|y)<0?(D+=C*(S-1),S=W(-S/N)):S=W(S/N),C*=N),typeof m=="number"&&((N=0|m)<0?(D+=P*(w-1),w=W(-w/N)):w=W(w/N),P*=N),typeof _=="number"&&((N=0|_)<0?(D+=R*(E-1),E=W(-E/N)):E=W(E/N),R*=N),typeof f=="number"&&((N=0|f)<0?(D+=j*(O-1),O=W(-O/N)):O=W(O/N),j*=N),new g(this.data,S,w,E,O,C,P,R,j,D)},v.transpose=function(y,m,_,f){y=y===void 0?0:0|y,m=m===void 0?1:0|m,_=_===void 0?2:0|_,f=f===void 0?3:0|f;var S=this.shape,w=this.stride;return new g(this.data,S[y],S[m],S[_],S[f],w[y],w[m],w[_],w[f],this.offset)},v.pick=function(y,m,_,f){var S=[],w=[],E=this.offset;return typeof y=="number"&&y>=0?E=E+this.stride[0]*y|0:(S.push(this.shape[0]),w.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(S.push(this.shape[2]),w.push(this.stride[2])),typeof f=="number"&&f>=0?E=E+this.stride[3]*f|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,x[S.length+1])(this.data,S,w,E)},function(y,m,_,f){return new g(y,m[0],m[1],m[2],m[3],_[0],_[1],_[2],_[3],f)}},5:function(c,x,d){function g(y,m,_,f,S,w,E,O,C,P,R,j){this.data=y,this.shape=[m,_,f,S,w],this.stride=[E,O,C,P,R],this.offset=0|j}var v=g.prototype;return v.dtype=c,v.dimension=5,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(v,"order",{get:d}),v.set=function(y,m,_,f,S,w){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S,w):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]=w},v.get=function(y,m,_,f,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]},v.index=function(y,m,_,f,S){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S},v.hi=function(y,m,_,f,S){return new g(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},v.lo=function(y,m,_,f,S){var w=this.offset,E=0,O=this.shape[0],C=this.shape[1],P=this.shape[2],R=this.shape[3],j=this.shape[4],D=this.stride[0],N=this.stride[1],W=this.stride[2],F=this.stride[3],V=this.stride[4];return typeof y=="number"&&y>=0&&(w+=D*(E=0|y),O-=E),typeof m=="number"&&m>=0&&(w+=N*(E=0|m),C-=E),typeof _=="number"&&_>=0&&(w+=W*(E=0|_),P-=E),typeof f=="number"&&f>=0&&(w+=F*(E=0|f),R-=E),typeof S=="number"&&S>=0&&(w+=V*(E=0|S),j-=E),new g(this.data,O,C,P,R,j,D,N,W,F,V,w)},v.step=function(y,m,_,f,S){var w=this.shape[0],E=this.shape[1],O=this.shape[2],C=this.shape[3],P=this.shape[4],R=this.stride[0],j=this.stride[1],D=this.stride[2],N=this.stride[3],W=this.stride[4],F=this.offset,V=0,U=Math.ceil;return typeof y=="number"&&((V=0|y)<0?(F+=R*(w-1),w=U(-w/V)):w=U(w/V),R*=V),typeof m=="number"&&((V=0|m)<0?(F+=j*(E-1),E=U(-E/V)):E=U(E/V),j*=V),typeof _=="number"&&((V=0|_)<0?(F+=D*(O-1),O=U(-O/V)):O=U(O/V),D*=V),typeof f=="number"&&((V=0|f)<0?(F+=N*(C-1),C=U(-C/V)):C=U(C/V),N*=V),typeof S=="number"&&((V=0|S)<0?(F+=W*(P-1),P=U(-P/V)):P=U(P/V),W*=V),new g(this.data,w,E,O,C,P,R,j,D,N,W,F)},v.transpose=function(y,m,_,f,S){y=y===void 0?0:0|y,m=m===void 0?1:0|m,_=_===void 0?2:0|_,f=f===void 0?3:0|f,S=S===void 0?4:0|S;var w=this.shape,E=this.stride;return new g(this.data,w[y],w[m],w[_],w[f],w[S],E[y],E[m],E[_],E[f],E[S],this.offset)},v.pick=function(y,m,_,f,S){var w=[],E=[],O=this.offset;return typeof y=="number"&&y>=0?O=O+this.stride[0]*y|0:(w.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?O=O+this.stride[1]*m|0:(w.push(this.shape[1]),E.push(this.stride[1])),typeof _=="number"&&_>=0?O=O+this.stride[2]*_|0:(w.push(this.shape[2]),E.push(this.stride[2])),typeof f=="number"&&f>=0?O=O+this.stride[3]*f|0:(w.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?O=O+this.stride[4]*S|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,x[w.length+1])(this.data,w,E,O)},function(y,m,_,f){return new g(y,m[0],m[1],m[2],m[3],m[4],_[0],_[1],_[2],_[3],_[4],f)}}};function u(c,x){var d=x===-1?"T":String(x),g=l[d];return x===-1?g(c):x===0?g(c,p[c][0]):g(c,p[c],i)}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};h.exports=function(c,x,d,g){if(c===void 0)return(0,p.array[0])([]);typeof c=="number"&&(c=[c]),x===void 0&&(x=[c.length]);var v=x.length;if(d===void 0){d=new Array(v);for(var y=v-1,m=1;y>=0;--y)d[y]=m,m*=x[y]}if(g===void 0)for(g=0,y=0;y<v;++y)d[y]<0&&(g-=(x[y]-1)*d[y]);for(var _=function(S){if(a(S))return"buffer";if(n)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),f=p[_];f.length<=v+1;)f.push(u(_,f.length-1));return(0,f[v+1])(c,x,d,g)}},1278:function(h,s,t){var a=t(2361),n=Math.pow(2,-1074),r=-1>>>0;h.exports=function(i,l){if(isNaN(i)||isNaN(l))return NaN;if(i===l)return i;if(i===0)return l<0?-n:n;var u=a.hi(i),p=a.lo(i);return l>i==i>0?p===r?(u+=1,p=0):p+=1:p===0?(p=r,u-=1):p-=1,a.pack(p,u)}},8406:function(h,s){s.vertexNormals=function(t,a,n){for(var r=a.length,i=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u)i[u]=[0,0,0];for(u=0;u<t.length;++u)for(var p=t[u],c=0,x=p[p.length-1],d=p[0],g=0;g<p.length;++g){c=x,x=d,d=p[(g+1)%p.length];for(var v=a[c],y=a[x],m=a[d],_=new Array(3),f=0,S=new Array(3),w=0,E=0;E<3;++E)_[E]=v[E]-y[E],f+=_[E]*_[E],S[E]=m[E]-y[E],w+=S[E]*S[E];if(f*w>l){var O=i[x],C=1/Math.sqrt(f*w);for(E=0;E<3;++E){var P=(E+1)%3,R=(E+2)%3;O[E]+=C*(S[P]*_[R]-S[R]*_[P])}}}for(u=0;u<r;++u){O=i[u];var j=0;for(E=0;E<3;++E)j+=O[E]*O[E];if(j>l)for(C=1/Math.sqrt(j),E=0;E<3;++E)O[E]*=C;else for(E=0;E<3;++E)O[E]=0}return i},s.faceNormals=function(t,a,n){for(var r=t.length,i=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u){for(var p=t[u],c=new Array(3),x=0;x<3;++x)c[x]=a[p[x]];var d=new Array(3),g=new Array(3);for(x=0;x<3;++x)d[x]=c[1][x]-c[0][x],g[x]=c[2][x]-c[0][x];var v=new Array(3),y=0;for(x=0;x<3;++x){var m=(x+1)%3,_=(x+2)%3;v[x]=d[m]*g[_]-d[_]*g[m],y+=v[x]*v[x]}for(y=y>l?1/Math.sqrt(y):0,x=0;x<3;++x)v[x]*=y;i[u]=v}return i}},4081:function(h){h.exports=function(s,t,a,n,r,i,l,u,p,c){var x=t+i+c;if(d>0){var d=Math.sqrt(x+1);s[0]=.5*(l-p)/d,s[1]=.5*(u-n)/d,s[2]=.5*(a-i)/d,s[3]=.5*d}else{var g=Math.max(t,i,c);d=Math.sqrt(2*g-x+1),t>=g?(s[0]=.5*d,s[1]=.5*(r+a)/d,s[2]=.5*(u+n)/d,s[3]=.5*(l-p)/d):i>=g?(s[0]=.5*(a+r)/d,s[1]=.5*d,s[2]=.5*(p+l)/d,s[3]=.5*(u-n)/d):(s[0]=.5*(n+u)/d,s[1]=.5*(l+p)/d,s[2]=.5*d,s[3]=.5*(a-r)/d)}return s}},9977:function(h,s,t){h.exports=function(g){var v=(g=g||{}).center||[0,0,0],y=g.rotation||[0,0,0,1],m=g.radius||1;v=[].slice.call(v,0,3),c(y=[].slice.call(y,0,4),y);var _=new x(y,v,Math.log(m));return _.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&_.lookAt(0,g.eye,g.center,g.up),_};var a=t(9215),n=t(6582),r=t(7399),i=t(7608),l=t(4081);function u(g,v,y){return Math.sqrt(Math.pow(g,2)+Math.pow(v,2)+Math.pow(y,2))}function p(g,v,y,m){return Math.sqrt(Math.pow(g,2)+Math.pow(v,2)+Math.pow(y,2)+Math.pow(m,2))}function c(g,v){var y=v[0],m=v[1],_=v[2],f=v[3],S=p(y,m,_,f);S>1e-6?(g[0]=y/S,g[1]=m/S,g[2]=_/S,g[3]=f/S):(g[0]=g[1]=g[2]=0,g[3]=1)}function x(g,v,y){this.radius=a([y]),this.center=a(v),this.rotation=a(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=x.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var v=this.computedRotation;c(v,v);var y=this.computedMatrix;r(y,v);var m=this.computedCenter,_=this.computedEye,f=this.computedUp,S=Math.exp(this.computedRadius[0]);_[0]=m[0]+S*y[2],_[1]=m[1]+S*y[6],_[2]=m[2]+S*y[10],f[0]=y[1],f[1]=y[5],f[2]=y[9];for(var w=0;w<3;++w){for(var E=0,O=0;O<3;++O)E+=y[w+4*O]*_[O];y[12+w]=-E}},d.getMatrix=function(g,v){this.recalcMatrix(g);var y=this.computedMatrix;if(v){for(var m=0;m<16;++m)v[m]=y[m];return v}return y},d.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},d.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},d.pan=function(g,v,y,m){v=v||0,y=y||0,m=m||0,this.recalcMatrix(g);var _=this.computedMatrix,f=_[1],S=_[5],w=_[9],E=u(f,S,w);f/=E,S/=E,w/=E;var O=_[0],C=_[4],P=_[8],R=O*f+C*S+P*w,j=u(O-=f*R,C-=S*R,P-=w*R);O/=j,C/=j,P/=j,_[2],_[6],_[10];var D=O*v+f*y,N=C*v+S*y,W=P*v+w*y;this.center.move(g,D,N,W);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+m),this.radius.set(g,Math.log(F))},d.rotate=function(g,v,y,m){this.recalcMatrix(g),v=v||0,y=y||0;var _=this.computedMatrix,f=_[0],S=_[4],w=_[8],E=_[1],O=_[5],C=_[9],P=_[2],R=_[6],j=_[10],D=v*f+y*E,N=v*S+y*O,W=v*w+y*C,F=-(R*W-j*N),V=-(j*D-P*W),U=-(P*N-R*D),te=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(V,2)-Math.pow(U,2))),J=p(F,V,U,te);J>1e-6?(F/=J,V/=J,U/=J,te/=J):(F=V=U=0,te=1);var X=this.computedRotation,K=X[0],Q=X[1],Z=X[2],re=X[3],oe=K*te+re*F+Q*U-Z*V,ae=Q*te+re*V+Z*F-K*U,ce=Z*te+re*U+K*V-Q*F,he=re*te-K*F-Q*V-Z*U;if(m){F=P,V=R,U=j;var pe=Math.sin(m)/u(F,V,U);F*=pe,V*=pe,U*=pe,he=he*(te=Math.cos(v))-(oe=oe*te+he*F+ae*U-ce*V)*F-(ae=ae*te+he*V+ce*F-oe*U)*V-(ce=ce*te+he*U+oe*V-ae*F)*U}var xe=p(oe,ae,ce,he);xe>1e-6?(oe/=xe,ae/=xe,ce/=xe,he/=xe):(oe=ae=ce=0,he=1),this.rotation.set(g,oe,ae,ce,he)},d.lookAt=function(g,v,y,m){this.recalcMatrix(g),y=y||this.computedCenter,v=v||this.computedEye,m=m||this.computedUp;var _=this.computedMatrix;n(_,v,y,m);var f=this.computedRotation;l(f,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),c(f,f),this.rotation.set(g,f[0],f[1],f[2],f[3]);for(var S=0,w=0;w<3;++w)S+=Math.pow(y[w]-v[w],2);this.radius.set(g,.5*Math.log(Math.max(S,1e-6))),this.center.set(g,y[0],y[1],y[2])},d.translate=function(g,v,y,m){this.center.move(g,v||0,y||0,m||0)},d.setMatrix=function(g,v){var y=this.computedRotation;l(y,v[0],v[1],v[2],v[4],v[5],v[6],v[8],v[9],v[10]),c(y,y),this.rotation.set(g,y[0],y[1],y[2],y[3]);var m=this.computedMatrix;i(m,v);var _=m[15];if(Math.abs(_)>1e-6){var f=m[12]/_,S=m[13]/_,w=m[14]/_;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,f-m[2]*E,S-m[6]*E,w-m[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},d.setDistance=function(g,v){v>0&&this.radius.set(g,Math.log(v))},d.setDistanceLimits=function(g,v){g=g>0?Math.log(g):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=v},d.getDistanceLimits=function(g){var v=this.radius.bounds;return g?(g[0]=Math.exp(v[0][0]),g[1]=Math.exp(v[1][0]),g):[Math.exp(v[0][0]),Math.exp(v[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(g){var v=this.lastT(),y=g.center;y&&this.center.set(v,y[0],y[1],y[2]);var m=g.rotation;m&&this.rotation.set(v,m[0],m[1],m[2],m[3]);var _=g.distance;_&&_>0&&this.radius.set(v,Math.log(_)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},1371:function(h,s,t){var a=t(3233);h.exports=function(n,r,i){return a(i=i!==void 0?i+"":" ",r)+n}},3202:function(h){h.exports=function(s,t){t||(t=[0,""]),s=String(s);var a=parseFloat(s,10);return t[0]=a,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(h,s,t){h.exports=function(n,r){for(var i=0|r.length,l=n.length,u=[new Array(i),new Array(i)],p=0;p<i;++p)u[0][p]=[],u[1][p]=[];for(p=0;p<l;++p){var c=n[p];u[0][c[0]].push(c),u[1][c[1]].push(c)}var x=[];for(p=0;p<i;++p)u[0][p].length+u[1][p].length===0&&x.push([p]);function d(S,w){var E=u[w][S[w]];E.splice(E.indexOf(S),1)}function g(S,w,E){for(var O,C,P,R=0;R<2;++R)if(u[R][w].length>0){O=u[R][w][0],P=R;break}C=O[1^P];for(var j=0;j<2;++j)for(var D=u[j][w],N=0;N<D.length;++N){var W=D[N],F=W[1^j];a(r[S],r[w],r[C],r[F])>0&&(O=W,C=F,P=j)}return E||O&&d(O,P),C}function v(S,w){var E=u[w][S][0],O=[S];d(E,w);for(var C=E[1^w];;){for(;C!==S;)O.push(C),C=g(O[O.length-2],C,!1);if(u[0][S].length+u[1][S].length===0)break;var P=O[O.length-1],R=S,j=O[1],D=g(P,R,!0);if(a(r[P],r[R],r[j],r[D])<0)break;O.push(S),C=g(P,R)}return O}function y(S,w){return w[1]===w[w.length-1]}for(p=0;p<i;++p)for(var m=0;m<2;++m){for(var _=[];u[m][p].length>0;){u[0][p].length;var f=v(p,m);y(0,f)?_.push.apply(_,f):(_.length>0&&x.push(_),_=f)}_.length>0&&x.push(_)}return x};var a=t(3140)},5609:function(h,s,t){h.exports=function(n,r){for(var i=a(n,r.length),l=new Array(r.length),u=new Array(r.length),p=[],c=0;c<r.length;++c){var x=i[c].length;u[c]=x,l[c]=!0,x<=1&&p.push(c)}for(;p.length>0;){l[m=p.pop()]=!1;var d=i[m];for(c=0;c<d.length;++c){var g=d[c];--u[g]==0&&p.push(g)}}var v=new Array(r.length),y=[];for(c=0;c<r.length;++c)if(l[c]){var m=y.length;v[c]=m,y.push(r[c])}else v[c]=-1;var _=[];for(c=0;c<n.length;++c){var f=n[c];l[f[0]]&&l[f[1]]&&_.push([v[f[0]],v[f[1]]])}return[_,y]};var a=t(3134)},2095:function(h,s,t){h.exports=function(x,d){var g=p(x,d);x=g[0];for(var v=(d=g[1]).length,y=(x.length,a(x,d.length)),m=0;m<v;++m)if(y[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=n(x,d),f=(_=_.filter(function(ge){for(var we=ge.length,_e=[0],se=0;se<we;++se){var ie=d[ge[se]],fe=d[ge[(se+1)%we]],Ee=i(-ie[0],ie[1]),Te=i(-ie[0],fe[1]),Ae=i(fe[0],ie[1]),Se=i(fe[0],fe[1]);_e=l(_e,l(l(Ee,Te),l(Ae,Se)))}return _e[_e.length-1]>0})).length,S=new Array(f),w=new Array(f);for(m=0;m<f;++m){S[m]=m;var E=new Array(f),O=_[m].map(function(ge){return d[ge]}),C=r([O]),P=0;e:for(var R=0;R<f;++R)if(E[R]=0,m!==R){for(var j=(be=_[R]).length,D=0;D<j;++D){var N=C(d[be[D]]);if(N!==0){N<0&&(E[R]=1,P+=1);continue e}}E[R]=1,P+=1}w[m]=[P,m,E]}for(w.sort(function(ge,we){return we[0]-ge[0]}),m=0;m<f;++m){var W=(E=w[m])[1],F=E[2];for(R=0;R<f;++R)F[R]&&(S[R]=W)}var V=function(ge){for(var we=new Array(ge),_e=0;_e<ge;++_e)we[_e]=[];return we}(f);for(m=0;m<f;++m)V[m].push(S[m]),V[S[m]].push(m);var U={},te=c(v,!1);for(m=0;m<f;++m)for(j=(be=_[m]).length,R=0;R<j;++R){var J=be[R],X=be[(R+1)%j],K=Math.min(J,X)+":"+Math.max(J,X);if(K in U){var Q=U[K];V[Q].push(m),V[m].push(Q),te[J]=te[X]=!0}else U[K]=m}function Z(ge){for(var we=ge.length,_e=0;_e<we;++_e)if(!te[ge[_e]])return!1;return!0}var re=[],oe=c(f,-1);for(m=0;m<f;++m)S[m]!==m||Z(_[m])?oe[m]=-1:(re.push(m),oe[m]=0);for(g=[];re.length>0;){var ae=re.pop(),ce=V[ae];u(ce,function(ge,we){return ge-we});var he,pe=ce.length,xe=oe[ae];for(xe===0&&(he=[be=_[ae]]),m=0;m<pe;++m){var be,ve=ce[m];oe[ve]>=0||(oe[ve]=1^xe,re.push(ve),xe===0&&(Z(be=_[ve])||(be.reverse(),he.push(be))))}xe===0&&g.push(he)}return g};var a=t(3134),n=t(3088),r=t(5085),i=t(5250),l=t(8210),u=t(1682),p=t(5609);function c(x,d){for(var g=new Array(x),v=0;v<x;++v)g[v]=d;return g}},5085:function(h,s,t){h.exports=function(c){for(var x=c.length,d=[],g=[],v=0;v<x;++v)for(var y=c[v],m=y.length,_=m-1,f=0;f<m;_=f++){var S=y[_],w=y[f];S[0]===w[0]?g.push([S,w]):d.push([S,w])}if(d.length===0)return g.length===0?p:(E=u(g),function(P){return E(P[0],P[1])?0:1});var E,O=n(d),C=function(P,R){return function(j){var D=i.le(R,j[0]);if(D<0)return 1;var N=P[D];if(!N){if(!(D>0&&R[D]===j[0]))return 1;N=P[D-1]}for(var W=1;N;){var F=N.key,V=a(j,F[0],F[1]);if(F[0][0]<F[1][0])if(V<0)N=N.left;else{if(!(V>0))return 0;W=-1,N=N.right}else if(V>0)N=N.left;else{if(!(V<0))return 0;W=1,N=N.right}}return W}}(O.slabs,O.coordinates);return g.length===0?C:function(P,R){return function(j){return P(j[0],j[1])?0:R(j)}}(u(g),C)};var a=t(3250)[3],n=t(4209),r=t(3352),i=t(2478);function l(){return!0}function u(c){for(var x={},d=0;d<c.length;++d){var g=c[d],v=g[0][0],y=g[0][1],m=g[1][1],_=[Math.min(y,m),Math.max(y,m)];v in x?x[v].push(_):x[v]=[_]}var f={},S=Object.keys(x);for(d=0;d<S.length;++d){var w=x[S[d]];f[S[d]]=r(w)}return function(E){return function(O,C){var P=E[O];return!!P&&!!P.queryPoint(C,l)}}(f)}function p(c){return 1}},9346:function(h){var s=new Float64Array(4),t=new Float64Array(4),a=new Float64Array(4);h.exports=function(n,r,i,l,u){s.length<l.length&&(s=new Float64Array(l.length),t=new Float64Array(l.length),a=new Float64Array(l.length));for(var p=0;p<l.length;++p)s[p]=n[p]-l[p],t[p]=r[p]-n[p],a[p]=i[p]-n[p];var c=0,x=0,d=0,g=0,v=0,y=0;for(p=0;p<l.length;++p){var m=t[p],_=a[p],f=s[p];c+=m*m,x+=m*_,d+=_*_,g+=f*m,v+=f*_,y+=f*f}var S,w,E,O,C,P=Math.abs(c*d-x*x),R=x*v-d*g,j=x*g-c*v;if(R+j<=P)if(R<0)j<0&&g<0?(j=0,-g>=c?(R=1,S=c+2*g+y):S=g*(R=-g/c)+y):(R=0,v>=0?(j=0,S=y):-v>=d?(j=1,S=d+2*v+y):S=v*(j=-v/d)+y);else if(j<0)j=0,g>=0?(R=0,S=y):-g>=c?(R=1,S=c+2*g+y):S=g*(R=-g/c)+y;else{var D=1/P;S=(R*=D)*(c*R+x*(j*=D)+2*g)+j*(x*R+d*j+2*v)+y}else R<0?(E=d+v)>(w=x+g)?(O=E-w)>=(C=c-2*x+d)?(R=1,j=0,S=c+2*g+y):S=(R=O/C)*(c*R+x*(j=1-R)+2*g)+j*(x*R+d*j+2*v)+y:(R=0,E<=0?(j=1,S=d+2*v+y):v>=0?(j=0,S=y):S=v*(j=-v/d)+y):j<0?(E=c+g)>(w=x+v)?(O=E-w)>=(C=c-2*x+d)?(j=1,R=0,S=d+2*v+y):S=(R=1-(j=O/C))*(c*R+x*j+2*g)+j*(x*R+d*j+2*v)+y:(j=0,E<=0?(R=1,S=c+2*g+y):g>=0?(R=0,S=y):S=g*(R=-g/c)+y):(O=d+v-x-g)<=0?(R=0,j=1,S=d+2*v+y):O>=(C=c-2*x+d)?(R=1,j=0,S=c+2*g+y):S=(R=O/C)*(c*R+x*(j=1-R)+2*g)+j*(x*R+d*j+2*v)+y;var N=1-R-j;for(p=0;p<l.length;++p)u[p]=N*n[p]+R*r[p]+j*i[p];return S<0?0:S}},8648:function(h,s,t){h.exports=t(783)},2653:function(h,s,t){var a=t(3865);h.exports=function(n,r){for(var i=n.length,l=new Array(i),u=0;u<i;++u)l[u]=a(n[u],r[u]);return l}},5838:function(h,s,t){h.exports=function(n){for(var r=new Array(n.length),i=0;i<n.length;++i)r[i]=a(n[i]);return r};var a=t(7842)},8987:function(h,s,t){var a=t(7842),n=t(6504);h.exports=function(r,i){for(var l=a(i),u=r.length,p=new Array(u),c=0;c<u;++c)p[c]=n(r[c],l);return p}},544:function(h,s,t){var a=t(5572);h.exports=function(n,r){for(var i=n.length,l=new Array(i),u=0;u<i;++u)l[u]=a(n[u],r[u]);return l}},5771:function(h,s,t){var a=t(8507),n=t(3788),r=t(2419);h.exports=function(i){i.sort(n);for(var l=i.length,u=0,p=0;p<l;++p){var c=i[p],x=r(c);if(x!==0){if(u>0){var d=i[u-1];if(a(c,d)===0&&r(d)!==x){u-=1;continue}}i[u++]=c}}return i.length=u,i}},3233:function(h){var s,t="";h.exports=function(a,n){if(typeof a!="string")throw new TypeError("expected a string");if(n===1)return a;if(n===2)return a+a;var r=a.length*n;if(s!==a||s===void 0)s=a,t="";else if(t.length>=r)return t.substr(0,r);for(;r>t.length&&n>1;)1&n&&(t+=a),n>>=1,a+=a;return t=(t+=a).substr(0,r)}},3025:function(h,s,t){h.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(h){h.exports=function(s){for(var t=s.length,a=s[s.length-1],n=t,r=t-2;r>=0;--r){var i=a;(p=(u=s[r])-((a=i+u)-i))&&(s[--n]=a,a=p)}var l=0;for(r=n;r<t;++r){var u,p;(p=(u=a)-((a=(i=s[r])+u)-i))&&(s[l++]=p)}return s[l++]=a,s.length=l,s}},2962:function(h,s,t){var a=t(5250),n=t(8210),r=t(3012),i=t(7004);function l(v,y,m,_){return function(f){return _(v(m(f[0][0],f[1][1]),m(-f[0][1],f[1][0])))}}function u(v,y,m,_){return function(f){return _(v(y(v(m(f[1][1],f[2][2]),m(-f[1][2],f[2][1])),f[0][0]),v(y(v(m(f[1][0],f[2][2]),m(-f[1][2],f[2][0])),-f[0][1]),y(v(m(f[1][0],f[2][1]),m(-f[1][1],f[2][0])),f[0][2]))))}}function p(v,y,m,_){return function(f){return _(v(v(y(v(y(v(m(f[2][2],f[3][3]),m(-f[2][3],f[3][2])),f[1][1]),v(y(v(m(f[2][1],f[3][3]),m(-f[2][3],f[3][1])),-f[1][2]),y(v(m(f[2][1],f[3][2]),m(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),y(v(y(v(m(f[2][2],f[3][3]),m(-f[2][3],f[3][2])),f[1][0]),v(y(v(m(f[2][0],f[3][3]),m(-f[2][3],f[3][0])),-f[1][2]),y(v(m(f[2][0],f[3][2]),m(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),v(y(v(y(v(m(f[2][1],f[3][3]),m(-f[2][3],f[3][1])),f[1][0]),v(y(v(m(f[2][0],f[3][3]),m(-f[2][3],f[3][0])),-f[1][1]),y(v(m(f[2][0],f[3][1]),m(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),y(v(y(v(m(f[2][1],f[3][2]),m(-f[2][2],f[3][1])),f[1][0]),v(y(v(m(f[2][0],f[3][2]),m(-f[2][2],f[3][0])),-f[1][1]),y(v(m(f[2][0],f[3][1]),m(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function c(v,y,m,_){return function(f){return _(v(v(y(v(v(y(v(y(v(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][2]),v(y(v(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),-f[2][3]),y(v(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),y(v(y(v(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][1]),v(y(v(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][3]),y(v(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),v(y(v(y(v(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][1]),v(y(v(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][2]),y(v(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),y(v(y(v(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][1]),v(y(v(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),-f[2][2]),y(v(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),y(v(v(y(v(y(v(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][2]),v(y(v(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),-f[2][3]),y(v(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),y(v(y(v(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][0]),v(y(v(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][3]),y(v(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),v(y(v(y(v(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][0]),v(y(v(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][2]),y(v(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),y(v(y(v(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][0]),v(y(v(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][2]),y(v(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),v(y(v(v(y(v(y(v(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][1]),v(y(v(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][3]),y(v(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),y(v(y(v(m(f[3][3],f[4][4]),m(-f[3][4],f[4][3])),f[2][0]),v(y(v(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][3]),y(v(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),v(y(v(y(v(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),f[2][0]),v(y(v(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][1]),y(v(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),y(v(y(v(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][0]),v(y(v(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][1]),y(v(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),v(y(v(v(y(v(y(v(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][1]),v(y(v(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),-f[2][2]),y(v(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),y(v(y(v(m(f[3][2],f[4][4]),m(-f[3][4],f[4][2])),f[2][0]),v(y(v(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][2]),y(v(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),v(y(v(y(v(m(f[3][1],f[4][4]),m(-f[3][4],f[4][1])),f[2][0]),v(y(v(m(f[3][0],f[4][4]),m(-f[3][4],f[4][0])),-f[2][1]),y(v(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),y(v(y(v(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][0]),v(y(v(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),-f[2][1]),y(v(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),y(v(v(y(v(y(v(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][1]),v(y(v(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),-f[2][2]),y(v(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),y(v(y(v(m(f[3][2],f[4][3]),m(-f[3][3],f[4][2])),f[2][0]),v(y(v(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][2]),y(v(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),v(y(v(y(v(m(f[3][1],f[4][3]),m(-f[3][3],f[4][1])),f[2][0]),v(y(v(m(f[3][0],f[4][3]),m(-f[3][3],f[4][0])),-f[2][1]),y(v(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),y(v(y(v(m(f[3][1],f[4][2]),m(-f[3][2],f[4][1])),f[2][0]),v(y(v(m(f[3][0],f[4][2]),m(-f[3][2],f[4][0])),-f[2][1]),y(v(m(f[3][0],f[4][1]),m(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function x(v){return(v===2?l:v===3?u:v===4?p:v===5?c:void 0)(n,r,a,i)}var d=[function(){return[0]},function(v){return[v[0][0]]}];function g(v,y,m,_,f,S,w,E){return function(O){switch(O.length){case 0:return v(O);case 1:return y(O);case 2:return m(O);case 3:return _(O);case 4:return f(O);case 5:return S(O)}var C=w[O.length];return C||(C=w[O.length]=E(O.length)),C(O)}}(function(){for(;d.length<6;)d.push(x(d.length));h.exports=g.apply(void 0,d.concat([d,x]));for(var v=0;v<d.length;++v)h.exports[v]=d[v]})()},1944:function(h,s,t){var a=t(5250),n=t(8210);h.exports=function(r,i){for(var l=a(r[0],i[0]),u=1;u<r.length;++u)l=n(l,a(r[u],i[u]));return l}},2646:function(h,s,t){var a=t(5250),n=t(8210),r=t(8545),i=t(3012);function l(y){return(y===3?u:y===4?p:y===5?c:x)(n,r,a,i)}function u(y,m,_,f){return function(S,w,E){var O=_(S[0],S[0]),C=f(O,w[0]),P=f(O,E[0]),R=_(w[0],w[0]),j=f(R,S[0]),D=f(R,E[0]),N=_(E[0],E[0]),W=f(N,S[0]),F=f(N,w[0]),V=y(m(F,D),m(j,C)),U=m(W,P),te=m(V,U);return te[te.length-1]}}function p(y,m,_,f){return function(S,w,E,O){var C=y(_(S[0],S[0]),_(S[1],S[1])),P=f(C,w[0]),R=f(C,E[0]),j=f(C,O[0]),D=y(_(w[0],w[0]),_(w[1],w[1])),N=f(D,S[0]),W=f(D,E[0]),F=f(D,O[0]),V=y(_(E[0],E[0]),_(E[1],E[1])),U=f(V,S[0]),te=f(V,w[0]),J=f(V,O[0]),X=y(_(O[0],O[0]),_(O[1],O[1])),K=f(X,S[0]),Q=f(X,w[0]),Z=f(X,E[0]),re=y(y(f(m(Z,J),w[1]),y(f(m(Q,F),-E[1]),f(m(te,W),O[1]))),y(f(m(Q,F),S[1]),y(f(m(K,j),-w[1]),f(m(N,P),O[1])))),oe=y(y(f(m(Z,J),S[1]),y(f(m(K,j),-E[1]),f(m(U,R),O[1]))),y(f(m(te,W),S[1]),y(f(m(U,R),-w[1]),f(m(N,P),E[1])))),ae=m(re,oe);return ae[ae.length-1]}}function c(y,m,_,f){return function(S,w,E,O,C){var P=y(_(S[0],S[0]),y(_(S[1],S[1]),_(S[2],S[2]))),R=f(P,w[0]),j=f(P,E[0]),D=f(P,O[0]),N=f(P,C[0]),W=y(_(w[0],w[0]),y(_(w[1],w[1]),_(w[2],w[2]))),F=f(W,S[0]),V=f(W,E[0]),U=f(W,O[0]),te=f(W,C[0]),J=y(_(E[0],E[0]),y(_(E[1],E[1]),_(E[2],E[2]))),X=f(J,S[0]),K=f(J,w[0]),Q=f(J,O[0]),Z=f(J,C[0]),re=y(_(O[0],O[0]),y(_(O[1],O[1]),_(O[2],O[2]))),oe=f(re,S[0]),ae=f(re,w[0]),ce=f(re,E[0]),he=f(re,C[0]),pe=y(_(C[0],C[0]),y(_(C[1],C[1]),_(C[2],C[2]))),xe=f(pe,S[0]),be=f(pe,w[0]),ve=f(pe,E[0]),ge=f(pe,O[0]),we=y(y(y(f(y(f(m(ge,he),E[1]),y(f(m(ve,Z),-O[1]),f(m(ce,Q),C[1]))),w[2]),y(f(y(f(m(ge,he),w[1]),y(f(m(be,te),-O[1]),f(m(ae,U),C[1]))),-E[2]),f(y(f(m(ve,Z),w[1]),y(f(m(be,te),-E[1]),f(m(K,V),C[1]))),O[2]))),y(f(y(f(m(ce,Q),w[1]),y(f(m(ae,U),-E[1]),f(m(K,V),O[1]))),-C[2]),y(f(y(f(m(ge,he),w[1]),y(f(m(be,te),-O[1]),f(m(ae,U),C[1]))),S[2]),f(y(f(m(ge,he),S[1]),y(f(m(xe,N),-O[1]),f(m(oe,D),C[1]))),-w[2])))),y(y(f(y(f(m(be,te),S[1]),y(f(m(xe,N),-w[1]),f(m(F,R),C[1]))),O[2]),y(f(y(f(m(ae,U),S[1]),y(f(m(oe,D),-w[1]),f(m(F,R),O[1]))),-C[2]),f(y(f(m(ce,Q),w[1]),y(f(m(ae,U),-E[1]),f(m(K,V),O[1]))),S[2]))),y(f(y(f(m(ce,Q),S[1]),y(f(m(oe,D),-E[1]),f(m(X,j),O[1]))),-w[2]),y(f(y(f(m(ae,U),S[1]),y(f(m(oe,D),-w[1]),f(m(F,R),O[1]))),E[2]),f(y(f(m(K,V),S[1]),y(f(m(X,j),-w[1]),f(m(F,R),E[1]))),-O[2]))))),_e=y(y(y(f(y(f(m(ge,he),E[1]),y(f(m(ve,Z),-O[1]),f(m(ce,Q),C[1]))),S[2]),f(y(f(m(ge,he),S[1]),y(f(m(xe,N),-O[1]),f(m(oe,D),C[1]))),-E[2])),y(f(y(f(m(ve,Z),S[1]),y(f(m(xe,N),-E[1]),f(m(X,j),C[1]))),O[2]),f(y(f(m(ce,Q),S[1]),y(f(m(oe,D),-E[1]),f(m(X,j),O[1]))),-C[2]))),y(y(f(y(f(m(ve,Z),w[1]),y(f(m(be,te),-E[1]),f(m(K,V),C[1]))),S[2]),f(y(f(m(ve,Z),S[1]),y(f(m(xe,N),-E[1]),f(m(X,j),C[1]))),-w[2])),y(f(y(f(m(be,te),S[1]),y(f(m(xe,N),-w[1]),f(m(F,R),C[1]))),E[2]),f(y(f(m(K,V),S[1]),y(f(m(X,j),-w[1]),f(m(F,R),E[1]))),-C[2])))),se=m(we,_e);return se[se.length-1]}}function x(y,m,_,f){return function(S,w,E,O,C,P){var R=y(y(_(S[0],S[0]),_(S[1],S[1])),y(_(S[2],S[2]),_(S[3],S[3]))),j=f(R,w[0]),D=f(R,E[0]),N=f(R,O[0]),W=f(R,C[0]),F=f(R,P[0]),V=y(y(_(w[0],w[0]),_(w[1],w[1])),y(_(w[2],w[2]),_(w[3],w[3]))),U=f(V,S[0]),te=f(V,E[0]),J=f(V,O[0]),X=f(V,C[0]),K=f(V,P[0]),Q=y(y(_(E[0],E[0]),_(E[1],E[1])),y(_(E[2],E[2]),_(E[3],E[3]))),Z=f(Q,S[0]),re=f(Q,w[0]),oe=f(Q,O[0]),ae=f(Q,C[0]),ce=f(Q,P[0]),he=y(y(_(O[0],O[0]),_(O[1],O[1])),y(_(O[2],O[2]),_(O[3],O[3]))),pe=f(he,S[0]),xe=f(he,w[0]),be=f(he,E[0]),ve=f(he,C[0]),ge=f(he,P[0]),we=y(y(_(C[0],C[0]),_(C[1],C[1])),y(_(C[2],C[2]),_(C[3],C[3]))),_e=f(we,S[0]),se=f(we,w[0]),ie=f(we,E[0]),fe=f(we,O[0]),Ee=f(we,P[0]),Te=y(y(_(P[0],P[0]),_(P[1],P[1])),y(_(P[2],P[2]),_(P[3],P[3]))),Ae=f(Te,S[0]),Se=f(Te,w[0]),Oe=f(Te,E[0]),De=f(Te,O[0]),de=f(Te,C[0]),me=y(y(y(f(y(y(f(y(f(m(de,Ee),O[1]),y(f(m(De,ge),-C[1]),f(m(fe,ve),P[1]))),E[2]),f(y(f(m(de,Ee),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),-O[2])),y(f(y(f(m(De,ge),E[1]),y(f(m(Oe,ce),-O[1]),f(m(be,oe),P[1]))),C[2]),f(y(f(m(fe,ve),E[1]),y(f(m(ie,ae),-O[1]),f(m(be,oe),C[1]))),-P[2]))),w[3]),y(f(y(y(f(y(f(m(de,Ee),O[1]),y(f(m(De,ge),-C[1]),f(m(fe,ve),P[1]))),w[2]),f(y(f(m(de,Ee),w[1]),y(f(m(Se,K),-C[1]),f(m(se,X),P[1]))),-O[2])),y(f(y(f(m(De,ge),w[1]),y(f(m(Se,K),-O[1]),f(m(xe,J),P[1]))),C[2]),f(y(f(m(fe,ve),w[1]),y(f(m(se,X),-O[1]),f(m(xe,J),C[1]))),-P[2]))),-E[3]),f(y(y(f(y(f(m(de,Ee),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),w[2]),f(y(f(m(de,Ee),w[1]),y(f(m(Se,K),-C[1]),f(m(se,X),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Se,K),-E[1]),f(m(re,te),P[1]))),C[2]),f(y(f(m(ie,ae),w[1]),y(f(m(se,X),-E[1]),f(m(re,te),C[1]))),-P[2]))),O[3]))),y(y(f(y(y(f(y(f(m(De,ge),E[1]),y(f(m(Oe,ce),-O[1]),f(m(be,oe),P[1]))),w[2]),f(y(f(m(De,ge),w[1]),y(f(m(Se,K),-O[1]),f(m(xe,J),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Se,K),-E[1]),f(m(re,te),P[1]))),O[2]),f(y(f(m(be,oe),w[1]),y(f(m(xe,J),-E[1]),f(m(re,te),O[1]))),-P[2]))),-C[3]),f(y(y(f(y(f(m(fe,ve),E[1]),y(f(m(ie,ae),-O[1]),f(m(be,oe),C[1]))),w[2]),f(y(f(m(fe,ve),w[1]),y(f(m(se,X),-O[1]),f(m(xe,J),C[1]))),-E[2])),y(f(y(f(m(ie,ae),w[1]),y(f(m(se,X),-E[1]),f(m(re,te),C[1]))),O[2]),f(y(f(m(be,oe),w[1]),y(f(m(xe,J),-E[1]),f(m(re,te),O[1]))),-C[2]))),P[3])),y(f(y(y(f(y(f(m(de,Ee),O[1]),y(f(m(De,ge),-C[1]),f(m(fe,ve),P[1]))),w[2]),f(y(f(m(de,Ee),w[1]),y(f(m(Se,K),-C[1]),f(m(se,X),P[1]))),-O[2])),y(f(y(f(m(De,ge),w[1]),y(f(m(Se,K),-O[1]),f(m(xe,J),P[1]))),C[2]),f(y(f(m(fe,ve),w[1]),y(f(m(se,X),-O[1]),f(m(xe,J),C[1]))),-P[2]))),S[3]),f(y(y(f(y(f(m(de,Ee),O[1]),y(f(m(De,ge),-C[1]),f(m(fe,ve),P[1]))),S[2]),f(y(f(m(de,Ee),S[1]),y(f(m(Ae,F),-C[1]),f(m(_e,W),P[1]))),-O[2])),y(f(y(f(m(De,ge),S[1]),y(f(m(Ae,F),-O[1]),f(m(pe,N),P[1]))),C[2]),f(y(f(m(fe,ve),S[1]),y(f(m(_e,W),-O[1]),f(m(pe,N),C[1]))),-P[2]))),-w[3])))),y(y(y(f(y(y(f(y(f(m(de,Ee),w[1]),y(f(m(Se,K),-C[1]),f(m(se,X),P[1]))),S[2]),f(y(f(m(de,Ee),S[1]),y(f(m(Ae,F),-C[1]),f(m(_e,W),P[1]))),-w[2])),y(f(y(f(m(Se,K),S[1]),y(f(m(Ae,F),-w[1]),f(m(U,j),P[1]))),C[2]),f(y(f(m(se,X),S[1]),y(f(m(_e,W),-w[1]),f(m(U,j),C[1]))),-P[2]))),O[3]),f(y(y(f(y(f(m(De,ge),w[1]),y(f(m(Se,K),-O[1]),f(m(xe,J),P[1]))),S[2]),f(y(f(m(De,ge),S[1]),y(f(m(Ae,F),-O[1]),f(m(pe,N),P[1]))),-w[2])),y(f(y(f(m(Se,K),S[1]),y(f(m(Ae,F),-w[1]),f(m(U,j),P[1]))),O[2]),f(y(f(m(xe,J),S[1]),y(f(m(pe,N),-w[1]),f(m(U,j),O[1]))),-P[2]))),-C[3])),y(f(y(y(f(y(f(m(fe,ve),w[1]),y(f(m(se,X),-O[1]),f(m(xe,J),C[1]))),S[2]),f(y(f(m(fe,ve),S[1]),y(f(m(_e,W),-O[1]),f(m(pe,N),C[1]))),-w[2])),y(f(y(f(m(se,X),S[1]),y(f(m(_e,W),-w[1]),f(m(U,j),C[1]))),O[2]),f(y(f(m(xe,J),S[1]),y(f(m(pe,N),-w[1]),f(m(U,j),O[1]))),-C[2]))),P[3]),f(y(y(f(y(f(m(De,ge),E[1]),y(f(m(Oe,ce),-O[1]),f(m(be,oe),P[1]))),w[2]),f(y(f(m(De,ge),w[1]),y(f(m(Se,K),-O[1]),f(m(xe,J),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Se,K),-E[1]),f(m(re,te),P[1]))),O[2]),f(y(f(m(be,oe),w[1]),y(f(m(xe,J),-E[1]),f(m(re,te),O[1]))),-P[2]))),S[3]))),y(y(f(y(y(f(y(f(m(De,ge),E[1]),y(f(m(Oe,ce),-O[1]),f(m(be,oe),P[1]))),S[2]),f(y(f(m(De,ge),S[1]),y(f(m(Ae,F),-O[1]),f(m(pe,N),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(Ae,F),-E[1]),f(m(Z,D),P[1]))),O[2]),f(y(f(m(be,oe),S[1]),y(f(m(pe,N),-E[1]),f(m(Z,D),O[1]))),-P[2]))),-w[3]),f(y(y(f(y(f(m(De,ge),w[1]),y(f(m(Se,K),-O[1]),f(m(xe,J),P[1]))),S[2]),f(y(f(m(De,ge),S[1]),y(f(m(Ae,F),-O[1]),f(m(pe,N),P[1]))),-w[2])),y(f(y(f(m(Se,K),S[1]),y(f(m(Ae,F),-w[1]),f(m(U,j),P[1]))),O[2]),f(y(f(m(xe,J),S[1]),y(f(m(pe,N),-w[1]),f(m(U,j),O[1]))),-P[2]))),E[3])),y(f(y(y(f(y(f(m(Oe,ce),w[1]),y(f(m(Se,K),-E[1]),f(m(re,te),P[1]))),S[2]),f(y(f(m(Oe,ce),S[1]),y(f(m(Ae,F),-E[1]),f(m(Z,D),P[1]))),-w[2])),y(f(y(f(m(Se,K),S[1]),y(f(m(Ae,F),-w[1]),f(m(U,j),P[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Z,D),-w[1]),f(m(U,j),E[1]))),-P[2]))),-O[3]),f(y(y(f(y(f(m(be,oe),w[1]),y(f(m(xe,J),-E[1]),f(m(re,te),O[1]))),S[2]),f(y(f(m(be,oe),S[1]),y(f(m(pe,N),-E[1]),f(m(Z,D),O[1]))),-w[2])),y(f(y(f(m(xe,J),S[1]),y(f(m(pe,N),-w[1]),f(m(U,j),O[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Z,D),-w[1]),f(m(U,j),E[1]))),-O[2]))),P[3]))))),Me=y(y(y(f(y(y(f(y(f(m(de,Ee),O[1]),y(f(m(De,ge),-C[1]),f(m(fe,ve),P[1]))),E[2]),f(y(f(m(de,Ee),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),-O[2])),y(f(y(f(m(De,ge),E[1]),y(f(m(Oe,ce),-O[1]),f(m(be,oe),P[1]))),C[2]),f(y(f(m(fe,ve),E[1]),y(f(m(ie,ae),-O[1]),f(m(be,oe),C[1]))),-P[2]))),S[3]),y(f(y(y(f(y(f(m(de,Ee),O[1]),y(f(m(De,ge),-C[1]),f(m(fe,ve),P[1]))),S[2]),f(y(f(m(de,Ee),S[1]),y(f(m(Ae,F),-C[1]),f(m(_e,W),P[1]))),-O[2])),y(f(y(f(m(De,ge),S[1]),y(f(m(Ae,F),-O[1]),f(m(pe,N),P[1]))),C[2]),f(y(f(m(fe,ve),S[1]),y(f(m(_e,W),-O[1]),f(m(pe,N),C[1]))),-P[2]))),-E[3]),f(y(y(f(y(f(m(de,Ee),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),S[2]),f(y(f(m(de,Ee),S[1]),y(f(m(Ae,F),-C[1]),f(m(_e,W),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(Ae,F),-E[1]),f(m(Z,D),P[1]))),C[2]),f(y(f(m(ie,ae),S[1]),y(f(m(_e,W),-E[1]),f(m(Z,D),C[1]))),-P[2]))),O[3]))),y(y(f(y(y(f(y(f(m(De,ge),E[1]),y(f(m(Oe,ce),-O[1]),f(m(be,oe),P[1]))),S[2]),f(y(f(m(De,ge),S[1]),y(f(m(Ae,F),-O[1]),f(m(pe,N),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(Ae,F),-E[1]),f(m(Z,D),P[1]))),O[2]),f(y(f(m(be,oe),S[1]),y(f(m(pe,N),-E[1]),f(m(Z,D),O[1]))),-P[2]))),-C[3]),f(y(y(f(y(f(m(fe,ve),E[1]),y(f(m(ie,ae),-O[1]),f(m(be,oe),C[1]))),S[2]),f(y(f(m(fe,ve),S[1]),y(f(m(_e,W),-O[1]),f(m(pe,N),C[1]))),-E[2])),y(f(y(f(m(ie,ae),S[1]),y(f(m(_e,W),-E[1]),f(m(Z,D),C[1]))),O[2]),f(y(f(m(be,oe),S[1]),y(f(m(pe,N),-E[1]),f(m(Z,D),O[1]))),-C[2]))),P[3])),y(f(y(y(f(y(f(m(de,Ee),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),w[2]),f(y(f(m(de,Ee),w[1]),y(f(m(Se,K),-C[1]),f(m(se,X),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),w[1]),y(f(m(Se,K),-E[1]),f(m(re,te),P[1]))),C[2]),f(y(f(m(ie,ae),w[1]),y(f(m(se,X),-E[1]),f(m(re,te),C[1]))),-P[2]))),S[3]),f(y(y(f(y(f(m(de,Ee),E[1]),y(f(m(Oe,ce),-C[1]),f(m(ie,ae),P[1]))),S[2]),f(y(f(m(de,Ee),S[1]),y(f(m(Ae,F),-C[1]),f(m(_e,W),P[1]))),-E[2])),y(f(y(f(m(Oe,ce),S[1]),y(f(m(Ae,F),-E[1]),f(m(Z,D),P[1]))),C[2]),f(y(f(m(ie,ae),S[1]),y(f(m(_e,W),-E[1]),f(m(Z,D),C[1]))),-P[2]))),-w[3])))),y(y(y(f(y(y(f(y(f(m(de,Ee),w[1]),y(f(m(Se,K),-C[1]),f(m(se,X),P[1]))),S[2]),f(y(f(m(de,Ee),S[1]),y(f(m(Ae,F),-C[1]),f(m(_e,W),P[1]))),-w[2])),y(f(y(f(m(Se,K),S[1]),y(f(m(Ae,F),-w[1]),f(m(U,j),P[1]))),C[2]),f(y(f(m(se,X),S[1]),y(f(m(_e,W),-w[1]),f(m(U,j),C[1]))),-P[2]))),E[3]),f(y(y(f(y(f(m(Oe,ce),w[1]),y(f(m(Se,K),-E[1]),f(m(re,te),P[1]))),S[2]),f(y(f(m(Oe,ce),S[1]),y(f(m(Ae,F),-E[1]),f(m(Z,D),P[1]))),-w[2])),y(f(y(f(m(Se,K),S[1]),y(f(m(Ae,F),-w[1]),f(m(U,j),P[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Z,D),-w[1]),f(m(U,j),E[1]))),-P[2]))),-C[3])),y(f(y(y(f(y(f(m(ie,ae),w[1]),y(f(m(se,X),-E[1]),f(m(re,te),C[1]))),S[2]),f(y(f(m(ie,ae),S[1]),y(f(m(_e,W),-E[1]),f(m(Z,D),C[1]))),-w[2])),y(f(y(f(m(se,X),S[1]),y(f(m(_e,W),-w[1]),f(m(U,j),C[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Z,D),-w[1]),f(m(U,j),E[1]))),-C[2]))),P[3]),f(y(y(f(y(f(m(fe,ve),E[1]),y(f(m(ie,ae),-O[1]),f(m(be,oe),C[1]))),w[2]),f(y(f(m(fe,ve),w[1]),y(f(m(se,X),-O[1]),f(m(xe,J),C[1]))),-E[2])),y(f(y(f(m(ie,ae),w[1]),y(f(m(se,X),-E[1]),f(m(re,te),C[1]))),O[2]),f(y(f(m(be,oe),w[1]),y(f(m(xe,J),-E[1]),f(m(re,te),O[1]))),-C[2]))),S[3]))),y(y(f(y(y(f(y(f(m(fe,ve),E[1]),y(f(m(ie,ae),-O[1]),f(m(be,oe),C[1]))),S[2]),f(y(f(m(fe,ve),S[1]),y(f(m(_e,W),-O[1]),f(m(pe,N),C[1]))),-E[2])),y(f(y(f(m(ie,ae),S[1]),y(f(m(_e,W),-E[1]),f(m(Z,D),C[1]))),O[2]),f(y(f(m(be,oe),S[1]),y(f(m(pe,N),-E[1]),f(m(Z,D),O[1]))),-C[2]))),-w[3]),f(y(y(f(y(f(m(fe,ve),w[1]),y(f(m(se,X),-O[1]),f(m(xe,J),C[1]))),S[2]),f(y(f(m(fe,ve),S[1]),y(f(m(_e,W),-O[1]),f(m(pe,N),C[1]))),-w[2])),y(f(y(f(m(se,X),S[1]),y(f(m(_e,W),-w[1]),f(m(U,j),C[1]))),O[2]),f(y(f(m(xe,J),S[1]),y(f(m(pe,N),-w[1]),f(m(U,j),O[1]))),-C[2]))),E[3])),y(f(y(y(f(y(f(m(ie,ae),w[1]),y(f(m(se,X),-E[1]),f(m(re,te),C[1]))),S[2]),f(y(f(m(ie,ae),S[1]),y(f(m(_e,W),-E[1]),f(m(Z,D),C[1]))),-w[2])),y(f(y(f(m(se,X),S[1]),y(f(m(_e,W),-w[1]),f(m(U,j),C[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Z,D),-w[1]),f(m(U,j),E[1]))),-C[2]))),-O[3]),f(y(y(f(y(f(m(be,oe),w[1]),y(f(m(xe,J),-E[1]),f(m(re,te),O[1]))),S[2]),f(y(f(m(be,oe),S[1]),y(f(m(pe,N),-E[1]),f(m(Z,D),O[1]))),-w[2])),y(f(y(f(m(xe,J),S[1]),y(f(m(pe,N),-w[1]),f(m(U,j),O[1]))),E[2]),f(y(f(m(re,te),S[1]),y(f(m(Z,D),-w[1]),f(m(U,j),E[1]))),-O[2]))),C[3]))))),ze=m(me,Me);return ze[ze.length-1]}}var d=[function(){return 0},function(){return 0},function(){return 0}];function g(y){var m=d[y.length];return m||(m=d[y.length]=l(y.length)),m.apply(void 0,y)}function v(y,m,_,f,S,w,E,O){return function(C,P,R,j,D,N){switch(arguments.length){case 0:case 1:return 0;case 2:return f(C,P);case 3:return S(C,P,R);case 4:return w(C,P,R,j);case 5:return E(C,P,R,j,D);case 6:return O(C,P,R,j,D,N)}for(var W=new Array(arguments.length),F=0;F<arguments.length;++F)W[F]=arguments[F];return y(W)}}(function(){for(;d.length<=6;)d.push(l(d.length));h.exports=v.apply(void 0,[g].concat(d));for(var y=0;y<=6;++y)h.exports[y]=d[y]})()},727:function(h,s,t){var a=t(2962);function n(d){return(d===2?r:d===3?i:d===4?l:d===5?u:p)(d<6?a[d]:a)}function r(d){return function(g,v){return[d([[+v[0],+g[0][1]],[+v[1],+g[1][1]]]),d([[+g[0][0],+v[0]],[+g[1][0],+v[1]]]),d(g)]}}function i(d){return function(g,v){return[d([[+v[0],+g[0][1],+g[0][2]],[+v[1],+g[1][1],+g[1][2]],[+v[2],+g[2][1],+g[2][2]]]),d([[+g[0][0],+v[0],+g[0][2]],[+g[1][0],+v[1],+g[1][2]],[+g[2][0],+v[2],+g[2][2]]]),d([[+g[0][0],+g[0][1],+v[0]],[+g[1][0],+g[1][1],+v[1]],[+g[2][0],+g[2][1],+v[2]]]),d(g)]}}function l(d){return function(g,v){return[d([[+v[0],+g[0][1],+g[0][2],+g[0][3]],[+v[1],+g[1][1],+g[1][2],+g[1][3]],[+v[2],+g[2][1],+g[2][2],+g[2][3]],[+v[3],+g[3][1],+g[3][2],+g[3][3]]]),d([[+g[0][0],+v[0],+g[0][2],+g[0][3]],[+g[1][0],+v[1],+g[1][2],+g[1][3]],[+g[2][0],+v[2],+g[2][2],+g[2][3]],[+g[3][0],+v[3],+g[3][2],+g[3][3]]]),d([[+g[0][0],+g[0][1],+v[0],+g[0][3]],[+g[1][0],+g[1][1],+v[1],+g[1][3]],[+g[2][0],+g[2][1],+v[2],+g[2][3]],[+g[3][0],+g[3][1],+v[3],+g[3][3]]]),d([[+g[0][0],+g[0][1],+g[0][2],+v[0]],[+g[1][0],+g[1][1],+g[1][2],+v[1]],[+g[2][0],+g[2][1],+g[2][2],+v[2]],[+g[3][0],+g[3][1],+g[3][2],+v[3]]]),d(g)]}}function u(d){return function(g,v){return[d([[+v[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+v[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+v[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+v[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+v[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),d([[+g[0][0],+v[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+v[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+v[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+v[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+v[4],+g[4][2],+g[4][3],+g[4][4]]]),d([[+g[0][0],+g[0][1],+v[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+v[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+v[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+v[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+v[4],+g[4][3],+g[4][4]]]),d([[+g[0][0],+g[0][1],+g[0][2],+v[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+v[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+v[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+v[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+v[4],+g[4][4]]]),d([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+v[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+v[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+v[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+v[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+v[4]]]),d(g)]}}function p(d){return function(g,v){return[d([[+v[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+v[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+v[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+v[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+v[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+v[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),d([[+g[0][0],+v[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+v[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+v[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+v[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+v[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+v[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),d([[+g[0][0],+g[0][1],+v[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+v[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+v[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+v[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+v[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+v[5],+g[5][3],+g[5][4],+g[5][5]]]),d([[+g[0][0],+g[0][1],+g[0][2],+v[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+v[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+v[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+v[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+v[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+v[5],+g[5][4],+g[5][5]]]),d([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+v[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+v[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+v[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+v[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+v[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+v[5],+g[5][5]]]),d([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+v[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+v[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+v[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+v[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+v[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+v[5]]]),d(g)]}}var c=[function(){return[[0]]},function(d,g){return[[g[0]],[d[0][0]]]}];function x(d,g,v,y,m,_,f,S){return function(w,E){switch(w.length){case 0:return d(w,E);case 1:return g(w,E);case 2:return v(w,E);case 3:return y(w,E);case 4:return m(w,E);case 5:return _(w,E)}var O=f[w.length];return O||(O=f[w.length]=S(w.length)),O(w,E)}}(function(){for(;c.length<6;)c.push(n(c.length));h.exports=x.apply(void 0,c.concat([c,n]));for(var d=0;d<6;++d)h.exports[d]=c[d]})()},3250:function(h,s,t){var a=t(5250),n=t(8210),r=t(3012),i=t(8545);function l(m,_,f,S){return function(w,E,O){var C=m(m(_(E[1],O[0]),_(-O[1],E[0])),m(_(w[1],E[0]),_(-E[1],w[0]))),P=m(_(w[1],O[0]),_(-O[1],w[0])),R=S(C,P);return R[R.length-1]}}function u(m,_,f,S){return function(w,E,O,C){var P=m(m(f(m(_(O[1],C[0]),_(-C[1],O[0])),E[2]),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),-O[2]),f(m(_(E[1],O[0]),_(-O[1],E[0])),C[2]))),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),C[2])))),R=m(m(f(m(_(O[1],C[0]),_(-C[1],O[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-O[2]),f(m(_(w[1],O[0]),_(-O[1],w[0])),C[2]))),m(f(m(_(E[1],O[0]),_(-O[1],E[0])),w[2]),m(f(m(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),O[2])))),j=S(P,R);return j[j.length-1]}}function p(m,_,f,S){return function(w,E,O,C,P){var R=m(m(m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),O[2]),m(f(m(_(O[1],P[0]),_(-P[1],O[0])),-C[2]),f(m(_(O[1],C[0]),_(-C[1],O[0])),P[2]))),E[3]),m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),f(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),-O[3]),f(m(f(m(_(O[1],P[0]),_(-P[1],O[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-O[2]),f(m(_(E[1],O[0]),_(-O[1],E[0])),P[2]))),C[3]))),m(f(m(f(m(_(O[1],C[0]),_(-C[1],O[0])),E[2]),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),-O[2]),f(m(_(E[1],O[0]),_(-O[1],E[0])),C[2]))),-P[3]),m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),f(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),w[3]),f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),f(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),-E[3])))),m(m(f(m(f(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),C[3]),m(f(m(f(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),-P[3]),f(m(f(m(_(O[1],C[0]),_(-C[1],O[0])),E[2]),m(f(m(_(E[1],C[0]),_(-C[1],E[0])),-O[2]),f(m(_(E[1],O[0]),_(-O[1],E[0])),C[2]))),w[3]))),m(f(m(f(m(_(O[1],C[0]),_(-C[1],O[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-O[2]),f(m(_(w[1],O[0]),_(-O[1],w[0])),C[2]))),-E[3]),m(f(m(f(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),O[3]),f(m(f(m(_(E[1],O[0]),_(-O[1],E[0])),w[2]),m(f(m(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),-C[3]))))),j=m(m(m(f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),O[2]),m(f(m(_(O[1],P[0]),_(-P[1],O[0])),-C[2]),f(m(_(O[1],C[0]),_(-C[1],O[0])),P[2]))),w[3]),f(m(f(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),f(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),-O[3])),m(f(m(f(m(_(O[1],P[0]),_(-P[1],O[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-O[2]),f(m(_(w[1],O[0]),_(-O[1],w[0])),P[2]))),C[3]),f(m(f(m(_(O[1],C[0]),_(-C[1],O[0])),w[2]),m(f(m(_(w[1],C[0]),_(-C[1],w[0])),-O[2]),f(m(_(w[1],O[0]),_(-O[1],w[0])),C[2]))),-P[3]))),m(m(f(m(f(m(_(O[1],P[0]),_(-P[1],O[0])),E[2]),m(f(m(_(E[1],P[0]),_(-P[1],E[0])),-O[2]),f(m(_(E[1],O[0]),_(-O[1],E[0])),P[2]))),w[3]),f(m(f(m(_(O[1],P[0]),_(-P[1],O[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-O[2]),f(m(_(w[1],O[0]),_(-O[1],w[0])),P[2]))),-E[3])),m(f(m(f(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(f(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),O[3]),f(m(f(m(_(E[1],O[0]),_(-O[1],E[0])),w[2]),m(f(m(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(m(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),-P[3])))),D=S(R,j);return D[D.length-1]}}function c(m){return(m===3?l:m===4?u:p)(n,a,r,i)}var x=c(3),d=c(4),g=[function(){return 0},function(){return 0},function(m,_){return _[0]-m[0]},function(m,_,f){var S,w=(m[1]-f[1])*(_[0]-f[0]),E=(m[0]-f[0])*(_[1]-f[1]),O=w-E;if(w>0){if(E<=0)return O;S=w+E}else{if(!(w<0)||E>=0)return O;S=-(w+E)}var C=33306690738754716e-32*S;return O>=C||O<=-C?O:x(m,_,f)},function(m,_,f,S){var w=m[0]-S[0],E=_[0]-S[0],O=f[0]-S[0],C=m[1]-S[1],P=_[1]-S[1],R=f[1]-S[1],j=m[2]-S[2],D=_[2]-S[2],N=f[2]-S[2],W=E*R,F=O*P,V=O*C,U=w*R,te=w*P,J=E*C,X=j*(W-F)+D*(V-U)+N*(te-J),K=7771561172376103e-31*((Math.abs(W)+Math.abs(F))*Math.abs(j)+(Math.abs(V)+Math.abs(U))*Math.abs(D)+(Math.abs(te)+Math.abs(J))*Math.abs(N));return X>K||-X>K?X:d(m,_,f,S)}];function v(m){var _=g[m.length];return _||(_=g[m.length]=c(m.length)),_.apply(void 0,m)}function y(m,_,f,S,w,E,O){return function(C,P,R,j,D){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,P);case 3:return w(C,P,R);case 4:return E(C,P,R,j);case 5:return O(C,P,R,j,D)}for(var N=new Array(arguments.length),W=0;W<arguments.length;++W)N[W]=arguments[W];return m(N)}}(function(){for(;g.length<=5;)g.push(c(g.length));h.exports=y.apply(void 0,[v].concat(g));for(var m=0;m<=5;++m)h.exports[m]=g[m]})()},5382:function(h,s,t){var a=t(8210),n=t(3012);h.exports=function(r,i){if(r.length===1)return n(i,r[0]);if(i.length===1)return n(r,i[0]);if(r.length===0||i.length===0)return[0];var l=[0];if(r.length<i.length)for(var u=0;u<r.length;++u)l=a(l,n(i,r[u]));else for(u=0;u<i.length;++u)l=a(l,n(r,i[u]));return l}},3012:function(h,s,t){var a=t(5250),n=t(9362);h.exports=function(r,i){var l=r.length;if(l===1){var u=a(r[0],i);return u[0]?u:[u[1]]}var p=new Array(2*l),c=[.1,.1],x=[.1,.1],d=0;a(r[0],i,c),c[0]&&(p[d++]=c[0]);for(var g=1;g<l;++g){a(r[g],i,x);var v=c[1];n(v,x[0],c),c[0]&&(p[d++]=c[0]);var y=x[1],m=c[1],_=y+m,f=m-(_-y);c[1]=_,f&&(p[d++]=f)}return c[1]&&(p[d++]=c[1]),d===0&&(p[d++]=0),p.length=d,p}},1125:function(h,s,t){h.exports=function(n,r,i,l){var u=a(n,i,l),p=a(r,i,l);if(u>0&&p>0||u<0&&p<0)return!1;var c=a(i,n,r),x=a(l,n,r);return!(c>0&&x>0||c<0&&x<0)&&(u!==0||p!==0||c!==0||x!==0||function(d,g,v,y){for(var m=0;m<2;++m){var _=d[m],f=g[m],S=Math.min(_,f),w=Math.max(_,f),E=v[m],O=y[m],C=Math.min(E,O);if(Math.max(E,O)<S||w<C)return!1}return!0}(n,r,i,l))};var a=t(3250)[3]},8545:function(h){h.exports=function(s,t){var a=0|s.length,n=0|t.length;if(a===1&&n===1)return function(C,P){var R=C+P,j=R-C,D=C-(R-j)+(P-j);return D?[D,R]:[R]}(s[0],-t[0]);var r,i,l=new Array(a+n),u=0,p=0,c=0,x=Math.abs,d=s[p],g=x(d),v=-t[c],y=x(v);g<y?(i=d,(p+=1)<a&&(g=x(d=s[p]))):(i=v,(c+=1)<n&&(y=x(v=-t[c]))),p<a&&g<y||c>=n?(r=d,(p+=1)<a&&(g=x(d=s[p]))):(r=v,(c+=1)<n&&(y=x(v=-t[c])));for(var m,_,f=r+i,S=f-r,w=i-S,E=w,O=f;p<a&&c<n;)g<y?(r=d,(p+=1)<a&&(g=x(d=s[p]))):(r=v,(c+=1)<n&&(y=x(v=-t[c]))),(w=(i=E)-(S=(f=r+i)-r))&&(l[u++]=w),E=O-((m=O+f)-(_=m-O))+(f-_),O=m;for(;p<a;)(w=(i=E)-(S=(f=(r=d)+i)-r))&&(l[u++]=w),E=O-((m=O+f)-(_=m-O))+(f-_),O=m,(p+=1)<a&&(d=s[p]);for(;c<n;)(w=(i=E)-(S=(f=(r=v)+i)-r))&&(l[u++]=w),E=O-((m=O+f)-(_=m-O))+(f-_),O=m,(c+=1)<n&&(v=-t[c]);return E&&(l[u++]=E),O&&(l[u++]=O),u||(l[u++]=0),l.length=u,l}},8210:function(h){h.exports=function(s,t){var a=0|s.length,n=0|t.length;if(a===1&&n===1)return function(C,P){var R=C+P,j=R-C,D=C-(R-j)+(P-j);return D?[D,R]:[R]}(s[0],t[0]);var r,i,l=new Array(a+n),u=0,p=0,c=0,x=Math.abs,d=s[p],g=x(d),v=t[c],y=x(v);g<y?(i=d,(p+=1)<a&&(g=x(d=s[p]))):(i=v,(c+=1)<n&&(y=x(v=t[c]))),p<a&&g<y||c>=n?(r=d,(p+=1)<a&&(g=x(d=s[p]))):(r=v,(c+=1)<n&&(y=x(v=t[c])));for(var m,_,f=r+i,S=f-r,w=i-S,E=w,O=f;p<a&&c<n;)g<y?(r=d,(p+=1)<a&&(g=x(d=s[p]))):(r=v,(c+=1)<n&&(y=x(v=t[c]))),(w=(i=E)-(S=(f=r+i)-r))&&(l[u++]=w),E=O-((m=O+f)-(_=m-O))+(f-_),O=m;for(;p<a;)(w=(i=E)-(S=(f=(r=d)+i)-r))&&(l[u++]=w),E=O-((m=O+f)-(_=m-O))+(f-_),O=m,(p+=1)<a&&(d=s[p]);for(;c<n;)(w=(i=E)-(S=(f=(r=v)+i)-r))&&(l[u++]=w),E=O-((m=O+f)-(_=m-O))+(f-_),O=m,(c+=1)<n&&(v=t[c]);return E&&(l[u++]=E),O&&(l[u++]=O),u||(l[u++]=0),l.length=u,l}},9127:function(h,s,t){h.exports=function(r){return n(a(r))};var a=t(6204),n=t(5771)},7765:function(h,s,t){h.exports=function(l,u,p,c){if(p=p||0,c===void 0&&(c=function(f){for(var S=f.length,w=0,E=0;E<S;++E)w=0|Math.max(w,f[E].length);return w-1}(l)),l.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(f,S){for(var w=f.length,E=n.mallocUint8(w),O=0;O<w;++O)E[O]=f[O]<S|0;return E}(u,+p),d=function(f,S){for(var w=f.length,E=S*(S+1)/2*w|0,O=n.mallocUint32(2*E),C=0,P=0;P<w;++P)for(var R=f[P],j=(S=R.length,0);j<S;++j)for(var D=0;D<j;++D){var N=R[D],W=R[j];O[C++]=0|Math.min(N,W),O[C++]=0|Math.max(N,W)}r(a(O,[C/2|0,2]));var F=2;for(P=2;P<C;P+=2)O[P-2]===O[P]&&O[P-1]===O[P+1]||(O[F++]=O[P],O[F++]=O[P+1]);return a(O,[F/2|0,2])}(l,c),g=function(f,S,w,E){for(var O=f.data,C=f.shape[0],P=n.mallocDouble(C),R=0,j=0;j<C;++j){var D=O[2*j],N=O[2*j+1];if(w[D]!==w[N]){var W=S[D],F=S[N];O[2*R]=D,O[2*R+1]=N,P[R++]=(F-E)/(F-W)}}return f.shape[0]=R,a(P,[R])}(d,u,x,+p),v=function(f,S){var w=n.mallocInt32(2*S),E=f.shape[0],O=f.data;w[0]=0;for(var C=0,P=0;P<E;++P){var R=O[2*P];if(R!==C){for(w[2*C+1]=P;++C<R;)w[2*C]=P,w[2*C+1]=P;w[2*C]=P}}for(w[2*C+1]=E;++C<S;)w[2*C]=w[2*C+1]=E;return w}(d,0|u.length),y=i(c)(l,d.data,v,x),m=function(f){for(var S=0|f.shape[0],w=f.data,E=new Array(S),O=0;O<S;++O)E[O]=[w[2*O],w[2*O+1]];return E}(d),_=[].slice.call(g.data,0,g.shape[0]);return n.free(x),n.free(d.data),n.free(g.data),n.free(v),{cells:y,vertexIds:m,vertexWeights:_}};var a=t(9618),n=t(1888),r=t(446),i=t(1570)},1570:function(h){h.exports=function(t){return s[t]()};var s=[function(){return function(t,a,n,r){for(var i=t.length,l=0;l<i;++l)t[l].length;return[]}},function(){function t(a,n,r,i){for(var l=0|Math.min(r,i),u=0|Math.max(r,i),p=a[2*l],c=a[2*l+1];p<c;){var x=p+c>>1,d=n[2*x+1];if(d===u)return x;u<d?c=x:p=x+1}return p}return function(a,n,r,i){for(var l=a.length,u=[],p=0;p<l;++p){var c=a[p];if(c.length===2){var x=(i[c[0]]<<0)+(i[c[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(a,n,r,i){for(var l=0|Math.min(r,i),u=0|Math.max(r,i),p=a[2*l],c=a[2*l+1];p<c;){var x=p+c>>1,d=n[2*x+1];if(d===u)return x;u<d?c=x:p=x+1}return p}return function(a,n,r,i){for(var l=a.length,u=[],p=0;p<l;++p){var c=a[p],x=c.length;if(x===3){if((d=(i[c[0]]<<0)+(i[c[1]]<<1)+(i[c[2]]<<2))==0||d===7)continue;switch(d){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(x===2){var d;if((d=(i[c[0]]<<0)+(i[c[1]]<<1))==0||d===3)continue;switch(d){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(a,n,r,i){for(var l=0|Math.min(r,i),u=0|Math.max(r,i),p=a[2*l],c=a[2*l+1];p<c;){var x=p+c>>1,d=n[2*x+1];if(d===u)return x;u<d?c=x:p=x+1}return p}return function(a,n,r,i){for(var l=a.length,u=[],p=0;p<l;++p){var c=a[p],x=c.length;if(x===4){if((d=(i[c[0]]<<0)+(i[c[1]]<<1)+(i[c[2]]<<2)+(i[c[3]]<<3))==0||d===15)continue;switch(d){case 0:case 15:break;case 1:u.push([t(r,n,c[0],c[1]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])]);break;case 2:u.push([t(r,n,c[1],c[2]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])]);break;case 3:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])],[t(r,n,c[1],c[3]),t(r,n,c[1],c[2]),t(r,n,c[0],c[3])]);break;case 4:u.push([t(r,n,c[2],c[0]),t(r,n,c[2],c[1]),t(r,n,c[2],c[3])]);break;case 5:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[0],c[3])],[t(r,n,c[2],c[1]),t(r,n,c[2],c[3]),t(r,n,c[0],c[3])]);break;case 6:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])],[t(r,n,c[2],c[3]),t(r,n,c[2],c[0]),t(r,n,c[1],c[3])]);break;case 7:u.push([t(r,n,c[0],c[3]),t(r,n,c[1],c[3]),t(r,n,c[2],c[3])]);break;case 8:u.push([t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[3],c[2])]);break;case 9:u.push([t(r,n,c[3],c[1]),t(r,n,c[0],c[1]),t(r,n,c[0],c[2])],[t(r,n,c[3],c[2]),t(r,n,c[3],c[1]),t(r,n,c[0],c[2])]);break;case 10:u.push([t(r,n,c[1],c[0]),t(r,n,c[3],c[0]),t(r,n,c[1],c[2])],[t(r,n,c[3],c[0]),t(r,n,c[3],c[2]),t(r,n,c[1],c[2])]);break;case 11:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[3],c[2])]);break;case 12:u.push([t(r,n,c[3],c[0]),t(r,n,c[2],c[0]),t(r,n,c[2],c[1])],[t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[2],c[1])]);break;case 13:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[3],c[1])]);break;case 14:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[3],c[0])])}}else if(x===3){if((d=(i[c[0]]<<0)+(i[c[1]]<<1)+(i[c[2]]<<2))==0||d===7)continue;switch(d){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(x===2){var d;if((d=(i[c[0]]<<0)+(i[c[1]]<<1))==0||d===3)continue;switch(d){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}}]},6803:function(h,s,t){t(8828),t(1755);function a(n,r){var i=n.length,l=n.length-r.length,u=Math.min;if(l)return l;switch(i){case 0:return 0;case 1:return n[0]-r[0];case 2:return(x=n[0]+n[1]-r[0]-r[1])||u(n[0],n[1])-u(r[0],r[1]);case 3:var p=n[0]+n[1],c=r[0]+r[1];if(x=p+n[2]-(c+r[2]))return x;var x,d=u(n[0],n[1]),g=u(r[0],r[1]);return(x=u(d,n[2])-u(g,r[2]))||u(d+n[2],p)-u(g+r[2],c);default:var v=n.slice(0);v.sort();var y=r.slice(0);y.sort();for(var m=0;m<i;++m)if(l=v[m]-y[m])return l;return 0}}s.Fw=a},3105:function(h,s){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,i;return r=(n>65535)<<4,r|=i=((n>>>=r)>255)<<3,r|=i=((n>>>=i)>15)<<2,(r|=i=((n>>>=i)>3)<<1)|(n>>>=i)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var a=new Array(256);(function(n){for(var r=0;r<256;++r){var i=r,l=r,u=7;for(i>>>=1;i;i>>>=1)l<<=1,l|=1&i,--u;n[r]=l<<u&255}})(a),s.reverse=function(n){return a[255&n]<<24|a[n>>>8&255]<<16|a[n>>>16&255]<<8|a[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,i){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},2014:function(h,s,t){var a=t(3105),n=t(4623);function r(d,g){var v=d.length,y=d.length-g.length,m=Math.min;if(y)return y;switch(v){case 0:return 0;case 1:return d[0]-g[0];case 2:return(S=d[0]+d[1]-g[0]-g[1])||m(d[0],d[1])-m(g[0],g[1]);case 3:var _=d[0]+d[1],f=g[0]+g[1];if(S=_+d[2]-(f+g[2]))return S;var S,w=m(d[0],d[1]),E=m(g[0],g[1]);return(S=m(w,d[2])-m(E,g[2]))||m(w+d[2],_)-m(E+g[2],f);default:var O=d.slice(0);O.sort();var C=g.slice(0);C.sort();for(var P=0;P<v;++P)if(y=O[P]-C[P])return y;return 0}}function i(d,g){return r(d[0],g[0])}function l(d,g){if(g){for(var v=d.length,y=new Array(v),m=0;m<v;++m)y[m]=[d[m],g[m]];for(y.sort(i),m=0;m<v;++m)d[m]=y[m][0],g[m]=y[m][1];return d}return d.sort(r),d}function u(d){if(d.length===0)return[];for(var g=1,v=d.length,y=1;y<v;++y){var m=d[y];if(r(m,d[y-1])){if(y===g){g++;continue}d[g++]=m}}return d.length=g,d}function p(d,g){for(var v=0,y=d.length-1,m=-1;v<=y;){var _=v+y>>1,f=r(d[_],g);f<=0?(f===0&&(m=_),v=_+1):f>0&&(y=_-1)}return m}function c(d,g){for(var v=new Array(d.length),y=0,m=v.length;y<m;++y)v[y]=[];for(var _=[],f=(y=0,g.length);y<f;++y)for(var S=g[y],w=S.length,E=1,O=1<<w;E<O;++E){_.length=a.popCount(E);for(var C=0,P=0;P<w;++P)E&1<<P&&(_[C++]=S[P]);var R=p(d,_);if(!(R<0))for(;v[R++].push(y),!(R>=d.length||r(d[R],_)!==0););}return v}function x(d,g){if(g<0)return[];for(var v=[],y=(1<<g+1)-1,m=0;m<d.length;++m)for(var _=d[m],f=y;f<1<<_.length;f=a.nextCombination(f)){for(var S=new Array(g+1),w=0,E=0;E<_.length;++E)f&1<<E&&(S[w++]=_[E]);v.push(S)}return l(v)}s.dimension=function(d){for(var g=0,v=Math.max,y=0,m=d.length;y<m;++y)g=v(g,d[y].length);return g-1},s.countVertices=function(d){for(var g=-1,v=Math.max,y=0,m=d.length;y<m;++y)for(var _=d[y],f=0,S=_.length;f<S;++f)g=v(g,_[f]);return g+1},s.cloneCells=function(d){for(var g=new Array(d.length),v=0,y=d.length;v<y;++v)g[v]=d[v].slice(0);return g},s.compareCells=r,s.normalize=l,s.unique=u,s.findCell=p,s.incidence=c,s.dual=function(d,g){if(!g)return c(u(x(d,0)),d);for(var v=new Array(g),y=0;y<g;++y)v[y]=[];y=0;for(var m=d.length;y<m;++y)for(var _=d[y],f=0,S=_.length;f<S;++f)v[_[f]].push(y);return v},s.explode=function(d){for(var g=[],v=0,y=d.length;v<y;++v)for(var m=d[v],_=0|m.length,f=1,S=1<<_;f<S;++f){for(var w=[],E=0;E<_;++E)f>>>E&1&&w.push(m[E]);g.push(w)}return l(g)},s.skeleton=x,s.boundary=function(d){for(var g=[],v=0,y=d.length;v<y;++v)for(var m=d[v],_=0,f=m.length;_<f;++_){for(var S=new Array(m.length-1),w=0,E=0;w<f;++w)w!==_&&(S[E++]=m[w]);g.push(S)}return l(g)},s.connectedComponents=function(d,g){return g?function(v,y){for(var m=new n(y),_=0;_<v.length;++_)for(var f=v[_],S=0;S<f.length;++S)for(var w=S+1;w<f.length;++w)m.link(f[S],f[w]);var E=[],O=m.ranks;for(_=0;_<O.length;++_)O[_]=-1;for(_=0;_<v.length;++_){var C=m.find(v[_][0]);O[C]<0?(O[C]=E.length,E.push([v[_].slice(0)])):E[O[C]].push(v[_].slice(0))}return E}(d,g):function(v){for(var y=u(l(x(v,0))),m=new n(y.length),_=0;_<v.length;++_)for(var f=v[_],S=0;S<f.length;++S)for(var w=p(y,[f[S]]),E=S+1;E<f.length;++E)m.link(w,p(y,[f[E]]));var O=[],C=m.ranks;for(_=0;_<C.length;++_)C[_]=-1;for(_=0;_<v.length;++_){var P=m.find(p(y,[v[_][0]]));C[P]<0?(C[P]=O.length,O.push([v[_].slice(0)])):O[C[P]].push(v[_].slice(0))}return O}(d)}},4623:function(h){function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var a=0;a<t;++a)this.roots[a]=a,this.ranks[a]=0}h.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var a=this.roots;a[t]!==t;){var n=a[t];a[t]=a[n],t=n}return t},s.prototype.link=function(t,a){var n=this.find(t),r=this.find(a);if(n!==r){var i=this.ranks,l=this.roots,u=i[n],p=i[r];u<p?l[n]=r:p<u?l[r]=n:(l[r]=n,++i[n])}}},5878:function(h,s,t){h.exports=function(r,i,l){for(var u=i.length,p=r.length,c=new Array(u),x=new Array(u),d=new Array(u),g=new Array(u),v=0;v<u;++v)c[v]=x[v]=-1,d[v]=1/0,g[v]=!1;for(v=0;v<p;++v){var y=r[v];if(y.length!==2)throw new Error("Input must be a graph");var m=y[1],_=y[0];x[_]!==-1?x[_]=-2:x[_]=m,c[m]!==-1?c[m]=-2:c[m]=_}function f(J){if(g[J])return 1/0;var X,K,Q,Z=c[J],re=x[J];return Z<0||re<0?1/0:(X=i[J],K=i[Z],Q=i[re],Math.abs(a(X,K,Q))/Math.sqrt(Math.pow(K[0]-Q[0],2)+Math.pow(K[1]-Q[1],2)))}function S(J,X){var K=D[J],Q=D[X];D[J]=Q,D[X]=K,N[K]=X,N[Q]=J}function w(J){return d[D[J]]}function E(J){return 1&J?J-1>>1:(J>>1)-1}function O(J){for(var X=w(J);;){var K=X,Q=2*J+1,Z=2*(J+1),re=J;if(Q<W){var oe=w(Q);oe<K&&(re=Q,K=oe)}if(Z<W&&w(Z)<K&&(re=Z),re===J)return J;S(J,re),J=re}}function C(J){for(var X=w(J);J>0;){var K=E(J);if(!(K>=0&&X<w(K)))return J;S(J,K),J=K}}function P(){if(W>0){var J=D[0];return S(0,W-1),W-=1,O(0),J}return-1}function R(J,X){var K=D[J];return d[K]===X?J:(d[K]=-1/0,C(J),P(),d[K]=X,C((W+=1)-1))}function j(J){if(!g[J]){g[J]=!0;var X=c[J],K=x[J];c[K]>=0&&(c[K]=X),x[X]>=0&&(x[X]=K),N[X]>=0&&R(N[X],f(X)),N[K]>=0&&R(N[K],f(K))}}var D=[],N=new Array(u);for(v=0;v<u;++v)(d[v]=f(v))<1/0?(N[v]=D.length,D.push(v)):N[v]=-1;var W=D.length;for(v=W>>1;v>=0;--v)O(v);for(;;){var F=P();if(F<0||d[F]>l)break;j(F)}var V=[];for(v=0;v<u;++v)g[v]||(N[v]=V.length,V.push(i[v].slice()));function U(J,X){if(J[X]<0)return X;var K=X,Q=X;do{var Z=J[Q];if(!g[Q]||Z<0||Z===Q||(Z=J[Q=Z],!g[Q]||Z<0||Z===Q))break;Q=Z,K=J[K]}while(K!==Q);for(var re=X;re!==Q;re=J[re])J[re]=Q;return Q}V.length;var te=[];return r.forEach(function(J){var X=U(c,J[0]),K=U(x,J[1]);if(X>=0&&K>=0&&X!==K){var Q=N[X],Z=N[K];Q!==Z&&te.push([Q,Z])}}),n.unique(n.normalize(te)),{positions:V,edges:te}};var a=t(3250),n=t(2014)},1303:function(h,s,t){h.exports=function(r,i){var l,u,p,c;if(i[0][0]<i[1][0])l=i[0],u=i[1];else{if(!(i[0][0]>i[1][0]))return n(i,r);l=i[1],u=i[0]}if(r[0][0]<r[1][0])p=r[0],c=r[1];else{if(!(r[0][0]>r[1][0]))return-n(r,i);p=r[1],c=r[0]}var x=a(l,u,c),d=a(l,u,p);if(x<0){if(d<=0)return x}else if(x>0){if(d>=0)return x}else if(d)return d;if(x=a(c,p,u),d=a(c,p,l),x<0){if(d<=0)return x}else if(x>0){if(d>=0)return x}else if(d)return d;return u[0]-c[0]};var a=t(3250);function n(r,i){var l,u,p,c;if(i[0][0]<i[1][0])l=i[0],u=i[1];else{if(!(i[0][0]>i[1][0])){var x=Math.min(r[0][1],r[1][1]),d=Math.max(r[0][1],r[1][1]),g=Math.min(i[0][1],i[1][1]),v=Math.max(i[0][1],i[1][1]);return d<g?d-g:x>v?x-v:d-v}l=i[1],u=i[0]}r[0][1]<r[1][1]?(p=r[0],c=r[1]):(p=r[1],c=r[0]);var y=a(u,l,p);return y||(y=a(u,l,c))||c-u}},4209:function(h,s,t){h.exports=function(d){for(var g=d.length,v=2*g,y=new Array(v),m=0;m<g;++m){var _=d[m],f=_[0][0]<_[1][0];y[2*m]=new x(_[0][0],_,f,m),y[2*m+1]=new x(_[1][0],_,!f,m)}y.sort(function(j,D){var N=j.x-D.x;return N||(N=j.create-D.create)||Math.min(j.segment[0][1],j.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var S=n(i),w=[],E=[],O=[];for(m=0;m<v;){for(var C=y[m].x,P=[];m<v;){var R=y[m];if(R.x!==C)break;m+=1,R.segment[0][0]===R.x&&R.segment[1][0]===R.x?R.create&&(R.segment[0][1]<R.segment[1][1]?(P.push(new c(R.segment[0][1],R.index,!0,!0)),P.push(new c(R.segment[1][1],R.index,!1,!1))):(P.push(new c(R.segment[1][1],R.index,!0,!1)),P.push(new c(R.segment[0][1],R.index,!1,!0)))):S=R.create?S.insert(R.segment,R.index):S.remove(R.segment)}w.push(S.root),E.push(C),O.push(P)}return new l(w,E,O)};var a=t(2478),n=t(3840),r=t(3250),i=t(1303);function l(d,g,v){this.slabs=d,this.coordinates=g,this.horizontal=v}function u(d,g){return d.y-g}function p(d,g){for(var v=null;d;){var y,m,_=d.key;_[0][0]<_[1][0]?(y=_[0],m=_[1]):(y=_[1],m=_[0]);var f=r(y,m,g);if(f<0)d=d.left;else if(f>0)if(g[0]!==_[1][0])v=d,d=d.right;else{if(S=p(d.right,g))return S;d=d.left}else{if(g[0]!==_[1][0])return d;var S;if(S=p(d.right,g))return S;d=d.left}}return v}function c(d,g,v,y){this.y=d,this.index=g,this.start=v,this.closed=y}function x(d,g,v,y){this.x=d,this.segment=g,this.create=v,this.index=y}l.prototype.castUp=function(d){var g=a.le(this.coordinates,d[0]);if(g<0)return-1;this.slabs[g];var v=p(this.slabs[g],d),y=-1;if(v&&(y=v.value),this.coordinates[g]===d[0]){var m=null;if(v&&(m=v.key),g>0){var _=p(this.slabs[g-1],d);_&&(m?i(_.key,m)>0&&(m=_.key,y=_.value):(y=_.value,m=_.key))}var f=this.horizontal[g];if(f.length>0){var S=a.ge(f,d[1],u);if(S<f.length){var w=f[S];if(d[1]===w.y){if(w.closed)return w.index;for(;S<f.length-1&&f[S+1].y===d[1];)if((w=f[S+=1]).closed)return w.index;if(w.y===d[1]&&!w.start){if((S+=1)>=f.length)return y;w=f[S]}}if(w.start)if(m){var E=r(m[0],m[1],[d[0],w.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(y=w.index)}else y=w.index;else w.y!==d[1]&&(y=w.index)}}}return y}},5202:function(h,s,t){var a=t(1944),n=t(8210);function r(l,u){var p=n(a(l,u),[u[u.length-1]]);return p[p.length-1]}function i(l,u,p,c){var x=-u/(c-u);x<0?x=0:x>1&&(x=1);for(var d=1-x,g=l.length,v=new Array(g),y=0;y<g;++y)v[y]=x*l[y]+d*p[y];return v}h.exports=function(l,u){for(var p=[],c=[],x=r(l[l.length-1],u),d=l[l.length-1],g=l[0],v=0;v<l.length;++v,d=g){var y=r(g=l[v],u);if(x<0&&y>0||x>0&&y<0){var m=i(d,y,g,x);p.push(m),c.push(m.slice())}y<0?c.push(g.slice()):y>0?p.push(g.slice()):(p.push(g.slice()),c.push(g.slice())),x=y}return{positive:p,negative:c}},h.exports.positive=function(l,u){for(var p=[],c=r(l[l.length-1],u),x=l[l.length-1],d=l[0],g=0;g<l.length;++g,x=d){var v=r(d=l[g],u);(c<0&&v>0||c>0&&v<0)&&p.push(i(x,v,d,c)),v>=0&&p.push(d.slice()),c=v}return p},h.exports.negative=function(l,u){for(var p=[],c=r(l[l.length-1],u),x=l[l.length-1],d=l[0],g=0;g<l.length;++g,x=d){var v=r(d=l[g],u);(c<0&&v>0||c>0&&v<0)&&p.push(i(x,v,d,c)),v<=0&&p.push(d.slice()),c=v}return p}},3387:function(h,s,t){var a;(function(){var n={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(u){return function(p,c){var x,d,g,v,y,m,_,f,S,w=1,E=p.length,O="";for(d=0;d<E;d++)if(typeof p[d]=="string")O+=p[d];else if(typeof p[d]=="object"){if((v=p[d]).keys)for(x=c[w],g=0;g<v.keys.length;g++){if(x==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',v.keys[g],v.keys[g-1]));x=x[v.keys[g]]}else x=v.param_no?c[v.param_no]:c[w++];if(n.not_type.test(v.type)&&n.not_primitive.test(v.type)&&x instanceof Function&&(x=x()),n.numeric_arg.test(v.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(r("[sprintf] expecting number but found %T",x));switch(n.number.test(v.type)&&(f=x>=0),v.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,v.width?parseInt(v.width):0);break;case"e":x=v.precision?parseFloat(x).toExponential(v.precision):parseFloat(x).toExponential();break;case"f":x=v.precision?parseFloat(x).toFixed(v.precision):parseFloat(x);break;case"g":x=v.precision?String(Number(x.toPrecision(v.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=v.precision?x.substring(0,v.precision):x;break;case"t":x=String(!!x),x=v.precision?x.substring(0,v.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=v.precision?x.substring(0,v.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=v.precision?x.substring(0,v.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}n.json.test(v.type)?O+=x:(!n.number.test(v.type)||f&&!v.sign?S="":(S=f?"+":"-",x=x.toString().replace(n.sign,"")),m=v.pad_char?v.pad_char==="0"?"0":v.pad_char.charAt(1):" ",_=v.width-(S+x).length,y=v.width&&_>0?m.repeat(_):"",O+=v.align?S+x+y:m==="0"?S+y+x:y+S+x)}return O}(function(p){if(l[p])return l[p];for(var c,x=p,d=[],g=0;x;){if((c=n.text.exec(x))!==null)d.push(c[0]);else if((c=n.modulo.exec(x))!==null)d.push("%");else{if((c=n.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){g|=1;var v=[],y=c[2],m=[];if((m=n.key.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(v.push(m[1]);(y=y.substring(m[0].length))!=="";)if((m=n.key_access.exec(y))!==null)v.push(m[1]);else{if((m=n.index_access.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");v.push(m[1])}c[2]=v}else g|=2;if(g===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}x=x.substring(c[0].length)}return l[p]=d}(u),arguments)}function i(u,p){return r.apply(null,[u].concat(p||[]))}var l=Object.create(null);s.sprintf=r,s.vsprintf=i,typeof window<"u"&&(window.sprintf=r,window.vsprintf=i,(a=(function(){return{sprintf:r,vsprintf:i}}).call(s,t,s,h))===void 0||(h.exports=a))})()},3711:function(h,s,t){h.exports=function(l,u){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(x,d){for(var g=n(x,d),v=g.length,y=new Array(v),m=new Array(v),_=0;_<v;++_)y[_]=[g[_]],m[_]=[_];return{positions:y,cells:m}}(l,u);var p=l.order.join()+"-"+l.dtype,c=i[p];return u=+u||0,c||(c=i[p]=function(x,d){var g=x.length+"d",v=r[g];if(v)return v(a,x,d)}(l.order,l.dtype)),c(l,u)};var a=t(2640),n=t(781),r={"2d":function(l,u,p){var c=l({order:u,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(x,d,g,v){return x>v|0},vertex:function(x,d,g,v,y,m,_,f,S,w,E,O,C){var P=(_<<0)+(f<<1)+(S<<2)+(w<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([x-.5,d-.5]);break;case 1:E.push([x-.25-.25*(v+g-2*C)/(g-v),d-.25-.25*(y+g-2*C)/(g-y)]);break;case 2:E.push([x-.75-.25*(-v-g+2*C)/(v-g),d-.25-.25*(m+v-2*C)/(v-m)]);break;case 3:E.push([x-.5,d-.5-.5*(y+g+m+v-4*C)/(g-y+v-m)]);break;case 4:E.push([x-.25-.25*(m+y-2*C)/(y-m),d-.75-.25*(-y-g+2*C)/(y-g)]);break;case 5:E.push([x-.5-.5*(v+g+m+y-4*C)/(g-v+y-m),d-.5]);break;case 6:E.push([x-.5-.25*(-v-g+m+y)/(v-g+y-m),d-.5-.25*(-y-g+m+v)/(y-g+v-m)]);break;case 7:E.push([x-.75-.25*(m+y-2*C)/(y-m),d-.75-.25*(m+v-2*C)/(v-m)]);break;case 8:E.push([x-.75-.25*(-m-y+2*C)/(m-y),d-.75-.25*(-m-v+2*C)/(m-v)]);break;case 9:E.push([x-.5-.25*(v+g+-m-y)/(g-v+m-y),d-.5-.25*(y+g+-m-v)/(g-y+m-v)]);break;case 10:E.push([x-.5-.5*(-v-g-m-y+4*C)/(v-g+m-y),d-.5]);break;case 11:E.push([x-.25-.25*(-m-y+2*C)/(m-y),d-.75-.25*(y+g-2*C)/(g-y)]);break;case 12:E.push([x-.5,d-.5-.5*(-y-g-m-v+4*C)/(y-g+m-v)]);break;case 13:E.push([x-.75-.25*(v+g-2*C)/(g-v),d-.25-.25*(-m-v+2*C)/(m-v)]);break;case 14:E.push([x-.25-.25*(-v-g+2*C)/(v-g),d-.25-.25*(-y-g+2*C)/(y-g)])}},cell:function(x,d,g,v,y,m,_,f,S){y?f.push([x,d]):f.push([d,x])}});return function(x,d){var g=[],v=[];return c(x,g,v,d),{positions:g,cells:v}}}},i={}},529:function(h,s,t){h.exports=function i(l,u,p){var c=(p=p||{}).fontStyle||"normal",x=p.fontWeight||"normal",d=p.fontVariant||"normal",g=[c,x,d,l].join("_"),v=r[g];v||(v=r[g]={" ":{data:new Float32Array(0),shape:.2}});var y=v[u];if(!y)if(u.length<=1||!/\d/.test(u))y=v[u]=function(j){for(var D=j.cells,N=j.positions,W=new Float32Array(6*D.length),F=0,V=0,U=0;U<D.length;++U)for(var te=D[U],J=0;J<3;++J){var X=N[te[J]];W[F++]=X[0],W[F++]=X[1]+1.4,V=Math.max(X[0],V)}return{data:W,shape:V}}(a(u,{triangles:!0,font:l,fontStyle:c,fontWeight:x,fontVariant:d,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=u.split(/(\d|\s)/),_=new Array(m.length),f=0,S=0,w=0;w<m.length;++w)_[w]=i(l,m[w]),f+=_[w].data.length,S+=_[w].shape,w>0&&(S+=.02);var E=new Float32Array(f),O=0,C=-.5*S;for(w=0;w<_.length;++w){for(var P=_[w].data,R=0;R<P.length;R+=2)E[O++]=P[R]+C,E[O++]=P[R+1];C+=_[w].shape+.02}y=v[u]={data:E,shape:S}}return y};var a=t(4359),n=window||M.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}},665:function(h,s,t){var a=t(3202);h.exports=i;var n=96;function r(l,u){var p=a(getComputedStyle(l).getPropertyValue(u));return p[0]*i(p[1],l)}function i(l,u){switch(u=u||document.body,l=(l||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),l){case"%":return u.clientHeight/100;case"ch":case"ex":return function(p,c){var x=document.createElement("div");x.style["font-size"]="128"+p,c.appendChild(x);var d=r(x,"font-size")/128;return c.removeChild(x),d}(l,u);case"em":return r(u,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},7261:function(h,s,t){h.exports=function(y){var m=(y=y||{}).center||[0,0,0],_=y.up||[0,1,0],f=y.right||x(_),S=y.radius||1,w=y.theta||0,E=y.phi||0;if(m=[].slice.call(m,0,3),_=[].slice.call(_,0,3),l(_,_),f=[].slice.call(f,0,3),l(f,f),"eye"in y){var O=y.eye,C=[O[0]-m[0],O[1]-m[1],O[2]-m[2]];i(f,C,_),p(f[0],f[1],f[2])<1e-6?f=x(_):l(f,f),S=p(C[0],C[1],C[2]);var P=u(_,C)/S,R=u(f,C)/S;E=Math.acos(P),w=Math.acos(R)}return S=Math.log(S),new d(y.zoomMin,y.zoomMax,m,_,f,S,w,E)};var a=t(9215),n=t(7608),r=t(6079),i=t(5911),l=t(3536),u=t(244);function p(y,m,_){return Math.sqrt(Math.pow(y,2)+Math.pow(m,2)+Math.pow(_,2))}function c(y){return Math.min(1,Math.max(-1,y))}function x(y){var m=Math.abs(y[0]),_=Math.abs(y[1]),f=Math.abs(y[2]),S=[0,0,0];m>Math.max(_,f)?S[2]=1:_>Math.max(m,f)?S[0]=1:S[1]=1;for(var w=0,E=0,O=0;O<3;++O)w+=y[O]*y[O],E+=S[O]*y[O];for(O=0;O<3;++O)S[O]-=E/w*y[O];return l(S,S),S}function d(y,m,_,f,S,w,E,O){this.center=a(_),this.up=a(f),this.right=a(S),this.radius=a([w]),this.angle=a([E,O]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var g=d.prototype;g.setDistanceLimits=function(y,m){y=y>0?Math.log(y):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(y){var m=this.radius.bounds[0];return y?(y[0]=Math.exp(m[0][0]),y[1]=Math.exp(m[1][0]),y):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var m=this.computedUp,_=this.computedRight,f=0,S=0,w=0;w<3;++w)S+=m[w]*_[w],f+=m[w]*m[w];var E=Math.sqrt(f),O=0;for(w=0;w<3;++w)_[w]-=m[w]*S/f,O+=_[w]*_[w],m[w]/=E;var C=Math.sqrt(O);for(w=0;w<3;++w)_[w]/=C;var P=this.computedToward;i(P,m,_),l(P,P);var R=Math.exp(this.computedRadius[0]),j=this.computedAngle[0],D=this.computedAngle[1],N=Math.cos(j),W=Math.sin(j),F=Math.cos(D),V=Math.sin(D),U=this.computedCenter,te=N*F,J=W*F,X=V,K=-N*V,Q=-W*V,Z=F,re=this.computedEye,oe=this.computedMatrix;for(w=0;w<3;++w){var ae=te*_[w]+J*P[w]+X*m[w];oe[4*w+1]=K*_[w]+Q*P[w]+Z*m[w],oe[4*w+2]=ae,oe[4*w+3]=0}var ce=oe[1],he=oe[5],pe=oe[9],xe=oe[2],be=oe[6],ve=oe[10],ge=he*ve-pe*be,we=pe*xe-ce*ve,_e=ce*be-he*xe,se=p(ge,we,_e);for(ge/=se,we/=se,_e/=se,oe[0]=ge,oe[4]=we,oe[8]=_e,w=0;w<3;++w)re[w]=U[w]+oe[2+4*w]*R;for(w=0;w<3;++w){O=0;for(var ie=0;ie<3;++ie)O+=oe[w+4*ie]*re[ie];oe[12+w]=-O}oe[15]=1},g.getMatrix=function(y,m){this.recalcMatrix(y);var _=this.computedMatrix;if(m){for(var f=0;f<16;++f)m[f]=_[f];return m}return _};var v=[0,0,0];g.rotate=function(y,m,_,f){if(this.angle.move(y,m,_),f){this.recalcMatrix(y);var S=this.computedMatrix;v[0]=S[2],v[1]=S[6],v[2]=S[10];for(var w=this.computedUp,E=this.computedRight,O=this.computedToward,C=0;C<3;++C)S[4*C]=w[C],S[4*C+1]=E[C],S[4*C+2]=O[C];for(r(S,S,f,v),C=0;C<3;++C)w[C]=S[4*C],E[C]=S[4*C+1];this.up.set(y,w[0],w[1],w[2]),this.right.set(y,E[0],E[1],E[2])}},g.pan=function(y,m,_,f){m=m||0,_=_||0,f=f||0,this.recalcMatrix(y);var S=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],O=S[9],C=p(w,E,O);w/=C,E/=C,O/=C;var P=S[0],R=S[4],j=S[8],D=P*w+R*E+j*O,N=p(P-=w*D,R-=E*D,j-=O*D),W=(P/=N)*m+w*_,F=(R/=N)*m+E*_,V=(j/=N)*m+O*_;this.center.move(y,W,F,V);var U=Math.exp(this.computedRadius[0]);U=Math.max(1e-4,U+f),this.radius.set(y,Math.log(U))},g.translate=function(y,m,_,f){this.center.move(y,m||0,_||0,f||0)},g.setMatrix=function(y,m,_,f){var S=1;typeof _=="number"&&(S=0|_),(S<0||S>3)&&(S=1);var w=(S+2)%3;m||(this.recalcMatrix(y),m=this.computedMatrix);var E=m[S],O=m[S+4],C=m[S+8];if(f){var P=Math.abs(E),R=Math.abs(O),j=Math.abs(C),D=Math.max(P,R,j);P===D?(E=E<0?-1:1,O=C=0):j===D?(C=C<0?-1:1,E=O=0):(O=O<0?-1:1,E=C=0)}else{var N=p(E,O,C);E/=N,O/=N,C/=N}var W,F,V=m[w],U=m[w+4],te=m[w+8],J=V*E+U*O+te*C,X=p(V-=E*J,U-=O*J,te-=C*J),K=O*(te/=X)-C*(U/=X),Q=C*(V/=X)-E*te,Z=E*U-O*V,re=p(K,Q,Z);if(K/=re,Q/=re,Z/=re,this.center.jump(y,Ae,Se,Oe),this.radius.idle(y),this.up.jump(y,E,O,C),this.right.jump(y,V,U,te),S===2){var oe=m[1],ae=m[5],ce=m[9],he=oe*V+ae*U+ce*te,pe=oe*K+ae*Q+ce*Z;W=ge<0?-Math.PI/2:Math.PI/2,F=Math.atan2(pe,he)}else{var xe=m[2],be=m[6],ve=m[10],ge=xe*E+be*O+ve*C,we=xe*V+be*U+ve*te,_e=xe*K+be*Q+ve*Z;W=Math.asin(c(ge)),F=Math.atan2(_e,we)}this.angle.jump(y,F,W),this.recalcMatrix(y);var se=m[2],ie=m[6],fe=m[10],Ee=this.computedMatrix;n(Ee,m);var Te=Ee[15],Ae=Ee[12]/Te,Se=Ee[13]/Te,Oe=Ee[14]/Te,De=Math.exp(this.computedRadius[0]);this.center.jump(y,Ae-se*De,Se-ie*De,Oe-fe*De)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},g.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},g.setDistance=function(y,m){m>0&&this.radius.set(y,Math.log(m))},g.lookAt=function(y,m,_,f){this.recalcMatrix(y),m=m||this.computedEye,_=_||this.computedCenter;var S=(f=f||this.computedUp)[0],w=f[1],E=f[2],O=p(S,w,E);if(!(O<1e-6)){S/=O,w/=O,E/=O;var C=m[0]-_[0],P=m[1]-_[1],R=m[2]-_[2],j=p(C,P,R);if(!(j<1e-6)){C/=j,P/=j,R/=j;var D=this.computedRight,N=D[0],W=D[1],F=D[2],V=S*N+w*W+E*F,U=p(N-=V*S,W-=V*w,F-=V*E);if(!(U<.01&&(U=p(N=w*R-E*P,W=E*C-S*R,F=S*P-w*C))<1e-6)){N/=U,W/=U,F/=U,this.up.set(y,S,w,E),this.right.set(y,N,W,F),this.center.set(y,_[0],_[1],_[2]),this.radius.set(y,Math.log(j));var te=w*F-E*W,J=E*N-S*F,X=S*W-w*N,K=p(te,J,X),Q=S*C+w*P+E*R,Z=N*C+W*P+F*R,re=(te/=K)*C+(J/=K)*P+(X/=K)*R,oe=Math.asin(c(Q)),ae=Math.atan2(re,Z),ce=this.angle._state,he=ce[ce.length-1],pe=ce[ce.length-2];he%=2*Math.PI;var xe=Math.abs(he+2*Math.PI-ae),be=Math.abs(he-ae),ve=Math.abs(he-2*Math.PI-ae);xe<be&&(he+=2*Math.PI),ve<be&&(he-=2*Math.PI),this.angle.jump(this.angle.lastT(),he,pe),this.angle.set(y,ae,oe)}}}}},5250:function(h){h.exports=function(t,a,n){var r=t*a,i=s*t,l=i-(i-t),u=t-l,p=s*a,c=p-(p-a),x=a-c,d=u*x-(r-l*c-u*c-l*x);return n?(n[0]=d,n[1]=r,n):[d,r]};var s=+(Math.pow(2,27)+1)},9362:function(h){h.exports=function(s,t,a){var n=s+t,r=n-s,i=t-r,l=s-(n-r);return a?(a[0]=l+i,a[1]=n,a):[l+i,n]}},1888:function(h,s,t){var a=t(8828),n=t(1338),r=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var i=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",p=t.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=n([32,0])),p.BIGUINT64||(p.BIGUINT64=n([32,0])),p.BIGINT64||(p.BIGINT64=n([32,0])),p.BUFFER||(p.BUFFER=n([32,0]));var c=p.DATA,x=p.BUFFER;function d(D){if(D){var N=D.length||D.byteLength,W=a.log2(N);c[W].push(D)}}function g(D){D=a.nextPow2(D);var N=a.log2(D),W=c[N];return W.length>0?W.pop():new ArrayBuffer(D)}function v(D){return new Uint8Array(g(D),0,D)}function y(D){return new Uint16Array(g(2*D),0,D)}function m(D){return new Uint32Array(g(4*D),0,D)}function _(D){return new Int8Array(g(D),0,D)}function f(D){return new Int16Array(g(2*D),0,D)}function S(D){return new Int32Array(g(4*D),0,D)}function w(D){return new Float32Array(g(4*D),0,D)}function E(D){return new Float64Array(g(8*D),0,D)}function O(D){return i?new Uint8ClampedArray(g(D),0,D):v(D)}function C(D){return l?new BigUint64Array(g(8*D),0,D):null}function P(D){return u?new BigInt64Array(g(8*D),0,D):null}function R(D){return new DataView(g(D),0,D)}function j(D){D=a.nextPow2(D);var N=a.log2(D),W=x[N];return W.length>0?W.pop():new r(D)}s.free=function(D){if(r.isBuffer(D))x[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var N=D.length||D.byteLength,W=0|a.log2(N);c[W].push(D)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(D){d(D.buffer)},s.freeArrayBuffer=d,s.freeBuffer=function(D){x[a.log2(D.length)].push(D)},s.malloc=function(D,N){if(N===void 0||N==="arraybuffer")return g(D);switch(N){case"uint8":return v(D);case"uint16":return y(D);case"uint32":return m(D);case"int8":return _(D);case"int16":return f(D);case"int32":return S(D);case"float":case"float32":return w(D);case"double":case"float64":return E(D);case"uint8_clamped":return O(D);case"bigint64":return P(D);case"biguint64":return C(D);case"buffer":return j(D);case"data":case"dataview":return R(D);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=v,s.mallocUint16=y,s.mallocUint32=m,s.mallocInt8=_,s.mallocInt16=f,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=w,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=O,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=R,s.mallocBuffer=j,s.clearCache=function(){for(var D=0;D<32;++D)p.UINT8[D].length=0,p.UINT16[D].length=0,p.UINT32[D].length=0,p.INT8[D].length=0,p.INT16[D].length=0,p.INT32[D].length=0,p.FLOAT[D].length=0,p.DOUBLE[D].length=0,p.BIGUINT64[D].length=0,p.BIGINT64[D].length=0,p.UINT8C[D].length=0,c[D].length=0,x[D].length=0}},1755:function(h){function s(a){this.roots=new Array(a),this.ranks=new Array(a);for(var n=0;n<a;++n)this.roots[n]=n,this.ranks[n]=0}h.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},t.find=function(a){for(var n=a,r=this.roots;r[a]!==a;)a=r[a];for(;r[n]!==a;){var i=r[n];r[n]=a,n=i}return a},t.link=function(a,n){var r=this.find(a),i=this.find(n);if(r!==i){var l=this.ranks,u=this.roots,p=l[r],c=l[i];p<c?u[r]=i:c<p?u[i]=r:(u[i]=r,++l[r])}}},1682:function(h){h.exports=function(s,t,a){return s.length===0?s:t?(a||s.sort(t),function(n,r){for(var i=1,l=n.length,u=n[0],p=n[0],c=1;c<l;++c)if(p=u,r(u=n[c],p)){if(c===i){i++;continue}n[i++]=u}return n.length=i,n}(s,t)):(a||s.sort(),function(n){for(var r=1,i=n.length,l=n[0],u=n[0],p=1;p<i;++p,u=l)if(u=l,(l=n[p])!==u){if(p===r){r++;continue}n[r++]=l}return n.length=r,n}(s))}},4359:function(h,s,t){h.exports=function(i,l){return typeof l=="object"&&l!==null||(l={}),a(i,l.canvas||n,l.context||r,l)};var a=t(7718),n=null,r=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,r=n.getContext("2d"))},7718:function(h,s,t){h.exports=function(C,P,R,j){var D=64,N=1.25,W={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return j&&(j.size&&j.size>0&&(D=j.size),j.lineSpacing&&j.lineSpacing>0&&(N=j.lineSpacing),j.styletags&&j.styletags.breaklines&&(W.breaklines=!!j.styletags.breaklines),j.styletags&&j.styletags.bolds&&(W.bolds=!!j.styletags.bolds),j.styletags&&j.styletags.italics&&(W.italics=!!j.styletags.italics),j.styletags&&j.styletags.subscripts&&(W.subscripts=!!j.styletags.subscripts),j.styletags&&j.styletags.superscripts&&(W.superscripts=!!j.styletags.superscripts)),R.font=[j.fontStyle,j.fontVariant,j.fontWeight,D+"px",j.font].filter(function(F){return F}).join(" "),R.textAlign="start",R.textBaseline="alphabetic",R.direction="ltr",O(function(F,V,U,te,J,X){U=U.replace(/\n/g,""),U=X.breaklines===!0?U.replace(/\<br\>/g,`
`):U.replace(/\<br\>/g," ");var K="",Q=[];for(ae=0;ae<U.length;++ae)Q[ae]=K;X.bolds===!0&&(Q=S(p,c,U,Q)),X.italics===!0&&(Q=S(x,d,U,Q)),X.superscripts===!0&&(Q=S(g,y,U,Q)),X.subscripts===!0&&(Q=S(m,f,U,Q));var Z=[],re="";for(ae=0;ae<U.length;++ae)Q[ae]!==null&&(re+=U[ae],Z.push(Q[ae]));var oe,ae,ce,he,pe,xe=re.split(`
`),be=xe.length,ve=Math.round(J*te),ge=te,we=2*te,_e=0,se=be*ve+we;F.height<se&&(F.height=se),V.fillStyle="#000",V.fillRect(0,0,F.width,F.height),V.fillStyle="#fff";var ie=0,fe="";function Ee(){if(fe!==""){var Me=V.measureText(fe).width;V.fillText(fe,ge+ce,we+he),ce+=Me}}function Te(){return Math.round(pe)+"px "}function Ae(Me,ze){var Pe=""+V.font;if(X.subscripts===!0){var Ne=Me.indexOf(_),Ve=ze.indexOf(_),Ye=Ne>-1?parseInt(Me[1+Ne]):0,at=Ve>-1?parseInt(ze[1+Ve]):0;Ye!==at&&(Pe=Pe.replace(Te(),"?px "),pe*=Math.pow(.75,at-Ye),Pe=Pe.replace("?px ",Te())),he+=.25*ve*(at-Ye)}if(X.superscripts===!0){var rt=Me.indexOf(v),dt=ze.indexOf(v),vt=rt>-1?parseInt(Me[1+rt]):0,ht=dt>-1?parseInt(ze[1+dt]):0;vt!==ht&&(Pe=Pe.replace(Te(),"?px "),pe*=Math.pow(.75,ht-vt),Pe=Pe.replace("?px ",Te())),he-=.25*ve*(ht-vt)}if(X.bolds===!0){var et=Me.indexOf(c)>-1,$e=ze.indexOf(c)>-1;!et&&$e&&(Pe=wt?Pe.replace("italic ","italic bold "):"bold "+Pe),et&&!$e&&(Pe=Pe.replace("bold ",""))}if(X.italics===!0){var wt=Me.indexOf(d)>-1,Pt=ze.indexOf(d)>-1;!wt&&Pt&&(Pe="italic "+Pe),wt&&!Pt&&(Pe=Pe.replace("italic ",""))}V.font=Pe}for(oe=0;oe<be;++oe){var Se=xe[oe]+`
`;for(ce=0,he=oe*ve,pe=te,fe="",ae=0;ae<Se.length;++ae){var Oe=ae+ie<Z.length?Z[ae+ie]:Z[Z.length-1];K===Oe?fe+=Se[ae]:(Ee(),fe=Se[ae],Oe!==void 0&&(Ae(K,Oe),K=Oe))}Ee(),ie+=Se.length;var De=0|Math.round(ce+2*ge);_e<De&&(_e=De)}var de=_e,me=we+ve*be;return n(V.getImageData(0,0,de,me).data,[me,de,4]).pick(-1,-1,0).transpose(1,0)}(P,R,C,D,N,W),j,D)},h.exports.processPixels=O;var a=t(3711),n=t(9618),r=t(5878),i=t(332),l=t(2538),u=t(2095),p="b",c="b|",x="i",d="i|",g="sup",v="+",y="+1",m="sub",_="-",f="-1";function S(C,P,R,j){for(var D="<"+C+">",N="</"+C+">",W=D.length,F=N.length,V=P[0]===v||P[0]===_,U=0,te=-F;U>-1&&(U=R.indexOf(D,U))!==-1&&(te=R.indexOf(N,U+W))!==-1&&!(te<=U);){for(var J=U;J<te+F;++J)if(J<U+W||J>=te)j[J]=null,R=R.substr(0,J)+" "+R.substr(J+1);else if(j[J]!==null){var X=j[J].indexOf(P[0]);X===-1?j[J]+=P:V&&(j[J]=j[J].substr(0,X+1)+(1+parseInt(j[J][X+1]))+j[J].substr(X+2))}var K=U+W,Q=R.substr(K,te-K).indexOf(D);U=Q!==-1?Q:te+F}return j}function w(C,P){var R=a(C,128);return P?r(R.cells,R.positions,.25):{edges:R.cells,positions:R.positions}}function E(C,P,R,j){var D=w(C,j),N=function(oe,ae,ce){for(var he=ae.textAlign||"start",pe=ae.textBaseline||"alphabetic",xe=[1<<30,1<<30],be=[0,0],ve=oe.length,ge=0;ge<ve;++ge)for(var we=oe[ge],_e=0;_e<2;++_e)xe[_e]=0|Math.min(xe[_e],we[_e]),be[_e]=0|Math.max(be[_e],we[_e]);var se=0;switch(he){case"center":se=-.5*(xe[0]+be[0]);break;case"right":case"end":se=-be[0];break;case"left":case"start":se=-xe[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+he+"'")}var ie=0;switch(pe){case"hanging":case"top":ie=-xe[1];break;case"middle":ie=-.5*(xe[1]+be[1]);break;case"alphabetic":case"ideographic":ie=-3*ce;break;case"bottom":ie=-be[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+pe+"'")}var fe=1/ce;return"lineHeight"in ae?fe*=+ae.lineHeight:"width"in ae?fe=ae.width/(be[0]-xe[0]):"height"in ae&&(fe=ae.height/(be[1]-xe[1])),oe.map(function(Ee){return[fe*(Ee[0]+se),fe*(Ee[1]+ie)]})}(D.positions,P,R),W=D.edges,F=P.orientation==="ccw";if(i(N,W),P.polygons||P.polygon||P.polyline){for(var V=u(W,N),U=new Array(V.length),te=0;te<V.length;++te){for(var J=V[te],X=new Array(J.length),K=0;K<J.length;++K){for(var Q=J[K],Z=new Array(Q.length),re=0;re<Q.length;++re)Z[re]=N[Q[re]].slice();F&&Z.reverse(),X[K]=Z}U[te]=X}return U}return P.triangles||P.triangulate||P.triangle?{cells:l(N,W,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:W,positions:N}}function O(C,P,R){try{return E(C,P,R,!0)}catch{}try{return E(C,P,R,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(h){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var a=new t,n=Object.freeze({});if(a.set(n,1),a.get(n)===1)return void(h.exports=WeakMap);s=!0}}var r=Object.getOwnPropertyNames,i=Object.defineProperty,l=Object.isExtensible,u="weakmap:",p=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),x=new Uint8Array(c);crypto.getRandomValues(x),p=u+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(i(Object,"getOwnPropertyNames",{value:function(E){return r(E).filter(_)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;i(Object,"getPropertyNames",{value:function(E){return d(E).filter(_)}})}(function(){var E=Object.freeze;i(Object,"freeze",{value:function(P){return f(P),E(P)}});var O=Object.seal;i(Object,"seal",{value:function(P){return f(P),O(P)}});var C=Object.preventExtensions;i(Object,"preventExtensions",{value:function(P){return f(P),C(P)}})})();var g=!1,v=0,y=function(){this instanceof y||w();var E=[],O=[],C=v++;return Object.create(y.prototype,{get___:{value:S(function(P,R){var j,D=f(P);return D?C in D?D[C]:R:(j=E.indexOf(P))>=0?O[j]:R})},has___:{value:S(function(P){var R=f(P);return R?C in R:E.indexOf(P)>=0})},set___:{value:S(function(P,R){var j,D=f(P);return D?D[C]=R:(j=E.indexOf(P))>=0?O[j]=R:(j=E.length,O[j]=R,E[j]=P),this})},delete___:{value:S(function(P){var R,j,D=f(P);return D?C in D&&delete D[C]:!((R=E.indexOf(P))<0||(j=E.length-1,E[R]=void 0,O[R]=O[j],E[R]=E[j],E.length=j,O.length=j,0))})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(E,O){return this.get___(E,O)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,O){return this.set___(E,O)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof y||w();var O,C=new t,P=void 0,R=!1;return O=s?function(j,D){return C.set(j,D),C.has(j)||(P||(P=new y),P.set(j,D)),this}:function(j,D){if(R)try{C.set(j,D)}catch{P||(P=new y),P.set___(j,D)}else C.set(j,D);return this},Object.create(y.prototype,{get___:{value:S(function(j,D){return P?C.has(j)?C.get(j):P.get___(j,D):C.get(j,D)})},has___:{value:S(function(j){return C.has(j)||!!P&&P.has___(j)})},set___:{value:S(O)},delete___:{value:S(function(j){var D=!!C.delete(j);return P&&P.delete___(j)||D})},permitHostObjects___:{value:S(function(j){if(j!==m)throw new Error("bogus call to permitHostObjects___");R=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=y.prototype,h.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),h.exports=y)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function _(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function f(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var O=E[p];if(O&&O.key===E)return O;if(l(E)){O={key:E};try{return i(E,p,{value:O,writable:!1,enumerable:!1,configurable:!1}),O}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function w(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},236:function(h,s,t){var a=t(8284);h.exports=function(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var i=r.valueOf(n);return i&&i.identity===n?i:a(r,n)}}},8284:function(h){h.exports=function(s,t){var a={identity:t},n=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(r){return r!==t?n.apply(this,arguments):a},writable:!0}),a}},606:function(h,s,t){var a=t(236);h.exports=function(){var n=a();return{get:function(r,i){var l=n(r);return l.hasOwnProperty("value")?l.value:i},set:function(r,i){return n(r).value=i,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},3349:function(h){h.exports=function(s){var t={};return function(a,n,r){var i=a.dtype,l=a.order,u=[i,l.join()].join(),p=t[u];return p||(t[u]=p=s([i,l])),p(a.shape.slice(0),a.data,a.stride,0|a.offset,n,r)}}((function(){return function(s,t,a,n,r,i){var l=s[0],u=a[0],p=[0],c=u;n|=0;var x=0,d=u;for(x=0;x<l;++x){var g=t[n]-i,v=t[n+c]-i;g>=0!=v>=0&&r.push(p[0]+.5+.5*(g+v)/(g-v)),n+=d,++p[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},781:function(h,s,t){h.exports=function(n,r){var i=[];return r=+r||0,a(n.hi(n.shape[0]-1),i,r),i};var a=t(3349)},7790:function(){}},o={};function T(h){var s=o[h];if(s!==void 0)return s.exports;var t=o[h]={id:h,loaded:!1,exports:{}};return k[h].call(t.exports,t,t.exports,T),t.loaded=!0,t.exports}T.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),T.nmd=function(h){return h.paths=[],h.children||(h.children=[]),h};var b=T(1964);ee.exports=b})()},33576:function(ee,z,e){function M(se,ie){for(var fe=0;fe<ie.length;fe++){var Ee=ie[fe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(se,(Te=function(Ae,Se){if(b(Ae)!=="object"||Ae===null)return Ae;var Oe=Ae[Symbol.toPrimitive];if(Oe!==void 0){var De=Oe.call(Ae,"string");if(b(De)!=="object")return De;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ae)}(Ee.key),b(Te)==="symbol"?Te:String(Te)),Ee)}var Te}function k(se){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},k(se)}function o(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function T(se,ie){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fe,Ee){return fe.__proto__=Ee,fe},T(se,ie)}function b(se){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},b(se)}var h=e(59968),s=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;z.Buffer=r,z.SlowBuffer=function(se){return+se!=se&&(se=0),r.alloc(+se)},z.INSPECT_MAX_BYTES=50;var a=2147483647;function n(se){if(se>a)throw new RangeError('The value "'+se+'" is invalid for option "size"');var ie=new Uint8Array(se);return Object.setPrototypeOf(ie,r.prototype),ie}function r(se,ie,fe){if(typeof se=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(se)}return i(se,ie,fe)}function i(se,ie,fe){if(typeof se=="string")return function(Ae,Se){if(typeof Se=="string"&&Se!==""||(Se="utf8"),!r.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);var Oe=0|d(Ae,Se),De=n(Oe),de=De.write(Ae,Se);return de!==Oe&&(De=De.slice(0,de)),De}(se,ie);if(ArrayBuffer.isView(se))return function(Ae){if(be(Ae,Uint8Array)){var Se=new Uint8Array(Ae);return c(Se.buffer,Se.byteOffset,Se.byteLength)}return p(Ae)}(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(se));if(be(se,ArrayBuffer)||se&&be(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(se,SharedArrayBuffer)||se&&be(se.buffer,SharedArrayBuffer)))return c(se,ie,fe);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Ee=se.valueOf&&se.valueOf();if(Ee!=null&&Ee!==se)return r.from(Ee,ie,fe);var Te=function(Ae){if(r.isBuffer(Ae)){var Se=0|x(Ae.length),Oe=n(Se);return Oe.length===0||Ae.copy(Oe,0,0,Se),Oe}return Ae.length!==void 0?typeof Ae.length!="number"||ve(Ae.length)?n(0):p(Ae):Ae.type==="Buffer"&&Array.isArray(Ae.data)?p(Ae.data):void 0}(se);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return r.from(se[Symbol.toPrimitive]("string"),ie,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(se))}function l(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function u(se){return l(se),n(se<0?0:0|x(se))}function p(se){for(var ie=se.length<0?0:0|x(se.length),fe=n(ie),Ee=0;Ee<ie;Ee+=1)fe[Ee]=255&se[Ee];return fe}function c(se,ie,fe){if(ie<0||se.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<ie+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var Ee;return Ee=ie===void 0&&fe===void 0?new Uint8Array(se):fe===void 0?new Uint8Array(se,ie):new Uint8Array(se,ie,fe),Object.setPrototypeOf(Ee,r.prototype),Ee}function x(se){if(se>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|se}function d(se,ie){if(r.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||be(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(se));var fe=se.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&fe===0)return 0;for(var Te=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return he(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*fe;case"hex":return fe>>>1;case"base64":return pe(se).length;default:if(Te)return Ee?-1:he(se).length;ie=(""+ie).toLowerCase(),Te=!0}}function g(se,ie,fe){var Ee=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0)<=(ie>>>=0))return"";for(se||(se="utf8");;)switch(se){case"hex":return D(this,ie,fe);case"utf8":case"utf-8":return C(this,ie,fe);case"ascii":return R(this,ie,fe);case"latin1":case"binary":return j(this,ie,fe);case"base64":return O(this,ie,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,ie,fe);default:if(Ee)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),Ee=!0}}function v(se,ie,fe){var Ee=se[ie];se[ie]=se[fe],se[fe]=Ee}function y(se,ie,fe,Ee,Te){if(se.length===0)return-1;if(typeof fe=="string"?(Ee=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),ve(fe=+fe)&&(fe=Te?0:se.length-1),fe<0&&(fe=se.length+fe),fe>=se.length){if(Te)return-1;fe=se.length-1}else if(fe<0){if(!Te)return-1;fe=0}if(typeof ie=="string"&&(ie=r.from(ie,Ee)),r.isBuffer(ie))return ie.length===0?-1:m(se,ie,fe,Ee,Te);if(typeof ie=="number")return ie&=255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(se,ie,fe):Uint8Array.prototype.lastIndexOf.call(se,ie,fe):m(se,[ie],fe,Ee,Te);throw new TypeError("val must be string, number or Buffer")}function m(se,ie,fe,Ee,Te){var Ae,Se=1,Oe=se.length,De=ie.length;if(Ee!==void 0&&((Ee=String(Ee).toLowerCase())==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(se.length<2||ie.length<2)return-1;Se=2,Oe/=2,De/=2,fe/=2}function de(Pe,Ne){return Se===1?Pe[Ne]:Pe.readUInt16BE(Ne*Se)}if(Te){var me=-1;for(Ae=fe;Ae<Oe;Ae++)if(de(se,Ae)===de(ie,me===-1?0:Ae-me)){if(me===-1&&(me=Ae),Ae-me+1===De)return me*Se}else me!==-1&&(Ae-=Ae-me),me=-1}else for(fe+De>Oe&&(fe=Oe-De),Ae=fe;Ae>=0;Ae--){for(var Me=!0,ze=0;ze<De;ze++)if(de(se,Ae+ze)!==de(ie,ze)){Me=!1;break}if(Me)return Ae}return-1}function _(se,ie,fe,Ee){fe=Number(fe)||0;var Te=se.length-fe;Ee?(Ee=Number(Ee))>Te&&(Ee=Te):Ee=Te;var Ae,Se=ie.length;for(Ee>Se/2&&(Ee=Se/2),Ae=0;Ae<Ee;++Ae){var Oe=parseInt(ie.substr(2*Ae,2),16);if(ve(Oe))return Ae;se[fe+Ae]=Oe}return Ae}function f(se,ie,fe,Ee){return xe(he(ie,se.length-fe),se,fe,Ee)}function S(se,ie,fe,Ee){return xe(function(Te){for(var Ae=[],Se=0;Se<Te.length;++Se)Ae.push(255&Te.charCodeAt(Se));return Ae}(ie),se,fe,Ee)}function w(se,ie,fe,Ee){return xe(pe(ie),se,fe,Ee)}function E(se,ie,fe,Ee){return xe(function(Te,Ae){for(var Se,Oe,De,de=[],me=0;me<Te.length&&!((Ae-=2)<0);++me)Oe=(Se=Te.charCodeAt(me))>>8,De=Se%256,de.push(De),de.push(Oe);return de}(ie,se.length-fe),se,fe,Ee)}function O(se,ie,fe){return ie===0&&fe===se.length?h.fromByteArray(se):h.fromByteArray(se.slice(ie,fe))}function C(se,ie,fe){fe=Math.min(se.length,fe);for(var Ee=[],Te=ie;Te<fe;){var Ae=se[Te],Se=null,Oe=Ae>239?4:Ae>223?3:Ae>191?2:1;if(Te+Oe<=fe){var De=void 0,de=void 0,me=void 0,Me=void 0;switch(Oe){case 1:Ae<128&&(Se=Ae);break;case 2:(192&(De=se[Te+1]))==128&&(Me=(31&Ae)<<6|63&De)>127&&(Se=Me);break;case 3:De=se[Te+1],de=se[Te+2],(192&De)==128&&(192&de)==128&&(Me=(15&Ae)<<12|(63&De)<<6|63&de)>2047&&(Me<55296||Me>57343)&&(Se=Me);break;case 4:De=se[Te+1],de=se[Te+2],me=se[Te+3],(192&De)==128&&(192&de)==128&&(192&me)==128&&(Me=(15&Ae)<<18|(63&De)<<12|(63&de)<<6|63&me)>65535&&Me<1114112&&(Se=Me)}}Se===null?(Se=65533,Oe=1):Se>65535&&(Se-=65536,Ee.push(Se>>>10&1023|55296),Se=56320|1023&Se),Ee.push(Se),Te+=Oe}return function(ze){var Pe=ze.length;if(Pe<=P)return String.fromCharCode.apply(String,ze);for(var Ne="",Ve=0;Ve<Pe;)Ne+=String.fromCharCode.apply(String,ze.slice(Ve,Ve+=P));return Ne}(Ee)}z.kMaxLength=a,r.TYPED_ARRAY_SUPPORT=function(){try{var se=new Uint8Array(1),ie={foo:function(){return 42}};return Object.setPrototypeOf(ie,Uint8Array.prototype),Object.setPrototypeOf(se,ie),se.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(se,ie,fe){return i(se,ie,fe)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(se,ie,fe){return function(Ee,Te,Ae){return l(Ee),Ee<=0?n(Ee):Te!==void 0?typeof Ae=="string"?n(Ee).fill(Te,Ae):n(Ee).fill(Te):n(Ee)}(se,ie,fe)},r.allocUnsafe=function(se){return u(se)},r.allocUnsafeSlow=function(se){return u(se)},r.isBuffer=function(se){return se!=null&&se._isBuffer===!0&&se!==r.prototype},r.compare=function(se,ie){if(be(se,Uint8Array)&&(se=r.from(se,se.offset,se.byteLength)),be(ie,Uint8Array)&&(ie=r.from(ie,ie.offset,ie.byteLength)),!r.isBuffer(se)||!r.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(se===ie)return 0;for(var fe=se.length,Ee=ie.length,Te=0,Ae=Math.min(fe,Ee);Te<Ae;++Te)if(se[Te]!==ie[Te]){fe=se[Te],Ee=ie[Te];break}return fe<Ee?-1:Ee<fe?1:0},r.isEncoding=function(se){switch(String(se).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(se,ie){if(!Array.isArray(se))throw new TypeError('"list" argument must be an Array of Buffers');if(se.length===0)return r.alloc(0);var fe;if(ie===void 0)for(ie=0,fe=0;fe<se.length;++fe)ie+=se[fe].length;var Ee=r.allocUnsafe(ie),Te=0;for(fe=0;fe<se.length;++fe){var Ae=se[fe];if(be(Ae,Uint8Array))Te+Ae.length>Ee.length?(r.isBuffer(Ae)||(Ae=r.from(Ae)),Ae.copy(Ee,Te)):Uint8Array.prototype.set.call(Ee,Ae,Te);else{if(!r.isBuffer(Ae))throw new TypeError('"list" argument must be an Array of Buffers');Ae.copy(Ee,Te)}Te+=Ae.length}return Ee},r.byteLength=d,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var se=this.length;if(se%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<se;ie+=2)v(this,ie,ie+1);return this},r.prototype.swap32=function(){var se=this.length;if(se%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<se;ie+=4)v(this,ie,ie+3),v(this,ie+1,ie+2);return this},r.prototype.swap64=function(){var se=this.length;if(se%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<se;ie+=8)v(this,ie,ie+7),v(this,ie+1,ie+6),v(this,ie+2,ie+5),v(this,ie+3,ie+4);return this},r.prototype.toString=function(){var se=this.length;return se===0?"":arguments.length===0?C(this,0,se):g.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(se){if(!r.isBuffer(se))throw new TypeError("Argument must be a Buffer");return this===se||r.compare(this,se)===0},r.prototype.inspect=function(){var se="",ie=z.INSPECT_MAX_BYTES;return se=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(se+=" ... "),"<Buffer "+se+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(se,ie,fe,Ee,Te){if(be(se,Uint8Array)&&(se=r.from(se,se.offset,se.byteLength)),!r.isBuffer(se))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(se));if(ie===void 0&&(ie=0),fe===void 0&&(fe=se?se.length:0),Ee===void 0&&(Ee=0),Te===void 0&&(Te=this.length),ie<0||fe>se.length||Ee<0||Te>this.length)throw new RangeError("out of range index");if(Ee>=Te&&ie>=fe)return 0;if(Ee>=Te)return-1;if(ie>=fe)return 1;if(this===se)return 0;for(var Ae=(Te>>>=0)-(Ee>>>=0),Se=(fe>>>=0)-(ie>>>=0),Oe=Math.min(Ae,Se),De=this.slice(Ee,Te),de=se.slice(ie,fe),me=0;me<Oe;++me)if(De[me]!==de[me]){Ae=De[me],Se=de[me];break}return Ae<Se?-1:Se<Ae?1:0},r.prototype.includes=function(se,ie,fe){return this.indexOf(se,ie,fe)!==-1},r.prototype.indexOf=function(se,ie,fe){return y(this,se,ie,fe,!0)},r.prototype.lastIndexOf=function(se,ie,fe){return y(this,se,ie,fe,!1)},r.prototype.write=function(se,ie,fe,Ee){if(ie===void 0)Ee="utf8",fe=this.length,ie=0;else if(fe===void 0&&typeof ie=="string")Ee=ie,fe=this.length,ie=0;else{if(!isFinite(ie))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ie>>>=0,isFinite(fe)?(fe>>>=0,Ee===void 0&&(Ee="utf8")):(Ee=fe,fe=void 0)}var Te=this.length-ie;if((fe===void 0||fe>Te)&&(fe=Te),se.length>0&&(fe<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");for(var Ae=!1;;)switch(Ee){case"hex":return _(this,se,ie,fe);case"utf8":case"utf-8":return f(this,se,ie,fe);case"ascii":case"latin1":case"binary":return S(this,se,ie,fe);case"base64":return w(this,se,ie,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,se,ie,fe);default:if(Ae)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),Ae=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function R(se,ie,fe){var Ee="";fe=Math.min(se.length,fe);for(var Te=ie;Te<fe;++Te)Ee+=String.fromCharCode(127&se[Te]);return Ee}function j(se,ie,fe){var Ee="";fe=Math.min(se.length,fe);for(var Te=ie;Te<fe;++Te)Ee+=String.fromCharCode(se[Te]);return Ee}function D(se,ie,fe){var Ee=se.length;(!ie||ie<0)&&(ie=0),(!fe||fe<0||fe>Ee)&&(fe=Ee);for(var Te="",Ae=ie;Ae<fe;++Ae)Te+=ge[se[Ae]];return Te}function N(se,ie,fe){for(var Ee=se.slice(ie,fe),Te="",Ae=0;Ae<Ee.length-1;Ae+=2)Te+=String.fromCharCode(Ee[Ae]+256*Ee[Ae+1]);return Te}function W(se,ie,fe){if(se%1!=0||se<0)throw new RangeError("offset is not uint");if(se+ie>fe)throw new RangeError("Trying to access beyond buffer length")}function F(se,ie,fe,Ee,Te,Ae){if(!r.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>Te||ie<Ae)throw new RangeError('"value" argument is out of bounds');if(fe+Ee>se.length)throw new RangeError("Index out of range")}function V(se,ie,fe,Ee,Te){re(ie,Ee,Te,se,fe,7);var Ae=Number(ie&BigInt(4294967295));se[fe++]=Ae,Ae>>=8,se[fe++]=Ae,Ae>>=8,se[fe++]=Ae,Ae>>=8,se[fe++]=Ae;var Se=Number(ie>>BigInt(32)&BigInt(4294967295));return se[fe++]=Se,Se>>=8,se[fe++]=Se,Se>>=8,se[fe++]=Se,Se>>=8,se[fe++]=Se,fe}function U(se,ie,fe,Ee,Te){re(ie,Ee,Te,se,fe,7);var Ae=Number(ie&BigInt(4294967295));se[fe+7]=Ae,Ae>>=8,se[fe+6]=Ae,Ae>>=8,se[fe+5]=Ae,Ae>>=8,se[fe+4]=Ae;var Se=Number(ie>>BigInt(32)&BigInt(4294967295));return se[fe+3]=Se,Se>>=8,se[fe+2]=Se,Se>>=8,se[fe+1]=Se,Se>>=8,se[fe]=Se,fe+8}function te(se,ie,fe,Ee,Te,Ae){if(fe+Ee>se.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function J(se,ie,fe,Ee,Te){return ie=+ie,fe>>>=0,Te||te(se,0,fe,4),s.write(se,ie,fe,Ee,23,4),fe+4}function X(se,ie,fe,Ee,Te){return ie=+ie,fe>>>=0,Te||te(se,0,fe,8),s.write(se,ie,fe,Ee,52,8),fe+8}r.prototype.slice=function(se,ie){var fe=this.length;(se=~~se)<0?(se+=fe)<0&&(se=0):se>fe&&(se=fe),(ie=ie===void 0?fe:~~ie)<0?(ie+=fe)<0&&(ie=0):ie>fe&&(ie=fe),ie<se&&(ie=se);var Ee=this.subarray(se,ie);return Object.setPrototypeOf(Ee,r.prototype),Ee},r.prototype.readUintLE=r.prototype.readUIntLE=function(se,ie,fe){se>>>=0,ie>>>=0,fe||W(se,ie,this.length);for(var Ee=this[se],Te=1,Ae=0;++Ae<ie&&(Te*=256);)Ee+=this[se+Ae]*Te;return Ee},r.prototype.readUintBE=r.prototype.readUIntBE=function(se,ie,fe){se>>>=0,ie>>>=0,fe||W(se,ie,this.length);for(var Ee=this[se+--ie],Te=1;ie>0&&(Te*=256);)Ee+=this[se+--ie]*Te;return Ee},r.prototype.readUint8=r.prototype.readUInt8=function(se,ie){return se>>>=0,ie||W(se,1,this.length),this[se]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(se,ie){return se>>>=0,ie||W(se,2,this.length),this[se]|this[se+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(se,ie){return se>>>=0,ie||W(se,2,this.length),this[se]<<8|this[se+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(se,ie){return se>>>=0,ie||W(se,4,this.length),(this[se]|this[se+1]<<8|this[se+2]<<16)+16777216*this[se+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(se,ie){return se>>>=0,ie||W(se,4,this.length),16777216*this[se]+(this[se+1]<<16|this[se+2]<<8|this[se+3])},r.prototype.readBigUInt64LE=we(function(se){oe(se>>>=0,"offset");var ie=this[se],fe=this[se+7];ie!==void 0&&fe!==void 0||ae(se,this.length-8);var Ee=ie+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24),Te=this[++se]+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+fe*Math.pow(2,24);return BigInt(Ee)+(BigInt(Te)<<BigInt(32))}),r.prototype.readBigUInt64BE=we(function(se){oe(se>>>=0,"offset");var ie=this[se],fe=this[se+7];ie!==void 0&&fe!==void 0||ae(se,this.length-8);var Ee=ie*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se],Te=this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+fe;return(BigInt(Ee)<<BigInt(32))+BigInt(Te)}),r.prototype.readIntLE=function(se,ie,fe){se>>>=0,ie>>>=0,fe||W(se,ie,this.length);for(var Ee=this[se],Te=1,Ae=0;++Ae<ie&&(Te*=256);)Ee+=this[se+Ae]*Te;return Ee>=(Te*=128)&&(Ee-=Math.pow(2,8*ie)),Ee},r.prototype.readIntBE=function(se,ie,fe){se>>>=0,ie>>>=0,fe||W(se,ie,this.length);for(var Ee=ie,Te=1,Ae=this[se+--Ee];Ee>0&&(Te*=256);)Ae+=this[se+--Ee]*Te;return Ae>=(Te*=128)&&(Ae-=Math.pow(2,8*ie)),Ae},r.prototype.readInt8=function(se,ie){return se>>>=0,ie||W(se,1,this.length),128&this[se]?-1*(255-this[se]+1):this[se]},r.prototype.readInt16LE=function(se,ie){se>>>=0,ie||W(se,2,this.length);var fe=this[se]|this[se+1]<<8;return 32768&fe?4294901760|fe:fe},r.prototype.readInt16BE=function(se,ie){se>>>=0,ie||W(se,2,this.length);var fe=this[se+1]|this[se]<<8;return 32768&fe?4294901760|fe:fe},r.prototype.readInt32LE=function(se,ie){return se>>>=0,ie||W(se,4,this.length),this[se]|this[se+1]<<8|this[se+2]<<16|this[se+3]<<24},r.prototype.readInt32BE=function(se,ie){return se>>>=0,ie||W(se,4,this.length),this[se]<<24|this[se+1]<<16|this[se+2]<<8|this[se+3]},r.prototype.readBigInt64LE=we(function(se){oe(se>>>=0,"offset");var ie=this[se],fe=this[se+7];ie!==void 0&&fe!==void 0||ae(se,this.length-8);var Ee=this[se+4]+this[se+5]*Math.pow(2,8)+this[se+6]*Math.pow(2,16)+(fe<<24);return(BigInt(Ee)<<BigInt(32))+BigInt(ie+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24))}),r.prototype.readBigInt64BE=we(function(se){oe(se>>>=0,"offset");var ie=this[se],fe=this[se+7];ie!==void 0&&fe!==void 0||ae(se,this.length-8);var Ee=(ie<<24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se];return(BigInt(Ee)<<BigInt(32))+BigInt(this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+fe)}),r.prototype.readFloatLE=function(se,ie){return se>>>=0,ie||W(se,4,this.length),s.read(this,se,!0,23,4)},r.prototype.readFloatBE=function(se,ie){return se>>>=0,ie||W(se,4,this.length),s.read(this,se,!1,23,4)},r.prototype.readDoubleLE=function(se,ie){return se>>>=0,ie||W(se,8,this.length),s.read(this,se,!0,52,8)},r.prototype.readDoubleBE=function(se,ie){return se>>>=0,ie||W(se,8,this.length),s.read(this,se,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(se,ie,fe,Ee){se=+se,ie>>>=0,fe>>>=0,Ee||F(this,se,ie,fe,Math.pow(2,8*fe)-1,0);var Te=1,Ae=0;for(this[ie]=255&se;++Ae<fe&&(Te*=256);)this[ie+Ae]=se/Te&255;return ie+fe},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(se,ie,fe,Ee){se=+se,ie>>>=0,fe>>>=0,Ee||F(this,se,ie,fe,Math.pow(2,8*fe)-1,0);var Te=fe-1,Ae=1;for(this[ie+Te]=255&se;--Te>=0&&(Ae*=256);)this[ie+Te]=se/Ae&255;return ie+fe},r.prototype.writeUint8=r.prototype.writeUInt8=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,1,255,0),this[ie]=255&se,ie+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,2,65535,0),this[ie]=255&se,this[ie+1]=se>>>8,ie+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,2,65535,0),this[ie]=se>>>8,this[ie+1]=255&se,ie+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,4,4294967295,0),this[ie+3]=se>>>24,this[ie+2]=se>>>16,this[ie+1]=se>>>8,this[ie]=255&se,ie+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,4,4294967295,0),this[ie]=se>>>24,this[ie+1]=se>>>16,this[ie+2]=se>>>8,this[ie+3]=255&se,ie+4},r.prototype.writeBigUInt64LE=we(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=we(function(se){return U(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(se,ie,fe,Ee){if(se=+se,ie>>>=0,!Ee){var Te=Math.pow(2,8*fe-1);F(this,se,ie,fe,Te-1,-Te)}var Ae=0,Se=1,Oe=0;for(this[ie]=255&se;++Ae<fe&&(Se*=256);)se<0&&Oe===0&&this[ie+Ae-1]!==0&&(Oe=1),this[ie+Ae]=(se/Se>>0)-Oe&255;return ie+fe},r.prototype.writeIntBE=function(se,ie,fe,Ee){if(se=+se,ie>>>=0,!Ee){var Te=Math.pow(2,8*fe-1);F(this,se,ie,fe,Te-1,-Te)}var Ae=fe-1,Se=1,Oe=0;for(this[ie+Ae]=255&se;--Ae>=0&&(Se*=256);)se<0&&Oe===0&&this[ie+Ae+1]!==0&&(Oe=1),this[ie+Ae]=(se/Se>>0)-Oe&255;return ie+fe},r.prototype.writeInt8=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,1,127,-128),se<0&&(se=255+se+1),this[ie]=255&se,ie+1},r.prototype.writeInt16LE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,2,32767,-32768),this[ie]=255&se,this[ie+1]=se>>>8,ie+2},r.prototype.writeInt16BE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,2,32767,-32768),this[ie]=se>>>8,this[ie+1]=255&se,ie+2},r.prototype.writeInt32LE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,4,2147483647,-2147483648),this[ie]=255&se,this[ie+1]=se>>>8,this[ie+2]=se>>>16,this[ie+3]=se>>>24,ie+4},r.prototype.writeInt32BE=function(se,ie,fe){return se=+se,ie>>>=0,fe||F(this,se,ie,4,2147483647,-2147483648),se<0&&(se=4294967295+se+1),this[ie]=se>>>24,this[ie+1]=se>>>16,this[ie+2]=se>>>8,this[ie+3]=255&se,ie+4},r.prototype.writeBigInt64LE=we(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=we(function(se){return U(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeFloatLE=function(se,ie,fe){return J(this,se,ie,!0,fe)},r.prototype.writeFloatBE=function(se,ie,fe){return J(this,se,ie,!1,fe)},r.prototype.writeDoubleLE=function(se,ie,fe){return X(this,se,ie,!0,fe)},r.prototype.writeDoubleBE=function(se,ie,fe){return X(this,se,ie,!1,fe)},r.prototype.copy=function(se,ie,fe,Ee){if(!r.isBuffer(se))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),Ee||Ee===0||(Ee=this.length),ie>=se.length&&(ie=se.length),ie||(ie=0),Ee>0&&Ee<fe&&(Ee=fe),Ee===fe||se.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),se.length-ie<Ee-fe&&(Ee=se.length-ie+fe);var Te=Ee-fe;return this===se&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ie,fe,Ee):Uint8Array.prototype.set.call(se,this.subarray(fe,Ee),ie),Te},r.prototype.fill=function(se,ie,fe,Ee){if(typeof se=="string"){if(typeof ie=="string"?(Ee=ie,ie=0,fe=this.length):typeof fe=="string"&&(Ee=fe,fe=this.length),Ee!==void 0&&typeof Ee!="string")throw new TypeError("encoding must be a string");if(typeof Ee=="string"&&!r.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(se.length===1){var Te=se.charCodeAt(0);(Ee==="utf8"&&Te<128||Ee==="latin1")&&(se=Te)}}else typeof se=="number"?se&=255:typeof se=="boolean"&&(se=Number(se));if(ie<0||this.length<ie||this.length<fe)throw new RangeError("Out of range index");if(fe<=ie)return this;var Ae;if(ie>>>=0,fe=fe===void 0?this.length:fe>>>0,se||(se=0),typeof se=="number")for(Ae=ie;Ae<fe;++Ae)this[Ae]=se;else{var Se=r.isBuffer(se)?se:r.from(se,Ee),Oe=Se.length;if(Oe===0)throw new TypeError('The value "'+se+'" is invalid for argument "value"');for(Ae=0;Ae<fe-ie;++Ae)this[Ae+ie]=Se[Ae%Oe]}return this};var K={};function Q(se,ie,fe){K[se]=function(Ee){function Te(){var Oe;return function(De,de){if(!(De instanceof de))throw new TypeError("Cannot call a class as a function")}(this,Te),Oe=function(De,de,me){return de=k(de),function(Me,ze){if(ze&&(b(ze)==="object"||typeof ze=="function"))return ze;if(ze!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(Me)}(De,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(de,[],k(De).constructor):de.apply(De,me))}(this,Te),Object.defineProperty(o(Oe),"message",{value:ie.apply(o(Oe),arguments),writable:!0,configurable:!0}),Oe.name="".concat(Oe.name," [").concat(se,"]"),Oe.stack,delete Oe.name,Oe}var Ae,Se;return function(Oe,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function");Oe.prototype=Object.create(De&&De.prototype,{constructor:{value:Oe,writable:!0,configurable:!0}}),Object.defineProperty(Oe,"prototype",{writable:!1}),De&&T(Oe,De)}(Te,Ee),Ae=Te,(Se=[{key:"code",get:function(){return se},set:function(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(se,"]: ").concat(this.message)}}])&&M(Ae.prototype,Se),Object.defineProperty(Ae,"prototype",{writable:!1}),Te}(fe)}function Z(se){for(var ie="",fe=se.length,Ee=se[0]==="-"?1:0;fe>=Ee+4;fe-=3)ie="_".concat(se.slice(fe-3,fe)).concat(ie);return"".concat(se.slice(0,fe)).concat(ie)}function re(se,ie,fe,Ee,Te,Ae){if(se>fe||se<ie){var Se,Oe=typeof ie=="bigint"?"n":"";throw Se=ie===0||ie===BigInt(0)?">= 0".concat(Oe," and < 2").concat(Oe," ** ").concat(8*(Ae+1)).concat(Oe):">= -(2".concat(Oe," ** ").concat(8*(Ae+1)-1).concat(Oe,") and < 2 ** ")+"".concat(8*(Ae+1)-1).concat(Oe),new K.ERR_OUT_OF_RANGE("value",Se,se)}(function(De,de,me){oe(de,"offset"),De[de]!==void 0&&De[de+me]!==void 0||ae(de,De.length-(me+1))})(Ee,Te,Ae)}function oe(se,ie){if(typeof se!="number")throw new K.ERR_INVALID_ARG_TYPE(ie,"number",se)}function ae(se,ie,fe){throw Math.floor(se)!==se?(oe(se,fe),new K.ERR_OUT_OF_RANGE("offset","an integer",se)):ie<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(ie),se)}Q("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?"".concat(se," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Q("ERR_INVALID_ARG_TYPE",function(se,ie){return'The "'.concat(se,'" argument must be of type number. Received type ').concat(b(ie))},TypeError),Q("ERR_OUT_OF_RANGE",function(se,ie,fe){var Ee='The value of "'.concat(se,'" is out of range.'),Te=fe;return Number.isInteger(fe)&&Math.abs(fe)>Math.pow(2,32)?Te=Z(String(fe)):typeof fe=="bigint"&&(Te=String(fe),(fe>Math.pow(BigInt(2),BigInt(32))||fe<-Math.pow(BigInt(2),BigInt(32)))&&(Te=Z(Te)),Te+="n"),Ee+" It must be ".concat(ie,". Received ").concat(Te)},RangeError);var ce=/[^+/0-9A-Za-z-_]/g;function he(se,ie){var fe;ie=ie||1/0;for(var Ee=se.length,Te=null,Ae=[],Se=0;Se<Ee;++Se){if((fe=se.charCodeAt(Se))>55295&&fe<57344){if(!Te){if(fe>56319){(ie-=3)>-1&&Ae.push(239,191,189);continue}if(Se+1===Ee){(ie-=3)>-1&&Ae.push(239,191,189);continue}Te=fe;continue}if(fe<56320){(ie-=3)>-1&&Ae.push(239,191,189),Te=fe;continue}fe=65536+(Te-55296<<10|fe-56320)}else Te&&(ie-=3)>-1&&Ae.push(239,191,189);if(Te=null,fe<128){if((ie-=1)<0)break;Ae.push(fe)}else if(fe<2048){if((ie-=2)<0)break;Ae.push(fe>>6|192,63&fe|128)}else if(fe<65536){if((ie-=3)<0)break;Ae.push(fe>>12|224,fe>>6&63|128,63&fe|128)}else{if(!(fe<1114112))throw new Error("Invalid code point");if((ie-=4)<0)break;Ae.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,63&fe|128)}}return Ae}function pe(se){return h.toByteArray(function(ie){if((ie=(ie=ie.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;ie.length%4!=0;)ie+="=";return ie}(se))}function xe(se,ie,fe,Ee){var Te;for(Te=0;Te<Ee&&!(Te+fe>=ie.length||Te>=se.length);++Te)ie[Te+fe]=se[Te];return Te}function be(se,ie){return se instanceof ie||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===ie.name}function ve(se){return se!=se}var ge=function(){for(var se="0123456789abcdef",ie=new Array(256),fe=0;fe<16;++fe)for(var Ee=16*fe,Te=0;Te<16;++Te)ie[Ee+Te]=se[fe]+se[Te];return ie}();function we(se){return typeof BigInt>"u"?_e:se}function _e(){throw new Error("BigInt not supported")}},25928:function(ee){ee.exports=k,ee.exports.isMobile=k,ee.exports.default=k;var z=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function k(o){o||(o={});var T=o.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var b=z.test(T)&&!e.test(T)||!!o.tablet&&M.test(T);return!b&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(b=!0),b}},48932:function(ee,z,e){e.r(z),e.d(z,{sankeyCenter:function(){return n},sankeyCircular:function(){return O},sankeyJustify:function(){return a},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var M=e(84706),k=e(34712),o=e(10132),T=e(6688),b=e.n(T);function h(xe){return xe.target.depth}function s(xe){return xe.depth}function t(xe,be){return be-1-xe.height}function a(xe,be){return xe.sourceLinks.length?xe.depth:be-1}function n(xe){return xe.targetLinks.length?xe.depth:xe.sourceLinks.length?(0,M.SY)(xe.sourceLinks,h)-1:0}function r(xe){return function(){return xe}}var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe};function l(xe,be){return p(xe.source,be.source)||xe.index-be.index}function u(xe,be){return p(xe.target,be.target)||xe.index-be.index}function p(xe,be){return xe.partOfCycle===be.partOfCycle?xe.y0-be.y0:xe.circularLinkType==="top"||be.circularLinkType==="bottom"?-1:1}function c(xe){return xe.value}function x(xe){return(xe.y0+xe.y1)/2}function d(xe){return x(xe.source)}function g(xe){return x(xe.target)}function v(xe){return xe.index}function y(xe){return xe.nodes}function m(xe){return xe.links}function _(xe,be){var ve=xe.get(be);if(!ve)throw new Error("missing: "+be);return ve}function f(xe,be){return be(xe)}var S=25,w=10,E=.3;function O(){var xe,be,ve=0,ge=0,we=1,_e=1,se=24,ie=v,fe=a,Ee=y,Te=m,Ae=32,Se=2,Oe=null;function De(){var me={nodes:Ee.apply(null,arguments),links:Te.apply(null,arguments)};(function(ze){ze.nodes.forEach(function(Ne,Ve){Ne.index=Ve,Ne.sourceLinks=[],Ne.targetLinks=[]});var Pe=(0,k.kH)(ze.nodes,ie);ze.links.forEach(function(Ne,Ve){Ne.index=Ve;var Ye=Ne.source,at=Ne.target;(Ye===void 0?"undefined":i(Ye))!=="object"&&(Ye=Ne.source=_(Pe,Ye)),(at===void 0?"undefined":i(at))!=="object"&&(at=Ne.target=_(Pe,at)),Ye.sourceLinks.push(Ne),at.targetLinks.push(Ne)})})(me),function(ze,Pe,Ne){var Ve=0;if(Ne===null){for(var Ye=[],at=0;at<ze.links.length;at++){var rt=ze.links[at],dt=rt.source.index,vt=rt.target.index;Ye[dt]||(Ye[dt]=[]),Ye[vt]||(Ye[vt]=[]),Ye[dt].indexOf(vt)===-1&&Ye[dt].push(vt)}var ht=b()(Ye);ht.sort(function(wt,Pt){return wt.length-Pt.length});var et={};for(at=0;at<ht.length;at++){var $e=ht[at].slice(-2);et[$e[0]]||(et[$e[0]]={}),et[$e[0]][$e[1]]=!0}ze.links.forEach(function(wt){var Pt=wt.target.index,Ot=wt.source.index;Pt===Ot||et[Ot]&&et[Ot][Pt]?(wt.circular=!0,wt.circularLinkID=Ve,Ve+=1):wt.circular=!1})}else ze.links.forEach(function(wt){wt.source[Ne]<wt.target[Ne]?wt.circular=!1:(wt.circular=!0,wt.circularLinkID=Ve,Ve+=1)})}(me,0,Oe),function(ze){ze.nodes.forEach(function(Pe){Pe.partOfCycle=!1,Pe.value=Math.max((0,M.oh)(Pe.sourceLinks,c),(0,M.oh)(Pe.targetLinks,c)),Pe.sourceLinks.forEach(function(Ne){Ne.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Ne.circularLinkType)}),Pe.targetLinks.forEach(function(Ne){Ne.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Ne.circularLinkType)})})}(me),function(ze){var Pe,Ne,Ve;for(Pe=ze.nodes,Ne=[],Ve=0;Pe.length;++Ve,Pe=Ne,Ne=[])Pe.forEach(function(Ye){Ye.depth=Ve,Ye.sourceLinks.forEach(function(at){Ne.indexOf(at.target)<0&&!at.circular&&Ne.push(at.target)})});for(Pe=ze.nodes,Ne=[],Ve=0;Pe.length;++Ve,Pe=Ne,Ne=[])Pe.forEach(function(Ye){Ye.height=Ve,Ye.targetLinks.forEach(function(at){Ne.indexOf(at.source)<0&&!at.circular&&Ne.push(at.source)})});ze.nodes.forEach(function(Ye){Ye.column=Math.floor(fe.call(null,Ye,Ve))})}(me),C(me,ie),function(ze,Pe,Ne){var Ve=(0,k.UJ)().key(function(vt){return vt.column}).sortKeys(M.XE).entries(ze.nodes).map(function(vt){return vt.values});(function(vt){if(be){var ht=1/0;Ve.forEach(function(Pt){var Ot=_e*be/(Pt.length+1);ht=Ot<ht?Ot:ht}),xe=ht}var et=(0,M.SY)(Ve,function(Pt){return(_e-ge-(Pt.length-1)*xe)/(0,M.oh)(Pt,c)});et*=E,ze.links.forEach(function(Pt){Pt.width=Pt.value*et});var $e=function(Pt){var Ot=0,At=0,He=0,Ze=0,Be=(0,M.kv)(Pt.nodes,function(Ge){return Ge.column});return Pt.links.forEach(function(Ge){Ge.circular&&(Ge.circularLinkType=="top"?Ot+=Ge.width:At+=Ge.width,Ge.target.column==0&&(Ze+=Ge.width),Ge.source.column==Be&&(He+=Ge.width))}),{top:Ot=Ot>0?Ot+S+w:Ot,bottom:At=At>0?At+S+w:At,left:Ze=Ze>0?Ze+S+w:Ze,right:He=He>0?He+S+w:He}}(ze),wt=function(Pt,Ot){var At=(0,M.kv)(Pt.nodes,function(it){return it.column}),He=we-ve,Ze=_e-ge,Be=He/(He+Ot.right+Ot.left),Ge=Ze/(Ze+Ot.top+Ot.bottom);return ve=ve*Be+Ot.left,we=Ot.right==0?we:we*Be,ge=ge*Ge+Ot.top,_e*=Ge,Pt.nodes.forEach(function(it){it.x0=ve+it.column*((we-ve-se)/At),it.x1=it.x0+se}),Ge}(ze,$e);et*=wt,ze.links.forEach(function(Pt){Pt.width=Pt.value*et}),Ve.forEach(function(Pt){var Ot=Pt.length;Pt.forEach(function(At,He){At.depth==Ve.length-1&&Ot==1||At.depth==0&&Ot==1?(At.y0=_e/2-At.value*et,At.y1=At.y0+At.value*et):At.partOfCycle?R(At,vt)==0?(At.y0=_e/2+He,At.y1=At.y0+At.value*et):At.circularLinkType=="top"?(At.y0=ge+He,At.y1=At.y0+At.value*et):(At.y0=_e-At.value*et-He,At.y1=At.y0+At.value*et):$e.top==0||$e.bottom==0?(At.y0=(_e-ge)/Ot*He,At.y1=At.y0+At.value*et):(At.y0=(_e-ge)/2-Ot/2+He,At.y1=At.y0+At.value*et)})})})(Ne),dt();for(var Ye=1,at=Pe;at>0;--at)rt(Ye*=.99,Ne),dt();function rt(vt,ht){var et=Ve.length;Ve.forEach(function($e){var wt=$e.length,Pt=$e[0].depth;$e.forEach(function(Ot){var At;if((Ot.sourceLinks.length||Ot.targetLinks.length)&&!(Ot.partOfCycle&&R(Ot,ht)>0))if(Pt==0&&wt==1)At=Ot.y1-Ot.y0,Ot.y0=_e/2-At/2,Ot.y1=_e/2+At/2;else if(Pt==et-1&&wt==1)At=Ot.y1-Ot.y0,Ot.y0=_e/2-At/2,Ot.y1=_e/2+At/2;else{var He=(0,M.mo)(Ot.sourceLinks,g),Ze=(0,M.mo)(Ot.targetLinks,d),Be=((He&&Ze?(He+Ze)/2:He||Ze)-x(Ot))*vt;Ot.y0+=Be,Ot.y1+=Be}})})}function dt(){Ve.forEach(function(vt){var ht,et,$e,wt=ge,Pt=vt.length;for(vt.sort(p),$e=0;$e<Pt;++$e)(et=wt-(ht=vt[$e]).y0)>0&&(ht.y0+=et,ht.y1+=et),wt=ht.y1+xe;if((et=wt-xe-_e)>0)for(wt=ht.y0-=et,ht.y1-=et,$e=Pt-2;$e>=0;--$e)(et=(ht=vt[$e]).y1+xe-wt)>0&&(ht.y0-=et,ht.y1-=et),wt=ht.y0})}}(me,Ae,ie),de(me);for(var Me=0;Me<4;Me++)oe(me,_e,ie),ae(me,0,ie),Z(me,ge,_e,ie),oe(me,_e,ie),ae(me,0,ie);return function(ze,Pe,Ne){var Ve=ze.nodes,Ye=ze.links,at=!1,rt=!1;if(Ye.forEach(function(ht){ht.circularLinkType=="top"?at=!0:ht.circularLinkType=="bottom"&&(rt=!0)}),at==0||rt==0){var dt=(0,M.SY)(Ve,function(ht){return ht.y0}),vt=(Ne-Pe)/((0,M.kv)(Ve,function(ht){return ht.y1})-dt);Ve.forEach(function(ht){var et=(ht.y1-ht.y0)*vt;ht.y0=(ht.y0-dt)*vt,ht.y1=ht.y0+et}),Ye.forEach(function(ht){ht.y0=(ht.y0-dt)*vt,ht.y1=(ht.y1-dt)*vt,ht.width=ht.width*vt})}}(me,ge,_e),N(me,Se,_e,ie),me}function de(me){me.nodes.forEach(function(Me){Me.sourceLinks.sort(u),Me.targetLinks.sort(l)}),me.nodes.forEach(function(Me){var ze=Me.y0,Pe=ze,Ne=Me.y1,Ve=Ne;Me.sourceLinks.forEach(function(Ye){Ye.circular?(Ye.y0=Ne-Ye.width/2,Ne-=Ye.width):(Ye.y0=ze+Ye.width/2,ze+=Ye.width)}),Me.targetLinks.forEach(function(Ye){Ye.circular?(Ye.y1=Ve-Ye.width/2,Ve-=Ye.width):(Ye.y1=Pe+Ye.width/2,Pe+=Ye.width)})})}return De.nodeId=function(me){return arguments.length?(ie=typeof me=="function"?me:r(me),De):ie},De.nodeAlign=function(me){return arguments.length?(fe=typeof me=="function"?me:r(me),De):fe},De.nodeWidth=function(me){return arguments.length?(se=+me,De):se},De.nodePadding=function(me){return arguments.length?(xe=+me,De):xe},De.nodes=function(me){return arguments.length?(Ee=typeof me=="function"?me:r(me),De):Ee},De.links=function(me){return arguments.length?(Te=typeof me=="function"?me:r(me),De):Te},De.size=function(me){return arguments.length?(ve=ge=0,we=+me[0],_e=+me[1],De):[we-ve,_e-ge]},De.extent=function(me){return arguments.length?(ve=+me[0][0],we=+me[1][0],ge=+me[0][1],_e=+me[1][1],De):[[ve,ge],[we,_e]]},De.iterations=function(me){return arguments.length?(Ae=+me,De):Ae},De.circularLinkGap=function(me){return arguments.length?(Se=+me,De):Se},De.nodePaddingRatio=function(me){return arguments.length?(be=+me,De):be},De.sortNodes=function(me){return arguments.length?(Oe=me,De):Oe},De.update=function(me){return C(me,ie),de(me),me.links.forEach(function(Me){Me.circular&&(Me.circularLinkType=Me.y0+Me.y1<_e?"top":"bottom",Me.source.circularLinkType=Me.circularLinkType,Me.target.circularLinkType=Me.circularLinkType)}),oe(me,_e,ie,!1),ae(me,0,ie),N(me,Se,_e,ie),me},De}function C(xe,be){var ve=0,ge=0;xe.links.forEach(function(we){we.circular&&(we.source.circularLinkType||we.target.circularLinkType?we.circularLinkType=we.source.circularLinkType?we.source.circularLinkType:we.target.circularLinkType:we.circularLinkType=ve<ge?"top":"bottom",we.circularLinkType=="top"?ve+=1:ge+=1,xe.nodes.forEach(function(_e){f(_e,be)!=f(we.source,be)&&f(_e,be)!=f(we.target,be)||(_e.circularLinkType=we.circularLinkType)}))}),xe.links.forEach(function(we){we.circular&&(we.source.circularLinkType==we.target.circularLinkType&&(we.circularLinkType=we.source.circularLinkType),pe(we,be)&&(we.circularLinkType=we.source.circularLinkType))})}function P(xe){var be=Math.abs(xe.y1-xe.y0),ve=Math.abs(xe.target.x0-xe.source.x1);return Math.atan(ve/be)}function R(xe,be){var ve=0;xe.sourceLinks.forEach(function(we){ve=we.circular&&!pe(we,be)?ve+1:ve});var ge=0;return xe.targetLinks.forEach(function(we){ge=we.circular&&!pe(we,be)?ge+1:ge}),ve+ge}function j(xe){var be=xe.source.sourceLinks,ve=0;be.forEach(function(_e){ve=_e.circular?ve+1:ve});var ge=xe.target.targetLinks,we=0;return ge.forEach(function(_e){we=_e.circular?we+1:we}),!(ve>1||we>1)}function D(xe,be,ve){return xe.sort(W),xe.forEach(function(ge,we){var _e,se,ie=0;if(pe(ge,ve)&&j(ge))ge.circularPathData.verticalBuffer=ie+ge.width/2;else{for(var fe=0;fe<we;fe++)if(_e=xe[we],se=xe[fe],!(_e.source.column<se.target.column||_e.target.column>se.source.column)){var Ee=xe[fe].circularPathData.verticalBuffer+xe[fe].width/2+be;ie=Ee>ie?Ee:ie}ge.circularPathData.verticalBuffer=ie+ge.width/2}}),xe}function N(xe,be,ve,ge){var we=(0,M.SY)(xe.links,function(_e){return _e.source.y0});xe.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})}),D(xe.links.filter(function(_e){return _e.circularLinkType=="top"}),be,ge),D(xe.links.filter(function(_e){return _e.circularLinkType=="bottom"}),be,ge),xe.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+w,_e.circularPathData.leftNodeBuffer=5,_e.circularPathData.rightNodeBuffer=5,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,pe(_e,ge)&&j(_e))_e.circularPathData.leftSmallArcRadius=w+_e.width/2,_e.circularPathData.leftLargeArcRadius=w+_e.width/2,_e.circularPathData.rightSmallArcRadius=w+_e.width/2,_e.circularPathData.rightLargeArcRadius=w+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+S+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-S-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var se=_e.source.column,ie=_e.circularLinkType,fe=xe.links.filter(function(Ae){return Ae.source.column==se&&Ae.circularLinkType==ie});_e.circularLinkType=="bottom"?fe.sort(V):fe.sort(F);var Ee=0;fe.forEach(function(Ae,Se){Ae.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=w+_e.width/2+Ee,_e.circularPathData.leftLargeArcRadius=w+_e.width/2+Se*be+Ee),Ee+=Ae.width}),se=_e.target.column,fe=xe.links.filter(function(Ae){return Ae.target.column==se&&Ae.circularLinkType==ie}),_e.circularLinkType=="bottom"?fe.sort(te):fe.sort(U),Ee=0,fe.forEach(function(Ae,Se){Ae.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=w+_e.width/2+Ee,_e.circularPathData.rightLargeArcRadius=w+_e.width/2+Se*be+Ee),Ee+=Ae.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(ve,_e.source.y1,_e.target.y1)+S+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=we-S-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=function(Ae){return Ae.circularLinkType=="top"?"M"+Ae.circularPathData.sourceX+" "+Ae.circularPathData.sourceY+" L"+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.sourceY+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftSmallArcRadius+" 0 0 0 "+Ae.circularPathData.leftFullExtent+" "+(Ae.circularPathData.sourceY-Ae.circularPathData.leftSmallArcRadius)+" L"+Ae.circularPathData.leftFullExtent+" "+Ae.circularPathData.verticalLeftInnerExtent+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftLargeArcRadius+" 0 0 0 "+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" L"+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightLargeArcRadius+" 0 0 0 "+Ae.circularPathData.rightFullExtent+" "+Ae.circularPathData.verticalRightInnerExtent+" L"+Ae.circularPathData.rightFullExtent+" "+(Ae.circularPathData.targetY-Ae.circularPathData.rightSmallArcRadius)+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightSmallArcRadius+" 0 0 0 "+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.targetY+" L"+Ae.circularPathData.targetX+" "+Ae.circularPathData.targetY:"M"+Ae.circularPathData.sourceX+" "+Ae.circularPathData.sourceY+" L"+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.sourceY+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftSmallArcRadius+" 0 0 1 "+Ae.circularPathData.leftFullExtent+" "+(Ae.circularPathData.sourceY+Ae.circularPathData.leftSmallArcRadius)+" L"+Ae.circularPathData.leftFullExtent+" "+Ae.circularPathData.verticalLeftInnerExtent+" A"+Ae.circularPathData.leftLargeArcRadius+" "+Ae.circularPathData.leftLargeArcRadius+" 0 0 1 "+Ae.circularPathData.leftInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" L"+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.verticalFullExtent+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightLargeArcRadius+" 0 0 1 "+Ae.circularPathData.rightFullExtent+" "+Ae.circularPathData.verticalRightInnerExtent+" L"+Ae.circularPathData.rightFullExtent+" "+(Ae.circularPathData.targetY+Ae.circularPathData.rightSmallArcRadius)+" A"+Ae.circularPathData.rightLargeArcRadius+" "+Ae.circularPathData.rightSmallArcRadius+" 0 0 1 "+Ae.circularPathData.rightInnerExtent+" "+Ae.circularPathData.targetY+" L"+Ae.circularPathData.targetX+" "+Ae.circularPathData.targetY}(_e);else{var Te=(0,o.ak)().source(function(Ae){return[Ae.source.x0+(Ae.source.x1-Ae.source.x0),Ae.y0]}).target(function(Ae){return[Ae.target.x0,Ae.y1]});_e.path=Te(_e)}})}function W(xe,be){return J(xe)==J(be)?xe.circularLinkType=="bottom"?V(xe,be):F(xe,be):J(be)-J(xe)}function F(xe,be){return xe.y0-be.y0}function V(xe,be){return be.y0-xe.y0}function U(xe,be){return xe.y1-be.y1}function te(xe,be){return be.y1-xe.y1}function J(xe){return xe.target.column-xe.source.column}function X(xe){return xe.target.x0-xe.source.x1}function K(xe,be){var ve=P(xe),ge=X(be)/Math.tan(ve);return he(xe)=="up"?xe.y1+ge:xe.y1-ge}function Q(xe,be){var ve=P(xe),ge=X(be)/Math.tan(ve);return he(xe)=="up"?xe.y1-ge:xe.y1+ge}function Z(xe,be,ve,ge){xe.links.forEach(function(we){if(!we.circular&&we.target.column-we.source.column>1){var _e=we.source.column+1,se=we.target.column-1,ie=1,fe=se-_e+1;for(ie=1;_e<=se;_e++,ie++)xe.nodes.forEach(function(Ee){if(Ee.column==_e){var Te,Ae=ie/(fe+1),Se=Math.pow(1-Ae,3),Oe=3*Ae*Math.pow(1-Ae,2),De=3*Math.pow(Ae,2)*(1-Ae),de=Math.pow(Ae,3),me=Se*we.y0+Oe*we.y0+De*we.y1+de*we.y1,Me=me-we.width/2,ze=me+we.width/2;Me>Ee.y0&&Me<Ee.y1?(Te=Ee.y1-Me+10,Te=Ee.circularLinkType=="bottom"?Te:-Te,Ee=re(Ee,Te,be,ve),xe.nodes.forEach(function(Pe){var Ne,Ve;f(Pe,ge)!=f(Ee,ge)&&Pe.column==Ee.column&&(Ve=Pe,(Ne=Ee).y0>Ve.y0&&Ne.y0<Ve.y1||Ne.y1>Ve.y0&&Ne.y1<Ve.y1||Ne.y0<Ve.y0&&Ne.y1>Ve.y1)&&re(Pe,Te,be,ve)})):(ze>Ee.y0&&ze<Ee.y1||Me<Ee.y0&&ze>Ee.y1)&&(Te=ze-Ee.y0+10,Ee=re(Ee,Te,be,ve),xe.nodes.forEach(function(Pe){f(Pe,ge)!=f(Ee,ge)&&Pe.column==Ee.column&&Pe.y0<Ee.y1&&Pe.y1>Ee.y1&&re(Pe,Te,be,ve)}))}})}})}function re(xe,be,ve,ge){return xe.y0+be>=ve&&xe.y1+be<=ge&&(xe.y0=xe.y0+be,xe.y1=xe.y1+be,xe.targetLinks.forEach(function(we){we.y1=we.y1+be}),xe.sourceLinks.forEach(function(we){we.y0=we.y0+be})),xe}function oe(xe,be,ve,ge){xe.nodes.forEach(function(we){ge&&we.y+(we.y1-we.y0)>be&&(we.y=we.y-(we.y+(we.y1-we.y0)-be));var _e=xe.links.filter(function(fe){return f(fe.source,ve)==f(we,ve)}),se=_e.length;se>1&&_e.sort(function(fe,Ee){if(!fe.circular&&!Ee.circular){if(fe.target.column==Ee.target.column||!ce(fe,Ee))return fe.y1-Ee.y1;if(fe.target.column>Ee.target.column){var Te=Q(Ee,fe);return fe.y1-Te}if(Ee.target.column>fe.target.column)return Q(fe,Ee)-Ee.y1}return fe.circular&&!Ee.circular?fe.circularLinkType=="top"?-1:1:Ee.circular&&!fe.circular?Ee.circularLinkType=="top"?1:-1:fe.circular&&Ee.circular?fe.circularLinkType===Ee.circularLinkType&&fe.circularLinkType=="top"?fe.target.column===Ee.target.column?fe.target.y1-Ee.target.y1:Ee.target.column-fe.target.column:fe.circularLinkType===Ee.circularLinkType&&fe.circularLinkType=="bottom"?fe.target.column===Ee.target.column?Ee.target.y1-fe.target.y1:fe.target.column-Ee.target.column:fe.circularLinkType=="top"?-1:1:void 0});var ie=we.y0;_e.forEach(function(fe){fe.y0=ie+fe.width/2,ie+=fe.width}),_e.forEach(function(fe,Ee){if(fe.circularLinkType=="bottom"){for(var Te=Ee+1,Ae=0;Te<se;Te++)Ae+=_e[Te].width;fe.y0=we.y1-Ae-fe.width/2}})})}function ae(xe,be,ve){xe.nodes.forEach(function(ge){var we=xe.links.filter(function(ie){return f(ie.target,ve)==f(ge,ve)}),_e=we.length;_e>1&&we.sort(function(ie,fe){if(!ie.circular&&!fe.circular){if(ie.source.column==fe.source.column||!ce(ie,fe))return ie.y0-fe.y0;if(fe.source.column<ie.source.column){var Ee=K(fe,ie);return ie.y0-Ee}if(ie.source.column<fe.source.column)return K(ie,fe)-fe.y0}return ie.circular&&!fe.circular?ie.circularLinkType=="top"?-1:1:fe.circular&&!ie.circular?fe.circularLinkType=="top"?1:-1:ie.circular&&fe.circular?ie.circularLinkType===fe.circularLinkType&&ie.circularLinkType=="top"?ie.source.column===fe.source.column?ie.source.y1-fe.source.y1:ie.source.column-fe.source.column:ie.circularLinkType===fe.circularLinkType&&ie.circularLinkType=="bottom"?ie.source.column===fe.source.column?ie.source.y1-fe.source.y1:fe.source.column-ie.source.column:ie.circularLinkType=="top"?-1:1:void 0});var se=ge.y0;we.forEach(function(ie){ie.y1=se+ie.width/2,se+=ie.width}),we.forEach(function(ie,fe){if(ie.circularLinkType=="bottom"){for(var Ee=fe+1,Te=0;Ee<_e;Ee++)Te+=we[Ee].width;ie.y1=ge.y1-Te-ie.width/2}})})}function ce(xe,be){return he(xe)==he(be)}function he(xe){return xe.y0-xe.y1>0?"up":"down"}function pe(xe,be){return f(xe.source,be)==f(xe.target,be)}},26800:function(ee,z,e){e.r(z),e.d(z,{sankey:function(){return v},sankeyCenter:function(){return s},sankeyJustify:function(){return h},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return f},sankeyRight:function(){return b}});var M=e(84706),k=e(34712);function o(S){return S.target.depth}function T(S){return S.depth}function b(S,w){return w-1-S.height}function h(S,w){return S.sourceLinks.length?S.depth:w-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,M.SY)(S.sourceLinks,o)-1:0}function t(S){return function(){return S}}function a(S,w){return r(S.source,w.source)||S.index-w.index}function n(S,w){return r(S.target,w.target)||S.index-w.index}function r(S,w){return S.y0-w.y0}function i(S){return S.value}function l(S){return(S.y0+S.y1)/2}function u(S){return l(S.source)*S.value}function p(S){return l(S.target)*S.value}function c(S){return S.index}function x(S){return S.nodes}function d(S){return S.links}function g(S,w){var E=S.get(w);if(!E)throw new Error("missing: "+w);return E}function v(){var S=0,w=0,E=1,O=1,C=24,P=8,R=c,j=h,D=x,N=d,W=32;function F(){var U={nodes:D.apply(null,arguments),links:N.apply(null,arguments)};return function(te){te.nodes.forEach(function(X,K){X.index=K,X.sourceLinks=[],X.targetLinks=[]});var J=(0,k.kH)(te.nodes,R);te.links.forEach(function(X,K){X.index=K;var Q=X.source,Z=X.target;typeof Q!="object"&&(Q=X.source=g(J,Q)),typeof Z!="object"&&(Z=X.target=g(J,Z)),Q.sourceLinks.push(X),Z.targetLinks.push(X)})}(U),function(te){te.nodes.forEach(function(J){J.value=Math.max((0,M.oh)(J.sourceLinks,i),(0,M.oh)(J.targetLinks,i))})}(U),function(te){var J,X,K;for(J=te.nodes,X=[],K=0;J.length;++K,J=X,X=[])J.forEach(function(Z){Z.depth=K,Z.sourceLinks.forEach(function(re){X.indexOf(re.target)<0&&X.push(re.target)})});for(J=te.nodes,X=[],K=0;J.length;++K,J=X,X=[])J.forEach(function(Z){Z.height=K,Z.targetLinks.forEach(function(re){X.indexOf(re.source)<0&&X.push(re.source)})});var Q=(E-S-C)/(K-1);te.nodes.forEach(function(Z){Z.x1=(Z.x0=S+Math.max(0,Math.min(K-1,Math.floor(j.call(null,Z,K))))*Q)+C})}(U),function(te){var J=(0,k.UJ)().key(function(oe){return oe.x0}).sortKeys(M.XE).entries(te.nodes).map(function(oe){return oe.values});(function(){var oe=(0,M.kv)(J,function(he){return he.length}),ae=.6666666666666666*(O-w)/(oe-1);P>ae&&(P=ae);var ce=(0,M.SY)(J,function(he){return(O-w-(he.length-1)*P)/(0,M.oh)(he,i)});J.forEach(function(he){he.forEach(function(pe,xe){pe.y1=(pe.y0=xe)+pe.value*ce})}),te.links.forEach(function(he){he.width=he.value*ce})})(),re();for(var X=1,K=W;K>0;--K)Z(X*=.99),re(),Q(X),re();function Q(oe){J.forEach(function(ae){ae.forEach(function(ce){if(ce.targetLinks.length){var he=((0,M.oh)(ce.targetLinks,u)/(0,M.oh)(ce.targetLinks,i)-l(ce))*oe;ce.y0+=he,ce.y1+=he}})})}function Z(oe){J.slice().reverse().forEach(function(ae){ae.forEach(function(ce){if(ce.sourceLinks.length){var he=((0,M.oh)(ce.sourceLinks,p)/(0,M.oh)(ce.sourceLinks,i)-l(ce))*oe;ce.y0+=he,ce.y1+=he}})})}function re(){J.forEach(function(oe){var ae,ce,he,pe=w,xe=oe.length;for(oe.sort(r),he=0;he<xe;++he)(ce=pe-(ae=oe[he]).y0)>0&&(ae.y0+=ce,ae.y1+=ce),pe=ae.y1+P;if((ce=pe-P-O)>0)for(pe=ae.y0-=ce,ae.y1-=ce,he=xe-2;he>=0;--he)(ce=(ae=oe[he]).y1+P-pe)>0&&(ae.y0-=ce,ae.y1-=ce),pe=ae.y0})}}(U),V(U),U}function V(U){U.nodes.forEach(function(te){te.sourceLinks.sort(n),te.targetLinks.sort(a)}),U.nodes.forEach(function(te){var J=te.y0,X=J;te.sourceLinks.forEach(function(K){K.y0=J+K.width/2,J+=K.width}),te.targetLinks.forEach(function(K){K.y1=X+K.width/2,X+=K.width})})}return F.update=function(U){return V(U),U},F.nodeId=function(U){return arguments.length?(R=typeof U=="function"?U:t(U),F):R},F.nodeAlign=function(U){return arguments.length?(j=typeof U=="function"?U:t(U),F):j},F.nodeWidth=function(U){return arguments.length?(C=+U,F):C},F.nodePadding=function(U){return arguments.length?(P=+U,F):P},F.nodes=function(U){return arguments.length?(D=typeof U=="function"?U:t(U),F):D},F.links=function(U){return arguments.length?(N=typeof U=="function"?U:t(U),F):N},F.size=function(U){return arguments.length?(S=w=0,E=+U[0],O=+U[1],F):[E-S,O-w]},F.extent=function(U){return arguments.length?(S=+U[0][0],E=+U[1][0],w=+U[0][1],O=+U[1][1],F):[[S,w],[E,O]]},F.iterations=function(U){return arguments.length?(W=+U,F):W},F}var y=e(10132);function m(S){return[S.source.x1,S.y0]}function _(S){return[S.target.x0,S.y1]}function f(){return(0,y.ak)().source(m).target(_)}},33428:function(ee,z,e){var M,k;(function(){var o={version:"3.8.0"},T=[].slice,b=function(L){return T.call(L)},h=self.document;function s(L){return L&&(L.ownerDocument||L.document||L).documentElement}function t(L){return L&&(L.ownerDocument&&L.ownerDocument.defaultView||L.document&&L||L.defaultView)}if(h)try{b(h.documentElement.childNodes)[0].nodeType}catch{b=function(q){for(var $=q.length,ne=new Array($);$--;)ne[$]=q[$];return ne}}if(Date.now||(Date.now=function(){return+new Date}),h)try{h.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,n=a.setAttribute,r=a.setAttributeNS,i=this.CSSStyleDeclaration.prototype,l=i.setProperty;a.setAttribute=function(q,$){n.call(this,q,$+"")},a.setAttributeNS=function(q,$,ne){r.call(this,q,$,ne+"")},i.setProperty=function(q,$,ne){l.call(this,q,$+"",ne)}}function u(L,q){return L<q?-1:L>q?1:L>=q?0:NaN}function p(L){return L===null?NaN:+L}function c(L){return!isNaN(L)}function x(L){return{left:function(q,$,ne,ue){for(arguments.length<3&&(ne=0),arguments.length<4&&(ue=q.length);ne<ue;){var ye=ne+ue>>>1;L(q[ye],$)<0?ne=ye+1:ue=ye}return ne},right:function(q,$,ne,ue){for(arguments.length<3&&(ne=0),arguments.length<4&&(ue=q.length);ne<ue;){var ye=ne+ue>>>1;L(q[ye],$)>0?ue=ye:ne=ye+1}return ne}}}o.ascending=u,o.descending=function(L,q){return q<L?-1:q>L?1:q>=L?0:NaN},o.min=function(L,q){var $,ne,ue=-1,ye=L.length;if(arguments.length===1){for(;++ue<ye;)if((ne=L[ue])!=null&&ne>=ne){$=ne;break}for(;++ue<ye;)(ne=L[ue])!=null&&$>ne&&($=ne)}else{for(;++ue<ye;)if((ne=q.call(L,L[ue],ue))!=null&&ne>=ne){$=ne;break}for(;++ue<ye;)(ne=q.call(L,L[ue],ue))!=null&&$>ne&&($=ne)}return $},o.max=function(L,q){var $,ne,ue=-1,ye=L.length;if(arguments.length===1){for(;++ue<ye;)if((ne=L[ue])!=null&&ne>=ne){$=ne;break}for(;++ue<ye;)(ne=L[ue])!=null&&ne>$&&($=ne)}else{for(;++ue<ye;)if((ne=q.call(L,L[ue],ue))!=null&&ne>=ne){$=ne;break}for(;++ue<ye;)(ne=q.call(L,L[ue],ue))!=null&&ne>$&&($=ne)}return $},o.extent=function(L,q){var $,ne,ue,ye=-1,Le=L.length;if(arguments.length===1){for(;++ye<Le;)if((ne=L[ye])!=null&&ne>=ne){$=ue=ne;break}for(;++ye<Le;)(ne=L[ye])!=null&&($>ne&&($=ne),ue<ne&&(ue=ne))}else{for(;++ye<Le;)if((ne=q.call(L,L[ye],ye))!=null&&ne>=ne){$=ue=ne;break}for(;++ye<Le;)(ne=q.call(L,L[ye],ye))!=null&&($>ne&&($=ne),ue<ne&&(ue=ne))}return[$,ue]},o.sum=function(L,q){var $,ne=0,ue=L.length,ye=-1;if(arguments.length===1)for(;++ye<ue;)c($=+L[ye])&&(ne+=$);else for(;++ye<ue;)c($=+q.call(L,L[ye],ye))&&(ne+=$);return ne},o.mean=function(L,q){var $,ne=0,ue=L.length,ye=-1,Le=ue;if(arguments.length===1)for(;++ye<ue;)c($=p(L[ye]))?ne+=$:--Le;else for(;++ye<ue;)c($=p(q.call(L,L[ye],ye)))?ne+=$:--Le;if(Le)return ne/Le},o.quantile=function(L,q){var $=(L.length-1)*q+1,ne=Math.floor($),ue=+L[ne-1],ye=$-ne;return ye?ue+ye*(L[ne]-ue):ue},o.median=function(L,q){var $,ne=[],ue=L.length,ye=-1;if(arguments.length===1)for(;++ye<ue;)c($=p(L[ye]))&&ne.push($);else for(;++ye<ue;)c($=p(q.call(L,L[ye],ye)))&&ne.push($);if(ne.length)return o.quantile(ne.sort(u),.5)},o.variance=function(L,q){var $,ne,ue=L.length,ye=0,Le=0,Ie=-1,Ue=0;if(arguments.length===1)for(;++Ie<ue;)c($=p(L[Ie]))&&(Le+=(ne=$-ye)*($-(ye+=ne/++Ue)));else for(;++Ie<ue;)c($=p(q.call(L,L[Ie],Ie)))&&(Le+=(ne=$-ye)*($-(ye+=ne/++Ue)));if(Ue>1)return Le/(Ue-1)},o.deviation=function(){var L=o.variance.apply(this,arguments);return L&&Math.sqrt(L)};var d=x(u);function g(L){return L.length}o.bisectLeft=d.left,o.bisect=o.bisectRight=d.right,o.bisector=function(L){return x(L.length===1?function(q,$){return u(L(q),$)}:L)},o.shuffle=function(L,q,$){(ye=arguments.length)<3&&($=L.length,ye<2&&(q=0));for(var ne,ue,ye=$-q;ye;)ue=Math.random()*ye--|0,ne=L[ye+q],L[ye+q]=L[ue+q],L[ue+q]=ne;return L},o.permute=function(L,q){for(var $=q.length,ne=new Array($);$--;)ne[$]=L[q[$]];return ne},o.pairs=function(L){for(var q=0,$=L.length-1,ne=L[0],ue=new Array($<0?0:$);q<$;)ue[q]=[ne,ne=L[++q]];return ue},o.transpose=function(L){if(!(ue=L.length))return[];for(var q=-1,$=o.min(L,g),ne=new Array($);++q<$;)for(var ue,ye=-1,Le=ne[q]=new Array(ue);++ye<ue;)Le[ye]=L[ye][q];return ne},o.zip=function(){return o.transpose(arguments)},o.keys=function(L){var q=[];for(var $ in L)q.push($);return q},o.values=function(L){var q=[];for(var $ in L)q.push(L[$]);return q},o.entries=function(L){var q=[];for(var $ in L)q.push({key:$,value:L[$]});return q},o.merge=function(L){for(var q,$,ne,ue=L.length,ye=-1,Le=0;++ye<ue;)Le+=L[ye].length;for($=new Array(Le);--ue>=0;)for(q=(ne=L[ue]).length;--q>=0;)$[--Le]=ne[q];return $};var v=Math.abs;function y(L,q){for(var $ in q)Object.defineProperty(L.prototype,$,{value:q[$],enumerable:!1})}function m(){this._=Object.create(null)}o.range=function(L,q,$){if(arguments.length<3&&($=1,arguments.length<2&&(q=L,L=0)),(q-L)/$==1/0)throw new Error("infinite range");var ne,ue=[],ye=function(Ie){for(var Ue=1;Ie*Ue%1;)Ue*=10;return Ue}(v($)),Le=-1;if(L*=ye,q*=ye,($*=ye)<0)for(;(ne=L+$*++Le)>q;)ue.push(ne/ye);else for(;(ne=L+$*++Le)<q;)ue.push(ne/ye);return ue},o.map=function(L,q){var $=new m;if(L instanceof m)L.forEach(function(Ie,Ue){$.set(Ie,Ue)});else if(Array.isArray(L)){var ne,ue=-1,ye=L.length;if(arguments.length===1)for(;++ue<ye;)$.set(ue,L[ue]);else for(;++ue<ye;)$.set(q.call(L,ne=L[ue],ue),ne)}else for(var Le in L)$.set(Le,L[Le]);return $};var _="__proto__",f="\0";function S(L){return(L+="")===_||L[0]===f?f+L:L}function w(L){return(L+="")[0]===f?L.slice(1):L}function E(L){return S(L)in this._}function O(L){return(L=S(L))in this._&&delete this._[L]}function C(){var L=[];for(var q in this._)L.push(w(q));return L}function P(){var L=0;for(var q in this._)++L;return L}function R(){for(var L in this._)return!1;return!0}function j(){this._=Object.create(null)}function D(L){return L}function N(L,q,$){return function(){var ne=$.apply(q,arguments);return ne===q?L:ne}}function W(L,q){if(q in L)return q;q=q.charAt(0).toUpperCase()+q.slice(1);for(var $=0,ne=F.length;$<ne;++$){var ue=F[$]+q;if(ue in L)return ue}}y(m,{has:E,get:function(L){return this._[S(L)]},set:function(L,q){return this._[S(L)]=q},remove:O,keys:C,values:function(){var L=[];for(var q in this._)L.push(this._[q]);return L},entries:function(){var L=[];for(var q in this._)L.push({key:w(q),value:this._[q]});return L},size:P,empty:R,forEach:function(L){for(var q in this._)L.call(this,w(q),this._[q])}}),o.nest=function(){var L,q,$={},ne=[],ue=[];function ye(Ie,Ue,qe){if(qe>=ne.length)return q?q.call($,Ue):L?Ue.sort(L):Ue;for(var Qe,lt,ft,xt,St=-1,Tt=Ue.length,zt=ne[qe++],Et=new m;++St<Tt;)(xt=Et.get(Qe=zt(lt=Ue[St])))?xt.push(lt):Et.set(Qe,[lt]);return Ie?(lt=Ie(),ft=function(Yt,qt){lt.set(Yt,ye(Ie,qt,qe))}):(lt={},ft=function(Yt,qt){lt[Yt]=ye(Ie,qt,qe)}),Et.forEach(ft),lt}function Le(Ie,Ue){if(Ue>=ne.length)return Ie;var qe=[],Qe=ue[Ue++];return Ie.forEach(function(lt,ft){qe.push({key:lt,values:Le(ft,Ue)})}),Qe?qe.sort(function(lt,ft){return Qe(lt.key,ft.key)}):qe}return $.map=function(Ie,Ue){return ye(Ue,Ie,0)},$.entries=function(Ie){return Le(ye(o.map,Ie,0),0)},$.key=function(Ie){return ne.push(Ie),$},$.sortKeys=function(Ie){return ue[ne.length-1]=Ie,$},$.sortValues=function(Ie){return L=Ie,$},$.rollup=function(Ie){return q=Ie,$},$},o.set=function(L){var q=new j;if(L)for(var $=0,ne=L.length;$<ne;++$)q.add(L[$]);return q},y(j,{has:E,add:function(L){return this._[S(L+="")]=!0,L},remove:O,values:C,size:P,empty:R,forEach:function(L){for(var q in this._)L.call(this,w(q))}}),o.behavior={},o.rebind=function(L,q){for(var $,ne=1,ue=arguments.length;++ne<ue;)L[$=arguments[ne]]=N(L,q,q[$]);return L};var F=["webkit","ms","moz","Moz","o","O"];function V(){}function U(){}function te(L){var q=[],$=new m;function ne(){for(var ue,ye=q,Le=-1,Ie=ye.length;++Le<Ie;)(ue=ye[Le].on)&&ue.apply(this,arguments);return L}return ne.on=function(ue,ye){var Le,Ie=$.get(ue);return arguments.length<2?Ie&&Ie.on:(Ie&&(Ie.on=null,q=q.slice(0,Le=q.indexOf(Ie)).concat(q.slice(Le+1)),$.remove(ue)),ye&&q.push($.set(ue,{on:ye})),L)},ne}function J(){o.event.preventDefault()}function X(){for(var L,q=o.event;L=q.sourceEvent;)q=L;return q}function K(L){for(var q=new U,$=0,ne=arguments.length;++$<ne;)q[arguments[$]]=te(q);return q.of=function(ue,ye){return function(Le){try{var Ie=Le.sourceEvent=o.event;Le.target=L,o.event=Le,q[Le.type].apply(ue,ye)}finally{o.event=Ie}}},q}o.dispatch=function(){for(var L=new U,q=-1,$=arguments.length;++q<$;)L[arguments[q]]=te(L);return L},U.prototype.on=function(L,q){var $=L.indexOf("."),ne="";if($>=0&&(ne=L.slice($+1),L=L.slice(0,$)),L)return arguments.length<2?this[L].on(ne):this[L].on(ne,q);if(arguments.length===2){if(q==null)for(L in this)this.hasOwnProperty(L)&&this[L].on(ne,null);return this}},o.event=null,o.requote=function(L){return L.replace(Q,"\\$&")};var Q=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Z={}.__proto__?function(L,q){L.__proto__=q}:function(L,q){for(var $ in q)L[$]=q[$]};function re(L){return Z(L,he),L}var oe=function(L,q){return q.querySelector(L)},ae=function(L,q){return q.querySelectorAll(L)},ce=function(L,q){var $=L.matches||L[W(L,"matchesSelector")];return ce=function(ne,ue){return $.call(ne,ue)},ce(L,q)};typeof Sizzle=="function"&&(oe=function(L,q){return Sizzle(L,q)[0]||null},ae=Sizzle,ce=Sizzle.matchesSelector),o.selection=function(){return o.select(h.documentElement)};var he=o.selection.prototype=[];function pe(L){return typeof L=="function"?L:function(){return oe(L,this)}}function xe(L){return typeof L=="function"?L:function(){return ae(L,this)}}he.select=function(L){var q,$,ne,ue,ye=[];L=pe(L);for(var Le=-1,Ie=this.length;++Le<Ie;){ye.push(q=[]),q.parentNode=(ne=this[Le]).parentNode;for(var Ue=-1,qe=ne.length;++Ue<qe;)(ue=ne[Ue])?(q.push($=L.call(ue,ue.__data__,Ue,Le)),$&&"__data__"in ue&&($.__data__=ue.__data__)):q.push(null)}return re(ye)},he.selectAll=function(L){var q,$,ne=[];L=xe(L);for(var ue=-1,ye=this.length;++ue<ye;)for(var Le=this[ue],Ie=-1,Ue=Le.length;++Ie<Ue;)($=Le[Ie])&&(ne.push(q=b(L.call($,$.__data__,Ie,ue))),q.parentNode=$);return re(ne)};var be="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:be,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ge(L,q){return L=o.ns.qualify(L),q==null?L.local?function(){this.removeAttributeNS(L.space,L.local)}:function(){this.removeAttribute(L)}:typeof q=="function"?L.local?function(){var $=q.apply(this,arguments);$==null?this.removeAttributeNS(L.space,L.local):this.setAttributeNS(L.space,L.local,$)}:function(){var $=q.apply(this,arguments);$==null?this.removeAttribute(L):this.setAttribute(L,$)}:L.local?function(){this.setAttributeNS(L.space,L.local,q)}:function(){this.setAttribute(L,q)}}function we(L){return L.trim().replace(/\s+/g," ")}function _e(L){return new RegExp("(?:^|\\s+)"+o.requote(L)+"(?:\\s+|$)","g")}function se(L){return(L+"").trim().split(/^|\s+/)}function ie(L,q){var $=(L=se(L).map(fe)).length;return typeof q=="function"?function(){for(var ne=-1,ue=q.apply(this,arguments);++ne<$;)L[ne](this,ue)}:function(){for(var ne=-1;++ne<$;)L[ne](this,q)}}function fe(L){var q=_e(L);return function($,ne){if(ue=$.classList)return ne?ue.add(L):ue.remove(L);var ue=$.getAttribute("class")||"";ne?(q.lastIndex=0,q.test(ue)||$.setAttribute("class",we(ue+" "+L))):$.setAttribute("class",we(ue.replace(q," ")))}}function Ee(L,q,$){return q==null?function(){this.style.removeProperty(L)}:typeof q=="function"?function(){var ne=q.apply(this,arguments);ne==null?this.style.removeProperty(L):this.style.setProperty(L,ne,$)}:function(){this.style.setProperty(L,q,$)}}function Te(L,q){return q==null?function(){delete this[L]}:typeof q=="function"?function(){var $=q.apply(this,arguments);$==null?delete this[L]:this[L]=$}:function(){this[L]=q}}function Ae(L){return typeof L=="function"?L:(L=o.ns.qualify(L)).local?function(){return this.ownerDocument.createElementNS(L.space,L.local)}:function(){var q=this.ownerDocument,$=this.namespaceURI;return $===be&&q.documentElement.namespaceURI===be?q.createElement(L):q.createElementNS($,L)}}function Se(){var L=this.parentNode;L&&L.removeChild(this)}function Oe(L){return{__data__:L}}function De(L){return function(){return ce(this,L)}}function de(L){return arguments.length||(L=u),function(q,$){return q&&$?L(q.__data__,$.__data__):!q-!$}}function me(L,q){for(var $=0,ne=L.length;$<ne;$++)for(var ue,ye=L[$],Le=0,Ie=ye.length;Le<Ie;Le++)(ue=ye[Le])&&q(ue,Le,$);return L}function Me(L){return Z(L,ze),L}o.ns={prefix:ve,qualify:function(L){var q=L.indexOf(":"),$=L;return q>=0&&($=L.slice(0,q))!=="xmlns"&&(L=L.slice(q+1)),ve.hasOwnProperty($)?{space:ve[$],local:L}:L}},he.attr=function(L,q){if(arguments.length<2){if(typeof L=="string"){var $=this.node();return(L=o.ns.qualify(L)).local?$.getAttributeNS(L.space,L.local):$.getAttribute(L)}for(q in L)this.each(ge(q,L[q]));return this}return this.each(ge(L,q))},he.classed=function(L,q){if(arguments.length<2){if(typeof L=="string"){var $=this.node(),ne=(L=se(L)).length,ue=-1;if(q=$.classList){for(;++ue<ne;)if(!q.contains(L[ue]))return!1}else for(q=$.getAttribute("class");++ue<ne;)if(!_e(L[ue]).test(q))return!1;return!0}for(q in L)this.each(ie(q,L[q]));return this}return this.each(ie(L,q))},he.style=function(L,q,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(q=""),L)this.each(Ee($,L[$],q));return this}if(ne<2){var ue=this.node();return t(ue).getComputedStyle(ue,null).getPropertyValue(L)}$=""}return this.each(Ee(L,q,$))},he.property=function(L,q){if(arguments.length<2){if(typeof L=="string")return this.node()[L];for(q in L)this.each(Te(q,L[q]));return this}return this.each(Te(L,q))},he.text=function(L){return arguments.length?this.each(typeof L=="function"?function(){var q=L.apply(this,arguments);this.textContent=q??""}:L==null?function(){this.textContent=""}:function(){this.textContent=L}):this.node().textContent},he.html=function(L){return arguments.length?this.each(typeof L=="function"?function(){var q=L.apply(this,arguments);this.innerHTML=q??""}:L==null?function(){this.innerHTML=""}:function(){this.innerHTML=L}):this.node().innerHTML},he.append=function(L){return L=Ae(L),this.select(function(){return this.appendChild(L.apply(this,arguments))})},he.insert=function(L,q){return L=Ae(L),q=pe(q),this.select(function(){return this.insertBefore(L.apply(this,arguments),q.apply(this,arguments)||null)})},he.remove=function(){return this.each(Se)},he.data=function(L,q){var $,ne,ue=-1,ye=this.length;if(!arguments.length){for(L=new Array(ye=($=this[0]).length);++ue<ye;)(ne=$[ue])&&(L[ue]=ne.__data__);return L}function Le(Qe,lt){var ft,xt,St,Tt=Qe.length,zt=lt.length,Et=Math.min(Tt,zt),Yt=new Array(zt),qt=new Array(zt),Ft=new Array(Tt);if(q){var fn,dn=new m,kn=new Array(Tt);for(ft=-1;++ft<Tt;)(xt=Qe[ft])&&(dn.has(fn=q.call(xt,xt.__data__,ft))?Ft[ft]=xt:dn.set(fn,xt),kn[ft]=fn);for(ft=-1;++ft<zt;)(xt=dn.get(fn=q.call(lt,St=lt[ft],ft)))?xt!==!0&&(Yt[ft]=xt,xt.__data__=St):qt[ft]=Oe(St),dn.set(fn,!0);for(ft=-1;++ft<Tt;)ft in kn&&dn.get(kn[ft])!==!0&&(Ft[ft]=Qe[ft])}else{for(ft=-1;++ft<Et;)xt=Qe[ft],St=lt[ft],xt?(xt.__data__=St,Yt[ft]=xt):qt[ft]=Oe(St);for(;ft<zt;++ft)qt[ft]=Oe(lt[ft]);for(;ft<Tt;++ft)Ft[ft]=Qe[ft]}qt.update=Yt,qt.parentNode=Yt.parentNode=Ft.parentNode=Qe.parentNode,Ie.push(qt),Ue.push(Yt),qe.push(Ft)}var Ie=Me([]),Ue=re([]),qe=re([]);if(typeof L=="function")for(;++ue<ye;)Le($=this[ue],L.call($,$.parentNode.__data__,ue));else for(;++ue<ye;)Le($=this[ue],L);return Ue.enter=function(){return Ie},Ue.exit=function(){return qe},Ue},he.datum=function(L){return arguments.length?this.property("__data__",L):this.property("__data__")},he.filter=function(L){var q,$,ne,ue=[];typeof L!="function"&&(L=De(L));for(var ye=0,Le=this.length;ye<Le;ye++){ue.push(q=[]),q.parentNode=($=this[ye]).parentNode;for(var Ie=0,Ue=$.length;Ie<Ue;Ie++)(ne=$[Ie])&&L.call(ne,ne.__data__,Ie,ye)&&q.push(ne)}return re(ue)},he.order=function(){for(var L=-1,q=this.length;++L<q;)for(var $,ne=this[L],ue=ne.length-1,ye=ne[ue];--ue>=0;)($=ne[ue])&&(ye&&ye!==$.nextSibling&&ye.parentNode.insertBefore($,ye),ye=$);return this},he.sort=function(L){L=de.apply(this,arguments);for(var q=-1,$=this.length;++q<$;)this[q].sort(L);return this.order()},he.each=function(L){return me(this,function(q,$,ne){L.call(q,q.__data__,$,ne)})},he.call=function(L){var q=b(arguments);return L.apply(q[0]=this,q),this},he.empty=function(){return!this.node()},he.node=function(){for(var L=0,q=this.length;L<q;L++)for(var $=this[L],ne=0,ue=$.length;ne<ue;ne++){var ye=$[ne];if(ye)return ye}return null},he.size=function(){var L=0;return me(this,function(){++L}),L};var ze=[];function Pe(L,q,$){var ne="__on"+L,ue=L.indexOf("."),ye=Ve;ue>0&&(L=L.slice(0,ue));var Le=Ne.get(L);function Ie(){var Ue=this[ne];Ue&&(this.removeEventListener(L,Ue,Ue.$),delete this[ne])}return Le&&(L=Le,ye=Ye),ue?q?function(){var Ue=ye(q,b(arguments));Ie.call(this),this.addEventListener(L,this[ne]=Ue,Ue.$=$),Ue._=q}:Ie:q?V:function(){var Ue,qe=new RegExp("^__on([^.]+)"+o.requote(L)+"$");for(var Qe in this)if(Ue=Qe.match(qe)){var lt=this[Qe];this.removeEventListener(Ue[1],lt,lt.$),delete this[Qe]}}}o.selection.enter=Me,o.selection.enter.prototype=ze,ze.append=he.append,ze.empty=he.empty,ze.node=he.node,ze.call=he.call,ze.size=he.size,ze.select=function(L){for(var q,$,ne,ue,ye,Le=[],Ie=-1,Ue=this.length;++Ie<Ue;){ne=(ue=this[Ie]).update,Le.push(q=[]),q.parentNode=ue.parentNode;for(var qe=-1,Qe=ue.length;++qe<Qe;)(ye=ue[qe])?(q.push(ne[qe]=$=L.call(ue.parentNode,ye.__data__,qe,Ie)),$.__data__=ye.__data__):q.push(null)}return re(Le)},ze.insert=function(L,q){var $,ne,ue;return arguments.length<2&&($=this,q=function(ye,Le,Ie){var Ue,qe=$[Ie].update,Qe=qe.length;for(Ie!=ue&&(ue=Ie,ne=0),Le>=ne&&(ne=Le+1);!(Ue=qe[ne])&&++ne<Qe;);return Ue}),he.insert.call(this,L,q)},o.select=function(L){var q;return typeof L=="string"?(q=[oe(L,h)]).parentNode=h.documentElement:(q=[L]).parentNode=s(L),re([q])},o.selectAll=function(L){var q;return typeof L=="string"?(q=b(ae(L,h))).parentNode=h.documentElement:(q=b(L)).parentNode=null,re([q])},he.on=function(L,q,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(q=!1),L)this.each(Pe($,L[$],q));return this}if(ne<2)return(ne=this.node()["__on"+L])&&ne._;$=!1}return this.each(Pe(L,q,$))};var Ne=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(L,q){return function($){var ne=o.event;o.event=$,q[0]=this.__data__;try{L.apply(this,q)}finally{o.event=ne}}}function Ye(L,q){var $=Ve(L,q);return function(ne){var ue=this,ye=ne.relatedTarget;ye&&(ye===ue||8&ye.compareDocumentPosition(ue))||$.call(ue,ne)}}h&&Ne.forEach(function(L){"on"+L in h&&Ne.remove(L)});var at,rt=0;function dt(L){var q=".dragsuppress-"+ ++rt,$="click"+q,ne=o.select(t(L)).on("touchmove"+q,J).on("dragstart"+q,J).on("selectstart"+q,J);if(at==null&&(at=!("onselectstart"in L)&&W(L.style,"userSelect")),at){var ue=s(L).style,ye=ue[at];ue[at]="none"}return function(Le){if(ne.on(q,null),at&&(ue[at]=ye),Le){var Ie=function(){ne.on($,null)};ne.on($,function(){J(),Ie()},!0),setTimeout(Ie,0)}}}o.mouse=function(L){return ht(L,X())};var vt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(L,q){q.changedTouches&&(q=q.changedTouches[0]);var $=L.ownerSVGElement||L;if($.createSVGPoint){var ne=$.createSVGPoint();if(vt<0){var ue=t(L);if(ue.scrollX||ue.scrollY){var ye=($=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();vt=!(ye.f||ye.e),$.remove()}}return vt?(ne.x=q.pageX,ne.y=q.pageY):(ne.x=q.clientX,ne.y=q.clientY),[(ne=ne.matrixTransform(L.getScreenCTM().inverse())).x,ne.y]}var Le=L.getBoundingClientRect();return[q.clientX-Le.left-L.clientLeft,q.clientY-Le.top-L.clientTop]}function et(){return o.event.changedTouches[0].identifier}o.touch=function(L,q,$){if(arguments.length<3&&($=q,q=X().changedTouches),q){for(var ne,ue=0,ye=q.length;ue<ye;++ue)if((ne=q[ue]).identifier===$)return ht(L,ne)}},o.behavior.drag=function(){var L=K(ue,"drag","dragstart","dragend"),q=null,$=ye(V,o.mouse,t,"mousemove","mouseup"),ne=ye(et,o.touch,D,"touchmove","touchend");function ue(){this.on("mousedown.drag",$).on("touchstart.drag",ne)}function ye(Le,Ie,Ue,qe,Qe){return function(){var lt,ft=this,xt=o.event.target.correspondingElement||o.event.target,St=ft.parentNode,Tt=L.of(ft,arguments),zt=0,Et=Le(),Yt=".drag"+(Et==null?"":"-"+Et),qt=o.select(Ue(xt)).on(qe+Yt,function(){var dn,kn,Sn=Ie(St,Et);Sn&&(dn=Sn[0]-fn[0],kn=Sn[1]-fn[1],zt|=dn|kn,fn=Sn,Tt({type:"drag",x:Sn[0]+lt[0],y:Sn[1]+lt[1],dx:dn,dy:kn}))}).on(Qe+Yt,function(){Ie(St,Et)&&(qt.on(qe+Yt,null).on(Qe+Yt,null),Ft(zt),Tt({type:"dragend"}))}),Ft=dt(xt),fn=Ie(St,Et);lt=q?[(lt=q.apply(ft,arguments)).x-fn[0],lt.y-fn[1]]:[0,0],Tt({type:"dragstart"})}}return ue.origin=function(Le){return arguments.length?(q=Le,ue):q},o.rebind(ue,L,"on")},o.touches=function(L,q){return arguments.length<2&&(q=X().touches),q?b(q).map(function($){var ne=ht(L,$);return ne.identifier=$.identifier,ne}):[]};var $e=1e-6,wt=$e*$e,Pt=Math.PI,Ot=2*Pt,At=Ot-$e,He=Pt/2,Ze=Pt/180,Be=180/Pt;function Ge(L){return L>1?He:L<-1?-He:Math.asin(L)}function it(L){return((L=Math.exp(L))+1/L)/2}var tt=Math.SQRT2;o.interpolateZoom=function(L,q){var $,ne,ue=L[0],ye=L[1],Le=L[2],Ie=q[0],Ue=q[1],qe=q[2],Qe=Ie-ue,lt=Ue-ye,ft=Qe*Qe+lt*lt;if(ft<wt)ne=Math.log(qe/Le)/tt,$=function(Yt){return[ue+Yt*Qe,ye+Yt*lt,Le*Math.exp(tt*Yt*ne)]};else{var xt=Math.sqrt(ft),St=(qe*qe-Le*Le+4*ft)/(2*Le*2*xt),Tt=(qe*qe-Le*Le-4*ft)/(2*qe*2*xt),zt=Math.log(Math.sqrt(St*St+1)-St),Et=Math.log(Math.sqrt(Tt*Tt+1)-Tt);ne=(Et-zt)/tt,$=function(Yt){var qt,Ft=Yt*ne,fn=it(zt),dn=Le/(2*xt)*(fn*(qt=tt*Ft+zt,((qt=Math.exp(2*qt))-1)/(qt+1))-function(kn){return((kn=Math.exp(kn))-1/kn)/2}(zt));return[ue+dn*Qe,ye+dn*lt,Le*fn/it(tt*Ft+zt)]}}return $.duration=1e3*ne,$},o.behavior.zoom=function(){var L,q,$,ne,ue,ye,Le,Ie,Ue,qe={x:0,y:0,k:1},Qe=[960,500],lt=nt,ft=250,xt=0,St="mousedown.zoom",Tt="mousemove.zoom",zt="mouseup.zoom",Et="touchstart.zoom",Yt=K(qt,"zoomstart","zoom","zoomend");function qt(Kn){Kn.on(St,qn).on(Fe+".zoom",vr).on("dblclick.zoom",Ar).on(Et,ir)}function Ft(Kn){return[(Kn[0]-qe.x)/qe.k,(Kn[1]-qe.y)/qe.k]}function fn(Kn){qe.k=Math.max(lt[0],Math.min(lt[1],Kn))}function dn(Kn,ar){ar=function(br){return[br[0]*qe.k+qe.x,br[1]*qe.k+qe.y]}(ar),qe.x+=Kn[0]-ar[0],qe.y+=Kn[1]-ar[1]}function kn(Kn,ar,br,lr){Kn.__chart__={x:qe.x,y:qe.y,k:qe.k},fn(Math.pow(2,lr)),dn(q=ar,br),Kn=o.select(Kn),ft>0&&(Kn=Kn.transition().duration(ft)),Kn.call(qt.event)}function Sn(){Le&&Le.domain(ye.range().map(function(Kn){return(Kn-qe.x)/qe.k}).map(ye.invert)),Ue&&Ue.domain(Ie.range().map(function(Kn){return(Kn-qe.y)/qe.k}).map(Ie.invert))}function Bn(Kn){xt++||Kn({type:"zoomstart"})}function $n(Kn){Sn(),Kn({type:"zoom",scale:qe.k,translate:[qe.x,qe.y]})}function sr(Kn){--xt||(Kn({type:"zoomend"}),q=null)}function qn(){var Kn=this,ar=Yt.of(Kn,arguments),br=0,lr=o.select(t(Kn)).on(Tt,function(){br=1,dn(o.mouse(Kn),Tr),$n(ar)}).on(zt,function(){lr.on(Tt,null).on(zt,null),Er(br),sr(ar)}),Tr=Ft(o.mouse(Kn)),Er=dt(Kn);wi.call(Kn),Bn(ar)}function ir(){var Kn,ar=this,br=Yt.of(ar,arguments),lr={},Tr=0,Er=".zoom-"+o.event.changedTouches[0].identifier,Rr="touchmove"+Er,Fr="touchend"+Er,jr=[],qr=o.select(ar),ua=dt(ar);function Aa(){var ga=o.touches(ar);return Kn=qe.k,ga.forEach(function(Gr){Gr.identifier in lr&&(lr[Gr.identifier]=Ft(Gr))}),ga}function ri(){var ga=o.event.target;o.select(ga).on(Rr,Ba).on(Fr,Ka),jr.push(ga);for(var Gr=o.event.changedTouches,xa=0,ra=Gr.length;xa<ra;++xa)lr[Gr[xa].identifier]=null;var Zr=Aa(),ba=Date.now();if(Zr.length===1){if(ba-ue<500){var Ma=Zr[0];kn(ar,Ma,lr[Ma.identifier],Math.floor(Math.log(qe.k)/Math.LN2)+1),J()}ue=ba}else if(Zr.length>1){Ma=Zr[0];var Ia=Zr[1],vs=Ma[0]-Ia[0],ms=Ma[1]-Ia[1];Tr=vs*vs+ms*ms}}function Ba(){var ga,Gr,xa,ra,Zr=o.touches(ar);wi.call(ar);for(var ba=0,Ma=Zr.length;ba<Ma;++ba,ra=null)if(xa=Zr[ba],ra=lr[xa.identifier]){if(Gr)break;ga=xa,Gr=ra}if(ra){var Ia=(Ia=xa[0]-ga[0])*Ia+(Ia=xa[1]-ga[1])*Ia,vs=Tr&&Math.sqrt(Ia/Tr);ga=[(ga[0]+xa[0])/2,(ga[1]+xa[1])/2],Gr=[(Gr[0]+ra[0])/2,(Gr[1]+ra[1])/2],fn(vs*Kn)}ue=null,dn(ga,Gr),$n(br)}function Ka(){if(o.event.touches.length){for(var ga=o.event.changedTouches,Gr=0,xa=ga.length;Gr<xa;++Gr)delete lr[ga[Gr].identifier];for(var ra in lr)return void Aa()}o.selectAll(jr).on(Er,null),qr.on(St,qn).on(Et,ir),ua(),sr(br)}ri(),Bn(br),qr.on(St,null).on(Et,ri)}function vr(){var Kn=Yt.of(this,arguments);ne?clearTimeout(ne):(wi.call(this),L=Ft(q=$||o.mouse(this)),Bn(Kn)),ne=setTimeout(function(){ne=null,sr(Kn)},50),J(),fn(Math.pow(2,.002*Re())*qe.k),dn(q,L),$n(Kn)}function Ar(){var Kn=o.mouse(this),ar=Math.log(qe.k)/Math.LN2;kn(this,Kn,Ft(Kn),o.event.shiftKey?Math.ceil(ar)-1:Math.floor(ar)+1)}return Fe||(Fe="onwheel"in h?(Re=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in h?(Re=function(){return o.event.wheelDelta},"mousewheel"):(Re=function(){return-o.event.detail},"MozMousePixelScroll")),qt.event=function(Kn){Kn.each(function(){var ar=Yt.of(this,arguments),br=qe;La?o.select(this).transition().each("start.zoom",function(){qe=this.__chart__||{x:0,y:0,k:1},Bn(ar)}).tween("zoom:zoom",function(){var lr=Qe[0],Tr=Qe[1],Er=q?q[0]:lr/2,Rr=q?q[1]:Tr/2,Fr=o.interpolateZoom([(Er-qe.x)/qe.k,(Rr-qe.y)/qe.k,lr/qe.k],[(Er-br.x)/br.k,(Rr-br.y)/br.k,lr/br.k]);return function(jr){var qr=Fr(jr),ua=lr/qr[2];this.__chart__=qe={x:Er-qr[0]*ua,y:Rr-qr[1]*ua,k:ua},$n(ar)}}).each("interrupt.zoom",function(){sr(ar)}).each("end.zoom",function(){sr(ar)}):(this.__chart__=qe,Bn(ar),$n(ar),sr(ar))})},qt.translate=function(Kn){return arguments.length?(qe={x:+Kn[0],y:+Kn[1],k:qe.k},Sn(),qt):[qe.x,qe.y]},qt.scale=function(Kn){return arguments.length?(qe={x:qe.x,y:qe.y,k:null},fn(+Kn),Sn(),qt):qe.k},qt.scaleExtent=function(Kn){return arguments.length?(lt=Kn==null?nt:[+Kn[0],+Kn[1]],qt):lt},qt.center=function(Kn){return arguments.length?($=Kn&&[+Kn[0],+Kn[1]],qt):$},qt.size=function(Kn){return arguments.length?(Qe=Kn&&[+Kn[0],+Kn[1]],qt):Qe},qt.duration=function(Kn){return arguments.length?(ft=+Kn,qt):ft},qt.x=function(Kn){return arguments.length?(Le=Kn,ye=Kn.copy(),qe={x:0,y:0,k:1},qt):Le},qt.y=function(Kn){return arguments.length?(Ue=Kn,Ie=Kn.copy(),qe={x:0,y:0,k:1},qt):Ue},o.rebind(qt,Yt,"on")};var Re,Fe,nt=[0,1/0];function We(){}function ct(L,q,$){return this instanceof ct?(this.h=+L,this.s=+q,void(this.l=+$)):arguments.length<2?L instanceof ct?new ct(L.h,L.s,L.l):ln(""+L,mn,ct):new ct(L,q,$)}o.color=We,We.prototype.toString=function(){return this.rgb()+""},o.hsl=ct;var pt=ct.prototype=new We;function gt(L,q,$){var ne,ue;function ye(Le){return Math.round(255*function(Ie){return Ie>360?Ie-=360:Ie<0&&(Ie+=360),Ie<60?ne+(ue-ne)*Ie/60:Ie<180?ue:Ie<240?ne+(ue-ne)*(240-Ie)/60:ne}(Le))}return L=isNaN(L)?0:(L%=360)<0?L+360:L,q=isNaN(q)||q<0?0:q>1?1:q,ne=2*($=$<0?0:$>1?1:$)-(ue=$<=.5?$*(1+q):$+q-$*q),new Tn(ye(L+120),ye(L),ye(L-120))}function ut(L,q,$){return this instanceof ut?(this.h=+L,this.c=+q,void(this.l=+$)):arguments.length<2?L instanceof ut?new ut(L.h,L.c,L.l):function(ne,ue,ye){return ne>0?new ut(Math.atan2(ye,ue)*Be,Math.sqrt(ue*ue+ye*ye),ne):new ut(NaN,NaN,ne)}(L instanceof Mt?L.l:(L=xn((L=o.rgb(L)).r,L.g,L.b)).l,L.a,L.b):new ut(L,q,$)}pt.brighter=function(L){return L=Math.pow(.7,arguments.length?L:1),new ct(this.h,this.s,this.l/L)},pt.darker=function(L){return L=Math.pow(.7,arguments.length?L:1),new ct(this.h,this.s,L*this.l)},pt.rgb=function(){return gt(this.h,this.s,this.l)},o.hcl=ut;var kt=ut.prototype=new We;function yt(L,q,$){return isNaN(L)&&(L=0),isNaN(q)&&(q=0),new Mt($,Math.cos(L*=Ze)*q,Math.sin(L)*q)}function Mt(L,q,$){return this instanceof Mt?(this.l=+L,this.a=+q,void(this.b=+$)):arguments.length<2?L instanceof Mt?new Mt(L.l,L.a,L.b):L instanceof ut?yt(L.h,L.c,L.l):xn((L=Tn(L)).r,L.g,L.b):new Mt(L,q,$)}kt.brighter=function(L){return new ut(this.h,this.c,Math.min(100,this.l+Lt*(arguments.length?L:1)))},kt.darker=function(L){return new ut(this.h,this.c,Math.max(0,this.l-Lt*(arguments.length?L:1)))},kt.rgb=function(){return yt(this.h,this.c,this.l).rgb()},o.lab=Mt;var Lt=18,Ct=.95047,It=1,Wt=1.08883,Nt=Mt.prototype=new We;function Bt(L,q,$){var ne=(L+16)/116,ue=ne+q/500,ye=ne-$/200;return new Tn(Cn(3.2404542*(ue=Ht(ue)*Ct)-1.5371385*(ne=Ht(ne)*It)-.4985314*(ye=Ht(ye)*Wt)),Cn(-.969266*ue+1.8760108*ne+.041556*ye),Cn(.0556434*ue-.2040259*ne+1.0572252*ye))}function Ht(L){return L>.206893034?L*L*L:(L-.13793103448275862)/7.787037}function Qt(L){return L>.008856?Math.pow(L,.3333333333333333):7.787037*L+.13793103448275862}function Cn(L){return Math.round(255*(L<=.00304?12.92*L:1.055*Math.pow(L,.4166666666666667)-.055))}function Tn(L,q,$){return this instanceof Tn?(this.r=~~L,this.g=~~q,void(this.b=~~$)):arguments.length<2?L instanceof Tn?new Tn(L.r,L.g,L.b):ln(""+L,Tn,gt):new Tn(L,q,$)}function hn(L){return new Tn(L>>16,L>>8&255,255&L)}function Zt(L){return hn(L)+""}Nt.brighter=function(L){return new Mt(Math.min(100,this.l+Lt*(arguments.length?L:1)),this.a,this.b)},Nt.darker=function(L){return new Mt(Math.max(0,this.l-Lt*(arguments.length?L:1)),this.a,this.b)},Nt.rgb=function(){return Bt(this.l,this.a,this.b)},o.rgb=Tn;var an=Tn.prototype=new We;function $t(L){return L<16?"0"+Math.max(0,L).toString(16):Math.min(255,L).toString(16)}function ln(L,q,$){var ne,ue,ye,Le=0,Ie=0,Ue=0;if(ne=/([a-z]+)\((.*)\)/.exec(L=L.toLowerCase()))switch(ue=ne[2].split(","),ne[1]){case"hsl":return $(parseFloat(ue[0]),parseFloat(ue[1])/100,parseFloat(ue[2])/100);case"rgb":return q(Mn(ue[0]),Mn(ue[1]),Mn(ue[2]))}return(ye=_n.get(L))?q(ye.r,ye.g,ye.b):(L==null||L.charAt(0)!=="#"||isNaN(ye=parseInt(L.slice(1),16))||(L.length===4?(Le=(3840&ye)>>4,Le|=Le>>4,Ie=240&ye,Ie|=Ie>>4,Ue=15&ye,Ue|=Ue<<4):L.length===7&&(Le=(16711680&ye)>>16,Ie=(65280&ye)>>8,Ue=255&ye)),q(Le,Ie,Ue))}function mn(L,q,$){var ne,ue,ye=Math.min(L/=255,q/=255,$/=255),Le=Math.max(L,q,$),Ie=Le-ye,Ue=(Le+ye)/2;return Ie?(ue=Ue<.5?Ie/(Le+ye):Ie/(2-Le-ye),ne=L==Le?(q-$)/Ie+(q<$?6:0):q==Le?($-L)/Ie+2:(L-q)/Ie+4,ne*=60):(ne=NaN,ue=Ue>0&&Ue<1?0:ne),new ct(ne,ue,Ue)}function xn(L,q,$){var ne=Qt((.4124564*(L=Pn(L))+.3575761*(q=Pn(q))+.1804375*($=Pn($)))/Ct),ue=Qt((.2126729*L+.7151522*q+.072175*$)/It);return Mt(116*ue-16,500*(ne-ue),200*(ue-Qt((.0193339*L+.119192*q+.9503041*$)/Wt)))}function Pn(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function Mn(L){var q=parseFloat(L);return L.charAt(L.length-1)==="%"?Math.round(2.55*q):q}an.brighter=function(L){L=Math.pow(.7,arguments.length?L:1);var q=this.r,$=this.g,ne=this.b,ue=30;return q||$||ne?(q&&q<ue&&(q=ue),$&&$<ue&&($=ue),ne&&ne<ue&&(ne=ue),new Tn(Math.min(255,q/L),Math.min(255,$/L),Math.min(255,ne/L))):new Tn(ue,ue,ue)},an.darker=function(L){return new Tn((L=Math.pow(.7,arguments.length?L:1))*this.r,L*this.g,L*this.b)},an.hsl=function(){return mn(this.r,this.g,this.b)},an.toString=function(){return"#"+$t(this.r)+$t(this.g)+$t(this.b)};var _n=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Rn(L){return typeof L=="function"?L:function(){return L}}function In(L){return function(q,$,ne){return arguments.length===2&&typeof $=="function"&&(ne=$,$=null),Vn(q,$,L,ne)}}function Vn(L,q,$,ne){var ue={},ye=o.dispatch("beforesend","progress","load","error"),Le={},Ie=new XMLHttpRequest,Ue=null;function qe(){var Qe,lt=Ie.status;if(!lt&&function(ft){var xt=ft.responseType;return xt&&xt!=="text"?ft.response:ft.responseText}(Ie)||lt>=200&&lt<300||lt===304){try{Qe=$.call(ue,Ie)}catch(ft){return void ye.error.call(ue,ft)}ye.load.call(ue,Qe)}else ye.error.call(ue,Ie)}return self.XDomainRequest&&!("withCredentials"in Ie)&&/^(http(s)?:)?\/\//.test(L)&&(Ie=new XDomainRequest),"onload"in Ie?Ie.onload=Ie.onerror=qe:Ie.onreadystatechange=function(){Ie.readyState>3&&qe()},Ie.onprogress=function(Qe){var lt=o.event;o.event=Qe;try{ye.progress.call(ue,Ie)}finally{o.event=lt}},ue.header=function(Qe,lt){return Qe=(Qe+"").toLowerCase(),arguments.length<2?Le[Qe]:(lt==null?delete Le[Qe]:Le[Qe]=lt+"",ue)},ue.mimeType=function(Qe){return arguments.length?(q=Qe==null?null:Qe+"",ue):q},ue.responseType=function(Qe){return arguments.length?(Ue=Qe,ue):Ue},ue.response=function(Qe){return $=Qe,ue},["get","post"].forEach(function(Qe){ue[Qe]=function(){return ue.send.apply(ue,[Qe].concat(b(arguments)))}}),ue.send=function(Qe,lt,ft){if(arguments.length===2&&typeof lt=="function"&&(ft=lt,lt=null),Ie.open(Qe,L,!0),q==null||"accept"in Le||(Le.accept=q+",*/*"),Ie.setRequestHeader)for(var xt in Le)Ie.setRequestHeader(xt,Le[xt]);return q!=null&&Ie.overrideMimeType&&Ie.overrideMimeType(q),Ue!=null&&(Ie.responseType=Ue),ft!=null&&ue.on("error",ft).on("load",function(St){ft(null,St)}),ye.beforesend.call(ue,Ie),Ie.send(lt??null),ue},ue.abort=function(){return Ie.abort(),ue},o.rebind(ue,ye,"on"),ne==null?ue:ue.get(function(Qe){return Qe.length===1?function(lt,ft){Qe(lt==null?ft:null)}:Qe}(ne))}_n.forEach(function(L,q){_n.set(L,hn(q))}),o.functor=Rn,o.xhr=In(D),o.dsv=function(L,q){var $=new RegExp('["'+L+`
]`),ne=L.charCodeAt(0);function ue(qe,Qe,lt){arguments.length<3&&(lt=Qe,Qe=null);var ft=Vn(qe,q,Qe==null?ye:Le(Qe),lt);return ft.row=function(xt){return arguments.length?ft.response((Qe=xt)==null?ye:Le(xt)):Qe},ft}function ye(qe){return ue.parse(qe.responseText)}function Le(qe){return function(Qe){return ue.parse(Qe.responseText,qe)}}function Ie(qe){return qe.map(Ue).join(L)}function Ue(qe){return $.test(qe)?'"'+qe.replace(/\"/g,'""')+'"':qe}return ue.parse=function(qe,Qe){var lt;return ue.parseRows(qe,function(ft,xt){if(lt)return lt(ft,xt-1);var St=function(Tt){for(var zt={},Et=ft.length,Yt=0;Yt<Et;++Yt)zt[ft[Yt]]=Tt[Yt];return zt};lt=Qe?function(Tt,zt){return Qe(St(Tt),zt)}:St})},ue.parseRows=function(qe,Qe){var lt,ft,xt={},St={},Tt=[],zt=qe.length,Et=0,Yt=0;function qt(){if(Et>=zt)return St;if(ft)return ft=!1,xt;var fn=Et;if(qe.charCodeAt(fn)===34){for(var dn=fn;dn++<zt;)if(qe.charCodeAt(dn)===34){if(qe.charCodeAt(dn+1)!==34)break;++dn}return Et=dn+2,(kn=qe.charCodeAt(dn+1))===13?(ft=!0,qe.charCodeAt(dn+2)===10&&++Et):kn===10&&(ft=!0),qe.slice(fn+1,dn).replace(/""/g,'"')}for(;Et<zt;){var kn,Sn=1;if((kn=qe.charCodeAt(Et++))===10)ft=!0;else if(kn===13)ft=!0,qe.charCodeAt(Et)===10&&(++Et,++Sn);else if(kn!==ne)continue;return qe.slice(fn,Et-Sn)}return qe.slice(fn)}for(;(lt=qt())!==St;){for(var Ft=[];lt!==xt&&lt!==St;)Ft.push(lt),lt=qt();Qe&&(Ft=Qe(Ft,Yt++))==null||Tt.push(Ft)}return Tt},ue.format=function(qe){if(Array.isArray(qe[0]))return ue.formatRows(qe);var Qe=new j,lt=[];return qe.forEach(function(ft){for(var xt in ft)Qe.has(xt)||lt.push(Qe.add(xt))}),[lt.map(Ue).join(L)].concat(qe.map(function(ft){return lt.map(function(xt){return Ue(ft[xt])}).join(L)})).join(`
`)},ue.formatRows=function(qe){return qe.map(Ie).join(`
`)},ue},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("	","text/tab-separated-values");var tr,er,Wn,or,Jt=this[W(this,"requestAnimationFrame")]||function(L){setTimeout(L,17)};function en(L,q,$){var ne=arguments.length;ne<2&&(q=0),ne<3&&($=Date.now());var ue={c:L,t:$+q,n:null};return er?er.n=ue:tr=ue,er=ue,Wn||(or=clearTimeout(or),Wn=1,Jt(En)),ue}function En(){var L=gn(),q=Ln()-L;q>24?(isFinite(q)&&(clearTimeout(or),or=setTimeout(En,q)),Wn=0):(Wn=1,Jt(En))}function gn(){for(var L=Date.now(),q=tr;q;)L>=q.t&&q.c(L-q.t)&&(q.c=null),q=q.n;return L}function Ln(){for(var L,q=tr,$=1/0;q;)q.c?(q.t<$&&($=q.t),q=(L=q).n):q=L?L.n=q.n:tr=q.n;return er=L,$}function Hn(L){return L[0]}function Nn(L){return L[1]}function Yn(L){for(var q,$,ne,ue=L.length,ye=[0,1],Le=2,Ie=2;Ie<ue;Ie++){for(;Le>1&&(q=L[ye[Le-2]],$=L[ye[Le-1]],ne=L[Ie],($[0]-q[0])*(ne[1]-q[1])-($[1]-q[1])*(ne[0]-q[0])<=0);)--Le;ye[Le++]=Ie}return ye.slice(0,Le)}function fr(L,q){return L[0]-q[0]||L[1]-q[1]}o.timer=function(){en.apply(this,arguments)},o.timer.flush=function(){gn(),Ln()},o.round=function(L,q){return q?Math.round(L*(q=Math.pow(10,q)))/q:Math.round(L)},o.geom={},o.geom.hull=function(L){var q=Hn,$=Nn;if(arguments.length)return ne(L);function ne(ue){if(ue.length<3)return[];var ye,Le=Rn(q),Ie=Rn($),Ue=ue.length,qe=[],Qe=[];for(ye=0;ye<Ue;ye++)qe.push([+Le.call(this,ue[ye],ye),+Ie.call(this,ue[ye],ye),ye]);for(qe.sort(fr),ye=0;ye<Ue;ye++)Qe.push([qe[ye][0],-qe[ye][1]]);var lt=Yn(qe),ft=Yn(Qe),xt=ft[0]===lt[0],St=ft[ft.length-1]===lt[lt.length-1],Tt=[];for(ye=lt.length-1;ye>=0;--ye)Tt.push(ue[qe[lt[ye]][2]]);for(ye=+xt;ye<ft.length-St;++ye)Tt.push(ue[qe[ft[ye]][2]]);return Tt}return ne.x=function(ue){return arguments.length?(q=ue,ne):q},ne.y=function(ue){return arguments.length?($=ue,ne):$},ne},o.geom.polygon=function(L){return Z(L,Xt),L};var Xt=o.geom.polygon.prototype=[];function pn(L,q,$){return($[0]-q[0])*(L[1]-q[1])<($[1]-q[1])*(L[0]-q[0])}function bt(L,q,$,ne){var ue=L[0],ye=$[0],Le=q[0]-ue,Ie=ne[0]-ye,Ue=L[1],qe=$[1],Qe=q[1]-Ue,lt=ne[1]-qe,ft=(Ie*(Ue-qe)-lt*(ue-ye))/(lt*Le-Ie*Qe);return[ue+ft*Le,Ue+ft*Qe]}function Ut(L){var q=L[0],$=L[L.length-1];return!(q[0]-$[0]||q[1]-$[1])}Xt.area=function(){for(var L,q=-1,$=this.length,ne=this[$-1],ue=0;++q<$;)L=ne,ne=this[q],ue+=L[1]*ne[0]-L[0]*ne[1];return .5*ue},Xt.centroid=function(L){var q,$,ne=-1,ue=this.length,ye=0,Le=0,Ie=this[ue-1];for(arguments.length||(L=-1/(6*this.area()));++ne<ue;)q=Ie,Ie=this[ne],$=q[0]*Ie[1]-Ie[0]*q[1],ye+=(q[0]+Ie[0])*$,Le+=(q[1]+Ie[1])*$;return[ye*L,Le*L]},Xt.clip=function(L){for(var q,$,ne,ue,ye,Le,Ie=Ut(L),Ue=-1,qe=this.length-Ut(this),Qe=this[qe-1];++Ue<qe;){for(q=L.slice(),L.length=0,ue=this[Ue],ye=q[(ne=q.length-Ie)-1],$=-1;++$<ne;)pn(Le=q[$],Qe,ue)?(pn(ye,Qe,ue)||L.push(bt(ye,Le,Qe,ue)),L.push(Le)):pn(ye,Qe,ue)&&L.push(bt(ye,Le,Qe,ue)),ye=Le;Ie&&L.push(L[0]),Qe=ue}return L};var Kt,un,cn,vn,tn,Vt=[],Gt=[];function nn(){aa(this),this.edge=this.site=this.circle=null}function sn(L){var q=Vt.pop()||new nn;return q.site=L,q}function wn(L){ur(L),cn.remove(L),Vt.push(L),aa(L)}function An(L){var q=L.circle,$=q.x,ne=q.cy,ue={x:$,y:ne},ye=L.P,Le=L.N,Ie=[L];wn(L);for(var Ue=ye;Ue.circle&&v($-Ue.circle.x)<$e&&v(ne-Ue.circle.cy)<$e;)ye=Ue.P,Ie.unshift(Ue),wn(Ue),Ue=ye;Ie.unshift(Ue),ur(Ue);for(var qe=Le;qe.circle&&v($-qe.circle.x)<$e&&v(ne-qe.circle.cy)<$e;)Le=qe.N,Ie.push(qe),wn(qe),qe=Le;Ie.push(qe),ur(qe);var Qe,lt=Ie.length;for(Qe=1;Qe<lt;++Qe)qe=Ie[Qe],Ue=Ie[Qe-1],gr(qe.edge,Ue.site,qe.site,ue);Ue=Ie[0],(qe=Ie[lt-1]).edge=rr(Ue.site,qe.site,null,ue),Zn(Ue),Zn(qe)}function zn(L){for(var q,$,ne,ue,ye=L.x,Le=L.y,Ie=cn._;Ie;)if((ne=Fn(Ie,Le)-ye)>$e)Ie=Ie.L;else{if(!((ue=ye-Xn(Ie,Le))>$e)){ne>-1e-6?(q=Ie.P,$=Ie):ue>-1e-6?(q=Ie,$=Ie.N):q=$=Ie;break}if(!Ie.R){q=Ie;break}Ie=Ie.R}var Ue=sn(L);if(cn.insert(q,Ue),q||$){if(q===$)return ur(q),$=sn(q.site),cn.insert(Ue,$),Ue.edge=$.edge=rr(q.site,Ue.site),Zn(q),void Zn($);if($){ur(q),ur($);var qe=q.site,Qe=qe.x,lt=qe.y,ft=L.x-Qe,xt=L.y-lt,St=$.site,Tt=St.x-Qe,zt=St.y-lt,Et=2*(ft*zt-xt*Tt),Yt=ft*ft+xt*xt,qt=Tt*Tt+zt*zt,Ft={x:(zt*Yt-xt*qt)/Et+Qe,y:(ft*qt-Tt*Yt)/Et+lt};gr($.edge,qe,St,Ft),Ue.edge=rr(qe,L,null,Ft),$.edge=rr(L,St,null,Ft),Zn(q),Zn($)}else Ue.edge=rr(q.site,Ue.site)}}function Fn(L,q){var $=L.site,ne=$.x,ue=$.y,ye=ue-q;if(!ye)return ne;var Le=L.P;if(!Le)return-1/0;var Ie=($=Le.site).x,Ue=$.y,qe=Ue-q;if(!qe)return Ie;var Qe=Ie-ne,lt=1/ye-1/qe,ft=Qe/qe;return lt?(-ft+Math.sqrt(ft*ft-2*lt*(Qe*Qe/(-2*qe)-Ue+qe/2+ue-ye/2)))/lt+ne:(ne+Ie)/2}function Xn(L,q){var $=L.N;if($)return Fn($,q);var ne=L.site;return ne.y===q?ne.x:1/0}function jn(L){this.site=L,this.edges=[]}function Qn(L,q){return q.angle-L.angle}function Jn(){aa(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zn(L){var q=L.P,$=L.N;if(q&&$){var ne=q.site,ue=L.site,ye=$.site;if(ne!==ye){var Le=ue.x,Ie=ue.y,Ue=ne.x-Le,qe=ne.y-Ie,Qe=ye.x-Le,lt=2*(Ue*(zt=ye.y-Ie)-qe*Qe);if(!(lt>=-1e-12)){var ft=Ue*Ue+qe*qe,xt=Qe*Qe+zt*zt,St=(zt*ft-qe*xt)/lt,Tt=(Ue*xt-Qe*ft)/lt,zt=Tt+Ie,Et=Gt.pop()||new Jn;Et.arc=L,Et.site=ue,Et.x=St+Le,Et.y=zt+Math.sqrt(St*St+Tt*Tt),Et.cy=zt,L.circle=Et;for(var Yt=null,qt=tn._;qt;)if(Et.y<qt.y||Et.y===qt.y&&Et.x<=qt.x){if(!qt.L){Yt=qt.P;break}qt=qt.L}else{if(!qt.R){Yt=qt;break}qt=qt.R}tn.insert(Yt,Et),Yt||(vn=Et)}}}}function ur(L){var q=L.circle;q&&(q.P||(vn=q.N),tn.remove(q),Gt.push(q),aa(q),L.circle=null)}function mr(L,q){var $=L.b;if($)return!0;var ne,ue,ye=L.a,Le=q[0][0],Ie=q[1][0],Ue=q[0][1],qe=q[1][1],Qe=L.l,lt=L.r,ft=Qe.x,xt=Qe.y,St=lt.x,Tt=lt.y,zt=(ft+St)/2,Et=(xt+Tt)/2;if(Tt===xt){if(zt<Le||zt>=Ie)return;if(ft>St){if(ye){if(ye.y>=qe)return}else ye={x:zt,y:Ue};$={x:zt,y:qe}}else{if(ye){if(ye.y<Ue)return}else ye={x:zt,y:qe};$={x:zt,y:Ue}}}else if(ue=Et-(ne=(ft-St)/(Tt-xt))*zt,ne<-1||ne>1)if(ft>St){if(ye){if(ye.y>=qe)return}else ye={x:(Ue-ue)/ne,y:Ue};$={x:(qe-ue)/ne,y:qe}}else{if(ye){if(ye.y<Ue)return}else ye={x:(qe-ue)/ne,y:qe};$={x:(Ue-ue)/ne,y:Ue}}else if(xt<Tt){if(ye){if(ye.x>=Ie)return}else ye={x:Le,y:ne*Le+ue};$={x:Ie,y:ne*Ie+ue}}else{if(ye){if(ye.x<Le)return}else ye={x:Ie,y:ne*Ie+ue};$={x:Le,y:ne*Le+ue}}return L.a=ye,L.b=$,!0}function hr(L,q){this.l=L,this.r=q,this.a=this.b=null}function rr(L,q,$,ne){var ue=new hr(L,q);return Kt.push(ue),$&&gr(ue,L,q,$),ne&&gr(ue,q,L,ne),un[L.i].edges.push(new xr(ue,L,q)),un[q.i].edges.push(new xr(ue,q,L)),ue}function gr(L,q,$,ne){L.a||L.b?L.l===$?L.b=ne:L.a=ne:(L.a=ne,L.l=q,L.r=$)}function xr(L,q,$){var ne=L.a,ue=L.b;this.edge=L,this.site=q,this.angle=$?Math.atan2($.y-q.y,$.x-q.x):L.l===q?Math.atan2(ue.x-ne.x,ne.y-ue.y):Math.atan2(ne.x-ue.x,ue.y-ne.y)}function Or(){this._=null}function aa(L){L.U=L.C=L.L=L.R=L.P=L.N=null}function oa(L,q){var $=q,ne=q.R,ue=$.U;ue?ue.L===$?ue.L=ne:ue.R=ne:L._=ne,ne.U=ue,$.U=ne,$.R=ne.L,$.R&&($.R.U=$),ne.L=$}function Ua(L,q){var $=q,ne=q.L,ue=$.U;ue?ue.L===$?ue.L=ne:ue.R=ne:L._=ne,ne.U=ue,$.U=ne,$.L=ne.R,$.L&&($.L.U=$),ne.R=$}function ta(L){for(;L.L;)L=L.L;return L}function ka(L,q){var $,ne,ue,ye=L.sort(Pr).pop();for(Kt=[],un=new Array(L.length),cn=new Or,tn=new Or;;)if(ue=vn,ye&&(!ue||ye.y<ue.y||ye.y===ue.y&&ye.x<ue.x))ye.x===$&&ye.y===ne||(un[ye.i]=new jn(ye),zn(ye),$=ye.x,ne=ye.y),ye=L.pop();else{if(!ue)break;An(ue.arc)}q&&(function(Ie){for(var Ue,qe,Qe,lt,ft,xt=Kt,St=(qe=Ie[0][0],Qe=Ie[0][1],lt=Ie[1][0],ft=Ie[1][1],function(zt){var Et,Yt=zt.a,qt=zt.b,Ft=Yt.x,fn=Yt.y,dn=0,kn=1,Sn=qt.x-Ft,Bn=qt.y-fn;if(Et=qe-Ft,Sn||!(Et>0)){if(Et/=Sn,Sn<0){if(Et<dn)return;Et<kn&&(kn=Et)}else if(Sn>0){if(Et>kn)return;Et>dn&&(dn=Et)}if(Et=lt-Ft,Sn||!(Et<0)){if(Et/=Sn,Sn<0){if(Et>kn)return;Et>dn&&(dn=Et)}else if(Sn>0){if(Et<dn)return;Et<kn&&(kn=Et)}if(Et=Qe-fn,Bn||!(Et>0)){if(Et/=Bn,Bn<0){if(Et<dn)return;Et<kn&&(kn=Et)}else if(Bn>0){if(Et>kn)return;Et>dn&&(dn=Et)}if(Et=ft-fn,Bn||!(Et<0)){if(Et/=Bn,Bn<0){if(Et>kn)return;Et>dn&&(dn=Et)}else if(Bn>0){if(Et<dn)return;Et<kn&&(kn=Et)}return dn>0&&(zt.a={x:Ft+dn*Sn,y:fn+dn*Bn}),kn<1&&(zt.b={x:Ft+kn*Sn,y:fn+kn*Bn}),zt}}}}}),Tt=xt.length;Tt--;)(!mr(Ue=xt[Tt],Ie)||!St(Ue)||v(Ue.a.x-Ue.b.x)<$e&&v(Ue.a.y-Ue.b.y)<$e)&&(Ue.a=Ue.b=null,xt.splice(Tt,1))}(q),function(Ie){for(var Ue,qe,Qe,lt,ft,xt,St,Tt,zt,Et,Yt=Ie[0][0],qt=Ie[1][0],Ft=Ie[0][1],fn=Ie[1][1],dn=un,kn=dn.length;kn--;)if((ft=dn[kn])&&ft.prepare())for(Tt=(St=ft.edges).length,xt=0;xt<Tt;)Qe=(Et=St[xt].end()).x,lt=Et.y,Ue=(zt=St[++xt%Tt].start()).x,qe=zt.y,(v(Qe-Ue)>$e||v(lt-qe)>$e)&&(St.splice(xt,0,new xr((Sn=ft.site,Bn=Et,$n=v(Qe-Yt)<$e&&fn-lt>$e?{x:Yt,y:v(Ue-Yt)<$e?qe:fn}:v(lt-fn)<$e&&qt-Qe>$e?{x:v(qe-fn)<$e?Ue:qt,y:fn}:v(Qe-qt)<$e&&lt-Ft>$e?{x:qt,y:v(Ue-qt)<$e?qe:Ft}:v(lt-Ft)<$e&&Qe-Yt>$e?{x:v(qe-Ft)<$e?Ue:Yt,y:Ft}:null,sr=void 0,(sr=new hr(Sn,null)).a=Bn,sr.b=$n,Kt.push(sr),sr),ft.site,null)),++Tt);var Sn,Bn,$n,sr}(q));var Le={cells:un,edges:Kt};return cn=tn=Kt=un=null,Le}function Pr(L,q){return q.y-L.y||q.x-L.x}jn.prototype.prepare=function(){for(var L,q=this.edges,$=q.length;$--;)(L=q[$].edge).b&&L.a||q.splice($,1);return q.sort(Qn),q.length},xr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Or.prototype={insert:function(L,q){var $,ne,ue;if(L){if(q.P=L,q.N=L.N,L.N&&(L.N.P=q),L.N=q,L.R){for(L=L.R;L.L;)L=L.L;L.L=q}else L.R=q;$=L}else this._?(L=ta(this._),q.P=null,q.N=L,L.P=L.L=q,$=L):(q.P=q.N=null,this._=q,$=null);for(q.L=q.R=null,q.U=$,q.C=!0,L=q;$&&$.C;)$===(ne=$.U).L?(ue=ne.R)&&ue.C?($.C=ue.C=!1,ne.C=!0,L=ne):(L===$.R&&(oa(this,$),$=(L=$).U),$.C=!1,ne.C=!0,Ua(this,ne)):(ue=ne.L)&&ue.C?($.C=ue.C=!1,ne.C=!0,L=ne):(L===$.L&&(Ua(this,$),$=(L=$).U),$.C=!1,ne.C=!0,oa(this,ne)),$=L.U;this._.C=!1},remove:function(L){L.N&&(L.N.P=L.P),L.P&&(L.P.N=L.N),L.N=L.P=null;var q,$,ne,ue=L.U,ye=L.L,Le=L.R;if($=ye?Le?ta(Le):ye:Le,ue?ue.L===L?ue.L=$:ue.R=$:this._=$,ye&&Le?(ne=$.C,$.C=L.C,$.L=ye,ye.U=$,$!==Le?(ue=$.U,$.U=L.U,L=$.R,ue.L=L,$.R=Le,Le.U=$):($.U=ue,ue=$,L=$.R)):(ne=L.C,L=$),L&&(L.U=ue),!ne)if(L&&L.C)L.C=!1;else{do{if(L===this._)break;if(L===ue.L){if((q=ue.R).C&&(q.C=!1,ue.C=!0,oa(this,ue),q=ue.R),q.L&&q.L.C||q.R&&q.R.C){q.R&&q.R.C||(q.L.C=!1,q.C=!0,Ua(this,q),q=ue.R),q.C=ue.C,ue.C=q.R.C=!1,oa(this,ue),L=this._;break}}else if((q=ue.L).C&&(q.C=!1,ue.C=!0,Ua(this,ue),q=ue.L),q.L&&q.L.C||q.R&&q.R.C){q.L&&q.L.C||(q.R.C=!1,q.C=!0,oa(this,q),q=ue.L),q.C=ue.C,ue.C=q.L.C=!1,Ua(this,ue),L=this._;break}q.C=!0,L=ue,ue=ue.U}while(!L.C);L&&(L.C=!1)}}},o.geom.voronoi=function(L){var q=Hn,$=Nn,ne=q,ue=$,ye=ha;if(L)return Le(L);function Le(Ue){var qe=new Array(Ue.length),Qe=ye[0][0],lt=ye[0][1],ft=ye[1][0],xt=ye[1][1];return ka(Ie(Ue),ye).cells.forEach(function(St,Tt){var zt=St.edges,Et=St.site;(qe[Tt]=zt.length?zt.map(function(Yt){var qt=Yt.start();return[qt.x,qt.y]}):Et.x>=Qe&&Et.x<=ft&&Et.y>=lt&&Et.y<=xt?[[Qe,xt],[ft,xt],[ft,lt],[Qe,lt]]:[]).point=Ue[Tt]}),qe}function Ie(Ue){return Ue.map(function(qe,Qe){return{x:Math.round(ne(qe,Qe)/$e)*$e,y:Math.round(ue(qe,Qe)/$e)*$e,i:Qe}})}return Le.links=function(Ue){return ka(Ie(Ue)).edges.filter(function(qe){return qe.l&&qe.r}).map(function(qe){return{source:Ue[qe.l.i],target:Ue[qe.r.i]}})},Le.triangles=function(Ue){var qe=[];return ka(Ie(Ue)).cells.forEach(function(Qe,lt){for(var ft,xt,St,Tt,zt=Qe.site,Et=Qe.edges.sort(Qn),Yt=-1,qt=Et.length,Ft=Et[qt-1].edge,fn=Ft.l===zt?Ft.r:Ft.l;++Yt<qt;)ft=fn,fn=(Ft=Et[Yt].edge).l===zt?Ft.r:Ft.l,lt<ft.i&&lt<fn.i&&(St=ft,Tt=fn,((xt=zt).x-Tt.x)*(St.y-xt.y)-(xt.x-St.x)*(Tt.y-xt.y)<0)&&qe.push([Ue[lt],Ue[ft.i],Ue[fn.i]])}),qe},Le.x=function(Ue){return arguments.length?(ne=Rn(q=Ue),Le):q},Le.y=function(Ue){return arguments.length?(ue=Rn($=Ue),Le):$},Le.clipExtent=function(Ue){return arguments.length?(ye=Ue??ha,Le):ye===ha?null:ye},Le.size=function(Ue){return arguments.length?Le.clipExtent(Ue&&[[0,0],Ue]):ye===ha?null:ye&&ye[1]},Le};var ha=[[-1e6,-1e6],[1e6,1e6]];function oi(L){return L.x}function Ya(L){return L.y}function lo(L,q,$,ne,ue,ye){if(!L(q,$,ne,ue,ye)){var Le=.5*($+ue),Ie=.5*(ne+ye),Ue=q.nodes;Ue[0]&&lo(L,Ue[0],$,ne,Le,Ie),Ue[1]&&lo(L,Ue[1],Le,ne,ue,Ie),Ue[2]&&lo(L,Ue[2],$,Ie,Le,ye),Ue[3]&&lo(L,Ue[3],Le,Ie,ue,ye)}}function uo(L,q){L=o.rgb(L),q=o.rgb(q);var $=L.r,ne=L.g,ue=L.b,ye=q.r-$,Le=q.g-ne,Ie=q.b-ue;return function(Ue){return"#"+$t(Math.round($+ye*Ue))+$t(Math.round(ne+Le*Ue))+$t(Math.round(ue+Ie*Ue))}}function Zi(L,q){var $,ne={},ue={};for($ in L)$ in q?ne[$]=Mi(L[$],q[$]):ue[$]=L[$];for($ in q)$ in L||(ue[$]=q[$]);return function(ye){for($ in ne)ue[$]=ne[$](ye);return ue}}function Za(L,q){return L=+L,q=+q,function($){return L*(1-$)+q*$}}function Xi(L,q){var $,ne,ue,ye=ko.lastIndex=qo.lastIndex=0,Le=-1,Ie=[],Ue=[];for(L+="",q+="";($=ko.exec(L))&&(ne=qo.exec(q));)(ue=ne.index)>ye&&(ue=q.slice(ye,ue),Ie[Le]?Ie[Le]+=ue:Ie[++Le]=ue),($=$[0])===(ne=ne[0])?Ie[Le]?Ie[Le]+=ne:Ie[++Le]=ne:(Ie[++Le]=null,Ue.push({i:Le,x:Za($,ne)})),ye=qo.lastIndex;return ye<q.length&&(ue=q.slice(ye),Ie[Le]?Ie[Le]+=ue:Ie[++Le]=ue),Ie.length<2?Ue[0]?(q=Ue[0].x,function(qe){return q(qe)+""}):function(){return q}:(q=Ue.length,function(qe){for(var Qe,lt=0;lt<q;++lt)Ie[(Qe=Ue[lt]).i]=Qe.x(qe);return Ie.join("")})}o.geom.delaunay=function(L){return o.geom.voronoi().triangles(L)},o.geom.quadtree=function(L,q,$,ne,ue){var ye,Le=Hn,Ie=Nn;if(ye=arguments.length)return Le=oi,Ie=Ya,ye===3&&(ue=$,ne=q,$=q=0),Ue(L);function Ue(qe){var Qe,lt,ft,xt,St,Tt,zt,Et,Yt,qt=Rn(Le),Ft=Rn(Ie);if(q!=null)Tt=q,zt=$,Et=ne,Yt=ue;else if(Et=Yt=-(Tt=zt=1/0),lt=[],ft=[],St=qe.length,ye)for(xt=0;xt<St;++xt)(Qe=qe[xt]).x<Tt&&(Tt=Qe.x),Qe.y<zt&&(zt=Qe.y),Qe.x>Et&&(Et=Qe.x),Qe.y>Yt&&(Yt=Qe.y),lt.push(Qe.x),ft.push(Qe.y);else for(xt=0;xt<St;++xt){var fn=+qt(Qe=qe[xt],xt),dn=+Ft(Qe,xt);fn<Tt&&(Tt=fn),dn<zt&&(zt=dn),fn>Et&&(Et=fn),dn>Yt&&(Yt=dn),lt.push(fn),ft.push(dn)}var kn=Et-Tt,Sn=Yt-zt;function Bn(qn,ir,vr,Ar,Kn,ar,br,lr){if(!isNaN(vr)&&!isNaN(Ar))if(qn.leaf){var Tr=qn.x,Er=qn.y;if(Tr!=null)if(v(Tr-vr)+v(Er-Ar)<.01)$n(qn,ir,vr,Ar,Kn,ar,br,lr);else{var Rr=qn.point;qn.x=qn.y=qn.point=null,$n(qn,Rr,Tr,Er,Kn,ar,br,lr),$n(qn,ir,vr,Ar,Kn,ar,br,lr)}else qn.x=vr,qn.y=Ar,qn.point=ir}else $n(qn,ir,vr,Ar,Kn,ar,br,lr)}function $n(qn,ir,vr,Ar,Kn,ar,br,lr){var Tr=.5*(Kn+br),Er=.5*(ar+lr),Rr=vr>=Tr,Fr=Ar>=Er,jr=Fr<<1|Rr;qn.leaf=!1,Rr?Kn=Tr:br=Tr,Fr?ar=Er:lr=Er,Bn(qn=qn.nodes[jr]||(qn.nodes[jr]={leaf:!0,nodes:[],point:null,x:null,y:null}),ir,vr,Ar,Kn,ar,br,lr)}kn>Sn?Yt=zt+kn:Et=Tt+Sn;var sr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(qn){Bn(sr,qn,+qt(qn,++xt),+Ft(qn,xt),Tt,zt,Et,Yt)}};if(sr.visit=function(qn){lo(qn,sr,Tt,zt,Et,Yt)},sr.find=function(qn){return function(ir,vr,Ar,Kn,ar,br,lr){var Tr,Er=1/0;return function Rr(Fr,jr,qr,ua,Aa){if(!(jr>br||qr>lr||ua<Kn||Aa<ar)){if(ri=Fr.point){var ri,Ba=vr-Fr.x,Ka=Ar-Fr.y,ga=Ba*Ba+Ka*Ka;if(ga<Er){var Gr=Math.sqrt(Er=ga);Kn=vr-Gr,ar=Ar-Gr,br=vr+Gr,lr=Ar+Gr,Tr=ri}}for(var xa=Fr.nodes,ra=.5*(jr+ua),Zr=.5*(qr+Aa),ba=(Ar>=Zr)<<1|vr>=ra,Ma=ba+4;ba<Ma;++ba)if(Fr=xa[3&ba])switch(3&ba){case 0:Rr(Fr,jr,qr,ra,Zr);break;case 1:Rr(Fr,ra,qr,ua,Zr);break;case 2:Rr(Fr,jr,Zr,ra,Aa);break;case 3:Rr(Fr,ra,Zr,ua,Aa)}}}(ir,Kn,ar,br,lr),Tr}(sr,qn[0],qn[1],Tt,zt,Et,Yt)},xt=-1,q==null){for(;++xt<St;)Bn(sr,qe[xt],lt[xt],ft[xt],Tt,zt,Et,Yt);--xt}else qe.forEach(sr.add);return lt=ft=qe=Qe=null,sr}return Ue.x=function(qe){return arguments.length?(Le=qe,Ue):Le},Ue.y=function(qe){return arguments.length?(Ie=qe,Ue):Ie},Ue.extent=function(qe){return arguments.length?(qe==null?q=$=ne=ue=null:(q=+qe[0][0],$=+qe[0][1],ne=+qe[1][0],ue=+qe[1][1]),Ue):q==null?null:[[q,$],[ne,ue]]},Ue.size=function(qe){return arguments.length?(qe==null?q=$=ne=ue=null:(q=$=0,ne=+qe[0],ue=+qe[1]),Ue):q==null?null:[ne-q,ue-$]},Ue},o.interpolateRgb=uo,o.interpolateObject=Zi,o.interpolateNumber=Za,o.interpolateString=Xi;var ko=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qo=new RegExp(ko.source,"g");function Mi(L,q){for(var $,ne=o.interpolators.length;--ne>=0&&!($=o.interpolators[ne](L,q)););return $}function Si(L,q){var $,ne=[],ue=[],ye=L.length,Le=q.length,Ie=Math.min(L.length,q.length);for($=0;$<Ie;++$)ne.push(Mi(L[$],q[$]));for(;$<ye;++$)ue[$]=L[$];for(;$<Le;++$)ue[$]=q[$];return function(Ue){for($=0;$<Ie;++$)ue[$]=ne[$](Ue);return ue}}o.interpolate=Mi,o.interpolators=[function(L,q){var $=typeof q;return($==="string"?_n.has(q.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(q)?uo:Xi:q instanceof We?uo:Array.isArray(q)?Si:$==="object"&&isNaN(q)?Zi:Za)(L,q)}],o.interpolateArray=Si;var Ki=function(){return D},pa=o.map({linear:Ki,poly:function(L){return function(q){return Math.pow(q,L)}},quad:function(){return Ri},cubic:function(){return Ao},sin:function(){return Mo},exp:function(){return fo},circle:function(){return So},elastic:function(L,q){var $;return arguments.length<2&&(q=.45),arguments.length?$=q/Ot*Math.asin(1/L):(L=1,$=q/4),function(ne){return 1+L*Math.pow(2,-10*ne)*Math.sin((ne-$)*Ot/q)}},back:function(L){return L||(L=1.70158),function(q){return q*q*((L+1)*q-L)}},bounce:function(){return Qi}}),za=o.map({in:D,out:co,"in-out":Ji,"out-in":function(L){return Ji(co(L))}});function co(L){return function(q){return 1-L(1-q)}}function Ji(L){return function(q){return .5*(q<.5?L(2*q):2-L(2-2*q))}}function Ri(L){return L*L}function Ao(L){return L*L*L}function $i(L){if(L<=0)return 0;if(L>=1)return 1;var q=L*L,$=q*L;return 4*(L<.5?$:3*(L-q)+$-.75)}function Mo(L){return 1-Math.cos(L*He)}function fo(L){return Math.pow(2,10*(L-1))}function So(L){return 1-Math.sqrt(1-L*L)}function Qi(L){return L<.36363636363636365?7.5625*L*L:L<.7272727272727273?7.5625*(L-=.5454545454545454)*L+.75:L<.9090909090909091?7.5625*(L-=.8181818181818182)*L+.9375:7.5625*(L-=.9545454545454546)*L+.984375}function Ks(L,q){return q-=L,function($){return Math.round(L+q*$)}}function Bs(L){var q,$,ne,ue=[L.a,L.b],ye=[L.c,L.d],Le=il(ue),Ie=Ho(ue,ye),Ue=il(((q=ye)[0]+=(ne=-Ie)*($=ue)[0],q[1]+=ne*$[1],q))||0;ue[0]*ye[1]<ye[0]*ue[1]&&(ue[0]*=-1,ue[1]*=-1,Le*=-1,Ie*=-1),this.rotate=(Le?Math.atan2(ue[1],ue[0]):Math.atan2(-ye[0],ye[1]))*Be,this.translate=[L.e,L.f],this.scale=[Le,Ue],this.skew=Ue?Math.atan2(Ie,Ue)*Be:0}function Ho(L,q){return L[0]*q[0]+L[1]*q[1]}function il(L){var q=Math.sqrt(Ho(L,L));return q&&(L[0]/=q,L[1]/=q),q}o.ease=function(L){var q,$=L.indexOf("-"),ne=$>=0?L.slice(0,$):L,ue=$>=0?L.slice($+1):"in";return ne=pa.get(ne)||Ki,ue=za.get(ue)||D,q=ue(ne.apply(null,T.call(arguments,1))),function(ye){return ye<=0?0:ye>=1?1:q(ye)}},o.interpolateHcl=function(L,q){L=o.hcl(L),q=o.hcl(q);var $=L.h,ne=L.c,ue=L.l,ye=q.h-$,Le=q.c-ne,Ie=q.l-ue;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?q.c:ne),isNaN(ye)?(ye=0,$=isNaN($)?q.h:$):ye>180?ye-=360:ye<-180&&(ye+=360),function(Ue){return yt($+ye*Ue,ne+Le*Ue,ue+Ie*Ue)+""}},o.interpolateHsl=function(L,q){L=o.hsl(L),q=o.hsl(q);var $=L.h,ne=L.s,ue=L.l,ye=q.h-$,Le=q.s-ne,Ie=q.l-ue;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?q.s:ne),isNaN(ye)?(ye=0,$=isNaN($)?q.h:$):ye>180?ye-=360:ye<-180&&(ye+=360),function(Ue){return gt($+ye*Ue,ne+Le*Ue,ue+Ie*Ue)+""}},o.interpolateLab=function(L,q){L=o.lab(L),q=o.lab(q);var $=L.l,ne=L.a,ue=L.b,ye=q.l-$,Le=q.a-ne,Ie=q.b-ue;return function(Ue){return Bt($+ye*Ue,ne+Le*Ue,ue+Ie*Ue)+""}},o.interpolateRound=Ks,o.transform=function(L){var q=h.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function($){if($!=null){q.setAttribute("transform",$);var ne=q.transform.baseVal.consolidate()}return new Bs(ne?ne.matrix:ol)})(L)},Bs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ol={a:1,b:0,c:0,d:1,e:0,f:0};function Go(L){return L.length?L.pop()+",":""}function sl(L,q){var $=[],ne=[];return L=o.transform(L),q=o.transform(q),function(ue,ye,Le,Ie){if(ue[0]!==ye[0]||ue[1]!==ye[1]){var Ue=Le.push("translate(",null,",",null,")");Ie.push({i:Ue-4,x:Za(ue[0],ye[0])},{i:Ue-2,x:Za(ue[1],ye[1])})}else(ye[0]||ye[1])&&Le.push("translate("+ye+")")}(L.translate,q.translate,$,ne),function(ue,ye,Le,Ie){ue!==ye?(ue-ye>180?ye+=360:ye-ue>180&&(ue+=360),Ie.push({i:Le.push(Go(Le)+"rotate(",null,")")-2,x:Za(ue,ye)})):ye&&Le.push(Go(Le)+"rotate("+ye+")")}(L.rotate,q.rotate,$,ne),function(ue,ye,Le,Ie){ue!==ye?Ie.push({i:Le.push(Go(Le)+"skewX(",null,")")-2,x:Za(ue,ye)}):ye&&Le.push(Go(Le)+"skewX("+ye+")")}(L.skew,q.skew,$,ne),function(ue,ye,Le,Ie){if(ue[0]!==ye[0]||ue[1]!==ye[1]){var Ue=Le.push(Go(Le)+"scale(",null,",",null,")");Ie.push({i:Ue-4,x:Za(ue[0],ye[0])},{i:Ue-2,x:Za(ue[1],ye[1])})}else ye[0]===1&&ye[1]===1||Le.push(Go(Le)+"scale("+ye+")")}(L.scale,q.scale,$,ne),L=q=null,function(ue){for(var ye,Le=-1,Ie=ne.length;++Le<Ie;)$[(ye=ne[Le]).i]=ye.x(ue);return $.join("")}}function xl(L,q){return q=(q-=L=+L)||1/q,function($){return($-L)/q}}function bl(L,q){return q=(q-=L=+L)||1/q,function($){return Math.max(0,Math.min(1,($-L)/q))}}function Wo(L){for(var q=L.source,$=L.target,ne=function(Le,Ie){if(Le===Ie)return Le;for(var Ue=eo(Le),qe=eo(Ie),Qe=Ue.pop(),lt=qe.pop(),ft=null;Qe===lt;)ft=Qe,Qe=Ue.pop(),lt=qe.pop();return ft}(q,$),ue=[q];q!==ne;)q=q.parent,ue.push(q);for(var ye=ue.length;$!==ne;)ue.splice(ye,0,$),$=$.parent;return ue}function eo(L){for(var q=[],$=L.parent;$!=null;)q.push(L),L=$,$=$.parent;return q.push(L),q}function as(L){L.fixed|=2}function Yo(L){L.fixed&=-7}function bs(L){L.fixed|=4,L.px=L.x,L.py=L.y}function Zo(L){L.fixed&=-5}function Fi(L,q,$){var ne=0,ue=0;if(L.charge=0,!L.leaf)for(var ye,Le=L.nodes,Ie=Le.length,Ue=-1;++Ue<Ie;)(ye=Le[Ue])!=null&&(Fi(ye,q,$),L.charge+=ye.charge,ne+=ye.charge*ye.cx,ue+=ye.charge*ye.cy);if(L.point){L.leaf||(L.point.x+=Math.random()-.5,L.point.y+=Math.random()-.5);var qe=q*$[L.point.index];L.charge+=L.pointCharge=qe,ne+=qe*L.point.x,ue+=qe*L.point.y}L.cx=ne/L.charge,L.cy=ue/L.charge}o.interpolateTransform=sl,o.layout={},o.layout.bundle=function(){return function(L){for(var q=[],$=-1,ne=L.length;++$<ne;)q.push(Wo(L[$]));return q}},o.layout.chord=function(){var L,q,$,ne,ue,ye,Le,Ie={},Ue=0;function qe(){var lt,ft,xt,St,Tt,zt={},Et=[],Yt=o.range(ne),qt=[];for(L=[],q=[],lt=0,St=-1;++St<ne;){for(ft=0,Tt=-1;++Tt<ne;)ft+=$[St][Tt];Et.push(ft),qt.push(o.range(ne)),lt+=ft}for(ue&&Yt.sort(function(sr,qn){return ue(Et[sr],Et[qn])}),ye&&qt.forEach(function(sr,qn){sr.sort(function(ir,vr){return ye($[qn][ir],$[qn][vr])})}),lt=(Ot-Ue*ne)/lt,ft=0,St=-1;++St<ne;){for(xt=ft,Tt=-1;++Tt<ne;){var Ft=Yt[St],fn=qt[Ft][Tt],dn=$[Ft][fn],kn=ft,Sn=ft+=dn*lt;zt[Ft+"-"+fn]={index:Ft,subindex:fn,startAngle:kn,endAngle:Sn,value:dn}}q[Ft]={index:Ft,startAngle:xt,endAngle:ft,value:Et[Ft]},ft+=Ue}for(St=-1;++St<ne;)for(Tt=St-1;++Tt<ne;){var Bn=zt[St+"-"+Tt],$n=zt[Tt+"-"+St];(Bn.value||$n.value)&&L.push(Bn.value<$n.value?{source:$n,target:Bn}:{source:Bn,target:$n})}Le&&Qe()}function Qe(){L.sort(function(lt,ft){return Le((lt.source.value+lt.target.value)/2,(ft.source.value+ft.target.value)/2)})}return Ie.matrix=function(lt){return arguments.length?(ne=($=lt)&&$.length,L=q=null,Ie):$},Ie.padding=function(lt){return arguments.length?(Ue=lt,L=q=null,Ie):Ue},Ie.sortGroups=function(lt){return arguments.length?(ue=lt,L=q=null,Ie):ue},Ie.sortSubgroups=function(lt){return arguments.length?(ye=lt,L=null,Ie):ye},Ie.sortChords=function(lt){return arguments.length?(Le=lt,L&&Qe(),Ie):Le},Ie.chords=function(){return L||qe(),L},Ie.groups=function(){return q||qe(),q},Ie},o.layout.force=function(){var L,q,$,ne,ue,ye,Le={},Ie=o.dispatch("start","tick","end"),Ue=[1,1],qe=.9,Qe=Js,lt=Eo,ft=-30,xt=ho,St=.1,Tt=.64,zt=[],Et=[];function Yt(Ft){return function(fn,dn,kn,Sn){if(fn.point!==Ft){var Bn=fn.cx-Ft.x,$n=fn.cy-Ft.y,sr=Sn-dn,qn=Bn*Bn+$n*$n;if(sr*sr/Tt<qn){if(qn<xt){var ir=fn.charge/qn;Ft.px-=Bn*ir,Ft.py-=$n*ir}return!0}fn.point&&qn&&qn<xt&&(ir=fn.pointCharge/qn,Ft.px-=Bn*ir,Ft.py-=$n*ir)}return!fn.charge}}function qt(Ft){Ft.px=o.event.x,Ft.py=o.event.y,Le.resume()}return Le.tick=function(){if(($*=.99)<.005)return L=null,Ie.end({type:"end",alpha:$=0}),!0;var Ft,fn,dn,kn,Sn,Bn,$n,sr,qn,ir=zt.length,vr=Et.length;for(fn=0;fn<vr;++fn)kn=(dn=Et[fn]).source,(Bn=(sr=(Sn=dn.target).x-kn.x)*sr+(qn=Sn.y-kn.y)*qn)&&(sr*=Bn=$*ue[fn]*((Bn=Math.sqrt(Bn))-ne[fn])/Bn,qn*=Bn,Sn.x-=sr*($n=kn.weight+Sn.weight?kn.weight/(kn.weight+Sn.weight):.5),Sn.y-=qn*$n,kn.x+=sr*($n=1-$n),kn.y+=qn*$n);if(($n=$*St)&&(sr=Ue[0]/2,qn=Ue[1]/2,fn=-1,$n))for(;++fn<ir;)(dn=zt[fn]).x+=(sr-dn.x)*$n,dn.y+=(qn-dn.y)*$n;if(ft)for(Fi(Ft=o.geom.quadtree(zt),$,ye),fn=-1;++fn<ir;)(dn=zt[fn]).fixed||Ft.visit(Yt(dn));for(fn=-1;++fn<ir;)(dn=zt[fn]).fixed?(dn.x=dn.px,dn.y=dn.py):(dn.x-=(dn.px-(dn.px=dn.x))*qe,dn.y-=(dn.py-(dn.py=dn.y))*qe);Ie.tick({type:"tick",alpha:$})},Le.nodes=function(Ft){return arguments.length?(zt=Ft,Le):zt},Le.links=function(Ft){return arguments.length?(Et=Ft,Le):Et},Le.size=function(Ft){return arguments.length?(Ue=Ft,Le):Ue},Le.linkDistance=function(Ft){return arguments.length?(Qe=typeof Ft=="function"?Ft:+Ft,Le):Qe},Le.distance=Le.linkDistance,Le.linkStrength=function(Ft){return arguments.length?(lt=typeof Ft=="function"?Ft:+Ft,Le):lt},Le.friction=function(Ft){return arguments.length?(qe=+Ft,Le):qe},Le.charge=function(Ft){return arguments.length?(ft=typeof Ft=="function"?Ft:+Ft,Le):ft},Le.chargeDistance=function(Ft){return arguments.length?(xt=Ft*Ft,Le):Math.sqrt(xt)},Le.gravity=function(Ft){return arguments.length?(St=+Ft,Le):St},Le.theta=function(Ft){return arguments.length?(Tt=Ft*Ft,Le):Math.sqrt(Tt)},Le.alpha=function(Ft){return arguments.length?(Ft=+Ft,$?Ft>0?$=Ft:(L.c=null,L.t=NaN,L=null,Ie.end({type:"end",alpha:$=0})):Ft>0&&(Ie.start({type:"start",alpha:$=Ft}),L=en(Le.tick)),Le):$},Le.start=function(){var Ft,fn,dn,kn=zt.length,Sn=Et.length,Bn=Ue[0],$n=Ue[1];for(Ft=0;Ft<kn;++Ft)(dn=zt[Ft]).index=Ft,dn.weight=0;for(Ft=0;Ft<Sn;++Ft)typeof(dn=Et[Ft]).source=="number"&&(dn.source=zt[dn.source]),typeof dn.target=="number"&&(dn.target=zt[dn.target]),++dn.source.weight,++dn.target.weight;for(Ft=0;Ft<kn;++Ft)dn=zt[Ft],isNaN(dn.x)&&(dn.x=sr("x",Bn)),isNaN(dn.y)&&(dn.y=sr("y",$n)),isNaN(dn.px)&&(dn.px=dn.x),isNaN(dn.py)&&(dn.py=dn.y);if(ne=[],typeof Qe=="function")for(Ft=0;Ft<Sn;++Ft)ne[Ft]=+Qe.call(this,Et[Ft],Ft);else for(Ft=0;Ft<Sn;++Ft)ne[Ft]=Qe;if(ue=[],typeof lt=="function")for(Ft=0;Ft<Sn;++Ft)ue[Ft]=+lt.call(this,Et[Ft],Ft);else for(Ft=0;Ft<Sn;++Ft)ue[Ft]=lt;if(ye=[],typeof ft=="function")for(Ft=0;Ft<kn;++Ft)ye[Ft]=+ft.call(this,zt[Ft],Ft);else for(Ft=0;Ft<kn;++Ft)ye[Ft]=ft;function sr(qn,ir){if(!fn){for(fn=new Array(kn),ar=0;ar<kn;++ar)fn[ar]=[];for(ar=0;ar<Sn;++ar){var vr=Et[ar];fn[vr.source.index].push(vr.target),fn[vr.target.index].push(vr.source)}}for(var Ar,Kn=fn[Ft],ar=-1,br=Kn.length;++ar<br;)if(!isNaN(Ar=Kn[ar][qn]))return Ar;return Math.random()*ir}return Le.resume()},Le.resume=function(){return Le.alpha(.1)},Le.stop=function(){return Le.alpha(0)},Le.drag=function(){if(q||(q=o.behavior.drag().origin(D).on("dragstart.force",as).on("drag.force",qt).on("dragend.force",Yo)),!arguments.length)return q;this.on("mouseover.force",bs).on("mouseout.force",Zo).call(q)},o.rebind(Le,Ie,"on")};var Js=20,Eo=1,ho=1/0;function po(L,q){return o.rebind(L,q,"sort","children","value"),L.nodes=L,L.links=os,L}function Lo(L,q){for(var $=[L];(L=$.pop())!=null;)if(q(L),(ue=L.children)&&(ne=ue.length))for(var ne,ue;--ne>=0;)$.push(ue[ne])}function Ur(L,q){for(var $=[L],ne=[];(L=$.pop())!=null;)if(ne.push(L),(ye=L.children)&&(ue=ye.length))for(var ue,ye,Le=-1;++Le<ue;)$.push(ye[Le]);for(;(L=ne.pop())!=null;)q(L)}function is(L){return L.children}function _l(L){return L.value}function Ns(L,q){return q.value-L.value}function os(L){return o.merge(L.map(function(q){return(q.children||[]).map(function($){return{source:q,target:$}})}))}o.layout.hierarchy=function(){var L=Ns,q=is,$=_l;function ne(ue){var ye,Le=[ue],Ie=[];for(ue.depth=0;(ye=Le.pop())!=null;)if(Ie.push(ye),(qe=q.call(ne,ye,ye.depth))&&(Ue=qe.length)){for(var Ue,qe,Qe;--Ue>=0;)Le.push(Qe=qe[Ue]),Qe.parent=ye,Qe.depth=ye.depth+1;$&&(ye.value=0),ye.children=qe}else $&&(ye.value=+$.call(ne,ye,ye.depth)||0),delete ye.children;return Ur(ue,function(lt){var ft,xt;L&&(ft=lt.children)&&ft.sort(L),$&&(xt=lt.parent)&&(xt.value+=lt.value)}),Ie}return ne.sort=function(ue){return arguments.length?(L=ue,ne):L},ne.children=function(ue){return arguments.length?(q=ue,ne):q},ne.value=function(ue){return arguments.length?($=ue,ne):$},ne.revalue=function(ue){return $&&(Lo(ue,function(ye){ye.children&&(ye.value=0)}),Ur(ue,function(ye){var Le;ye.children||(ye.value=+$.call(ne,ye,ye.depth)||0),(Le=ye.parent)&&(Le.value+=ye.value)})),ue},ne},o.layout.partition=function(){var L=o.layout.hierarchy(),q=[1,1];function $(ye,Le,Ie,Ue){var qe=ye.children;if(ye.x=Le,ye.y=ye.depth*Ue,ye.dx=Ie,ye.dy=Ue,qe&&(Qe=qe.length)){var Qe,lt,ft,xt=-1;for(Ie=ye.value?Ie/ye.value:0;++xt<Qe;)$(lt=qe[xt],Le,ft=lt.value*Ie,Ue),Le+=ft}}function ne(ye){var Le=ye.children,Ie=0;if(Le&&(Ue=Le.length))for(var Ue,qe=-1;++qe<Ue;)Ie=Math.max(Ie,ne(Le[qe]));return 1+Ie}function ue(ye,Le){var Ie=L.call(this,ye,Le);return $(Ie[0],0,q[0],q[1]/ne(Ie[0])),Ie}return ue.size=function(ye){return arguments.length?(q=ye,ue):q},po(ue,L)},o.layout.pie=function(){var L=Number,q=ll,$=0,ne=Ot,ue=0;function ye(Le){var Ie,Ue=Le.length,qe=Le.map(function(Yt,qt){return+L.call(ye,Yt,qt)}),Qe=+(typeof $=="function"?$.apply(this,arguments):$),lt=(typeof ne=="function"?ne.apply(this,arguments):ne)-Qe,ft=Math.min(Math.abs(lt)/Ue,+(typeof ue=="function"?ue.apply(this,arguments):ue)),xt=ft*(lt<0?-1:1),St=o.sum(qe),Tt=St?(lt-Ue*xt)/St:0,zt=o.range(Ue),Et=[];return q!=null&&zt.sort(q===ll?function(Yt,qt){return qe[qt]-qe[Yt]}:function(Yt,qt){return q(Le[Yt],Le[qt])}),zt.forEach(function(Yt){Et[Yt]={data:Le[Yt],value:Ie=qe[Yt],startAngle:Qe,endAngle:Qe+=Ie*Tt+xt,padAngle:ft}}),Et}return ye.value=function(Le){return arguments.length?(L=Le,ye):L},ye.sort=function(Le){return arguments.length?(q=Le,ye):q},ye.startAngle=function(Le){return arguments.length?($=Le,ye):$},ye.endAngle=function(Le){return arguments.length?(ne=Le,ye):ne},ye.padAngle=function(Le){return arguments.length?(ue=Le,ye):ue},ye};var ll={};function wl(L){return L.x}function js(L){return L.y}function Tl(L,q,$){L.y0=q,L.y=$}o.layout.stack=function(){var L=D,q=go,$=Bi,ne=Tl,ue=wl,ye=js;function Le(Ie,Ue){if(!(ft=Ie.length))return Ie;var qe=Ie.map(function(Yt,qt){return L.call(Le,Yt,qt)}),Qe=qe.map(function(Yt){return Yt.map(function(qt,Ft){return[ue.call(Le,qt,Ft),ye.call(Le,qt,Ft)]})}),lt=q.call(Le,Qe,Ue);qe=o.permute(qe,lt),Qe=o.permute(Qe,lt);var ft,xt,St,Tt,zt=$.call(Le,Qe,Ue),Et=qe[0].length;for(St=0;St<Et;++St)for(ne.call(Le,qe[0][St],Tt=zt[St],Qe[0][St][1]),xt=1;xt<ft;++xt)ne.call(Le,qe[xt][St],Tt+=Qe[xt-1][St][1],Qe[xt][St][1]);return Ie}return Le.values=function(Ie){return arguments.length?(L=Ie,Le):L},Le.order=function(Ie){return arguments.length?(q=typeof Ie=="function"?Ie:Co.get(Ie)||go,Le):q},Le.offset=function(Ie){return arguments.length?($=typeof Ie=="function"?Ie:Xo.get(Ie)||Bi,Le):$},Le.x=function(Ie){return arguments.length?(ue=Ie,Le):ue},Le.y=function(Ie){return arguments.length?(ye=Ie,Le):ye},Le.out=function(Ie){return arguments.length?(ne=Ie,Le):ne},Le};var Co=o.map({"inside-out":function(L){var q,$,ne=L.length,ue=L.map(ss),ye=L.map(ul),Le=o.range(ne).sort(function(lt,ft){return ue[lt]-ue[ft]}),Ie=0,Ue=0,qe=[],Qe=[];for(q=0;q<ne;++q)$=Le[q],Ie<Ue?(Ie+=ye[$],qe.push($)):(Ue+=ye[$],Qe.push($));return Qe.reverse().concat(qe)},reverse:function(L){return o.range(L.length).reverse()},default:go}),Xo=o.map({silhouette:function(L){var q,$,ne,ue=L.length,ye=L[0].length,Le=[],Ie=0,Ue=[];for($=0;$<ye;++$){for(q=0,ne=0;q<ue;q++)ne+=L[q][$][1];ne>Ie&&(Ie=ne),Le.push(ne)}for($=0;$<ye;++$)Ue[$]=(Ie-Le[$])/2;return Ue},wiggle:function(L){var q,$,ne,ue,ye,Le,Ie,Ue,qe,Qe=L.length,lt=L[0],ft=lt.length,xt=[];for(xt[0]=Ue=qe=0,$=1;$<ft;++$){for(q=0,ue=0;q<Qe;++q)ue+=L[q][$][1];for(q=0,ye=0,Ie=lt[$][0]-lt[$-1][0];q<Qe;++q){for(ne=0,Le=(L[q][$][1]-L[q][$-1][1])/(2*Ie);ne<q;++ne)Le+=(L[ne][$][1]-L[ne][$-1][1])/Ie;ye+=Le*L[q][$][1]}xt[$]=Ue-=ue?ye/ue*Ie:0,Ue<qe&&(qe=Ue)}for($=0;$<ft;++$)xt[$]-=qe;return xt},expand:function(L){var q,$,ne,ue=L.length,ye=L[0].length,Le=1/ue,Ie=[];for($=0;$<ye;++$){for(q=0,ne=0;q<ue;q++)ne+=L[q][$][1];if(ne)for(q=0;q<ue;q++)L[q][$][1]/=ne;else for(q=0;q<ue;q++)L[q][$][1]=Le}for($=0;$<ye;++$)Ie[$]=0;return Ie},zero:Bi});function go(L){return o.range(L.length)}function Bi(L){for(var q=-1,$=L[0].length,ne=[];++q<$;)ne[q]=0;return ne}function ss(L){for(var q,$=1,ne=0,ue=L[0][1],ye=L.length;$<ye;++$)(q=L[$][1])>ue&&(ne=$,ue=q);return ne}function ul(L){return L.reduce(_s,0)}function _s(L,q){return L+q[1]}function Us(L,q){return bi(L,Math.ceil(Math.log(q.length)/Math.LN2+1))}function bi(L,q){for(var $=-1,ne=+L[0],ue=(L[1]-ne)/q,ye=[];++$<=q;)ye[$]=ue*$+ne;return ye}function Vs(L){return[o.min(L),o.max(L)]}function cl(L,q){return L.value-q.value}function ls(L,q){var $=L._pack_next;L._pack_next=q,q._pack_prev=L,q._pack_next=$,$._pack_prev=q}function Ko(L,q){L._pack_next=q,q._pack_prev=L}function us(L,q){var $=q.x-L.x,ne=q.y-L.y,ue=L.r+q.r;return .999*ue*ue>$*$+ne*ne}function Jo(L){if((q=L.children)&&(Ue=q.length)){var q,$,ne,ue,ye,Le,Ie,Ue,qe=1/0,Qe=-1/0,lt=1/0,ft=-1/0;if(q.forEach($o),($=q[0]).x=-$.r,$.y=0,qt($),Ue>1&&((ne=q[1]).x=ne.r,ne.y=0,qt(ne),Ue>2))for($r($,ne,ue=q[2]),qt(ue),ls($,ue),$._pack_prev=ue,ls(ue,ne),ne=$._pack_next,ye=3;ye<Ue;ye++){$r($,ne,ue=q[ye]);var xt=0,St=1,Tt=1;for(Le=ne._pack_next;Le!==ne;Le=Le._pack_next,St++)if(us(Le,ue)){xt=1;break}if(xt==1)for(Ie=$._pack_prev;Ie!==Le._pack_prev&&!us(Ie,ue);Ie=Ie._pack_prev,Tt++);xt?(St<Tt||St==Tt&&ne.r<$.r?Ko($,ne=Le):Ko($=Ie,ne),ye--):(ls($,ue),ne=ue,qt(ue))}var zt=(qe+Qe)/2,Et=(lt+ft)/2,Yt=0;for(ye=0;ye<Ue;ye++)(ue=q[ye]).x-=zt,ue.y-=Et,Yt=Math.max(Yt,ue.r+Math.sqrt(ue.x*ue.x+ue.y*ue.y));L.r=Yt,q.forEach(ws)}function qt(Ft){qe=Math.min(Ft.x-Ft.r,qe),Qe=Math.max(Ft.x+Ft.r,Qe),lt=Math.min(Ft.y-Ft.r,lt),ft=Math.max(Ft.y+Ft.r,ft)}}function $o(L){L._pack_next=L._pack_prev=L}function ws(L){delete L._pack_next,delete L._pack_prev}function qs(L,q,$,ne){var ue=L.children;if(L.x=q+=ne*L.x,L.y=$+=ne*L.y,L.r*=ne,ue)for(var ye=-1,Le=ue.length;++ye<Le;)qs(ue[ye],q,$,ne)}function $r(L,q,$){var ne=L.r+$.r,ue=q.x-L.x,ye=q.y-L.y;if(ne&&(ue||ye)){var Le=q.r+$.r,Ie=ue*ue+ye*ye,Ue=.5+((ne*=ne)-(Le*=Le))/(2*Ie),qe=Math.sqrt(Math.max(0,2*Le*(ne+Ie)-(ne-=Ie)*ne-Le*Le))/(2*Ie);$.x=L.x+Ue*ue+qe*ye,$.y=L.y+Ue*ye-qe*ue}else $.x=L.x+ne,$.y=L.y}function Po(L,q){return L.parent==q.parent?1:2}function Xa(L){var q=L.children;return q.length?q[0]:L.t}function Ni(L){var q,$=L.children;return(q=$.length)?$[q-1]:L.t}function Wr(L,q,$){var ne=$/(q.i-L.i);q.c-=ne,q.s+=$,L.c+=ne,q.z+=$,q.m+=$}function Jr(L,q,$){return L.a.parent===q.parent?L.a:$}function _i(L){var q=L.children;return q&&q.length?_i(q[0]):L}function cs(L){var q,$=L.children;return $&&(q=$.length)?cs($[q-1]):L}function Ts(L){return{x:L.x,y:L.y,dx:L.dx,dy:L.dy}}function Hs(L,q){var $=L.x+q[3],ne=L.y+q[0],ue=L.dx-q[1]-q[3],ye=L.dy-q[0]-q[2];return ue<0&&($+=ue/2,ue=0),ye<0&&(ne+=ye/2,ye=0),{x:$,y:ne,dx:ue,dy:ye}}function ks(L){var q=L[0],$=L[L.length-1];return q<$?[q,$]:[$,q]}function As(L){return L.rangeExtent?L.rangeExtent():ks(L.range())}function Ei(L,q,$,ne){var ue=$(L[0],L[1]),ye=ne(q[0],q[1]);return function(Le){return ye(ue(Le))}}function Oo(L,q){var $,ne=0,ue=L.length-1,ye=L[ne],Le=L[ue];return Le<ye&&($=ne,ne=ue,ue=$,$=ye,ye=Le,Le=$),L[ne]=q.floor(ye),L[ue]=q.ceil(Le),L}function Io(L){return L?{floor:function(q){return Math.floor(q/L)*L},ceil:function(q){return Math.ceil(q/L)*L}}:ti}o.layout.histogram=function(){var L=!0,q=Number,$=Vs,ne=Us;function ue(ye,Le){for(var Ie,Ue,qe=[],Qe=ye.map(q,this),lt=$.call(this,Qe,Le),ft=ne.call(this,lt,Qe,Le),xt=(Le=-1,Qe.length),St=ft.length-1,Tt=L?1:1/xt;++Le<St;)(Ie=qe[Le]=[]).dx=ft[Le+1]-(Ie.x=ft[Le]),Ie.y=0;if(St>0)for(Le=-1;++Le<xt;)(Ue=Qe[Le])>=lt[0]&&Ue<=lt[1]&&((Ie=qe[o.bisect(ft,Ue,1,St)-1]).y+=Tt,Ie.push(ye[Le]));return qe}return ue.value=function(ye){return arguments.length?(q=ye,ue):q},ue.range=function(ye){return arguments.length?($=Rn(ye),ue):$},ue.bins=function(ye){return arguments.length?(ne=typeof ye=="number"?function(Le){return bi(Le,ye)}:Rn(ye),ue):ne},ue.frequency=function(ye){return arguments.length?(L=!!ye,ue):L},ue},o.layout.pack=function(){var L,q=o.layout.hierarchy().sort(cl),$=0,ne=[1,1];function ue(ye,Le){var Ie=q.call(this,ye,Le),Ue=Ie[0],qe=ne[0],Qe=ne[1],lt=L==null?Math.sqrt:typeof L=="function"?L:function(){return L};if(Ue.x=Ue.y=0,Ur(Ue,function(xt){xt.r=+lt(xt.value)}),Ur(Ue,Jo),$){var ft=$*(L?1:Math.max(2*Ue.r/qe,2*Ue.r/Qe))/2;Ur(Ue,function(xt){xt.r+=ft}),Ur(Ue,Jo),Ur(Ue,function(xt){xt.r-=ft})}return qs(Ue,qe/2,Qe/2,L?1:1/Math.max(2*Ue.r/qe,2*Ue.r/Qe)),Ie}return ue.size=function(ye){return arguments.length?(ne=ye,ue):ne},ue.radius=function(ye){return arguments.length?(L=ye==null||typeof ye=="function"?ye:+ye,ue):L},ue.padding=function(ye){return arguments.length?($=+ye,ue):$},po(ue,q)},o.layout.tree=function(){var L=o.layout.hierarchy().sort(null).value(null),q=Po,$=[1,1],ne=null;function ue(Ue,qe){var Qe=L.call(this,Ue,qe),lt=Qe[0],ft=function(qt){for(var Ft,fn={A:null,children:[qt]},dn=[fn];(Ft=dn.pop())!=null;)for(var kn,Sn=Ft.children,Bn=0,$n=Sn.length;Bn<$n;++Bn)dn.push((Sn[Bn]=kn={_:Sn[Bn],parent:Ft,children:(kn=Sn[Bn].children)&&kn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Bn}).a=kn);return fn.children[0]}(lt);if(Ur(ft,ye),ft.parent.m=-ft.z,Lo(ft,Le),ne)Lo(lt,Ie);else{var xt=lt,St=lt,Tt=lt;Lo(lt,function(qt){qt.x<xt.x&&(xt=qt),qt.x>St.x&&(St=qt),qt.depth>Tt.depth&&(Tt=qt)});var zt=q(xt,St)/2-xt.x,Et=$[0]/(St.x+q(St,xt)/2+zt),Yt=$[1]/(Tt.depth||1);Lo(lt,function(qt){qt.x=(qt.x+zt)*Et,qt.y=qt.depth*Yt})}return Qe}function ye(Ue){var qe=Ue.children,Qe=Ue.parent.children,lt=Ue.i?Qe[Ue.i-1]:null;if(qe.length){(function(xt){for(var St,Tt=0,zt=0,Et=xt.children,Yt=Et.length;--Yt>=0;)(St=Et[Yt]).z+=Tt,St.m+=Tt,Tt+=St.s+(zt+=St.c)})(Ue);var ft=(qe[0].z+qe[qe.length-1].z)/2;lt?(Ue.z=lt.z+q(Ue._,lt._),Ue.m=Ue.z-ft):Ue.z=ft}else lt&&(Ue.z=lt.z+q(Ue._,lt._));Ue.parent.A=function(xt,St,Tt){if(St){for(var zt,Et=xt,Yt=xt,qt=St,Ft=Et.parent.children[0],fn=Et.m,dn=Yt.m,kn=qt.m,Sn=Ft.m;qt=Ni(qt),Et=Xa(Et),qt&&Et;)Ft=Xa(Ft),(Yt=Ni(Yt)).a=xt,(zt=qt.z+kn-Et.z-fn+q(qt._,Et._))>0&&(Wr(Jr(qt,xt,Tt),xt,zt),fn+=zt,dn+=zt),kn+=qt.m,fn+=Et.m,Sn+=Ft.m,dn+=Yt.m;qt&&!Ni(Yt)&&(Yt.t=qt,Yt.m+=kn-dn),Et&&!Xa(Ft)&&(Ft.t=Et,Ft.m+=fn-Sn,Tt=xt)}return Tt}(Ue,lt,Ue.parent.A||Qe[0])}function Le(Ue){Ue._.x=Ue.z+Ue.parent.m,Ue.m+=Ue.parent.m}function Ie(Ue){Ue.x*=$[0],Ue.y=Ue.depth*$[1]}return ue.separation=function(Ue){return arguments.length?(q=Ue,ue):q},ue.size=function(Ue){return arguments.length?(ne=($=Ue)==null?Ie:null,ue):ne?null:$},ue.nodeSize=function(Ue){return arguments.length?(ne=($=Ue)==null?null:Ie,ue):ne?$:null},po(ue,L)},o.layout.cluster=function(){var L=o.layout.hierarchy().sort(null).value(null),q=Po,$=[1,1],ne=!1;function ue(ye,Le){var Ie,Ue=L.call(this,ye,Le),qe=Ue[0],Qe=0;Ur(qe,function(Tt){var zt=Tt.children;zt&&zt.length?(Tt.x=function(Et){return Et.reduce(function(Yt,qt){return Yt+qt.x},0)/Et.length}(zt),Tt.y=function(Et){return 1+o.max(Et,function(Yt){return Yt.y})}(zt)):(Tt.x=Ie?Qe+=q(Tt,Ie):0,Tt.y=0,Ie=Tt)});var lt=_i(qe),ft=cs(qe),xt=lt.x-q(lt,ft)/2,St=ft.x+q(ft,lt)/2;return Ur(qe,ne?function(Tt){Tt.x=(Tt.x-qe.x)*$[0],Tt.y=(qe.y-Tt.y)*$[1]}:function(Tt){Tt.x=(Tt.x-xt)/(St-xt)*$[0],Tt.y=(1-(qe.y?Tt.y/qe.y:1))*$[1]}),Ue}return ue.separation=function(ye){return arguments.length?(q=ye,ue):q},ue.size=function(ye){return arguments.length?(ne=($=ye)==null,ue):ne?null:$},ue.nodeSize=function(ye){return arguments.length?(ne=($=ye)!=null,ue):ne?$:null},po(ue,L)},o.layout.treemap=function(){var L,q=o.layout.hierarchy(),$=Math.round,ne=[1,1],ue=null,ye=Ts,Le=!1,Ie="squarify",Ue=.5*(1+Math.sqrt(5));function qe(Tt,zt){for(var Et,Yt,qt=-1,Ft=Tt.length;++qt<Ft;)Yt=(Et=Tt[qt]).value*(zt<0?0:zt),Et.area=isNaN(Yt)||Yt<=0?0:Yt}function Qe(Tt){var zt=Tt.children;if(zt&&zt.length){var Et,Yt,qt,Ft=ye(Tt),fn=[],dn=zt.slice(),kn=1/0,Sn=Ie==="slice"?Ft.dx:Ie==="dice"?Ft.dy:Ie==="slice-dice"?1&Tt.depth?Ft.dy:Ft.dx:Math.min(Ft.dx,Ft.dy);for(qe(dn,Ft.dx*Ft.dy/Tt.value),fn.area=0;(qt=dn.length)>0;)fn.push(Et=dn[qt-1]),fn.area+=Et.area,Ie!=="squarify"||(Yt=ft(fn,Sn))<=kn?(dn.pop(),kn=Yt):(fn.area-=fn.pop().area,xt(fn,Sn,Ft,!1),Sn=Math.min(Ft.dx,Ft.dy),fn.length=fn.area=0,kn=1/0);fn.length&&(xt(fn,Sn,Ft,!0),fn.length=fn.area=0),zt.forEach(Qe)}}function lt(Tt){var zt=Tt.children;if(zt&&zt.length){var Et,Yt=ye(Tt),qt=zt.slice(),Ft=[];for(qe(qt,Yt.dx*Yt.dy/Tt.value),Ft.area=0;Et=qt.pop();)Ft.push(Et),Ft.area+=Et.area,Et.z!=null&&(xt(Ft,Et.z?Yt.dx:Yt.dy,Yt,!qt.length),Ft.length=Ft.area=0);zt.forEach(lt)}}function ft(Tt,zt){for(var Et,Yt=Tt.area,qt=0,Ft=1/0,fn=-1,dn=Tt.length;++fn<dn;)(Et=Tt[fn].area)&&(Et<Ft&&(Ft=Et),Et>qt&&(qt=Et));return zt*=zt,(Yt*=Yt)?Math.max(zt*qt*Ue/Yt,Yt/(zt*Ft*Ue)):1/0}function xt(Tt,zt,Et,Yt){var qt,Ft=-1,fn=Tt.length,dn=Et.x,kn=Et.y,Sn=zt?$(Tt.area/zt):0;if(zt==Et.dx){for((Yt||Sn>Et.dy)&&(Sn=Et.dy);++Ft<fn;)(qt=Tt[Ft]).x=dn,qt.y=kn,qt.dy=Sn,dn+=qt.dx=Math.min(Et.x+Et.dx-dn,Sn?$(qt.area/Sn):0);qt.z=!0,qt.dx+=Et.x+Et.dx-dn,Et.y+=Sn,Et.dy-=Sn}else{for((Yt||Sn>Et.dx)&&(Sn=Et.dx);++Ft<fn;)(qt=Tt[Ft]).x=dn,qt.y=kn,qt.dx=Sn,kn+=qt.dy=Math.min(Et.y+Et.dy-kn,Sn?$(qt.area/Sn):0);qt.z=!1,qt.dy+=Et.y+Et.dy-kn,Et.x+=Sn,Et.dx-=Sn}}function St(Tt){var zt=L||q(Tt),Et=zt[0];return Et.x=Et.y=0,Et.value?(Et.dx=ne[0],Et.dy=ne[1]):Et.dx=Et.dy=0,L&&q.revalue(Et),qe([Et],Et.dx*Et.dy/Et.value),(L?lt:Qe)(Et),Le&&(L=zt),zt}return St.size=function(Tt){return arguments.length?(ne=Tt,St):ne},St.padding=function(Tt){if(!arguments.length)return ue;function zt(Yt){return Hs(Yt,Tt)}var Et;return ye=(ue=Tt)==null?Ts:(Et=typeof Tt)=="function"?function(Yt){var qt=Tt.call(St,Yt,Yt.depth);return qt==null?Ts(Yt):Hs(Yt,typeof qt=="number"?[qt,qt,qt,qt]:qt)}:(Et==="number"&&(Tt=[Tt,Tt,Tt,Tt]),zt),St},St.round=function(Tt){return arguments.length?($=Tt?Math.round:Number,St):$!=Number},St.sticky=function(Tt){return arguments.length?(Le=Tt,L=null,St):Le},St.ratio=function(Tt){return arguments.length?(Ue=Tt,St):Ue},St.mode=function(Tt){return arguments.length?(Ie=Tt+"",St):Ie},po(St,q)},o.random={normal:function(L,q){var $=arguments.length;return $<2&&(q=1),$<1&&(L=0),function(){var ne,ue,ye;do ye=(ne=2*Math.random()-1)*ne+(ue=2*Math.random()-1)*ue;while(!ye||ye>1);return L+q*ne*Math.sqrt(-2*Math.log(ye)/ye)}},logNormal:function(){var L=o.random.normal.apply(o,arguments);return function(){return Math.exp(L())}},bates:function(L){var q=o.random.irwinHall(L);return function(){return q()/L}},irwinHall:function(L){return function(){for(var q=0,$=0;$<L;$++)q+=Math.random();return q}}},o.scale={};var ti={floor:D,ceil:D};function Ms(L,q,$,ne){var ue=[],ye=[],Le=0,Ie=Math.min(L.length,q.length)-1;for(L[Ie]<L[0]&&(L=L.slice().reverse(),q=q.slice().reverse());++Le<=Ie;)ue.push($(L[Le-1],L[Le])),ye.push(ne(q[Le-1],q[Le]));return function(Ue){var qe=o.bisect(L,Ue,1,Ie)-1;return ye[qe](ue[qe](Ue))}}function Li(L,q,$,ne){var ue,ye;function Le(){var Ue=Math.min(L.length,q.length)>2?Ms:Ei,qe=ne?bl:xl;return ue=Ue(L,q,qe,$),ye=Ue(q,L,qe,Mi),Ie}function Ie(Ue){return ue(Ue)}return Ie.invert=function(Ue){return ye(Ue)},Ie.domain=function(Ue){return arguments.length?(L=Ue.map(Number),Le()):L},Ie.range=function(Ue){return arguments.length?(q=Ue,Le()):q},Ie.rangeRound=function(Ue){return Ie.range(Ue).interpolate(Ks)},Ie.clamp=function(Ue){return arguments.length?(ne=Ue,Le()):ne},Ie.interpolate=function(Ue){return arguments.length?($=Ue,Le()):$},Ie.ticks=function(Ue){return qa(L,Ue)},Ie.tickFormat=function(Ue,qe){return d3_scale_linearTickFormat(L,Ue,qe)},Ie.nice=function(Ue){return Va(L,Ue),Le()},Ie.copy=function(){return Li(L,q,$,ne)},Le()}function Ra(L,q){return o.rebind(L,q,"range","rangeRound","interpolate","clamp")}function Va(L,q){return Oo(L,Io(ia(L,q)[2])),Oo(L,Io(ia(L,q)[2])),L}function ia(L,q){q==null&&(q=10);var $=ks(L),ne=$[1]-$[0],ue=Math.pow(10,Math.floor(Math.log(ne/q)/Math.LN10)),ye=q/ne*ue;return ye<=.15?ue*=10:ye<=.35?ue*=5:ye<=.75&&(ue*=2),$[0]=Math.ceil($[0]/ue)*ue,$[1]=Math.floor($[1]/ue)*ue+.5*ue,$[2]=ue,$}function qa(L,q){return o.range.apply(o,ia(L,q))}function to(L,q,$,ne){function ue(Ie){return($?Math.log(Ie<0?0:Ie):-Math.log(Ie>0?0:-Ie))/Math.log(q)}function ye(Ie){return $?Math.pow(q,Ie):-Math.pow(q,-Ie)}function Le(Ie){return L(ue(Ie))}return Le.invert=function(Ie){return ye(L.invert(Ie))},Le.domain=function(Ie){return arguments.length?($=Ie[0]>=0,L.domain((ne=Ie.map(Number)).map(ue)),Le):ne},Le.base=function(Ie){return arguments.length?(q=+Ie,L.domain(ne.map(ue)),Le):q},Le.nice=function(){var Ie=Oo(ne.map(ue),$?Math:Qo);return L.domain(Ie),ne=Ie.map(ye),Le},Le.ticks=function(){var Ie=ks(ne),Ue=[],qe=Ie[0],Qe=Ie[1],lt=Math.floor(ue(qe)),ft=Math.ceil(ue(Qe)),xt=q%1?2:q;if(isFinite(ft-lt)){if($){for(;lt<ft;lt++)for(var St=1;St<xt;St++)Ue.push(ye(lt)*St);Ue.push(ye(lt))}else for(Ue.push(ye(lt));lt++<ft;)for(St=xt-1;St>0;St--)Ue.push(ye(lt)*St);for(lt=0;Ue[lt]<qe;lt++);for(ft=Ue.length;Ue[ft-1]>Qe;ft--);Ue=Ue.slice(lt,ft)}return Ue},Le.copy=function(){return to(L.copy(),q,$,ne)},Ra(Le,L)}o.scale.linear=function(){return Li([0,1],[0,1],Mi,!1)},o.scale.log=function(){return to(o.scale.linear().domain([0,1]),10,!0,[1,10])};var Qo={floor:function(L){return-Math.ceil(-L)},ceil:function(L){return-Math.floor(-L)}};function ji(L,q,$){var ne=Do(q),ue=Do(1/q);function ye(Le){return L(ne(Le))}return ye.invert=function(Le){return ue(L.invert(Le))},ye.domain=function(Le){return arguments.length?(L.domain(($=Le.map(Number)).map(ne)),ye):$},ye.ticks=function(Le){return qa($,Le)},ye.tickFormat=function(Le,Ie){return d3_scale_linearTickFormat($,Le,Ie)},ye.nice=function(Le){return ye.domain(Va($,Le))},ye.exponent=function(Le){return arguments.length?(ne=Do(q=Le),ue=Do(1/q),L.domain($.map(ne)),ye):q},ye.copy=function(){return ji(L.copy(),q,$)},Ra(ye,L)}function Do(L){return function(q){return q<0?-Math.pow(-q,L):Math.pow(q,L)}}function si(L,q){var $,ne,ue;function ye(Ie){return ne[(($.get(Ie)||(q.t==="range"?$.set(Ie,L.push(Ie)):NaN))-1)%ne.length]}function Le(Ie,Ue){return o.range(L.length).map(function(qe){return Ie+Ue*qe})}return ye.domain=function(Ie){if(!arguments.length)return L;L=[],$=new m;for(var Ue,qe=-1,Qe=Ie.length;++qe<Qe;)$.has(Ue=Ie[qe])||$.set(Ue,L.push(Ue));return ye[q.t].apply(ye,q.a)},ye.range=function(Ie){return arguments.length?(ne=Ie,ue=0,q={t:"range",a:arguments},ye):ne},ye.rangePoints=function(Ie,Ue){arguments.length<2&&(Ue=0);var qe=Ie[0],Qe=Ie[1],lt=L.length<2?(qe=(qe+Qe)/2,0):(Qe-qe)/(L.length-1+Ue);return ne=Le(qe+lt*Ue/2,lt),ue=0,q={t:"rangePoints",a:arguments},ye},ye.rangeRoundPoints=function(Ie,Ue){arguments.length<2&&(Ue=0);var qe=Ie[0],Qe=Ie[1],lt=L.length<2?(qe=Qe=Math.round((qe+Qe)/2),0):(Qe-qe)/(L.length-1+Ue)|0;return ne=Le(qe+Math.round(lt*Ue/2+(Qe-qe-(L.length-1+Ue)*lt)/2),lt),ue=0,q={t:"rangeRoundPoints",a:arguments},ye},ye.rangeBands=function(Ie,Ue,qe){arguments.length<2&&(Ue=0),arguments.length<3&&(qe=Ue);var Qe=Ie[1]<Ie[0],lt=Ie[Qe-0],ft=(Ie[1-Qe]-lt)/(L.length-Ue+2*qe);return ne=Le(lt+ft*qe,ft),Qe&&ne.reverse(),ue=ft*(1-Ue),q={t:"rangeBands",a:arguments},ye},ye.rangeRoundBands=function(Ie,Ue,qe){arguments.length<2&&(Ue=0),arguments.length<3&&(qe=Ue);var Qe=Ie[1]<Ie[0],lt=Ie[Qe-0],ft=Ie[1-Qe],xt=Math.floor((ft-lt)/(L.length-Ue+2*qe));return ne=Le(lt+Math.round((ft-lt-(L.length-Ue)*xt)/2),xt),Qe&&ne.reverse(),ue=Math.round(xt*(1-Ue)),q={t:"rangeRoundBands",a:arguments},ye},ye.rangeBand=function(){return ue},ye.rangeExtent=function(){return ks(q.a[0])},ye.copy=function(){return si(L,q)},ye.domain(L)}o.scale.pow=function(){return ji(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return si([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(es)},o.scale.category20=function(){return o.scale.ordinal().range(vo)},o.scale.category20b=function(){return o.scale.ordinal().range(Ci)},o.scale.category20c=function(){return o.scale.ordinal().range(Pi)};var es=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Zt),vo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Zt),Ci=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Zt),Pi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Zt);function sa(L,q){var $;function ne(){var ye=0,Le=q.length;for($=[];++ye<Le;)$[ye-1]=o.quantile(L,ye/Le);return ue}function ue(ye){if(!isNaN(ye=+ye))return q[o.bisect($,ye)]}return ue.domain=function(ye){return arguments.length?(L=ye.map(p).filter(c).sort(u),ne()):L},ue.range=function(ye){return arguments.length?(q=ye,ne()):q},ue.quantiles=function(){return $},ue.invertExtent=function(ye){return(ye=q.indexOf(ye))<0?[NaN,NaN]:[ye>0?$[ye-1]:L[0],ye<$.length?$[ye]:L[L.length-1]]},ue.copy=function(){return sa(L,q)},ne()}function Ui(L,q,$){var ne,ue;function ye(Ie){return $[Math.max(0,Math.min(ue,Math.floor(ne*(Ie-L))))]}function Le(){return ne=$.length/(q-L),ue=$.length-1,ye}return ye.domain=function(Ie){return arguments.length?(L=+Ie[0],q=+Ie[Ie.length-1],Le()):[L,q]},ye.range=function(Ie){return arguments.length?($=Ie,Le()):$},ye.invertExtent=function(Ie){return[Ie=(Ie=$.indexOf(Ie))<0?NaN:Ie/ne+L,Ie+1/ne]},ye.copy=function(){return Ui(L,q,$)},Le()}function wr(L,q){function $(ne){if(ne<=ne)return q[o.bisect(L,ne)]}return $.domain=function(ne){return arguments.length?(L=ne,$):L},$.range=function(ne){return arguments.length?(q=ne,$):q},$.invertExtent=function(ne){return ne=q.indexOf(ne),[L[ne-1],L[ne]]},$.copy=function(){return wr(L,q)},$}function Ss(L){function q($){return+$}return q.invert=q,q.domain=q.range=function($){return arguments.length?(L=$.map(q),q):L},q.ticks=function($){return qa(L,$)},q.tickFormat=function($,ne){return d3_scale_linearTickFormat(L,$,ne)},q.copy=function(){return Ss(L)},q}function $s(){return 0}o.scale.quantile=function(){return sa([],[])},o.scale.quantize=function(){return Ui(0,1,[0,1])},o.scale.threshold=function(){return wr([.5],[0,1])},o.scale.identity=function(){return Ss([0,1])},o.svg={},o.svg.arc=function(){var L=Ro,q=ts,$=$s,ne=zo,ue=fs,ye=dr,Le=Es;function Ie(){var qe=Math.max(0,+L.apply(this,arguments)),Qe=Math.max(0,+q.apply(this,arguments)),lt=ue.apply(this,arguments)-He,ft=ye.apply(this,arguments)-He,xt=Math.abs(ft-lt),St=lt>ft?0:1;if(Qe<qe&&(Tt=Qe,Qe=qe,qe=Tt),xt>=At)return Ue(Qe,St)+(qe?Ue(qe,1-St):"")+"Z";var Tt,zt,Et,Yt,qt,Ft,fn,dn,kn,Sn,Bn,$n,sr=0,qn=0,ir=[];if((Yt=(+Le.apply(this,arguments)||0)/2)&&(Et=ne===zo?Math.sqrt(qe*qe+Qe*Qe):+ne.apply(this,arguments),St||(qn*=-1),Qe&&(qn=Ge(Et/Qe*Math.sin(Yt))),qe&&(sr=Ge(Et/qe*Math.sin(Yt)))),Qe){qt=Qe*Math.cos(lt+qn),Ft=Qe*Math.sin(lt+qn),fn=Qe*Math.cos(ft-qn),dn=Qe*Math.sin(ft-qn);var vr=Math.abs(ft-lt-2*qn)<=Pt?0:1;if(qn&&mo(qt,Ft,fn,dn)===St^vr){var Ar=(lt+ft)/2;qt=Qe*Math.cos(Ar),Ft=Qe*Math.sin(Ar),fn=dn=null}}else qt=Ft=0;if(qe){kn=qe*Math.cos(ft-sr),Sn=qe*Math.sin(ft-sr),Bn=qe*Math.cos(lt+sr),$n=qe*Math.sin(lt+sr);var Kn=Math.abs(lt-ft+2*sr)<=Pt?0:1;if(sr&&mo(kn,Sn,Bn,$n)===1-St^Kn){var ar=(lt+ft)/2;kn=qe*Math.cos(ar),Sn=qe*Math.sin(ar),Bn=$n=null}}else kn=Sn=0;if(xt>$e&&(Tt=Math.min(Math.abs(Qe-qe)/2,+$.apply(this,arguments)))>.001){zt=qe<Qe^St?0:1;var br=Tt,lr=Tt;if(xt<Pt){var Tr=Bn==null?[kn,Sn]:fn==null?[qt,Ft]:bt([qt,Ft],[Bn,$n],[fn,dn],[kn,Sn]),Er=qt-Tr[0],Rr=Ft-Tr[1],Fr=fn-Tr[0],jr=dn-Tr[1],qr=1/Math.sin(Math.acos((Er*Fr+Rr*jr)/(Math.sqrt(Er*Er+Rr*Rr)*Math.sqrt(Fr*Fr+jr*jr)))/2),ua=Math.sqrt(Tr[0]*Tr[0]+Tr[1]*Tr[1]);lr=Math.min(Tt,(qe-ua)/(qr-1)),br=Math.min(Tt,(Qe-ua)/(qr+1))}if(fn!=null){var Aa=Fa(Bn==null?[kn,Sn]:[Bn,$n],[qt,Ft],Qe,br,St),ri=Fa([fn,dn],[kn,Sn],Qe,br,St);Tt===br?ir.push("M",Aa[0],"A",br,",",br," 0 0,",zt," ",Aa[1],"A",Qe,",",Qe," 0 ",1-St^mo(Aa[1][0],Aa[1][1],ri[1][0],ri[1][1]),",",St," ",ri[1],"A",br,",",br," 0 0,",zt," ",ri[0]):ir.push("M",Aa[0],"A",br,",",br," 0 1,",zt," ",ri[0])}else ir.push("M",qt,",",Ft);if(Bn!=null){var Ba=Fa([qt,Ft],[Bn,$n],qe,-lr,St),Ka=Fa([kn,Sn],fn==null?[qt,Ft]:[fn,dn],qe,-lr,St);Tt===lr?ir.push("L",Ka[0],"A",lr,",",lr," 0 0,",zt," ",Ka[1],"A",qe,",",qe," 0 ",St^mo(Ka[1][0],Ka[1][1],Ba[1][0],Ba[1][1]),",",1-St," ",Ba[1],"A",lr,",",lr," 0 0,",zt," ",Ba[0]):ir.push("L",Ka[0],"A",lr,",",lr," 0 0,",zt," ",Ba[0])}else ir.push("L",kn,",",Sn)}else ir.push("M",qt,",",Ft),fn!=null&&ir.push("A",Qe,",",Qe," 0 ",vr,",",St," ",fn,",",dn),ir.push("L",kn,",",Sn),Bn!=null&&ir.push("A",qe,",",qe," 0 ",Kn,",",1-St," ",Bn,",",$n);return ir.push("Z"),ir.join("")}function Ue(qe,Qe){return"M0,"+qe+"A"+qe+","+qe+" 0 1,"+Qe+" 0,"+-qe+"A"+qe+","+qe+" 0 1,"+Qe+" 0,"+qe}return Ie.innerRadius=function(qe){return arguments.length?(L=Rn(qe),Ie):L},Ie.outerRadius=function(qe){return arguments.length?(q=Rn(qe),Ie):q},Ie.cornerRadius=function(qe){return arguments.length?($=Rn(qe),Ie):$},Ie.padRadius=function(qe){return arguments.length?(ne=qe==zo?zo:Rn(qe),Ie):ne},Ie.startAngle=function(qe){return arguments.length?(ue=Rn(qe),Ie):ue},Ie.endAngle=function(qe){return arguments.length?(ye=Rn(qe),Ie):ye},Ie.padAngle=function(qe){return arguments.length?(Le=Rn(qe),Ie):Le},Ie.centroid=function(){var qe=(+L.apply(this,arguments)+ +q.apply(this,arguments))/2,Qe=(+ue.apply(this,arguments)+ +ye.apply(this,arguments))/2-He;return[Math.cos(Qe)*qe,Math.sin(Qe)*qe]},Ie};var zo="auto";function Ro(L){return L.innerRadius}function ts(L){return L.outerRadius}function fs(L){return L.startAngle}function dr(L){return L.endAngle}function Es(L){return L&&L.padAngle}function mo(L,q,$,ne){return(L-$)*q-(q-ne)*L>0?0:1}function Fa(L,q,$,ne,ue){var ye=L[0]-q[0],Le=L[1]-q[1],Ie=(ue?ne:-ne)/Math.sqrt(ye*ye+Le*Le),Ue=Ie*Le,qe=-Ie*ye,Qe=L[0]+Ue,lt=L[1]+qe,ft=q[0]+Ue,xt=q[1]+qe,St=(Qe+ft)/2,Tt=(lt+xt)/2,zt=ft-Qe,Et=xt-lt,Yt=zt*zt+Et*Et,qt=$-ne,Ft=Qe*xt-ft*lt,fn=(Et<0?-1:1)*Math.sqrt(Math.max(0,qt*qt*Yt-Ft*Ft)),dn=(Ft*Et-zt*fn)/Yt,kn=(-Ft*zt-Et*fn)/Yt,Sn=(Ft*Et+zt*fn)/Yt,Bn=(-Ft*zt+Et*fn)/Yt,$n=dn-St,sr=kn-Tt,qn=Sn-St,ir=Bn-Tt;return $n*$n+sr*sr>qn*qn+ir*ir&&(dn=Sn,kn=Bn),[[dn-Ue,kn-qe],[dn*$/qt,kn*$/qt]]}function Fo(){return!0}function Vi(L){var q=Hn,$=Nn,ne=Fo,ue=ni,ye=ue.key,Le=.7;function Ie(Ue){var qe,Qe=[],lt=[],ft=-1,xt=Ue.length,St=Rn(q),Tt=Rn($);function zt(){Qe.push("M",ue(L(lt),Le))}for(;++ft<xt;)ne.call(this,qe=Ue[ft],ft)?lt.push([+St.call(this,qe,ft),+Tt.call(this,qe,ft)]):lt.length&&(zt(),lt=[]);return lt.length&&zt(),Qe.length?Qe.join(""):null}return Ie.x=function(Ue){return arguments.length?(q=Ue,Ie):q},Ie.y=function(Ue){return arguments.length?($=Ue,Ie):$},Ie.defined=function(Ue){return arguments.length?(ne=Ue,Ie):ne},Ie.interpolate=function(Ue){return arguments.length?(ye=typeof Ue=="function"?ue=Ue:(ue=Oi.get(Ue)||ni).key,Ie):ye},Ie.tension=function(Ue){return arguments.length?(Le=Ue,Ie):Le},Ie}o.svg.line=function(){return Vi(D)};var Oi=o.map({linear:ni,"linear-closed":no,step:function(L){for(var q=0,$=L.length,ne=L[0],ue=[ne[0],",",ne[1]];++q<$;)ue.push("H",(ne[0]+(ne=L[q])[0])/2,"V",ne[1]);return $>1&&ue.push("H",ne[0]),ue.join("")},"step-before":Ii,"step-after":yo,basis:Hr,"basis-open":function(L){if(L.length<4)return ni(L);for(var q,$=[],ne=-1,ue=L.length,ye=[0],Le=[0];++ne<3;)q=L[ne],ye.push(q[0]),Le.push(q[1]);for($.push(Ha(ui,ye)+","+Ha(ui,Le)),--ne;++ne<ue;)q=L[ne],ye.shift(),ye.push(q[0]),Le.shift(),Le.push(q[1]),hs($,ye,Le);return $.join("")},"basis-closed":function(L){for(var q,$,ne=-1,ue=L.length,ye=ue+4,Le=[],Ie=[];++ne<4;)$=L[ne%ue],Le.push($[0]),Ie.push($[1]);for(q=[Ha(ui,Le),",",Ha(ui,Ie)],--ne;++ne<ye;)$=L[ne%ue],Le.shift(),Le.push($[0]),Ie.shift(),Ie.push($[1]),hs(q,Le,Ie);return q.join("")},bundle:function(L,q){var $=L.length-1;if($)for(var ne,ue,ye=L[0][0],Le=L[0][1],Ie=L[$][0]-ye,Ue=L[$][1]-Le,qe=-1;++qe<=$;)ue=qe/$,(ne=L[qe])[0]=q*ne[0]+(1-q)*(ye+ue*Ie),ne[1]=q*ne[1]+(1-q)*(Le+ue*Ue);return Hr(L)},cardinal:function(L,q){return L.length<3?ni(L):L[0]+Ls(L,Bo(L,q))},"cardinal-open":function(L,q){return L.length<4?ni(L):L[1]+Ls(L.slice(1,-1),Bo(L,q))},"cardinal-closed":function(L,q){return L.length<3?no(L):L[0]+Ls((L.push(L[0]),L),Bo([L[L.length-2]].concat(L,[L[1]]),q))},monotone:function(L){return L.length<3?ni(L):L[0]+Ls(L,function(q){for(var $,ne,ue,ye,Le=[],Ie=function(Qe){for(var lt=0,ft=Qe.length-1,xt=[],St=Qe[0],Tt=Qe[1],zt=xt[0]=ps(St,Tt);++lt<ft;)xt[lt]=(zt+(zt=ps(St=Tt,Tt=Qe[lt+1])))/2;return xt[lt]=zt,xt}(q),Ue=-1,qe=q.length-1;++Ue<qe;)$=ps(q[Ue],q[Ue+1]),v($)<$e?Ie[Ue]=Ie[Ue+1]=0:(ye=(ne=Ie[Ue]/$)*ne+(ue=Ie[Ue+1]/$)*ue)>9&&(ye=3*$/Math.sqrt(ye),Ie[Ue]=ye*ne,Ie[Ue+1]=ye*ue);for(Ue=-1;++Ue<=qe;)ye=(q[Math.min(qe,Ue+1)][0]-q[Math.max(0,Ue-1)][0])/(6*(1+Ie[Ue]*Ie[Ue])),Le.push([ye||0,Ie[Ue]*ye||0]);return Le}(L))}});function ni(L){return L.length>1?L.join("L"):L+"Z"}function no(L){return L.join("L")+"Z"}function Ii(L){for(var q=0,$=L.length,ne=L[0],ue=[ne[0],",",ne[1]];++q<$;)ue.push("V",(ne=L[q])[1],"H",ne[0]);return ue.join("")}function yo(L){for(var q=0,$=L.length,ne=L[0],ue=[ne[0],",",ne[1]];++q<$;)ue.push("H",(ne=L[q])[0],"V",ne[1]);return ue.join("")}function Ls(L,q){if(q.length<1||L.length!=q.length&&L.length!=q.length+2)return ni(L);var $=L.length!=q.length,ne="",ue=L[0],ye=L[1],Le=q[0],Ie=Le,Ue=1;if($&&(ne+="Q"+(ye[0]-2*Le[0]/3)+","+(ye[1]-2*Le[1]/3)+","+ye[0]+","+ye[1],ue=L[1],Ue=2),q.length>1){Ie=q[1],ye=L[Ue],Ue++,ne+="C"+(ue[0]+Le[0])+","+(ue[1]+Le[1])+","+(ye[0]-Ie[0])+","+(ye[1]-Ie[1])+","+ye[0]+","+ye[1];for(var qe=2;qe<q.length;qe++,Ue++)ye=L[Ue],Ie=q[qe],ne+="S"+(ye[0]-Ie[0])+","+(ye[1]-Ie[1])+","+ye[0]+","+ye[1]}if($){var Qe=L[Ue];ne+="Q"+(ye[0]+2*Ie[0]/3)+","+(ye[1]+2*Ie[1]/3)+","+Qe[0]+","+Qe[1]}return ne}function Bo(L,q){for(var $,ne=[],ue=(1-q)/2,ye=L[0],Le=L[1],Ie=1,Ue=L.length;++Ie<Ue;)$=ye,ye=Le,Le=L[Ie],ne.push([ue*(Le[0]-$[0]),ue*(Le[1]-$[1])]);return ne}function Hr(L){if(L.length<3)return ni(L);var q=1,$=L.length,ne=L[0],ue=ne[0],ye=ne[1],Le=[ue,ue,ue,(ne=L[1])[0]],Ie=[ye,ye,ye,ne[1]],Ue=[ue,",",ye,"L",Ha(ui,Le),",",Ha(ui,Ie)];for(L.push(L[$-1]);++q<=$;)ne=L[q],Le.shift(),Le.push(ne[0]),Ie.shift(),Ie.push(ne[1]),hs(Ue,Le,Ie);return L.pop(),Ue.push("L",ne),Ue.join("")}function Ha(L,q){return L[0]*q[0]+L[1]*q[1]+L[2]*q[2]+L[3]*q[3]}Oi.forEach(function(L,q){q.key=L,q.closed=/-closed$/.test(L)});var li=[0,2/3,1/3,0],ro=[0,1/3,2/3,0],ui=[0,1/6,2/3,1/6];function hs(L,q,$){L.push("C",Ha(li,q),",",Ha(li,$),",",Ha(ro,q),",",Ha(ro,$),",",Ha(ui,q),",",Ha(ui,$))}function ps(L,q){return(q[1]-L[1])/(q[0]-L[0])}function ci(L){for(var q,$,ne,ue=-1,ye=L.length;++ue<ye;)$=(q=L[ue])[0],ne=q[1]-He,q[0]=$*Math.cos(ne),q[1]=$*Math.sin(ne);return L}function Vr(L){var q=Hn,$=Hn,ne=0,ue=Nn,ye=Fo,Le=ni,Ie=Le.key,Ue=Le,qe="L",Qe=.7;function lt(ft){var xt,St,Tt,zt=[],Et=[],Yt=[],qt=-1,Ft=ft.length,fn=Rn(q),dn=Rn(ne),kn=q===$?function(){return St}:Rn($),Sn=ne===ue?function(){return Tt}:Rn(ue);function Bn(){zt.push("M",Le(L(Yt),Qe),qe,Ue(L(Et.reverse()),Qe),"Z")}for(;++qt<Ft;)ye.call(this,xt=ft[qt],qt)?(Et.push([St=+fn.call(this,xt,qt),Tt=+dn.call(this,xt,qt)]),Yt.push([+kn.call(this,xt,qt),+Sn.call(this,xt,qt)])):Et.length&&(Bn(),Et=[],Yt=[]);return Et.length&&Bn(),zt.length?zt.join(""):null}return lt.x=function(ft){return arguments.length?(q=$=ft,lt):$},lt.x0=function(ft){return arguments.length?(q=ft,lt):q},lt.x1=function(ft){return arguments.length?($=ft,lt):$},lt.y=function(ft){return arguments.length?(ne=ue=ft,lt):ue},lt.y0=function(ft){return arguments.length?(ne=ft,lt):ne},lt.y1=function(ft){return arguments.length?(ue=ft,lt):ue},lt.defined=function(ft){return arguments.length?(ye=ft,lt):ye},lt.interpolate=function(ft){return arguments.length?(Ie=typeof ft=="function"?Le=ft:(Le=Oi.get(ft)||ni).key,Ue=Le.reverse||Le,qe=Le.closed?"M":"L",lt):Ie},lt.tension=function(ft){return arguments.length?(Qe=ft,lt):Qe},lt}function ao(L){return L.source}function ns(L){return L.target}function qi(L){return L.radius}function ds(L){return[L.x,L.y]}function gs(){return 64}function Hi(){return"circle"}function la(L){var q=Math.sqrt(L/Pt);return"M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q+"Z"}o.svg.line.radial=function(){var L=Vi(ci);return L.radius=L.x,delete L.x,L.angle=L.y,delete L.y,L},Ii.reverse=yo,yo.reverse=Ii,o.svg.area=function(){return Vr(D)},o.svg.area.radial=function(){var L=Vr(ci);return L.radius=L.x,delete L.x,L.innerRadius=L.x0,delete L.x0,L.outerRadius=L.x1,delete L.x1,L.angle=L.y,delete L.y,L.startAngle=L.y0,delete L.y0,L.endAngle=L.y1,delete L.y1,L},o.svg.chord=function(){var L=ao,q=ns,$=qi,ne=fs,ue=dr;function ye(qe,Qe){var lt,ft,xt=Le(this,L,qe,Qe),St=Le(this,q,qe,Qe);return"M"+xt.p0+Ie(xt.r,xt.p1,xt.a1-xt.a0)+(ft=St,((lt=xt).a0==ft.a0&&lt.a1==ft.a1?Ue(xt.r,xt.p1,xt.r,xt.p0):Ue(xt.r,xt.p1,St.r,St.p0)+Ie(St.r,St.p1,St.a1-St.a0)+Ue(St.r,St.p1,xt.r,xt.p0))+"Z")}function Le(qe,Qe,lt,ft){var xt=Qe.call(qe,lt,ft),St=$.call(qe,xt,ft),Tt=ne.call(qe,xt,ft)-He,zt=ue.call(qe,xt,ft)-He;return{r:St,a0:Tt,a1:zt,p0:[St*Math.cos(Tt),St*Math.sin(Tt)],p1:[St*Math.cos(zt),St*Math.sin(zt)]}}function Ie(qe,Qe,lt){return"A"+qe+","+qe+" 0 "+ +(lt>Pt)+",1 "+Qe}function Ue(qe,Qe,lt,ft){return"Q 0,0 "+ft}return ye.radius=function(qe){return arguments.length?($=Rn(qe),ye):$},ye.source=function(qe){return arguments.length?(L=Rn(qe),ye):L},ye.target=function(qe){return arguments.length?(q=Rn(qe),ye):q},ye.startAngle=function(qe){return arguments.length?(ne=Rn(qe),ye):ne},ye.endAngle=function(qe){return arguments.length?(ue=Rn(qe),ye):ue},ye},o.svg.diagonal=function(){var L=ao,q=ns,$=ds;function ne(ue,ye){var Le=L.call(this,ue,ye),Ie=q.call(this,ue,ye),Ue=(Le.y+Ie.y)/2,qe=[Le,{x:Le.x,y:Ue},{x:Ie.x,y:Ue},Ie];return"M"+(qe=qe.map($))[0]+"C"+qe[1]+" "+qe[2]+" "+qe[3]}return ne.source=function(ue){return arguments.length?(L=Rn(ue),ne):L},ne.target=function(ue){return arguments.length?(q=Rn(ue),ne):q},ne.projection=function(ue){return arguments.length?($=ue,ne):$},ne},o.svg.diagonal.radial=function(){var L=o.svg.diagonal(),q=ds,$=L.projection;return L.projection=function(ne){return arguments.length?$(function(ue){return function(){var ye=ue.apply(this,arguments),Le=ye[0],Ie=ye[1]-He;return[Le*Math.cos(Ie),Le*Math.sin(Ie)]}}(q=ne)):q},L},o.svg.symbol=function(){var L=Hi,q=gs;function $(ne,ue){return(rs.get(L.call(this,ne,ue))||la)(q.call(this,ne,ue))}return $.type=function(ne){return arguments.length?(L=Rn(ne),$):L},$.size=function(ne){return arguments.length?(q=Rn(ne),$):q},$};var rs=o.map({circle:la,cross:function(L){var q=Math.sqrt(L/5)/2;return"M"+-3*q+","+-q+"H"+-q+"V"+-3*q+"H"+q+"V"+-q+"H"+3*q+"V"+q+"H"+q+"V"+3*q+"H"+-q+"V"+q+"H"+-3*q+"Z"},diamond:function(L){var q=Math.sqrt(L/(2*Cr)),$=q*Cr;return"M0,"+-q+"L"+$+",0 0,"+q+" "+-$+",0Z"},square:function(L){var q=Math.sqrt(L)/2;return"M"+-q+","+-q+"L"+q+","+-q+" "+q+","+q+" "+-q+","+q+"Z"},"triangle-down":function(L){var q=Math.sqrt(L/kr),$=q*kr/2;return"M0,"+$+"L"+q+","+-$+" "+-q+","+-$+"Z"},"triangle-up":function(L){var q=Math.sqrt(L/kr),$=q*kr/2;return"M0,"+-$+"L"+q+","+$+" "+-q+","+$+"Z"}});o.svg.symbolTypes=rs.keys();var kr=Math.sqrt(3),Cr=Math.tan(30*Ze);he.transition=function(L){for(var q,$,ne=La||++fl,ue=da(L),ye=[],Le=oo||{time:Date.now(),ease:$i,delay:0,duration:250},Ie=-1,Ue=this.length;++Ie<Ue;){ye.push(q=[]);for(var qe=this[Ie],Qe=-1,lt=qe.length;++Qe<lt;)($=qe[Qe])&&gi($,Qe,ue,ne,Le),q.push($)}return xo(ye,ue,ne)},he.interrupt=function(L){return this.each(L==null?wi:io(da(L)))};var wi=io(da());function io(L){return function(){var q,$,ne;(q=this[L])&&(ne=q[$=q.active])&&(ne.timer.c=null,ne.timer.t=NaN,--q.count?delete q[$]:delete this[L],q.active+=.5,ne.event&&ne.event.interrupt.call(this,this.__data__,ne.index))}}function xo(L,q,$){return Z(L,Qr),L.namespace=q,L.id=$,L}var La,oo,Qr=[],fl=0;function Ti(L,q,$,ne){var ue=L.id,ye=L.namespace;return me(L,typeof $=="function"?function(Le,Ie,Ue){Le[ye][ue].tween.set(q,ne($.call(Le,Le.__data__,Ie,Ue)))}:($=ne($),function(Le){Le[ye][ue].tween.set(q,$)}))}function na(L){return L==null&&(L=""),function(){this.textContent=L}}function da(L){return L==null?"__transition__":"__transition_"+L+"__"}function gi(L,q,$,ne,ue){var ye,Le,Ie,Ue,qe,Qe=L[$]||(L[$]={active:0,count:0}),lt=Qe[ne];function ft(St){var Tt=Qe.active,zt=Qe[Tt];for(var Et in zt&&(zt.timer.c=null,zt.timer.t=NaN,--Qe.count,delete Qe[Tt],zt.event&&zt.event.interrupt.call(L,L.__data__,zt.index)),Qe)if(+Et<ne){var Yt=Qe[Et];Yt.timer.c=null,Yt.timer.t=NaN,--Qe.count,delete Qe[Et]}Le.c=xt,en(function(){return Le.c&&xt(St||1)&&(Le.c=null,Le.t=NaN),1},0,ye),Qe.active=ne,lt.event&&lt.event.start.call(L,L.__data__,q),qe=[],lt.tween.forEach(function(qt,Ft){(Ft=Ft.call(L,L.__data__,q))&&qe.push(Ft)}),Ue=lt.ease,Ie=lt.duration}function xt(St){for(var Tt=St/Ie,zt=Ue(Tt),Et=qe.length;Et>0;)qe[--Et].call(L,zt);if(Tt>=1)return lt.event&&lt.event.end.call(L,L.__data__,q),--Qe.count?delete Qe[ne]:delete L[$],1}lt||(ye=ue.time,Le=en(function(St){var Tt=lt.delay;if(Le.t=Tt+ye,Tt<=St)return ft(St-Tt);Le.c=ft},0,ye),lt=Qe[ne]={tween:new m,time:ye,timer:Le,delay:ue.delay,duration:ue.duration,ease:ue.ease,index:q},ue=null,++Qe.count)}Qr.call=he.call,Qr.empty=he.empty,Qr.node=he.node,Qr.size=he.size,o.transition=function(L,q){return L&&L.transition?La?L.transition(q):L:o.selection().transition(L)},o.transition.prototype=Qr,Qr.select=function(L){var q,$,ne,ue=this.id,ye=this.namespace,Le=[];L=pe(L);for(var Ie=-1,Ue=this.length;++Ie<Ue;){Le.push(q=[]);for(var qe=this[Ie],Qe=-1,lt=qe.length;++Qe<lt;)(ne=qe[Qe])&&($=L.call(ne,ne.__data__,Qe,Ie))?("__data__"in ne&&($.__data__=ne.__data__),gi($,Qe,ye,ue,ne[ye][ue]),q.push($)):q.push(null)}return xo(Le,ye,ue)},Qr.selectAll=function(L){var q,$,ne,ue,ye,Le=this.id,Ie=this.namespace,Ue=[];L=xe(L);for(var qe=-1,Qe=this.length;++qe<Qe;)for(var lt=this[qe],ft=-1,xt=lt.length;++ft<xt;)if(ne=lt[ft]){ye=ne[Ie][Le],$=L.call(ne,ne.__data__,ft,qe),Ue.push(q=[]);for(var St=-1,Tt=$.length;++St<Tt;)(ue=$[St])&&gi(ue,St,Ie,Le,ye),q.push(ue)}return xo(Ue,Ie,Le)},Qr.filter=function(L){var q,$,ne=[];typeof L!="function"&&(L=De(L));for(var ue=0,ye=this.length;ue<ye;ue++){ne.push(q=[]);for(var Le,Ie=0,Ue=(Le=this[ue]).length;Ie<Ue;Ie++)($=Le[Ie])&&L.call($,$.__data__,Ie,ue)&&q.push($)}return xo(ne,this.namespace,this.id)},Qr.tween=function(L,q){var $=this.id,ne=this.namespace;return arguments.length<2?this.node()[ne][$].tween.get(L):me(this,q==null?function(ue){ue[ne][$].tween.remove(L)}:function(ue){ue[ne][$].tween.set(L,q)})},Qr.attr=function(L,q){if(arguments.length<2){for(q in L)this.attr(q,L[q]);return this}var $=L=="transform"?sl:Mi,ne=o.ns.qualify(L);function ue(){this.removeAttribute(ne)}function ye(){this.removeAttributeNS(ne.space,ne.local)}return Ti(this,"attr."+L,q,ne.local?function(Le){return Le==null?ye:(Le+="",function(){var Ie,Ue=this.getAttributeNS(ne.space,ne.local);return Ue!==Le&&(Ie=$(Ue,Le),function(qe){this.setAttributeNS(ne.space,ne.local,Ie(qe))})})}:function(Le){return Le==null?ue:(Le+="",function(){var Ie,Ue=this.getAttribute(ne);return Ue!==Le&&(Ie=$(Ue,Le),function(qe){this.setAttribute(ne,Ie(qe))})})})},Qr.attrTween=function(L,q){var $=o.ns.qualify(L);return this.tween("attr."+L,$.local?function(ne,ue){var ye=q.call(this,ne,ue,this.getAttributeNS($.space,$.local));return ye&&function(Le){this.setAttributeNS($.space,$.local,ye(Le))}}:function(ne,ue){var ye=q.call(this,ne,ue,this.getAttribute($));return ye&&function(Le){this.setAttribute($,ye(Le))}})},Qr.style=function(L,q,$){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for($ in ne<2&&(q=""),L)this.style($,L[$],q);return this}$=""}function ue(){this.style.removeProperty(L)}return Ti(this,"style."+L,q,function(ye){return ye==null?ue:(ye+="",function(){var Le,Ie=t(this).getComputedStyle(this,null).getPropertyValue(L);return Ie!==ye&&(Le=Mi(Ie,ye),function(Ue){this.style.setProperty(L,Le(Ue),$)})})})},Qr.styleTween=function(L,q,$){return arguments.length<3&&($=""),this.tween("style."+L,function(ne,ue){var ye=q.call(this,ne,ue,t(this).getComputedStyle(this,null).getPropertyValue(L));return ye&&function(Le){this.style.setProperty(L,ye(Le),$)}})},Qr.text=function(L){return Ti(this,"text",L,na)},Qr.remove=function(){var L=this.namespace;return this.each("end.transition",function(){var q;this[L].count<2&&(q=this.parentNode)&&q.removeChild(this)})},Qr.ease=function(L){var q=this.id,$=this.namespace;return arguments.length<1?this.node()[$][q].ease:(typeof L!="function"&&(L=o.ease.apply(o,arguments)),me(this,function(ne){ne[$][q].ease=L}))},Qr.delay=function(L){var q=this.id,$=this.namespace;return arguments.length<1?this.node()[$][q].delay:me(this,typeof L=="function"?function(ne,ue,ye){ne[$][q].delay=+L.call(ne,ne.__data__,ue,ye)}:(L=+L,function(ne){ne[$][q].delay=L}))},Qr.duration=function(L){var q=this.id,$=this.namespace;return arguments.length<1?this.node()[$][q].duration:me(this,typeof L=="function"?function(ne,ue,ye){ne[$][q].duration=Math.max(1,L.call(ne,ne.__data__,ue,ye))}:(L=Math.max(1,L),function(ne){ne[$][q].duration=L}))},Qr.each=function(L,q){var $=this.id,ne=this.namespace;if(arguments.length<2){var ue=oo,ye=La;try{La=$,me(this,function(Le,Ie,Ue){oo=Le[ne][$],L.call(Le,Le.__data__,Ie,Ue)})}finally{oo=ue,La=ye}}else me(this,function(Le){var Ie=Le[ne][$];(Ie.event||(Ie.event=o.dispatch("start","end","interrupt"))).on(L,q)});return this},Qr.transition=function(){for(var L,q,$,ne=this.id,ue=++fl,ye=this.namespace,Le=[],Ie=0,Ue=this.length;Ie<Ue;Ie++){Le.push(L=[]);for(var qe,Qe=0,lt=(qe=this[Ie]).length;Qe<lt;Qe++)(q=qe[Qe])&&gi(q,Qe,ye,ue,{time:($=q[ye][ne]).time,ease:$.ease,delay:$.delay+$.duration,duration:$.duration}),L.push(q)}return xo(Le,ye,ue)},o.svg.axis=function(){var L,q=o.scale.linear(),$=No,ne=6,ue=6,ye=3,Le=[10],Ie=null;function Ue(qe){qe.each(function(){var Qe,lt=o.select(this),ft=this.__chart__||q,xt=this.__chart__=q.copy(),St=Ie??(xt.ticks?xt.ticks.apply(xt,Le):xt.domain()),Tt=L??(xt.tickFormat?xt.tickFormat.apply(xt,Le):D),zt=lt.selectAll(".tick").data(St,xt),Et=zt.enter().insert("g",".domain").attr("class","tick").style("opacity",$e),Yt=o.transition(zt.exit()).style("opacity",$e).remove(),qt=o.transition(zt.order()).style("opacity",1),Ft=Math.max(ne,0)+ye,fn=As(xt),dn=lt.selectAll(".domain").data([0]),kn=(dn.enter().append("path").attr("class","domain"),o.transition(dn));Et.append("line"),Et.append("text");var Sn,Bn,$n,sr,qn=Et.select("line"),ir=qt.select("line"),vr=zt.select("text").text(Tt),Ar=Et.select("text"),Kn=qt.select("text"),ar=$==="top"||$==="left"?-1:1;if($==="bottom"||$==="top"?(Qe=Xe,Sn="x",$n="y",Bn="x2",sr="y2",vr.attr("dy",ar<0?"0em":".71em").style("text-anchor","middle"),kn.attr("d","M"+fn[0]+","+ar*ue+"V0H"+fn[1]+"V"+ar*ue)):(Qe=Je,Sn="y",$n="x",Bn="y2",sr="x2",vr.attr("dy",".32em").style("text-anchor",ar<0?"end":"start"),kn.attr("d","M"+ar*ue+","+fn[0]+"H0V"+fn[1]+"H"+ar*ue)),qn.attr(sr,ar*ne),Ar.attr($n,ar*Ft),ir.attr(Bn,0).attr(sr,ar*ne),Kn.attr(Sn,0).attr($n,ar*Ft),xt.rangeBand){var br=xt,lr=br.rangeBand()/2;ft=xt=function(Tr){return br(Tr)+lr}}else ft.rangeBand?ft=xt:Yt.call(Qe,xt,ft);Et.call(Qe,ft,xt),qt.call(Qe,xt,xt)})}return Ue.scale=function(qe){return arguments.length?(q=qe,Ue):q},Ue.orient=function(qe){return arguments.length?($=qe in Qs?qe+"":No,Ue):$},Ue.ticks=function(){return arguments.length?(Le=b(arguments),Ue):Le},Ue.tickValues=function(qe){return arguments.length?(Ie=qe,Ue):Ie},Ue.tickFormat=function(qe){return arguments.length?(L=qe,Ue):L},Ue.tickSize=function(qe){var Qe=arguments.length;return Qe?(ne=+qe,ue=+arguments[Qe-1],Ue):ne},Ue.innerTickSize=function(qe){return arguments.length?(ne=+qe,Ue):ne},Ue.outerTickSize=function(qe){return arguments.length?(ue=+qe,Ue):ue},Ue.tickPadding=function(qe){return arguments.length?(ye=+qe,Ue):ye},Ue.tickSubdivide=function(){return arguments.length&&Ue},Ue};var No="bottom",Qs={top:1,right:1,bottom:1,left:1};function Xe(L,q,$){L.attr("transform",function(ne){var ue=q(ne);return"translate("+(isFinite(ue)?ue:$(ne))+",0)"})}function Je(L,q,$){L.attr("transform",function(ne){var ue=q(ne);return"translate(0,"+(isFinite(ue)?ue:$(ne))+")"})}o.svg.brush=function(){var L,q,$=K(Qe,"brushstart","brush","brushend"),ne=null,ue=null,ye=[0,0],Le=[0,0],Ie=!0,Ue=!0,qe=B[0];function Qe(Tt){Tt.each(function(){var zt=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",St).on("touchstart.brush",St),Et=zt.selectAll(".background").data([0]);Et.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),zt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Yt=zt.selectAll(".resize").data(qe,D);Yt.exit().remove(),Yt.enter().append("g").attr("class",function(dn){return"resize "+dn}).style("cursor",function(dn){return ot[dn]}).append("rect").attr("x",function(dn){return/[ew]$/.test(dn)?-3:null}).attr("y",function(dn){return/^[ns]/.test(dn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Yt.style("display",Qe.empty()?"none":null);var qt,Ft=o.transition(zt),fn=o.transition(Et);ne&&(qt=As(ne),fn.attr("x",qt[0]).attr("width",qt[1]-qt[0]),ft(Ft)),ue&&(qt=As(ue),fn.attr("y",qt[0]).attr("height",qt[1]-qt[0]),xt(Ft)),lt(Ft)})}function lt(Tt){Tt.selectAll(".resize").attr("transform",function(zt){return"translate("+ye[+/e$/.test(zt)]+","+Le[+/^s/.test(zt)]+")"})}function ft(Tt){Tt.select(".extent").attr("x",ye[0]),Tt.selectAll(".extent,.n>rect,.s>rect").attr("width",ye[1]-ye[0])}function xt(Tt){Tt.select(".extent").attr("y",Le[0]),Tt.selectAll(".extent,.e>rect,.w>rect").attr("height",Le[1]-Le[0])}function St(){var Tt,zt,Et=this,Yt=o.select(o.event.target),qt=$.of(Et,arguments),Ft=o.select(Et),fn=Yt.datum(),dn=!/^(n|s)$/.test(fn)&&ne,kn=!/^(e|w)$/.test(fn)&&ue,Sn=Yt.classed("extent"),Bn=dt(Et),$n=o.mouse(Et),sr=o.select(t(Et)).on("keydown.brush",function(){o.event.keyCode==32&&(Sn||(Tt=null,$n[0]-=ye[1],$n[1]-=Le[1],Sn=2),J())}).on("keyup.brush",function(){o.event.keyCode==32&&Sn==2&&($n[0]+=ye[1],$n[1]+=Le[1],Sn=0,J())});if(o.event.changedTouches?sr.on("touchmove.brush",vr).on("touchend.brush",Kn):sr.on("mousemove.brush",vr).on("mouseup.brush",Kn),Ft.interrupt().selectAll("*").interrupt(),Sn)$n[0]=ye[0]-$n[0],$n[1]=Le[0]-$n[1];else if(fn){var qn=+/w$/.test(fn),ir=+/^n/.test(fn);zt=[ye[1-qn]-$n[0],Le[1-ir]-$n[1]],$n[0]=ye[qn],$n[1]=Le[ir]}else o.event.altKey&&(Tt=$n.slice());function vr(){var ar=o.mouse(Et),br=!1;zt&&(ar[0]+=zt[0],ar[1]+=zt[1]),Sn||(o.event.altKey?(Tt||(Tt=[(ye[0]+ye[1])/2,(Le[0]+Le[1])/2]),$n[0]=ye[+(ar[0]<Tt[0])],$n[1]=Le[+(ar[1]<Tt[1])]):Tt=null),dn&&Ar(ar,ne,0)&&(ft(Ft),br=!0),kn&&Ar(ar,ue,1)&&(xt(Ft),br=!0),br&&(lt(Ft),qt({type:"brush",mode:Sn?"move":"resize"}))}function Ar(ar,br,lr){var Tr,Er,Rr=As(br),Fr=Rr[0],jr=Rr[1],qr=$n[lr],ua=lr?Le:ye,Aa=ua[1]-ua[0];if(Sn&&(Fr-=qr,jr-=Aa+qr),Tr=(lr?Ue:Ie)?Math.max(Fr,Math.min(jr,ar[lr])):ar[lr],Sn?Er=(Tr+=qr)+Aa:(Tt&&(qr=Math.max(Fr,Math.min(jr,2*Tt[lr]-Tr))),qr<Tr?(Er=Tr,Tr=qr):Er=qr),ua[0]!=Tr||ua[1]!=Er)return lr?q=null:L=null,ua[0]=Tr,ua[1]=Er,!0}function Kn(){vr(),Ft.style("pointer-events","all").selectAll(".resize").style("display",Qe.empty()?"none":null),o.select("body").style("cursor",null),sr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Bn(),qt({type:"brushend"})}Ft.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",Yt.style("cursor")),qt({type:"brushstart"}),vr()}return Qe.event=function(Tt){Tt.each(function(){var zt=$.of(this,arguments),Et={x:ye,y:Le,i:L,j:q},Yt=this.__chart__||Et;this.__chart__=Et,La?o.select(this).transition().each("start.brush",function(){L=Yt.i,q=Yt.j,ye=Yt.x,Le=Yt.y,zt({type:"brushstart"})}).tween("brush:brush",function(){var qt=Si(ye,Et.x),Ft=Si(Le,Et.y);return L=q=null,function(fn){ye=Et.x=qt(fn),Le=Et.y=Ft(fn),zt({type:"brush",mode:"resize"})}}).each("end.brush",function(){L=Et.i,q=Et.j,zt({type:"brush",mode:"resize"}),zt({type:"brushend"})}):(zt({type:"brushstart"}),zt({type:"brush",mode:"resize"}),zt({type:"brushend"}))})},Qe.x=function(Tt){return arguments.length?(qe=B[!(ne=Tt)<<1|!ue],Qe):ne},Qe.y=function(Tt){return arguments.length?(qe=B[!ne<<1|!(ue=Tt)],Qe):ue},Qe.clamp=function(Tt){return arguments.length?(ne&&ue?(Ie=!!Tt[0],Ue=!!Tt[1]):ne?Ie=!!Tt:ue&&(Ue=!!Tt),Qe):ne&&ue?[Ie,Ue]:ne?Ie:ue?Ue:null},Qe.extent=function(Tt){var zt,Et,Yt,qt,Ft;return arguments.length?(ne&&(zt=Tt[0],Et=Tt[1],ue&&(zt=zt[0],Et=Et[0]),L=[zt,Et],ne.invert&&(zt=ne(zt),Et=ne(Et)),Et<zt&&(Ft=zt,zt=Et,Et=Ft),zt==ye[0]&&Et==ye[1]||(ye=[zt,Et])),ue&&(Yt=Tt[0],qt=Tt[1],ne&&(Yt=Yt[1],qt=qt[1]),q=[Yt,qt],ue.invert&&(Yt=ue(Yt),qt=ue(qt)),qt<Yt&&(Ft=Yt,Yt=qt,qt=Ft),Yt==Le[0]&&qt==Le[1]||(Le=[Yt,qt])),Qe):(ne&&(L?(zt=L[0],Et=L[1]):(zt=ye[0],Et=ye[1],ne.invert&&(zt=ne.invert(zt),Et=ne.invert(Et)),Et<zt&&(Ft=zt,zt=Et,Et=Ft))),ue&&(q?(Yt=q[0],qt=q[1]):(Yt=Le[0],qt=Le[1],ue.invert&&(Yt=ue.invert(Yt),qt=ue.invert(qt)),qt<Yt&&(Ft=Yt,Yt=qt,qt=Ft))),ne&&ue?[[zt,Yt],[Et,qt]]:ne?[zt,Et]:ue&&[Yt,qt])},Qe.clear=function(){return Qe.empty()||(ye=[0,0],Le=[0,0],L=q=null),Qe},Qe.empty=function(){return!!ne&&ye[0]==ye[1]||!!ue&&Le[0]==Le[1]},o.rebind(Qe,$,"on")};var ot={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},B=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function G(L){return JSON.parse(L.responseText)}function H(L){var q=h.createRange();return q.selectNode(h.body),q.createContextualFragment(L.responseText)}o.text=In(function(L){return L.responseText}),o.json=function(L,q){return Vn(L,"application/json",G,q)},o.html=function(L,q){return Vn(L,"text/html",H,q)},o.xml=In(function(L){return L.responseXML}),(k=typeof(M=o)=="function"?M.call(z,e,z,ee):M)===void 0||(ee.exports=k)}).apply(self)},3480:function(ee){ee.exports=function(){var z,e,M;function k(o,T){if(z)if(e){var b="var sharedChunk = {}; ("+z+")(sharedChunk); ("+e+")(sharedChunk);",h={};z(h),M=T(h),typeof window<"u"&&(M.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}else e=T;else z=T}return k(0,function(o){function T(A,I){return A(I={exports:{}},I.exports),I.exports}var b="1.13.4",h=s;function s(A,I,Y,le){this.cx=3*A,this.bx=3*(Y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(le-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=le,this.p2x=Y,this.p2y=le}s.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},s.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},s.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},s.prototype.solveCurveX=function(A,I){var Y,le,ke,Ce,je;for(I===void 0&&(I=1e-6),ke=A,je=0;je<8;je++){if(Ce=this.sampleCurveX(ke)-A,Math.abs(Ce)<I)return ke;var Ke=this.sampleCurveDerivativeX(ke);if(Math.abs(Ke)<1e-6)break;ke-=Ce/Ke}if((ke=A)<(Y=0))return Y;if(ke>(le=1))return le;for(;Y<le;){if(Ce=this.sampleCurveX(ke),Math.abs(Ce-A)<I)return ke;A>Ce?Y=ke:le=ke,ke=.5*(le-Y)+Y}return ke},s.prototype.solve=function(A,I){return this.sampleCurveY(this.solveCurveX(A,I))};var t=a;function a(A,I){this.x=A,this.y=I}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,I){return this.clone()._rotateAround(A,I)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var I=A.x-this.x,Y=A.y-this.y;return I*I+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,I){return Math.atan2(this.x*I-this.y*A,this.x*A+this.y*I)},_matMult:function(A){var I=A[0]*this.x+A[1]*this.y,Y=A[2]*this.x+A[3]*this.y;return this.x=I,this.y=Y,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var I=Math.cos(A),Y=Math.sin(A),le=I*this.x-Y*this.y,ke=Y*this.x+I*this.y;return this.x=le,this.y=ke,this},_rotateAround:function(A,I){var Y=Math.cos(A),le=Math.sin(A),ke=I.x+Y*(this.x-I.x)-le*(this.y-I.y),Ce=I.y+le*(this.x-I.x)+Y*(this.y-I.y);return this.x=ke,this.y=Ce,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(A){return A instanceof a?A:Array.isArray(A)?new a(A[0],A[1]):A};var n=typeof self<"u"?self:{},r=Math.pow(2,53)-1;function i(A,I,Y,le){var ke=new h(A,I,Y,le);return function(Ce){return ke.solve(Ce)}}var l=i(.25,.1,.25,1);function u(A,I,Y){return Math.min(Y,Math.max(I,A))}function p(A,I,Y){var le=Y-I,ke=((A-I)%le+le)%le+I;return ke===I?Y:ke}function c(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var le=0,ke=I;le<ke.length;le+=1){var Ce=ke[le];for(var je in Ce)A[je]=Ce[je]}return A}var x=1;function d(){return x++}function g(){return function A(I){return I?(I^16*Math.random()>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function v(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function y(A,I){A.forEach(function(Y){I[Y]&&(I[Y]=I[Y].bind(I))})}function m(A,I){return A.indexOf(I,A.length-I.length)!==-1}function _(A,I,Y){var le={};for(var ke in A)le[ke]=I.call(Y||this,A[ke],ke,A);return le}function f(A,I,Y){var le={};for(var ke in A)I.call(Y||this,A[ke],ke,A)&&(le[ke]=A[ke]);return le}function S(A){return Array.isArray(A)?A.map(S):typeof A=="object"&&A?_(A,S):A}var w={};function E(A){w[A]||(typeof console<"u"&&console.warn(A),w[A]=!0)}function O(A,I,Y){return(Y.y-A.y)*(I.x-A.x)>(I.y-A.y)*(Y.x-A.x)}function C(A){for(var I=0,Y=0,le=A.length,ke=le-1,Ce=void 0,je=void 0;Y<le;ke=Y++)Ce=A[Y],I+=((je=A[ke]).x-Ce.x)*(Ce.y+je.y);return I}function P(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function R(A){var I={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,ke,Ce,je){var Ke=Ce||je;return I[ke]=!Ke||Ke.toLowerCase(),""}),I["max-age"]){var Y=parseInt(I["max-age"],10);isNaN(Y)?delete I["max-age"]:I["max-age"]=Y}return I}var j=null;function D(A){if(j==null){var I=A.navigator?A.navigator.userAgent:null;j=!!A.safari||!(!I||!(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return j}function N(A){try{var I=n[A];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch{return!1}}var W,F,V,U,te=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),J=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,X=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,K={now:te,frame:function(A){var I=J(A);return{cancel:function(){return X(I)}}},getImageData:function(A,I){I===void 0&&(I=0);var Y=n.document.createElement("canvas"),le=Y.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return Y.width=A.width,Y.height=A.height,le.drawImage(A,0,0,A.width,A.height),le.getImageData(-I,-I,A.width+2*I,A.height+2*I)},resolveURL:function(A){return W||(W=n.document.createElement("a")),W.href=A,W.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(F==null&&(F=n.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}},Q={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Z={supported:!1,testSupport:function(A){!re&&U&&(oe?ae(A):V=A)}},re=!1,oe=!1;function ae(A){var I=A.createTexture();A.bindTexture(A.TEXTURE_2D,I);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,U),A.isContextLost())return;Z.supported=!0}catch{}A.deleteTexture(I),re=!0}n.document&&((U=n.document.createElement("img")).onload=function(){V&&ae(V),V=null,oe=!0},U.onerror=function(){re=!0,V=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ce="01",he=function(A,I){this._transformRequestFn=A,this._customAccessToken=I,this._createSkuToken()};function pe(A){return A.indexOf("mapbox:")===0}he.prototype._createSkuToken=function(){var A=function(){for(var I="",Y=0;Y<10;Y++)I+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,I].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},he.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},he.prototype.transformRequest=function(A,I){return this._transformRequestFn&&this._transformRequestFn(A,I)||{url:A}},he.prototype.normalizeStyleURL=function(A,I){if(!pe(A))return A;var Y=ge(A);return Y.path="/styles/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},he.prototype.normalizeGlyphsURL=function(A,I){if(!pe(A))return A;var Y=ge(A);return Y.path="/fonts/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},he.prototype.normalizeSourceURL=function(A,I){if(!pe(A))return A;var Y=ge(A);return Y.path="/v4/"+Y.authority+".json",Y.params.push("secure"),this._makeAPIURL(Y,this._customAccessToken||I)},he.prototype.normalizeSpriteURL=function(A,I,Y,le){var ke=ge(A);return pe(A)?(ke.path="/styles/v1"+ke.path+"/sprite"+I+Y,this._makeAPIURL(ke,this._customAccessToken||le)):(ke.path+=""+I+Y,we(ke))},he.prototype.normalizeTileURL=function(A,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!pe(A))return A;var Y=ge(A),le=K.devicePixelRatio>=2||I===512?"@2x":"",ke=Z.supported?".webp":"$1";Y.path=Y.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+ke),Y.path=Y.path.replace(/^.+\/v4\//,"/"),Y.path="/v4"+Y.path;var Ce=this._customAccessToken||function(je){for(var Ke=0,st=je;Ke<st.length;Ke+=1){var mt=st[Ke].match(/^access_token=(.*)$/);if(mt)return mt[1]}return null}(Y.params)||Q.ACCESS_TOKEN;return Q.REQUIRE_ACCESS_TOKEN&&Ce&&this._skuToken&&Y.params.push("sku="+this._skuToken),this._makeAPIURL(Y,Ce)},he.prototype.canonicalizeTileURL=function(A,I){var Y=ge(A);if(!Y.path.match(/(^\/v4\/)/)||!Y.path.match(/\.[\w]+$/))return A;var le="mapbox://tiles/";le+=Y.path.replace("/v4/","");var ke=Y.params;return I&&(ke=ke.filter(function(Ce){return!Ce.match(/^access_token=/)})),ke.length&&(le+="?"+ke.join("&")),le},he.prototype.canonicalizeTileset=function(A,I){for(var Y=!!I&&pe(I),le=[],ke=0,Ce=A.tiles||[];ke<Ce.length;ke+=1){var je=Ce[ke];be(je)?le.push(this.canonicalizeTileURL(je,Y)):le.push(je)}return le},he.prototype._makeAPIURL=function(A,I){var Y="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=ge(Q.API_URL);if(A.protocol=le.protocol,A.authority=le.authority,A.protocol==="http"){var ke=A.params.indexOf("secure");ke>=0&&A.params.splice(ke,1)}if(le.path!=="/"&&(A.path=""+le.path+A.path),!Q.REQUIRE_ACCESS_TOKEN)return we(A);if(!(I=I||Q.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Y);if(I[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Y);return A.params=A.params.filter(function(Ce){return Ce.indexOf("access_token")===-1}),A.params.push("access_token="+I),we(A)};var xe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function be(A){return xe.test(A)}var ve=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ge(A){var I=A.match(ve);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function we(A){var I=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+I}var _e="mapbox.eventData";function se(A){if(!A)return null;var I,Y=A.split(".");if(!Y||Y.length!==3)return null;try{return JSON.parse((I=Y[1],decodeURIComponent(n.atob(I).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var ie=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ie.prototype.getStorageKey=function(A){var I,Y,le=se(Q.ACCESS_TOKEN);return I=le&&le.u?(Y=le.u,n.btoa(encodeURIComponent(Y).replace(/%([0-9A-F]{2})/g,function(ke,Ce){return String.fromCharCode(+("0x"+Ce))}))):Q.ACCESS_TOKEN||"",A?_e+"."+A+":"+I:_e+":"+I},ie.prototype.fetchEventData=function(){var A=N("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{var le=n.localStorage.getItem(I);le&&(this.eventData=JSON.parse(le));var ke=n.localStorage.getItem(Y);ke&&(this.anonId=ke)}catch{E("Unable to read from LocalStorage")}},ie.prototype.saveEventData=function(){var A=N("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{n.localStorage.setItem(Y,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(I,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},ie.prototype.processRequests=function(A){},ie.prototype.postEvent=function(A,I,Y,le){var ke=this;if(Q.EVENTS_URL){var Ce=ge(Q.EVENTS_URL);Ce.params.push("access_token="+(le||Q.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ce,userId:this.anonId},Ke=I?c(je,I):je,st={url:we(Ce),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ke])};this.pendingRequest=At(st,function(mt){ke.pendingRequest=null,Y(mt),ke.saveEventData(),ke.processRequests(le)})}},ie.prototype.queueRequest=function(A,I){this.queue.push(A),this.processRequests(I)};var fe,Ee,Te=function(A){function I(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.postMapLoadEvent=function(Y,le,ke,Ce){this.skuToken=ke,(Q.EVENTS_URL&&Ce||Q.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(je){return pe(je)||be(je)}))&&this.queueRequest({id:le,timestamp:Date.now()},Ce)},I.prototype.processRequests=function(Y){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var ke=this.queue.shift(),Ce=ke.id,je=ke.timestamp;Ce&&this.success[Ce]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=g()),this.postEvent(je,{skuToken:this.skuToken},function(Ke){Ke||Ce&&(le.success[Ce]=!0)},Y))}},I}(ie),Ae=function(A){function I(Y){A.call(this,"appUserTurnstile"),this._customAccessToken=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.postTurnstileEvent=function(Y,le){Q.EVENTS_URL&&Q.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(ke){return pe(ke)||be(ke)})&&this.queueRequest(Date.now(),le)},I.prototype.processRequests=function(Y){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var ke=se(Q.ACCESS_TOKEN),Ce=ke?ke.u:Q.ACCESS_TOKEN,je=Ce!==this.eventData.tokenU;v(this.anonId)||(this.anonId=g(),je=!0);var Ke=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),mt=new Date(Ke),_t=(Ke-this.eventData.lastSuccess)/864e5;je=je||_t>=1||_t<-1||st.getDate()!==mt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Ke,{"enabled.telemetry":!1},function(Dt){Dt||(le.eventData.lastSuccess=Ke,le.eventData.tokenU=Ce)},Y)}},I}(ie),Se=new Ae,Oe=Se.postTurnstileEvent.bind(Se),De=new Te,de=De.postMapLoadEvent.bind(De),me="mapbox-tiles",Me=500,ze=50,Pe=42e4;function Ne(){n.caches&&!fe&&(fe=n.caches.open(me))}function Ve(A,I,Y){if(Ne(),fe){var le={status:I.status,statusText:I.statusText,headers:new n.Headers};I.headers.forEach(function(Ce,je){return le.headers.set(je,Ce)});var ke=R(I.headers.get("Cache-Control")||"");ke["no-store"]||(ke["max-age"]&&le.headers.set("Expires",new Date(Y+1e3*ke["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-Y<Pe||function(Ce,je){if(Ee===void 0)try{new Response(new ReadableStream),Ee=!0}catch{Ee=!1}Ee?je(Ce.body):Ce.blob().then(je)}(I,function(Ce){var je=new n.Response(Ce,le);Ne(),fe&&fe.then(function(Ke){return Ke.put(Ye(A.url),je)}).catch(function(Ke){return E(Ke.message)})}))}}function Ye(A){var I=A.indexOf("?");return I<0?A:A.slice(0,I)}function at(A,I){if(Ne(),!fe)return I(null);var Y=Ye(A.url);fe.then(function(le){le.match(Y).then(function(ke){var Ce=function(je){if(!je)return!1;var Ke=new Date(je.headers.get("Expires")||0),st=R(je.headers.get("Cache-Control")||"");return Ke>Date.now()&&!st["no-cache"]}(ke);le.delete(Y),Ce&&le.put(Y,ke.clone()),I(null,ke,Ce)}).catch(I)}).catch(I)}var rt,dt=1/0;function vt(){return rt==null&&(rt=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),rt}var ht={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ht);var et=function(A){function I(Y,le,ke){le===401&&be(ke)&&(Y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,Y),this.status=le,this.url=ke,this.name=this.constructor.name,this.message=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),$e=P()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href};function wt(A,I){var Y,le=new n.AbortController,ke=new n.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:$e(),signal:le.signal}),Ce=!1,je=!1,Ke=(Y=ke.url).indexOf("sku=")>0&&be(Y);A.type==="json"&&ke.headers.set("Accept","application/json");var st=function(_t,Dt,jt){if(!je){if(_t&&_t.message!=="SecurityError"&&E(_t),Dt&&jt)return mt(Dt);var Rt=Date.now();n.fetch(ke).then(function(rn){if(rn.ok){var on=Ke?rn.clone():null;return mt(rn,on,Rt)}return I(new et(rn.statusText,rn.status,A.url))}).catch(function(rn){rn.code!==20&&I(new Error(rn.message))})}},mt=function(_t,Dt,jt){(A.type==="arrayBuffer"?_t.arrayBuffer():A.type==="json"?_t.json():_t.text()).then(function(Rt){je||(Dt&&jt&&Ve(ke,Dt,jt),Ce=!0,I(null,Rt,_t.headers.get("Cache-Control"),_t.headers.get("Expires")))}).catch(function(Rt){je||I(new Error(Rt.message))})};return Ke?at(ke,st):st(null,null),{cancel:function(){je=!0,Ce||le.abort()}}}var Pt=function(A,I){if(Y=A.url,!(/^file:/.test(Y)||/^file:/.test($e())&&!/^\w+:/.test(Y))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return wt(A,I);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,I,void 0,!0)}var Y;return function(le,ke){var Ce=new n.XMLHttpRequest;for(var je in Ce.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Ce.responseType="arraybuffer"),le.headers)Ce.setRequestHeader(je,le.headers[je]);return le.type==="json"&&(Ce.responseType="text",Ce.setRequestHeader("Accept","application/json")),Ce.withCredentials=le.credentials==="include",Ce.onerror=function(){ke(new Error(Ce.statusText))},Ce.onload=function(){if((Ce.status>=200&&Ce.status<300||Ce.status===0)&&Ce.response!==null){var Ke=Ce.response;if(le.type==="json")try{Ke=JSON.parse(Ce.response)}catch(st){return ke(st)}ke(null,Ke,Ce.getResponseHeader("Cache-Control"),Ce.getResponseHeader("Expires"))}else ke(new et(Ce.statusText,Ce.status,le.url))},Ce.send(le.body),{cancel:function(){return Ce.abort()}}}(A,I)},Ot=function(A,I){return Pt(c(A,{type:"arrayBuffer"}),I)},At=function(A,I){return Pt(c(A,{method:"POST"}),I)},He,Ze,Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";He=[],Ze=0;var Ge=function(A,I){if(Z.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Ze>=Q.MAX_PARALLEL_IMAGE_REQUESTS){var Y={requestParameters:A,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return He.push(Y),Y}Ze++;var le=!1,ke=function(){if(!le)for(le=!0,Ze--;He.length&&Ze<Q.MAX_PARALLEL_IMAGE_REQUESTS;){var je=He.shift(),Ke=je.requestParameters,st=je.callback;je.cancelled||(je.cancel=Ge(Ke,st).cancel)}},Ce=Ot(A,function(je,Ke,st,mt){ke(),je?I(je):Ke&&(vt()?function(_t,Dt){var jt=new n.Blob([new Uint8Array(_t)],{type:"image/png"});n.createImageBitmap(jt).then(function(Rt){Dt(null,Rt)}).catch(function(Rt){Dt(new Error("Could not load image because of "+Rt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ke,I):function(_t,Dt,jt,Rt){var rn=new n.Image,on=n.URL;rn.onload=function(){Dt(null,rn),on.revokeObjectURL(rn.src),rn.onload=null,n.requestAnimationFrame(function(){rn.src=Be})},rn.onerror=function(){return Dt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var bn=new n.Blob([new Uint8Array(_t)],{type:"image/png"});rn.cacheControl=jt,rn.expires=Rt,rn.src=_t.byteLength?on.createObjectURL(bn):Be}(Ke,I,st,mt))});return{cancel:function(){Ce.cancel(),ke()}}};function it(A,I,Y){Y[A]&&Y[A].indexOf(I)!==-1||(Y[A]=Y[A]||[],Y[A].push(I))}function tt(A,I,Y){if(Y&&Y[A]){var le=Y[A].indexOf(I);le!==-1&&Y[A].splice(le,1)}}var Re=function(A,I){I===void 0&&(I={}),c(this,I),this.type=A},Fe=function(A){function I(Y,le){le===void 0&&(le={}),A.call(this,"error",c({error:Y},le))}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Re),nt=function(){};nt.prototype.on=function(A,I){return this._listeners=this._listeners||{},it(A,I,this._listeners),this},nt.prototype.off=function(A,I){return tt(A,I,this._listeners),tt(A,I,this._oneTimeListeners),this},nt.prototype.once=function(A,I){return this._oneTimeListeners=this._oneTimeListeners||{},it(A,I,this._oneTimeListeners),this},nt.prototype.fire=function(A,I){typeof A=="string"&&(A=new Re(A,I||{}));var Y=A.type;if(this.listens(Y)){A.target=this;for(var le=0,ke=this._listeners&&this._listeners[Y]?this._listeners[Y].slice():[];le<ke.length;le+=1)ke[le].call(this,A);for(var Ce=0,je=this._oneTimeListeners&&this._oneTimeListeners[Y]?this._oneTimeListeners[Y].slice():[];Ce<je.length;Ce+=1){var Ke=je[Ce];tt(Y,Ke,this._oneTimeListeners),Ke.call(this,A)}var st=this._eventedParent;st&&(c(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),st.fire(A))}else A instanceof Fe&&console.error(A.error);return this},nt.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},nt.prototype.setEventedParent=function(A,I){return this._eventedParent=A,this._eventedParentData=I,this};var We={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ct=function(A,I,Y,le){this.message=(A?A+": ":"")+Y,le&&(this.identifier=le),I!=null&&I.__line__&&(this.line=I.__line__)};function pt(A){var I=A.key,Y=A.value;return Y?[new ct(I,Y,"constants have been deprecated as of v8")]:[]}function gt(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var le=0,ke=I;le<ke.length;le+=1){var Ce=ke[le];for(var je in Ce)A[je]=Ce[je]}return A}function ut(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function kt(A){if(Array.isArray(A))return A.map(kt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var I={};for(var Y in A)I[Y]=kt(A[Y]);return I}return ut(A)}var yt=function(A){function I(Y,le){A.call(this,le),this.message=le,this.key=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Error),Mt=function(A,I){I===void 0&&(I=[]),this.parent=A,this.bindings={};for(var Y=0,le=I;Y<le.length;Y+=1){var ke=le[Y],Ce=ke[0],je=ke[1];this.bindings[Ce]=je}};Mt.prototype.concat=function(A){return new Mt(this,A)},Mt.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},Mt.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Lt={kind:"null"},Ct={kind:"number"},It={kind:"string"},Wt={kind:"boolean"},Nt={kind:"color"},Bt={kind:"object"},Ht={kind:"value"},Qt={kind:"collator"},Cn={kind:"formatted"},Tn={kind:"resolvedImage"};function hn(A,I){return{kind:"array",itemType:A,N:I}}function Zt(A){if(A.kind==="array"){var I=Zt(A.itemType);return typeof A.N=="number"?"array<"+I+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+I+">"}return A.kind}var an=[Lt,Ct,It,Wt,Nt,Cn,Bt,hn(Ht),Tn];function $t(A,I){if(I.kind==="error")return null;if(A.kind==="array"){if(I.kind==="array"&&(I.N===0&&I.itemType.kind==="value"||!$t(A.itemType,I.itemType))&&(typeof A.N!="number"||A.N===I.N))return null}else{if(A.kind===I.kind)return null;if(A.kind==="value"){for(var Y=0,le=an;Y<le.length;Y+=1)if(!$t(le[Y],I))return null}}return"Expected "+Zt(A)+" but found "+Zt(I)+" instead."}function ln(A,I){return I.some(function(Y){return Y.kind===A.kind})}function mn(A,I){return I.some(function(Y){return Y==="null"?A===null:Y==="array"?Array.isArray(A):Y==="object"?A&&!Array.isArray(A)&&typeof A=="object":Y===typeof A})}var xn=T(function(A,I){var Y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(st){return(st=Math.round(st))<0?0:st>255?255:st}function ke(st){return st<0?0:st>1?1:st}function Ce(st){return st[st.length-1]==="%"?le(parseFloat(st)/100*255):le(parseInt(st))}function je(st){return st[st.length-1]==="%"?ke(parseFloat(st)/100):ke(parseFloat(st))}function Ke(st,mt,_t){return _t<0?_t+=1:_t>1&&(_t-=1),6*_t<1?st+(mt-st)*_t*6:2*_t<1?mt:3*_t<2?st+(mt-st)*(2/3-_t)*6:st}try{I.parseCSSColor=function(st){var mt,_t=st.replace(/ /g,"").toLowerCase();if(_t in Y)return Y[_t].slice();if(_t[0]==="#")return _t.length===4?(mt=parseInt(_t.substr(1),16))>=0&&mt<=4095?[(3840&mt)>>4|(3840&mt)>>8,240&mt|(240&mt)>>4,15&mt|(15&mt)<<4,1]:null:_t.length===7&&(mt=parseInt(_t.substr(1),16))>=0&&mt<=16777215?[(16711680&mt)>>16,(65280&mt)>>8,255&mt,1]:null;var Dt=_t.indexOf("("),jt=_t.indexOf(")");if(Dt!==-1&&jt+1===_t.length){var Rt=_t.substr(0,Dt),rn=_t.substr(Dt+1,jt-(Dt+1)).split(","),on=1;switch(Rt){case"rgba":if(rn.length!==4)return null;on=je(rn.pop());case"rgb":return rn.length!==3?null:[Ce(rn[0]),Ce(rn[1]),Ce(rn[2]),on];case"hsla":if(rn.length!==4)return null;on=je(rn.pop());case"hsl":if(rn.length!==3)return null;var bn=(parseFloat(rn[0])%360+360)%360/360,yn=je(rn[1]),On=je(rn[2]),Dn=On<=.5?On*(yn+1):On+yn-On*yn,Un=2*On-Dn;return[le(255*Ke(Un,Dn,bn+1/3)),le(255*Ke(Un,Dn,bn)),le(255*Ke(Un,Dn,bn-1/3)),on];default:return null}}return null}}catch{}}),Pn=xn.parseCSSColor,Mn=function(A,I,Y,le){le===void 0&&(le=1),this.r=A,this.g=I,this.b=Y,this.a=le};Mn.parse=function(A){if(A){if(A instanceof Mn)return A;if(typeof A=="string"){var I=Pn(A);if(I)return new Mn(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3])}}},Mn.prototype.toString=function(){var A=this.toArray(),I=A[0],Y=A[1],le=A[2],ke=A[3];return"rgba("+Math.round(I)+","+Math.round(Y)+","+Math.round(le)+","+ke+")"},Mn.prototype.toArray=function(){var A=this,I=A.r,Y=A.g,le=A.b,ke=A.a;return ke===0?[0,0,0,0]:[255*I/ke,255*Y/ke,255*le/ke,ke]},Mn.black=new Mn(0,0,0,1),Mn.white=new Mn(1,1,1,1),Mn.transparent=new Mn(0,0,0,0),Mn.red=new Mn(1,0,0,1);var _n=function(A,I,Y){this.sensitivity=A?I?"variant":"case":I?"accent":"base",this.locale=Y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};_n.prototype.compare=function(A,I){return this.collator.compare(A,I)},_n.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Rn=function(A,I,Y,le,ke){this.text=A,this.image=I,this.scale=Y,this.fontStack=le,this.textColor=ke},In=function(A){this.sections=A};In.fromString=function(A){return new In([new Rn(A,null,null,null,null)])},In.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},In.factory=function(A){return A instanceof In?A:In.fromString(A)},In.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},In.prototype.serialize=function(){for(var A=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var le=Y[I];if(le.image)A.push(["image",le.image.name]);else{A.push(le.text);var ke={};le.fontStack&&(ke["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(ke["font-scale"]=le.scale),le.textColor&&(ke["text-color"]=["rgba"].concat(le.textColor.toArray())),A.push(ke)}}return A};var Vn=function(A){this.name=A.name,this.available=A.available};function tr(A,I,Y,le){return typeof A=="number"&&A>=0&&A<=255&&typeof I=="number"&&I>=0&&I<=255&&typeof Y=="number"&&Y>=0&&Y<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[A,I,Y,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[A,I,Y,le]:[A,I,Y]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function er(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof Mn||A instanceof _n||A instanceof In||A instanceof Vn)return!0;if(Array.isArray(A)){for(var I=0,Y=A;I<Y.length;I+=1)if(!er(Y[I]))return!1;return!0}if(typeof A=="object"){for(var le in A)if(!er(A[le]))return!1;return!0}return!1}function Wn(A){if(A===null)return Lt;if(typeof A=="string")return It;if(typeof A=="boolean")return Wt;if(typeof A=="number")return Ct;if(A instanceof Mn)return Nt;if(A instanceof _n)return Qt;if(A instanceof In)return Cn;if(A instanceof Vn)return Tn;if(Array.isArray(A)){for(var I,Y=A.length,le=0,ke=A;le<ke.length;le+=1){var Ce=Wn(ke[le]);if(I){if(I===Ce)continue;I=Ht;break}I=Ce}return hn(I||Ht,Y)}return Bt}function or(A){var I=typeof A;return A===null?"":I==="string"||I==="number"||I==="boolean"?String(A):A instanceof Mn||A instanceof In||A instanceof Vn?A.toString():JSON.stringify(A)}Vn.prototype.toString=function(){return this.name},Vn.fromString=function(A){return A?new Vn({name:A,available:!1}):null},Vn.prototype.serialize=function(){return["image",this.name]};var Jt=function(A,I){this.type=A,this.value=I};Jt.parse=function(A,I){if(A.length!==2)return I.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!er(A[1]))return I.error("invalid value");var Y=A[1],le=Wn(Y),ke=I.expectedType;return le.kind!=="array"||le.N!==0||!ke||ke.kind!=="array"||typeof ke.N=="number"&&ke.N!==0||(le=ke),new Jt(le,Y)},Jt.prototype.evaluate=function(){return this.value},Jt.prototype.eachChild=function(){},Jt.prototype.outputDefined=function(){return!0},Jt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Mn?["rgba"].concat(this.value.toArray()):this.value instanceof In?this.value.serialize():this.value};var en=function(A){this.name="ExpressionEvaluationError",this.message=A};en.prototype.toJSON=function(){return this.message};var En={string:It,number:Ct,boolean:Wt,object:Bt},gn=function(A,I){this.type=A,this.args=I};gn.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y,le=1,ke=A[0];if(ke==="array"){var Ce,je;if(A.length>2){var Ke=A[1];if(typeof Ke!="string"||!(Ke in En)||Ke==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);Ce=En[Ke],le++}else Ce=Ht;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return I.error('The length argument to "array" must be a positive integer literal',2);je=A[2],le++}Y=hn(Ce,je)}else Y=En[ke];for(var st=[];le<A.length;le++){var mt=I.parse(A[le],le,Ht);if(!mt)return null;st.push(mt)}return new gn(Y,st)},gn.prototype.evaluate=function(A){for(var I=0;I<this.args.length;I++){var Y=this.args[I].evaluate(A);if(!$t(this.type,Wn(Y)))return Y;if(I===this.args.length-1)throw new en("Expected value to be of type "+Zt(this.type)+", but found "+Zt(Wn(Y))+" instead.")}return null},gn.prototype.eachChild=function(A){this.args.forEach(A)},gn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},gn.prototype.serialize=function(){var A=this.type,I=[A.kind];if(A.kind==="array"){var Y=A.itemType;if(Y.kind==="string"||Y.kind==="number"||Y.kind==="boolean"){I.push(Y.kind);var le=A.N;(typeof le=="number"||this.args.length>1)&&I.push(le)}}return I.concat(this.args.map(function(ke){return ke.serialize()}))};var Ln=function(A){this.type=Cn,this.sections=A};Ln.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y=A[1];if(!Array.isArray(Y)&&typeof Y=="object")return I.error("First argument must be an image or text section.");for(var le=[],ke=!1,Ce=1;Ce<=A.length-1;++Ce){var je=A[Ce];if(ke&&typeof je=="object"&&!Array.isArray(je)){ke=!1;var Ke=null;if(je["font-scale"]&&!(Ke=I.parse(je["font-scale"],1,Ct)))return null;var st=null;if(je["text-font"]&&!(st=I.parse(je["text-font"],1,hn(It))))return null;var mt=null;if(je["text-color"]&&!(mt=I.parse(je["text-color"],1,Nt)))return null;var _t=le[le.length-1];_t.scale=Ke,_t.font=st,_t.textColor=mt}else{var Dt=I.parse(A[Ce],1,Ht);if(!Dt)return null;var jt=Dt.type.kind;if(jt!=="string"&&jt!=="value"&&jt!=="null"&&jt!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ke=!0,le.push({content:Dt,scale:null,font:null,textColor:null})}}return new Ln(le)},Ln.prototype.evaluate=function(A){return new In(this.sections.map(function(I){var Y=I.content.evaluate(A);return Wn(Y)===Tn?new Rn("",Y,null,null,null):new Rn(or(Y),null,I.scale?I.scale.evaluate(A):null,I.font?I.font.evaluate(A).join(","):null,I.textColor?I.textColor.evaluate(A):null)}))},Ln.prototype.eachChild=function(A){for(var I=0,Y=this.sections;I<Y.length;I+=1){var le=Y[I];A(le.content),le.scale&&A(le.scale),le.font&&A(le.font),le.textColor&&A(le.textColor)}},Ln.prototype.outputDefined=function(){return!1},Ln.prototype.serialize=function(){for(var A=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var le=Y[I];A.push(le.content.serialize());var ke={};le.scale&&(ke["font-scale"]=le.scale.serialize()),le.font&&(ke["text-font"]=le.font.serialize()),le.textColor&&(ke["text-color"]=le.textColor.serialize()),A.push(ke)}return A};var Hn=function(A){this.type=Tn,this.input=A};Hn.parse=function(A,I){if(A.length!==2)return I.error("Expected two arguments.");var Y=I.parse(A[1],1,It);return Y?new Hn(Y):I.error("No image name provided.")},Hn.prototype.evaluate=function(A){var I=this.input.evaluate(A),Y=Vn.fromString(I);return Y&&A.availableImages&&(Y.available=A.availableImages.indexOf(I)>-1),Y},Hn.prototype.eachChild=function(A){A(this.input)},Hn.prototype.outputDefined=function(){return!1},Hn.prototype.serialize=function(){return["image",this.input.serialize()]};var Nn={"to-boolean":Wt,"to-color":Nt,"to-number":Ct,"to-string":It},Yn=function(A,I){this.type=A,this.args=I};Yn.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y=A[0];if((Y==="to-boolean"||Y==="to-string")&&A.length!==2)return I.error("Expected one argument.");for(var le=Nn[Y],ke=[],Ce=1;Ce<A.length;Ce++){var je=I.parse(A[Ce],Ce,Ht);if(!je)return null;ke.push(je)}return new Yn(le,ke)},Yn.prototype.evaluate=function(A){if(this.type.kind==="boolean")return!!this.args[0].evaluate(A);if(this.type.kind==="color"){for(var I,Y,le=0,ke=this.args;le<ke.length;le+=1){if(Y=null,(I=ke[le].evaluate(A))instanceof Mn)return I;if(typeof I=="string"){var Ce=A.parseColor(I);if(Ce)return Ce}else if(Array.isArray(I)&&!(Y=I.length<3||I.length>4?"Invalid rbga value "+JSON.stringify(I)+": expected an array containing either three or four numeric values.":tr(I[0],I[1],I[2],I[3])))return new Mn(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new en(Y||"Could not parse color from value '"+(typeof I=="string"?I:String(JSON.stringify(I)))+"'")}if(this.type.kind==="number"){for(var je=null,Ke=0,st=this.args;Ke<st.length;Ke+=1){if((je=st[Ke].evaluate(A))===null)return 0;var mt=Number(je);if(!isNaN(mt))return mt}throw new en("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?In.fromString(or(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?Vn.fromString(or(this.args[0].evaluate(A))):or(this.args[0].evaluate(A))},Yn.prototype.eachChild=function(A){this.args.forEach(A)},Yn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Yn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ln([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Hn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(I){A.push(I.serialize())}),A};var fr=["Unknown","Point","LineString","Polygon"],Xt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Xt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Xt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?fr[this.feature.type]:this.feature.type:null},Xt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Xt.prototype.canonicalID=function(){return this.canonical},Xt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Xt.prototype.parseColor=function(A){var I=this._parseColorCache[A];return I||(I=this._parseColorCache[A]=Mn.parse(A)),I};var pn=function(A,I,Y,le){this.name=A,this.type=I,this._evaluate=Y,this.args=le};pn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},pn.prototype.eachChild=function(A){this.args.forEach(A)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},pn.parse=function(A,I){var Y,le=A[0],ke=pn.definitions[le];if(!ke)return I.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ce=Array.isArray(ke)?ke[0]:ke.type,je=Array.isArray(ke)?[[ke[1],ke[2]]]:ke.overloads,Ke=je.filter(function(zr){var Sr=zr[0];return!Array.isArray(Sr)||Sr.length===A.length-1}),st=null,mt=0,_t=Ke;mt<_t.length;mt+=1){var Dt=_t[mt],jt=Dt[0],Rt=Dt[1];st=new hr(I.registry,I.path,null,I.scope);for(var rn=[],on=!1,bn=1;bn<A.length;bn++){var yn=A[bn],On=Array.isArray(jt)?jt[bn-1]:jt.type,Dn=st.parse(yn,1+rn.length,On);if(!Dn){on=!0;break}rn.push(Dn)}if(!on)if(Array.isArray(jt)&&jt.length!==rn.length)st.error("Expected "+jt.length+" arguments, but found "+rn.length+" instead.");else{for(var Un=0;Un<rn.length;Un++){var Gn=Array.isArray(jt)?jt[Un]:jt.type,nr=rn[Un];st.concat(Un+1).checkSubtype(Gn,nr.type)}if(st.errors.length===0)return new pn(le,Ce,Rt,rn)}}if(Ke.length===1)(Y=I.errors).push.apply(Y,st.errors);else{for(var pr=(Ke.length?Ke:je).map(function(zr){return Sr=zr[0],Array.isArray(Sr)?"("+Sr.map(Zt).join(", ")+")":"("+Zt(Sr.type)+"...)";var Sr}).join(" | "),cr=[],yr=1;yr<A.length;yr++){var _r=I.parse(A[yr],1+cr.length);if(!_r)return null;cr.push(Zt(_r.type))}I.error("Expected arguments of type "+pr+", but found ("+cr.join(", ")+") instead.")}return null},pn.register=function(A,I){for(var Y in pn.definitions=I,I)A[Y]=pn};var bt=function(A,I,Y){this.type=Qt,this.locale=Y,this.caseSensitive=A,this.diacriticSensitive=I};bt.parse=function(A,I){if(A.length!==2)return I.error("Expected one argument.");var Y=A[1];if(typeof Y!="object"||Array.isArray(Y))return I.error("Collator options argument must be an object.");var le=I.parse(Y["case-sensitive"]!==void 0&&Y["case-sensitive"],1,Wt);if(!le)return null;var ke=I.parse(Y["diacritic-sensitive"]!==void 0&&Y["diacritic-sensitive"],1,Wt);if(!ke)return null;var Ce=null;return Y.locale&&!(Ce=I.parse(Y.locale,1,It))?null:new bt(le,ke,Ce)},bt.prototype.evaluate=function(A){return new _n(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},bt.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},bt.prototype.outputDefined=function(){return!1},bt.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Ut=8192;function Kt(A,I){A[0]=Math.min(A[0],I[0]),A[1]=Math.min(A[1],I[1]),A[2]=Math.max(A[2],I[0]),A[3]=Math.max(A[3],I[1])}function un(A,I){return!(A[0]<=I[0]||A[2]>=I[2]||A[1]<=I[1]||A[3]>=I[3])}function cn(A,I){var Y,le=(180+A[0])/360,ke=(Y=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Y*Math.PI/360)))/360),Ce=Math.pow(2,I.z);return[Math.round(le*Ce*Ut),Math.round(ke*Ce*Ut)]}function vn(A,I,Y){return I[1]>A[1]!=Y[1]>A[1]&&A[0]<(Y[0]-I[0])*(A[1]-I[1])/(Y[1]-I[1])+I[0]}function tn(A,I){for(var Y=!1,le=0,ke=I.length;le<ke;le++)for(var Ce=I[le],je=0,Ke=Ce.length;je<Ke-1;je++){if(st=A,mt=Ce[je],_t=Ce[je+1],Dt=void 0,jt=void 0,Rt=void 0,rn=void 0,Dt=st[0]-mt[0],jt=st[1]-mt[1],Rt=st[0]-_t[0],rn=st[1]-_t[1],Dt*rn-Rt*jt==0&&Dt*Rt<=0&&jt*rn<=0)return!1;vn(A,Ce[je],Ce[je+1])&&(Y=!Y)}var st,mt,_t,Dt,jt,Rt,rn;return Y}function Vt(A,I){for(var Y=0;Y<I.length;Y++)if(tn(A,I[Y]))return!0;return!1}function Gt(A,I,Y,le){var ke=A[0]-Y[0],Ce=A[1]-Y[1],je=I[0]-Y[0],Ke=I[1]-Y[1],st=le[0]-Y[0],mt=le[1]-Y[1],_t=ke*mt-st*Ce,Dt=je*mt-st*Ke;return _t>0&&Dt<0||_t<0&&Dt>0}function nn(A,I,Y){for(var le=0,ke=Y;le<ke.length;le+=1)for(var Ce=ke[le],je=0;je<Ce.length-1;++je)if(Ke=A,st=I,mt=Ce[je],_t=Ce[je+1],Dt=void 0,jt=void 0,Rt=void 0,Rt=[st[0]-Ke[0],st[1]-Ke[1]],Dt=[_t[0]-mt[0],_t[1]-mt[1]],jt=Rt,Dt[0]*jt[1]-Dt[1]*jt[0]!=0&&Gt(Ke,st,mt,_t)&&Gt(mt,_t,Ke,st))return!0;var Ke,st,mt,_t,Dt,jt,Rt;return!1}function sn(A,I){for(var Y=0;Y<A.length;++Y)if(!tn(A[Y],I))return!1;for(var le=0;le<A.length-1;++le)if(nn(A[le],A[le+1],I))return!1;return!0}function wn(A,I){for(var Y=0;Y<I.length;Y++)if(sn(A,I[Y]))return!0;return!1}function An(A,I,Y){for(var le=[],ke=0;ke<A.length;ke++){for(var Ce=[],je=0;je<A[ke].length;je++){var Ke=cn(A[ke][je],Y);Kt(I,Ke),Ce.push(Ke)}le.push(Ce)}return le}function zn(A,I,Y){for(var le=[],ke=0;ke<A.length;ke++){var Ce=An(A[ke],I,Y);le.push(Ce)}return le}function Fn(A,I,Y,le){if(A[0]<Y[0]||A[0]>Y[2]){var ke=.5*le,Ce=A[0]-Y[0]>ke?-le:Y[0]-A[0]>ke?le:0;Ce===0&&(Ce=A[0]-Y[2]>ke?-le:Y[2]-A[0]>ke?le:0),A[0]+=Ce}Kt(I,A)}function Xn(A,I,Y,le){for(var ke=Math.pow(2,le.z)*Ut,Ce=[le.x*Ut,le.y*Ut],je=[],Ke=0,st=A;Ke<st.length;Ke+=1)for(var mt=0,_t=st[Ke];mt<_t.length;mt+=1){var Dt=_t[mt],jt=[Dt.x+Ce[0],Dt.y+Ce[1]];Fn(jt,I,Y,ke),je.push(jt)}return je}function jn(A,I,Y,le){for(var ke=Math.pow(2,le.z)*Ut,Ce=[le.x*Ut,le.y*Ut],je=[],Ke=0,st=A;Ke<st.length;Ke+=1){for(var mt=[],_t=0,Dt=st[Ke];_t<Dt.length;_t+=1){var jt=Dt[_t],Rt=[jt.x+Ce[0],jt.y+Ce[1]];Kt(I,Rt),mt.push(Rt)}je.push(mt)}if(I[2]-I[0]<=ke/2){(On=I)[0]=On[1]=1/0,On[2]=On[3]=-1/0;for(var rn=0,on=je;rn<on.length;rn+=1)for(var bn=0,yn=on[rn];bn<yn.length;bn+=1)Fn(yn[bn],I,Y,ke)}var On;return je}var Qn=function(A,I){this.type=Wt,this.geojson=A,this.geometries=I};function Jn(A){if(A instanceof pn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Qn)return!1;var I=!0;return A.eachChild(function(Y){I&&!Jn(Y)&&(I=!1)}),I}function Zn(A){if(A instanceof pn&&A.name==="feature-state")return!1;var I=!0;return A.eachChild(function(Y){I&&!Zn(Y)&&(I=!1)}),I}function ur(A,I){if(A instanceof pn&&I.indexOf(A.name)>=0)return!1;var Y=!0;return A.eachChild(function(le){Y&&!ur(le,I)&&(Y=!1)}),Y}Qn.parse=function(A,I){if(A.length!==2)return I.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(er(A[1])){var Y=A[1];if(Y.type==="FeatureCollection")for(var le=0;le<Y.features.length;++le){var ke=Y.features[le].geometry.type;if(ke==="Polygon"||ke==="MultiPolygon")return new Qn(Y,Y.features[le].geometry)}else if(Y.type==="Feature"){var Ce=Y.geometry.type;if(Ce==="Polygon"||Ce==="MultiPolygon")return new Qn(Y,Y.geometry)}else if(Y.type==="Polygon"||Y.type==="MultiPolygon")return new Qn(Y,Y)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Qn.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(I,Y){var le=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Ce=I.canonicalID();if(Y.type==="Polygon"){var je=An(Y.coordinates,ke,Ce),Ke=Xn(I.geometry(),le,ke,Ce);if(!un(le,ke))return!1;for(var st=0,mt=Ke;st<mt.length;st+=1)if(!tn(mt[st],je))return!1}if(Y.type==="MultiPolygon"){var _t=zn(Y.coordinates,ke,Ce),Dt=Xn(I.geometry(),le,ke,Ce);if(!un(le,ke))return!1;for(var jt=0,Rt=Dt;jt<Rt.length;jt+=1)if(!Vt(Rt[jt],_t))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(I,Y){var le=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Ce=I.canonicalID();if(Y.type==="Polygon"){var je=An(Y.coordinates,ke,Ce),Ke=jn(I.geometry(),le,ke,Ce);if(!un(le,ke))return!1;for(var st=0,mt=Ke;st<mt.length;st+=1)if(!sn(mt[st],je))return!1}if(Y.type==="MultiPolygon"){var _t=zn(Y.coordinates,ke,Ce),Dt=jn(I.geometry(),le,ke,Ce);if(!un(le,ke))return!1;for(var jt=0,Rt=Dt;jt<Rt.length;jt+=1)if(!wn(Rt[jt],_t))return!1}return!0}(A,this.geometries)}return!1},Qn.prototype.eachChild=function(){},Qn.prototype.outputDefined=function(){return!0},Qn.prototype.serialize=function(){return["within",this.geojson]};var mr=function(A,I){this.type=I.type,this.name=A,this.boundExpression=I};mr.parse=function(A,I){if(A.length!==2||typeof A[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");var Y=A[1];return I.scope.has(Y)?new mr(Y,I.scope.get(Y)):I.error('Unknown variable "'+Y+'". Make sure "'+Y+'" has been bound in an enclosing "let" expression before using it.',1)},mr.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},mr.prototype.eachChild=function(){},mr.prototype.outputDefined=function(){return!1},mr.prototype.serialize=function(){return["var",this.name]};var hr=function(A,I,Y,le,ke){I===void 0&&(I=[]),le===void 0&&(le=new Mt),ke===void 0&&(ke=[]),this.registry=A,this.path=I,this.key=I.map(function(Ce){return"["+Ce+"]"}).join(""),this.scope=le,this.errors=ke,this.expectedType=Y};function rr(A){if(A instanceof mr)return rr(A.boundExpression);if(A instanceof pn&&A.name==="error"||A instanceof bt||A instanceof Qn)return!1;var I=A instanceof Yn||A instanceof gn,Y=!0;return A.eachChild(function(le){Y=I?Y&&rr(le):Y&&le instanceof Jt}),!!Y&&Jn(A)&&ur(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gr(A,I){for(var Y,le,ke=A.length-1,Ce=0,je=ke,Ke=0;Ce<=je;)if(Y=A[Ke=Math.floor((Ce+je)/2)],le=A[Ke+1],Y<=I){if(Ke===ke||I<le)return Ke;Ce=Ke+1}else{if(!(Y>I))throw new en("Input is not a number.");je=Ke-1}return 0}hr.prototype.parse=function(A,I,Y,le,ke){return ke===void 0&&(ke={}),I?this.concat(I,Y,le)._parse(A,ke):this._parse(A,ke)},hr.prototype._parse=function(A,I){function Y(mt,_t,Dt){return Dt==="assert"?new gn(_t,[mt]):Dt==="coerce"?new Yn(_t,[mt]):mt}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=A[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ke=this.registry[le];if(ke){var Ce=ke.parse(A,this);if(!Ce)return null;if(this.expectedType){var je=this.expectedType,Ke=Ce.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||Ke.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||Ke.kind!=="value"&&Ke.kind!=="string"){if(this.checkSubtype(je,Ke))return null}else Ce=Y(Ce,je,I.typeAnnotation||"coerce");else Ce=Y(Ce,je,I.typeAnnotation||"assert")}if(!(Ce instanceof Jt)&&Ce.type.kind!=="resolvedImage"&&rr(Ce)){var st=new Xt;try{Ce=new Jt(Ce.type,Ce.evaluate(st))}catch(mt){return this.error(mt.message),null}}return Ce}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},hr.prototype.concat=function(A,I,Y){var le=typeof A=="number"?this.path.concat(A):this.path,ke=Y?this.scope.concat(Y):this.scope;return new hr(this.registry,le,I||null,ke,this.errors)},hr.prototype.error=function(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];var le=""+this.key+I.map(function(ke){return"["+ke+"]"}).join("");this.errors.push(new yt(le,A))},hr.prototype.checkSubtype=function(A,I){var Y=$t(A,I);return Y&&this.error(Y),Y};var xr=function(A,I,Y){this.type=A,this.input=I,this.labels=[],this.outputs=[];for(var le=0,ke=Y;le<ke.length;le+=1){var Ce=ke[le],je=Ce[0],Ke=Ce[1];this.labels.push(je),this.outputs.push(Ke)}};function Or(A,I,Y){return A*(1-Y)+I*Y}xr.parse=function(A,I){if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");var Y=I.parse(A[1],1,Ct);if(!Y)return null;var le=[],ke=null;I.expectedType&&I.expectedType.kind!=="value"&&(ke=I.expectedType);for(var Ce=1;Ce<A.length;Ce+=2){var je=Ce===1?-1/0:A[Ce],Ke=A[Ce+1],st=Ce,mt=Ce+1;if(typeof je!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(le.length&&le[le.length-1][0]>=je)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var _t=I.parse(Ke,mt,ke);if(!_t)return null;ke=ke||_t.type,le.push([je,_t])}return new xr(ke,Y,le)},xr.prototype.evaluate=function(A){var I=this.labels,Y=this.outputs;if(I.length===1)return Y[0].evaluate(A);var le=this.input.evaluate(A);if(le<=I[0])return Y[0].evaluate(A);var ke=I.length;return le>=I[ke-1]?Y[ke-1].evaluate(A):Y[gr(I,le)].evaluate(A)},xr.prototype.eachChild=function(A){A(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)A(Y[I])},xr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},xr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],I=0;I<this.labels.length;I++)I>0&&A.push(this.labels[I]),A.push(this.outputs[I].serialize());return A};var aa=Object.freeze({__proto__:null,number:Or,color:function(A,I,Y){return new Mn(Or(A.r,I.r,Y),Or(A.g,I.g,Y),Or(A.b,I.b,Y),Or(A.a,I.a,Y))},array:function(A,I,Y){return A.map(function(le,ke){return Or(le,I[ke],Y)})}}),oa=.95047,Ua=1,ta=1.08883,ka=4/29,Pr=6/29,ha=3*Pr*Pr,oi=Pr*Pr*Pr,Ya=Math.PI/180,lo=180/Math.PI;function uo(A){return A>oi?Math.pow(A,.3333333333333333):A/ha+ka}function Zi(A){return A>Pr?A*A*A:ha*(A-ka)}function Za(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function Xi(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function ko(A){var I=Xi(A.r),Y=Xi(A.g),le=Xi(A.b),ke=uo((.4124564*I+.3575761*Y+.1804375*le)/oa),Ce=uo((.2126729*I+.7151522*Y+.072175*le)/Ua);return{l:116*Ce-16,a:500*(ke-Ce),b:200*(Ce-uo((.0193339*I+.119192*Y+.9503041*le)/ta)),alpha:A.a}}function qo(A){var I=(A.l+16)/116,Y=isNaN(A.a)?I:I+A.a/500,le=isNaN(A.b)?I:I-A.b/200;return I=Ua*Zi(I),Y=oa*Zi(Y),le=ta*Zi(le),new Mn(Za(3.2404542*Y-1.5371385*I-.4985314*le),Za(-.969266*Y+1.8760108*I+.041556*le),Za(.0556434*Y-.2040259*I+1.0572252*le),A.alpha)}function Mi(A,I,Y){var le=I-A;return A+Y*(le>180||le<-180?le-360*Math.round(le/360):le)}var Si={forward:ko,reverse:qo,interpolate:function(A,I,Y){return{l:Or(A.l,I.l,Y),a:Or(A.a,I.a,Y),b:Or(A.b,I.b,Y),alpha:Or(A.alpha,I.alpha,Y)}}},Ki={forward:function(A){var I=ko(A),Y=I.l,le=I.a,ke=I.b,Ce=Math.atan2(ke,le)*lo;return{h:Ce<0?Ce+360:Ce,c:Math.sqrt(le*le+ke*ke),l:Y,alpha:A.a}},reverse:function(A){var I=A.h*Ya,Y=A.c;return qo({l:A.l,a:Math.cos(I)*Y,b:Math.sin(I)*Y,alpha:A.alpha})},interpolate:function(A,I,Y){return{h:Mi(A.h,I.h,Y),c:Or(A.c,I.c,Y),l:Or(A.l,I.l,Y),alpha:Or(A.alpha,I.alpha,Y)}}},pa=Object.freeze({__proto__:null,lab:Si,hcl:Ki}),za=function(A,I,Y,le,ke){this.type=A,this.operator=I,this.interpolation=Y,this.input=le,this.labels=[],this.outputs=[];for(var Ce=0,je=ke;Ce<je.length;Ce+=1){var Ke=je[Ce],st=Ke[0],mt=Ke[1];this.labels.push(st),this.outputs.push(mt)}};function co(A,I,Y,le){var ke=le-Y,Ce=A-Y;return ke===0?0:I===1?Ce/ke:(Math.pow(I,Ce)-1)/(Math.pow(I,ke)-1)}za.interpolationFactor=function(A,I,Y,le){var ke=0;if(A.name==="exponential")ke=co(I,A.base,Y,le);else if(A.name==="linear")ke=co(I,1,Y,le);else if(A.name==="cubic-bezier"){var Ce=A.controlPoints;ke=new h(Ce[0],Ce[1],Ce[2],Ce[3]).solve(co(I,1,Y,le))}return ke},za.parse=function(A,I){var Y=A[0],le=A[1],ke=A[2],Ce=A.slice(3);if(!Array.isArray(le)||le.length===0)return I.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var je=le[1];if(typeof je!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:je}}else{if(le[0]!=="cubic-bezier")return I.error("Unknown interpolation type "+String(le[0]),1,0);var Ke=le.slice(1);if(Ke.length!==4||Ke.some(function(bn){return typeof bn!="number"||bn<0||bn>1}))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:Ke}}if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(!(ke=I.parse(ke,2,Ct)))return null;var st=[],mt=null;Y==="interpolate-hcl"||Y==="interpolate-lab"?mt=Nt:I.expectedType&&I.expectedType.kind!=="value"&&(mt=I.expectedType);for(var _t=0;_t<Ce.length;_t+=2){var Dt=Ce[_t],jt=Ce[_t+1],Rt=_t+3,rn=_t+4;if(typeof Dt!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Rt);if(st.length&&st[st.length-1][0]>=Dt)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Rt);var on=I.parse(jt,rn,mt);if(!on)return null;mt=mt||on.type,st.push([Dt,on])}return mt.kind==="number"||mt.kind==="color"||mt.kind==="array"&&mt.itemType.kind==="number"&&typeof mt.N=="number"?new za(mt,Y,le,ke,st):I.error("Type "+Zt(mt)+" is not interpolatable.")},za.prototype.evaluate=function(A){var I=this.labels,Y=this.outputs;if(I.length===1)return Y[0].evaluate(A);var le=this.input.evaluate(A);if(le<=I[0])return Y[0].evaluate(A);var ke=I.length;if(le>=I[ke-1])return Y[ke-1].evaluate(A);var Ce=gr(I,le),je=I[Ce],Ke=I[Ce+1],st=za.interpolationFactor(this.interpolation,le,je,Ke),mt=Y[Ce].evaluate(A),_t=Y[Ce+1].evaluate(A);return this.operator==="interpolate"?aa[this.type.kind.toLowerCase()](mt,_t,st):this.operator==="interpolate-hcl"?Ki.reverse(Ki.interpolate(Ki.forward(mt),Ki.forward(_t),st)):Si.reverse(Si.interpolate(Si.forward(mt),Si.forward(_t),st))},za.prototype.eachChild=function(A){A(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)A(Y[I])},za.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},za.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var I=[this.operator,A,this.input.serialize()],Y=0;Y<this.labels.length;Y++)I.push(this.labels[Y],this.outputs[Y].serialize());return I};var Ji=function(A,I){this.type=A,this.args=I};Ji.parse=function(A,I){if(A.length<2)return I.error("Expectected at least one argument.");var Y=null,le=I.expectedType;le&&le.kind!=="value"&&(Y=le);for(var ke=[],Ce=0,je=A.slice(1);Ce<je.length;Ce+=1){var Ke=je[Ce],st=I.parse(Ke,1+ke.length,Y,void 0,{typeAnnotation:"omit"});if(!st)return null;Y=Y||st.type,ke.push(st)}var mt=le&&ke.some(function(_t){return $t(le,_t.type)});return new Ji(mt?Ht:Y,ke)},Ji.prototype.evaluate=function(A){for(var I,Y=null,le=0,ke=0,Ce=this.args;ke<Ce.length&&(le++,(Y=Ce[ke].evaluate(A))&&Y instanceof Vn&&!Y.available&&(I||(I=Y.name),Y=null,le===this.args.length&&(Y=I)),Y===null);ke+=1);return Y},Ji.prototype.eachChild=function(A){this.args.forEach(A)},Ji.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Ji.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(I){A.push(I.serialize())}),A};var Ri=function(A,I){this.type=I.type,this.bindings=[].concat(A),this.result=I};Ri.prototype.evaluate=function(A){return this.result.evaluate(A)},Ri.prototype.eachChild=function(A){for(var I=0,Y=this.bindings;I<Y.length;I+=1)A(Y[I][1]);A(this.result)},Ri.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var Y=[],le=1;le<A.length-1;le+=2){var ke=A[le];if(typeof ke!="string")return I.error("Expected string, but found "+typeof ke+" instead.",le);if(/[^a-zA-Z0-9_]/.test(ke))return I.error("Variable names must contain only alphanumeric characters or '_'.",le);var Ce=I.parse(A[le+1],le+1);if(!Ce)return null;Y.push([ke,Ce])}var je=I.parse(A[A.length-1],A.length-1,I.expectedType,Y);return je?new Ri(Y,je):null},Ri.prototype.outputDefined=function(){return this.result.outputDefined()},Ri.prototype.serialize=function(){for(var A=["let"],I=0,Y=this.bindings;I<Y.length;I+=1){var le=Y[I],ke=le[0],Ce=le[1];A.push(ke,Ce.serialize())}return A.push(this.result.serialize()),A};var Ao=function(A,I,Y){this.type=A,this.index=I,this.input=Y};Ao.parse=function(A,I){if(A.length!==3)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Ct),le=I.parse(A[2],2,hn(I.expectedType||Ht));if(!Y||!le)return null;var ke=le.type;return new Ao(ke.itemType,Y,le)},Ao.prototype.evaluate=function(A){var I=this.index.evaluate(A),Y=this.input.evaluate(A);if(I<0)throw new en("Array index out of bounds: "+I+" < 0.");if(I>=Y.length)throw new en("Array index out of bounds: "+I+" > "+(Y.length-1)+".");if(I!==Math.floor(I))throw new en("Array index must be an integer, but found "+I+" instead.");return Y[I]},Ao.prototype.eachChild=function(A){A(this.index),A(this.input)},Ao.prototype.outputDefined=function(){return!1},Ao.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var $i=function(A,I){this.type=Wt,this.needle=A,this.haystack=I};$i.parse=function(A,I){if(A.length!==3)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Ht),le=I.parse(A[2],2,Ht);return Y&&le?ln(Y.type,[Wt,It,Ct,Lt,Ht])?new $i(Y,le):I.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(Y.type)+" instead"):null},$i.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!Y)return!1;if(!mn(I,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+Zt(Wn(I))+" instead.");if(!mn(Y,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+Zt(Wn(Y))+" instead.");return Y.indexOf(I)>=0},$i.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},$i.prototype.outputDefined=function(){return!0},$i.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Mo=function(A,I,Y){this.type=Ct,this.needle=A,this.haystack=I,this.fromIndex=Y};Mo.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Ht),le=I.parse(A[2],2,Ht);if(!Y||!le)return null;if(!ln(Y.type,[Wt,It,Ct,Lt,Ht]))return I.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(Y.type)+" instead");if(A.length===4){var ke=I.parse(A[3],3,Ct);return ke?new Mo(Y,le,ke):null}return new Mo(Y,le)},Mo.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!mn(I,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+Zt(Wn(I))+" instead.");if(!mn(Y,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+Zt(Wn(Y))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(A);return Y.indexOf(I,le)}return Y.indexOf(I)},Mo.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var fo=function(A,I,Y,le,ke,Ce){this.inputType=A,this.type=I,this.input=Y,this.cases=le,this.outputs=ke,this.otherwise=Ce};fo.parse=function(A,I){if(A.length<5)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return I.error("Expected an even number of arguments.");var Y,le;I.expectedType&&I.expectedType.kind!=="value"&&(le=I.expectedType);for(var ke={},Ce=[],je=2;je<A.length-1;je+=2){var Ke=A[je],st=A[je+1];Array.isArray(Ke)||(Ke=[Ke]);var mt=I.concat(je);if(Ke.length===0)return mt.error("Expected at least one branch label.");for(var _t=0,Dt=Ke;_t<Dt.length;_t+=1){var jt=Dt[_t];if(typeof jt!="number"&&typeof jt!="string")return mt.error("Branch labels must be numbers or strings.");if(typeof jt=="number"&&Math.abs(jt)>Number.MAX_SAFE_INTEGER)return mt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof jt=="number"&&Math.floor(jt)!==jt)return mt.error("Numeric branch labels must be integer values.");if(Y){if(mt.checkSubtype(Y,Wn(jt)))return null}else Y=Wn(jt);if(ke[String(jt)]!==void 0)return mt.error("Branch labels must be unique.");ke[String(jt)]=Ce.length}var Rt=I.parse(st,je,le);if(!Rt)return null;le=le||Rt.type,Ce.push(Rt)}var rn=I.parse(A[1],1,Ht);if(!rn)return null;var on=I.parse(A[A.length-1],A.length-1,le);return on?rn.type.kind!=="value"&&I.concat(1).checkSubtype(Y,rn.type)?null:new fo(Y,le,rn,ke,Ce,on):null},fo.prototype.evaluate=function(A){var I=this.input.evaluate(A);return(Wn(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(A)},fo.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},fo.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},fo.prototype.serialize=function(){for(var A=this,I=["match",this.input.serialize()],Y=[],le={},ke=0,Ce=Object.keys(this.cases).sort();ke<Ce.length;ke+=1){var je=Ce[ke];(Dt=le[this.cases[je]])===void 0?(le[this.cases[je]]=Y.length,Y.push([this.cases[je],[je]])):Y[Dt][1].push(je)}for(var Ke=function(Rt){return A.inputType.kind==="number"?Number(Rt):Rt},st=0,mt=Y;st<mt.length;st+=1){var _t=mt[st],Dt=_t[0],jt=_t[1];jt.length===1?I.push(Ke(jt[0])):I.push(jt.map(Ke)),I.push(this.outputs[outputIndex$1].serialize())}return I.push(this.otherwise.serialize()),I};var So=function(A,I,Y){this.type=A,this.branches=I,this.otherwise=Y};So.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return I.error("Expected an odd number of arguments.");var Y;I.expectedType&&I.expectedType.kind!=="value"&&(Y=I.expectedType);for(var le=[],ke=1;ke<A.length-1;ke+=2){var Ce=I.parse(A[ke],ke,Wt);if(!Ce)return null;var je=I.parse(A[ke+1],ke+1,Y);if(!je)return null;le.push([Ce,je]),Y=Y||je.type}var Ke=I.parse(A[A.length-1],A.length-1,Y);return Ke?new So(Y,le,Ke):null},So.prototype.evaluate=function(A){for(var I=0,Y=this.branches;I<Y.length;I+=1){var le=Y[I],ke=le[0],Ce=le[1];if(ke.evaluate(A))return Ce.evaluate(A)}return this.otherwise.evaluate(A)},So.prototype.eachChild=function(A){for(var I=0,Y=this.branches;I<Y.length;I+=1){var le=Y[I],ke=le[0],Ce=le[1];A(ke),A(Ce)}A(this.otherwise)},So.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},So.prototype.serialize=function(){var A=["case"];return this.eachChild(function(I){A.push(I.serialize())}),A};var Qi=function(A,I,Y,le){this.type=A,this.input=I,this.beginIndex=Y,this.endIndex=le};function Ks(A,I){return A==="=="||A==="!="?I.kind==="boolean"||I.kind==="string"||I.kind==="number"||I.kind==="null"||I.kind==="value":I.kind==="string"||I.kind==="number"||I.kind==="value"}function Bs(A,I,Y,le){return le.compare(I,Y)===0}function Ho(A,I,Y){var le=A!=="=="&&A!=="!=";return function(){function ke(Ce,je,Ke){this.type=Wt,this.lhs=Ce,this.rhs=je,this.collator=Ke,this.hasUntypedArgument=Ce.type.kind==="value"||je.type.kind==="value"}return ke.parse=function(Ce,je){if(Ce.length!==3&&Ce.length!==4)return je.error("Expected two or three arguments.");var Ke=Ce[0],st=je.parse(Ce[1],1,Ht);if(!st)return null;if(!Ks(Ke,st.type))return je.concat(1).error('"'+Ke+`" comparisons are not supported for type '`+Zt(st.type)+"'.");var mt=je.parse(Ce[2],2,Ht);if(!mt)return null;if(!Ks(Ke,mt.type))return je.concat(2).error('"'+Ke+`" comparisons are not supported for type '`+Zt(mt.type)+"'.");if(st.type.kind!==mt.type.kind&&st.type.kind!=="value"&&mt.type.kind!=="value")return je.error("Cannot compare types '"+Zt(st.type)+"' and '"+Zt(mt.type)+"'.");le&&(st.type.kind==="value"&&mt.type.kind!=="value"?st=new gn(mt.type,[st]):st.type.kind!=="value"&&mt.type.kind==="value"&&(mt=new gn(st.type,[mt])));var _t=null;if(Ce.length===4){if(st.type.kind!=="string"&&mt.type.kind!=="string"&&st.type.kind!=="value"&&mt.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(_t=je.parse(Ce[3],3,Qt)))return null}return new ke(st,mt,_t)},ke.prototype.evaluate=function(Ce){var je=this.lhs.evaluate(Ce),Ke=this.rhs.evaluate(Ce);if(le&&this.hasUntypedArgument){var st=Wn(je),mt=Wn(Ke);if(st.kind!==mt.kind||st.kind!=="string"&&st.kind!=="number")throw new en('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+st.kind+", "+mt.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var _t=Wn(je),Dt=Wn(Ke);if(_t.kind!=="string"||Dt.kind!=="string")return I(Ce,je,Ke)}return this.collator?Y(Ce,je,Ke,this.collator.evaluate(Ce)):I(Ce,je,Ke)},ke.prototype.eachChild=function(Ce){Ce(this.lhs),Ce(this.rhs),this.collator&&Ce(this.collator)},ke.prototype.outputDefined=function(){return!0},ke.prototype.serialize=function(){var Ce=[A];return this.eachChild(function(je){Ce.push(je.serialize())}),Ce},ke}()}Qi.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Ht),le=I.parse(A[2],2,Ct);if(!Y||!le)return null;if(!ln(Y.type,[hn(Ht),It,Ht]))return I.error("Expected first argument to be of type array or string, but found "+Zt(Y.type)+" instead");if(A.length===4){var ke=I.parse(A[3],3,Ct);return ke?new Qi(Y.type,Y,le,ke):null}return new Qi(Y.type,Y,le)},Qi.prototype.evaluate=function(A){var I=this.input.evaluate(A),Y=this.beginIndex.evaluate(A);if(!mn(I,["string","array"]))throw new en("Expected first argument to be of type array or string, but found "+Zt(Wn(I))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(A);return I.slice(Y,le)}return I.slice(Y)},Qi.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Qi.prototype.outputDefined=function(){return!1},Qi.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var il=Ho("==",function(A,I,Y){return I===Y},Bs),ol=Ho("!=",function(A,I,Y){return I!==Y},function(A,I,Y,le){return!Bs(0,I,Y,le)}),Go=Ho("<",function(A,I,Y){return I<Y},function(A,I,Y,le){return le.compare(I,Y)<0}),sl=Ho(">",function(A,I,Y){return I>Y},function(A,I,Y,le){return le.compare(I,Y)>0}),xl=Ho("<=",function(A,I,Y){return I<=Y},function(A,I,Y,le){return le.compare(I,Y)<=0}),bl=Ho(">=",function(A,I,Y){return I>=Y},function(A,I,Y,le){return le.compare(I,Y)>=0}),Wo=function(A,I,Y,le,ke){this.type=It,this.number=A,this.locale=I,this.currency=Y,this.minFractionDigits=le,this.maxFractionDigits=ke};Wo.parse=function(A,I){if(A.length!==3)return I.error("Expected two arguments.");var Y=I.parse(A[1],1,Ct);if(!Y)return null;var le=A[2];if(typeof le!="object"||Array.isArray(le))return I.error("NumberFormat options argument must be an object.");var ke=null;if(le.locale&&!(ke=I.parse(le.locale,1,It)))return null;var Ce=null;if(le.currency&&!(Ce=I.parse(le.currency,1,It)))return null;var je=null;if(le["min-fraction-digits"]&&!(je=I.parse(le["min-fraction-digits"],1,Ct)))return null;var Ke=null;return le["max-fraction-digits"]&&!(Ke=I.parse(le["max-fraction-digits"],1,Ct))?null:new Wo(Y,ke,Ce,je,Ke)},Wo.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},Wo.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var eo=function(A){this.type=Ct,this.input=A};eo.parse=function(A,I){if(A.length!==2)return I.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1);return Y?Y.type.kind!=="array"&&Y.type.kind!=="string"&&Y.type.kind!=="value"?I.error("Expected argument of type string or array, but found "+Zt(Y.type)+" instead."):new eo(Y):null},eo.prototype.evaluate=function(A){var I=this.input.evaluate(A);if(typeof I=="string"||Array.isArray(I))return I.length;throw new en("Expected value to be of type string or array, but found "+Zt(Wn(I))+" instead.")},eo.prototype.eachChild=function(A){A(this.input)},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){var A=["length"];return this.eachChild(function(I){A.push(I.serialize())}),A};var as={"==":il,"!=":ol,">":sl,"<":Go,">=":bl,"<=":xl,array:gn,at:Ao,boolean:gn,case:So,coalesce:Ji,collator:bt,format:Ln,image:Hn,in:$i,"index-of":Mo,interpolate:za,"interpolate-hcl":za,"interpolate-lab":za,length:eo,let:Ri,literal:Jt,match:fo,number:gn,"number-format":Wo,object:gn,slice:Qi,step:xr,string:gn,"to-boolean":Yn,"to-color":Yn,"to-number":Yn,"to-string":Yn,var:mr,within:Qn};function Yo(A,I){var Y=I[0],le=I[1],ke=I[2],Ce=I[3];Y=Y.evaluate(A),le=le.evaluate(A),ke=ke.evaluate(A);var je=Ce?Ce.evaluate(A):1,Ke=tr(Y,le,ke,je);if(Ke)throw new en(Ke);return new Mn(Y/255*je,le/255*je,ke/255*je,je)}function bs(A,I){return A in I}function Zo(A,I){var Y=I[A];return Y===void 0?null:Y}function Fi(A){return{type:A}}function Js(A){return{result:"success",value:A}}function Eo(A){return{result:"error",value:A}}function ho(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function po(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Lo(A){return!!A.expression&&A.expression.interpolated}function Ur(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function is(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function _l(A){return A}function Ns(A,I){var Y,le,ke,Ce=I.type==="color",je=A.stops&&typeof A.stops[0][0]=="object",Ke=je||A.property!==void 0,st=je||!Ke,mt=A.type||(Lo(I)?"exponential":"interval");if(Ce&&((A=gt({},A)).stops&&(A.stops=A.stops.map(function(cr){return[cr[0],Mn.parse(cr[1])]})),A.default?A.default=Mn.parse(A.default):A.default=Mn.parse(I.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!pa[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(mt==="exponential")Y=js;else if(mt==="interval")Y=wl;else if(mt==="categorical"){Y=ll,le=Object.create(null);for(var _t=0,Dt=A.stops;_t<Dt.length;_t+=1){var jt=Dt[_t];le[jt[0]]=jt[1]}ke=typeof A.stops[0][0]}else{if(mt!=="identity")throw new Error('Unknown function type "'+mt+'"');Y=Tl}if(je){for(var Rt={},rn=[],on=0;on<A.stops.length;on++){var bn=A.stops[on],yn=bn[0].zoom;Rt[yn]===void 0&&(Rt[yn]={zoom:yn,type:A.type,property:A.property,default:A.default,stops:[]},rn.push(yn)),Rt[yn].stops.push([bn[0].value,bn[1]])}for(var On=[],Dn=0,Un=rn;Dn<Un.length;Dn+=1){var Gn=Un[Dn];On.push([Rt[Gn].zoom,Ns(Rt[Gn],I)])}var nr={name:"linear"};return{kind:"composite",interpolationType:nr,interpolationFactor:za.interpolationFactor.bind(void 0,nr),zoomStops:On.map(function(cr){return cr[0]}),evaluate:function(cr,yr){var _r=cr.zoom;return js({stops:On,base:A.base},I,_r).evaluate(_r,yr)}}}if(st){var pr=mt==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:pr,interpolationFactor:za.interpolationFactor.bind(void 0,pr),zoomStops:A.stops.map(function(cr){return cr[0]}),evaluate:function(cr){var yr=cr.zoom;return Y(A,I,yr,le,ke)}}}return{kind:"source",evaluate:function(cr,yr){var _r=yr&&yr.properties?yr.properties[A.property]:void 0;return _r===void 0?os(A.default,I.default):Y(A,I,_r,le,ke)}}}function os(A,I,Y){return A!==void 0?A:I!==void 0?I:Y!==void 0?Y:void 0}function ll(A,I,Y,le,ke){return os(typeof Y===ke?le[Y]:void 0,A.default,I.default)}function wl(A,I,Y){if(Ur(Y)!=="number")return os(A.default,I.default);var le=A.stops.length;if(le===1||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[le-1][0])return A.stops[le-1][1];var ke=gr(A.stops.map(function(Ce){return Ce[0]}),Y);return A.stops[ke][1]}function js(A,I,Y){var le=A.base!==void 0?A.base:1;if(Ur(Y)!=="number")return os(A.default,I.default);var ke=A.stops.length;if(ke===1||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[ke-1][0])return A.stops[ke-1][1];var Ce=gr(A.stops.map(function(Dt){return Dt[0]}),Y),je=function(Dt,jt,Rt,rn){var on=rn-Rt,bn=Dt-Rt;return on===0?0:jt===1?bn/on:(Math.pow(jt,bn)-1)/(Math.pow(jt,on)-1)}(Y,le,A.stops[Ce][0],A.stops[Ce+1][0]),Ke=A.stops[Ce][1],st=A.stops[Ce+1][1],mt=aa[I.type]||_l;if(A.colorSpace&&A.colorSpace!=="rgb"){var _t=pa[A.colorSpace];mt=function(Dt,jt){return _t.reverse(_t.interpolate(_t.forward(Dt),_t.forward(jt),je))}}return typeof Ke.evaluate=="function"?{evaluate:function(){for(var Dt=[],jt=arguments.length;jt--;)Dt[jt]=arguments[jt];var Rt=Ke.evaluate.apply(void 0,Dt),rn=st.evaluate.apply(void 0,Dt);if(Rt!==void 0&&rn!==void 0)return mt(Rt,rn,je)}}:mt(Ke,st,je)}function Tl(A,I,Y){return I.type==="color"?Y=Mn.parse(Y):I.type==="formatted"?Y=In.fromString(Y.toString()):I.type==="resolvedImage"?Y=Vn.fromString(Y.toString()):Ur(Y)===I.type||I.type==="enum"&&I.values[Y]||(Y=void 0),os(Y,A.default,I.default)}pn.register(as,{error:[{kind:"error"},[It],function(A,I){var Y=I[0];throw new en(Y.evaluate(A))}],typeof:[It,[Ht],function(A,I){return Zt(Wn(I[0].evaluate(A)))}],"to-rgba":[hn(Ct,4),[Nt],function(A,I){return I[0].evaluate(A).toArray()}],rgb:[Nt,[Ct,Ct,Ct],Yo],rgba:[Nt,[Ct,Ct,Ct,Ct],Yo],has:{type:Wt,overloads:[[[It],function(A,I){return bs(I[0].evaluate(A),A.properties())}],[[It,Bt],function(A,I){var Y=I[0],le=I[1];return bs(Y.evaluate(A),le.evaluate(A))}]]},get:{type:Ht,overloads:[[[It],function(A,I){return Zo(I[0].evaluate(A),A.properties())}],[[It,Bt],function(A,I){var Y=I[0],le=I[1];return Zo(Y.evaluate(A),le.evaluate(A))}]]},"feature-state":[Ht,[It],function(A,I){return Zo(I[0].evaluate(A),A.featureState||{})}],properties:[Bt,[],function(A){return A.properties()}],"geometry-type":[It,[],function(A){return A.geometryType()}],id:[Ht,[],function(A){return A.id()}],zoom:[Ct,[],function(A){return A.globals.zoom}],"heatmap-density":[Ct,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Ct,[],function(A){return A.globals.lineProgress||0}],accumulated:[Ht,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[Ct,Fi(Ct),function(A,I){for(var Y=0,le=0,ke=I;le<ke.length;le+=1)Y+=ke[le].evaluate(A);return Y}],"*":[Ct,Fi(Ct),function(A,I){for(var Y=1,le=0,ke=I;le<ke.length;le+=1)Y*=ke[le].evaluate(A);return Y}],"-":{type:Ct,overloads:[[[Ct,Ct],function(A,I){var Y=I[0],le=I[1];return Y.evaluate(A)-le.evaluate(A)}],[[Ct],function(A,I){return-I[0].evaluate(A)}]]},"/":[Ct,[Ct,Ct],function(A,I){var Y=I[0],le=I[1];return Y.evaluate(A)/le.evaluate(A)}],"%":[Ct,[Ct,Ct],function(A,I){var Y=I[0],le=I[1];return Y.evaluate(A)%le.evaluate(A)}],ln2:[Ct,[],function(){return Math.LN2}],pi:[Ct,[],function(){return Math.PI}],e:[Ct,[],function(){return Math.E}],"^":[Ct,[Ct,Ct],function(A,I){var Y=I[0],le=I[1];return Math.pow(Y.evaluate(A),le.evaluate(A))}],sqrt:[Ct,[Ct],function(A,I){var Y=I[0];return Math.sqrt(Y.evaluate(A))}],log10:[Ct,[Ct],function(A,I){var Y=I[0];return Math.log(Y.evaluate(A))/Math.LN10}],ln:[Ct,[Ct],function(A,I){var Y=I[0];return Math.log(Y.evaluate(A))}],log2:[Ct,[Ct],function(A,I){var Y=I[0];return Math.log(Y.evaluate(A))/Math.LN2}],sin:[Ct,[Ct],function(A,I){var Y=I[0];return Math.sin(Y.evaluate(A))}],cos:[Ct,[Ct],function(A,I){var Y=I[0];return Math.cos(Y.evaluate(A))}],tan:[Ct,[Ct],function(A,I){var Y=I[0];return Math.tan(Y.evaluate(A))}],asin:[Ct,[Ct],function(A,I){var Y=I[0];return Math.asin(Y.evaluate(A))}],acos:[Ct,[Ct],function(A,I){var Y=I[0];return Math.acos(Y.evaluate(A))}],atan:[Ct,[Ct],function(A,I){var Y=I[0];return Math.atan(Y.evaluate(A))}],min:[Ct,Fi(Ct),function(A,I){return Math.min.apply(Math,I.map(function(Y){return Y.evaluate(A)}))}],max:[Ct,Fi(Ct),function(A,I){return Math.max.apply(Math,I.map(function(Y){return Y.evaluate(A)}))}],abs:[Ct,[Ct],function(A,I){var Y=I[0];return Math.abs(Y.evaluate(A))}],round:[Ct,[Ct],function(A,I){var Y=I[0].evaluate(A);return Y<0?-Math.round(-Y):Math.round(Y)}],floor:[Ct,[Ct],function(A,I){var Y=I[0];return Math.floor(Y.evaluate(A))}],ceil:[Ct,[Ct],function(A,I){var Y=I[0];return Math.ceil(Y.evaluate(A))}],"filter-==":[Wt,[It,Ht],function(A,I){var Y=I[0],le=I[1];return A.properties()[Y.value]===le.value}],"filter-id-==":[Wt,[Ht],function(A,I){var Y=I[0];return A.id()===Y.value}],"filter-type-==":[Wt,[It],function(A,I){var Y=I[0];return A.geometryType()===Y.value}],"filter-<":[Wt,[It,Ht],function(A,I){var Y=I[0],le=I[1],ke=A.properties()[Y.value],Ce=le.value;return typeof ke==typeof Ce&&ke<Ce}],"filter-id-<":[Wt,[Ht],function(A,I){var Y=I[0],le=A.id(),ke=Y.value;return typeof le==typeof ke&&le<ke}],"filter->":[Wt,[It,Ht],function(A,I){var Y=I[0],le=I[1],ke=A.properties()[Y.value],Ce=le.value;return typeof ke==typeof Ce&&ke>Ce}],"filter-id->":[Wt,[Ht],function(A,I){var Y=I[0],le=A.id(),ke=Y.value;return typeof le==typeof ke&&le>ke}],"filter-<=":[Wt,[It,Ht],function(A,I){var Y=I[0],le=I[1],ke=A.properties()[Y.value],Ce=le.value;return typeof ke==typeof Ce&&ke<=Ce}],"filter-id-<=":[Wt,[Ht],function(A,I){var Y=I[0],le=A.id(),ke=Y.value;return typeof le==typeof ke&&le<=ke}],"filter->=":[Wt,[It,Ht],function(A,I){var Y=I[0],le=I[1],ke=A.properties()[Y.value],Ce=le.value;return typeof ke==typeof Ce&&ke>=Ce}],"filter-id->=":[Wt,[Ht],function(A,I){var Y=I[0],le=A.id(),ke=Y.value;return typeof le==typeof ke&&le>=ke}],"filter-has":[Wt,[Ht],function(A,I){return I[0].value in A.properties()}],"filter-has-id":[Wt,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[Wt,[hn(It)],function(A,I){return I[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Wt,[hn(Ht)],function(A,I){return I[0].value.indexOf(A.id())>=0}],"filter-in-small":[Wt,[It,hn(Ht)],function(A,I){var Y=I[0];return I[1].value.indexOf(A.properties()[Y.value])>=0}],"filter-in-large":[Wt,[It,hn(Ht)],function(A,I){var Y=I[0],le=I[1];return function(ke,Ce,je,Ke){for(;je<=Ke;){var st=je+Ke>>1;if(Ce[st]===ke)return!0;Ce[st]>ke?Ke=st-1:je=st+1}return!1}(A.properties()[Y.value],le.value,0,le.value.length-1)}],all:{type:Wt,overloads:[[[Wt,Wt],function(A,I){var Y=I[0],le=I[1];return Y.evaluate(A)&&le.evaluate(A)}],[Fi(Wt),function(A,I){for(var Y=0,le=I;Y<le.length;Y+=1)if(!le[Y].evaluate(A))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],function(A,I){var Y=I[0],le=I[1];return Y.evaluate(A)||le.evaluate(A)}],[Fi(Wt),function(A,I){for(var Y=0,le=I;Y<le.length;Y+=1)if(le[Y].evaluate(A))return!0;return!1}]]},"!":[Wt,[Wt],function(A,I){return!I[0].evaluate(A)}],"is-supported-script":[Wt,[It],function(A,I){var Y=I[0],le=A.globals&&A.globals.isSupportedScript;return!le||le(Y.evaluate(A))}],upcase:[It,[It],function(A,I){return I[0].evaluate(A).toUpperCase()}],downcase:[It,[It],function(A,I){return I[0].evaluate(A).toLowerCase()}],concat:[It,Fi(Ht),function(A,I){return I.map(function(Y){return or(Y.evaluate(A))}).join("")}],"resolved-locale":[It,[Qt],function(A,I){return I[0].evaluate(A).resolvedLocale()}]});var Co=function(A,I){this.expression=A,this._warningHistory={},this._evaluator=new Xt,this._defaultValue=I?function(Y){return Y.type==="color"&&is(Y.default)?new Mn(0,0,0,0):Y.type==="color"?Mn.parse(Y.default)||null:Y.default===void 0?null:Y.default}(I):null,this._enumValues=I&&I.type==="enum"?I.values:null};function Xo(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in as}function go(A,I){var Y=new hr(as,[],I?function(ke){var Ce={color:Nt,string:It,number:Ct,enum:It,boolean:Wt,formatted:Cn,resolvedImage:Tn};return ke.type==="array"?hn(Ce[ke.value]||Ht,ke.length):Ce[ke.type]}(I):void 0),le=Y.parse(A,void 0,void 0,void 0,I&&I.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?Js(new Co(le,I)):Eo(Y.errors)}Co.prototype.evaluateWithoutErrorHandling=function(A,I,Y,le,ke,Ce){return this._evaluator.globals=A,this._evaluator.feature=I,this._evaluator.featureState=Y,this._evaluator.canonical=le,this._evaluator.availableImages=ke||null,this._evaluator.formattedSection=Ce,this.expression.evaluate(this._evaluator)},Co.prototype.evaluate=function(A,I,Y,le,ke,Ce){this._evaluator.globals=A,this._evaluator.feature=I||null,this._evaluator.featureState=Y||null,this._evaluator.canonical=le,this._evaluator.availableImages=ke||null,this._evaluator.formattedSection=Ce||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new en("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ke){return JSON.stringify(Ke)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Ke){return this._warningHistory[Ke.message]||(this._warningHistory[Ke.message]=!0,typeof console<"u"&&console.warn(Ke.message)),this._defaultValue}};var Bi=function(A,I){this.kind=A,this._styleExpression=I,this.isStateDependent=A!=="constant"&&!Zn(I.expression)};Bi.prototype.evaluateWithoutErrorHandling=function(A,I,Y,le,ke,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Y,le,ke,Ce)},Bi.prototype.evaluate=function(A,I,Y,le,ke,Ce){return this._styleExpression.evaluate(A,I,Y,le,ke,Ce)};var ss=function(A,I,Y,le){this.kind=A,this.zoomStops=Y,this._styleExpression=I,this.isStateDependent=A!=="camera"&&!Zn(I.expression),this.interpolationType=le};function ul(A,I){if((A=go(A,I)).result==="error")return A;var Y=A.value.expression,le=Jn(Y);if(!le&&!ho(I))return Eo([new yt("","data expressions not supported")]);var ke=ur(Y,["zoom"]);if(!ke&&!po(I))return Eo([new yt("","zoom expressions not supported")]);var Ce=Us(Y);if(!Ce&&!ke)return Eo([new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ce instanceof yt)return Eo([Ce]);if(Ce instanceof za&&!Lo(I))return Eo([new yt("",'"interpolate" expressions cannot be used with this property')]);if(!Ce)return Js(new Bi(le?"constant":"source",A.value));var je=Ce instanceof za?Ce.interpolation:void 0;return Js(new ss(le?"camera":"composite",A.value,Ce.labels,je))}ss.prototype.evaluateWithoutErrorHandling=function(A,I,Y,le,ke,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Y,le,ke,Ce)},ss.prototype.evaluate=function(A,I,Y,le,ke,Ce){return this._styleExpression.evaluate(A,I,Y,le,ke,Ce)},ss.prototype.interpolationFactor=function(A,I,Y){return this.interpolationType?za.interpolationFactor(this.interpolationType,A,I,Y):0};var _s=function(A,I){this._parameters=A,this._specification=I,gt(this,Ns(this._parameters,this._specification))};function Us(A){var I=null;if(A instanceof Ri)I=Us(A.result);else if(A instanceof Ji)for(var Y=0,le=A.args;Y<le.length;Y+=1){var ke=le[Y];if(I=Us(ke))break}else(A instanceof xr||A instanceof za)&&A.input instanceof pn&&A.input.name==="zoom"&&(I=A);return I instanceof yt||A.eachChild(function(Ce){var je=Us(Ce);je instanceof yt?I=je:!I&&je?I=new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):I&&je&&I!==je&&(I=new yt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),I}function bi(A){var I=A.key,Y=A.value,le=A.valueSpec||{},ke=A.objectElementValidators||{},Ce=A.style,je=A.styleSpec,Ke=[],st=Ur(Y);if(st!=="object")return[new ct(I,Y,"object expected, "+st+" found")];for(var mt in Y){var _t=mt.split(".")[0],Dt=le[_t]||le["*"],jt=void 0;if(ke[_t])jt=ke[_t];else if(le[_t])jt=Li;else if(ke["*"])jt=ke["*"];else{if(!le["*"]){Ke.push(new ct(I,Y[mt],'unknown property "'+mt+'"'));continue}jt=Li}Ke=Ke.concat(jt({key:(I&&I+".")+mt,value:Y[mt],valueSpec:Dt,style:Ce,styleSpec:je,object:Y,objectKey:mt},Y))}for(var Rt in le)ke[Rt]||le[Rt].required&&le[Rt].default===void 0&&Y[Rt]===void 0&&Ke.push(new ct(I,Y,'missing required property "'+Rt+'"'));return Ke}function Vs(A){var I=A.value,Y=A.valueSpec,le=A.style,ke=A.styleSpec,Ce=A.key,je=A.arrayElementValidator||Li;if(Ur(I)!=="array")return[new ct(Ce,I,"array expected, "+Ur(I)+" found")];if(Y.length&&I.length!==Y.length)return[new ct(Ce,I,"array length "+Y.length+" expected, length "+I.length+" found")];if(Y["min-length"]&&I.length<Y["min-length"])return[new ct(Ce,I,"array length at least "+Y["min-length"]+" expected, length "+I.length+" found")];var Ke={type:Y.value,values:Y.values};ke.$version<7&&(Ke.function=Y.function),Ur(Y.value)==="object"&&(Ke=Y.value);for(var st=[],mt=0;mt<I.length;mt++)st=st.concat(je({array:I,arrayIndex:mt,value:I[mt],valueSpec:Ke,style:le,styleSpec:ke,key:Ce+"["+mt+"]"}));return st}function cl(A){var I=A.key,Y=A.value,le=A.valueSpec,ke=Ur(Y);return ke==="number"&&Y!=Y&&(ke="NaN"),ke!=="number"?[new ct(I,Y,"number expected, "+ke+" found")]:"minimum"in le&&Y<le.minimum?[new ct(I,Y,Y+" is less than the minimum value "+le.minimum)]:"maximum"in le&&Y>le.maximum?[new ct(I,Y,Y+" is greater than the maximum value "+le.maximum)]:[]}function ls(A){var I,Y,le,ke=A.valueSpec,Ce=ut(A.value.type),je={},Ke=Ce!=="categorical"&&A.value.property===void 0,st=!Ke,mt=Ur(A.value.stops)==="array"&&Ur(A.value.stops[0])==="array"&&Ur(A.value.stops[0][0])==="object",_t=bi({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Rt){if(Ce==="identity")return[new ct(Rt.key,Rt.value,'identity function may not have a "stops" property')];var rn=[],on=Rt.value;return rn=rn.concat(Vs({key:Rt.key,value:on,valueSpec:Rt.valueSpec,style:Rt.style,styleSpec:Rt.styleSpec,arrayElementValidator:Dt})),Ur(on)==="array"&&on.length===0&&rn.push(new ct(Rt.key,on,"array must have at least one stop")),rn},default:function(Rt){return Li({key:Rt.key,value:Rt.value,valueSpec:ke,style:Rt.style,styleSpec:Rt.styleSpec})}}});return Ce==="identity"&&Ke&&_t.push(new ct(A.key,A.value,'missing required property "property"')),Ce==="identity"||A.value.stops||_t.push(new ct(A.key,A.value,'missing required property "stops"')),Ce==="exponential"&&A.valueSpec.expression&&!Lo(A.valueSpec)&&_t.push(new ct(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(st&&!ho(A.valueSpec)?_t.push(new ct(A.key,A.value,"property functions not supported")):Ke&&!po(A.valueSpec)&&_t.push(new ct(A.key,A.value,"zoom functions not supported"))),Ce!=="categorical"&&!mt||A.value.property!==void 0||_t.push(new ct(A.key,A.value,'"property" property is required')),_t;function Dt(Rt){var rn=[],on=Rt.value,bn=Rt.key;if(Ur(on)!=="array")return[new ct(bn,on,"array expected, "+Ur(on)+" found")];if(on.length!==2)return[new ct(bn,on,"array length 2 expected, length "+on.length+" found")];if(mt){if(Ur(on[0])!=="object")return[new ct(bn,on,"object expected, "+Ur(on[0])+" found")];if(on[0].zoom===void 0)return[new ct(bn,on,"object stop key must have zoom")];if(on[0].value===void 0)return[new ct(bn,on,"object stop key must have value")];if(le&&le>ut(on[0].zoom))return[new ct(bn,on[0].zoom,"stop zoom values must appear in ascending order")];ut(on[0].zoom)!==le&&(le=ut(on[0].zoom),Y=void 0,je={}),rn=rn.concat(bi({key:bn+"[0]",value:on[0],valueSpec:{zoom:{}},style:Rt.style,styleSpec:Rt.styleSpec,objectElementValidators:{zoom:cl,value:jt}}))}else rn=rn.concat(jt({key:bn+"[0]",value:on[0],style:Rt.style,styleSpec:Rt.styleSpec},on));return Xo(kt(on[1]))?rn.concat([new ct(bn+"[1]",on[1],"expressions are not allowed in function stops.")]):rn.concat(Li({key:bn+"[1]",value:on[1],valueSpec:ke,style:Rt.style,styleSpec:Rt.styleSpec}))}function jt(Rt,rn){var on=Ur(Rt.value),bn=ut(Rt.value),yn=Rt.value!==null?Rt.value:rn;if(I){if(on!==I)return[new ct(Rt.key,yn,on+" stop domain type must match previous stop domain type "+I)]}else I=on;if(on!=="number"&&on!=="string"&&on!=="boolean")return[new ct(Rt.key,yn,"stop domain value must be a number, string, or boolean")];if(on!=="number"&&Ce!=="categorical"){var On="number expected, "+on+" found";return ho(ke)&&Ce===void 0&&(On+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ct(Rt.key,yn,On)]}return Ce!=="categorical"||on!=="number"||isFinite(bn)&&Math.floor(bn)===bn?Ce!=="categorical"&&on==="number"&&Y!==void 0&&bn<Y?[new ct(Rt.key,yn,"stop domain values must appear in ascending order")]:(Y=bn,Ce==="categorical"&&bn in je?[new ct(Rt.key,yn,"stop domain values must be unique")]:(je[bn]=!0,[])):[new ct(Rt.key,yn,"integer expected, found "+bn)]}}function Ko(A){var I=(A.expressionContext==="property"?ul:go)(kt(A.value),A.valueSpec);if(I.result==="error")return I.value.map(function(le){return new ct(""+A.key+le.key,A.value,le.message)});var Y=I.value.expression||I.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!Y.outputDefined())return[new ct(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!Zn(Y))return[new ct(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!Zn(Y))return[new ct(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!ur(Y,["zoom","feature-state"]))return[new ct(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Jn(Y))return[new ct(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function us(A){var I=A.key,Y=A.value,le=A.valueSpec,ke=[];return Array.isArray(le.values)?le.values.indexOf(ut(Y))===-1&&ke.push(new ct(I,Y,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(Y)+" found")):Object.keys(le.values).indexOf(ut(Y))===-1&&ke.push(new ct(I,Y,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(Y)+" found")),ke}function Jo(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var I=0,Y=A.slice(1);I<Y.length;I+=1){var le=Y[I];if(!Jo(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}_s.deserialize=function(A){return new _s(A._parameters,A._specification)},_s.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var $o={type:"boolean",default:!1};function ws(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};Jo(A)||(A=Po(A));var I=go(A,$o);if(I.result==="error")throw new Error(I.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return{filter:function(Y,le,ke){return I.value.evaluate(Y,le,{},ke)},needGeometry:$r(A)}}function qs(A,I){return A<I?-1:A>I?1:0}function $r(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var I=1;I<A.length;I++)if($r(A[I]))return!0;return!1}function Po(A){if(!A)return!0;var I,Y=A[0];return A.length<=1?Y!=="any":Y==="=="?Xa(A[1],A[2],"=="):Y==="!="?Jr(Xa(A[1],A[2],"==")):Y==="<"||Y===">"||Y==="<="||Y===">="?Xa(A[1],A[2],Y):Y==="any"?(I=A.slice(1),["any"].concat(I.map(Po))):Y==="all"?["all"].concat(A.slice(1).map(Po)):Y==="none"?["all"].concat(A.slice(1).map(Po).map(Jr)):Y==="in"?Ni(A[1],A.slice(2)):Y==="!in"?Jr(Ni(A[1],A.slice(2))):Y==="has"?Wr(A[1]):Y==="!has"?Jr(Wr(A[1])):Y!=="within"||A}function Xa(A,I,Y){switch(A){case"$type":return["filter-type-"+Y,I];case"$id":return["filter-id-"+Y,I];default:return["filter-"+Y,A,I]}}function Ni(A,I){if(I.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(Y){return typeof Y!=typeof I[0]})?["filter-in-large",A,["literal",I.sort(qs)]]:["filter-in-small",A,["literal",I]]}}function Wr(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Jr(A){return["!",A]}function _i(A){return Jo(kt(A.value))?Ko(gt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cs(A)}function cs(A){var I=A.value,Y=A.key;if(Ur(I)!=="array")return[new ct(Y,I,"array expected, "+Ur(I)+" found")];var le,ke=A.styleSpec,Ce=[];if(I.length<1)return[new ct(Y,I,"filter array must have at least 1 element")];switch(Ce=Ce.concat(us({key:Y+"[0]",value:I[0],valueSpec:ke.filter_operator,style:A.style,styleSpec:A.styleSpec})),ut(I[0])){case"<":case"<=":case">":case">=":I.length>=2&&ut(I[1])==="$type"&&Ce.push(new ct(Y,I,'"$type" cannot be use with operator "'+I[0]+'"'));case"==":case"!=":I.length!==3&&Ce.push(new ct(Y,I,'filter array for operator "'+I[0]+'" must have 3 elements'));case"in":case"!in":I.length>=2&&(le=Ur(I[1]))!=="string"&&Ce.push(new ct(Y+"[1]",I[1],"string expected, "+le+" found"));for(var je=2;je<I.length;je++)le=Ur(I[je]),ut(I[1])==="$type"?Ce=Ce.concat(us({key:Y+"["+je+"]",value:I[je],valueSpec:ke.geometry_type,style:A.style,styleSpec:A.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Ce.push(new ct(Y+"["+je+"]",I[je],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var Ke=1;Ke<I.length;Ke++)Ce=Ce.concat(cs({key:Y+"["+Ke+"]",value:I[Ke],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":le=Ur(I[1]),I.length!==2?Ce.push(new ct(Y,I,'filter array for "'+I[0]+'" operator must have 2 elements')):le!=="string"&&Ce.push(new ct(Y+"[1]",I[1],"string expected, "+le+" found"));break;case"within":le=Ur(I[1]),I.length!==2?Ce.push(new ct(Y,I,'filter array for "'+I[0]+'" operator must have 2 elements')):le!=="object"&&Ce.push(new ct(Y+"[1]",I[1],"object expected, "+le+" found"))}return Ce}function Ts(A,I){var Y=A.key,le=A.style,ke=A.styleSpec,Ce=A.value,je=A.objectKey,Ke=ke[I+"_"+A.layerType];if(!Ke)return[];var st=je.match(/^(.*)-transition$/);if(I==="paint"&&st&&Ke[st[1]]&&Ke[st[1]].transition)return Li({key:Y,value:Ce,valueSpec:ke.transition,style:le,styleSpec:ke});var mt,_t=A.valueSpec||Ke[je];if(!_t)return[new ct(Y,Ce,'unknown property "'+je+'"')];if(Ur(Ce)==="string"&&ho(_t)&&!_t.tokens&&(mt=/^{([^}]+)}$/.exec(Ce)))return[new ct(Y,Ce,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(mt[1])+" }`.")];var Dt=[];return A.layerType==="symbol"&&(je==="text-field"&&le&&!le.glyphs&&Dt.push(new ct(Y,Ce,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&is(kt(Ce))&&ut(Ce.type)==="identity"&&Dt.push(new ct(Y,Ce,'"text-font" does not support identity functions'))),Dt.concat(Li({key:A.key,value:Ce,valueSpec:_t,style:le,styleSpec:ke,expressionContext:"property",propertyType:I,propertyKey:je}))}function Hs(A){return Ts(A,"paint")}function ks(A){return Ts(A,"layout")}function As(A){var I=[],Y=A.value,le=A.key,ke=A.style,Ce=A.styleSpec;Y.type||Y.ref||I.push(new ct(le,Y,'either "type" or "ref" is required'));var je,Ke=ut(Y.type),st=ut(Y.ref);if(Y.id)for(var mt=ut(Y.id),_t=0;_t<A.arrayIndex;_t++){var Dt=ke.layers[_t];ut(Dt.id)===mt&&I.push(new ct(le,Y.id,'duplicate layer id "'+Y.id+'", previously used at line '+Dt.id.__line__))}if("ref"in Y)["type","source","source-layer","filter","layout"].forEach(function(rn){rn in Y&&I.push(new ct(le,Y[rn],'"'+rn+'" is prohibited for ref layers'))}),ke.layers.forEach(function(rn){ut(rn.id)===st&&(je=rn)}),je?je.ref?I.push(new ct(le,Y.ref,"ref cannot reference another ref layer")):Ke=ut(je.type):I.push(new ct(le,Y.ref,'ref layer "'+st+'" not found'));else if(Ke!=="background")if(Y.source){var jt=ke.sources&&ke.sources[Y.source],Rt=jt&&ut(jt.type);jt?Rt==="vector"&&Ke==="raster"?I.push(new ct(le,Y.source,'layer "'+Y.id+'" requires a raster source')):Rt==="raster"&&Ke!=="raster"?I.push(new ct(le,Y.source,'layer "'+Y.id+'" requires a vector source')):Rt!=="vector"||Y["source-layer"]?Rt==="raster-dem"&&Ke!=="hillshade"?I.push(new ct(le,Y.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ke!=="line"||!Y.paint||!Y.paint["line-gradient"]||Rt==="geojson"&&jt.lineMetrics||I.push(new ct(le,Y,'layer "'+Y.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new ct(le,Y,'layer "'+Y.id+'" must specify a "source-layer"')):I.push(new ct(le,Y.source,'source "'+Y.source+'" not found'))}else I.push(new ct(le,Y,'missing required property "source"'));return I=I.concat(bi({key:le,value:Y,valueSpec:Ce.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Li({key:le+".type",value:Y.type,valueSpec:Ce.layer.type,style:A.style,styleSpec:A.styleSpec,object:Y,objectKey:"type"})},filter:_i,layout:function(rn){return bi({layer:Y,key:rn.key,value:rn.value,style:rn.style,styleSpec:rn.styleSpec,objectElementValidators:{"*":function(on){return ks(gt({layerType:Ke},on))}}})},paint:function(rn){return bi({layer:Y,key:rn.key,value:rn.value,style:rn.style,styleSpec:rn.styleSpec,objectElementValidators:{"*":function(on){return Hs(gt({layerType:Ke},on))}}})}}})),I}function Ei(A){var I=A.value,Y=A.key,le=Ur(I);return le!=="string"?[new ct(Y,I,"string expected, "+le+" found")]:[]}var Oo={promoteId:function(A){var I=A.key,Y=A.value;if(Ur(Y)==="string")return Ei({key:I,value:Y});var le=[];for(var ke in Y)le.push.apply(le,Ei({key:I+"."+ke,value:Y[ke]}));return le}};function Io(A){var I=A.value,Y=A.key,le=A.styleSpec,ke=A.style;if(!I.type)return[new ct(Y,I,'"type" is required')];var Ce,je=ut(I.type);switch(je){case"vector":case"raster":case"raster-dem":return bi({key:Y,value:I,valueSpec:le["source_"+je.replace("-","_")],style:A.style,styleSpec:le,objectElementValidators:Oo});case"geojson":if(Ce=bi({key:Y,value:I,valueSpec:le.source_geojson,style:ke,styleSpec:le,objectElementValidators:Oo}),I.cluster)for(var Ke in I.clusterProperties){var st=I.clusterProperties[Ke],mt=st[0],_t=st[1],Dt=typeof mt=="string"?[mt,["accumulated"],["get",Ke]]:mt;Ce.push.apply(Ce,Ko({key:Y+"."+Ke+".map",value:_t,expressionContext:"cluster-map"})),Ce.push.apply(Ce,Ko({key:Y+"."+Ke+".reduce",value:Dt,expressionContext:"cluster-reduce"}))}return Ce;case"video":return bi({key:Y,value:I,valueSpec:le.source_video,style:ke,styleSpec:le});case"image":return bi({key:Y,value:I,valueSpec:le.source_image,style:ke,styleSpec:le});case"canvas":return[new ct(Y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return us({key:Y+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function ti(A){var I=A.value,Y=A.styleSpec,le=Y.light,ke=A.style,Ce=[],je=Ur(I);if(I===void 0)return Ce;if(je!=="object")return Ce.concat([new ct("light",I,"object expected, "+je+" found")]);for(var Ke in I){var st=Ke.match(/^(.*)-transition$/);Ce=st&&le[st[1]]&&le[st[1]].transition?Ce.concat(Li({key:Ke,value:I[Ke],valueSpec:Y.transition,style:ke,styleSpec:Y})):le[Ke]?Ce.concat(Li({key:Ke,value:I[Ke],valueSpec:le[Ke],style:ke,styleSpec:Y})):Ce.concat([new ct(Ke,I[Ke],'unknown property "'+Ke+'"')])}return Ce}var Ms={"*":function(){return[]},array:Vs,boolean:function(A){var I=A.value,Y=A.key,le=Ur(I);return le!=="boolean"?[new ct(Y,I,"boolean expected, "+le+" found")]:[]},number:cl,color:function(A){var I=A.key,Y=A.value,le=Ur(Y);return le!=="string"?[new ct(I,Y,"color expected, "+le+" found")]:Pn(Y)===null?[new ct(I,Y,'color expected, "'+Y+'" found')]:[]},constants:pt,enum:us,filter:_i,function:ls,layer:As,object:bi,source:Io,light:ti,string:Ei,formatted:function(A){return Ei(A).length===0?[]:Ko(A)},resolvedImage:function(A){return Ei(A).length===0?[]:Ko(A)}};function Li(A){var I=A.value,Y=A.valueSpec,le=A.styleSpec;return Y.expression&&is(ut(I))?ls(A):Y.expression&&Xo(kt(I))?Ko(A):Y.type&&Ms[Y.type]?Ms[Y.type](A):bi(gt({},A,{valueSpec:Y.type?le[Y.type]:Y}))}function Ra(A){var I=A.value,Y=A.key,le=Ei(A);return le.length||(I.indexOf("{fontstack}")===-1&&le.push(new ct(Y,I,'"glyphs" url must include a "{fontstack}" token')),I.indexOf("{range}")===-1&&le.push(new ct(Y,I,'"glyphs" url must include a "{range}" token'))),le}function Va(A,I){I===void 0&&(I=We);var Y=[];return Y=Y.concat(Li({key:"",value:A,valueSpec:I.$root,styleSpec:I,style:A,objectElementValidators:{glyphs:Ra,"*":function(){return[]}}})),A.constants&&(Y=Y.concat(pt({key:"constants",value:A.constants}))),ia(Y)}function ia(A){return[].concat(A).sort(function(I,Y){return I.line-Y.line})}function qa(A){return function(){for(var I=[],Y=arguments.length;Y--;)I[Y]=arguments[Y];return ia(A.apply(this,I))}}Va.source=qa(Io),Va.light=qa(ti),Va.layer=qa(As),Va.filter=qa(_i),Va.paintProperty=qa(Hs),Va.layoutProperty=qa(ks);var to=Va,Qo=to.light,ji=to.paintProperty,Do=to.layoutProperty;function si(A,I){var Y=!1;if(I&&I.length)for(var le=0,ke=I;le<ke.length;le+=1){var Ce=ke[le];A.fire(new Fe(new Error(Ce.message))),Y=!0}return Y}var es=Ci,vo=3;function Ci(A,I,Y){var le=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var ke=new Int32Array(this.arrayBuffer);A=ke[0],I=ke[1],Y=ke[2],this.d=I+2*Y;for(var Ce=0;Ce<this.d*this.d;Ce++){var je=ke[vo+Ce],Ke=ke[vo+Ce+1];le.push(je===Ke?null:ke.subarray(je,Ke))}var st=ke[vo+le.length],mt=ke[vo+le.length+1];this.keys=ke.subarray(st,mt),this.bboxes=ke.subarray(mt),this.insert=this._insertReadonly}else{this.d=I+2*Y;for(var _t=0;_t<this.d*this.d;_t++)le.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=A,this.padding=Y,this.scale=I/A,this.uid=0;var Dt=Y/I*A;this.min=-Dt,this.max=A+Dt}Ci.prototype.insert=function(A,I,Y,le,ke){this._forEachCell(I,Y,le,ke,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(I),this.bboxes.push(Y),this.bboxes.push(le),this.bboxes.push(ke)},Ci.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ci.prototype._insertCell=function(A,I,Y,le,ke,Ce){this.cells[ke].push(Ce)},Ci.prototype.query=function(A,I,Y,le,ke){var Ce=this.min,je=this.max;if(A<=Ce&&I<=Ce&&je<=Y&&je<=le&&!ke)return Array.prototype.slice.call(this.keys);var Ke=[];return this._forEachCell(A,I,Y,le,this._queryCell,Ke,{},ke),Ke},Ci.prototype._queryCell=function(A,I,Y,le,ke,Ce,je,Ke){var st=this.cells[ke];if(st!==null)for(var mt=this.keys,_t=this.bboxes,Dt=0;Dt<st.length;Dt++){var jt=st[Dt];if(je[jt]===void 0){var Rt=4*jt;(Ke?Ke(_t[Rt+0],_t[Rt+1],_t[Rt+2],_t[Rt+3]):A<=_t[Rt+2]&&I<=_t[Rt+3]&&Y>=_t[Rt+0]&&le>=_t[Rt+1])?(je[jt]=!0,Ce.push(mt[jt])):je[jt]=!1}}},Ci.prototype._forEachCell=function(A,I,Y,le,ke,Ce,je,Ke){for(var st=this._convertToCellCoord(A),mt=this._convertToCellCoord(I),_t=this._convertToCellCoord(Y),Dt=this._convertToCellCoord(le),jt=st;jt<=_t;jt++)for(var Rt=mt;Rt<=Dt;Rt++){var rn=this.d*Rt+jt;if((!Ke||Ke(this._convertFromCellCoord(jt),this._convertFromCellCoord(Rt),this._convertFromCellCoord(jt+1),this._convertFromCellCoord(Rt+1)))&&ke.call(this,A,I,Y,le,rn,Ce,je,Ke))return}},Ci.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},Ci.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},Ci.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,I=vo+this.cells.length+1+1,Y=0,le=0;le<this.cells.length;le++)Y+=this.cells[le].length;var ke=new Int32Array(I+Y+this.keys.length+this.bboxes.length);ke[0]=this.extent,ke[1]=this.n,ke[2]=this.padding;for(var Ce=I,je=0;je<A.length;je++){var Ke=A[je];ke[vo+je]=Ce,ke.set(Ke,Ce),Ce+=Ke.length}return ke[vo+A.length]=Ce,ke.set(this.keys,Ce),Ce+=this.keys.length,ke[vo+A.length+1]=Ce,ke.set(this.bboxes,Ce),Ce+=this.bboxes.length,ke.buffer};var Pi=n.ImageData,sa=n.ImageBitmap,Ui={};function wr(A,I,Y){Y===void 0&&(Y={}),Object.defineProperty(I,"_classRegistryKey",{value:A,writeable:!1}),Ui[A]={klass:I,omit:Y.omit||[],shallow:Y.shallow||[]}}for(var Ss in wr("Object",Object),es.serialize=function(A,I){var Y=A.toArrayBuffer();return I&&I.push(Y),{buffer:Y}},es.deserialize=function(A){return new es(A.buffer)},wr("Grid",es),wr("Color",Mn),wr("Error",Error),wr("ResolvedImage",Vn),wr("StylePropertyFunction",_s),wr("StyleExpression",Co,{omit:["_evaluator"]}),wr("ZoomDependentExpression",ss),wr("ZoomConstantExpression",Bi),wr("CompoundExpression",pn,{omit:["_evaluate"]}),as)as[Ss]._classRegistryKey||wr("Expression_"+Ss,as[Ss]);function $s(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function zo(A){return sa&&A instanceof sa}function Ro(A,I){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if($s(A)||zo(A))return I&&I.push(A),A;if(ArrayBuffer.isView(A)){var Y=A;return I&&I.push(Y.buffer),Y}if(A instanceof Pi)return I&&I.push(A.data.buffer),A;if(Array.isArray(A)){for(var le=[],ke=0,Ce=A;ke<Ce.length;ke+=1){var je=Ce[ke];le.push(Ro(je,I))}return le}if(typeof A=="object"){var Ke=A.constructor,st=Ke._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var mt=Ke.serialize?Ke.serialize(A,I):{};if(!Ke.serialize){for(var _t in A)if(A.hasOwnProperty(_t)&&!(Ui[st].omit.indexOf(_t)>=0)){var Dt=A[_t];mt[_t]=Ui[st].shallow.indexOf(_t)>=0?Dt:Ro(Dt,I)}A instanceof Error&&(mt.message=A.message)}if(mt.$name)throw new Error("$name property is reserved for worker serialization logic.");return st!=="Object"&&(mt.$name=st),mt}throw new Error("can't serialize object of type "+typeof A)}function ts(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||$s(A)||zo(A)||ArrayBuffer.isView(A)||A instanceof Pi)return A;if(Array.isArray(A))return A.map(ts);if(typeof A=="object"){var I=A.$name||"Object",Y=Ui[I].klass;if(!Y)throw new Error("can't deserialize unregistered class "+I);if(Y.deserialize)return Y.deserialize(A);for(var le=Object.create(Y.prototype),ke=0,Ce=Object.keys(A);ke<Ce.length;ke+=1){var je=Ce[ke];if(je!=="$name"){var Ke=A[je];le[je]=Ui[I].shallow.indexOf(je)>=0?Ke:ts(Ke)}}return le}throw new Error("can't deserialize object of type "+typeof A)}var fs=function(){this.first=!0};fs.prototype.update=function(A,I){var Y=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=Y,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=Y,!0):(this.lastFloorZoom>Y?(this.lastIntegerZoom=Y+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<Y&&(this.lastIntegerZoom=Y,this.lastIntegerZoomTime=I),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=Y,!0))};var dr={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Es(A){for(var I=0,Y=A;I<Y.length;I+=1)if(mo(Y[I].charCodeAt(0)))return!0;return!1}function mo(A){return!(A!==746&&A!==747&&(A<4352||!(dr["Bopomofo Extended"](A)||dr.Bopomofo(A)||dr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||dr["CJK Compatibility Ideographs"](A)||dr["CJK Compatibility"](A)||dr["CJK Radicals Supplement"](A)||dr["CJK Strokes"](A)||!(!dr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||dr["CJK Unified Ideographs Extension A"](A)||dr["CJK Unified Ideographs"](A)||dr["Enclosed CJK Letters and Months"](A)||dr["Hangul Compatibility Jamo"](A)||dr["Hangul Jamo Extended-A"](A)||dr["Hangul Jamo Extended-B"](A)||dr["Hangul Jamo"](A)||dr["Hangul Syllables"](A)||dr.Hiragana(A)||dr["Ideographic Description Characters"](A)||dr.Kanbun(A)||dr["Kangxi Radicals"](A)||dr["Katakana Phonetic Extensions"](A)||dr.Katakana(A)&&A!==12540||!(!dr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!dr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||dr["Unified Canadian Aboriginal Syllabics"](A)||dr["Unified Canadian Aboriginal Syllabics Extended"](A)||dr["Vertical Forms"](A)||dr["Yijing Hexagram Symbols"](A)||dr["Yi Syllables"](A)||dr["Yi Radicals"](A))))}function Fa(A){return!(mo(A)||function(I){return!!(dr["Latin-1 Supplement"](I)&&(I===167||I===169||I===174||I===177||I===188||I===189||I===190||I===215||I===247)||dr["General Punctuation"](I)&&(I===8214||I===8224||I===8225||I===8240||I===8241||I===8251||I===8252||I===8258||I===8263||I===8264||I===8265||I===8273)||dr["Letterlike Symbols"](I)||dr["Number Forms"](I)||dr["Miscellaneous Technical"](I)&&(I>=8960&&I<=8967||I>=8972&&I<=8991||I>=8996&&I<=9e3||I===9003||I>=9085&&I<=9114||I>=9150&&I<=9165||I===9167||I>=9169&&I<=9179||I>=9186&&I<=9215)||dr["Control Pictures"](I)&&I!==9251||dr["Optical Character Recognition"](I)||dr["Enclosed Alphanumerics"](I)||dr["Geometric Shapes"](I)||dr["Miscellaneous Symbols"](I)&&!(I>=9754&&I<=9759)||dr["Miscellaneous Symbols and Arrows"](I)&&(I>=11026&&I<=11055||I>=11088&&I<=11097||I>=11192&&I<=11243)||dr["CJK Symbols and Punctuation"](I)||dr.Katakana(I)||dr["Private Use Area"](I)||dr["CJK Compatibility Forms"](I)||dr["Small Form Variants"](I)||dr["Halfwidth and Fullwidth Forms"](I)||I===8734||I===8756||I===8757||I>=9984&&I<=10087||I>=10102&&I<=10131||I===65532||I===65533)}(A))}function Fo(A){return dr.Arabic(A)||dr["Arabic Supplement"](A)||dr["Arabic Extended-A"](A)||dr["Arabic Presentation Forms-A"](A)||dr["Arabic Presentation Forms-B"](A)}function Vi(A){return A>=1424&&A<=2303||dr["Arabic Presentation Forms-A"](A)||dr["Arabic Presentation Forms-B"](A)}function Oi(A,I){return!(!I&&Vi(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||dr.Khmer(A))}function ni(A){for(var I=0,Y=A;I<Y.length;I+=1)if(Vi(Y[I].charCodeAt(0)))return!0;return!1}var no="deferred",Ii="loading",yo="loaded",Ls="error",Bo=null,Hr="unavailable",Ha=null,li=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(Hr=Ls),Bo&&Bo(A)};function ro(){ui.fire(new Re("pluginStateChange",{pluginStatus:Hr,pluginURL:Ha}))}var ui=new nt,hs=function(){return Hr},ps=function(){if(Hr!==no||!Ha)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hr=Ii,ro(),Ha&&Ot({url:Ha},function(A){A?li(A):(Hr=yo,ro())})},ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Hr===yo||ci.applyArabicShaping!=null},isLoading:function(){return Hr===Ii},setState:function(A){Hr=A.pluginStatus,Ha=A.pluginURL},isParsed:function(){return ci.applyArabicShaping!=null&&ci.processBidirectionalText!=null&&ci.processStyledBidirectionalText!=null},getPluginURL:function(){return Ha}},Vr=function(A,I){this.zoom=A,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new fs,this.transition={})};Vr.prototype.isSupportedScript=function(A){return function(I,Y){for(var le=0,ke=I;le<ke.length;le+=1)if(!Oi(ke[le].charCodeAt(0),Y))return!1;return!0}(A,ci.isLoaded())},Vr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Vr.prototype.getCrossfadeParameters=function(){var A=this.zoom,I=A-Math.floor(A),Y=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*Y}:{fromScale:.5,toScale:1,t:1-(1-Y)*I}};var ao=function(A,I){this.property=A,this.value=I,this.expression=function(Y,le){if(is(Y))return new _s(Y,le);if(Xo(Y)){var ke=ul(Y,le);if(ke.result==="error")throw new Error(ke.value.map(function(je){return je.key+": "+je.message}).join(", "));return ke.value}var Ce=Y;return typeof Y=="string"&&le.type==="color"&&(Ce=Mn.parse(Y)),{kind:"constant",evaluate:function(){return Ce}}}(I===void 0?A.specification.default:I,A.specification)};ao.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ao.prototype.possiblyEvaluate=function(A,I,Y){return this.property.possiblyEvaluate(this,A,I,Y)};var ns=function(A){this.property=A,this.value=new ao(A,void 0)};ns.prototype.transitioned=function(A,I){return new ds(this.property,this.value,I,c({},A.transition,this.transition),A.now)},ns.prototype.untransitioned=function(){return new ds(this.property,this.value,null,{},0)};var qi=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};qi.prototype.getValue=function(A){return S(this._values[A].value.value)},qi.prototype.setValue=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new ns(this._values[A].property)),this._values[A].value=new ao(this._values[A].property,I===null?void 0:S(I))},qi.prototype.getTransition=function(A){return S(this._values[A].transition)},qi.prototype.setTransition=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new ns(this._values[A].property)),this._values[A].transition=S(I)||void 0},qi.prototype.serialize=function(){for(var A={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var le=Y[I],ke=this.getValue(le);ke!==void 0&&(A[le]=ke);var Ce=this.getTransition(le);Ce!==void 0&&(A[le+"-transition"]=Ce)}return A},qi.prototype.transitioned=function(A,I){for(var Y=new gs(this._properties),le=0,ke=Object.keys(this._values);le<ke.length;le+=1){var Ce=ke[le];Y._values[Ce]=this._values[Ce].transitioned(A,I._values[Ce])}return Y},qi.prototype.untransitioned=function(){for(var A=new gs(this._properties),I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var le=Y[I];A._values[le]=this._values[le].untransitioned()}return A};var ds=function(A,I,Y,le,ke){this.property=A,this.value=I,this.begin=ke+le.delay||0,this.end=this.begin+le.duration||0,A.specification.transition&&(le.delay||le.duration)&&(this.prior=Y)};ds.prototype.possiblyEvaluate=function(A,I,Y){var le=A.now||0,ke=this.value.possiblyEvaluate(A,I,Y),Ce=this.prior;if(Ce){if(le>this.end)return this.prior=null,ke;if(this.value.isDataDriven())return this.prior=null,ke;if(le<this.begin)return Ce.possiblyEvaluate(A,I,Y);var je=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Ce.possiblyEvaluate(A,I,Y),ke,function(Ke){if(Ke<=0)return 0;if(Ke>=1)return 1;var st=Ke*Ke,mt=st*Ke;return 4*(Ke<.5?mt:3*(Ke-st)+mt-.75)}(je))}return ke};var gs=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};gs.prototype.possiblyEvaluate=function(A,I,Y){for(var le=new rs(this._properties),ke=0,Ce=Object.keys(this._values);ke<Ce.length;ke+=1){var je=Ce[ke];le._values[je]=this._values[je].possiblyEvaluate(A,I,Y)}return le},gs.prototype.hasTransition=function(){for(var A=0,I=Object.keys(this._values);A<I.length;A+=1){var Y=I[A];if(this._values[Y].prior)return!0}return!1};var Hi=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Hi.prototype.getValue=function(A){return S(this._values[A].value)},Hi.prototype.setValue=function(A,I){this._values[A]=new ao(this._values[A].property,I===null?void 0:S(I))},Hi.prototype.serialize=function(){for(var A={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var le=Y[I],ke=this.getValue(le);ke!==void 0&&(A[le]=ke)}return A},Hi.prototype.possiblyEvaluate=function(A,I,Y){for(var le=new rs(this._properties),ke=0,Ce=Object.keys(this._values);ke<Ce.length;ke+=1){var je=Ce[ke];le._values[je]=this._values[je].possiblyEvaluate(A,I,Y)}return le};var la=function(A,I,Y){this.property=A,this.value=I,this.parameters=Y};la.prototype.isConstant=function(){return this.value.kind==="constant"},la.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},la.prototype.evaluate=function(A,I,Y,le){return this.property.evaluate(this.value,this.parameters,A,I,Y,le)};var rs=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};rs.prototype.get=function(A){return this._values[A]};var kr=function(A){this.specification=A};kr.prototype.possiblyEvaluate=function(A,I){return A.expression.evaluate(I)},kr.prototype.interpolate=function(A,I,Y){var le=aa[this.specification.type];return le?le(A,I,Y):A};var Cr=function(A,I){this.specification=A,this.overrides=I};Cr.prototype.possiblyEvaluate=function(A,I,Y,le){return A.expression.kind==="constant"||A.expression.kind==="camera"?new la(this,{kind:"constant",value:A.expression.evaluate(I,null,{},Y,le)},I):new la(this,A.expression,I)},Cr.prototype.interpolate=function(A,I,Y){if(A.value.kind!=="constant"||I.value.kind!=="constant")return A;if(A.value.value===void 0||I.value.value===void 0)return new la(this,{kind:"constant",value:void 0},A.parameters);var le=aa[this.specification.type];return le?new la(this,{kind:"constant",value:le(A.value.value,I.value.value,Y)},A.parameters):A},Cr.prototype.evaluate=function(A,I,Y,le,ke,Ce){return A.kind==="constant"?A.value:A.evaluate(I,Y,le,ke,Ce)};var wi=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(Y,le,ke,Ce){if(Y.value===void 0)return new la(this,{kind:"constant",value:void 0},le);if(Y.expression.kind==="constant"){var je=Y.expression.evaluate(le,null,{},ke,Ce),Ke=Y.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,st=this._calculate(Ke,Ke,Ke,le);return new la(this,{kind:"constant",value:st},le)}if(Y.expression.kind==="camera"){var mt=this._calculate(Y.expression.evaluate({zoom:le.zoom-1}),Y.expression.evaluate({zoom:le.zoom}),Y.expression.evaluate({zoom:le.zoom+1}),le);return new la(this,{kind:"constant",value:mt},le)}return new la(this,Y.expression,le)},I.prototype.evaluate=function(Y,le,ke,Ce,je,Ke){if(Y.kind==="source"){var st=Y.evaluate(le,ke,Ce,je,Ke);return this._calculate(st,st,st,le)}return Y.kind==="composite"?this._calculate(Y.evaluate({zoom:Math.floor(le.zoom)-1},ke,Ce),Y.evaluate({zoom:Math.floor(le.zoom)},ke,Ce),Y.evaluate({zoom:Math.floor(le.zoom)+1},ke,Ce),le):Y.value},I.prototype._calculate=function(Y,le,ke,Ce){return Ce.zoom>Ce.zoomHistory.lastIntegerZoom?{from:Y,to:le}:{from:ke,to:le}},I.prototype.interpolate=function(Y){return Y},I}(Cr),io=function(A){this.specification=A};io.prototype.possiblyEvaluate=function(A,I,Y,le){if(A.value!==void 0){if(A.expression.kind==="constant"){var ke=A.expression.evaluate(I,null,{},Y,le);return this._calculate(ke,ke,ke,I)}return this._calculate(A.expression.evaluate(new Vr(Math.floor(I.zoom-1),I)),A.expression.evaluate(new Vr(Math.floor(I.zoom),I)),A.expression.evaluate(new Vr(Math.floor(I.zoom+1),I)),I)}},io.prototype._calculate=function(A,I,Y,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:A,to:I}:{from:Y,to:I}},io.prototype.interpolate=function(A){return A};var xo=function(A){this.specification=A};xo.prototype.possiblyEvaluate=function(A,I,Y,le){return!!A.expression.evaluate(I,null,{},Y,le)},xo.prototype.interpolate=function(){return!1};var La=function(A){for(var I in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Y=A[I];Y.specification.overridable&&this.overridableProperties.push(I);var le=this.defaultPropertyValues[I]=new ao(Y,void 0),ke=this.defaultTransitionablePropertyValues[I]=new ns(Y);this.defaultTransitioningPropertyValues[I]=ke.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=le.possiblyEvaluate({})}};wr("DataDrivenProperty",Cr),wr("DataConstantProperty",kr),wr("CrossFadedDataDrivenProperty",wi),wr("CrossFadedProperty",io),wr("ColorRampProperty",xo);var oo="-transition",Qr=function(A){function I(Y,le){if(A.call(this),this.id=Y.id,this.type=Y.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Y.type!=="custom"&&(this.metadata=Y.metadata,this.minzoom=Y.minzoom,this.maxzoom=Y.maxzoom,Y.type!=="background"&&(this.source=Y.source,this.sourceLayer=Y["source-layer"],this.filter=Y.filter),le.layout&&(this._unevaluatedLayout=new Hi(le.layout)),le.paint)){for(var ke in this._transitionablePaint=new qi(le.paint),Y.paint)this.setPaintProperty(ke,Y.paint[ke],{validate:!1});for(var Ce in Y.layout)this.setLayoutProperty(Ce,Y.layout[Ce],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rs(le.paint)}}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(Y){return Y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Y)},I.prototype.setLayoutProperty=function(Y,le,ke){if(ke===void 0&&(ke={}),le!=null){var Ce="layers."+this.id+".layout."+Y;if(this._validate(Do,Ce,Y,le,ke))return}Y!=="visibility"?this._unevaluatedLayout.setValue(Y,le):this.visibility=le},I.prototype.getPaintProperty=function(Y){return m(Y,oo)?this._transitionablePaint.getTransition(Y.slice(0,-11)):this._transitionablePaint.getValue(Y)},I.prototype.setPaintProperty=function(Y,le,ke){if(ke===void 0&&(ke={}),le!=null){var Ce="layers."+this.id+".paint."+Y;if(this._validate(ji,Ce,Y,le,ke))return!1}if(m(Y,oo))return this._transitionablePaint.setTransition(Y.slice(0,-11),le||void 0),!1;var je=this._transitionablePaint._values[Y],Ke=je.property.specification["property-type"]==="cross-faded-data-driven",st=je.value.isDataDriven(),mt=je.value;this._transitionablePaint.setValue(Y,le),this._handleSpecialPaintPropertyUpdate(Y);var _t=this._transitionablePaint._values[Y].value;return _t.isDataDriven()||st||Ke||this._handleOverridablePaintPropertyUpdate(Y,mt,_t)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,le,ke){return!1},I.prototype.isHidden=function(Y){return!!(this.minzoom&&Y<this.minzoom)||!!(this.maxzoom&&Y>=this.maxzoom)||this.visibility==="none"},I.prototype.updateTransitions=function(Y){this._transitioningPaint=this._transitionablePaint.transitioned(Y,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(Y,le){Y.getCrossfadeParameters&&(this._crossfadeParameters=Y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Y,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(Y,void 0,le)},I.prototype.serialize=function(){var Y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Y.layout=Y.layout||{},Y.layout.visibility=this.visibility),f(Y,function(le,ke){return!(le===void 0||ke==="layout"&&!Object.keys(le).length||ke==="paint"&&!Object.keys(le).length)})},I.prototype._validate=function(Y,le,ke,Ce,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&si(this,Y.call(to,{key:le,layerType:this.type,objectKey:ke,value:Ce,styleSpec:We,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var Y in this.paint._values){var le=this.paint.get(Y);if(le instanceof la&&ho(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},I}(nt),fl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ti=function(A,I){this._structArray=A,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},na=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function da(A,I){I===void 0&&(I=1);var Y=0,le=0;return{members:A.map(function(ke){var Ce,je=(Ce=ke.type,fl[Ce].BYTES_PER_ELEMENT),Ke=Y=gi(Y,Math.max(I,je)),st=ke.components||1;return le=Math.max(le,je),Y+=je*st,{name:ke.name,type:ke.type,components:st,offset:Ke}}),size:gi(Y,Math.max(le,I)),alignment:I}}function gi(A,I){return Math.ceil(A/I)*I}na.serialize=function(A,I){return A._trim(),I&&(A.isTransferred=!0,I.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},na.deserialize=function(A){var I=Object.create(this.prototype);return I.arrayBuffer=A.arrayBuffer,I.length=A.length,I.capacity=A.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I},na.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},na.prototype.clear=function(){this.length=0},na.prototype.resize=function(A){this.reserve(A),this.length=A},na.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}},na.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var No=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le){var ke=this.length;return this.resize(ke+1),this.emplace(ke,Y,le)},I.prototype.emplace=function(Y,le,ke){var Ce=2*Y;return this.int16[Ce+0]=le,this.int16[Ce+1]=ke,Y},I}(na);No.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",No);var Qs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce){var je=this.length;return this.resize(je+1),this.emplace(je,Y,le,ke,Ce)},I.prototype.emplace=function(Y,le,ke,Ce,je){var Ke=4*Y;return this.int16[Ke+0]=le,this.int16[Ke+1]=ke,this.int16[Ke+2]=Ce,this.int16[Ke+3]=je,Y},I}(na);Qs.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",Qs);var Xe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Y,le,ke,Ce,je,Ke)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st){var mt=6*Y;return this.int16[mt+0]=le,this.int16[mt+1]=ke,this.int16[mt+2]=Ce,this.int16[mt+3]=je,this.int16[mt+4]=Ke,this.int16[mt+5]=st,Y},I}(na);Xe.prototype.bytesPerElement=12,wr("StructArrayLayout2i4i12",Xe);var Je=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Y,le,ke,Ce,je,Ke)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st){var mt=4*Y,_t=8*Y;return this.int16[mt+0]=le,this.int16[mt+1]=ke,this.uint8[_t+4]=Ce,this.uint8[_t+5]=je,this.uint8[_t+6]=Ke,this.uint8[_t+7]=st,Y},I}(na);Je.prototype.bytesPerElement=8,wr("StructArrayLayout2i4ub8",Je);var ot=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le){var ke=this.length;return this.resize(ke+1),this.emplace(ke,Y,le)},I.prototype.emplace=function(Y,le,ke){var Ce=2*Y;return this.float32[Ce+0]=le,this.float32[Ce+1]=ke,Y},I}(na);ot.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",ot);var B=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt){var jt=this.length;return this.resize(jt+1),this.emplace(jt,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt){var Rt=10*Y;return this.uint16[Rt+0]=le,this.uint16[Rt+1]=ke,this.uint16[Rt+2]=Ce,this.uint16[Rt+3]=je,this.uint16[Rt+4]=Ke,this.uint16[Rt+5]=st,this.uint16[Rt+6]=mt,this.uint16[Rt+7]=_t,this.uint16[Rt+8]=Dt,this.uint16[Rt+9]=jt,Y},I}(na);B.prototype.bytesPerElement=20,wr("StructArrayLayout10ui20",B);var G=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt){var rn=this.length;return this.resize(rn+1),this.emplace(rn,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn){var on=12*Y;return this.int16[on+0]=le,this.int16[on+1]=ke,this.int16[on+2]=Ce,this.int16[on+3]=je,this.uint16[on+4]=Ke,this.uint16[on+5]=st,this.uint16[on+6]=mt,this.uint16[on+7]=_t,this.int16[on+8]=Dt,this.int16[on+9]=jt,this.int16[on+10]=Rt,this.int16[on+11]=rn,Y},I}(na);G.prototype.bytesPerElement=24,wr("StructArrayLayout4i4ui4i24",G);var H=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,ke)},I.prototype.emplace=function(Y,le,ke,Ce){var je=3*Y;return this.float32[je+0]=le,this.float32[je+1]=ke,this.float32[je+2]=Ce,Y},I}(na);H.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",H);var L=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},I.prototype.emplace=function(Y,le){var ke=1*Y;return this.uint32[ke+0]=le,Y},I}(na);L.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",L);var q=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke,st,mt,_t){var Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,Y,le,ke,Ce,je,Ke,st,mt,_t)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt){var jt=10*Y,Rt=5*Y;return this.int16[jt+0]=le,this.int16[jt+1]=ke,this.int16[jt+2]=Ce,this.int16[jt+3]=je,this.int16[jt+4]=Ke,this.int16[jt+5]=st,this.uint32[Rt+3]=mt,this.uint16[jt+8]=_t,this.uint16[jt+9]=Dt,Y},I}(na);q.prototype.bytesPerElement=20,wr("StructArrayLayout6i1ul2ui20",q);var $=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Y,le,ke,Ce,je,Ke)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st){var mt=6*Y;return this.int16[mt+0]=le,this.int16[mt+1]=ke,this.int16[mt+2]=Ce,this.int16[mt+3]=je,this.int16[mt+4]=Ke,this.int16[mt+5]=st,Y},I}(na);$.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",$);var ne=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je){var Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,Y,le,ke,Ce,je)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke){var st=4*Y,mt=8*Y;return this.float32[st+0]=le,this.float32[st+1]=ke,this.float32[st+2]=Ce,this.int16[mt+6]=je,this.int16[mt+7]=Ke,Y},I}(na);ne.prototype.bytesPerElement=16,wr("StructArrayLayout2f1f2i16",ne);var ue=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce){var je=this.length;return this.resize(je+1),this.emplace(je,Y,le,ke,Ce)},I.prototype.emplace=function(Y,le,ke,Ce,je){var Ke=12*Y,st=3*Y;return this.uint8[Ke+0]=le,this.uint8[Ke+1]=ke,this.float32[st+1]=Ce,this.float32[st+2]=je,Y},I}(na);ue.prototype.bytesPerElement=12,wr("StructArrayLayout2ub2f12",ue);var ye=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,ke)},I.prototype.emplace=function(Y,le,ke,Ce){var je=3*Y;return this.uint16[je+0]=le,this.uint16[je+1]=ke,this.uint16[je+2]=Ce,Y},I}(na);ye.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",ye);var Le=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on,bn,yn,On){var Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on,bn,yn,On)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on,bn,yn,On,Dn){var Un=24*Y,Gn=12*Y,nr=48*Y;return this.int16[Un+0]=le,this.int16[Un+1]=ke,this.uint16[Un+2]=Ce,this.uint16[Un+3]=je,this.uint32[Gn+2]=Ke,this.uint32[Gn+3]=st,this.uint32[Gn+4]=mt,this.uint16[Un+10]=_t,this.uint16[Un+11]=Dt,this.uint16[Un+12]=jt,this.float32[Gn+7]=Rt,this.float32[Gn+8]=rn,this.uint8[nr+36]=on,this.uint8[nr+37]=bn,this.uint8[nr+38]=yn,this.uint32[Gn+10]=On,this.int16[Un+22]=Dn,Y},I}(na);Le.prototype.bytesPerElement=48,wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Le);var Ie=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on,bn,yn,On,Dn,Un,Gn,nr,pr,cr,yr,_r,zr,Sr,Dr){var Lr=this.length;return this.resize(Lr+1),this.emplace(Lr,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on,bn,yn,On,Dn,Un,Gn,nr,pr,cr,yr,_r,zr,Sr,Dr)},I.prototype.emplace=function(Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on,bn,yn,On,Dn,Un,Gn,nr,pr,cr,yr,_r,zr,Sr,Dr,Lr){var Mr=34*Y,Yr=17*Y;return this.int16[Mr+0]=le,this.int16[Mr+1]=ke,this.int16[Mr+2]=Ce,this.int16[Mr+3]=je,this.int16[Mr+4]=Ke,this.int16[Mr+5]=st,this.int16[Mr+6]=mt,this.int16[Mr+7]=_t,this.uint16[Mr+8]=Dt,this.uint16[Mr+9]=jt,this.uint16[Mr+10]=Rt,this.uint16[Mr+11]=rn,this.uint16[Mr+12]=on,this.uint16[Mr+13]=bn,this.uint16[Mr+14]=yn,this.uint16[Mr+15]=On,this.uint16[Mr+16]=Dn,this.uint16[Mr+17]=Un,this.uint16[Mr+18]=Gn,this.uint16[Mr+19]=nr,this.uint16[Mr+20]=pr,this.uint16[Mr+21]=cr,this.uint16[Mr+22]=yr,this.uint32[Yr+12]=_r,this.float32[Yr+13]=zr,this.float32[Yr+14]=Sr,this.float32[Yr+15]=Dr,this.float32[Yr+16]=Lr,Y},I}(na);Ie.prototype.bytesPerElement=68,wr("StructArrayLayout8i15ui1ul4f68",Ie);var Ue=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},I.prototype.emplace=function(Y,le){var ke=1*Y;return this.float32[ke+0]=le,Y},I}(na);Ue.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",Ue);var qe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,ke)},I.prototype.emplace=function(Y,le,ke,Ce){var je=3*Y;return this.int16[je+0]=le,this.int16[je+1]=ke,this.int16[je+2]=Ce,Y},I}(na);qe.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",qe);var Qe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,ke)},I.prototype.emplace=function(Y,le,ke,Ce){var je=2*Y,Ke=4*Y;return this.uint32[je+0]=le,this.uint16[Ke+2]=ke,this.uint16[Ke+3]=Ce,Y},I}(na);Qe.prototype.bytesPerElement=8,wr("StructArrayLayout1ul2ui8",Qe);var lt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le){var ke=this.length;return this.resize(ke+1),this.emplace(ke,Y,le)},I.prototype.emplace=function(Y,le,ke){var Ce=2*Y;return this.uint16[Ce+0]=le,this.uint16[Ce+1]=ke,Y},I}(na);lt.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",lt);var ft=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},I.prototype.emplace=function(Y,le){var ke=1*Y;return this.uint16[ke+0]=le,Y},I}(na);ft.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",ft);var xt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,le,ke,Ce){var je=this.length;return this.resize(je+1),this.emplace(je,Y,le,ke,Ce)},I.prototype.emplace=function(Y,le,ke,Ce,je){var Ke=4*Y;return this.float32[Ke+0]=le,this.float32[Ke+1]=ke,this.float32[Ke+2]=Ce,this.float32[Ke+3]=je,Y},I}(na);xt.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",xt);var St=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Y.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Y.x1.get=function(){return this._structArray.int16[this._pos2+2]},Y.y1.get=function(){return this._structArray.int16[this._pos2+3]},Y.x2.get=function(){return this._structArray.int16[this._pos2+4]},Y.y2.get=function(){return this._structArray.int16[this._pos2+5]},Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,Y),I}(Ti);St.prototype.size=20;var Tt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new St(this,Y)},I}(q);wr("CollisionBoxArray",Tt);var zt=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Y.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Y.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Y.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Y.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Y.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Y.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Y.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Y.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Y.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Y.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},Y.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Y.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Y.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},Y.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,Y),I}(Ti);zt.prototype.size=48;var Et=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new zt(this,Y)},I}(Le);wr("PlacedSymbolArray",Et);var Yt=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Y.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Y.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Y.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Y.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Y.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Y.key.get=function(){return this._structArray.uint16[this._pos2+8]},Y.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Y.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Y.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Y.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Y.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Y.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Y.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Y.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Y.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Y.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Y.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Y.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Y.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Y.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},Y.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Y.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Y.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Y.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,Y),I}(Ti);Yt.prototype.size=68;var qt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new Yt(this,Y)},I}(Ie);wr("SymbolInstanceArray",qt);var Ft=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getoffsetX=function(Y){return this.float32[1*Y+0]},I}(Ue);wr("GlyphOffsetArray",Ft);var fn=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getx=function(Y){return this.int16[3*Y+0]},I.prototype.gety=function(Y){return this.int16[3*Y+1]},I.prototype.gettileUnitDistanceFromAnchor=function(Y){return this.int16[3*Y+2]},I}(qe);wr("SymbolLineVertexArray",fn);var dn=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,Y),I}(Ti);dn.prototype.size=8;var kn=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new dn(this,Y)},I}(Qe);wr("FeatureIndexArray",kn);var Sn=da([{name:"a_pos",components:2,type:"Int16"}],4).members,Bn=function(A){A===void 0&&(A=[]),this.segments=A};function $n(A,I){return 256*(A=u(Math.floor(A),0,255))+u(Math.floor(I),0,255)}Bn.prototype.prepareSegment=function(A,I,Y,le){var ke=this.segments[this.segments.length-1];return A>Bn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+Bn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!ke||ke.vertexLength+A>Bn.MAX_VERTEX_ARRAY_LENGTH||ke.sortKey!==le)&&(ke={vertexOffset:I.length,primitiveOffset:Y.length,vertexLength:0,primitiveLength:0},le!==void 0&&(ke.sortKey=le),this.segments.push(ke)),ke},Bn.prototype.get=function(){return this.segments},Bn.prototype.destroy=function(){for(var A=0,I=this.segments;A<I.length;A+=1){var Y=I[A];for(var le in Y.vaos)Y.vaos[le].destroy()}},Bn.simpleSegment=function(A,I,Y,le){return new Bn([{vertexOffset:A,primitiveOffset:I,vertexLength:Y,primitiveLength:le,vaos:{},sortKey:0}])},Bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",Bn);var sr=da([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),qn=T(function(A){A.exports=function(I,Y){var le,ke,Ce,je,Ke,st,mt,_t;for(le=3&I.length,ke=I.length-le,Ce=Y,Ke=3432918353,st=461845907,_t=0;_t<ke;)mt=255&I.charCodeAt(_t)|(255&I.charCodeAt(++_t))<<8|(255&I.charCodeAt(++_t))<<16|(255&I.charCodeAt(++_t))<<24,++_t,Ce=27492+(65535&(je=5*(65535&(Ce=(Ce^=mt=(65535&(mt=(mt=(65535&mt)*Ke+(((mt>>>16)*Ke&65535)<<16)&4294967295)<<15|mt>>>17))*st+(((mt>>>16)*st&65535)<<16)&4294967295)<<13|Ce>>>19))+((5*(Ce>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(mt=0,le){case 3:mt^=(255&I.charCodeAt(_t+2))<<16;case 2:mt^=(255&I.charCodeAt(_t+1))<<8;case 1:Ce^=mt=(65535&(mt=(mt=(65535&(mt^=255&I.charCodeAt(_t)))*Ke+(((mt>>>16)*Ke&65535)<<16)&4294967295)<<15|mt>>>17))*st+(((mt>>>16)*st&65535)<<16)&4294967295}return Ce^=I.length,Ce=2246822507*(65535&(Ce^=Ce>>>16))+((2246822507*(Ce>>>16)&65535)<<16)&4294967295,Ce=3266489909*(65535&(Ce^=Ce>>>13))+((3266489909*(Ce>>>16)&65535)<<16)&4294967295,(Ce^=Ce>>>16)>>>0}}),ir=T(function(A){A.exports=function(I,Y){for(var le,ke=I.length,Ce=Y^ke,je=0;ke>=4;)le=1540483477*(65535&(le=255&I.charCodeAt(je)|(255&I.charCodeAt(++je))<<8|(255&I.charCodeAt(++je))<<16|(255&I.charCodeAt(++je))<<24))+((1540483477*(le>>>16)&65535)<<16),Ce=1540483477*(65535&Ce)+((1540483477*(Ce>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),ke-=4,++je;switch(ke){case 3:Ce^=(255&I.charCodeAt(je+2))<<16;case 2:Ce^=(255&I.charCodeAt(je+1))<<8;case 1:Ce=1540483477*(65535&(Ce^=255&I.charCodeAt(je)))+((1540483477*(Ce>>>16)&65535)<<16)}return Ce=1540483477*(65535&(Ce^=Ce>>>13))+((1540483477*(Ce>>>16)&65535)<<16),(Ce^=Ce>>>15)>>>0}}),vr=qn,Ar=qn,Kn=ir;vr.murmur3=Ar,vr.murmur2=Kn;var ar=function(){this.ids=[],this.positions=[],this.indexed=!1};ar.prototype.add=function(A,I,Y,le){this.ids.push(lr(A)),this.positions.push(I,Y,le)},ar.prototype.getPositions=function(A){for(var I=lr(A),Y=0,le=this.ids.length-1;Y<le;){var ke=Y+le>>1;this.ids[ke]>=I?le=ke:Y=ke+1}for(var Ce=[];this.ids[Y]===I;){var je=this.positions[3*Y],Ke=this.positions[3*Y+1],st=this.positions[3*Y+2];Ce.push({index:je,start:Ke,end:st}),Y++}return Ce},ar.serialize=function(A,I){var Y=new Float64Array(A.ids),le=new Uint32Array(A.positions);return Tr(Y,le,0,Y.length-1),I&&I.push(Y.buffer,le.buffer),{ids:Y,positions:le}},ar.deserialize=function(A){var I=new ar;return I.ids=A.ids,I.positions=A.positions,I.indexed=!0,I};var br=Math.pow(2,53)-1;function lr(A){var I=+A;return!isNaN(I)&&I<=br?I:vr(String(A))}function Tr(A,I,Y,le){for(;Y<le;){for(var ke=A[Y+le>>1],Ce=Y-1,je=le+1;;){do Ce++;while(A[Ce]<ke);do je--;while(A[je]>ke);if(Ce>=je)break;Er(A,Ce,je),Er(I,3*Ce,3*je),Er(I,3*Ce+1,3*je+1),Er(I,3*Ce+2,3*je+2)}je-Y<le-je?(Tr(A,I,Y,je),Y=je+1):(Tr(A,I,je+1,le),le=je)}}function Er(A,I,Y){var le=A[I];A[I]=A[Y],A[Y]=le}wr("FeaturePositionMap",ar);var Rr=function(A,I){this.gl=A.gl,this.location=I},Fr=function(A){function I(Y,le){A.call(this,Y,le),this.current=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1i(this.location,Y))},I}(Rr),jr=function(A){function I(Y,le){A.call(this,Y,le),this.current=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1f(this.location,Y))},I}(Rr),qr=function(A){function I(Y,le){A.call(this,Y,le),this.current=[0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]||(this.current=Y,this.gl.uniform2f(this.location,Y[0],Y[1]))},I}(Rr),ua=function(A){function I(Y,le){A.call(this,Y,le),this.current=[0,0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]||(this.current=Y,this.gl.uniform3f(this.location,Y[0],Y[1],Y[2]))},I}(Rr),Aa=function(A){function I(Y,le){A.call(this,Y,le),this.current=[0,0,0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]&&Y[3]===this.current[3]||(this.current=Y,this.gl.uniform4f(this.location,Y[0],Y[1],Y[2],Y[3]))},I}(Rr),ri=function(A){function I(Y,le){A.call(this,Y,le),this.current=Mn.transparent}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y.r===this.current.r&&Y.g===this.current.g&&Y.b===this.current.b&&Y.a===this.current.a||(this.current=Y,this.gl.uniform4f(this.location,Y.r,Y.g,Y.b,Y.a))},I}(Rr),Ba=new Float32Array(16),Ka=function(A){function I(Y,le){A.call(this,Y,le),this.current=Ba}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){if(Y[12]!==this.current[12]||Y[0]!==this.current[0])return this.current=Y,void this.gl.uniformMatrix4fv(this.location,!1,Y);for(var le=1;le<16;le++)if(Y[le]!==this.current[le]){this.current=Y,this.gl.uniformMatrix4fv(this.location,!1,Y);break}},I}(Rr);function ga(A){return[$n(255*A.r,255*A.g),$n(255*A.b,255*A.a)]}var Gr=function(A,I,Y){this.value=A,this.uniformNames=I.map(function(le){return"u_"+le}),this.type=Y};Gr.prototype.setUniform=function(A,I,Y){A.set(Y.constantOr(this.value))},Gr.prototype.getBinding=function(A,I,Y){return this.type==="color"?new ri(A,I):new jr(A,I)};var xa=function(A,I){this.uniformNames=I.map(function(Y){return"u_"+Y}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};xa.prototype.setConstantPatternPositions=function(A,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=A.tlbr},xa.prototype.setUniform=function(A,I,Y,le){var ke=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;ke&&A.set(ke)},xa.prototype.getBinding=function(A,I,Y){return Y.substr(0,9)==="u_pattern"?new Aa(A,I):new jr(A,I)};var ra=function(A,I,Y,le){this.expression=A,this.type=Y,this.maxValue=0,this.paintVertexAttributes=I.map(function(ke){return{name:"a_"+ke,type:"Float32",components:Y==="color"?2:1,offset:0}}),this.paintVertexArray=new le};ra.prototype.populatePaintArray=function(A,I,Y,le,ke){var Ce=this.paintVertexArray.length,je=this.expression.evaluate(new Vr(0),I,{},le,[],ke);this.paintVertexArray.resize(A),this._setPaintValue(Ce,A,je)},ra.prototype.updatePaintArray=function(A,I,Y,le){var ke=this.expression.evaluate({zoom:0},Y,le);this._setPaintValue(A,I,ke)},ra.prototype._setPaintValue=function(A,I,Y){if(this.type==="color")for(var le=ga(Y),ke=A;ke<I;ke++)this.paintVertexArray.emplace(ke,le[0],le[1]);else{for(var Ce=A;Ce<I;Ce++)this.paintVertexArray.emplace(Ce,Y);this.maxValue=Math.max(this.maxValue,Math.abs(Y))}},ra.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ra.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Zr=function(A,I,Y,le,ke,Ce){this.expression=A,this.uniformNames=I.map(function(je){return"u_"+je+"_t"}),this.type=Y,this.useIntegerZoom=le,this.zoom=ke,this.maxValue=0,this.paintVertexAttributes=I.map(function(je){return{name:"a_"+je,type:"Float32",components:Y==="color"?4:2,offset:0}}),this.paintVertexArray=new Ce};Zr.prototype.populatePaintArray=function(A,I,Y,le,ke){var Ce=this.expression.evaluate(new Vr(this.zoom),I,{},le,[],ke),je=this.expression.evaluate(new Vr(this.zoom+1),I,{},le,[],ke),Ke=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ke,A,Ce,je)},Zr.prototype.updatePaintArray=function(A,I,Y,le){var ke=this.expression.evaluate({zoom:this.zoom},Y,le),Ce=this.expression.evaluate({zoom:this.zoom+1},Y,le);this._setPaintValue(A,I,ke,Ce)},Zr.prototype._setPaintValue=function(A,I,Y,le){if(this.type==="color")for(var ke=ga(Y),Ce=ga(le),je=A;je<I;je++)this.paintVertexArray.emplace(je,ke[0],ke[1],Ce[0],Ce[1]);else{for(var Ke=A;Ke<I;Ke++)this.paintVertexArray.emplace(Ke,Y,le);this.maxValue=Math.max(this.maxValue,Math.abs(Y),Math.abs(le))}},Zr.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Zr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Zr.prototype.setUniform=function(A,I){var Y=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,le=u(this.expression.interpolationFactor(Y,this.zoom,this.zoom+1),0,1);A.set(le)},Zr.prototype.getBinding=function(A,I,Y){return new jr(A,I)};var ba=function(A,I,Y,le,ke,Ce){this.expression=A,this.type=I,this.useIntegerZoom=Y,this.zoom=le,this.layerId=Ce,this.zoomInPaintVertexArray=new ke,this.zoomOutPaintVertexArray=new ke};ba.prototype.populatePaintArray=function(A,I,Y){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(le,A,I.patterns&&I.patterns[this.layerId],Y)},ba.prototype.updatePaintArray=function(A,I,Y,le,ke){this._setPaintValues(A,I,Y.patterns&&Y.patterns[this.layerId],ke)},ba.prototype._setPaintValues=function(A,I,Y,le){if(le&&Y){var ke=Y.min,Ce=Y.mid,je=Y.max,Ke=le[ke],st=le[Ce],mt=le[je];if(Ke&&st&&mt)for(var _t=A;_t<I;_t++)this.zoomInPaintVertexArray.emplace(_t,st.tl[0],st.tl[1],st.br[0],st.br[1],Ke.tl[0],Ke.tl[1],Ke.br[0],Ke.br[1],st.pixelRatio,Ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(_t,st.tl[0],st.tl[1],st.br[0],st.br[1],mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],st.pixelRatio,mt.pixelRatio)}},ba.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,sr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,sr.members,this.expression.isStateDependent))},ba.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ma=function(A,I,Y){this.binders={},this._buffers=[];var le=[];for(var ke in A.paint._values)if(Y(ke)){var Ce=A.paint.get(ke);if(Ce instanceof la&&ho(Ce.property.specification)){var je=vs(ke,A.type),Ke=Ce.value,st=Ce.property.specification.type,mt=Ce.property.useIntegerZoom,_t=Ce.property.specification["property-type"],Dt=_t==="cross-faded"||_t==="cross-faded-data-driven";if(Ke.kind==="constant")this.binders[ke]=Dt?new xa(Ke.value,je):new Gr(Ke.value,je,st),le.push("/u_"+ke);else if(Ke.kind==="source"||Dt){var jt=ms(ke,st,"source");this.binders[ke]=Dt?new ba(Ke,st,mt,I,jt,A.id):new ra(Ke,je,st,jt),le.push("/a_"+ke)}else{var Rt=ms(ke,st,"composite");this.binders[ke]=new Zr(Ke,je,st,mt,I,Rt),le.push("/z_"+ke)}}}this.cacheKey=le.sort().join("")};Ma.prototype.getMaxValue=function(A){var I=this.binders[A];return I instanceof ra||I instanceof Zr?I.maxValue:0},Ma.prototype.populatePaintArrays=function(A,I,Y,le,ke){for(var Ce in this.binders){var je=this.binders[Ce];(je instanceof ra||je instanceof Zr||je instanceof ba)&&je.populatePaintArray(A,I,Y,le,ke)}},Ma.prototype.setConstantPatternPositions=function(A,I){for(var Y in this.binders){var le=this.binders[Y];le instanceof xa&&le.setConstantPatternPositions(A,I)}},Ma.prototype.updatePaintArrays=function(A,I,Y,le,ke){var Ce=!1;for(var je in A)for(var Ke=0,st=I.getPositions(je);Ke<st.length;Ke+=1){var mt=st[Ke],_t=Y.feature(mt.index);for(var Dt in this.binders){var jt=this.binders[Dt];if((jt instanceof ra||jt instanceof Zr||jt instanceof ba)&&jt.expression.isStateDependent===!0){var Rt=le.paint.get(Dt);jt.expression=Rt.value,jt.updatePaintArray(mt.start,mt.end,_t,A[je],ke),Ce=!0}}}return Ce},Ma.prototype.defines=function(){var A=[];for(var I in this.binders){var Y=this.binders[I];(Y instanceof Gr||Y instanceof xa)&&A.push.apply(A,Y.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return A},Ma.prototype.getBinderAttributes=function(){var A=[];for(var I in this.binders){var Y=this.binders[I];if(Y instanceof ra||Y instanceof Zr)for(var le=0;le<Y.paintVertexAttributes.length;le++)A.push(Y.paintVertexAttributes[le].name);else if(Y instanceof ba)for(var ke=0;ke<sr.members.length;ke++)A.push(sr.members[ke].name)}return A},Ma.prototype.getBinderUniforms=function(){var A=[];for(var I in this.binders){var Y=this.binders[I];if(Y instanceof Gr||Y instanceof xa||Y instanceof Zr)for(var le=0,ke=Y.uniformNames;le<ke.length;le+=1){var Ce=ke[le];A.push(Ce)}}return A},Ma.prototype.getPaintVertexBuffers=function(){return this._buffers},Ma.prototype.getUniforms=function(A,I){var Y=[];for(var le in this.binders){var ke=this.binders[le];if(ke instanceof Gr||ke instanceof xa||ke instanceof Zr)for(var Ce=0,je=ke.uniformNames;Ce<je.length;Ce+=1){var Ke=je[Ce];if(I[Ke]){var st=ke.getBinding(A,I[Ke],Ke);Y.push({name:Ke,property:le,binding:st})}}}return Y},Ma.prototype.setUniforms=function(A,I,Y,le){for(var ke=0,Ce=I;ke<Ce.length;ke+=1){var je=Ce[ke],Ke=je.name,st=je.property,mt=je.binding;this.binders[st].setUniform(mt,le,Y.get(st),Ke)}},Ma.prototype.updatePaintBuffers=function(A){for(var I in this._buffers=[],this.binders){var Y=this.binders[I];if(A&&Y instanceof ba){var le=A.fromScale===2?Y.zoomInPaintVertexBuffer:Y.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(Y instanceof ra||Y instanceof Zr)&&Y.paintVertexBuffer&&this._buffers.push(Y.paintVertexBuffer)}},Ma.prototype.upload=function(A){for(var I in this.binders){var Y=this.binders[I];(Y instanceof ra||Y instanceof Zr||Y instanceof ba)&&Y.upload(A)}this.updatePaintBuffers()},Ma.prototype.destroy=function(){for(var A in this.binders){var I=this.binders[A];(I instanceof ra||I instanceof Zr||I instanceof ba)&&I.destroy()}};var Ia=function(A,I,Y){Y===void 0&&(Y=function(){return!0}),this.programConfigurations={};for(var le=0,ke=A;le<ke.length;le+=1){var Ce=ke[le];this.programConfigurations[Ce.id]=new Ma(Ce,I,Y)}this.needsUpload=!1,this._featureMap=new ar,this._bufferOffset=0};function vs(A,I){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(I+"-","").replace(/-/g,"_")]}function ms(A,I,Y){var le={color:{source:ot,composite:xt},number:{source:Ue,composite:ot}},ke=function(Ce){return{"line-pattern":{source:B,composite:B},"fill-pattern":{source:B,composite:B},"fill-extrusion-pattern":{source:B,composite:B}}[Ce]}(A);return ke&&ke[Y]||le[I][Y]}Ia.prototype.populatePaintArrays=function(A,I,Y,le,ke,Ce){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(A,I,le,ke,Ce);I.id!==void 0&&this._featureMap.add(I.id,Y,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},Ia.prototype.updatePaintArrays=function(A,I,Y,le){for(var ke=0,Ce=Y;ke<Ce.length;ke+=1){var je=Ce[ke];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(A,this._featureMap,I,je,le)||this.needsUpload}},Ia.prototype.get=function(A){return this.programConfigurations[A]},Ia.prototype.upload=function(A){if(this.needsUpload){for(var I in this.programConfigurations)this.programConfigurations[I].upload(A);this.needsUpload=!1}},Ia.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},wr("ConstantBinder",Gr),wr("CrossFadedConstantBinder",xa),wr("SourceExpressionBinder",ra),wr("CrossFadedCompositeBinder",ba),wr("CompositeExpressionBinder",Zr),wr("ProgramConfiguration",Ma,{omit:["_buffers"]}),wr("ProgramConfigurationSet",Ia);var Xr=8192,Gs=Math.pow(2,14)-1,Cs=-Gs-1;function bo(A){for(var I=Xr/A.extent,Y=A.loadGeometry(),le=0;le<Y.length;le++)for(var ke=Y[le],Ce=0;Ce<ke.length;Ce++){var je=ke[Ce],Ke=Math.round(je.x*I),st=Math.round(je.y*I);je.x=u(Ke,Cs,Gs),je.y=u(st,Cs,Gs),(Ke<je.x||Ke>je.x+1||st<je.y||st>je.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return Y}function _a(A,I){return{type:A.type,id:A.id,properties:A.properties,geometry:I?bo(A):[]}}function ki(A,I,Y,le,ke){A.emplaceBack(2*I+(le+1)/2,2*Y+(ke+1)/2)}var Ga=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new No,this.indexArray=new ye,this.segments=new Bn,this.programConfigurations=new Ia(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function kl(A,I){for(var Y=0;Y<A.length;Y++)if(Ws(I,A[Y]))return!0;for(var le=0;le<I.length;le++)if(Ws(A,I[le]))return!0;return!!hl(A,I)}function mc(A,I,Y){return!!Ws(A,I)||!!pl(I,A,Y)}function Pu(A,I){if(A.length===1)return Iu(I,A[0]);for(var Y=0;Y<I.length;Y++)for(var le=I[Y],ke=0;ke<le.length;ke++)if(Ws(A,le[ke]))return!0;for(var Ce=0;Ce<A.length;Ce++)if(Iu(I,A[Ce]))return!0;for(var je=0;je<I.length;je++)if(hl(A,I[je]))return!0;return!1}function yc(A,I,Y){if(A.length>1){if(hl(A,I))return!0;for(var le=0;le<I.length;le++)if(pl(I[le],A,Y))return!0}for(var ke=0;ke<A.length;ke++)if(pl(A[ke],I,Y))return!0;return!1}function hl(A,I){if(A.length===0||I.length===0)return!1;for(var Y=0;Y<A.length-1;Y++)for(var le=A[Y],ke=A[Y+1],Ce=0;Ce<I.length-1;Ce++)if(xc(le,ke,I[Ce],I[Ce+1]))return!0;return!1}function xc(A,I,Y,le){return O(A,Y,le)!==O(I,Y,le)&&O(A,I,Y)!==O(A,I,le)}function pl(A,I,Y){var le=Y*Y;if(I.length===1)return A.distSqr(I[0])<le;for(var ke=1;ke<I.length;ke++)if(Ou(A,I[ke-1],I[ke])<le)return!0;return!1}function Ou(A,I,Y){var le=I.distSqr(Y);if(le===0)return A.distSqr(I);var ke=((A.x-I.x)*(Y.x-I.x)+(A.y-I.y)*(Y.y-I.y))/le;return ke<0?A.distSqr(I):ke>1?A.distSqr(Y):A.distSqr(Y.sub(I)._mult(ke)._add(I))}function Iu(A,I){for(var Y,le,ke,Ce=!1,je=0;je<A.length;je++)for(var Ke=0,st=(Y=A[je]).length-1;Ke<Y.length;st=Ke++)le=Y[Ke],ke=Y[st],le.y>I.y!=ke.y>I.y&&I.x<(ke.x-le.x)*(I.y-le.y)/(ke.y-le.y)+le.x&&(Ce=!Ce);return Ce}function Ws(A,I){for(var Y=!1,le=0,ke=A.length-1;le<A.length;ke=le++){var Ce=A[le],je=A[ke];Ce.y>I.y!=je.y>I.y&&I.x<(je.x-Ce.x)*(I.y-Ce.y)/(je.y-Ce.y)+Ce.x&&(Y=!Y)}return Y}function jh(A,I,Y){var le=Y[0],ke=Y[2];if(A.x<le.x&&I.x<le.x||A.x>ke.x&&I.x>ke.x||A.y<le.y&&I.y<le.y||A.y>ke.y&&I.y>ke.y)return!1;var Ce=O(A,I,Y[0]);return Ce!==O(A,I,Y[1])||Ce!==O(A,I,Y[2])||Ce!==O(A,I,Y[3])}function nu(A,I,Y){var le=I.paint.get(A).value;return le.kind==="constant"?le.value:Y.programConfigurations.get(I.id).getMaxValue(A)}function Du(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function zu(A,I,Y,le,ke){if(!I[0]&&!I[1])return A;var Ce=t.convert(I)._mult(ke);Y==="viewport"&&Ce._rotate(-le);for(var je=[],Ke=0;Ke<A.length;Ke++){var st=A[Ke];je.push(st.sub(Ce))}return je}Ga.prototype.populate=function(A,I,Y){var le=this.layers[0],ke=[],Ce=null;le.type==="circle"&&(Ce=le.layout.get("circle-sort-key"));for(var je=0,Ke=A;je<Ke.length;je+=1){var st=Ke[je],mt=st.feature,_t=st.id,Dt=st.index,jt=st.sourceLayerIndex,Rt=this.layers[0]._featureFilter.needGeometry,rn=_a(mt,Rt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),rn,Y)){var on=Ce?Ce.evaluate(rn,{},Y):void 0,bn={id:_t,properties:mt.properties,type:mt.type,sourceLayerIndex:jt,index:Dt,geometry:Rt?rn.geometry:bo(mt),patterns:{},sortKey:on};ke.push(bn)}}Ce&&ke.sort(function(yr,_r){return yr.sortKey-_r.sortKey});for(var yn=0,On=ke;yn<On.length;yn+=1){var Dn=On[yn],Un=Dn,Gn=Un.geometry,nr=Un.index,pr=Un.sourceLayerIndex,cr=A[nr].feature;this.addFeature(Dn,Gn,nr,Y),I.featureIndex.insert(cr,Gn,nr,pr,this.index)}},Ga.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Ga.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ga.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ga.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Sn),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Ga.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ga.prototype.addFeature=function(A,I,Y,le){for(var ke=0,Ce=I;ke<Ce.length;ke+=1)for(var je=0,Ke=Ce[ke];je<Ke.length;je+=1){var st=Ke[je],mt=st.x,_t=st.y;if(!(mt<0||mt>=Xr||_t<0||_t>=Xr)){var Dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),jt=Dt.vertexLength;ki(this.layoutVertexArray,mt,_t,-1,-1),ki(this.layoutVertexArray,mt,_t,1,-1),ki(this.layoutVertexArray,mt,_t,1,1),ki(this.layoutVertexArray,mt,_t,-1,1),this.indexArray.emplaceBack(jt,jt+1,jt+2),this.indexArray.emplaceBack(jt,jt+3,jt+2),Dt.vertexLength+=4,Dt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,{},le)},wr("CircleBucket",Ga,{omit:["layers"]});var Uh=new La({"circle-sort-key":new Cr(We.layout_circle["circle-sort-key"])}),Vh={paint:new La({"circle-radius":new Cr(We.paint_circle["circle-radius"]),"circle-color":new Cr(We.paint_circle["circle-color"]),"circle-blur":new Cr(We.paint_circle["circle-blur"]),"circle-opacity":new Cr(We.paint_circle["circle-opacity"]),"circle-translate":new kr(We.paint_circle["circle-translate"]),"circle-translate-anchor":new kr(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kr(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kr(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cr(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cr(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cr(We.paint_circle["circle-stroke-opacity"])}),layout:Uh},jo=typeof Float32Array<"u"?Float32Array:Array;function bc(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function sf(A,I,Y){var le=I[0],ke=I[1],Ce=I[2],je=I[3],Ke=I[4],st=I[5],mt=I[6],_t=I[7],Dt=I[8],jt=I[9],Rt=I[10],rn=I[11],on=I[12],bn=I[13],yn=I[14],On=I[15],Dn=Y[0],Un=Y[1],Gn=Y[2],nr=Y[3];return A[0]=Dn*le+Un*Ke+Gn*Dt+nr*on,A[1]=Dn*ke+Un*st+Gn*jt+nr*bn,A[2]=Dn*Ce+Un*mt+Gn*Rt+nr*yn,A[3]=Dn*je+Un*_t+Gn*rn+nr*On,Dn=Y[4],Un=Y[5],Gn=Y[6],nr=Y[7],A[4]=Dn*le+Un*Ke+Gn*Dt+nr*on,A[5]=Dn*ke+Un*st+Gn*jt+nr*bn,A[6]=Dn*Ce+Un*mt+Gn*Rt+nr*yn,A[7]=Dn*je+Un*_t+Gn*rn+nr*On,Dn=Y[8],Un=Y[9],Gn=Y[10],nr=Y[11],A[8]=Dn*le+Un*Ke+Gn*Dt+nr*on,A[9]=Dn*ke+Un*st+Gn*jt+nr*bn,A[10]=Dn*Ce+Un*mt+Gn*Rt+nr*yn,A[11]=Dn*je+Un*_t+Gn*rn+nr*On,Dn=Y[12],Un=Y[13],Gn=Y[14],nr=Y[15],A[12]=Dn*le+Un*Ke+Gn*Dt+nr*on,A[13]=Dn*ke+Un*st+Gn*jt+nr*bn,A[14]=Dn*Ce+Un*mt+Gn*Rt+nr*yn,A[15]=Dn*je+Un*_t+Gn*rn+nr*On,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,I=0,Y=arguments.length;Y--;)I+=A[Y]*A[Y];return Math.sqrt(I)});var qh=sf,Ru,Hh=function(A,I,Y){return A[0]=I[0]-Y[0],A[1]=I[1]-Y[1],A[2]=I[2]-Y[2],A};function Fu(A,I,Y){var le=I[0],ke=I[1],Ce=I[2],je=I[3];return A[0]=Y[0]*le+Y[4]*ke+Y[8]*Ce+Y[12]*je,A[1]=Y[1]*le+Y[5]*ke+Y[9]*Ce+Y[13]*je,A[2]=Y[2]*le+Y[6]*ke+Y[10]*Ce+Y[14]*je,A[3]=Y[3]*le+Y[7]*ke+Y[11]*Ce+Y[15]*je,A}Ru=new jo(3),jo!=Float32Array&&(Ru[0]=0,Ru[1]=0,Ru[2]=0),function(){var A=new jo(4);jo!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)}();var Gh=function(A){var I=A[0],Y=A[1];return I*I+Y*Y},Wh=(function(){var A=new jo(2);jo!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function I(Y){A.call(this,Y,Vh)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Y){return new Ga(Y)},I.prototype.queryRadius=function(Y){var le=Y;return nu("circle-radius",this,le)+nu("circle-stroke-width",this,le)+Du(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(Y,le,ke,Ce,je,Ke,st,mt){for(var _t=zu(Y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ke.angle,st),Dt=this.paint.get("circle-radius").evaluate(le,ke)+this.paint.get("circle-stroke-width").evaluate(le,ke),jt=this.paint.get("circle-pitch-alignment")==="map",Rt=jt?_t:function(pr,cr){return pr.map(function(yr){return lf(yr,cr)})}(_t,mt),rn=jt?Dt*st:Dt,on=0,bn=Ce;on<bn.length;on+=1)for(var yn=0,On=bn[on];yn<On.length;yn+=1){var Dn=On[yn],Un=jt?Dn:lf(Dn,mt),Gn=rn,nr=Fu([],[Dn.x,Dn.y,0,1],mt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Gn*=nr[3]/Ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Gn*=Ke.cameraToCenterDistance/nr[3]),mc(Rt,Un,Gn))return!0}return!1},I}(Qr));function lf(A,I){var Y=Fu([],[A.x,A.y,0,1],I);return new t(Y[0]/Y[3],Y[1]/Y[3])}var uf=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Ga);function _c(A,I,Y,le){var ke=I.width,Ce=I.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==ke*Ce*Y)throw new RangeError("mismatched image size")}else le=new Uint8Array(ke*Ce*Y);return A.width=ke,A.height=Ce,A.data=le,A}function cf(A,I,Y){var le=I.width,ke=I.height;if(le!==A.width||ke!==A.height){var Ce=_c({},{width:le,height:ke},Y);wc(A,Ce,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,le),height:Math.min(A.height,ke)},Y),A.width=le,A.height=ke,A.data=Ce.data}}function wc(A,I,Y,le,ke,Ce){if(ke.width===0||ke.height===0)return I;if(ke.width>A.width||ke.height>A.height||Y.x>A.width-ke.width||Y.y>A.height-ke.height)throw new RangeError("out of range source coordinates for image copy");if(ke.width>I.width||ke.height>I.height||le.x>I.width-ke.width||le.y>I.height-ke.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=A.data,Ke=I.data,st=0;st<ke.height;st++)for(var mt=((Y.y+st)*A.width+Y.x)*Ce,_t=((le.y+st)*I.width+le.x)*Ce,Dt=0;Dt<ke.width*Ce;Dt++)Ke[_t+Dt]=je[mt+Dt];return I}wr("HeatmapBucket",uf,{omit:["layers"]});var Al=function(A,I){_c(this,A,1,I)};Al.prototype.resize=function(A){cf(this,A,1)},Al.prototype.clone=function(){return new Al({width:this.width,height:this.height},new Uint8Array(this.data))},Al.copy=function(A,I,Y,le,ke){wc(A,I,Y,le,ke,1)};var so=function(A,I){_c(this,A,4,I)};so.prototype.resize=function(A){cf(this,A,4)},so.prototype.replace=function(A,I){I?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(A,I,Y,le,ke){wc(A,I,Y,le,ke,4)},wr("AlphaImage",Al),wr("RGBAImage",so);var Yh={paint:new La({"heatmap-radius":new Cr(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cr(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kr(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xo(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kr(We.paint_heatmap["heatmap-opacity"])})};function ff(A){var I={},Y=A.resolution||256,le=A.clips?A.clips.length:1,ke=A.image||new so({width:Y,height:le}),Ce=function(rn,on,bn){I[A.evaluationKey]=bn;var yn=A.expression.evaluate(I);ke.data[rn+on+0]=Math.floor(255*yn.r/yn.a),ke.data[rn+on+1]=Math.floor(255*yn.g/yn.a),ke.data[rn+on+2]=Math.floor(255*yn.b/yn.a),ke.data[rn+on+3]=Math.floor(255*yn.a)};if(A.clips)for(var je=0,Ke=0;je<le;++je,Ke+=4*Y)for(var st=0,mt=0;st<Y;st++,mt+=4){var _t=st/(Y-1),Dt=A.clips[je];Ce(Ke,mt,Dt.start*(1-_t)+Dt.end*_t)}else for(var jt=0,Rt=0;jt<Y;jt++,Rt+=4)Ce(0,Rt,jt/(Y-1));return ke}var Zh=function(A){function I(Y){A.call(this,Y,Yh),this._updateColorRamp()}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Y){return new uf(Y)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){Y==="heatmap-color"&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){var Y=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=ff({expression:Y,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},I}(Qr),Xh={paint:new La({"hillshade-illumination-direction":new kr(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kr(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kr(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kr(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kr(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kr(We.paint_hillshade["hillshade-accent-color"])})},Kh=function(A){function I(Y){A.call(this,Y,Xh)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},I}(Qr),Jh=da([{name:"a_pos",components:2,type:"Int16"}],4).members,Tc=Bu,$h=Bu;function Bu(A,I,Y){Y=Y||2;var le,ke,Ce,je,Ke,st,mt,_t=I&&I.length,Dt=_t?I[0]*Y:A.length,jt=hf(A,0,Dt,Y,!0),Rt=[];if(!jt||jt.next===jt.prev)return Rt;if(_t&&(jt=function(on,bn,yn,On){var Dn,Un,Gn,nr=[];for(Dn=0,Un=bn.length;Dn<Un;Dn++)(Gn=hf(on,bn[Dn]*On,Dn<Un-1?bn[Dn+1]*On:on.length,On,!1))===Gn.next&&(Gn.steiner=!0),nr.push(op(Gn));for(nr.sort(rp),Dn=0;Dn<nr.length;Dn++)ap(nr[Dn],yn),yn=dl(yn,yn.next);return yn}(A,I,jt,Y)),A.length>80*Y){le=Ce=A[0],ke=je=A[1];for(var rn=Y;rn<Dt;rn+=Y)(Ke=A[rn])<le&&(le=Ke),(st=A[rn+1])<ke&&(ke=st),Ke>Ce&&(Ce=Ke),st>je&&(je=st);mt=(mt=Math.max(Ce-le,je-ke))!==0?1/mt:0}return ru(jt,Rt,Y,le,ke,mt),Rt}function hf(A,I,Y,le,ke){var Ce,je;if(ke===Mc(A,I,Y,le)>0)for(Ce=I;Ce<Y;Ce+=le)je=gf(Ce,A[Ce],A[Ce+1],je);else for(Ce=Y-le;Ce>=I;Ce-=le)je=gf(Ce,A[Ce],A[Ce+1],je);return je&&Nu(je,je.next)&&(iu(je),je=je.next),je}function dl(A,I){if(!A)return A;I||(I=A);var Y,le=A;do if(Y=!1,le.steiner||!Nu(le,le.next)&&Ja(le.prev,le,le.next)!==0)le=le.next;else{if(iu(le),(le=I=le.prev)===le.next)break;Y=!0}while(Y||le!==I);return I}function ru(A,I,Y,le,ke,Ce,je){if(A){!je&&Ce&&function(_t,Dt,jt,Rt){var rn=_t;do rn.z===null&&(rn.z=kc(rn.x,rn.y,Dt,jt,Rt)),rn.prevZ=rn.prev,rn.nextZ=rn.next,rn=rn.next;while(rn!==_t);rn.prevZ.nextZ=null,rn.prevZ=null,function(on){var bn,yn,On,Dn,Un,Gn,nr,pr,cr=1;do{for(yn=on,on=null,Un=null,Gn=0;yn;){for(Gn++,On=yn,nr=0,bn=0;bn<cr&&(nr++,On=On.nextZ);bn++);for(pr=cr;nr>0||pr>0&&On;)nr!==0&&(pr===0||!On||yn.z<=On.z)?(Dn=yn,yn=yn.nextZ,nr--):(Dn=On,On=On.nextZ,pr--),Un?Un.nextZ=Dn:on=Dn,Dn.prevZ=Un,Un=Dn;yn=On}Un.nextZ=null,cr*=2}while(Gn>1)}(rn)}(A,le,ke,Ce);for(var Ke,st,mt=A;A.prev!==A.next;)if(Ke=A.prev,st=A.next,Ce?ep(A,le,ke,Ce):Qh(A))I.push(Ke.i/Y),I.push(A.i/Y),I.push(st.i/Y),iu(A),A=st.next,mt=st.next;else if((A=st)===mt){je?je===1?ru(A=tp(dl(A),I,Y),I,Y,le,ke,Ce,2):je===2&&np(A,I,Y,le,ke,Ce):ru(dl(A),I,Y,le,ke,Ce,1);break}}}function Qh(A){var I=A.prev,Y=A,le=A.next;if(Ja(I,Y,le)>=0)return!1;for(var ke=A.next.next;ke!==A.prev;){if(zl(I.x,I.y,Y.x,Y.y,le.x,le.y,ke.x,ke.y)&&Ja(ke.prev,ke,ke.next)>=0)return!1;ke=ke.next}return!0}function ep(A,I,Y,le){var ke=A.prev,Ce=A,je=A.next;if(Ja(ke,Ce,je)>=0)return!1;for(var Ke=ke.x<Ce.x?ke.x<je.x?ke.x:je.x:Ce.x<je.x?Ce.x:je.x,st=ke.y<Ce.y?ke.y<je.y?ke.y:je.y:Ce.y<je.y?Ce.y:je.y,mt=ke.x>Ce.x?ke.x>je.x?ke.x:je.x:Ce.x>je.x?Ce.x:je.x,_t=ke.y>Ce.y?ke.y>je.y?ke.y:je.y:Ce.y>je.y?Ce.y:je.y,Dt=kc(Ke,st,I,Y,le),jt=kc(mt,_t,I,Y,le),Rt=A.prevZ,rn=A.nextZ;Rt&&Rt.z>=Dt&&rn&&rn.z<=jt;){if(Rt!==A.prev&&Rt!==A.next&&zl(ke.x,ke.y,Ce.x,Ce.y,je.x,je.y,Rt.x,Rt.y)&&Ja(Rt.prev,Rt,Rt.next)>=0||(Rt=Rt.prevZ,rn!==A.prev&&rn!==A.next&&zl(ke.x,ke.y,Ce.x,Ce.y,je.x,je.y,rn.x,rn.y)&&Ja(rn.prev,rn,rn.next)>=0))return!1;rn=rn.nextZ}for(;Rt&&Rt.z>=Dt;){if(Rt!==A.prev&&Rt!==A.next&&zl(ke.x,ke.y,Ce.x,Ce.y,je.x,je.y,Rt.x,Rt.y)&&Ja(Rt.prev,Rt,Rt.next)>=0)return!1;Rt=Rt.prevZ}for(;rn&&rn.z<=jt;){if(rn!==A.prev&&rn!==A.next&&zl(ke.x,ke.y,Ce.x,Ce.y,je.x,je.y,rn.x,rn.y)&&Ja(rn.prev,rn,rn.next)>=0)return!1;rn=rn.nextZ}return!0}function tp(A,I,Y){var le=A;do{var ke=le.prev,Ce=le.next.next;!Nu(ke,Ce)&&pf(ke,le,le.next,Ce)&&au(ke,Ce)&&au(Ce,ke)&&(I.push(ke.i/Y),I.push(le.i/Y),I.push(Ce.i/Y),iu(le),iu(le.next),le=A=Ce),le=le.next}while(le!==A);return dl(le)}function np(A,I,Y,le,ke,Ce){var je=A;do{for(var Ke=je.next.next;Ke!==je.prev;){if(je.i!==Ke.i&&sp(je,Ke)){var st=df(je,Ke);return je=dl(je,je.next),st=dl(st,st.next),ru(je,I,Y,le,ke,Ce),void ru(st,I,Y,le,ke,Ce)}Ke=Ke.next}je=je.next}while(je!==A)}function rp(A,I){return A.x-I.x}function ap(A,I){if(I=function(le,ke){var Ce,je=ke,Ke=le.x,st=le.y,mt=-1/0;do{if(st<=je.y&&st>=je.next.y&&je.next.y!==je.y){var _t=je.x+(st-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(_t<=Ke&&_t>mt){if(mt=_t,_t===Ke){if(st===je.y)return je;if(st===je.next.y)return je.next}Ce=je.x<je.next.x?je:je.next}}je=je.next}while(je!==ke);if(!Ce)return null;if(Ke===mt)return Ce;var Dt,jt=Ce,Rt=Ce.x,rn=Ce.y,on=1/0;je=Ce;do Ke>=je.x&&je.x>=Rt&&Ke!==je.x&&zl(st<rn?Ke:mt,st,Rt,rn,st<rn?mt:Ke,st,je.x,je.y)&&(Dt=Math.abs(st-je.y)/(Ke-je.x),au(je,le)&&(Dt<on||Dt===on&&(je.x>Ce.x||je.x===Ce.x&&ip(Ce,je)))&&(Ce=je,on=Dt)),je=je.next;while(je!==jt);return Ce}(A,I)){var Y=df(I,A);dl(I,I.next),dl(Y,Y.next)}}function ip(A,I){return Ja(A.prev,A,I.prev)<0&&Ja(I.next,A,A.next)<0}function kc(A,I,Y,le,ke){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Y)*ke)|A<<8))|A<<4))|A<<2))|A<<1))|(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-le)*ke)|I<<8))|I<<4))|I<<2))|I<<1))<<1}function op(A){var I=A,Y=A;do(I.x<Y.x||I.x===Y.x&&I.y<Y.y)&&(Y=I),I=I.next;while(I!==A);return Y}function zl(A,I,Y,le,ke,Ce,je,Ke){return(ke-je)*(I-Ke)-(A-je)*(Ce-Ke)>=0&&(A-je)*(le-Ke)-(Y-je)*(I-Ke)>=0&&(Y-je)*(Ce-Ke)-(ke-je)*(le-Ke)>=0}function sp(A,I){return A.next.i!==I.i&&A.prev.i!==I.i&&!function(Y,le){var ke=Y;do{if(ke.i!==Y.i&&ke.next.i!==Y.i&&ke.i!==le.i&&ke.next.i!==le.i&&pf(ke,ke.next,Y,le))return!0;ke=ke.next}while(ke!==Y);return!1}(A,I)&&(au(A,I)&&au(I,A)&&function(Y,le){var ke=Y,Ce=!1,je=(Y.x+le.x)/2,Ke=(Y.y+le.y)/2;do ke.y>Ke!=ke.next.y>Ke&&ke.next.y!==ke.y&&je<(ke.next.x-ke.x)*(Ke-ke.y)/(ke.next.y-ke.y)+ke.x&&(Ce=!Ce),ke=ke.next;while(ke!==Y);return Ce}(A,I)&&(Ja(A.prev,A,I.prev)||Ja(A,I.prev,I))||Nu(A,I)&&Ja(A.prev,A,A.next)>0&&Ja(I.prev,I,I.next)>0)}function Ja(A,I,Y){return(I.y-A.y)*(Y.x-I.x)-(I.x-A.x)*(Y.y-I.y)}function Nu(A,I){return A.x===I.x&&A.y===I.y}function pf(A,I,Y,le){var ke=Uu(Ja(A,I,Y)),Ce=Uu(Ja(A,I,le)),je=Uu(Ja(Y,le,A)),Ke=Uu(Ja(Y,le,I));return ke!==Ce&&je!==Ke||!(ke!==0||!ju(A,Y,I))||!(Ce!==0||!ju(A,le,I))||!(je!==0||!ju(Y,A,le))||!(Ke!==0||!ju(Y,I,le))}function ju(A,I,Y){return I.x<=Math.max(A.x,Y.x)&&I.x>=Math.min(A.x,Y.x)&&I.y<=Math.max(A.y,Y.y)&&I.y>=Math.min(A.y,Y.y)}function Uu(A){return A>0?1:A<0?-1:0}function au(A,I){return Ja(A.prev,A,A.next)<0?Ja(A,I,A.next)>=0&&Ja(A,A.prev,I)>=0:Ja(A,I,A.prev)<0||Ja(A,A.next,I)<0}function df(A,I){var Y=new Ac(A.i,A.x,A.y),le=new Ac(I.i,I.x,I.y),ke=A.next,Ce=I.prev;return A.next=I,I.prev=A,Y.next=ke,ke.prev=Y,le.next=Y,Y.prev=le,Ce.next=le,le.prev=Ce,le}function gf(A,I,Y,le){var ke=new Ac(A,I,Y);return le?(ke.next=le.next,ke.prev=le,le.next.prev=ke,le.next=ke):(ke.prev=ke,ke.next=ke),ke}function iu(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Ac(A,I,Y){this.i=A,this.x=I,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mc(A,I,Y,le){for(var ke=0,Ce=I,je=Y-le;Ce<Y;Ce+=le)ke+=(A[je]-A[Ce])*(A[Ce+1]+A[je+1]),je=Ce;return ke}function lp(A,I,Y,le,ke){vf(A,I,Y,le||A.length-1,ke||up)}function vf(A,I,Y,le,ke){for(;le>Y;){if(le-Y>600){var Ce=le-Y+1,je=I-Y+1,Ke=Math.log(Ce),st=.5*Math.exp(2*Ke/3),mt=.5*Math.sqrt(Ke*st*(Ce-st)/Ce)*(je-Ce/2<0?-1:1);vf(A,I,Math.max(Y,Math.floor(I-je*st/Ce+mt)),Math.min(le,Math.floor(I+(Ce-je)*st/Ce+mt)),ke)}var _t=A[I],Dt=Y,jt=le;for(ou(A,Y,I),ke(A[le],_t)>0&&ou(A,Y,le);Dt<jt;){for(ou(A,Dt,jt),Dt++,jt--;ke(A[Dt],_t)<0;)Dt++;for(;ke(A[jt],_t)>0;)jt--}ke(A[Y],_t)===0?ou(A,Y,jt):ou(A,++jt,le),jt<=I&&(Y=jt+1),I<=jt&&(le=jt-1)}}function ou(A,I,Y){var le=A[I];A[I]=A[Y],A[Y]=le}function up(A,I){return A<I?-1:A>I?1:0}function Sc(A,I){var Y=A.length;if(Y<=1)return[A];for(var le,ke,Ce=[],je=0;je<Y;je++){var Ke=C(A[je]);Ke!==0&&(A[je].area=Math.abs(Ke),ke===void 0&&(ke=Ke<0),ke===Ke<0?(le&&Ce.push(le),le=[A[je]]):le.push(A[je]))}if(le&&Ce.push(le),I>1)for(var st=0;st<Ce.length;st++)Ce[st].length<=I||(lp(Ce[st],I,1,Ce[st].length-1,cp),Ce[st]=Ce[st].slice(0,I));return Ce}function cp(A,I){return I.area-A.area}function Ec(A,I,Y){for(var le=Y.patternDependencies,ke=!1,Ce=0,je=I;Ce<je.length;Ce+=1){var Ke=je[Ce].paint.get(A+"-pattern");Ke.isConstant()||(ke=!0);var st=Ke.constantOr(null);st&&(ke=!0,le[st.to]=!0,le[st.from]=!0)}return ke}function Lc(A,I,Y,le,ke){for(var Ce=ke.patternDependencies,je=0,Ke=I;je<Ke.length;je+=1){var st=Ke[je],mt=st.paint.get(A+"-pattern").value;if(mt.kind!=="constant"){var _t=mt.evaluate({zoom:le-1},Y,{},ke.availableImages),Dt=mt.evaluate({zoom:le},Y,{},ke.availableImages),jt=mt.evaluate({zoom:le+1},Y,{},ke.availableImages);_t=_t&&_t.name?_t.name:_t,Dt=Dt&&Dt.name?Dt.name:Dt,jt=jt&&jt.name?jt.name:jt,Ce[_t]=!0,Ce[Dt]=!0,Ce[jt]=!0,Y.patterns[st.id]={min:_t,mid:Dt,max:jt}}}return Y}Bu.deviation=function(A,I,Y,le){var ke=I&&I.length,Ce=ke?I[0]*Y:A.length,je=Math.abs(Mc(A,0,Ce,Y));if(ke)for(var Ke=0,st=I.length;Ke<st;Ke++){var mt=I[Ke]*Y,_t=Ke<st-1?I[Ke+1]*Y:A.length;je-=Math.abs(Mc(A,mt,_t,Y))}var Dt=0;for(Ke=0;Ke<le.length;Ke+=3){var jt=le[Ke]*Y,Rt=le[Ke+1]*Y,rn=le[Ke+2]*Y;Dt+=Math.abs((A[jt]-A[rn])*(A[Rt+1]-A[jt+1])-(A[jt]-A[Rt])*(A[rn+1]-A[jt+1]))}return je===0&&Dt===0?0:Math.abs((Dt-je)/je)},Bu.flatten=function(A){for(var I=A[0][0].length,Y={vertices:[],holes:[],dimensions:I},le=0,ke=0;ke<A.length;ke++){for(var Ce=0;Ce<A[ke].length;Ce++)for(var je=0;je<I;je++)Y.vertices.push(A[ke][Ce][je]);ke>0&&(le+=A[ke-1].length,Y.holes.push(le))}return Y},Tc.default=$h;var Ps=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new No,this.indexArray=new ye,this.indexArray2=new lt,this.programConfigurations=new Ia(A.layers,A.zoom),this.segments=new Bn,this.segments2=new Bn,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};Ps.prototype.populate=function(A,I,Y){this.hasPattern=Ec("fill",this.layers,I);for(var le=this.layers[0].layout.get("fill-sort-key"),ke=[],Ce=0,je=A;Ce<je.length;Ce+=1){var Ke=je[Ce],st=Ke.feature,mt=Ke.id,_t=Ke.index,Dt=Ke.sourceLayerIndex,jt=this.layers[0]._featureFilter.needGeometry,Rt=_a(st,jt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),Rt,Y)){var rn=le?le.evaluate(Rt,{},Y,I.availableImages):void 0,on={id:mt,properties:st.properties,type:st.type,sourceLayerIndex:Dt,index:_t,geometry:jt?Rt.geometry:bo(st),patterns:{},sortKey:rn};ke.push(on)}}le&&ke.sort(function(yr,_r){return yr.sortKey-_r.sortKey});for(var bn=0,yn=ke;bn<yn.length;bn+=1){var On=yn[bn],Dn=On,Un=Dn.geometry,Gn=Dn.index,nr=Dn.sourceLayerIndex;if(this.hasPattern){var pr=Lc("fill",this.layers,On,this.zoom,I);this.patternFeatures.push(pr)}else this.addFeature(On,Un,Gn,Y,{});var cr=A[Gn].feature;I.featureIndex.insert(cr,Un,Gn,nr,this.index)}},Ps.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Ps.prototype.addFeatures=function(A,I,Y){for(var le=0,ke=this.patternFeatures;le<ke.length;le+=1){var Ce=ke[le];this.addFeature(Ce,Ce.geometry,Ce.index,I,Y)}},Ps.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ps.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ps.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Jh),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},Ps.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ps.prototype.addFeature=function(A,I,Y,le,ke){for(var Ce=0,je=Sc(I,500);Ce<je.length;Ce+=1){for(var Ke=je[Ce],st=0,mt=0,_t=Ke;mt<_t.length;mt+=1)st+=_t[mt].length;for(var Dt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),jt=Dt.vertexLength,Rt=[],rn=[],on=0,bn=Ke;on<bn.length;on+=1){var yn=bn[on];if(yn.length!==0){yn!==Ke[0]&&rn.push(Rt.length/2);var On=this.segments2.prepareSegment(yn.length,this.layoutVertexArray,this.indexArray2),Dn=On.vertexLength;this.layoutVertexArray.emplaceBack(yn[0].x,yn[0].y),this.indexArray2.emplaceBack(Dn+yn.length-1,Dn),Rt.push(yn[0].x),Rt.push(yn[0].y);for(var Un=1;Un<yn.length;Un++)this.layoutVertexArray.emplaceBack(yn[Un].x,yn[Un].y),this.indexArray2.emplaceBack(Dn+Un-1,Dn+Un),Rt.push(yn[Un].x),Rt.push(yn[Un].y);On.vertexLength+=yn.length,On.primitiveLength+=yn.length}}for(var Gn=Tc(Rt,rn),nr=0;nr<Gn.length;nr+=3)this.indexArray.emplaceBack(jt+Gn[nr],jt+Gn[nr+1],jt+Gn[nr+2]);Dt.vertexLength+=st,Dt.primitiveLength+=Gn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,ke,le)},wr("FillBucket",Ps,{omit:["layers","patternFeatures"]});var fp=new La({"fill-sort-key":new Cr(We.layout_fill["fill-sort-key"])}),hp={paint:new La({"fill-antialias":new kr(We.paint_fill["fill-antialias"]),"fill-opacity":new Cr(We.paint_fill["fill-opacity"]),"fill-color":new Cr(We.paint_fill["fill-color"]),"fill-outline-color":new Cr(We.paint_fill["fill-outline-color"]),"fill-translate":new kr(We.paint_fill["fill-translate"]),"fill-translate-anchor":new kr(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new wi(We.paint_fill["fill-pattern"])}),layout:fp},pp=function(A){function I(Y){A.call(this,Y,hp)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(Y,le){A.prototype.recalculate.call(this,Y,le);var ke=this.paint._values["fill-outline-color"];ke.value.kind==="constant"&&ke.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(Y){return new Ps(Y)},I.prototype.queryRadius=function(){return Du(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(Y,le,ke,Ce,je,Ke,st){return Pu(zu(Y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ke.angle,st),Ce)},I.prototype.isTileClipped=function(){return!0},I}(Qr),dp=da([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,mf=Rl;function Rl(A,I,Y,le,ke){this.properties={},this.extent=Y,this.type=0,this._pbf=A,this._geometry=-1,this._keys=le,this._values=ke,A.readFields(gp,this,I)}function gp(A,I,Y){A==1?I.id=Y.readVarint():A==2?function(le,ke){for(var Ce=le.readVarint()+le.pos;le.pos<Ce;){var je=ke._keys[le.readVarint()],Ke=ke._values[le.readVarint()];ke.properties[je]=Ke}}(Y,I):A==3?I.type=Y.readVarint():A==4&&(I._geometry=Y.pos)}function vp(A){for(var I,Y,le=0,ke=0,Ce=A.length,je=Ce-1;ke<Ce;je=ke++)I=A[ke],le+=((Y=A[je]).x-I.x)*(I.y+Y.y);return le}Rl.types=["Unknown","Point","LineString","Polygon"],Rl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var I,Y=A.readVarint()+A.pos,le=1,ke=0,Ce=0,je=0,Ke=[];A.pos<Y;){if(ke<=0){var st=A.readVarint();le=7&st,ke=st>>3}if(ke--,le===1||le===2)Ce+=A.readSVarint(),je+=A.readSVarint(),le===1&&(I&&Ke.push(I),I=[]),I.push(new t(Ce,je));else{if(le!==7)throw new Error("unknown command "+le);I&&I.push(I[0].clone())}}return I&&Ke.push(I),Ke},Rl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var I=A.readVarint()+A.pos,Y=1,le=0,ke=0,Ce=0,je=1/0,Ke=-1/0,st=1/0,mt=-1/0;A.pos<I;){if(le<=0){var _t=A.readVarint();Y=7&_t,le=_t>>3}if(le--,Y===1||Y===2)(ke+=A.readSVarint())<je&&(je=ke),ke>Ke&&(Ke=ke),(Ce+=A.readSVarint())<st&&(st=Ce),Ce>mt&&(mt=Ce);else if(Y!==7)throw new Error("unknown command "+Y)}return[je,st,Ke,mt]},Rl.prototype.toGeoJSON=function(A,I,Y){var le,ke,Ce=this.extent*Math.pow(2,Y),je=this.extent*A,Ke=this.extent*I,st=this.loadGeometry(),mt=Rl.types[this.type];function _t(Rt){for(var rn=0;rn<Rt.length;rn++){var on=Rt[rn],bn=180-360*(on.y+Ke)/Ce;Rt[rn]=[360*(on.x+je)/Ce-180,360/Math.PI*Math.atan(Math.exp(bn*Math.PI/180))-90]}}switch(this.type){case 1:var Dt=[];for(le=0;le<st.length;le++)Dt[le]=st[le][0];_t(st=Dt);break;case 2:for(le=0;le<st.length;le++)_t(st[le]);break;case 3:for(st=function(Rt){var rn=Rt.length;if(rn<=1)return[Rt];for(var on,bn,yn=[],On=0;On<rn;On++){var Dn=vp(Rt[On]);Dn!==0&&(bn===void 0&&(bn=Dn<0),bn===Dn<0?(on&&yn.push(on),on=[Rt[On]]):on.push(Rt[On]))}return on&&yn.push(on),yn}(st),le=0;le<st.length;le++)for(ke=0;ke<st[le].length;ke++)_t(st[le][ke])}st.length===1?st=st[0]:mt="Multi"+mt;var jt={type:"Feature",geometry:{type:mt,coordinates:st},properties:this.properties};return"id"in this&&(jt.id=this.id),jt};var yf=xf;function xf(A,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(mp,this,I),this.length=this._features.length}function mp(A,I,Y){A===15?I.version=Y.readVarint():A===1?I.name=Y.readString():A===5?I.extent=Y.readVarint():A===2?I._features.push(Y.pos):A===3?I._keys.push(Y.readString()):A===4&&I._values.push(function(le){for(var ke=null,Ce=le.readVarint()+le.pos;le.pos<Ce;){var je=le.readVarint()>>3;ke=je===1?le.readString():je===2?le.readFloat():je===3?le.readDouble():je===4?le.readVarint64():je===5?le.readVarint():je===6?le.readSVarint():je===7?le.readBoolean():null}return ke}(Y))}function yp(A,I,Y){if(A===3){var le=new yf(Y,Y.readVarint()+Y.pos);le.length&&(I[le.name]=le)}}xf.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var I=this._pbf.readVarint()+this._pbf.pos;return new mf(this._pbf,I,this.extent,this._keys,this._values)};var Fl={VectorTile:function(A,I){this.layers=A.readFields(yp,{},I)},VectorTileFeature:mf,VectorTileLayer:yf},xp=Fl.VectorTileFeature.types,Cc=Math.pow(2,13);function su(A,I,Y,le,ke,Ce,je,Ke){A.emplaceBack(I,Y,2*Math.floor(le*Cc)+je,ke*Cc*2,Ce*Cc*2,Math.round(Ke))}var Os=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new ye,this.programConfigurations=new Ia(A.layers,A.zoom),this.segments=new Bn,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function bp(A,I){return A.x===I.x&&(A.x<0||A.x>Xr)||A.y===I.y&&(A.y<0||A.y>Xr)}Os.prototype.populate=function(A,I,Y){this.features=[],this.hasPattern=Ec("fill-extrusion",this.layers,I);for(var le=0,ke=A;le<ke.length;le+=1){var Ce=ke[le],je=Ce.feature,Ke=Ce.id,st=Ce.index,mt=Ce.sourceLayerIndex,_t=this.layers[0]._featureFilter.needGeometry,Dt=_a(je,_t);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),Dt,Y)){var jt={id:Ke,sourceLayerIndex:mt,index:st,geometry:_t?Dt.geometry:bo(je),properties:je.properties,type:je.type,patterns:{}};this.hasPattern?this.features.push(Lc("fill-extrusion",this.layers,jt,this.zoom,I)):this.addFeature(jt,jt.geometry,st,Y,{}),I.featureIndex.insert(je,jt.geometry,st,mt,this.index,!0)}}},Os.prototype.addFeatures=function(A,I,Y){for(var le=0,ke=this.features;le<ke.length;le+=1){var Ce=ke[le],je=Ce.geometry;this.addFeature(Ce,je,Ce.index,I,Y)}},Os.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Os.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Os.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,dp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Os.prototype.addFeature=function(A,I,Y,le,ke){for(var Ce=0,je=Sc(I,500);Ce<je.length;Ce+=1){for(var Ke=je[Ce],st=0,mt=0,_t=Ke;mt<_t.length;mt+=1)st+=_t[mt].length;for(var Dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),jt=0,Rt=Ke;jt<Rt.length;jt+=1){var rn=Rt[jt];if(rn.length!==0&&!((Yr=rn).every(function(Br){return Br.x<0})||Yr.every(function(Br){return Br.x>Xr})||Yr.every(function(Br){return Br.y<0})||Yr.every(function(Br){return Br.y>Xr})))for(var on=0,bn=0;bn<rn.length;bn++){var yn=rn[bn];if(bn>=1){var On=rn[bn-1];if(!bp(yn,On)){Dt.vertexLength+4>Bn.MAX_VERTEX_ARRAY_LENGTH&&(Dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Dn=yn.sub(On)._perp()._unit(),Un=On.dist(yn);on+Un>32768&&(on=0),su(this.layoutVertexArray,yn.x,yn.y,Dn.x,Dn.y,0,0,on),su(this.layoutVertexArray,yn.x,yn.y,Dn.x,Dn.y,0,1,on),on+=Un,su(this.layoutVertexArray,On.x,On.y,Dn.x,Dn.y,0,0,on),su(this.layoutVertexArray,On.x,On.y,Dn.x,Dn.y,0,1,on);var Gn=Dt.vertexLength;this.indexArray.emplaceBack(Gn,Gn+2,Gn+1),this.indexArray.emplaceBack(Gn+1,Gn+2,Gn+3),Dt.vertexLength+=4,Dt.primitiveLength+=2}}}}if(Dt.vertexLength+st>Bn.MAX_VERTEX_ARRAY_LENGTH&&(Dt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),xp[A.type]==="Polygon"){for(var nr=[],pr=[],cr=Dt.vertexLength,yr=0,_r=Ke;yr<_r.length;yr+=1){var zr=_r[yr];if(zr.length!==0){zr!==Ke[0]&&pr.push(nr.length/2);for(var Sr=0;Sr<zr.length;Sr++){var Dr=zr[Sr];su(this.layoutVertexArray,Dr.x,Dr.y,0,0,1,1,0),nr.push(Dr.x),nr.push(Dr.y)}}}for(var Lr=Tc(nr,pr),Mr=0;Mr<Lr.length;Mr+=3)this.indexArray.emplaceBack(cr+Lr[Mr],cr+Lr[Mr+2],cr+Lr[Mr+1]);Dt.primitiveLength+=Lr.length/3,Dt.vertexLength+=st}}var Yr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,ke,le)},wr("FillExtrusionBucket",Os,{omit:["layers","features"]});var _p={paint:new La({"fill-extrusion-opacity":new kr(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cr(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kr(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kr(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wi(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cr(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cr(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kr(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},wp=function(A){function I(Y){A.call(this,Y,_p)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Y){return new Os(Y)},I.prototype.queryRadius=function(){return Du(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(Y,le,ke,Ce,je,Ke,st,mt){var _t=zu(Y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ke.angle,st),Dt=this.paint.get("fill-extrusion-height").evaluate(le,ke),jt=this.paint.get("fill-extrusion-base").evaluate(le,ke),Rt=function(on,bn,yn,On){for(var Dn=[],Un=0,Gn=on;Un<Gn.length;Un+=1){var nr=Gn[Un],pr=[nr.x,nr.y,On,1];Fu(pr,pr,bn),Dn.push(new t(pr[0]/pr[3],pr[1]/pr[3]))}return Dn}(_t,mt,0,0),rn=function(on,bn,yn,On){for(var Dn=[],Un=[],Gn=On[8]*bn,nr=On[9]*bn,pr=On[10]*bn,cr=On[11]*bn,yr=On[8]*yn,_r=On[9]*yn,zr=On[10]*yn,Sr=On[11]*yn,Dr=0,Lr=on;Dr<Lr.length;Dr+=1){for(var Mr=[],Yr=[],Br=0,ma=Lr[Dr];Br<ma.length;Br+=1){var Ir=ma[Br],fa=Ir.x,Ta=Ir.y,Sa=On[0]*fa+On[4]*Ta+On[12],Ea=On[1]*fa+On[5]*Ta+On[13],ya=On[2]*fa+On[6]*Ta+On[14],ei=On[3]*fa+On[7]*Ta+On[15],Oa=ya+pr,hi=ei+cr,Ai=Sa+yr,mi=Ea+_r,Wi=ya+zr,yi=ei+Sr,ai=new t((Sa+Gn)/hi,(Ea+nr)/hi);ai.z=Oa/hi,Mr.push(ai);var xi=new t(Ai/yi,mi/yi);xi.z=Wi/yi,Yr.push(xi)}Dn.push(Mr),Un.push(Yr)}return[Dn,Un]}(Ce,jt,Dt,mt);return function(on,bn,yn){var On=1/0;Pu(yn,bn)&&(On=bf(yn,bn[0]));for(var Dn=0;Dn<bn.length;Dn++)for(var Un=bn[Dn],Gn=on[Dn],nr=0;nr<Un.length-1;nr++){var pr=Un[nr],cr=Un[nr+1],yr=Gn[nr],_r=[pr,cr,Gn[nr+1],yr,pr];kl(yn,_r)&&(On=Math.min(On,bf(yn,_r)))}return On!==1/0&&On}(rn[0],rn[1],Rt)},I}(Qr);function lu(A,I){return A.x*I.x+A.y*I.y}function bf(A,I){if(A.length===1){for(var Y,le=0,ke=I[le++];!Y||ke.equals(Y);)if(!(Y=I[le++]))return 1/0;for(;le<I.length;le++){var Ce=I[le],je=A[0],Ke=Y.sub(ke),st=Ce.sub(ke),mt=je.sub(ke),_t=lu(Ke,Ke),Dt=lu(Ke,st),jt=lu(st,st),Rt=lu(mt,Ke),rn=lu(mt,st),on=_t*jt-Dt*Dt,bn=(jt*Rt-Dt*rn)/on,yn=(_t*rn-Dt*Rt)/on,On=1-bn-yn,Dn=ke.z*On+Y.z*bn+Ce.z*yn;if(isFinite(Dn))return Dn}return 1/0}for(var Un=1/0,Gn=0,nr=I;Gn<nr.length;Gn+=1){var pr=nr[Gn];Un=Math.min(Un,pr.z)}return Un}var Tp=da([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,kp=da([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ap=Fl.VectorTileFeature.types,Mp=Math.cos(Math.PI/180*37.5),_f=Math.pow(2,14)/.5,Gi=function(A){var I=this;this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Y){return Y.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Y){I.gradients[Y.id]={}}),this.layoutVertexArray=new Je,this.layoutVertexArray2=new ot,this.indexArray=new ye,this.programConfigurations=new Ia(A.layers,A.zoom),this.segments=new Bn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Y){return Y.isStateDependent()}).map(function(Y){return Y.id})};Gi.prototype.populate=function(A,I,Y){this.hasPattern=Ec("line",this.layers,I);for(var le=this.layers[0].layout.get("line-sort-key"),ke=[],Ce=0,je=A;Ce<je.length;Ce+=1){var Ke=je[Ce],st=Ke.feature,mt=Ke.id,_t=Ke.index,Dt=Ke.sourceLayerIndex,jt=this.layers[0]._featureFilter.needGeometry,Rt=_a(st,jt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),Rt,Y)){var rn=le?le.evaluate(Rt,{},Y):void 0,on={id:mt,properties:st.properties,type:st.type,sourceLayerIndex:Dt,index:_t,geometry:jt?Rt.geometry:bo(st),patterns:{},sortKey:rn};ke.push(on)}}le&&ke.sort(function(yr,_r){return yr.sortKey-_r.sortKey});for(var bn=0,yn=ke;bn<yn.length;bn+=1){var On=yn[bn],Dn=On,Un=Dn.geometry,Gn=Dn.index,nr=Dn.sourceLayerIndex;if(this.hasPattern){var pr=Lc("line",this.layers,On,this.zoom,I);this.patternFeatures.push(pr)}else this.addFeature(On,Un,Gn,Y,{});var cr=A[Gn].feature;I.featureIndex.insert(cr,Un,Gn,nr,this.index)}},Gi.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Gi.prototype.addFeatures=function(A,I,Y){for(var le=0,ke=this.patternFeatures;le<ke.length;le+=1){var Ce=ke[le];this.addFeature(Ce,Ce.geometry,Ce.index,I,Y)}},Gi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gi.prototype.upload=function(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,kp)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Tp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Gi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gi.prototype.lineFeatureClips=function(A){if(A.properties&&A.properties.hasOwnProperty("mapbox_clip_start")&&A.properties.hasOwnProperty("mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}},Gi.prototype.addFeature=function(A,I,Y,le,ke){var Ce=this.layers[0].layout,je=Ce.get("line-join").evaluate(A,{}),Ke=Ce.get("line-cap"),st=Ce.get("line-miter-limit"),mt=Ce.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(var _t=0,Dt=I;_t<Dt.length;_t+=1){var jt=Dt[_t];this.addLine(jt,A,je,Ke,st,mt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,ke,le)},Gi.prototype.addLine=function(A,I,Y,le,ke,Ce){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var je=0;je<A.length-1;je++)this.totalDistance+=A[je].dist(A[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Ke=Ap[I.type]==="Polygon",st=A.length;st>=2&&A[st-1].equals(A[st-2]);)st--;for(var mt=0;mt<st-1&&A[mt].equals(A[mt+1]);)mt++;if(!(st<(Ke?3:2))){Y==="bevel"&&(ke=1.05);var _t,Dt=this.overscaling<=16?15*Xr/(512*this.overscaling):0,jt=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Rt=void 0,rn=void 0,on=void 0,bn=void 0;this.e1=this.e2=-1,Ke&&(_t=A[st-2],bn=A[mt].sub(_t)._unit()._perp());for(var yn=mt;yn<st;yn++)if(!(rn=yn===st-1?Ke?A[mt+1]:void 0:A[yn+1])||!A[yn].equals(rn)){bn&&(on=bn),_t&&(Rt=_t),_t=A[yn],bn=rn?rn.sub(_t)._unit()._perp():on;var On=(on=on||bn).add(bn);On.x===0&&On.y===0||On._unit();var Dn=on.x*bn.x+on.y*bn.y,Un=On.x*bn.x+On.y*bn.y,Gn=Un!==0?1/Un:1/0,nr=2*Math.sqrt(2-2*Un),pr=Un<Mp&&Rt&&rn,cr=on.x*bn.y-on.y*bn.x>0;if(pr&&yn>mt){var yr=_t.dist(Rt);if(yr>2*Dt){var _r=_t.sub(_t.sub(Rt)._mult(Dt/yr)._round());this.updateDistance(Rt,_r),this.addCurrentVertex(_r,on,0,0,jt),Rt=_r}}var zr=Rt&&rn,Sr=zr?Y:Ke?"butt":le;if(zr&&Sr==="round"&&(Gn<Ce?Sr="miter":Gn<=2&&(Sr="fakeround")),Sr==="miter"&&Gn>ke&&(Sr="bevel"),Sr==="bevel"&&(Gn>2&&(Sr="flipbevel"),Gn<ke&&(Sr="miter")),Rt&&this.updateDistance(Rt,_t),Sr==="miter")On._mult(Gn),this.addCurrentVertex(_t,On,0,0,jt);else if(Sr==="flipbevel"){if(Gn>100)On=bn.mult(-1);else{var Dr=Gn*on.add(bn).mag()/on.sub(bn).mag();On._perp()._mult(Dr*(cr?-1:1))}this.addCurrentVertex(_t,On,0,0,jt),this.addCurrentVertex(_t,On.mult(-1),0,0,jt)}else if(Sr==="bevel"||Sr==="fakeround"){var Lr=-Math.sqrt(Gn*Gn-1),Mr=cr?Lr:0,Yr=cr?0:Lr;if(Rt&&this.addCurrentVertex(_t,on,Mr,Yr,jt),Sr==="fakeround")for(var Br=Math.round(180*nr/Math.PI/20),ma=1;ma<Br;ma++){var Ir=ma/Br;if(Ir!==.5){var fa=Ir-.5;Ir+=Ir*fa*(Ir-1)*((1.0904+Dn*(Dn*(3.55645-1.43519*Dn)-3.2452))*fa*fa+(.848013+Dn*(.215638*Dn-1.06021)))}var Ta=bn.sub(on)._mult(Ir)._add(on)._unit()._mult(cr?-1:1);this.addHalfVertex(_t,Ta.x,Ta.y,!1,cr,0,jt)}rn&&this.addCurrentVertex(_t,bn,-Mr,-Yr,jt)}else if(Sr==="butt")this.addCurrentVertex(_t,On,0,0,jt);else if(Sr==="square"){var Sa=Rt?1:-1;this.addCurrentVertex(_t,On,Sa,Sa,jt)}else Sr==="round"&&(Rt&&(this.addCurrentVertex(_t,on,0,0,jt),this.addCurrentVertex(_t,on,1,1,jt,!0)),rn&&(this.addCurrentVertex(_t,bn,-1,-1,jt,!0),this.addCurrentVertex(_t,bn,0,0,jt)));if(pr&&yn<st-1){var Ea=_t.dist(rn);if(Ea>2*Dt){var ya=_t.add(rn.sub(_t)._mult(Dt/Ea)._round());this.updateDistance(_t,ya),this.addCurrentVertex(ya,bn,0,0,jt),_t=ya}}}}},Gi.prototype.addCurrentVertex=function(A,I,Y,le,ke,Ce){Ce===void 0&&(Ce=!1);var je=I.x+I.y*Y,Ke=I.y-I.x*Y,st=-I.x+I.y*le,mt=-I.y-I.x*le;this.addHalfVertex(A,je,Ke,Ce,!1,Y,ke),this.addHalfVertex(A,st,mt,Ce,!0,-le,ke),this.distance>_f/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,I,Y,le,ke,Ce))},Gi.prototype.addHalfVertex=function(A,I,Y,le,ke,Ce,je){var Ke=A.x,st=A.y,mt=.5*(this.lineClips?this.scaledDistance*(_f-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((Ke<<1)+(le?1:0),(st<<1)+(ke?1:0),Math.round(63*I)+128,Math.round(63*Y)+128,1+(Ce===0?0:Ce<0?-1:1)|(63&mt)<<2,mt>>6),this.lineClips){var _t=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(_t,this.lineClipsArray.length)}var Dt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Dt),je.primitiveLength++),ke?this.e2=Dt:this.e1=Dt},Gi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Gi.prototype.updateDistance=function(A,I){this.distance+=A.dist(I),this.updateScaledDistance()},wr("LineBucket",Gi,{omit:["layers","patternFeatures"]});var Sp=new La({"line-cap":new kr(We.layout_line["line-cap"]),"line-join":new Cr(We.layout_line["line-join"]),"line-miter-limit":new kr(We.layout_line["line-miter-limit"]),"line-round-limit":new kr(We.layout_line["line-round-limit"]),"line-sort-key":new Cr(We.layout_line["line-sort-key"])}),wf={paint:new La({"line-opacity":new Cr(We.paint_line["line-opacity"]),"line-color":new Cr(We.paint_line["line-color"]),"line-translate":new kr(We.paint_line["line-translate"]),"line-translate-anchor":new kr(We.paint_line["line-translate-anchor"]),"line-width":new Cr(We.paint_line["line-width"]),"line-gap-width":new Cr(We.paint_line["line-gap-width"]),"line-offset":new Cr(We.paint_line["line-offset"]),"line-blur":new Cr(We.paint_line["line-blur"]),"line-dasharray":new io(We.paint_line["line-dasharray"]),"line-pattern":new wi(We.paint_line["line-pattern"]),"line-gradient":new xo(We.paint_line["line-gradient"])}),layout:Sp},Ep=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(Y,le){return le=new Vr(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),A.prototype.possiblyEvaluate.call(this,Y,le)},I.prototype.evaluate=function(Y,le,ke,Ce){return le=c({},le,{zoom:Math.floor(le.zoom)}),A.prototype.evaluate.call(this,Y,le,ke,Ce)},I}(Cr),Tf=new Ep(wf.paint.properties["line-width"].specification);Tf.useIntegerZoom=!0;var Lp=function(A){function I(Y){A.call(this,Y,wf),this.gradientVersion=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(Y){if(Y==="line-gradient"){var le=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=le._styleExpression.expression instanceof xr,this.gradientVersion=(this.gradientVersion+1)%r}},I.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},I.prototype.recalculate=function(Y,le){A.prototype.recalculate.call(this,Y,le),this.paint._values["line-floorwidth"]=Tf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Y)},I.prototype.createBucket=function(Y){return new Gi(Y)},I.prototype.queryRadius=function(Y){var le=Y,ke=kf(nu("line-width",this,le),nu("line-gap-width",this,le)),Ce=nu("line-offset",this,le);return ke/2+Math.abs(Ce)+Du(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(Y,le,ke,Ce,je,Ke,st){var mt=zu(Y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ke.angle,st),_t=st/2*kf(this.paint.get("line-width").evaluate(le,ke),this.paint.get("line-gap-width").evaluate(le,ke)),Dt=this.paint.get("line-offset").evaluate(le,ke);return Dt&&(Ce=function(jt,Rt){for(var rn=[],on=new t(0,0),bn=0;bn<jt.length;bn++){for(var yn=jt[bn],On=[],Dn=0;Dn<yn.length;Dn++){var Un=yn[Dn-1],Gn=yn[Dn],nr=yn[Dn+1],pr=Dn===0?on:Gn.sub(Un)._unit()._perp(),cr=Dn===yn.length-1?on:nr.sub(Gn)._unit()._perp(),yr=pr._add(cr)._unit(),_r=yr.x*cr.x+yr.y*cr.y;yr._mult(1/_r),On.push(yr._mult(Rt)._add(Gn))}rn.push(On)}return rn}(Ce,Dt*st)),function(jt,Rt,rn){for(var on=0;on<Rt.length;on++){var bn=Rt[on];if(jt.length>=3){for(var yn=0;yn<bn.length;yn++)if(Ws(jt,bn[yn]))return!0}if(yc(jt,bn,rn))return!0}return!1}(mt,Ce,_t)},I.prototype.isTileClipped=function(){return!0},I}(Qr);function kf(A,I){return I>0?I+2*A:A}var Cp=da([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pp=da([{name:"a_projected_pos",components:3,type:"Float32"}],4),Op=(da([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),da([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Af=(da([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),da([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ip=da([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Dp(A,I,Y){return A.sections.forEach(function(le){le.text=function(ke,Ce,je){var Ke=Ce.layout.get("text-transform").evaluate(je,{});return Ke==="uppercase"?ke=ke.toLocaleUpperCase():Ke==="lowercase"&&(ke=ke.toLocaleLowerCase()),ci.applyArabicShaping&&(ke=ci.applyArabicShaping(ke)),ke}(le.text,I,Y)}),A}da([{name:"triangle",components:3,type:"Uint16"}]),da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),da([{type:"Float32",name:"offsetX"}]),da([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var uu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},vi=24,Mf=function(A,I,Y,le,ke){var Ce,je,Ke=8*ke-le-1,st=(1<<Ke)-1,mt=st>>1,_t=-7,Dt=ke-1,jt=-1,Rt=A[I+Dt];for(Dt+=jt,Ce=Rt&(1<<-_t)-1,Rt>>=-_t,_t+=Ke;_t>0;Ce=256*Ce+A[I+Dt],Dt+=jt,_t-=8);for(je=Ce&(1<<-_t)-1,Ce>>=-_t,_t+=le;_t>0;je=256*je+A[I+Dt],Dt+=jt,_t-=8);if(Ce===0)Ce=1-mt;else{if(Ce===st)return je?NaN:1/0*(Rt?-1:1);je+=Math.pow(2,le),Ce-=mt}return(Rt?-1:1)*je*Math.pow(2,Ce-le)},Sf=function(A,I,Y,le,ke,Ce){var je,Ke,st,mt=8*Ce-ke-1,_t=(1<<mt)-1,Dt=_t>>1,jt=ke===23?Math.pow(2,-24)-Math.pow(2,-77):0,Rt=0,rn=1,on=I<0||I===0&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(Ke=isNaN(I)?1:0,je=_t):(je=Math.floor(Math.log(I)/Math.LN2),I*(st=Math.pow(2,-je))<1&&(je--,st*=2),(I+=je+Dt>=1?jt/st:jt*Math.pow(2,1-Dt))*st>=2&&(je++,st/=2),je+Dt>=_t?(Ke=0,je=_t):je+Dt>=1?(Ke=(I*st-1)*Math.pow(2,ke),je+=Dt):(Ke=I*Math.pow(2,Dt-1)*Math.pow(2,ke),je=0));ke>=8;A[Y+Rt]=255&Ke,Rt+=rn,Ke/=256,ke-=8);for(je=je<<ke|Ke,mt+=ke;mt>0;A[Y+Rt]=255&je,Rt+=rn,je/=256,mt-=8);A[Y+Rt-rn]|=128*on},Vu=wa;function wa(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}wa.Varint=0,wa.Fixed64=1,wa.Bytes=2,wa.Fixed32=5;var Pc=4294967296,Ef=1/Pc,Lf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function el(A){return A.type===wa.Bytes?A.readVarint()+A.pos:A.pos+1}function Bl(A,I,Y){return Y?4294967296*I+(A>>>0):4294967296*(I>>>0)+(A>>>0)}function Cf(A,I,Y){var le=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(7*Math.LN2));Y.realloc(le);for(var ke=Y.pos-1;ke>=A;ke--)Y.buf[ke+le]=Y.buf[ke]}function zp(A,I){for(var Y=0;Y<A.length;Y++)I.writeVarint(A[Y])}function Rp(A,I){for(var Y=0;Y<A.length;Y++)I.writeSVarint(A[Y])}function Fp(A,I){for(var Y=0;Y<A.length;Y++)I.writeFloat(A[Y])}function Bp(A,I){for(var Y=0;Y<A.length;Y++)I.writeDouble(A[Y])}function Np(A,I){for(var Y=0;Y<A.length;Y++)I.writeBoolean(A[Y])}function jp(A,I){for(var Y=0;Y<A.length;Y++)I.writeFixed32(A[Y])}function Up(A,I){for(var Y=0;Y<A.length;Y++)I.writeSFixed32(A[Y])}function Vp(A,I){for(var Y=0;Y<A.length;Y++)I.writeFixed64(A[Y])}function qp(A,I){for(var Y=0;Y<A.length;Y++)I.writeSFixed64(A[Y])}function qu(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+16777216*A[I+3]}function Nl(A,I,Y){A[Y]=I,A[Y+1]=I>>>8,A[Y+2]=I>>>16,A[Y+3]=I>>>24}function Pf(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+(A[I+3]<<24)}wa.prototype={destroy:function(){this.buf=null},readFields:function(A,I,Y){for(Y=Y||this.length;this.pos<Y;){var le=this.readVarint(),ke=le>>3,Ce=this.pos;this.type=7&le,A(ke,I,this),this.pos===Ce&&this.skip(le)}return I},readMessage:function(A,I){return this.readFields(A,I,this.readVarint()+this.pos)},readFixed32:function(){var A=qu(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Pf(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=qu(this.buf,this.pos)+qu(this.buf,this.pos+4)*Pc;return this.pos+=8,A},readSFixed64:function(){var A=qu(this.buf,this.pos)+Pf(this.buf,this.pos+4)*Pc;return this.pos+=8,A},readFloat:function(){var A=Mf(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Mf(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var I,Y,le=this.buf;return I=127&(Y=le[this.pos++]),Y<128?I:(I|=(127&(Y=le[this.pos++]))<<7,Y<128?I:(I|=(127&(Y=le[this.pos++]))<<14,Y<128?I:(I|=(127&(Y=le[this.pos++]))<<21,Y<128?I:function(ke,Ce,je){var Ke,st,mt=je.buf;if(Ke=(112&(st=mt[je.pos++]))>>4,st<128||(Ke|=(127&(st=mt[je.pos++]))<<3,st<128)||(Ke|=(127&(st=mt[je.pos++]))<<10,st<128)||(Ke|=(127&(st=mt[je.pos++]))<<17,st<128)||(Ke|=(127&(st=mt[je.pos++]))<<24,st<128)||(Ke|=(1&(st=mt[je.pos++]))<<31,st<128))return Bl(ke,Ke,Ce);throw new Error("Expected varint not more than 10 bytes")}(I|=(15&(Y=le[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,I=this.pos;return this.pos=A,A-I>=12&&Lf?function(Y,le,ke){return Lf.decode(Y.subarray(le,ke))}(this.buf,I,A):function(Y,le,ke){for(var Ce="",je=le;je<ke;){var Ke,st,mt,_t=Y[je],Dt=null,jt=_t>239?4:_t>223?3:_t>191?2:1;if(je+jt>ke)break;jt===1?_t<128&&(Dt=_t):jt===2?(192&(Ke=Y[je+1]))==128&&(Dt=(31&_t)<<6|63&Ke)<=127&&(Dt=null):jt===3?(Ke=Y[je+1],st=Y[je+2],(192&Ke)==128&&(192&st)==128&&((Dt=(15&_t)<<12|(63&Ke)<<6|63&st)<=2047||Dt>=55296&&Dt<=57343)&&(Dt=null)):jt===4&&(Ke=Y[je+1],st=Y[je+2],mt=Y[je+3],(192&Ke)==128&&(192&st)==128&&(192&mt)==128&&((Dt=(15&_t)<<18|(63&Ke)<<12|(63&st)<<6|63&mt)<=65535||Dt>=1114112)&&(Dt=null)),Dt===null?(Dt=65533,jt=1):Dt>65535&&(Dt-=65536,Ce+=String.fromCharCode(Dt>>>10&1023|55296),Dt=56320|1023&Dt),Ce+=String.fromCharCode(Dt),je+=jt}return Ce}(this.buf,I,A)},readBytes:function(){var A=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,A);return this.pos=A,I},readPackedVarint:function(A,I){if(this.type!==wa.Bytes)return A.push(this.readVarint(I));var Y=el(this);for(A=A||[];this.pos<Y;)A.push(this.readVarint(I));return A},readPackedSVarint:function(A){if(this.type!==wa.Bytes)return A.push(this.readSVarint());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==wa.Bytes)return A.push(this.readBoolean());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==wa.Bytes)return A.push(this.readFloat());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==wa.Bytes)return A.push(this.readDouble());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==wa.Bytes)return A.push(this.readFixed32());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==wa.Bytes)return A.push(this.readSFixed32());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==wa.Bytes)return A.push(this.readFixed64());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==wa.Bytes)return A.push(this.readSFixed64());var I=el(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed64());return A},skip:function(A){var I=7&A;if(I===wa.Varint)for(;this.buf[this.pos++]>127;);else if(I===wa.Bytes)this.pos=this.readVarint()+this.pos;else if(I===wa.Fixed32)this.pos+=4;else{if(I!==wa.Fixed64)throw new Error("Unimplemented type: "+I);this.pos+=8}},writeTag:function(A,I){this.writeVarint(A<<3|I)},realloc:function(A){for(var I=this.length||16;I<this.pos+A;)I*=2;if(I!==this.length){var Y=new Uint8Array(I);Y.set(this.buf),this.buf=Y,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Nl(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Nl(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Nl(this.buf,-1&A,this.pos),Nl(this.buf,Math.floor(A*Ef),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Nl(this.buf,-1&A,this.pos),Nl(this.buf,Math.floor(A*Ef),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(I,Y){var le,ke;if(I>=0?(le=I%4294967296|0,ke=I/4294967296|0):(ke=~(-I/4294967296),4294967295^(le=~(-I%4294967296))?le=le+1|0:(le=0,ke=ke+1|0)),I>=18446744073709552e3||I<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),function(Ce,je,Ke){Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos]=127&Ce}(le,0,Y),function(Ce,je){var Ke=(7&Ce)<<4;je.buf[je.pos++]|=Ke|((Ce>>>=3)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(je.buf[je.pos++]=127&Ce)))))}(ke,Y)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var I=this.pos;this.pos=function(le,ke,Ce){for(var je,Ke,st=0;st<ke.length;st++){if((je=ke.charCodeAt(st))>55295&&je<57344){if(!Ke){je>56319||st+1===ke.length?(le[Ce++]=239,le[Ce++]=191,le[Ce++]=189):Ke=je;continue}if(je<56320){le[Ce++]=239,le[Ce++]=191,le[Ce++]=189,Ke=je;continue}je=Ke-55296<<10|je-56320|65536,Ke=null}else Ke&&(le[Ce++]=239,le[Ce++]=191,le[Ce++]=189,Ke=null);je<128?le[Ce++]=je:(je<2048?le[Ce++]=je>>6|192:(je<65536?le[Ce++]=je>>12|224:(le[Ce++]=je>>18|240,le[Ce++]=je>>12&63|128),le[Ce++]=je>>6&63|128),le[Ce++]=63&je|128)}return Ce}(this.buf,A,this.pos);var Y=this.pos-I;Y>=128&&Cf(I,Y,this),this.pos=I-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function(A){this.realloc(4),Sf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Sf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var I=A.length;this.writeVarint(I),this.realloc(I);for(var Y=0;Y<I;Y++)this.buf[this.pos++]=A[Y]},writeRawMessage:function(A,I){this.pos++;var Y=this.pos;A(I,this);var le=this.pos-Y;le>=128&&Cf(Y,le,this),this.pos=Y-1,this.writeVarint(le),this.pos+=le},writeMessage:function(A,I,Y){this.writeTag(A,wa.Bytes),this.writeRawMessage(I,Y)},writePackedVarint:function(A,I){I.length&&this.writeMessage(A,zp,I)},writePackedSVarint:function(A,I){I.length&&this.writeMessage(A,Rp,I)},writePackedBoolean:function(A,I){I.length&&this.writeMessage(A,Np,I)},writePackedFloat:function(A,I){I.length&&this.writeMessage(A,Fp,I)},writePackedDouble:function(A,I){I.length&&this.writeMessage(A,Bp,I)},writePackedFixed32:function(A,I){I.length&&this.writeMessage(A,jp,I)},writePackedSFixed32:function(A,I){I.length&&this.writeMessage(A,Up,I)},writePackedFixed64:function(A,I){I.length&&this.writeMessage(A,Vp,I)},writePackedSFixed64:function(A,I){I.length&&this.writeMessage(A,qp,I)},writeBytesField:function(A,I){this.writeTag(A,wa.Bytes),this.writeBytes(I)},writeFixed32Field:function(A,I){this.writeTag(A,wa.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(A,I){this.writeTag(A,wa.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(A,I){this.writeTag(A,wa.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(A,I){this.writeTag(A,wa.Fixed64),this.writeSFixed64(I)},writeVarintField:function(A,I){this.writeTag(A,wa.Varint),this.writeVarint(I)},writeSVarintField:function(A,I){this.writeTag(A,wa.Varint),this.writeSVarint(I)},writeStringField:function(A,I){this.writeTag(A,wa.Bytes),this.writeString(I)},writeFloatField:function(A,I){this.writeTag(A,wa.Fixed32),this.writeFloat(I)},writeDoubleField:function(A,I){this.writeTag(A,wa.Fixed64),this.writeDouble(I)},writeBooleanField:function(A,I){this.writeVarintField(A,!!I)}};var Oc=3;function Hp(A,I,Y){A===1&&Y.readMessage(Gp,I)}function Gp(A,I,Y){if(A===3){var le=Y.readMessage(Wp,{}),ke=le.id,Ce=le.bitmap,je=le.width,Ke=le.height,st=le.left,mt=le.top,_t=le.advance;I.push({id:ke,bitmap:new Al({width:je+2*Oc,height:Ke+2*Oc},Ce),metrics:{width:je,height:Ke,left:st,top:mt,advance:_t}})}}function Wp(A,I,Y){A===1?I.id=Y.readVarint():A===2?I.bitmap=Y.readBytes():A===3?I.width=Y.readVarint():A===4?I.height=Y.readVarint():A===5?I.left=Y.readSVarint():A===6?I.top=Y.readSVarint():A===7&&(I.advance=Y.readVarint())}var Yp=Oc;function Of(A){for(var I=0,Y=0,le=0,ke=A;le<ke.length;le+=1){var Ce=ke[le];I+=Ce.w*Ce.h,Y=Math.max(Y,Ce.w)}A.sort(function(on,bn){return bn.h-on.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(I/.95)),Y),h:1/0}],Ke=0,st=0,mt=0,_t=A;mt<_t.length;mt+=1)for(var Dt=_t[mt],jt=je.length-1;jt>=0;jt--){var Rt=je[jt];if(!(Dt.w>Rt.w||Dt.h>Rt.h)){if(Dt.x=Rt.x,Dt.y=Rt.y,st=Math.max(st,Dt.y+Dt.h),Ke=Math.max(Ke,Dt.x+Dt.w),Dt.w===Rt.w&&Dt.h===Rt.h){var rn=je.pop();jt<je.length&&(je[jt]=rn)}else Dt.h===Rt.h?(Rt.x+=Dt.w,Rt.w-=Dt.w):Dt.w===Rt.w?(Rt.y+=Dt.h,Rt.h-=Dt.h):(je.push({x:Rt.x+Dt.w,y:Rt.y,w:Rt.w-Dt.w,h:Dt.h}),Rt.y+=Dt.h,Rt.h-=Dt.h);break}}return{w:Ke,h:st,fill:I/(Ke*st)||0}}var _o=1,Hu=function(A,I){var Y=I.pixelRatio,le=I.version,ke=I.stretchX,Ce=I.stretchY,je=I.content;this.paddedRect=A,this.pixelRatio=Y,this.stretchX=ke,this.stretchY=Ce,this.content=je,this.version=le},cu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};cu.tl.get=function(){return[this.paddedRect.x+_o,this.paddedRect.y+_o]},cu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-_o,this.paddedRect.y+this.paddedRect.h-_o]},cu.tlbr.get=function(){return this.tl.concat(this.br)},cu.displaySize.get=function(){return[(this.paddedRect.w-2*_o)/this.pixelRatio,(this.paddedRect.h-2*_o)/this.pixelRatio]},Object.defineProperties(Hu.prototype,cu);var fu=function(A,I){var Y={},le={};this.haveRenderCallbacks=[];var ke=[];this.addImages(A,Y,ke),this.addImages(I,le,ke);var Ce=Of(ke),je=Ce.w,Ke=Ce.h,st=new so({width:je||1,height:Ke||1});for(var mt in A){var _t=A[mt],Dt=Y[mt].paddedRect;so.copy(_t.data,st,{x:0,y:0},{x:Dt.x+_o,y:Dt.y+_o},_t.data)}for(var jt in I){var Rt=I[jt],rn=le[jt].paddedRect,on=rn.x+_o,bn=rn.y+_o,yn=Rt.data.width,On=Rt.data.height;so.copy(Rt.data,st,{x:0,y:0},{x:on,y:bn},Rt.data),so.copy(Rt.data,st,{x:0,y:On-1},{x:on,y:bn-1},{width:yn,height:1}),so.copy(Rt.data,st,{x:0,y:0},{x:on,y:bn+On},{width:yn,height:1}),so.copy(Rt.data,st,{x:yn-1,y:0},{x:on-1,y:bn},{width:1,height:On}),so.copy(Rt.data,st,{x:0,y:0},{x:on+yn,y:bn},{width:1,height:On})}this.image=st,this.iconPositions=Y,this.patternPositions=le};fu.prototype.addImages=function(A,I,Y){for(var le in A){var ke=A[le],Ce={x:0,y:0,w:ke.data.width+2*_o,h:ke.data.height+2*_o};Y.push(Ce),I[le]=new Hu(Ce,ke),ke.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},fu.prototype.patchUpdatedImages=function(A,I){for(var Y in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[Y],A.getImage(Y),I),this.patchUpdatedImage(this.patternPositions[Y],A.getImage(Y),I)},fu.prototype.patchUpdatedImage=function(A,I,Y){if(A&&I&&A.version!==I.version){A.version=I.version;var le=A.tl,ke=le[0],Ce=le[1];Y.update(I.data,void 0,{x:ke,y:Ce})}},wr("ImagePosition",Hu),wr("ImageAtlas",fu);var Uo={horizontal:1,vertical:2,horizontalOnly:3},hu=-17,jl=function(){this.scale=1,this.fontStack="",this.imageName=null};jl.forText=function(A,I){var Y=new jl;return Y.scale=A||1,Y.fontStack=I,Y},jl.forImage=function(A){var I=new jl;return I.imageName=A,I};var Di=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Gu(A,I,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on){var bn,yn=Di.fromFeature(A,ke);Dt===Uo.vertical&&yn.verticalizePunctuation();var On=ci.processBidirectionalText,Dn=ci.processStyledBidirectionalText;if(On&&yn.sections.length===1){bn=[];for(var Un=0,Gn=On(yn.toString(),Ic(yn,mt,Ce,I,le,Rt,rn));Un<Gn.length;Un+=1){var nr=Gn[Un],pr=new Di;pr.text=nr,pr.sections=yn.sections;for(var cr=0;cr<nr.length;cr++)pr.sectionIndex.push(0);bn.push(pr)}}else if(Dn){bn=[];for(var yr=0,_r=Dn(yn.text,yn.sectionIndex,Ic(yn,mt,Ce,I,le,Rt,rn));yr<_r.length;yr+=1){var zr=_r[yr],Sr=new Di;Sr.text=zr[0],Sr.sectionIndex=zr[1],Sr.sections=yn.sections,bn.push(Sr)}}else bn=function(Mr,Yr){for(var Br=[],ma=Mr.text,Ir=0,fa=0,Ta=Yr;fa<Ta.length;fa+=1){var Sa=Ta[fa];Br.push(Mr.substring(Ir,Sa)),Ir=Sa}return Ir<ma.length&&Br.push(Mr.substring(Ir,ma.length)),Br}(yn,Ic(yn,mt,Ce,I,le,Rt,rn));var Dr=[],Lr={positionedLines:Dr,text:yn.toString(),top:_t[1],bottom:_t[1],left:_t[0],right:_t[0],writingMode:Dt,iconsInText:!1,verticalizable:!1};return function(Mr,Yr,Br,ma,Ir,fa,Ta,Sa,Ea,ya,ei,Oa){for(var hi=0,Ai=hu,mi=0,Wi=0,yi=Sa==="right"?1:Sa==="left"?0:.5,ai=0,xi=0,pi=Ir;xi<pi.length;xi+=1){var ii=pi[xi];ii.trim();var Nr=ii.getMaxScale(),Kr=(Nr-1)*vi,Na={positionedGlyphs:[],lineOffset:0};Mr.positionedLines[ai]=Na;var va=Na.positionedGlyphs,Da=0;if(ii.length()){for(var Pa=0;Pa<ii.length();Pa++){var ea=ii.getSection(Pa),ja=ii.getSectionIndex(Pa),Yi=ii.getCharCode(Pa),To=0,zi=null,Ds=null,rl=null,di=vi,zs=!(Ea===Uo.horizontal||!ei&&!mo(Yi)||ei&&(Wu[Yi]||Fo(Yi)));if(ea.imageName){var ys=ma[ea.imageName];if(!ys)continue;rl=ea.imageName,Mr.iconsInText=Mr.iconsInText||!0,Ds=ys.paddedRect;var xs=ys.displaySize;ea.scale=ea.scale*vi/Oa,zi={width:xs[0],height:xs[1],left:_o,top:-3,advance:zs?xs[1]:xs[0]},To=Kr+(vi-xs[1]*ea.scale),di=zi.advance;var Ll=zs?xs[0]*ea.scale-vi*Nr:xs[1]*ea.scale-vi*Nr;Ll>0&&Ll>Da&&(Da=Ll)}else{var tc=Br[ea.fontStack],Cl=tc&&tc[Yi];if(Cl&&Cl.rect)Ds=Cl.rect,zi=Cl.metrics;else{var nc=Yr[ea.fontStack],mu=nc&&nc[Yi];if(!mu)continue;zi=mu.metrics}To=(Nr-ea.scale)*vi}zs?(Mr.verticalizable=!0,va.push({glyph:Yi,imageName:rl,x:hi,y:Ai+To,vertical:zs,scale:ea.scale,fontStack:ea.fontStack,sectionIndex:ja,metrics:zi,rect:Ds}),hi+=di*ea.scale+ya):(va.push({glyph:Yi,imageName:rl,x:hi,y:Ai+To,vertical:zs,scale:ea.scale,fontStack:ea.fontStack,sectionIndex:ja,metrics:zi,rect:Ds}),hi+=zi.advance*ea.scale+ya)}if(va.length!==0){var qc=hi-ya;mi=Math.max(qc,mi),Xp(va,0,va.length-1,yi,Da)}hi=0;var rc=fa*Nr+Da;Na.lineOffset=Math.max(Da,Kr),Ai+=rc,Wi=Math.max(rc,Wi),++ai}else Ai+=fa,++ai}var Xl=Ai-hu,ac=Dc(Ta),ic=ac.horizontalAlign,yu=ac.verticalAlign;(function(Hc,xu,Pl,Kl,oc,sc,Jl,lc,uc){var bu=(xu-Pl)*oc,_u=0;_u=sc!==Jl?-lc*Kl-hu:(-Kl*uc+.5)*Jl;for(var Ol=0,wu=Hc;Ol<wu.length;Ol+=1)for(var Il=0,Tu=wu[Ol].positionedGlyphs;Il<Tu.length;Il+=1){var ku=Tu[Il];ku.x+=bu,ku.y+=_u}})(Mr.positionedLines,yi,ic,yu,mi,Wi,fa,Xl,Ir.length),Mr.top+=-yu*Xl,Mr.bottom=Mr.top+Xl,Mr.left+=-ic*mi,Mr.right=Mr.left+mi}(Lr,I,Y,le,bn,je,Ke,st,Dt,mt,jt,on),!function(Mr){for(var Yr=0,Br=Mr;Yr<Br.length;Yr+=1)if(Br[Yr].positionedGlyphs.length!==0)return!1;return!0}(Dr)&&Lr}Di.fromFeature=function(A,I){for(var Y=new Di,le=0;le<A.sections.length;le++){var ke=A.sections[le];ke.image?Y.addImageSection(ke):Y.addTextSection(ke,I)}return Y},Di.prototype.length=function(){return this.text.length},Di.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},Di.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},Di.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},Di.prototype.verticalizePunctuation=function(){this.text=function(A){for(var I="",Y=0;Y<A.length;Y++){var le=A.charCodeAt(Y+1)||null,ke=A.charCodeAt(Y-1)||null;le&&Fa(le)&&!uu[A[Y+1]]||ke&&Fa(ke)&&!uu[A[Y-1]]||!uu[A[Y]]?I+=A[Y]:I+=uu[A[Y]]}return I}(this.text)},Di.prototype.trim=function(){for(var A=0,I=0;I<this.text.length&&Wu[this.text.charCodeAt(I)];I++)A++;for(var Y=this.text.length,le=this.text.length-1;le>=0&&le>=A&&Wu[this.text.charCodeAt(le)];le--)Y--;this.text=this.text.substring(A,Y),this.sectionIndex=this.sectionIndex.slice(A,Y)},Di.prototype.substring=function(A,I){var Y=new Di;return Y.text=this.text.substring(A,I),Y.sectionIndex=this.sectionIndex.slice(A,I),Y.sections=this.sections,Y},Di.prototype.toString=function(){return this.text},Di.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(I,Y){return Math.max(I,A.sections[Y].scale)},0)},Di.prototype.addTextSection=function(A,I){this.text+=A.text,this.sections.push(jl.forText(A.scale,A.fontStack||I));for(var Y=this.sections.length-1,le=0;le<A.text.length;++le)this.sectionIndex.push(Y)},Di.prototype.addImageSection=function(A){var I=A.image?A.image.name:"";if(I.length!==0){var Y=this.getNextImageSectionCharCode();Y?(this.text+=String.fromCharCode(Y),this.sections.push(jl.forImage(I)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},Di.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Wu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wo={};function If(A,I,Y,le,ke,Ce){if(I.imageName){var je=le[I.imageName];return je?je.displaySize[0]*I.scale*vi/Ce+ke:0}var Ke=Y[I.fontStack],st=Ke&&Ke[A];return st?st.metrics.advance*I.scale+ke:0}function Df(A,I,Y,le){var ke=Math.pow(A-I,2);return le?A<I?ke/2:2*ke:ke+Math.abs(Y)*Y}function Zp(A,I,Y){var le=0;return A===10&&(le-=1e4),Y&&(le+=150),A!==40&&A!==65288||(le+=50),I!==41&&I!==65289||(le+=50),le}function zf(A,I,Y,le,ke,Ce){for(var je=null,Ke=Df(I,Y,ke,Ce),st=0,mt=le;st<mt.length;st+=1){var _t=mt[st],Dt=Df(I-_t.x,Y,ke,Ce)+_t.badness;Dt<=Ke&&(je=_t,Ke=Dt)}return{index:A,x:I,priorBreak:je,badness:Ke}}function Rf(A){return A?Rf(A.priorBreak).concat(A.index):[]}function Ic(A,I,Y,le,ke,Ce,je){if(Ce!=="point")return[];if(!A)return[];for(var Ke=[],st=function(bn,yn,On,Dn,Un,Gn){for(var nr=0,pr=0;pr<bn.length();pr++){var cr=bn.getSection(pr);nr+=If(bn.getCharCode(pr),cr,Dn,Un,yn,Gn)}return nr/Math.max(1,Math.ceil(nr/On))}(A,I,Y,le,ke,je),mt=A.text.indexOf("")>=0,_t=0,Dt=0;Dt<A.length();Dt++){var jt=A.getSection(Dt),Rt=A.getCharCode(Dt);if(Wu[Rt]||(_t+=If(Rt,jt,le,ke,I,je)),Dt<A.length()-1){var rn=!((on=Rt)<11904||!(dr["Bopomofo Extended"](on)||dr.Bopomofo(on)||dr["CJK Compatibility Forms"](on)||dr["CJK Compatibility Ideographs"](on)||dr["CJK Compatibility"](on)||dr["CJK Radicals Supplement"](on)||dr["CJK Strokes"](on)||dr["CJK Symbols and Punctuation"](on)||dr["CJK Unified Ideographs Extension A"](on)||dr["CJK Unified Ideographs"](on)||dr["Enclosed CJK Letters and Months"](on)||dr["Halfwidth and Fullwidth Forms"](on)||dr.Hiragana(on)||dr["Ideographic Description Characters"](on)||dr["Kangxi Radicals"](on)||dr["Katakana Phonetic Extensions"](on)||dr.Katakana(on)||dr["Vertical Forms"](on)||dr["Yi Radicals"](on)||dr["Yi Syllables"](on)));(wo[Rt]||rn||jt.imageName)&&Ke.push(zf(Dt+1,_t,st,Ke,Zp(Rt,A.getCharCode(Dt+1),rn&&mt),!1))}}var on;return Rf(zf(A.length(),_t,st,Ke,0,!0))}function Dc(A){var I=.5,Y=.5;switch(A){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":Y=1;break;case"top":case"top-right":case"top-left":Y=0}return{horizontalAlign:I,verticalAlign:Y}}function Xp(A,I,Y,le,ke){if(le||ke)for(var Ce=A[Y],je=Ce.metrics.advance*Ce.scale,Ke=(A[Y].x+je)*le,st=I;st<=Y;st++)A[st].x-=Ke,A[st].y+=ke}function Ff(A,I,Y,le,ke,Ce){var je,Ke=A.image;if(Ke.content){var st=Ke.content,mt=Ke.pixelRatio||1;je=[st[0]/mt,st[1]/mt,Ke.displaySize[0]-st[2]/mt,Ke.displaySize[1]-st[3]/mt]}var _t,Dt,jt,Rt,rn=I.left*Ce,on=I.right*Ce;Y==="width"||Y==="both"?(Rt=ke[0]+rn-le[3],Dt=ke[0]+on+le[1]):Dt=(Rt=ke[0]+(rn+on-Ke.displaySize[0])/2)+Ke.displaySize[0];var bn=I.top*Ce,yn=I.bottom*Ce;return Y==="height"||Y==="both"?(_t=ke[1]+bn-le[0],jt=ke[1]+yn+le[2]):jt=(_t=ke[1]+(bn+yn-Ke.displaySize[1])/2)+Ke.displaySize[1],{image:Ke,top:_t,right:Dt,bottom:jt,left:Rt,collisionPadding:je}}wo[10]=!0,wo[32]=!0,wo[38]=!0,wo[40]=!0,wo[41]=!0,wo[43]=!0,wo[45]=!0,wo[47]=!0,wo[173]=!0,wo[183]=!0,wo[8203]=!0,wo[8208]=!0,wo[8211]=!0,wo[8231]=!0;var Ul=function(A){function I(Y,le,ke,Ce){A.call(this,Y,le),this.angle=ke,Ce!==void 0&&(this.segment=Ce)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(t);wr("Anchor",Ul);var Is=128;function zc(A,I){var Y=I.expression;if(Y.kind==="constant")return{kind:"constant",layoutSize:Y.evaluate(new Vr(A+1))};if(Y.kind==="source")return{kind:"source"};for(var le=Y.zoomStops,ke=Y.interpolationType,Ce=0;Ce<le.length&&le[Ce]<=A;)Ce++;for(var je=Ce=Math.max(0,Ce-1);je<le.length&&le[je]<A+1;)je++;je=Math.min(le.length-1,je);var Ke=le[Ce],st=le[je];return Y.kind==="composite"?{kind:"composite",minZoom:Ke,maxZoom:st,interpolationType:ke}:{kind:"camera",minZoom:Ke,maxZoom:st,minSize:Y.evaluate(new Vr(Ke)),maxSize:Y.evaluate(new Vr(st)),interpolationType:ke}}function Bf(A,I,Y){var le=I.uSize,ke=I.uSizeT,Ce=Y.lowerSize,je=Y.upperSize;return A.kind==="source"?Ce/Is:A.kind==="composite"?Or(Ce/Is,je/Is,ke):le}function Nf(A,I){var Y=0,le=0;if(A.kind==="constant")le=A.layoutSize;else if(A.kind!=="source"){var ke=A.interpolationType,Ce=A.minZoom,je=A.maxZoom,Ke=ke?u(za.interpolationFactor(ke,I,Ce,je),0,1):0;A.kind==="camera"?le=Or(A.minSize,A.maxSize,Ke):Y=Ke}return{uSizeT:Y,uSize:le}}var Kp=Object.freeze({__proto__:null,getSizeData:zc,evaluateSizeForFeature:Bf,evaluateSizeForZoom:Nf,SIZE_PACK_FACTOR:Is});function jf(A,I,Y,le,ke){if(I.segment===void 0)return!0;for(var Ce=I,je=I.segment+1,Ke=0;Ke>-Y/2;){if(--je<0)return!1;Ke-=A[je].dist(Ce),Ce=A[je]}Ke+=A[je].dist(A[je+1]),je++;for(var st=[],mt=0;Ke<Y/2;){var _t=A[je-1],Dt=A[je],jt=A[je+1];if(!jt)return!1;var Rt=_t.angleTo(Dt)-Dt.angleTo(jt);for(Rt=Math.abs((Rt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Ke,angleDelta:Rt}),mt+=Rt;Ke-st[0].distance>le;)mt-=st.shift().angleDelta;if(mt>ke)return!1;je++,Ke+=Dt.dist(jt)}return!0}function Uf(A){for(var I=0,Y=0;Y<A.length-1;Y++)I+=A[Y].dist(A[Y+1]);return I}function Vf(A,I,Y){return A?.6*I*Y:0}function qf(A,I){return Math.max(A?A.right-A.left:0,I?I.right-I.left:0)}function Jp(A,I,Y,le,ke,Ce){for(var je=Vf(Y,ke,Ce),Ke=qf(Y,le)*Ce,st=0,mt=Uf(A)/2,_t=0;_t<A.length-1;_t++){var Dt=A[_t],jt=A[_t+1],Rt=Dt.dist(jt);if(st+Rt>mt){var rn=(mt-st)/Rt,on=Or(Dt.x,jt.x,rn),bn=Or(Dt.y,jt.y,rn),yn=new Ul(on,bn,jt.angleTo(Dt),_t);return yn._round(),!je||jf(A,yn,Ke,je,I)?yn:void 0}st+=Rt}}function $p(A,I,Y,le,ke,Ce,je,Ke,st){var mt=Vf(le,Ce,je),_t=qf(le,ke),Dt=_t*je,jt=A[0].x===0||A[0].x===st||A[0].y===0||A[0].y===st;return I-Dt<I/4&&(I=Dt+I/4),Hf(A,jt?I/2*Ke%I:(_t/2+2*Ce)*je*Ke%I,I,mt,Y,Dt,jt,!1,st)}function Hf(A,I,Y,le,ke,Ce,je,Ke,st){for(var mt=Ce/2,_t=Uf(A),Dt=0,jt=I-Y,Rt=[],rn=0;rn<A.length-1;rn++){for(var on=A[rn],bn=A[rn+1],yn=on.dist(bn),On=bn.angleTo(on);jt+Y<Dt+yn;){var Dn=((jt+=Y)-Dt)/yn,Un=Or(on.x,bn.x,Dn),Gn=Or(on.y,bn.y,Dn);if(Un>=0&&Un<st&&Gn>=0&&Gn<st&&jt-mt>=0&&jt+mt<=_t){var nr=new Ul(Un,Gn,On,rn);nr._round(),le&&!jf(A,nr,Ce,le,ke)||Rt.push(nr)}}Dt+=yn}return Ke||Rt.length||je||(Rt=Hf(A,Dt/2,Y,le,ke,Ce,je,!0,st)),Rt}function Gf(A,I,Y,le,ke){for(var Ce=[],je=0;je<A.length;je++)for(var Ke=A[je],st=void 0,mt=0;mt<Ke.length-1;mt++){var _t=Ke[mt],Dt=Ke[mt+1];_t.x<I&&Dt.x<I||(_t.x<I?_t=new t(I,_t.y+(Dt.y-_t.y)*((I-_t.x)/(Dt.x-_t.x)))._round():Dt.x<I&&(Dt=new t(I,_t.y+(Dt.y-_t.y)*((I-_t.x)/(Dt.x-_t.x)))._round()),_t.y<Y&&Dt.y<Y||(_t.y<Y?_t=new t(_t.x+(Dt.x-_t.x)*((Y-_t.y)/(Dt.y-_t.y)),Y)._round():Dt.y<Y&&(Dt=new t(_t.x+(Dt.x-_t.x)*((Y-_t.y)/(Dt.y-_t.y)),Y)._round()),_t.x>=le&&Dt.x>=le||(_t.x>=le?_t=new t(le,_t.y+(Dt.y-_t.y)*((le-_t.x)/(Dt.x-_t.x)))._round():Dt.x>=le&&(Dt=new t(le,_t.y+(Dt.y-_t.y)*((le-_t.x)/(Dt.x-_t.x)))._round()),_t.y>=ke&&Dt.y>=ke||(_t.y>=ke?_t=new t(_t.x+(Dt.x-_t.x)*((ke-_t.y)/(Dt.y-_t.y)),ke)._round():Dt.y>=ke&&(Dt=new t(_t.x+(Dt.x-_t.x)*((ke-_t.y)/(Dt.y-_t.y)),ke)._round()),st&&_t.equals(st[st.length-1])||(st=[_t],Ce.push(st)),st.push(Dt)))))}return Ce}var pu=_o;function Wf(A,I,Y,le){var ke=[],Ce=A.image,je=Ce.pixelRatio,Ke=Ce.paddedRect.w-2*pu,st=Ce.paddedRect.h-2*pu,mt=A.right-A.left,_t=A.bottom-A.top,Dt=Ce.stretchX||[[0,Ke]],jt=Ce.stretchY||[[0,st]],Rt=function(fa,Ta){return fa+Ta[1]-Ta[0]},rn=Dt.reduce(Rt,0),on=jt.reduce(Rt,0),bn=Ke-rn,yn=st-on,On=0,Dn=rn,Un=0,Gn=on,nr=0,pr=bn,cr=0,yr=yn;if(Ce.content&&le){var _r=Ce.content;On=Yu(Dt,0,_r[0]),Un=Yu(jt,0,_r[1]),Dn=Yu(Dt,_r[0],_r[2]),Gn=Yu(jt,_r[1],_r[3]),nr=_r[0]-On,cr=_r[1]-Un,pr=_r[2]-_r[0]-Dn,yr=_r[3]-_r[1]-Gn}var zr=function(fa,Ta,Sa,Ea){var ya=Zu(fa.stretch-On,Dn,mt,A.left),ei=Xu(fa.fixed-nr,pr,fa.stretch,rn),Oa=Zu(Ta.stretch-Un,Gn,_t,A.top),hi=Xu(Ta.fixed-cr,yr,Ta.stretch,on),Ai=Zu(Sa.stretch-On,Dn,mt,A.left),mi=Xu(Sa.fixed-nr,pr,Sa.stretch,rn),Wi=Zu(Ea.stretch-Un,Gn,_t,A.top),yi=Xu(Ea.fixed-cr,yr,Ea.stretch,on),ai=new t(ya,Oa),xi=new t(Ai,Oa),pi=new t(Ai,Wi),ii=new t(ya,Wi),Nr=new t(ei/je,hi/je),Kr=new t(mi/je,yi/je),Na=I*Math.PI/180;if(Na){var va=Math.sin(Na),Da=Math.cos(Na),Pa=[Da,-va,va,Da];ai._matMult(Pa),xi._matMult(Pa),ii._matMult(Pa),pi._matMult(Pa)}var ea=fa.stretch+fa.fixed,ja=Sa.stretch+Sa.fixed,Yi=Ta.stretch+Ta.fixed,To=Ea.stretch+Ea.fixed;return{tl:ai,tr:xi,bl:ii,br:pi,tex:{x:Ce.paddedRect.x+pu+ea,y:Ce.paddedRect.y+pu+Yi,w:ja-ea,h:To-Yi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Nr,pixelOffsetBR:Kr,minFontScaleX:pr/je/mt,minFontScaleY:yr/je/_t,isSDF:Y}};if(le&&(Ce.stretchX||Ce.stretchY))for(var Sr=Yf(Dt,bn,rn),Dr=Yf(jt,yn,on),Lr=0;Lr<Sr.length-1;Lr++)for(var Mr=Sr[Lr],Yr=Sr[Lr+1],Br=0;Br<Dr.length-1;Br++){var ma=Dr[Br],Ir=Dr[Br+1];ke.push(zr(Mr,ma,Yr,Ir))}else ke.push(zr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ke+1},{fixed:0,stretch:st+1}));return ke}function Yu(A,I,Y){for(var le=0,ke=0,Ce=A;ke<Ce.length;ke+=1){var je=Ce[ke];le+=Math.max(I,Math.min(Y,je[1]))-Math.max(I,Math.min(Y,je[0]))}return le}function Yf(A,I,Y){for(var le=[{fixed:-1,stretch:0}],ke=0,Ce=A;ke<Ce.length;ke+=1){var je=Ce[ke],Ke=je[0],st=je[1],mt=le[le.length-1];le.push({fixed:Ke-mt.stretch,stretch:mt.stretch}),le.push({fixed:Ke-mt.stretch,stretch:mt.stretch+(st-Ke)})}return le.push({fixed:I+pu,stretch:Y}),le}function Zu(A,I,Y,le){return A/I*Y+le}function Xu(A,I,Y,le){return A-I*Y/le}var Ku=function(A,I,Y,le,ke,Ce,je,Ke,st,mt){if(this.boxStartIndex=A.length,st){var _t=Ce.top,Dt=Ce.bottom,jt=Ce.collisionPadding;jt&&(_t-=jt[1],Dt+=jt[3]);var Rt=Dt-_t;Rt>0&&(Rt=Math.max(10,Rt),this.circleDiameter=Rt)}else{var rn=Ce.top*je-Ke,on=Ce.bottom*je+Ke,bn=Ce.left*je-Ke,yn=Ce.right*je+Ke,On=Ce.collisionPadding;if(On&&(bn-=On[0]*je,rn-=On[1]*je,yn+=On[2]*je,on+=On[3]*je),mt){var Dn=new t(bn,rn),Un=new t(yn,rn),Gn=new t(bn,on),nr=new t(yn,on),pr=mt*Math.PI/180;Dn._rotate(pr),Un._rotate(pr),Gn._rotate(pr),nr._rotate(pr),bn=Math.min(Dn.x,Un.x,Gn.x,nr.x),yn=Math.max(Dn.x,Un.x,Gn.x,nr.x),rn=Math.min(Dn.y,Un.y,Gn.y,nr.y),on=Math.max(Dn.y,Un.y,Gn.y,nr.y)}A.emplaceBack(I.x,I.y,bn,rn,yn,on,Y,le,ke)}this.boxEndIndex=A.length},Vl=function(A,I){if(A===void 0&&(A=[]),I===void 0&&(I=Qp),this.data=A,this.length=this.data.length,this.compare=I,this.length>0)for(var Y=(this.length>>1)-1;Y>=0;Y--)this._down(Y)};function Qp(A,I){return A<I?-1:A>I?1:0}function ed(A,I,Y){Y===void 0&&(Y=!1);for(var le=1/0,ke=1/0,Ce=-1/0,je=-1/0,Ke=A[0],st=0;st<Ke.length;st++){var mt=Ke[st];(!st||mt.x<le)&&(le=mt.x),(!st||mt.y<ke)&&(ke=mt.y),(!st||mt.x>Ce)&&(Ce=mt.x),(!st||mt.y>je)&&(je=mt.y)}var _t=Ce-le,Dt=je-ke,jt=Math.min(_t,Dt),Rt=jt/2,rn=new Vl([],td);if(jt===0)return new t(le,ke);for(var on=le;on<Ce;on+=jt)for(var bn=ke;bn<je;bn+=jt)rn.push(new ql(on+Rt,bn+Rt,Rt,A));for(var yn=function(Un){for(var Gn=0,nr=0,pr=0,cr=Un[0],yr=0,_r=cr.length,zr=_r-1;yr<_r;zr=yr++){var Sr=cr[yr],Dr=cr[zr],Lr=Sr.x*Dr.y-Dr.x*Sr.y;nr+=(Sr.x+Dr.x)*Lr,pr+=(Sr.y+Dr.y)*Lr,Gn+=3*Lr}return new ql(nr/Gn,pr/Gn,0,Un)}(A),On=rn.length;rn.length;){var Dn=rn.pop();(Dn.d>yn.d||!yn.d)&&(yn=Dn,Y&&console.log("found best %d after %d probes",Math.round(1e4*Dn.d)/1e4,On)),Dn.max-yn.d<=I||(Rt=Dn.h/2,rn.push(new ql(Dn.p.x-Rt,Dn.p.y-Rt,Rt,A)),rn.push(new ql(Dn.p.x+Rt,Dn.p.y-Rt,Rt,A)),rn.push(new ql(Dn.p.x-Rt,Dn.p.y+Rt,Rt,A)),rn.push(new ql(Dn.p.x+Rt,Dn.p.y+Rt,Rt,A)),On+=4)}return Y&&(console.log("num probes: "+On),console.log("best distance: "+yn.d)),yn.p}function td(A,I){return I.max-A.max}function ql(A,I,Y,le){this.p=new t(A,I),this.h=Y,this.d=function(ke,Ce){for(var je=!1,Ke=1/0,st=0;st<Ce.length;st++)for(var mt=Ce[st],_t=0,Dt=mt.length,jt=Dt-1;_t<Dt;jt=_t++){var Rt=mt[_t],rn=mt[jt];Rt.y>ke.y!=rn.y>ke.y&&ke.x<(rn.x-Rt.x)*(ke.y-Rt.y)/(rn.y-Rt.y)+Rt.x&&(je=!je),Ke=Math.min(Ke,Ou(ke,Rt,rn))}return(je?1:-1)*Math.sqrt(Ke)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}Vl.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Vl.prototype.pop=function(){if(this.length!==0){var A=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),A}},Vl.prototype.peek=function(){return this.data[0]},Vl.prototype._up=function(A){for(var I=this.data,Y=this.compare,le=I[A];A>0;){var ke=A-1>>1,Ce=I[ke];if(Y(le,Ce)>=0)break;I[A]=Ce,A=ke}I[A]=le},Vl.prototype._down=function(A){for(var I=this.data,Y=this.compare,le=this.length>>1,ke=I[A];A<le;){var Ce=1+(A<<1),je=I[Ce],Ke=Ce+1;if(Ke<this.length&&Y(I[Ke],je)<0&&(Ce=Ke,je=I[Ke]),Y(je,ke)>=0)break;I[A]=je,A=Ce}I[A]=ke};var Hl=7,Rc=Number.POSITIVE_INFINITY;function Zf(A,I){return I[1]!==Rc?function(Y,le,ke){var Ce=0,je=0;switch(le=Math.abs(le),ke=Math.abs(ke),Y){case"top-right":case"top-left":case"top":je=ke-Hl;break;case"bottom-right":case"bottom-left":case"bottom":je=-ke+Hl}switch(Y){case"top-right":case"bottom-right":case"right":Ce=-le;break;case"top-left":case"bottom-left":case"left":Ce=le}return[Ce,je]}(A,I[0],I[1]):function(Y,le){var ke=0,Ce=0;le<0&&(le=0);var je=le/Math.sqrt(2);switch(Y){case"top-right":case"top-left":Ce=je-Hl;break;case"bottom-right":case"bottom-left":Ce=-je+Hl;break;case"bottom":Ce=-le+Hl;break;case"top":Ce=le-Hl}switch(Y){case"top-right":case"bottom-right":ke=-je;break;case"top-left":case"bottom-left":ke=je;break;case"left":ke=le;break;case"right":ke=-le}return[ke,Ce]}(A,I[0])}function Fc(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var du=255,vl=du*Is;function Xf(A,I,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn){var on=function(Un,Gn,nr,pr,cr,yr,_r,zr){for(var Sr=pr.layout.get("text-rotate").evaluate(yr,{})*Math.PI/180,Dr=[],Lr=0,Mr=Gn.positionedLines;Lr<Mr.length;Lr+=1)for(var Yr=Mr[Lr],Br=0,ma=Yr.positionedGlyphs;Br<ma.length;Br+=1){var Ir=ma[Br];if(Ir.rect){var fa=Ir.rect||{},Ta=Yp+1,Sa=!0,Ea=1,ya=0,ei=(cr||zr)&&Ir.vertical,Oa=Ir.metrics.advance*Ir.scale/2;if(zr&&Gn.verticalizable){var hi=(Ir.scale-1)*vi,Ai=(vi-Ir.metrics.width*Ir.scale)/2;ya=Yr.lineOffset/2-(Ir.imageName?-Ai:hi)}if(Ir.imageName){var mi=_r[Ir.imageName];Sa=mi.sdf,Ea=mi.pixelRatio,Ta=_o/Ea}var Wi=cr?[Ir.x+Oa,Ir.y]:[0,0],yi=cr?[0,0]:[Ir.x+Oa+nr[0],Ir.y+nr[1]-ya],ai=[0,0];ei&&(ai=yi,yi=[0,0]);var xi=(Ir.metrics.left-Ta)*Ir.scale-Oa+yi[0],pi=(-Ir.metrics.top-Ta)*Ir.scale+yi[1],ii=xi+fa.w*Ir.scale/Ea,Nr=pi+fa.h*Ir.scale/Ea,Kr=new t(xi,pi),Na=new t(ii,pi),va=new t(xi,Nr),Da=new t(ii,Nr);if(ei){var Pa=new t(-Oa,Oa-hu),ea=-Math.PI/2,ja=vi/2-Oa,Yi=Ir.imageName?ja:0,To=new t(5-hu-ja,-Yi),zi=new(Function.prototype.bind.apply(t,[null].concat(ai)));Kr._rotateAround(ea,Pa)._add(To)._add(zi),Na._rotateAround(ea,Pa)._add(To)._add(zi),va._rotateAround(ea,Pa)._add(To)._add(zi),Da._rotateAround(ea,Pa)._add(To)._add(zi)}if(Sr){var Ds=Math.sin(Sr),rl=Math.cos(Sr),di=[rl,-Ds,Ds,rl];Kr._matMult(di),Na._matMult(di),va._matMult(di),Da._matMult(di)}var zs=new t(0,0),ys=new t(0,0);Dr.push({tl:Kr,tr:Na,bl:va,br:Da,tex:fa,writingMode:Gn.writingMode,glyphOffset:Wi,sectionIndex:Ir.sectionIndex,isSDF:Sa,pixelOffsetTL:zs,pixelOffsetBR:ys,minFontScaleX:0,minFontScaleY:0})}}return Dr}(0,Y,Ke,ke,Ce,je,le,A.allowVerticalPlacement),bn=A.textSizeData,yn=null;bn.kind==="source"?(yn=[Is*ke.layout.get("text-size").evaluate(je,{})])[0]>vl&&E(A.layerIds[0]+': Value for "text-size" is >= '+du+'. Reduce your "text-size".'):bn.kind==="composite"&&((yn=[Is*Rt.compositeTextSizes[0].evaluate(je,{},rn),Is*Rt.compositeTextSizes[1].evaluate(je,{},rn)])[0]>vl||yn[1]>vl)&&E(A.layerIds[0]+': Value for "text-size" is >= '+du+'. Reduce your "text-size".'),A.addSymbols(A.text,on,yn,Ke,Ce,je,mt,I,st.lineStartIndex,st.lineLength,jt,rn);for(var On=0,Dn=_t;On<Dn.length;On+=1)Dt[Dn[On]]=A.text.placedSymbolArray.length-1;return 4*on.length}function Kf(A){for(var I in A)return A[I];return null}function nd(A,I,Y,le){var ke=A.compareText;if(I in ke){for(var Ce=ke[I],je=Ce.length-1;je>=0;je--)if(le.dist(Ce[je])<Y)return!0}else ke[I]=[];return ke[I].push(le),!1}var rd=Fl.VectorTileFeature.types,ad=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ju(A,I,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt,jt){var Rt=Ke?Math.min(vl,Math.round(Ke[0])):0,rn=Ke?Math.min(vl,Math.round(Ke[1])):0;A.emplaceBack(I,Y,Math.round(32*le),Math.round(32*ke),Ce,je,(Rt<<1)+(st?1:0),rn,16*mt,16*_t,256*Dt,256*jt)}function Bc(A,I,Y){A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y)}function id(A){for(var I=0,Y=A.sections;I<Y.length;I+=1)if(ni(Y[I].text))return!0;return!1}var Gl=function(A){this.layoutVertexArray=new G,this.indexArray=new ye,this.programConfigurations=A,this.segments=new Bn,this.dynamicLayoutVertexArray=new H,this.opacityVertexArray=new L,this.placedSymbolArray=new Et};Gl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Gl.prototype.upload=function(A,I,Y,le){this.isEmpty()||(Y&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Cp.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Pp.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,ad,!0),this.opacityVertexBuffer.itemSize=1),(Y||le)&&this.programConfigurations.upload(A))},Gl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wr("SymbolBuffers",Gl);var gu=function(A,I,Y){this.layoutVertexArray=new A,this.layoutAttributes=I,this.indexArray=new Y,this.segments=new Bn,this.collisionVertexArray=new ue};gu.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Op.members,!0)},gu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wr("CollisionBuffers",gu);var ca=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bc([]),this.placementViewportMatrix=bc([]);var I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zc(this.zoom,I["text-size"]),this.iconSizeData=zc(this.zoom,I["icon-size"]);var Y=this.layers[0].layout,le=Y.get("symbol-sort-key"),ke=Y.get("symbol-z-order");this.canOverlap=Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement"),this.sortFeaturesByKey=ke!=="viewport-y"&&le.constantOr(1)!==void 0;var Ce=ke==="viewport-y"||ke==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ce&&this.canOverlap,Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(je){return Uo[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=A.sourceID};ca.prototype.createArrays=function(){this.text=new Gl(new Ia(this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Gl(new Ia(this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Ft,this.lineVertexArray=new fn,this.symbolInstances=new qt},ca.prototype.calculateGlyphDependencies=function(A,I,Y,le,ke){for(var Ce=0;Ce<A.length;Ce++)if(I[A.charCodeAt(Ce)]=!0,(Y||le)&&ke){var je=uu[A.charAt(Ce)];je&&(I[je.charCodeAt(0)]=!0)}},ca.prototype.populate=function(A,I,Y){var le=this.layers[0],ke=le.layout,Ce=ke.get("text-font"),je=ke.get("text-field"),Ke=ke.get("icon-image"),st=(je.value.kind!=="constant"||je.value.value instanceof In&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Ce.value.kind!=="constant"||Ce.value.value.length>0),mt=Ke.value.kind!=="constant"||!!Ke.value.value||Object.keys(Ke.parameters).length>0,_t=ke.get("symbol-sort-key");if(this.features=[],st||mt){for(var Dt=I.iconDependencies,jt=I.glyphDependencies,Rt=I.availableImages,rn=new Vr(this.zoom),on=0,bn=A;on<bn.length;on+=1){var yn=bn[on],On=yn.feature,Dn=yn.id,Un=yn.index,Gn=yn.sourceLayerIndex,nr=le._featureFilter.needGeometry,pr=_a(On,nr);if(le._featureFilter.filter(rn,pr,Y)){nr||(pr.geometry=bo(On));var cr=void 0;if(st){var yr=le.getValueAndResolveTokens("text-field",pr,Y,Rt),_r=In.factory(yr);id(_r)&&(this.hasRTLText=!0),(!this.hasRTLText||hs()==="unavailable"||this.hasRTLText&&ci.isParsed())&&(cr=Dp(_r,le,pr))}var zr=void 0;if(mt){var Sr=le.getValueAndResolveTokens("icon-image",pr,Y,Rt);zr=Sr instanceof Vn?Sr:Vn.fromString(Sr)}if(cr||zr){var Dr=this.sortFeaturesByKey?_t.evaluate(pr,{},Y):void 0,Lr={id:Dn,text:cr,icon:zr,index:Un,sourceLayerIndex:Gn,geometry:pr.geometry,properties:On.properties,type:rd[On.type],sortKey:Dr};if(this.features.push(Lr),zr&&(Dt[zr.name]=!0),cr){var Mr=Ce.evaluate(pr,{},Y).join(","),Yr=ke.get("text-rotation-alignment")==="map"&&ke.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Uo.vertical)>=0;for(var Br=0,ma=cr.sections;Br<ma.length;Br+=1){var Ir=ma[Br];if(Ir.image)Dt[Ir.image.name]=!0;else{var fa=Es(cr.toString()),Ta=Ir.fontStack||Mr,Sa=jt[Ta]=jt[Ta]||{};this.calculateGlyphDependencies(Ir.text,Sa,Yr,this.allowVerticalPlacement,fa)}}}}}}ke.get("symbol-placement")==="line"&&(this.features=function(Ea){var ya={},ei={},Oa=[],hi=0;function Ai(Da){Oa.push(Ea[Da]),hi++}function mi(Da,Pa,ea){var ja=ei[Da];return delete ei[Da],ei[Pa]=ja,Oa[ja].geometry[0].pop(),Oa[ja].geometry[0]=Oa[ja].geometry[0].concat(ea[0]),ja}function Wi(Da,Pa,ea){var ja=ya[Pa];return delete ya[Pa],ya[Da]=ja,Oa[ja].geometry[0].shift(),Oa[ja].geometry[0]=ea[0].concat(Oa[ja].geometry[0]),ja}function yi(Da,Pa,ea){var ja=ea?Pa[0][Pa[0].length-1]:Pa[0][0];return Da+":"+ja.x+":"+ja.y}for(var ai=0;ai<Ea.length;ai++){var xi=Ea[ai],pi=xi.geometry,ii=xi.text?xi.text.toString():null;if(ii){var Nr=yi(ii,pi),Kr=yi(ii,pi,!0);if(Nr in ei&&Kr in ya&&ei[Nr]!==ya[Kr]){var Na=Wi(Nr,Kr,pi),va=mi(Nr,Kr,Oa[Na].geometry);delete ya[Nr],delete ei[Kr],ei[yi(ii,Oa[va].geometry,!0)]=va,Oa[Na].geometry=null}else Nr in ei?mi(Nr,Kr,pi):Kr in ya?Wi(Nr,Kr,pi):(Ai(ai),ya[Nr]=hi-1,ei[Kr]=hi-1)}else Ai(ai)}return Oa.filter(function(Da){return Da.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ea,ya){return Ea.sortKey-ya.sortKey})}},ca.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,I,this.layers,Y),this.icon.programConfigurations.updatePaintArrays(A,I,this.layers,Y))},ca.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ca.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ca.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ca.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ca.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ca.prototype.addToLineVertexArray=function(A,I){var Y=this.lineVertexArray.length;if(A.segment!==void 0){for(var le=A.dist(I[A.segment+1]),ke=A.dist(I[A.segment]),Ce={},je=A.segment+1;je<I.length;je++)Ce[je]={x:I[je].x,y:I[je].y,tileUnitDistanceFromAnchor:le},je<I.length-1&&(le+=I[je+1].dist(I[je]));for(var Ke=A.segment||0;Ke>=0;Ke--)Ce[Ke]={x:I[Ke].x,y:I[Ke].y,tileUnitDistanceFromAnchor:ke},Ke>0&&(ke+=I[Ke-1].dist(I[Ke]));for(var st=0;st<I.length;st++){var mt=Ce[st];this.lineVertexArray.emplaceBack(mt.x,mt.y,mt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Y,lineLength:this.lineVertexArray.length-Y}},ca.prototype.addSymbols=function(A,I,Y,le,ke,Ce,je,Ke,st,mt,_t,Dt){for(var jt=A.indexArray,Rt=A.layoutVertexArray,rn=A.segments.prepareSegment(4*I.length,Rt,jt,this.canOverlap?Ce.sortKey:void 0),on=this.glyphOffsetArray.length,bn=rn.vertexLength,yn=this.allowVerticalPlacement&&je===Uo.vertical?Math.PI/2:0,On=Ce.text&&Ce.text.sections,Dn=0;Dn<I.length;Dn++){var Un=I[Dn],Gn=Un.tl,nr=Un.tr,pr=Un.bl,cr=Un.br,yr=Un.tex,_r=Un.pixelOffsetTL,zr=Un.pixelOffsetBR,Sr=Un.minFontScaleX,Dr=Un.minFontScaleY,Lr=Un.glyphOffset,Mr=Un.isSDF,Yr=Un.sectionIndex,Br=rn.vertexLength,ma=Lr[1];Ju(Rt,Ke.x,Ke.y,Gn.x,ma+Gn.y,yr.x,yr.y,Y,Mr,_r.x,_r.y,Sr,Dr),Ju(Rt,Ke.x,Ke.y,nr.x,ma+nr.y,yr.x+yr.w,yr.y,Y,Mr,zr.x,_r.y,Sr,Dr),Ju(Rt,Ke.x,Ke.y,pr.x,ma+pr.y,yr.x,yr.y+yr.h,Y,Mr,_r.x,zr.y,Sr,Dr),Ju(Rt,Ke.x,Ke.y,cr.x,ma+cr.y,yr.x+yr.w,yr.y+yr.h,Y,Mr,zr.x,zr.y,Sr,Dr),Bc(A.dynamicLayoutVertexArray,Ke,yn),jt.emplaceBack(Br,Br+1,Br+2),jt.emplaceBack(Br+1,Br+2,Br+3),rn.vertexLength+=4,rn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lr[0]),Dn!==I.length-1&&Yr===I[Dn+1].sectionIndex||A.programConfigurations.populatePaintArrays(Rt.length,Ce,Ce.index,{},Dt,On&&On[Yr])}A.placedSymbolArray.emplaceBack(Ke.x,Ke.y,on,this.glyphOffsetArray.length-on,bn,st,mt,Ke.segment,Y?Y[0]:0,Y?Y[1]:0,le[0],le[1],je,0,!1,0,_t)},ca.prototype._addCollisionDebugVertex=function(A,I,Y,le,ke,Ce){return I.emplaceBack(0,0),A.emplaceBack(Y.x,Y.y,le,ke,Math.round(Ce.x),Math.round(Ce.y))},ca.prototype.addCollisionDebugVertices=function(A,I,Y,le,ke,Ce,je){var Ke=ke.segments.prepareSegment(4,ke.layoutVertexArray,ke.indexArray),st=Ke.vertexLength,mt=ke.layoutVertexArray,_t=ke.collisionVertexArray,Dt=je.anchorX,jt=je.anchorY;this._addCollisionDebugVertex(mt,_t,Ce,Dt,jt,new t(A,I)),this._addCollisionDebugVertex(mt,_t,Ce,Dt,jt,new t(Y,I)),this._addCollisionDebugVertex(mt,_t,Ce,Dt,jt,new t(Y,le)),this._addCollisionDebugVertex(mt,_t,Ce,Dt,jt,new t(A,le)),Ke.vertexLength+=4;var Rt=ke.indexArray;Rt.emplaceBack(st,st+1),Rt.emplaceBack(st+1,st+2),Rt.emplaceBack(st+2,st+3),Rt.emplaceBack(st+3,st),Ke.primitiveLength+=4},ca.prototype.addDebugCollisionBoxes=function(A,I,Y,le){for(var ke=A;ke<I;ke++){var Ce=this.collisionBoxArray.get(ke),je=Ce.x1,Ke=Ce.y1,st=Ce.x2,mt=Ce.y2;this.addCollisionDebugVertices(je,Ke,st,mt,le?this.textCollisionBox:this.iconCollisionBox,Ce.anchorPoint,Y)}},ca.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gu($,Af.members,lt),this.iconCollisionBox=new gu($,Af.members,lt);for(var A=0;A<this.symbolInstances.length;A++){var I=this.symbolInstances.get(A);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}},ca.prototype._deserializeCollisionBoxesForSymbol=function(A,I,Y,le,ke,Ce,je,Ke,st){for(var mt={},_t=I;_t<Y;_t++){var Dt=A.get(_t);mt.textBox={x1:Dt.x1,y1:Dt.y1,x2:Dt.x2,y2:Dt.y2,anchorPointX:Dt.anchorPointX,anchorPointY:Dt.anchorPointY},mt.textFeatureIndex=Dt.featureIndex;break}for(var jt=le;jt<ke;jt++){var Rt=A.get(jt);mt.verticalTextBox={x1:Rt.x1,y1:Rt.y1,x2:Rt.x2,y2:Rt.y2,anchorPointX:Rt.anchorPointX,anchorPointY:Rt.anchorPointY},mt.verticalTextFeatureIndex=Rt.featureIndex;break}for(var rn=Ce;rn<je;rn++){var on=A.get(rn);mt.iconBox={x1:on.x1,y1:on.y1,x2:on.x2,y2:on.y2,anchorPointX:on.anchorPointX,anchorPointY:on.anchorPointY},mt.iconFeatureIndex=on.featureIndex;break}for(var bn=Ke;bn<st;bn++){var yn=A.get(bn);mt.verticalIconBox={x1:yn.x1,y1:yn.y1,x2:yn.x2,y2:yn.y2,anchorPointX:yn.anchorPointX,anchorPointY:yn.anchorPointY},mt.verticalIconFeatureIndex=yn.featureIndex;break}return mt},ca.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var I=0;I<this.symbolInstances.length;I++){var Y=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,Y.textBoxStartIndex,Y.textBoxEndIndex,Y.verticalTextBoxStartIndex,Y.verticalTextBoxEndIndex,Y.iconBoxStartIndex,Y.iconBoxEndIndex,Y.verticalIconBoxStartIndex,Y.verticalIconBoxEndIndex))}},ca.prototype.hasTextData=function(){return this.text.segments.get().length>0},ca.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ca.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ca.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ca.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ca.prototype.addIndicesForPlacedSymbol=function(A,I){for(var Y=A.placedSymbolArray.get(I),le=Y.vertexStartIndex+4*Y.numGlyphs,ke=Y.vertexStartIndex;ke<le;ke+=4)A.indexArray.emplaceBack(ke,ke+1,ke+2),A.indexArray.emplaceBack(ke+1,ke+2,ke+3)},ca.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var I=Math.sin(A),Y=Math.cos(A),le=[],ke=[],Ce=[],je=0;je<this.symbolInstances.length;++je){Ce.push(je);var Ke=this.symbolInstances.get(je);le.push(0|Math.round(I*Ke.anchorX+Y*Ke.anchorY)),ke.push(Ke.featureIndex)}return Ce.sort(function(st,mt){return le[st]-le[mt]||ke[mt]-ke[st]}),Ce},ca.prototype.addToSortKeyRanges=function(A,I){var Y=this.sortKeyRanges[this.sortKeyRanges.length-1];Y&&Y.sortKey===I?Y.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:A,symbolInstanceEnd:A+1})},ca.prototype.sortFeatures=function(A){var I=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Y=0,le=this.symbolInstanceIndexes;Y<le.length;Y+=1){var ke=le[Y],Ce=this.symbolInstances.get(ke);this.featureSortOrder.push(Ce.featureIndex),[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(function(je,Ke,st){je>=0&&st.indexOf(je)===Ke&&I.addIndicesForPlacedSymbol(I.text,je)}),Ce.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ce.verticalPlacedTextSymbolIndex),Ce.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.placedIconSymbolIndex),Ce.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wr("SymbolBucket",ca,{omit:["layers","collisionBoxArray","features","compareText"]}),ca.MAX_GLYPHS=65535,ca.addDynamicAttributes=Bc;var od=new La({"symbol-placement":new kr(We.layout_symbol["symbol-placement"]),"symbol-spacing":new kr(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kr(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Cr(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kr(We.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kr(We.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new kr(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new kr(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kr(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cr(We.layout_symbol["icon-size"]),"icon-text-fit":new kr(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kr(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cr(We.layout_symbol["icon-image"]),"icon-rotate":new Cr(We.layout_symbol["icon-rotate"]),"icon-padding":new kr(We.layout_symbol["icon-padding"]),"icon-keep-upright":new kr(We.layout_symbol["icon-keep-upright"]),"icon-offset":new Cr(We.layout_symbol["icon-offset"]),"icon-anchor":new Cr(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kr(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kr(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kr(We.layout_symbol["text-rotation-alignment"]),"text-field":new Cr(We.layout_symbol["text-field"]),"text-font":new Cr(We.layout_symbol["text-font"]),"text-size":new Cr(We.layout_symbol["text-size"]),"text-max-width":new Cr(We.layout_symbol["text-max-width"]),"text-line-height":new kr(We.layout_symbol["text-line-height"]),"text-letter-spacing":new Cr(We.layout_symbol["text-letter-spacing"]),"text-justify":new Cr(We.layout_symbol["text-justify"]),"text-radial-offset":new Cr(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kr(We.layout_symbol["text-variable-anchor"]),"text-anchor":new Cr(We.layout_symbol["text-anchor"]),"text-max-angle":new kr(We.layout_symbol["text-max-angle"]),"text-writing-mode":new kr(We.layout_symbol["text-writing-mode"]),"text-rotate":new Cr(We.layout_symbol["text-rotate"]),"text-padding":new kr(We.layout_symbol["text-padding"]),"text-keep-upright":new kr(We.layout_symbol["text-keep-upright"]),"text-transform":new Cr(We.layout_symbol["text-transform"]),"text-offset":new Cr(We.layout_symbol["text-offset"]),"text-allow-overlap":new kr(We.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new kr(We.layout_symbol["text-ignore-placement"]),"text-optional":new kr(We.layout_symbol["text-optional"])}),Nc={paint:new La({"icon-opacity":new Cr(We.paint_symbol["icon-opacity"]),"icon-color":new Cr(We.paint_symbol["icon-color"]),"icon-halo-color":new Cr(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cr(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cr(We.paint_symbol["icon-halo-blur"]),"icon-translate":new kr(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new kr(We.paint_symbol["icon-translate-anchor"]),"text-opacity":new Cr(We.paint_symbol["text-opacity"]),"text-color":new Cr(We.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Cr(We.paint_symbol["text-halo-color"]),"text-halo-width":new Cr(We.paint_symbol["text-halo-width"]),"text-halo-blur":new Cr(We.paint_symbol["text-halo-blur"]),"text-translate":new kr(We.paint_symbol["text-translate"]),"text-translate-anchor":new kr(We.paint_symbol["text-translate-anchor"])}),layout:od},Wl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Lt,this.defaultValue=A};Wl.prototype.evaluate=function(A){if(A.formattedSection){var I=this.defaultValue.property.overrides;if(I&&I.hasOverride(A.formattedSection))return I.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Wl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Wl.prototype.outputDefined=function(){return!1},Wl.prototype.serialize=function(){return null},wr("FormatSectionOverride",Wl,{omit:["defaultValue"]});var sd=function(A){function I(Y){A.call(this,Y,Nc)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(Y,le){if(A.prototype.recalculate.call(this,Y,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var ke=this.layout.get("text-writing-mode");if(ke){for(var Ce=[],je=0,Ke=ke;je<Ke.length;je+=1){var st=Ke[je];Ce.indexOf(st)<0&&Ce.push(st)}this.layout._values["text-writing-mode"]=Ce}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(Y,le,ke,Ce){var je=this.layout.get(Y).evaluate(le,{},ke,Ce),Ke=this._unevaluatedLayout._values[Y];return Ke.isDataDriven()||Xo(Ke.value)||!je?je:function(st,mt){return mt.replace(/{([^{}]+)}/g,function(_t,Dt){return Dt in st?String(st[Dt]):""})}(le.properties,je)},I.prototype.createBucket=function(Y){return new ca(Y)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var Y=0,le=Nc.paint.overridableProperties;Y<le.length;Y+=1){var ke=le[Y];if(I.hasPaintOverride(this.layout,ke)){var Ce,je=this.paint.get(ke),Ke=new Wl(je),st=new Co(Ke,je.property.specification);Ce=je.value.kind==="constant"||je.value.kind==="source"?new Bi("source",st):new ss("composite",st,je.value.zoomStops,je.value._interpolationType),this.paint._values[ke]=new la(je.property,Ce,je.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,le,ke){return!(!this.layout||le.isDataDriven()||ke.isDataDriven())&&I.hasPaintOverride(this.layout,Y)},I.hasPaintOverride=function(Y,le){var ke=Y.get("text-field"),Ce=Nc.paint.properties[le],je=!1,Ke=function(_t){for(var Dt=0,jt=_t;Dt<jt.length;Dt+=1){var Rt=jt[Dt];if(Ce.overrides&&Ce.overrides.hasOverride(Rt))return void(je=!0)}};if(ke.value.kind==="constant"&&ke.value.value instanceof In)Ke(ke.value.value.sections);else if(ke.value.kind==="source"){var st=function(_t){if(!je)if(_t instanceof Jt&&Wn(_t.value)===Cn){var Dt=_t.value;Ke(Dt.sections)}else _t instanceof Ln?Ke(_t.sections):_t.eachChild(st)},mt=ke.value;mt._styleExpression&&st(mt._styleExpression.expression)}return je},I}(Qr),ld={paint:new La({"background-color":new kr(We.paint_background["background-color"]),"background-pattern":new io(We.paint_background["background-pattern"]),"background-opacity":new kr(We.paint_background["background-opacity"])})},ud=function(A){function I(Y){A.call(this,Y,ld)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Qr),cd={paint:new La({"raster-opacity":new kr(We.paint_raster["raster-opacity"]),"raster-hue-rotate":new kr(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kr(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kr(We.paint_raster["raster-brightness-max"]),"raster-saturation":new kr(We.paint_raster["raster-saturation"]),"raster-contrast":new kr(We.paint_raster["raster-contrast"]),"raster-resampling":new kr(We.paint_raster["raster-resampling"]),"raster-fade-duration":new kr(We.paint_raster["raster-fade-duration"])})},fd=function(A){function I(Y){A.call(this,Y,cd)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Qr),hd=function(A){function I(Y){A.call(this,Y,{}),this.implementation=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},I.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(Y){this.implementation.onAdd&&this.implementation.onAdd(Y,Y.painter.context.gl)},I.prototype.onRemove=function(Y){this.implementation.onRemove&&this.implementation.onRemove(Y,Y.painter.context.gl)},I}(Qr),pd={circle:Wh,heatmap:Zh,hillshade:Kh,fill:pp,"fill-extrusion":wp,line:Lp,symbol:sd,background:ud,raster:fd},Jf=n.HTMLImageElement,$f=n.HTMLCanvasElement,Qf=n.HTMLVideoElement,eh=n.ImageData,$u=n.ImageBitmap,Ml=function(A,I,Y,le){this.context=A,this.format=Y,this.texture=A.gl.createTexture(),this.update(I,le)};Ml.prototype.update=function(A,I,Y){var le=A.width,ke=A.height,Ce=!(this.size&&this.size[0]===le&&this.size[1]===ke||Y),je=this.context,Ke=je.gl;if(this.useMipmap=!!(I&&I.useMipmap),Ke.bindTexture(Ke.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ke.RGBA&&(!I||I.premultiply!==!1)),Ce)this.size=[le,ke],A instanceof Jf||A instanceof $f||A instanceof Qf||A instanceof eh||$u&&A instanceof $u?Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,this.format,Ke.UNSIGNED_BYTE,A):Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,le,ke,0,this.format,Ke.UNSIGNED_BYTE,A.data);else{var st=Y||{x:0,y:0},mt=st.x,_t=st.y;A instanceof Jf||A instanceof $f||A instanceof Qf||A instanceof eh||$u&&A instanceof $u?Ke.texSubImage2D(Ke.TEXTURE_2D,0,mt,_t,Ke.RGBA,Ke.UNSIGNED_BYTE,A):Ke.texSubImage2D(Ke.TEXTURE_2D,0,mt,_t,le,ke,Ke.RGBA,Ke.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ke.generateMipmap(Ke.TEXTURE_2D)},Ml.prototype.bind=function(A,I,Y){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),Y!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Y=le.LINEAR),A!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,A),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,Y||A),this.filter=A),I!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,I),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,I),this.wrap=I)},Ml.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ml.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var jc=function(A){var I=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){I._triggered=!1,I._callback()})};jc.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},jc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Yl=function(A,I,Y){this.target=A,this.parent=I,this.mapId=Y,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new jc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?A:n};function th(A,I,Y){var le=2*Math.PI*6378137/256/Math.pow(2,Y);return[A*le-2*Math.PI*6378137/2,I*le-2*Math.PI*6378137/2]}Yl.prototype.send=function(A,I,Y,le,ke){var Ce=this;ke===void 0&&(ke=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Y&&(this.callbacks[je]=Y);var Ke=D(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:A,hasCallback:!!Y,targetMapId:le,mustQueue:ke,sourceMapId:this.mapId,data:Ro(I,Ke)},Ke),{cancel:function(){Y&&delete Ce.callbacks[je],Ce.target.postMessage({id:je,type:"<cancel>",targetMapId:le,sourceMapId:Ce.mapId})}}},Yl.prototype.receive=function(A){var I=A.data,Y=I.id;if(Y&&(!I.targetMapId||this.mapId===I.targetMapId))if(I.type==="<cancel>"){delete this.tasks[Y];var le=this.cancelCallbacks[Y];delete this.cancelCallbacks[Y],le&&le()}else P()||I.mustQueue?(this.tasks[Y]=I,this.taskQueue.push(Y),this.invoker.trigger()):this.processTask(Y,I)},Yl.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),I=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(A,I)}},Yl.prototype.processTask=function(A,I){var Y=this;if(I.type==="<response>"){var le=this.callbacks[A];delete this.callbacks[A],le&&(I.error?le(ts(I.error)):le(null,ts(I.data)))}else{var ke=!1,Ce=D(this.globalScope)?void 0:[],je=I.hasCallback?function(_t,Dt){ke=!0,delete Y.cancelCallbacks[A],Y.target.postMessage({id:A,type:"<response>",sourceMapId:Y.mapId,error:_t?Ro(_t):null,data:Ro(Dt,Ce)},Ce)}:function(_t){ke=!0},Ke=null,st=ts(I.data);if(this.parent[I.type])Ke=this.parent[I.type](I.sourceMapId,st,je);else if(this.parent.getWorkerSource){var mt=I.type.split(".");Ke=this.parent.getWorkerSource(I.sourceMapId,mt[0],st.source)[mt[1]](st,je)}else je(new Error("Could not find function "+I.type));!ke&&Ke&&Ke.cancel&&(this.cancelCallbacks[A]=Ke.cancel)}},Yl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var $a=function(A,I){A&&(I?this.setSouthWest(A).setNorthEast(I):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};$a.prototype.setNorthEast=function(A){return this._ne=A instanceof Ca?new Ca(A.lng,A.lat):Ca.convert(A),this},$a.prototype.setSouthWest=function(A){return this._sw=A instanceof Ca?new Ca(A.lng,A.lat):Ca.convert(A),this},$a.prototype.extend=function(A){var I,Y,le=this._sw,ke=this._ne;if(A instanceof Ca)I=A,Y=A;else{if(!(A instanceof $a)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var Ce=A;return this.extend($a.convert(Ce))}var je=A;return this.extend(Ca.convert(je))}return this}if(I=A._sw,Y=A._ne,!I||!Y)return this}return le||ke?(le.lng=Math.min(I.lng,le.lng),le.lat=Math.min(I.lat,le.lat),ke.lng=Math.max(Y.lng,ke.lng),ke.lat=Math.max(Y.lat,ke.lat)):(this._sw=new Ca(I.lng,I.lat),this._ne=new Ca(Y.lng,Y.lat)),this},$a.prototype.getCenter=function(){return new Ca((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},$a.prototype.getSouthWest=function(){return this._sw},$a.prototype.getNorthEast=function(){return this._ne},$a.prototype.getNorthWest=function(){return new Ca(this.getWest(),this.getNorth())},$a.prototype.getSouthEast=function(){return new Ca(this.getEast(),this.getSouth())},$a.prototype.getWest=function(){return this._sw.lng},$a.prototype.getSouth=function(){return this._sw.lat},$a.prototype.getEast=function(){return this._ne.lng},$a.prototype.getNorth=function(){return this._ne.lat},$a.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},$a.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},$a.prototype.isEmpty=function(){return!(this._sw&&this._ne)},$a.prototype.contains=function(A){var I=Ca.convert(A),Y=I.lng,le=I.lat,ke=this._sw.lat<=le&&le<=this._ne.lat,Ce=this._sw.lng<=Y&&Y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ce=this._sw.lng>=Y&&Y>=this._ne.lng),ke&&Ce},$a.convert=function(A){return!A||A instanceof $a?A:new $a(A)};var nh=63710088e-1,Ca=function(A,I){if(isNaN(A)||isNaN(I))throw new Error("Invalid LngLat object: ("+A+", "+I+")");if(this.lng=+A,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ca.prototype.wrap=function(){return new Ca(p(this.lng,-180,180),this.lat)},Ca.prototype.toArray=function(){return[this.lng,this.lat]},Ca.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ca.prototype.distanceTo=function(A){var I=Math.PI/180,Y=this.lat*I,le=A.lat*I,ke=Math.sin(Y)*Math.sin(le)+Math.cos(Y)*Math.cos(le)*Math.cos((A.lng-this.lng)*I);return nh*Math.acos(Math.min(ke,1))},Ca.prototype.toBounds=function(A){A===void 0&&(A=0);var I=360*A/40075017,Y=I/Math.cos(Math.PI/180*this.lat);return new $a(new Ca(this.lng-Y,this.lat-I),new Ca(this.lng+Y,this.lat+I))},Ca.convert=function(A){if(A instanceof Ca)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Ca(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Ca(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var rh=2*Math.PI*nh;function ah(A){return rh*Math.cos(A*Math.PI/180)}function ih(A){return(180+A)/360}function oh(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function sh(A,I){return A/ah(I)}function Uc(A){var I=180-360*A;return 360/Math.PI*Math.atan(Math.exp(I*Math.PI/180))-90}var Sl=function(A,I,Y){Y===void 0&&(Y=0),this.x=+A,this.y=+I,this.z=+Y};Sl.fromLngLat=function(A,I){I===void 0&&(I=0);var Y=Ca.convert(A);return new Sl(ih(Y.lng),oh(Y.lat),sh(I,Y.lat))},Sl.prototype.toLngLat=function(){return new Ca(360*this.x-180,Uc(this.y))},Sl.prototype.toAltitude=function(){return A=this.z,I=this.y,A*ah(Uc(I));var A,I},Sl.prototype.meterInMercatorCoordinateUnits=function(){return 1/rh*(A=Uc(this.y),1/Math.cos(A*Math.PI/180));var A};var El=function(A,I,Y){this.z=A,this.x=I,this.y=Y,this.key=vu(0,A,A,I,Y)};El.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},El.prototype.url=function(A,I){var Y,le,ke,Ce,je,Ke=(Y=this.x,le=this.y,ke=this.z,Ce=th(256*Y,256*(le=Math.pow(2,ke)-le-1),ke),je=th(256*(Y+1),256*(le+1),ke),Ce[0]+","+Ce[1]+","+je[0]+","+je[1]),st=function(mt,_t,Dt){for(var jt,Rt="",rn=mt;rn>0;rn--)Rt+=(_t&(jt=1<<rn-1)?1:0)+(Dt&jt?2:0);return Rt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Ke)},El.prototype.getTilePoint=function(A){var I=Math.pow(2,this.z);return new t((A.x*I-this.x)*Xr,(A.y*I-this.y)*Xr)},El.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var lh=function(A,I){this.wrap=A,this.canonical=I,this.key=vu(A,I.z,I.z,I.x,I.y)},Qa=function(A,I,Y,le,ke){this.overscaledZ=A,this.wrap=I,this.canonical=new El(Y,+le,+ke),this.key=vu(I,A,Y,le,ke)};function vu(A,I,Y,le,ke){(A*=2)<0&&(A=-1*A-1);var Ce=1<<Y;return(Ce*Ce*A+Ce*ke+le).toString(36)+Y.toString(36)+I.toString(36)}Qa.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},Qa.prototype.scaledTo=function(A){var I=this.canonical.z-A;return A>this.canonical.z?new Qa(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qa(A,this.wrap,A,this.canonical.x>>I,this.canonical.y>>I)},Qa.prototype.calculateScaledKey=function(A,I){var Y=this.canonical.z-A;return A>this.canonical.z?vu(this.wrap*+I,A,this.canonical.z,this.canonical.x,this.canonical.y):vu(this.wrap*+I,A,A,this.canonical.x>>Y,this.canonical.y>>Y)},Qa.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var I=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>I&&A.canonical.y===this.canonical.y>>I},Qa.prototype.children=function(A){if(this.overscaledZ>=A)return[new Qa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var I=this.canonical.z+1,Y=2*this.canonical.x,le=2*this.canonical.y;return[new Qa(I,this.wrap,I,Y,le),new Qa(I,this.wrap,I,Y+1,le),new Qa(I,this.wrap,I,Y,le+1),new Qa(I,this.wrap,I,Y+1,le+1)]},Qa.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},Qa.prototype.wrapped=function(){return new Qa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Qa.prototype.unwrapTo=function(A){return new Qa(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},Qa.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Qa.prototype.toUnwrapped=function(){return new lh(this.wrap,this.canonical)},Qa.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Qa.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new Sl(A.x-this.wrap,A.y))},wr("CanonicalTileID",El),wr("OverscaledTileID",Qa,{omit:["posMatrix"]});var tl=function(A,I,Y){if(this.uid=A,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(Y&&Y!=="mapbox"&&Y!=="terrarium")return E('"'+Y+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=I.height;var le=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=Y||"mapbox";for(var ke=0;ke<le;ke++)this.data[this._idx(-1,ke)]=this.data[this._idx(0,ke)],this.data[this._idx(le,ke)]=this.data[this._idx(le-1,ke)],this.data[this._idx(ke,-1)]=this.data[this._idx(ke,0)],this.data[this._idx(ke,le)]=this.data[this._idx(ke,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};tl.prototype.get=function(A,I){var Y=new Uint8Array(this.data.buffer),le=4*this._idx(A,I);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Y[le],Y[le+1],Y[le+2])},tl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},tl.prototype._idx=function(A,I){if(A<-1||A>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(A+1)},tl.prototype._unpackMapbox=function(A,I,Y){return(256*A*256+256*I+Y)/10-1e4},tl.prototype._unpackTerrarium=function(A,I,Y){return 256*A+I+Y/256-32768},tl.prototype.getPixels=function(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},tl.prototype.backfillBorder=function(A,I,Y){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var le=I*this.dim,ke=I*this.dim+this.dim,Ce=Y*this.dim,je=Y*this.dim+this.dim;switch(I){case-1:le=ke-1;break;case 1:ke=le+1}switch(Y){case-1:Ce=je-1;break;case 1:je=Ce+1}for(var Ke=-I*this.dim,st=-Y*this.dim,mt=Ce;mt<je;mt++)for(var _t=le;_t<ke;_t++)this.data[this._idx(_t,mt)]=A.data[this._idx(_t+Ke,mt+st)]},wr("DEMData",tl);var Qu=function(A){this._stringToNumber={},this._numberToString=[];for(var I=0;I<A.length;I++){var Y=A[I];this._stringToNumber[Y]=I,this._numberToString[I]=Y}};Qu.prototype.encode=function(A){return this._stringToNumber[A]},Qu.prototype.decode=function(A){return this._numberToString[A]};var ec=function(A,I,Y,le,ke){this.type="Feature",this._vectorTileFeature=A,A._z=I,A._x=Y,A._y=le,this.properties=A.properties,this.id=ke},Vc={geometry:{configurable:!0}};Vc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Vc.geometry.set=function(A){this._geometry=A},ec.prototype.toJSON=function(){var A={geometry:this.geometry};for(var I in this)I!=="_geometry"&&I!=="_vectorTileFeature"&&(A[I]=this[I]);return A},Object.defineProperties(ec.prototype,Vc);var Zl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Zl.prototype.updateState=function(A,I,Y){var le=String(I);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][le]=this.stateChanges[A][le]||{},c(this.stateChanges[A][le],Y),this.deletedStates[A]===null)for(var ke in this.deletedStates[A]={},this.state[A])ke!==le&&(this.deletedStates[A][ke]=null);else if(this.deletedStates[A]&&this.deletedStates[A][le]===null)for(var Ce in this.deletedStates[A][le]={},this.state[A][le])Y[Ce]||(this.deletedStates[A][le][Ce]=null);else for(var je in Y)this.deletedStates[A]&&this.deletedStates[A][le]&&this.deletedStates[A][le][je]===null&&delete this.deletedStates[A][le][je]},Zl.prototype.removeFeatureState=function(A,I,Y){if(this.deletedStates[A]!==null){var le=String(I);if(this.deletedStates[A]=this.deletedStates[A]||{},Y&&I!==void 0)this.deletedStates[A][le]!==null&&(this.deletedStates[A][le]=this.deletedStates[A][le]||{},this.deletedStates[A][le][Y]=null);else if(I!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][le])for(Y in this.deletedStates[A][le]={},this.stateChanges[A][le])this.deletedStates[A][le][Y]=null;else this.deletedStates[A][le]=null;else this.deletedStates[A]=null}},Zl.prototype.getState=function(A,I){var Y=String(I),le=this.state[A]||{},ke=this.stateChanges[A]||{},Ce=c({},le[Y],ke[Y]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var je=this.deletedStates[A][I];if(je===null)return{};for(var Ke in je)delete Ce[Ke]}return Ce},Zl.prototype.initializeTileState=function(A,I){A.setFeatureState(this.state,I)},Zl.prototype.coalesceChanges=function(A,I){var Y={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var ke={};for(var Ce in this.stateChanges[le])this.state[le][Ce]||(this.state[le][Ce]={}),c(this.state[le][Ce],this.stateChanges[le][Ce]),ke[Ce]=this.state[le][Ce];Y[le]=ke}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Ke={};if(this.deletedStates[je]===null)for(var st in this.state[je])Ke[st]={},this.state[je][st]={};else for(var mt in this.deletedStates[je]){if(this.deletedStates[je][mt]===null)this.state[je][mt]={};else for(var _t=0,Dt=Object.keys(this.deletedStates[je][mt]);_t<Dt.length;_t+=1){var jt=Dt[_t];delete this.state[je][mt][jt]}Ke[mt]=this.state[je][mt]}Y[je]=Y[je]||{},c(Y[je],Ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(Y).length!==0)for(var Rt in A)A[Rt].setFeatureState(Y,I)};var nl=function(A,I){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new es(Xr,16,0),this.grid3D=new es(Xr,16,0),this.featureIndexArray=new kn,this.promoteId=I};function uh(A,I,Y,le,ke){return _(A,function(Ce,je){var Ke=I instanceof rs?I.get(je):null;return Ke&&Ke.evaluate?Ke.evaluate(Y,le,ke):Ke})}function ch(A){for(var I=1/0,Y=1/0,le=-1/0,ke=-1/0,Ce=0,je=A;Ce<je.length;Ce+=1){var Ke=je[Ce];I=Math.min(I,Ke.x),Y=Math.min(Y,Ke.y),le=Math.max(le,Ke.x),ke=Math.max(ke,Ke.y)}return{minX:I,minY:Y,maxX:le,maxY:ke}}function dd(A,I){return I-A}nl.prototype.insert=function(A,I,Y,le,ke,Ce){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Y,le,ke);for(var Ke=Ce?this.grid3D:this.grid,st=0;st<I.length;st++){for(var mt=I[st],_t=[1/0,1/0,-1/0,-1/0],Dt=0;Dt<mt.length;Dt++){var jt=mt[Dt];_t[0]=Math.min(_t[0],jt.x),_t[1]=Math.min(_t[1],jt.y),_t[2]=Math.max(_t[2],jt.x),_t[3]=Math.max(_t[3],jt.y)}_t[0]<Xr&&_t[1]<Xr&&_t[2]>=0&&_t[3]>=0&&Ke.insert(je,_t[0],_t[1],_t[2],_t[3])}},nl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Fl.VectorTile(new Vu(this.rawTileData)).layers,this.sourceLayerCoder=new Qu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},nl.prototype.query=function(A,I,Y,le){var ke=this;this.loadVTLayers();for(var Ce=A.params||{},je=Xr/A.tileSize/A.scale,Ke=ws(Ce.filter),st=A.queryGeometry,mt=A.queryPadding*je,_t=ch(st),Dt=this.grid.query(_t.minX-mt,_t.minY-mt,_t.maxX+mt,_t.maxY+mt),jt=ch(A.cameraQueryGeometry),Rt=0,rn=this.grid3D.query(jt.minX-mt,jt.minY-mt,jt.maxX+mt,jt.maxY+mt,function(Un,Gn,nr,pr){return function(cr,yr,_r,zr,Sr){for(var Dr=0,Lr=cr;Dr<Lr.length;Dr+=1){var Mr=Lr[Dr];if(yr<=Mr.x&&_r<=Mr.y&&zr>=Mr.x&&Sr>=Mr.y)return!0}var Yr=[new t(yr,_r),new t(yr,Sr),new t(zr,Sr),new t(zr,_r)];if(cr.length>2){for(var Br=0,ma=Yr;Br<ma.length;Br+=1)if(Ws(cr,ma[Br]))return!0}for(var Ir=0;Ir<cr.length-1;Ir++)if(jh(cr[Ir],cr[Ir+1],Yr))return!0;return!1}(A.cameraQueryGeometry,Un-mt,Gn-mt,nr+mt,pr+mt)});Rt<rn.length;Rt+=1){var on=rn[Rt];Dt.push(on)}Dt.sort(dd);for(var bn,yn={},On=function(Un){var Gn=Dt[Un];if(Gn!==bn){bn=Gn;var nr=ke.featureIndexArray.get(Gn),pr=null;ke.loadMatchingFeature(yn,nr.bucketIndex,nr.sourceLayerIndex,nr.featureIndex,Ke,Ce.layers,Ce.availableImages,I,Y,le,function(cr,yr,_r){return pr||(pr=bo(cr)),yr.queryIntersectsFeature(st,cr,_r,pr,ke.z,A.transform,je,A.pixelPosMatrix)})}},Dn=0;Dn<Dt.length;Dn++)On(Dn);return yn},nl.prototype.loadMatchingFeature=function(A,I,Y,le,ke,Ce,je,Ke,st,mt,_t){var Dt=this.bucketLayerIDs[I];if(!Ce||function(cr,yr){for(var _r=0;_r<cr.length;_r++)if(yr.indexOf(cr[_r])>=0)return!0;return!1}(Ce,Dt)){var jt=this.sourceLayerCoder.decode(Y),Rt=this.vtLayers[jt].feature(le);if(ke.needGeometry){var rn=_a(Rt,!0);if(!ke.filter(new Vr(this.tileID.overscaledZ),rn,this.tileID.canonical))return}else if(!ke.filter(new Vr(this.tileID.overscaledZ),Rt))return;for(var on=this.getId(Rt,jt),bn=0;bn<Dt.length;bn++){var yn=Dt[bn];if(!(Ce&&Ce.indexOf(yn)<0)){var On=Ke[yn];if(On){var Dn={};on!==void 0&&mt&&(Dn=mt.getState(On.sourceLayer||"_geojsonTileLayer",on));var Un=c({},st[yn]);Un.paint=uh(Un.paint,On.paint,Rt,Dn,je),Un.layout=uh(Un.layout,On.layout,Rt,Dn,je);var Gn=!_t||_t(Rt,On,Dn);if(Gn){var nr=new ec(Rt,this.z,this.x,this.y,on);nr.layer=Un;var pr=A[yn];pr===void 0&&(pr=A[yn]=[]),pr.push({featureIndex:le,feature:nr,intersectionZ:Gn})}}}}}},nl.prototype.lookupSymbolFeatures=function(A,I,Y,le,ke,Ce,je,Ke){var st={};this.loadVTLayers();for(var mt=ws(ke),_t=0,Dt=A;_t<Dt.length;_t+=1){var jt=Dt[_t];this.loadMatchingFeature(st,Y,le,jt,mt,Ce,je,Ke,I)}return st},nl.prototype.hasLayer=function(A){for(var I=0,Y=this.bucketLayerIDs;I<Y.length;I+=1)for(var le=0,ke=Y[I];le<ke.length;le+=1)if(A===ke[le])return!0;return!1},nl.prototype.getId=function(A,I){var Y=A.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[I];typeof(Y=A.properties[le])=="boolean"&&(Y=Number(Y))}return Y},wr("FeatureIndex",nl,{omit:["rawTileData","sourceLayerCoder"]});var fi=function(A,I){this.tileID=A,this.uid=d(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};fi.prototype.registerFadeDuration=function(A){var I=A+this.timeAdded;I<K.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)},fi.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},fi.prototype.loadVectorData=function(A,I,Y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var le in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(mt,_t){var Dt={};if(!_t)return Dt;for(var jt=function(){var on=rn[Rt],bn=on.layerIds.map(function(Un){return _t.getLayer(Un)}).filter(Boolean);if(bn.length!==0){on.layers=bn,on.stateDependentLayerIds&&(on.stateDependentLayers=on.stateDependentLayerIds.map(function(Un){return bn.filter(function(Gn){return Gn.id===Un})[0]}));for(var yn=0,On=bn;yn<On.length;yn+=1){var Dn=On[yn];Dt[Dn.id]=on}}},Rt=0,rn=mt;Rt<rn.length;Rt+=1)jt();return Dt}(A.buckets,I.style),this.hasSymbolBuckets=!1,this.buckets){var ke=this.buckets[le];if(ke instanceof ca){if(this.hasSymbolBuckets=!0,!Y)break;ke.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ce in this.buckets){var je=this.buckets[Ce];if(je instanceof ca&&je.hasRTLText){this.hasRTLText=!0,ci.isLoading()||ci.isLoaded()||hs()!=="deferred"||ps();break}}for(var Ke in this.queryPadding=0,this.buckets){var st=this.buckets[Ke];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(Ke).queryRadius(st))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new Tt},fi.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},fi.prototype.getBucket=function(A){return this.buckets[A.id]},fi.prototype.upload=function(A){for(var I in this.buckets){var Y=this.buckets[I];Y.uploadPending()&&Y.upload(A)}var le=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ml(A,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ml(A,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},fi.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},fi.prototype.queryRenderedFeatures=function(A,I,Y,le,ke,Ce,je,Ke,st,mt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:ke,scale:Ce,tileSize:this.tileSize,pixelPosMatrix:mt,transform:Ke,params:je,queryPadding:this.queryPadding*st},A,I,Y):{}},fi.prototype.querySourceFeatures=function(A,I){var Y=this.latestFeatureIndex;if(Y&&Y.rawTileData){var le=Y.loadVTLayers(),ke=I?I.sourceLayer:"",Ce=le._geojsonTileLayer||le[ke];if(Ce)for(var je=ws(I&&I.filter),Ke=this.tileID.canonical,st=Ke.z,mt=Ke.x,_t=Ke.y,Dt={z:st,x:mt,y:_t},jt=0;jt<Ce.length;jt++){var Rt=Ce.feature(jt);if(je.needGeometry){var rn=_a(Rt,!0);if(!je.filter(new Vr(this.tileID.overscaledZ),rn,this.tileID.canonical))continue}else if(!je.filter(new Vr(this.tileID.overscaledZ),Rt))continue;var on=Y.getId(Rt,ke),bn=new ec(Rt,st,mt,_t,on);bn.tile=Dt,A.push(bn)}}},fi.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},fi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},fi.prototype.setExpiryData=function(A){var I=this.expirationTime;if(A.cacheControl){var Y=R(A.cacheControl);Y["max-age"]&&(this.expirationTime=Date.now()+1e3*Y["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var le=Date.now(),ke=!1;if(this.expirationTime>le)ke=!1;else if(I)if(this.expirationTime<I)ke=!0;else{var Ce=this.expirationTime-I;Ce?this.expirationTime=le+Math.max(Ce,3e4):ke=!0}else ke=!0;ke?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},fi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},fi.prototype.setFeatureState=function(A,I){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var Y=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(I.style.hasLayer(le)){var ke=this.buckets[le],Ce=ke.layers[0].sourceLayer||"_geojsonTileLayer",je=Y[Ce],Ke=A[Ce];if(je&&Ke&&Object.keys(Ke).length!==0){ke.update(Ke,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=I&&I.style&&I.style.getLayer(le);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(ke)))}}}},fi.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},fi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K.now()},fi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},fi.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=K.now()+A},fi.prototype.setDependencies=function(A,I){for(var Y={},le=0,ke=I;le<ke.length;le+=1)Y[ke[le]]=!0;this.dependencies[A]=Y},fi.prototype.hasDependency=function(A,I){for(var Y=0,le=A;Y<le.length;Y+=1){var ke=le[Y],Ce=this.dependencies[ke];if(Ce){for(var je=0,Ke=I;je<Ke.length;je+=1)if(Ce[Ke[je]])return!0}}return!1};var ml=n.performance,fh=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},ml.mark(this._marks.start)};fh.prototype.finish=function(){ml.mark(this._marks.end);var A=ml.getEntriesByName(this._marks.measure);return A.length===0&&(ml.measure(this._marks.measure,this._marks.start,this._marks.end),A=ml.getEntriesByName(this._marks.measure),ml.clearMarks(this._marks.start),ml.clearMarks(this._marks.end),ml.clearMeasures(this._marks.measure)),A},o.Actor=Yl,o.AlphaImage=Al,o.CanonicalTileID=El,o.CollisionBoxArray=Tt,o.Color=Mn,o.DEMData=tl,o.DataConstantProperty=kr,o.DictionaryCoder=Qu,o.EXTENT=Xr,o.ErrorEvent=Fe,o.EvaluationParameters=Vr,o.Event=Re,o.Evented=nt,o.FeatureIndex=nl,o.FillBucket=Ps,o.FillExtrusionBucket=Os,o.ImageAtlas=fu,o.ImagePosition=Hu,o.LineBucket=Gi,o.LngLat=Ca,o.LngLatBounds=$a,o.MercatorCoordinate=Sl,o.ONE_EM=vi,o.OverscaledTileID=Qa,o.Point=t,o.Point$1=t,o.Properties=La,o.Protobuf=Vu,o.RGBAImage=so,o.RequestManager=he,o.RequestPerformance=fh,o.ResourceType=ht,o.SegmentVector=Bn,o.SourceFeatureState=Zl,o.StructArrayLayout1ui2=ft,o.StructArrayLayout2f1f2i16=ne,o.StructArrayLayout2i4=No,o.StructArrayLayout3ui6=ye,o.StructArrayLayout4i8=Qs,o.SymbolBucket=ca,o.Texture=Ml,o.Tile=fi,o.Transitionable=qi,o.Uniform1f=jr,o.Uniform1i=Fr,o.Uniform2f=qr,o.Uniform3f=ua,o.Uniform4f=Aa,o.UniformColor=ri,o.UniformMatrix4f=Ka,o.UnwrappedTileID=lh,o.ValidationError=ct,o.WritingMode=Uo,o.ZoomHistory=fs,o.add=function(A,I,Y){return A[0]=I[0]+Y[0],A[1]=I[1]+Y[1],A[2]=I[2]+Y[2],A},o.addDynamicAttributes=Bc,o.asyncAll=function(A,I,Y){if(!A.length)return Y(null,[]);var le=A.length,ke=new Array(A.length),Ce=null;A.forEach(function(je,Ke){I(je,function(st,mt){st&&(Ce=st),ke[Ke]=mt,--le==0&&Y(Ce,ke)})})},o.bezier=i,o.bindAll=y,o.browser=K,o.cacheEntryPossiblyAdded=function(A){++dt>ze&&(A.getActor().send("enforceCacheSizeLimit",Me),dt=0)},o.clamp=u,o.clearTileCache=function(A){var I=n.caches.delete(me);A&&I.catch(A).then(function(){return A()})},o.clipLine=Gf,o.clone=function(A){var I=new jo(16);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I[3]=A[3],I[4]=A[4],I[5]=A[5],I[6]=A[6],I[7]=A[7],I[8]=A[8],I[9]=A[9],I[10]=A[10],I[11]=A[11],I[12]=A[12],I[13]=A[13],I[14]=A[14],I[15]=A[15],I},o.clone$1=S,o.clone$2=function(A){var I=new jo(3);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I},o.collisionCircleLayout=Ip,o.config=Q,o.create=function(){var A=new jo(16);return jo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},o.create$1=function(){var A=new jo(9);return jo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},o.create$2=function(){var A=new jo(4);return jo!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},o.createCommonjsModule=T,o.createExpression=go,o.createLayout=da,o.createStyleLayer=function(A){return A.type==="custom"?new hd(A):new pd[A.type](A)},o.cross=function(A,I,Y){var le=I[0],ke=I[1],Ce=I[2],je=Y[0],Ke=Y[1],st=Y[2];return A[0]=ke*st-Ce*Ke,A[1]=Ce*je-le*st,A[2]=le*Ke-ke*je,A},o.deepEqual=function A(I,Y){if(Array.isArray(I)){if(!Array.isArray(Y)||I.length!==Y.length)return!1;for(var le=0;le<I.length;le++)if(!A(I[le],Y[le]))return!1;return!0}if(typeof I=="object"&&I!==null&&Y!==null){if(typeof Y!="object"||Object.keys(I).length!==Object.keys(Y).length)return!1;for(var ke in I)if(!A(I[ke],Y[ke]))return!1;return!0}return I===Y},o.dot=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]},o.dot$1=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]+A[3]*I[3]},o.ease=l,o.emitValidationErrors=si,o.endsWith=m,o.enforceCacheSizeLimit=function(A){Ne(),fe&&fe.then(function(I){I.keys().then(function(Y){for(var le=0;le<Y.length-A;le++)I.delete(Y[le])})})},o.evaluateSizeForFeature=Bf,o.evaluateSizeForZoom=Nf,o.evaluateVariableOffset=Zf,o.evented=ui,o.extend=c,o.featureFilter=ws,o.filterObject=f,o.fromRotation=function(A,I){var Y=Math.sin(I),le=Math.cos(I);return A[0]=le,A[1]=Y,A[2]=0,A[3]=-Y,A[4]=le,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},o.getAnchorAlignment=Dc,o.getAnchorJustification=Fc,o.getArrayBuffer=Ot,o.getImage=Ge,o.getJSON=function(A,I){return Pt(c(A,{type:"json"}),I)},o.getRTLTextPluginStatus=hs,o.getReferrer=$e,o.getVideo=function(A,I){var Y,le,ke=n.document.createElement("video");ke.muted=!0,ke.onloadstart=function(){I(null,ke)};for(var Ce=0;Ce<A.length;Ce++){var je=n.document.createElement("source");Y=A[Ce],le=void 0,(le=n.document.createElement("a")).href=Y,le.protocol===n.document.location.protocol&&le.host===n.document.location.host||(ke.crossOrigin="Anonymous"),je.src=A[Ce],ke.appendChild(je)}return{cancel:function(){}}},o.identity=bc,o.invert=function(A,I){var Y=I[0],le=I[1],ke=I[2],Ce=I[3],je=I[4],Ke=I[5],st=I[6],mt=I[7],_t=I[8],Dt=I[9],jt=I[10],Rt=I[11],rn=I[12],on=I[13],bn=I[14],yn=I[15],On=Y*Ke-le*je,Dn=Y*st-ke*je,Un=Y*mt-Ce*je,Gn=le*st-ke*Ke,nr=le*mt-Ce*Ke,pr=ke*mt-Ce*st,cr=_t*on-Dt*rn,yr=_t*bn-jt*rn,_r=_t*yn-Rt*rn,zr=Dt*bn-jt*on,Sr=Dt*yn-Rt*on,Dr=jt*yn-Rt*bn,Lr=On*Dr-Dn*Sr+Un*zr+Gn*_r-nr*yr+pr*cr;return Lr?(Lr=1/Lr,A[0]=(Ke*Dr-st*Sr+mt*zr)*Lr,A[1]=(ke*Sr-le*Dr-Ce*zr)*Lr,A[2]=(on*pr-bn*nr+yn*Gn)*Lr,A[3]=(jt*nr-Dt*pr-Rt*Gn)*Lr,A[4]=(st*_r-je*Dr-mt*yr)*Lr,A[5]=(Y*Dr-ke*_r+Ce*yr)*Lr,A[6]=(bn*Un-rn*pr-yn*Dn)*Lr,A[7]=(_t*pr-jt*Un+Rt*Dn)*Lr,A[8]=(je*Sr-Ke*_r+mt*cr)*Lr,A[9]=(le*_r-Y*Sr-Ce*cr)*Lr,A[10]=(rn*nr-on*Un+yn*On)*Lr,A[11]=(Dt*Un-_t*nr-Rt*On)*Lr,A[12]=(Ke*yr-je*zr-st*cr)*Lr,A[13]=(Y*zr-le*yr+ke*cr)*Lr,A[14]=(on*Dn-rn*Gn-bn*On)*Lr,A[15]=(_t*Gn-Dt*Dn+jt*On)*Lr,A):null},o.isChar=dr,o.isMapboxURL=pe,o.keysDifference=function(A,I){var Y=[];for(var le in A)le in I||Y.push(le);return Y},o.makeRequest=Pt,o.mapObject=_,o.mercatorXfromLng=ih,o.mercatorYfromLat=oh,o.mercatorZfromAltitude=sh,o.mul=qh,o.multiply=sf,o.mvt=Fl,o.nextPowerOfTwo=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},o.normalize=function(A,I){var Y=I[0],le=I[1],ke=I[2],Ce=Y*Y+le*le+ke*ke;return Ce>0&&(Ce=1/Math.sqrt(Ce)),A[0]=I[0]*Ce,A[1]=I[1]*Ce,A[2]=I[2]*Ce,A},o.number=Or,o.offscreenCanvasSupported=vt,o.ortho=function(A,I,Y,le,ke,Ce,je){var Ke=1/(I-Y),st=1/(le-ke),mt=1/(Ce-je);return A[0]=-2*Ke,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*st,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*mt,A[11]=0,A[12]=(I+Y)*Ke,A[13]=(ke+le)*st,A[14]=(je+Ce)*mt,A[15]=1,A},o.parseGlyphPBF=function(A){return new Vu(A).readFields(Hp,[])},o.pbf=Vu,o.performSymbolLayout=function(A,I,Y,le,ke,Ce,je){A.createArrays();var Ke=512*A.overscaling;A.tilePixelRatio=Xr/Ke,A.compareText={},A.iconsNeedLinear=!1;var st=A.layers[0].layout,mt=A.layers[0]._unevaluatedLayout._values,_t={};if(A.textSizeData.kind==="composite"){var Dt=A.textSizeData,jt=Dt.minZoom,Rt=Dt.maxZoom;_t.compositeTextSizes=[mt["text-size"].possiblyEvaluate(new Vr(jt),je),mt["text-size"].possiblyEvaluate(new Vr(Rt),je)]}if(A.iconSizeData.kind==="composite"){var rn=A.iconSizeData,on=rn.minZoom,bn=rn.maxZoom;_t.compositeIconSizes=[mt["icon-size"].possiblyEvaluate(new Vr(on),je),mt["icon-size"].possiblyEvaluate(new Vr(bn),je)]}_t.layoutTextSize=mt["text-size"].possiblyEvaluate(new Vr(A.zoom+1),je),_t.layoutIconSize=mt["icon-size"].possiblyEvaluate(new Vr(A.zoom+1),je),_t.textMaxSize=mt["text-size"].possiblyEvaluate(new Vr(18));for(var yn=st.get("text-line-height")*vi,On=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",Dn=st.get("text-keep-upright"),Un=st.get("text-size"),Gn=function(){var cr=pr[nr],yr=st.get("text-font").evaluate(cr,{},je).join(","),_r=Un.evaluate(cr,{},je),zr=_t.layoutTextSize.evaluate(cr,{},je),Sr=_t.layoutIconSize.evaluate(cr,{},je),Dr={horizontal:{},vertical:void 0},Lr=cr.text,Mr=[0,0];if(Lr){var Yr=Lr.toString(),Br=st.get("text-letter-spacing").evaluate(cr,{},je)*vi,ma=function(Nr){for(var Kr=0,Na=Nr;Kr<Na.length;Kr+=1)if(va=Na[Kr].charCodeAt(0),dr.Arabic(va)||dr["Arabic Supplement"](va)||dr["Arabic Extended-A"](va)||dr["Arabic Presentation Forms-A"](va)||dr["Arabic Presentation Forms-B"](va))return!1;var va;return!0}(Yr)?Br:0,Ir=st.get("text-anchor").evaluate(cr,{},je),fa=st.get("text-variable-anchor");if(!fa){var Ta=st.get("text-radial-offset").evaluate(cr,{},je);Mr=Ta?Zf(Ir,[Ta*vi,Rc]):st.get("text-offset").evaluate(cr,{},je).map(function(Nr){return Nr*vi})}var Sa=On?"center":st.get("text-justify").evaluate(cr,{},je),Ea=st.get("symbol-placement"),ya=Ea==="point"?st.get("text-max-width").evaluate(cr,{},je)*vi:0,ei=function(){A.allowVerticalPlacement&&Es(Yr)&&(Dr.vertical=Gu(Lr,I,Y,ke,yr,ya,yn,Ir,"left",ma,Mr,Uo.vertical,!0,Ea,zr,_r))};if(!On&&fa){for(var Oa=Sa==="auto"?fa.map(function(Nr){return Fc(Nr)}):[Sa],hi=!1,Ai=0;Ai<Oa.length;Ai++){var mi=Oa[Ai];if(!Dr.horizontal[mi])if(hi)Dr.horizontal[mi]=Dr.horizontal[0];else{var Wi=Gu(Lr,I,Y,ke,yr,ya,yn,"center",mi,ma,Mr,Uo.horizontal,!1,Ea,zr,_r);Wi&&(Dr.horizontal[mi]=Wi,hi=Wi.positionedLines.length===1)}}ei()}else{Sa==="auto"&&(Sa=Fc(Ir));var yi=Gu(Lr,I,Y,ke,yr,ya,yn,Ir,Sa,ma,Mr,Uo.horizontal,!1,Ea,zr,_r);yi&&(Dr.horizontal[Sa]=yi),ei(),Es(Yr)&&On&&Dn&&(Dr.vertical=Gu(Lr,I,Y,ke,yr,ya,yn,Ir,Sa,ma,Mr,Uo.vertical,!1,Ea,zr,_r))}}var ai=void 0,xi=!1;if(cr.icon&&cr.icon.name){var pi=le[cr.icon.name];pi&&(ai=function(Nr,Kr,Na){var va=Dc(Na),Da=va.horizontalAlign,Pa=va.verticalAlign,ea=Kr[0],ja=Kr[1],Yi=ea-Nr.displaySize[0]*Da,To=Yi+Nr.displaySize[0],zi=ja-Nr.displaySize[1]*Pa;return{image:Nr,top:zi,bottom:zi+Nr.displaySize[1],left:Yi,right:To}}(ke[cr.icon.name],st.get("icon-offset").evaluate(cr,{},je),st.get("icon-anchor").evaluate(cr,{},je)),xi=pi.sdf,A.sdfIcons===void 0?A.sdfIcons=pi.sdf:A.sdfIcons!==pi.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pi.pixelRatio!==A.pixelRatio||st.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var ii=Kf(Dr.horizontal)||Dr.vertical;A.iconsInText=!!ii&&ii.iconsInText,(ii||ai)&&function(Nr,Kr,Na,va,Da,Pa,ea,ja,Yi,To,zi){var Ds=Pa.textMaxSize.evaluate(Kr,{});Ds===void 0&&(Ds=ea);var rl,di=Nr.layers[0].layout,zs=di.get("icon-offset").evaluate(Kr,{},zi),ys=Kf(Na.horizontal),xs=24,Ll=ea/xs,tc=Nr.tilePixelRatio*Ll,Cl=Nr.tilePixelRatio*Ds/xs,nc=Nr.tilePixelRatio*ja,mu=Nr.tilePixelRatio*di.get("symbol-spacing"),qc=di.get("text-padding")*Nr.tilePixelRatio,rc=di.get("icon-padding")*Nr.tilePixelRatio,Xl=di.get("text-max-angle")/180*Math.PI,ac=di.get("text-rotation-alignment")==="map"&&di.get("symbol-placement")!=="point",ic=di.get("icon-rotation-alignment")==="map"&&di.get("symbol-placement")!=="point",yu=di.get("symbol-placement"),Hc=mu/2,xu=di.get("icon-text-fit");va&&xu!=="none"&&(Nr.allowVerticalPlacement&&Na.vertical&&(rl=Ff(va,Na.vertical,xu,di.get("icon-text-fit-padding"),zs,Ll)),ys&&(va=Ff(va,ys,xu,di.get("icon-text-fit-padding"),zs,Ll)));var Pl=function(gd,Au){Au.x<0||Au.x>=Xr||Au.y<0||Au.y>=Xr||function(Wa,Rs,vd,yl,Kc,vh,cc,Ys,fc,Mu,hc,pc,Jc,mh,Su,yh,xh,bh,_h,wh,Vo,dc,Th,Zs,md){var kh,Dl,$l,Ql,eu,tu=Wa.addToLineVertexArray(Rs,vd),Ah=0,Mh=0,Sh=0,Eh=0,$c=-1,Qc=-1,al={},Lh=vr(""),ef=0,tf=0;if(Ys._unevaluatedLayout.getValue("text-radial-offset")===void 0?(ef=(kh=Ys.layout.get("text-offset").evaluate(Vo,{},Zs).map(function(Lu){return Lu*vi}))[0],tf=kh[1]):(ef=Ys.layout.get("text-radial-offset").evaluate(Vo,{},Zs)*vi,tf=Rc),Wa.allowVerticalPlacement&&yl.vertical){var Ch=Ys.layout.get("text-rotate").evaluate(Vo,{},Zs)+90,yd=yl.vertical;Ql=new Ku(fc,Rs,Mu,hc,pc,yd,Jc,mh,Su,Ch),cc&&(eu=new Ku(fc,Rs,Mu,hc,pc,cc,xh,bh,Su,Ch))}if(Kc){var nf=Ys.layout.get("icon-rotate").evaluate(Vo,{}),Ph=Ys.layout.get("icon-text-fit")!=="none",Oh=Wf(Kc,nf,Th,Ph),rf=cc?Wf(cc,nf,Th,Ph):void 0;$l=new Ku(fc,Rs,Mu,hc,pc,Kc,xh,bh,!1,nf),Ah=4*Oh.length;var Ih=Wa.iconSizeData,Eu=null;Ih.kind==="source"?(Eu=[Is*Ys.layout.get("icon-size").evaluate(Vo,{})])[0]>vl&&E(Wa.layerIds[0]+': Value for "icon-size" is >= '+du+'. Reduce your "icon-size".'):Ih.kind==="composite"&&((Eu=[Is*dc.compositeIconSizes[0].evaluate(Vo,{},Zs),Is*dc.compositeIconSizes[1].evaluate(Vo,{},Zs)])[0]>vl||Eu[1]>vl)&&E(Wa.layerIds[0]+': Value for "icon-size" is >= '+du+'. Reduce your "icon-size".'),Wa.addSymbols(Wa.icon,Oh,Eu,wh,_h,Vo,!1,Rs,tu.lineStartIndex,tu.lineLength,-1,Zs),$c=Wa.icon.placedSymbolArray.length-1,rf&&(Mh=4*rf.length,Wa.addSymbols(Wa.icon,rf,Eu,wh,_h,Vo,Uo.vertical,Rs,tu.lineStartIndex,tu.lineLength,-1,Zs),Qc=Wa.icon.placedSymbolArray.length-1)}for(var Dh in yl.horizontal){var gc=yl.horizontal[Dh];if(!Dl){Lh=vr(gc.text);var xd=Ys.layout.get("text-rotate").evaluate(Vo,{},Zs);Dl=new Ku(fc,Rs,Mu,hc,pc,gc,Jc,mh,Su,xd)}var zh=gc.positionedLines.length===1;if(Sh+=Xf(Wa,Rs,gc,vh,Ys,Su,Vo,yh,tu,yl.vertical?Uo.horizontal:Uo.horizontalOnly,zh?Object.keys(yl.horizontal):[Dh],al,$c,dc,Zs),zh)break}yl.vertical&&(Eh+=Xf(Wa,Rs,yl.vertical,vh,Ys,Su,Vo,yh,tu,Uo.vertical,["vertical"],al,Qc,dc,Zs));var bd=Dl?Dl.boxStartIndex:Wa.collisionBoxArray.length,_d=Dl?Dl.boxEndIndex:Wa.collisionBoxArray.length,wd=Ql?Ql.boxStartIndex:Wa.collisionBoxArray.length,Td=Ql?Ql.boxEndIndex:Wa.collisionBoxArray.length,kd=$l?$l.boxStartIndex:Wa.collisionBoxArray.length,Ad=$l?$l.boxEndIndex:Wa.collisionBoxArray.length,Md=eu?eu.boxStartIndex:Wa.collisionBoxArray.length,Sd=eu?eu.boxEndIndex:Wa.collisionBoxArray.length,Xs=-1,vc=function(Lu,Fh){return Lu&&Lu.circleDiameter?Math.max(Lu.circleDiameter,Fh):Fh};Xs=vc(Dl,Xs),Xs=vc(Ql,Xs),Xs=vc($l,Xs);var Rh=(Xs=vc(eu,Xs))>-1?1:0;Rh&&(Xs*=md/vi),Wa.glyphOffsetArray.length>=ca.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vo.sortKey!==void 0&&Wa.addToSortKeyRanges(Wa.symbolInstances.length,Vo.sortKey),Wa.symbolInstances.emplaceBack(Rs.x,Rs.y,al.right>=0?al.right:-1,al.center>=0?al.center:-1,al.left>=0?al.left:-1,al.vertical||-1,$c,Qc,Lh,bd,_d,wd,Td,kd,Ad,Md,Sd,Mu,Sh,Eh,Ah,Mh,Rh,0,Jc,ef,tf,Xs)}(Nr,Au,gd,Na,va,Da,rl,Nr.layers[0],Nr.collisionBoxArray,Kr.index,Kr.sourceLayerIndex,Nr.index,tc,qc,ac,Yi,nc,rc,ic,zs,Kr,Pa,To,zi,ea)};if(yu==="line")for(var Kl=0,oc=Gf(Kr.geometry,0,0,Xr,Xr);Kl<oc.length;Kl+=1)for(var sc=oc[Kl],Jl=0,lc=$p(sc,mu,Xl,Na.vertical||ys,va,xs,Cl,Nr.overscaling,Xr);Jl<lc.length;Jl+=1){var uc=lc[Jl];ys&&nd(Nr,ys.text,Hc,uc)||Pl(sc,uc)}else if(yu==="line-center")for(var bu=0,_u=Kr.geometry;bu<_u.length;bu+=1){var Ol=_u[bu];if(Ol.length>1){var wu=Jp(Ol,Xl,Na.vertical||ys,va,xs,Cl);wu&&Pl(Ol,wu)}}else if(Kr.type==="Polygon")for(var Il=0,Tu=Sc(Kr.geometry,0);Il<Tu.length;Il+=1){var ku=Tu[Il],hh=ed(ku,16);Pl(ku[0],new Ul(hh.x,hh.y,0))}else if(Kr.type==="LineString")for(var Gc=0,ph=Kr.geometry;Gc<ph.length;Gc+=1){var Wc=ph[Gc];Pl(Wc,new Ul(Wc[0].x,Wc[0].y,0))}else if(Kr.type==="Point")for(var Yc=0,dh=Kr.geometry;Yc<dh.length;Yc+=1)for(var Zc=0,gh=dh[Yc];Zc<gh.length;Zc+=1){var Xc=gh[Zc];Pl([Xc],new Ul(Xc.x,Xc.y,0))}}(A,cr,Dr,ai,le,_t,zr,Sr,Mr,xi,je)},nr=0,pr=A.features;nr<pr.length;nr+=1)Gn();Ce&&A.generateCollisionDebugBuffers()},o.perspective=function(A,I,Y,le,ke){var Ce,je=1/Math.tan(I/2);return A[0]=je/Y,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=je,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,ke!=null&&ke!==1/0?(Ce=1/(le-ke),A[10]=(ke+le)*Ce,A[14]=2*ke*le*Ce):(A[10]=-1,A[14]=-2*le),A},o.pick=function(A,I){for(var Y={},le=0;le<I.length;le++){var ke=I[le];ke in A&&(Y[ke]=A[ke])}return Y},o.plugin=ci,o.polygonIntersectsPolygon=kl,o.postMapLoadEvent=de,o.postTurnstileEvent=Oe,o.potpack=Of,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=wr,o.registerForPluginStateChange=function(A){return A({pluginStatus:Hr,pluginURL:Ha}),ui.on("pluginStateChange",A),A},o.renderColorRamp=ff,o.rotate=function(A,I,Y){var le=I[0],ke=I[1],Ce=I[2],je=I[3],Ke=Math.sin(Y),st=Math.cos(Y);return A[0]=le*st+Ce*Ke,A[1]=ke*st+je*Ke,A[2]=le*-Ke+Ce*st,A[3]=ke*-Ke+je*st,A},o.rotateX=function(A,I,Y){var le=Math.sin(Y),ke=Math.cos(Y),Ce=I[4],je=I[5],Ke=I[6],st=I[7],mt=I[8],_t=I[9],Dt=I[10],jt=I[11];return I!==A&&(A[0]=I[0],A[1]=I[1],A[2]=I[2],A[3]=I[3],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[4]=Ce*ke+mt*le,A[5]=je*ke+_t*le,A[6]=Ke*ke+Dt*le,A[7]=st*ke+jt*le,A[8]=mt*ke-Ce*le,A[9]=_t*ke-je*le,A[10]=Dt*ke-Ke*le,A[11]=jt*ke-st*le,A},o.rotateZ=function(A,I,Y){var le=Math.sin(Y),ke=Math.cos(Y),Ce=I[0],je=I[1],Ke=I[2],st=I[3],mt=I[4],_t=I[5],Dt=I[6],jt=I[7];return I!==A&&(A[8]=I[8],A[9]=I[9],A[10]=I[10],A[11]=I[11],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[0]=Ce*ke+mt*le,A[1]=je*ke+_t*le,A[2]=Ke*ke+Dt*le,A[3]=st*ke+jt*le,A[4]=mt*ke-Ce*le,A[5]=_t*ke-je*le,A[6]=Dt*ke-Ke*le,A[7]=jt*ke-st*le,A},o.scale=function(A,I,Y){var le=Y[0],ke=Y[1],Ce=Y[2];return A[0]=I[0]*le,A[1]=I[1]*le,A[2]=I[2]*le,A[3]=I[3]*le,A[4]=I[4]*ke,A[5]=I[5]*ke,A[6]=I[6]*ke,A[7]=I[7]*ke,A[8]=I[8]*Ce,A[9]=I[9]*Ce,A[10]=I[10]*Ce,A[11]=I[11]*Ce,A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15],A},o.scale$1=function(A,I,Y){return A[0]=I[0]*Y,A[1]=I[1]*Y,A[2]=I[2]*Y,A[3]=I[3]*Y,A},o.scale$2=function(A,I,Y){return A[0]=I[0]*Y,A[1]=I[1]*Y,A[2]=I[2]*Y,A},o.setCacheLimits=function(A,I){Me=A,ze=I},o.setRTLTextPlugin=function(A,I,Y){if(Y===void 0&&(Y=!1),Hr===no||Hr===Ii||Hr===yo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ha=K.resolveURL(A),Hr=no,Bo=I,ro(),Y||ps()},o.sphericalToCartesian=function(A){var I=A[0],Y=A[1],le=A[2];return Y+=90,Y*=Math.PI/180,le*=Math.PI/180,{x:I*Math.cos(Y)*Math.sin(le),y:I*Math.sin(Y)*Math.sin(le),z:I*Math.cos(le)}},o.sqrLen=Gh,o.styleSpec=We,o.sub=Hh,o.symbolSize=Kp,o.transformMat3=function(A,I,Y){var le=I[0],ke=I[1],Ce=I[2];return A[0]=le*Y[0]+ke*Y[3]+Ce*Y[6],A[1]=le*Y[1]+ke*Y[4]+Ce*Y[7],A[2]=le*Y[2]+ke*Y[5]+Ce*Y[8],A},o.transformMat4=Fu,o.translate=function(A,I,Y){var le,ke,Ce,je,Ke,st,mt,_t,Dt,jt,Rt,rn,on=Y[0],bn=Y[1],yn=Y[2];return I===A?(A[12]=I[0]*on+I[4]*bn+I[8]*yn+I[12],A[13]=I[1]*on+I[5]*bn+I[9]*yn+I[13],A[14]=I[2]*on+I[6]*bn+I[10]*yn+I[14],A[15]=I[3]*on+I[7]*bn+I[11]*yn+I[15]):(le=I[0],ke=I[1],Ce=I[2],je=I[3],Ke=I[4],st=I[5],mt=I[6],_t=I[7],Dt=I[8],jt=I[9],Rt=I[10],rn=I[11],A[0]=le,A[1]=ke,A[2]=Ce,A[3]=je,A[4]=Ke,A[5]=st,A[6]=mt,A[7]=_t,A[8]=Dt,A[9]=jt,A[10]=Rt,A[11]=rn,A[12]=le*on+Ke*bn+Dt*yn+I[12],A[13]=ke*on+st*bn+jt*yn+I[13],A[14]=Ce*on+mt*bn+Rt*yn+I[14],A[15]=je*on+_t*bn+rn*yn+I[15]),A},o.triggerPluginCompletionEvent=li,o.uniqueId=d,o.validateCustomStyleLayer=function(A){var I=[],Y=A.id;return Y===void 0&&I.push({message:"layers."+Y+': missing required property "id"'}),A.render===void 0&&I.push({message:"layers."+Y+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&I.push({message:"layers."+Y+': property "renderingMode" must be either "2d" or "3d"'}),I},o.validateLight=Qo,o.validateStyle=to,o.values=function(A){var I=[];for(var Y in A)I.push(A[Y]);return I},o.vectorTile=Fl,o.version=b,o.warnOnce=E,o.webpSupported=Z,o.window=n,o.wrap=p}),k(0,function(o){function T(He){var Ze=typeof He;if(Ze==="number"||Ze==="boolean"||Ze==="string"||He==null)return JSON.stringify(He);if(Array.isArray(He)){for(var Be="[",Ge=0,it=He;Ge<it.length;Ge+=1)Be+=T(it[Ge])+",";return Be+"]"}for(var tt=Object.keys(He).sort(),Re="{",Fe=0;Fe<tt.length;Fe++)Re+=JSON.stringify(tt[Fe])+":"+T(He[tt[Fe]])+",";return Re+"}"}function b(He){for(var Ze="",Be=0,Ge=o.refProperties;Be<Ge.length;Be+=1)Ze+="/"+T(He[Ge[Be]]);return Ze}var h=function(He){this.keyCache={},He&&this.replace(He)};h.prototype.replace=function(He){this._layerConfigs={},this._layers={},this.update(He,[])},h.prototype.update=function(He,Ze){for(var Be=this,Ge=0,it=He;Ge<it.length;Ge+=1){var tt=it[Ge];this._layerConfigs[tt.id]=tt;var Re=this._layers[tt.id]=o.createStyleLayer(tt);Re._featureFilter=o.featureFilter(Re.filter),this.keyCache[tt.id]&&delete this.keyCache[tt.id]}for(var Fe=0,nt=Ze;Fe<nt.length;Fe+=1){var We=nt[Fe];delete this.keyCache[We],delete this._layerConfigs[We],delete this._layers[We]}this.familiesBySource={};for(var ct=0,pt=function(Ct,It){for(var Wt={},Nt=0;Nt<Ct.length;Nt++){var Bt=It&&It[Ct[Nt].id]||b(Ct[Nt]);It&&(It[Ct[Nt].id]=Bt);var Ht=Wt[Bt];Ht||(Ht=Wt[Bt]=[]),Ht.push(Ct[Nt])}var Qt=[];for(var Cn in Wt)Qt.push(Wt[Cn]);return Qt}(o.values(this._layerConfigs),this.keyCache);ct<pt.length;ct+=1){var gt=pt[ct].map(function(Ct){return Be._layers[Ct.id]}),ut=gt[0];if(ut.visibility!=="none"){var kt=ut.source||"",yt=this.familiesBySource[kt];yt||(yt=this.familiesBySource[kt]={});var Mt=ut.sourceLayer||"_geojsonTileLayer",Lt=yt[Mt];Lt||(Lt=yt[Mt]=[]),Lt.push(gt)}}};var s=function(He){var Ze={},Be=[];for(var Ge in He){var it=He[Ge],tt=Ze[Ge]={};for(var Re in it){var Fe=it[+Re];if(Fe&&Fe.bitmap.width!==0&&Fe.bitmap.height!==0){var nt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};Be.push(nt),tt[Re]={rect:nt,metrics:Fe.metrics}}}}var We=o.potpack(Be),ct=We.w,pt=We.h,gt=new o.AlphaImage({width:ct||1,height:pt||1});for(var ut in He){var kt=He[ut];for(var yt in kt){var Mt=kt[+yt];if(Mt&&Mt.bitmap.width!==0&&Mt.bitmap.height!==0){var Lt=Ze[ut][yt].rect;o.AlphaImage.copy(Mt.bitmap,gt,{x:0,y:0},{x:Lt.x+1,y:Lt.y+1},Mt.bitmap)}}}this.image=gt,this.positions=Ze};o.register("GlyphAtlas",s);var t=function(He){this.tileID=new o.OverscaledTileID(He.tileID.overscaledZ,He.tileID.wrap,He.tileID.canonical.z,He.tileID.canonical.x,He.tileID.canonical.y),this.uid=He.uid,this.zoom=He.zoom,this.pixelRatio=He.pixelRatio,this.tileSize=He.tileSize,this.source=He.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=He.showCollisionBoxes,this.collectResourceTiming=!!He.collectResourceTiming,this.returnDependencies=!!He.returnDependencies,this.promoteId=He.promoteId};function a(He,Ze,Be){for(var Ge=new o.EvaluationParameters(Ze),it=0,tt=He;it<tt.length;it+=1)tt[it].recalculate(Ge,Be)}function n(He,Ze){var Be=o.getArrayBuffer(He.request,function(Ge,it,tt,Re){Ge?Ze(Ge):it&&Ze(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(it)),rawData:it,cacheControl:tt,expires:Re})});return function(){Be.cancel(),Ze()}}t.prototype.parse=function(He,Ze,Be,Ge,it){var tt=this;this.status="parsing",this.data=He,this.collisionBoxArray=new o.CollisionBoxArray;var Re=new o.DictionaryCoder(Object.keys(He.layers).sort()),Fe=new o.FeatureIndex(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];var nt,We,ct,pt,gt={},ut={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Be},kt=Ze.familiesBySource[this.source];for(var yt in kt){var Mt=He.layers[yt];if(Mt){Mt.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+yt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Lt=Re.encode(yt),Ct=[],It=0;It<Mt.length;It++){var Wt=Mt.feature(It),Nt=Fe.getId(Wt,yt);Ct.push({feature:Wt,id:Nt,index:It,sourceLayerIndex:Lt})}for(var Bt=0,Ht=kt[yt];Bt<Ht.length;Bt+=1){var Qt=Ht[Bt],Cn=Qt[0];Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||Cn.visibility!=="none"&&(a(Qt,this.zoom,Be),(gt[Cn.id]=Cn.createBucket({index:Fe.bucketLayerIDs.length,layers:Qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Lt,sourceID:this.source})).populate(Ct,ut,this.tileID.canonical),Fe.bucketLayerIDs.push(Qt.map(function($t){return $t.id})))}}}var Tn=o.mapObject(ut.glyphDependencies,function($t){return Object.keys($t).map(Number)});Object.keys(Tn).length?Ge.send("getGlyphs",{uid:this.uid,stacks:Tn},function($t,ln){nt||(nt=$t,We=ln,an.call(tt))}):We={};var hn=Object.keys(ut.iconDependencies);hn.length?Ge.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},function($t,ln){nt||(nt=$t,ct=ln,an.call(tt))}):ct={};var Zt=Object.keys(ut.patternDependencies);function an(){if(nt)return it(nt);if(We&&ct&&pt){var $t=new s(We),ln=new o.ImageAtlas(ct,pt);for(var mn in gt){var xn=gt[mn];xn instanceof o.SymbolBucket?(a(xn.layers,this.zoom,Be),o.performSymbolLayout(xn,We,$t.positions,ct,ln.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):xn.hasPattern&&(xn instanceof o.LineBucket||xn instanceof o.FillBucket||xn instanceof o.FillExtrusionBucket)&&(a(xn.layers,this.zoom,Be),xn.addFeatures(ut,this.tileID.canonical,ln.patternPositions))}this.status="done",it(null,{buckets:o.values(gt).filter(function(Pn){return!Pn.isEmpty()}),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$t.image,imageAtlas:ln,glyphMap:this.returnDependencies?We:null,iconMap:this.returnDependencies?ct:null,glyphPositions:this.returnDependencies?$t.positions:null})}}Zt.length?Ge.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"},function($t,ln){nt||(nt=$t,pt=ln,an.call(tt))}):pt={},an.call(this)};var r=function(He,Ze,Be,Ge){this.actor=He,this.layerIndex=Ze,this.availableImages=Be,this.loadVectorData=Ge||n,this.loading={},this.loaded={}};r.prototype.loadTile=function(He,Ze){var Be=this,Ge=He.uid;this.loading||(this.loading={});var it=!!(He&&He.request&&He.request.collectResourceTiming)&&new o.RequestPerformance(He.request),tt=this.loading[Ge]=new t(He);tt.abort=this.loadVectorData(He,function(Re,Fe){if(delete Be.loading[Ge],Re||!Fe)return tt.status="done",Be.loaded[Ge]=tt,Ze(Re);var nt=Fe.rawData,We={};Fe.expires&&(We.expires=Fe.expires),Fe.cacheControl&&(We.cacheControl=Fe.cacheControl);var ct={};if(it){var pt=it.finish();pt&&(ct.resourceTiming=JSON.parse(JSON.stringify(pt)))}tt.vectorTile=Fe.vectorTile,tt.parse(Fe.vectorTile,Be.layerIndex,Be.availableImages,Be.actor,function(gt,ut){if(gt||!ut)return Ze(gt);Ze(null,o.extend({rawTileData:nt.slice(0)},ut,We,ct))}),Be.loaded=Be.loaded||{},Be.loaded[Ge]=tt})},r.prototype.reloadTile=function(He,Ze){var Be=this,Ge=this.loaded,it=He.uid,tt=this;if(Ge&&Ge[it]){var Re=Ge[it];Re.showCollisionBoxes=He.showCollisionBoxes;var Fe=function(nt,We){var ct=Re.reloadCallback;ct&&(delete Re.reloadCallback,Re.parse(Re.vectorTile,tt.layerIndex,Be.availableImages,tt.actor,ct)),Ze(nt,We)};Re.status==="parsing"?Re.reloadCallback=Fe:Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,Fe):Fe())}},r.prototype.abortTile=function(He,Ze){var Be=this.loading,Ge=He.uid;Be&&Be[Ge]&&Be[Ge].abort&&(Be[Ge].abort(),delete Be[Ge]),Ze()},r.prototype.removeTile=function(He,Ze){var Be=this.loaded,Ge=He.uid;Be&&Be[Ge]&&delete Be[Ge],Ze()};var i=o.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(He,Ze){var Be=He.uid,Ge=He.encoding,it=He.rawImageData,tt=i&&it instanceof i?this.getImageData(it):it,Re=new o.DEMData(Be,tt,Ge);this.loaded=this.loaded||{},this.loaded[Be]=Re,Ze(null,Re)},l.prototype.getImageData=function(He){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(He.width,He.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=He.width,this.offscreenCanvas.height=He.height,this.offscreenCanvasContext.drawImage(He,0,0,He.width,He.height);var Ze=this.offscreenCanvasContext.getImageData(-1,-1,He.width+2,He.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:Ze.width,height:Ze.height},Ze.data)},l.prototype.removeTile=function(He){var Ze=this.loaded,Be=He.uid;Ze&&Ze[Be]&&delete Ze[Be]};var u=function He(Ze,Be){var Ge,it=Ze&&Ze.type;if(it==="FeatureCollection")for(Ge=0;Ge<Ze.features.length;Ge++)He(Ze.features[Ge],Be);else if(it==="GeometryCollection")for(Ge=0;Ge<Ze.geometries.length;Ge++)He(Ze.geometries[Ge],Be);else if(it==="Feature")He(Ze.geometry,Be);else if(it==="Polygon")p(Ze.coordinates,Be);else if(it==="MultiPolygon")for(Ge=0;Ge<Ze.coordinates.length;Ge++)p(Ze.coordinates[Ge],Be);return Ze};function p(He,Ze){if(He.length!==0){c(He[0],Ze);for(var Be=1;Be<He.length;Be++)c(He[Be],!1)}}function c(He,Ze){for(var Be=0,Ge=0,it=He.length,tt=it-1;Ge<it;tt=Ge++)Be+=(He[Ge][0]-He[tt][0])*(He[tt][1]+He[Ge][1]);Be>=0!=!!Ze&&He.reverse()}var x=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(He){this._feature=He,this.extent=o.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))};d.prototype.loadGeometry=function(){if(this._feature.type===1){for(var He=[],Ze=0,Be=this._feature.geometry;Ze<Be.length;Ze+=1){var Ge=Be[Ze];He.push([new o.Point$1(Ge[0],Ge[1])])}return He}for(var it=[],tt=0,Re=this._feature.geometry;tt<Re.length;tt+=1){for(var Fe=[],nt=0,We=Re[tt];nt<We.length;nt+=1){var ct=We[nt];Fe.push(new o.Point$1(ct[0],ct[1]))}it.push(Fe)}return it},d.prototype.toGeoJSON=function(He,Ze,Be){return x.call(this,He,Ze,Be)};var g=function(He){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=He.length,this._features=He};g.prototype.feature=function(He){return new d(this._features[He])};var v=o.vectorTile.VectorTileFeature,y=m;function m(He,Ze){this.options=Ze||{},this.features=He,this.length=He.length}function _(He,Ze){this.id=typeof He.id=="number"?He.id:void 0,this.type=He.type,this.rawGeometry=He.type===1?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=Ze||4096}m.prototype.feature=function(He){return new _(this.features[He],this.options.extent)},_.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var Ze=0;Ze<He.length;Ze++){for(var Be=He[Ze],Ge=[],it=0;it<Be.length;it++)Ge.push(new o.Point$1(Be[it][0],Be[it][1]));this.geometry.push(Ge)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,Ze=1/0,Be=-1/0,Ge=1/0,it=-1/0,tt=0;tt<He.length;tt++)for(var Re=He[tt],Fe=0;Fe<Re.length;Fe++){var nt=Re[Fe];Ze=Math.min(Ze,nt.x),Be=Math.max(Be,nt.x),Ge=Math.min(Ge,nt.y),it=Math.max(it,nt.y)}return[Ze,Ge,Be,it]},_.prototype.toGeoJSON=v.prototype.toGeoJSON;var f=O,S=O,w=function(He,Ze){Ze=Ze||{};var Be={};for(var Ge in He)Be[Ge]=new y(He[Ge].features,Ze),Be[Ge].name=Ge,Be[Ge].version=Ze.version,Be[Ge].extent=Ze.extent;return O({layers:Be})},E=y;function O(He){var Ze=new o.pbf;return function(Be,Ge){for(var it in Be.layers)Ge.writeMessage(3,C,Be.layers[it])}(He,Ze),Ze.finish()}function C(He,Ze){var Be;Ze.writeVarintField(15,He.version||1),Ze.writeStringField(1,He.name||""),Ze.writeVarintField(5,He.extent||4096);var Ge={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<He.length;Be++)Ge.feature=He.feature(Be),Ze.writeMessage(2,P,Ge);var it=Ge.keys;for(Be=0;Be<it.length;Be++)Ze.writeStringField(3,it[Be]);var tt=Ge.values;for(Be=0;Be<tt.length;Be++)Ze.writeMessage(4,W,tt[Be])}function P(He,Ze){var Be=He.feature;Be.id!==void 0&&Ze.writeVarintField(1,Be.id),Ze.writeMessage(2,R,He),Ze.writeVarintField(3,Be.type),Ze.writeMessage(4,N,Be)}function R(He,Ze){var Be=He.feature,Ge=He.keys,it=He.values,tt=He.keycache,Re=He.valuecache;for(var Fe in Be.properties){var nt=tt[Fe];nt===void 0&&(Ge.push(Fe),nt=Ge.length-1,tt[Fe]=nt),Ze.writeVarint(nt);var We=Be.properties[Fe],ct=typeof We;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(We=JSON.stringify(We));var pt=ct+":"+We,gt=Re[pt];gt===void 0&&(it.push(We),gt=it.length-1,Re[pt]=gt),Ze.writeVarint(gt)}}function j(He,Ze){return(Ze<<3)+(7&He)}function D(He){return He<<1^He>>31}function N(He,Ze){for(var Be=He.loadGeometry(),Ge=He.type,it=0,tt=0,Re=Be.length,Fe=0;Fe<Re;Fe++){var nt=Be[Fe],We=1;Ge===1&&(We=nt.length),Ze.writeVarint(j(1,We));for(var ct=Ge===3?nt.length-1:nt.length,pt=0;pt<ct;pt++){pt===1&&Ge!==1&&Ze.writeVarint(j(2,ct-1));var gt=nt[pt].x-it,ut=nt[pt].y-tt;Ze.writeVarint(D(gt)),Ze.writeVarint(D(ut)),it+=gt,tt+=ut}Ge===3&&Ze.writeVarint(j(7,1))}}function W(He,Ze){var Be=typeof He;Be==="string"?Ze.writeStringField(1,He):Be==="boolean"?Ze.writeBooleanField(7,He):Be==="number"&&(He%1!=0?Ze.writeDoubleField(3,He):He<0?Ze.writeSVarintField(6,He):Ze.writeVarintField(5,He))}function F(He,Ze,Be,Ge,it,tt){if(!(it-Ge<=Be)){var Re=Ge+it>>1;V(He,Ze,Re,Ge,it,tt%2),F(He,Ze,Be,Ge,Re-1,tt+1),F(He,Ze,Be,Re+1,it,tt+1)}}function V(He,Ze,Be,Ge,it,tt){for(;it>Ge;){if(it-Ge>600){var Re=it-Ge+1,Fe=Be-Ge+1,nt=Math.log(Re),We=.5*Math.exp(2*nt/3),ct=.5*Math.sqrt(nt*We*(Re-We)/Re)*(Fe-Re/2<0?-1:1);V(He,Ze,Be,Math.max(Ge,Math.floor(Be-Fe*We/Re+ct)),Math.min(it,Math.floor(Be+(Re-Fe)*We/Re+ct)),tt)}var pt=Ze[2*Be+tt],gt=Ge,ut=it;for(U(He,Ze,Ge,Be),Ze[2*it+tt]>pt&&U(He,Ze,Ge,it);gt<ut;){for(U(He,Ze,gt,ut),gt++,ut--;Ze[2*gt+tt]<pt;)gt++;for(;Ze[2*ut+tt]>pt;)ut--}Ze[2*Ge+tt]===pt?U(He,Ze,Ge,ut):U(He,Ze,++ut,it),ut<=Be&&(Ge=ut+1),Be<=ut&&(it=ut-1)}}function U(He,Ze,Be,Ge){te(He,Be,Ge),te(Ze,2*Be,2*Ge),te(Ze,2*Be+1,2*Ge+1)}function te(He,Ze,Be){var Ge=He[Ze];He[Ze]=He[Be],He[Be]=Ge}function J(He,Ze,Be,Ge){var it=He-Be,tt=Ze-Ge;return it*it+tt*tt}f.fromVectorTileJs=S,f.fromGeojsonVt=w,f.GeoJSONWrapper=E;var X=function(He){return He[0]},K=function(He){return He[1]},Q=function(He,Ze,Be,Ge,it){Ze===void 0&&(Ze=X),Be===void 0&&(Be=K),Ge===void 0&&(Ge=64),it===void 0&&(it=Float64Array),this.nodeSize=Ge,this.points=He;for(var tt=He.length<65536?Uint16Array:Uint32Array,Re=this.ids=new tt(He.length),Fe=this.coords=new it(2*He.length),nt=0;nt<He.length;nt++)Re[nt]=nt,Fe[2*nt]=Ze(He[nt]),Fe[2*nt+1]=Be(He[nt]);F(Re,Fe,Ge,0,Re.length-1,0)};Q.prototype.range=function(He,Ze,Be,Ge){return function(it,tt,Re,Fe,nt,We,ct){for(var pt,gt,ut=[0,it.length-1,0],kt=[];ut.length;){var yt=ut.pop(),Mt=ut.pop(),Lt=ut.pop();if(Mt-Lt<=ct)for(var Ct=Lt;Ct<=Mt;Ct++)pt=tt[2*Ct],gt=tt[2*Ct+1],pt>=Re&&pt<=nt&&gt>=Fe&&gt<=We&&kt.push(it[Ct]);else{var It=Math.floor((Lt+Mt)/2);pt=tt[2*It],gt=tt[2*It+1],pt>=Re&&pt<=nt&&gt>=Fe&&gt<=We&&kt.push(it[It]);var Wt=(yt+1)%2;(yt===0?Re<=pt:Fe<=gt)&&(ut.push(Lt),ut.push(It-1),ut.push(Wt)),(yt===0?nt>=pt:We>=gt)&&(ut.push(It+1),ut.push(Mt),ut.push(Wt))}}return kt}(this.ids,this.coords,He,Ze,Be,Ge,this.nodeSize)},Q.prototype.within=function(He,Ze,Be){return function(Ge,it,tt,Re,Fe,nt){for(var We=[0,Ge.length-1,0],ct=[],pt=Fe*Fe;We.length;){var gt=We.pop(),ut=We.pop(),kt=We.pop();if(ut-kt<=nt)for(var yt=kt;yt<=ut;yt++)J(it[2*yt],it[2*yt+1],tt,Re)<=pt&&ct.push(Ge[yt]);else{var Mt=Math.floor((kt+ut)/2),Lt=it[2*Mt],Ct=it[2*Mt+1];J(Lt,Ct,tt,Re)<=pt&&ct.push(Ge[Mt]);var It=(gt+1)%2;(gt===0?tt-Fe<=Lt:Re-Fe<=Ct)&&(We.push(kt),We.push(Mt-1),We.push(It)),(gt===0?tt+Fe>=Lt:Re+Fe>=Ct)&&(We.push(Mt+1),We.push(ut),We.push(It))}}return ct}(this.ids,this.coords,He,Ze,Be,this.nodeSize)};var Z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(He){return He}},re=function(He){this.options=be(Object.create(Z),He),this.trees=new Array(this.options.maxZoom+1)};function oe(He,Ze,Be,Ge,it){return{x:He,y:Ze,zoom:1/0,id:Be,parentId:-1,numPoints:Ge,properties:it}}function ae(He,Ze){var Be=He.geometry.coordinates,Ge=Be[0],it=Be[1];return{x:pe(Ge),y:xe(it),zoom:1/0,index:Ze,parentId:-1}}function ce(He){return{type:"Feature",id:He.id,properties:he(He),geometry:{type:"Point",coordinates:[(Ge=He.x,360*(Ge-.5)),(Ze=He.y,Be=(180-360*Ze)*Math.PI/180,360*Math.atan(Math.exp(Be))/Math.PI-90)]}};var Ze,Be,Ge}function he(He){var Ze=He.numPoints,Be=Ze>=1e4?Math.round(Ze/1e3)+"k":Ze>=1e3?Math.round(Ze/100)/10+"k":Ze;return be(be({},He.properties),{cluster:!0,cluster_id:He.id,point_count:Ze,point_count_abbreviated:Be})}function pe(He){return He/360+.5}function xe(He){var Ze=Math.sin(He*Math.PI/180),Be=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Be<0?0:Be>1?1:Be}function be(He,Ze){for(var Be in Ze)He[Be]=Ze[Be];return He}function ve(He){return He.x}function ge(He){return He.y}function we(He,Ze,Be,Ge){for(var it,tt=Ge,Re=Be-Ze>>1,Fe=Be-Ze,nt=He[Ze],We=He[Ze+1],ct=He[Be],pt=He[Be+1],gt=Ze+3;gt<Be;gt+=3){var ut=_e(He[gt],He[gt+1],nt,We,ct,pt);if(ut>tt)it=gt,tt=ut;else if(ut===tt){var kt=Math.abs(gt-Re);kt<Fe&&(it=gt,Fe=kt)}}tt>Ge&&(it-Ze>3&&we(He,Ze,it,Ge),He[it+2]=tt,Be-it>3&&we(He,it,Be,Ge))}function _e(He,Ze,Be,Ge,it,tt){var Re=it-Be,Fe=tt-Ge;if(Re!==0||Fe!==0){var nt=((He-Be)*Re+(Ze-Ge)*Fe)/(Re*Re+Fe*Fe);nt>1?(Be=it,Ge=tt):nt>0&&(Be+=Re*nt,Ge+=Fe*nt)}return(Re=He-Be)*Re+(Fe=Ze-Ge)*Fe}function se(He,Ze,Be,Ge){var it={id:He===void 0?null:He,type:Ze,geometry:Be,tags:Ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tt){var Re=tt.geometry,Fe=tt.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")ie(tt,Re);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var nt=0;nt<Re.length;nt++)ie(tt,Re[nt]);else if(Fe==="MultiPolygon")for(nt=0;nt<Re.length;nt++)for(var We=0;We<Re[nt].length;We++)ie(tt,Re[nt][We])}(it),it}function ie(He,Ze){for(var Be=0;Be<Ze.length;Be+=3)He.minX=Math.min(He.minX,Ze[Be]),He.minY=Math.min(He.minY,Ze[Be+1]),He.maxX=Math.max(He.maxX,Ze[Be]),He.maxY=Math.max(He.maxY,Ze[Be+1])}function fe(He,Ze,Be,Ge){if(Ze.geometry){var it=Ze.geometry.coordinates,tt=Ze.geometry.type,Re=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),Fe=[],nt=Ze.id;if(Be.promoteId?nt=Ze.properties[Be.promoteId]:Be.generateId&&(nt=Ge||0),tt==="Point")Ee(it,Fe);else if(tt==="MultiPoint")for(var We=0;We<it.length;We++)Ee(it[We],Fe);else if(tt==="LineString")Te(it,Fe,Re,!1);else if(tt==="MultiLineString"){if(Be.lineMetrics){for(We=0;We<it.length;We++)Fe=[],Te(it[We],Fe,Re,!1),He.push(se(nt,"LineString",Fe,Ze.properties));return}Ae(it,Fe,Re,!1)}else if(tt==="Polygon")Ae(it,Fe,Re,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(We=0;We<Ze.geometry.geometries.length;We++)fe(He,{id:nt,geometry:Ze.geometry.geometries[We],properties:Ze.properties},Be,Ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(We=0;We<it.length;We++){var ct=[];Ae(it[We],ct,Re,!0),Fe.push(ct)}}He.push(se(nt,tt,Fe,Ze.properties))}}function Ee(He,Ze){Ze.push(Se(He[0])),Ze.push(Oe(He[1])),Ze.push(0)}function Te(He,Ze,Be,Ge){for(var it,tt,Re=0,Fe=0;Fe<He.length;Fe++){var nt=Se(He[Fe][0]),We=Oe(He[Fe][1]);Ze.push(nt),Ze.push(We),Ze.push(0),Fe>0&&(Re+=Ge?(it*We-nt*tt)/2:Math.sqrt(Math.pow(nt-it,2)+Math.pow(We-tt,2))),it=nt,tt=We}var ct=Ze.length-3;Ze[2]=1,we(Ze,0,ct,Be),Ze[ct+2]=1,Ze.size=Math.abs(Re),Ze.start=0,Ze.end=Ze.size}function Ae(He,Ze,Be,Ge){for(var it=0;it<He.length;it++){var tt=[];Te(He[it],tt,Be,Ge),Ze.push(tt)}}function Se(He){return He/360+.5}function Oe(He){var Ze=Math.sin(He*Math.PI/180),Be=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Be<0?0:Be>1?1:Be}function De(He,Ze,Be,Ge,it,tt,Re,Fe){if(Ge/=Ze,tt>=(Be/=Ze)&&Re<Ge)return He;if(Re<Be||tt>=Ge)return null;for(var nt=[],We=0;We<He.length;We++){var ct=He[We],pt=ct.geometry,gt=ct.type,ut=it===0?ct.minX:ct.minY,kt=it===0?ct.maxX:ct.maxY;if(ut>=Be&&kt<Ge)nt.push(ct);else if(!(kt<Be||ut>=Ge)){var yt=[];if(gt==="Point"||gt==="MultiPoint")de(pt,yt,Be,Ge,it);else if(gt==="LineString")me(pt,yt,Be,Ge,it,!1,Fe.lineMetrics);else if(gt==="MultiLineString")ze(pt,yt,Be,Ge,it,!1);else if(gt==="Polygon")ze(pt,yt,Be,Ge,it,!0);else if(gt==="MultiPolygon")for(var Mt=0;Mt<pt.length;Mt++){var Lt=[];ze(pt[Mt],Lt,Be,Ge,it,!0),Lt.length&&yt.push(Lt)}if(yt.length){if(Fe.lineMetrics&&gt==="LineString"){for(Mt=0;Mt<yt.length;Mt++)nt.push(se(ct.id,gt,yt[Mt],ct.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(yt.length===1?(gt="LineString",yt=yt[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=yt.length===3?"Point":"MultiPoint"),nt.push(se(ct.id,gt,yt,ct.tags))}}}return nt.length?nt:null}function de(He,Ze,Be,Ge,it){for(var tt=0;tt<He.length;tt+=3){var Re=He[tt+it];Re>=Be&&Re<=Ge&&(Ze.push(He[tt]),Ze.push(He[tt+1]),Ze.push(He[tt+2]))}}function me(He,Ze,Be,Ge,it,tt,Re){for(var Fe,nt,We=Me(He),ct=it===0?Ne:Ve,pt=He.start,gt=0;gt<He.length-3;gt+=3){var ut=He[gt],kt=He[gt+1],yt=He[gt+2],Mt=He[gt+3],Lt=He[gt+4],Ct=it===0?ut:kt,It=it===0?Mt:Lt,Wt=!1;Re&&(Fe=Math.sqrt(Math.pow(ut-Mt,2)+Math.pow(kt-Lt,2))),Ct<Be?It>Be&&(nt=ct(We,ut,kt,Mt,Lt,Be),Re&&(We.start=pt+Fe*nt)):Ct>Ge?It<Ge&&(nt=ct(We,ut,kt,Mt,Lt,Ge),Re&&(We.start=pt+Fe*nt)):Pe(We,ut,kt,yt),It<Be&&Ct>=Be&&(nt=ct(We,ut,kt,Mt,Lt,Be),Wt=!0),It>Ge&&Ct<=Ge&&(nt=ct(We,ut,kt,Mt,Lt,Ge),Wt=!0),!tt&&Wt&&(Re&&(We.end=pt+Fe*nt),Ze.push(We),We=Me(He)),Re&&(pt+=Fe)}var Nt=He.length-3;ut=He[Nt],kt=He[Nt+1],yt=He[Nt+2],(Ct=it===0?ut:kt)>=Be&&Ct<=Ge&&Pe(We,ut,kt,yt),Nt=We.length-3,tt&&Nt>=3&&(We[Nt]!==We[0]||We[Nt+1]!==We[1])&&Pe(We,We[0],We[1],We[2]),We.length&&Ze.push(We)}function Me(He){var Ze=[];return Ze.size=He.size,Ze.start=He.start,Ze.end=He.end,Ze}function ze(He,Ze,Be,Ge,it,tt){for(var Re=0;Re<He.length;Re++)me(He[Re],Ze,Be,Ge,it,tt,!1)}function Pe(He,Ze,Be,Ge){He.push(Ze),He.push(Be),He.push(Ge)}function Ne(He,Ze,Be,Ge,it,tt){var Re=(tt-Ze)/(Ge-Ze);return He.push(tt),He.push(Be+(it-Be)*Re),He.push(1),Re}function Ve(He,Ze,Be,Ge,it,tt){var Re=(tt-Be)/(it-Be);return He.push(Ze+(Ge-Ze)*Re),He.push(tt),He.push(1),Re}function Ye(He,Ze){for(var Be=[],Ge=0;Ge<He.length;Ge++){var it,tt=He[Ge],Re=tt.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")it=at(tt.geometry,Ze);else if(Re==="MultiLineString"||Re==="Polygon"){it=[];for(var Fe=0;Fe<tt.geometry.length;Fe++)it.push(at(tt.geometry[Fe],Ze))}else if(Re==="MultiPolygon")for(it=[],Fe=0;Fe<tt.geometry.length;Fe++){for(var nt=[],We=0;We<tt.geometry[Fe].length;We++)nt.push(at(tt.geometry[Fe][We],Ze));it.push(nt)}Be.push(se(tt.id,Re,it,tt.tags))}return Be}function at(He,Ze){var Be=[];Be.size=He.size,He.start!==void 0&&(Be.start=He.start,Be.end=He.end);for(var Ge=0;Ge<He.length;Ge+=3)Be.push(He[Ge]+Ze,He[Ge+1],He[Ge+2]);return Be}function rt(He,Ze){if(He.transformed)return He;var Be,Ge,it,tt=1<<He.z,Re=He.x,Fe=He.y;for(Be=0;Be<He.features.length;Be++){var nt=He.features[Be],We=nt.geometry,ct=nt.type;if(nt.geometry=[],ct===1)for(Ge=0;Ge<We.length;Ge+=2)nt.geometry.push(dt(We[Ge],We[Ge+1],Ze,tt,Re,Fe));else for(Ge=0;Ge<We.length;Ge++){var pt=[];for(it=0;it<We[Ge].length;it+=2)pt.push(dt(We[Ge][it],We[Ge][it+1],Ze,tt,Re,Fe));nt.geometry.push(pt)}}return He.transformed=!0,He}function dt(He,Ze,Be,Ge,it,tt){return[Math.round(Be*(He*Ge-it)),Math.round(Be*(Ze*Ge-tt))]}function vt(He,Ze,Be,Ge,it){for(var tt=Ze===it.maxZoom?0:it.tolerance/((1<<Ze)*it.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:Ge,z:Ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<He.length;Fe++){Re.numFeatures++,ht(Re,He[Fe],tt,it);var nt=He[Fe].minX,We=He[Fe].minY,ct=He[Fe].maxX,pt=He[Fe].maxY;nt<Re.minX&&(Re.minX=nt),We<Re.minY&&(Re.minY=We),ct>Re.maxX&&(Re.maxX=ct),pt>Re.maxY&&(Re.maxY=pt)}return Re}function ht(He,Ze,Be,Ge){var it=Ze.geometry,tt=Ze.type,Re=[];if(tt==="Point"||tt==="MultiPoint")for(var Fe=0;Fe<it.length;Fe+=3)Re.push(it[Fe]),Re.push(it[Fe+1]),He.numPoints++,He.numSimplified++;else if(tt==="LineString")et(Re,it,He,Be,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(Fe=0;Fe<it.length;Fe++)et(Re,it[Fe],He,Be,tt==="Polygon",Fe===0);else if(tt==="MultiPolygon")for(var nt=0;nt<it.length;nt++){var We=it[nt];for(Fe=0;Fe<We.length;Fe++)et(Re,We[Fe],He,Be,!0,Fe===0)}if(Re.length){var ct=Ze.tags||null;if(tt==="LineString"&&Ge.lineMetrics){for(var pt in ct={},Ze.tags)ct[pt]=Ze.tags[pt];ct.mapbox_clip_start=it.start/it.size,ct.mapbox_clip_end=it.end/it.size}var gt={geometry:Re,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:ct};Ze.id!==null&&(gt.id=Ze.id),He.features.push(gt)}}function et(He,Ze,Be,Ge,it,tt){var Re=Ge*Ge;if(Ge>0&&Ze.size<(it?Re:Ge))Be.numPoints+=Ze.length/3;else{for(var Fe=[],nt=0;nt<Ze.length;nt+=3)(Ge===0||Ze[nt+2]>Re)&&(Be.numSimplified++,Fe.push(Ze[nt]),Fe.push(Ze[nt+1])),Be.numPoints++;it&&function(We,ct){for(var pt=0,gt=0,ut=We.length,kt=ut-2;gt<ut;kt=gt,gt+=2)pt+=(We[gt]-We[kt])*(We[gt+1]+We[kt+1]);if(pt>0===ct)for(gt=0,ut=We.length;gt<ut/2;gt+=2){var yt=We[gt],Mt=We[gt+1];We[gt]=We[ut-2-gt],We[gt+1]=We[ut-1-gt],We[ut-2-gt]=yt,We[ut-1-gt]=Mt}}(Fe,tt),He.push(Fe)}}function $e(He,Ze){var Be=(Ze=this.options=function(it,tt){for(var Re in tt)it[Re]=tt[Re];return it}(Object.create(this.options),Ze)).debug;if(Be&&console.time("preprocess data"),Ze.maxZoom<0||Ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ze.promoteId&&Ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ge=function(it,tt){var Re=[];if(it.type==="FeatureCollection")for(var Fe=0;Fe<it.features.length;Fe++)fe(Re,it.features[Fe],tt,Fe);else it.type==="Feature"?fe(Re,it,tt):fe(Re,{geometry:it},tt);return Re}(He,Ze);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ze.indexMaxZoom,Ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ge=function(it,tt){var Re=tt.buffer/tt.extent,Fe=it,nt=De(it,1,-1-Re,Re,0,-1,2,tt),We=De(it,1,1-Re,2+Re,0,-1,2,tt);return(nt||We)&&(Fe=De(it,1,-Re,1+Re,0,-1,2,tt)||[],nt&&(Fe=Ye(nt,1).concat(Fe)),We&&(Fe=Fe.concat(Ye(We,-1)))),Fe}(Ge,Ze)).length&&this.splitTile(Ge,0,0,0),Be&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(He,Ze,Be){return 32*((1<<He)*Be+Ze)+He}function Pt(He,Ze){var Be=He.tileID.canonical;if(!this._geoJSONIndex)return Ze(null,null);var Ge=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!Ge)return Ze(null,null);var it=new g(Ge.features),tt=f(it);tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),Ze(null,{vectorTile:it,rawData:tt.buffer})}re.prototype.load=function(He){var Ze=this.options,Be=Ze.log,Ge=Ze.minZoom,it=Ze.maxZoom,tt=Ze.nodeSize;Be&&console.time("total time");var Re="prepare "+He.length+" points";Be&&console.time(Re),this.points=He;for(var Fe=[],nt=0;nt<He.length;nt++)He[nt].geometry&&Fe.push(ae(He[nt],nt));this.trees[it+1]=new Q(Fe,ve,ge,tt,Float32Array),Be&&console.timeEnd(Re);for(var We=it;We>=Ge;We--){var ct=+Date.now();Fe=this._cluster(Fe,We),this.trees[We]=new Q(Fe,ve,ge,tt,Float32Array),Be&&console.log("z%d: %d clusters in %dms",We,Fe.length,+Date.now()-ct)}return Be&&console.timeEnd("total time"),this},re.prototype.getClusters=function(He,Ze){var Be=((He[0]+180)%360+360)%360-180,Ge=Math.max(-90,Math.min(90,He[1])),it=He[2]===180?180:((He[2]+180)%360+360)%360-180,tt=Math.max(-90,Math.min(90,He[3]));if(He[2]-He[0]>=360)Be=-180,it=180;else if(Be>it){var Re=this.getClusters([Be,Ge,180,tt],Ze),Fe=this.getClusters([-180,Ge,it,tt],Ze);return Re.concat(Fe)}for(var nt=this.trees[this._limitZoom(Ze)],We=[],ct=0,pt=nt.range(pe(Be),xe(tt),pe(it),xe(Ge));ct<pt.length;ct+=1){var gt=pt[ct],ut=nt.points[gt];We.push(ut.numPoints?ce(ut):this.points[ut.index])}return We},re.prototype.getChildren=function(He){var Ze=this._getOriginId(He),Be=this._getOriginZoom(He),Ge="No cluster with the specified id.",it=this.trees[Be];if(!it)throw new Error(Ge);var tt=it.points[Ze];if(!tt)throw new Error(Ge);for(var Re=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),Fe=[],nt=0,We=it.within(tt.x,tt.y,Re);nt<We.length;nt+=1){var ct=We[nt],pt=it.points[ct];pt.parentId===He&&Fe.push(pt.numPoints?ce(pt):this.points[pt.index])}if(Fe.length===0)throw new Error(Ge);return Fe},re.prototype.getLeaves=function(He,Ze,Be){Ze=Ze||10,Be=Be||0;var Ge=[];return this._appendLeaves(Ge,He,Ze,Be,0),Ge},re.prototype.getTile=function(He,Ze,Be){var Ge=this.trees[this._limitZoom(He)],it=Math.pow(2,He),tt=this.options,Re=tt.extent,Fe=tt.radius/Re,nt=(Be-Fe)/it,We=(Be+1+Fe)/it,ct={features:[]};return this._addTileFeatures(Ge.range((Ze-Fe)/it,nt,(Ze+1+Fe)/it,We),Ge.points,Ze,Be,it,ct),Ze===0&&this._addTileFeatures(Ge.range(1-Fe/it,nt,1,We),Ge.points,it,Be,it,ct),Ze===it-1&&this._addTileFeatures(Ge.range(0,nt,Fe/it,We),Ge.points,-1,Be,it,ct),ct.features.length?ct:null},re.prototype.getClusterExpansionZoom=function(He){for(var Ze=this._getOriginZoom(He)-1;Ze<=this.options.maxZoom;){var Be=this.getChildren(He);if(Ze++,Be.length!==1)break;He=Be[0].properties.cluster_id}return Ze},re.prototype._appendLeaves=function(He,Ze,Be,Ge,it){for(var tt=0,Re=this.getChildren(Ze);tt<Re.length;tt+=1){var Fe=Re[tt],nt=Fe.properties;if(nt&&nt.cluster?it+nt.point_count<=Ge?it+=nt.point_count:it=this._appendLeaves(He,nt.cluster_id,Be,Ge,it):it<Ge?it++:He.push(Fe),He.length===Be)break}return it},re.prototype._addTileFeatures=function(He,Ze,Be,Ge,it,tt){for(var Re=0,Fe=He;Re<Fe.length;Re+=1){var nt=Ze[Fe[Re]],We=nt.numPoints,ct={type:1,geometry:[[Math.round(this.options.extent*(nt.x*it-Be)),Math.round(this.options.extent*(nt.y*it-Ge))]],tags:We?he(nt):this.points[nt.index].properties},pt=void 0;We?pt=nt.id:this.options.generateId?pt=nt.index:this.points[nt.index].id&&(pt=this.points[nt.index].id),pt!==void 0&&(ct.id=pt),tt.features.push(ct)}},re.prototype._limitZoom=function(He){return Math.max(this.options.minZoom,Math.min(+He,this.options.maxZoom+1))},re.prototype._cluster=function(He,Ze){for(var Be=[],Ge=this.options,it=Ge.radius,tt=Ge.extent,Re=Ge.reduce,Fe=Ge.minPoints,nt=it/(tt*Math.pow(2,Ze)),We=0;We<He.length;We++){var ct=He[We];if(!(ct.zoom<=Ze)){ct.zoom=Ze;for(var pt=this.trees[Ze+1],gt=pt.within(ct.x,ct.y,nt),ut=ct.numPoints||1,kt=ut,yt=0,Mt=gt;yt<Mt.length;yt+=1){var Lt=Mt[yt],Ct=pt.points[Lt];Ct.zoom>Ze&&(kt+=Ct.numPoints||1)}if(kt>=Fe){for(var It=ct.x*ut,Wt=ct.y*ut,Nt=Re&&ut>1?this._map(ct,!0):null,Bt=(We<<5)+(Ze+1)+this.points.length,Ht=0,Qt=gt;Ht<Qt.length;Ht+=1){var Cn=Qt[Ht],Tn=pt.points[Cn];if(!(Tn.zoom<=Ze)){Tn.zoom=Ze;var hn=Tn.numPoints||1;It+=Tn.x*hn,Wt+=Tn.y*hn,Tn.parentId=Bt,Re&&(Nt||(Nt=this._map(ct,!0)),Re(Nt,this._map(Tn)))}}ct.parentId=Bt,Be.push(oe(It/kt,Wt/kt,Bt,kt,Nt))}else if(Be.push(ct),kt>1)for(var Zt=0,an=gt;Zt<an.length;Zt+=1){var $t=an[Zt],ln=pt.points[$t];ln.zoom<=Ze||(ln.zoom=Ze,Be.push(ln))}}}return Be},re.prototype._getOriginId=function(He){return He-this.points.length>>5},re.prototype._getOriginZoom=function(He){return(He-this.points.length)%32},re.prototype._map=function(He,Ze){if(He.numPoints)return Ze?be({},He.properties):He.properties;var Be=this.points[He.index].properties,Ge=this.options.map(Be);return Ze&&Ge===Be?be({},Ge):Ge},$e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$e.prototype.splitTile=function(He,Ze,Be,Ge,it,tt,Re){for(var Fe=[He,Ze,Be,Ge],nt=this.options,We=nt.debug;Fe.length;){Ge=Fe.pop(),Be=Fe.pop(),Ze=Fe.pop(),He=Fe.pop();var ct=1<<Ze,pt=wt(Ze,Be,Ge),gt=this.tiles[pt];if(!gt&&(We>1&&console.time("creation"),gt=this.tiles[pt]=vt(He,Ze,Be,Ge,nt),this.tileCoords.push({z:Ze,x:Be,y:Ge}),We)){We>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ze,Be,Ge,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var ut="z"+Ze;this.stats[ut]=(this.stats[ut]||0)+1,this.total++}if(gt.source=He,it){if(Ze===nt.maxZoom||Ze===it)continue;var kt=1<<it-Ze;if(Be!==Math.floor(tt/kt)||Ge!==Math.floor(Re/kt))continue}else if(Ze===nt.indexMaxZoom||gt.numPoints<=nt.indexMaxPoints)continue;if(gt.source=null,He.length!==0){We>1&&console.time("clipping");var yt,Mt,Lt,Ct,It,Wt,Nt=.5*nt.buffer/nt.extent,Bt=.5-Nt,Ht=.5+Nt,Qt=1+Nt;yt=Mt=Lt=Ct=null,It=De(He,ct,Be-Nt,Be+Ht,0,gt.minX,gt.maxX,nt),Wt=De(He,ct,Be+Bt,Be+Qt,0,gt.minX,gt.maxX,nt),He=null,It&&(yt=De(It,ct,Ge-Nt,Ge+Ht,1,gt.minY,gt.maxY,nt),Mt=De(It,ct,Ge+Bt,Ge+Qt,1,gt.minY,gt.maxY,nt),It=null),Wt&&(Lt=De(Wt,ct,Ge-Nt,Ge+Ht,1,gt.minY,gt.maxY,nt),Ct=De(Wt,ct,Ge+Bt,Ge+Qt,1,gt.minY,gt.maxY,nt),Wt=null),We>1&&console.timeEnd("clipping"),Fe.push(yt||[],Ze+1,2*Be,2*Ge),Fe.push(Mt||[],Ze+1,2*Be,2*Ge+1),Fe.push(Lt||[],Ze+1,2*Be+1,2*Ge),Fe.push(Ct||[],Ze+1,2*Be+1,2*Ge+1)}}},$e.prototype.getTile=function(He,Ze,Be){var Ge=this.options,it=Ge.extent,tt=Ge.debug;if(He<0||He>24)return null;var Re=1<<He,Fe=wt(He,Ze=(Ze%Re+Re)%Re,Be);if(this.tiles[Fe])return rt(this.tiles[Fe],it);tt>1&&console.log("drilling down to z%d-%d-%d",He,Ze,Be);for(var nt,We=He,ct=Ze,pt=Be;!nt&&We>0;)We--,ct=Math.floor(ct/2),pt=Math.floor(pt/2),nt=this.tiles[wt(We,ct,pt)];return nt&&nt.source?(tt>1&&console.log("found parent tile z%d-%d-%d",We,ct,pt),tt>1&&console.time("drilling down"),this.splitTile(nt.source,We,ct,pt,He,Ze,Be),tt>1&&console.timeEnd("drilling down"),this.tiles[Fe]?rt(this.tiles[Fe],it):null):null};var Ot=function(He){function Ze(Be,Ge,it,tt){He.call(this,Be,Ge,it,Pt),tt&&(this.loadGeoJSON=tt)}return He&&(Ze.__proto__=He),Ze.prototype=Object.create(He&&He.prototype),Ze.prototype.constructor=Ze,Ze.prototype.loadData=function(Be,Ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ge,this._pendingLoadDataParams=Be,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ze.prototype._loadData=function(){var Be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ge=this._pendingCallback,it=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var tt=!!(it&&it.request&&it.request.collectResourceTiming)&&new o.RequestPerformance(it.request);this.loadGeoJSON(it,function(Re,Fe){if(Re||!Fe)return Ge(Re);if(typeof Fe!="object")return Ge(new Error("Input data given to '"+it.source+"' is not a valid GeoJSON object."));u(Fe,!0);try{if(it.filter){var nt=o.createExpression(it.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nt.result==="error")throw new Error(nt.value.map(function(gt){return gt.key+": "+gt.message}).join(", "));var We=Fe.features.filter(function(gt){return nt.value.evaluate({zoom:0},gt)});Fe={type:"FeatureCollection",features:We}}Be._geoJSONIndex=it.cluster?new re(function(gt){var ut=gt.superclusterOptions,kt=gt.clusterProperties;if(!kt||!ut)return ut;for(var yt={},Mt={},Lt={accumulated:null,zoom:0},Ct={properties:null},It=Object.keys(kt),Wt=0,Nt=It;Wt<Nt.length;Wt+=1){var Bt=Nt[Wt],Ht=kt[Bt],Qt=Ht[0],Cn=Ht[1],Tn=o.createExpression(Cn),hn=o.createExpression(typeof Qt=="string"?[Qt,["accumulated"],["get",Bt]]:Qt);yt[Bt]=Tn.value,Mt[Bt]=hn.value}return ut.map=function(Zt){Ct.properties=Zt;for(var an={},$t=0,ln=It;$t<ln.length;$t+=1){var mn=ln[$t];an[mn]=yt[mn].evaluate(Lt,Ct)}return an},ut.reduce=function(Zt,an){Ct.properties=an;for(var $t=0,ln=It;$t<ln.length;$t+=1){var mn=ln[$t];Lt.accumulated=Zt[mn],Zt[mn]=Mt[mn].evaluate(Lt,Ct)}},ut}(it)).load(Fe.features):function(gt,ut){return new $e(gt,ut)}(Fe,it.geojsonVtOptions)}catch(gt){return Ge(gt)}Be.loaded={};var ct={};if(tt){var pt=tt.finish();pt&&(ct.resourceTiming={},ct.resourceTiming[it.source]=JSON.parse(JSON.stringify(pt)))}Ge(null,ct)})}},Ze.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ze.prototype.reloadTile=function(Be,Ge){var it=this.loaded,tt=Be.uid;return it&&it[tt]?He.prototype.reloadTile.call(this,Be,Ge):this.loadTile(Be,Ge)},Ze.prototype.loadGeoJSON=function(Be,Ge){if(Be.request)o.getJSON(Be.request,Ge);else{if(typeof Be.data!="string")return Ge(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));try{return Ge(null,JSON.parse(Be.data))}catch{return Ge(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."))}}},Ze.prototype.removeSource=function(Be,Ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ge()},Ze.prototype.getClusterExpansionZoom=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(it){Ge(it)}},Ze.prototype.getClusterChildren=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(it){Ge(it)}},Ze.prototype.getClusterLeaves=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(it){Ge(it)}},Ze}(r),At=function(He){var Ze=this;this.self=He,this.actor=new o.Actor(He,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:r,geojson:Ot},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Be,Ge){if(Ze.workerSourceTypes[Be])throw new Error('Worker source with name "'+Be+'" already registered.');Ze.workerSourceTypes[Be]=Ge},this.self.registerRTLTextPlugin=function(Be){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Be.applyArabicShaping,o.plugin.processBidirectionalText=Be.processBidirectionalText,o.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}};return At.prototype.setReferrer=function(He,Ze){this.referrer=Ze},At.prototype.setImages=function(He,Ze,Be){for(var Ge in this.availableImages[He]=Ze,this.workerSources[He]){var it=this.workerSources[He][Ge];for(var tt in it)it[tt].availableImages=Ze}Be()},At.prototype.setLayers=function(He,Ze,Be){this.getLayerIndex(He).replace(Ze),Be()},At.prototype.updateLayers=function(He,Ze,Be){this.getLayerIndex(He).update(Ze.layers,Ze.removedIds),Be()},At.prototype.loadTile=function(He,Ze,Be){this.getWorkerSource(He,Ze.type,Ze.source).loadTile(Ze,Be)},At.prototype.loadDEMTile=function(He,Ze,Be){this.getDEMWorkerSource(He,Ze.source).loadTile(Ze,Be)},At.prototype.reloadTile=function(He,Ze,Be){this.getWorkerSource(He,Ze.type,Ze.source).reloadTile(Ze,Be)},At.prototype.abortTile=function(He,Ze,Be){this.getWorkerSource(He,Ze.type,Ze.source).abortTile(Ze,Be)},At.prototype.removeTile=function(He,Ze,Be){this.getWorkerSource(He,Ze.type,Ze.source).removeTile(Ze,Be)},At.prototype.removeDEMTile=function(He,Ze){this.getDEMWorkerSource(He,Ze.source).removeTile(Ze)},At.prototype.removeSource=function(He,Ze,Be){if(this.workerSources[He]&&this.workerSources[He][Ze.type]&&this.workerSources[He][Ze.type][Ze.source]){var Ge=this.workerSources[He][Ze.type][Ze.source];delete this.workerSources[He][Ze.type][Ze.source],Ge.removeSource!==void 0?Ge.removeSource(Ze,Be):Be()}},At.prototype.loadWorkerSource=function(He,Ze,Be){try{this.self.importScripts(Ze.url),Be()}catch(Ge){Be(Ge.toString())}},At.prototype.syncRTLPluginState=function(He,Ze,Be){try{o.plugin.setState(Ze);var Ge=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Ge!=null){this.self.importScripts(Ge);var it=o.plugin.isParsed();Be(it?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ge),it)}}catch(tt){Be(tt.toString())}},At.prototype.getAvailableImages=function(He){var Ze=this.availableImages[He];return Ze||(Ze=[]),Ze},At.prototype.getLayerIndex=function(He){var Ze=this.layerIndexes[He];return Ze||(Ze=this.layerIndexes[He]=new h),Ze},At.prototype.getWorkerSource=function(He,Ze,Be){var Ge=this;if(this.workerSources[He]||(this.workerSources[He]={}),this.workerSources[He][Ze]||(this.workerSources[He][Ze]={}),!this.workerSources[He][Ze][Be]){var it={send:function(tt,Re,Fe){Ge.actor.send(tt,Re,Fe,He)}};this.workerSources[He][Ze][Be]=new this.workerSourceTypes[Ze](it,this.getLayerIndex(He),this.getAvailableImages(He))}return this.workerSources[He][Ze][Be]},At.prototype.getDEMWorkerSource=function(He,Ze){return this.demWorkerSources[He]||(this.demWorkerSources[He]={}),this.demWorkerSources[He][Ze]||(this.demWorkerSources[He][Ze]=new l),this.demWorkerSources[He][Ze]},At.prototype.enforceCacheSizeLimit=function(He,Ze){o.enforceCacheSizeLimit(Ze)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new At(self)),At}),k(0,function(o){var T=o.createCommonjsModule(function(B){function G(q){return!H(q)}function H(q){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ne,ue,ye=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(ye);try{ue=new Worker(Le),ne=!0}catch{ne=!1}return ue&&ue.terminate(),URL.revokeObjectURL(Le),ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ne=document.createElement("canvas");ne.width=ne.height=1;var ue=ne.getContext("2d");if(!ue)return!1;var ye=ue.getImageData(0,0,1,1);return ye&&ye.width===ne.width}()?($=q&&q.failIfMajorPerformanceCaveat,L[$]===void 0&&(L[$]=function(ne){var ue=function(Le){var Ie=document.createElement("canvas"),Ue=Object.create(G.webGLContextAttributes);return Ue.failIfMajorPerformanceCaveat=Le,Ie.probablySupportsContext?Ie.probablySupportsContext("webgl",Ue)||Ie.probablySupportsContext("experimental-webgl",Ue):Ie.supportsContext?Ie.supportsContext("webgl",Ue)||Ie.supportsContext("experimental-webgl",Ue):Ie.getContext("webgl",Ue)||Ie.getContext("experimental-webgl",Ue)}(ne);if(!ue)return!1;var ye=ue.createShader(ue.VERTEX_SHADER);return!(!ye||ue.isContextLost())&&(ue.shaderSource(ye,"void main() {}"),ue.compileShader(ye),ue.getShaderParameter(ye,ue.COMPILE_STATUS)===!0)}($)),L[$]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var $}B.exports?B.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=H);var L={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(B,G,H){var L=o.window.document.createElement(B);return G!==void 0&&(L.className=G),H&&H.appendChild(L),L},createNS:function(B,G){return o.window.document.createElementNS(B,G)}},h=o.window.document&&o.window.document.documentElement.style;function s(B){if(!h)return B[0];for(var G=0;G<B.length;G++)if(B[G]in h)return B[G];return B[0]}var t,a=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){h&&a&&(t=h[a],h[a]="none")},b.enableDrag=function(){h&&a&&(h[a]=t)};var n=s(["transform","WebkitTransform"]);b.setTransform=function(B,G){B.style[n]=G};var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){r=!0}});o.window.addEventListener("test",i,i),o.window.removeEventListener("test",i,i)}catch{r=!1}b.addEventListener=function(B,G,H,L){L===void 0&&(L={}),"passive"in L&&r?B.addEventListener(G,H,L):B.addEventListener(G,H,L.capture)},b.removeEventListener=function(B,G,H,L){L===void 0&&(L={}),"passive"in L&&r?B.removeEventListener(G,H,L):B.removeEventListener(G,H,L.capture)};var l=function(B){B.preventDefault(),B.stopPropagation(),o.window.removeEventListener("click",l,!0)};function u(B){var G=B.userImage;return!!(G&&G.render&&G.render())&&(B.data.replace(new Uint8Array(G.data.buffer)),!0)}b.suppressClick=function(){o.window.addEventListener("click",l,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",l,!0)},0)},b.mousePos=function(B,G){var H=B.getBoundingClientRect();return new o.Point(G.clientX-H.left-B.clientLeft,G.clientY-H.top-B.clientTop)},b.touchPos=function(B,G){for(var H=B.getBoundingClientRect(),L=[],q=0;q<G.length;q++)L.push(new o.Point(G[q].clientX-H.left-B.clientLeft,G[q].clientY-H.top-B.clientTop));return L},b.mouseButton=function(B){return o.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},b.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var p=function(B){function G(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var L=0,q=this.requestors;L<q.length;L+=1){var $=q[L],ne=$.ids,ue=$.callback;this._notify(ne,ue)}this.requestors=[]}},G.prototype.getImage=function(H){return this.images[H]},G.prototype.addImage=function(H,L){this._validate(H,L)&&(this.images[H]=L)},G.prototype._validate=function(H,L){var q=!0;return this._validateStretch(L.stretchX,L.data&&L.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),q=!1),this._validateStretch(L.stretchY,L.data&&L.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),q=!1),this._validateContent(L.content,L)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),q=!1),q},G.prototype._validateStretch=function(H,L){if(!H)return!0;for(var q=0,$=0,ne=H;$<ne.length;$+=1){var ue=ne[$];if(ue[0]<q||ue[1]<ue[0]||L<ue[1])return!1;q=ue[1]}return!0},G.prototype._validateContent=function(H,L){return!(H&&(H.length!==4||H[0]<0||L.data.width<H[0]||H[1]<0||L.data.height<H[1]||H[2]<0||L.data.width<H[2]||H[3]<0||L.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},G.prototype.updateImage=function(H,L){var q=this.images[H];L.version=q.version+1,this.images[H]=L,this.updatedImages[H]=!0},G.prototype.removeImage=function(H){var L=this.images[H];delete this.images[H],delete this.patterns[H],L.userImage&&L.userImage.onRemove&&L.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(H,L){var q=!0;if(!this.isLoaded())for(var $=0,ne=H;$<ne.length;$+=1){var ue=ne[$];this.images[ue]||(q=!1)}this.isLoaded()||q?this._notify(H,L):this.requestors.push({ids:H,callback:L})},G.prototype._notify=function(H,L){for(var q={},$=0,ne=H;$<ne.length;$+=1){var ue=ne[$];this.images[ue]||this.fire(new o.Event("styleimagemissing",{id:ue}));var ye=this.images[ue];ye?q[ue]={data:ye.data.clone(),pixelRatio:ye.pixelRatio,sdf:ye.sdf,version:ye.version,stretchX:ye.stretchX,stretchY:ye.stretchY,content:ye.content,hasRenderCallback:!!(ye.userImage&&ye.userImage.render)}:o.warnOnce('Image "'+ue+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}L(null,q)},G.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},G.prototype.getPattern=function(H){var L=this.patterns[H],q=this.getImage(H);if(!q)return null;if(L&&L.position.version===q.version)return L.position;if(L)L.position.version=q.version;else{var $={w:q.data.width+2,h:q.data.height+2,x:0,y:0},ne=new o.ImagePosition($,q);this.patterns[H]={bin:$,position:ne}}return this._updatePatternAtlas(),this.patterns[H].position},G.prototype.bind=function(H){var L=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(H,this.atlasImage,L.RGBA),this.atlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var H=[];for(var L in this.patterns)H.push(this.patterns[L].bin);var q=o.potpack(H),$=q.w,ne=q.h,ue=this.atlasImage;for(var ye in ue.resize({width:$||1,height:ne||1}),this.patterns){var Le=this.patterns[ye].bin,Ie=Le.x+1,Ue=Le.y+1,qe=this.images[ye].data,Qe=qe.width,lt=qe.height;o.RGBAImage.copy(qe,ue,{x:0,y:0},{x:Ie,y:Ue},{width:Qe,height:lt}),o.RGBAImage.copy(qe,ue,{x:0,y:lt-1},{x:Ie,y:Ue-1},{width:Qe,height:1}),o.RGBAImage.copy(qe,ue,{x:0,y:0},{x:Ie,y:Ue+lt},{width:Qe,height:1}),o.RGBAImage.copy(qe,ue,{x:Qe-1,y:0},{x:Ie-1,y:Ue},{width:1,height:lt}),o.RGBAImage.copy(qe,ue,{x:0,y:0},{x:Ie+Qe,y:Ue},{width:1,height:lt})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(H){for(var L=0,q=H;L<q.length;L+=1){var $=q[L];if(!this.callbackDispatchedThisFrame[$]){this.callbackDispatchedThisFrame[$]=!0;var ne=this.images[$];u(ne)&&this.updateImage($,ne)}}},G}(o.Evented),c=g,x=g,d=1e20;function g(B,G,H,L,q,$){this.fontSize=B||24,this.buffer=G===void 0?3:G,this.cutoff=L||.25,this.fontFamily=q||"sans-serif",this.fontWeight=$||"normal",this.radius=H||8;var ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ne*ne),this.gridInner=new Float64Array(ne*ne),this.f=new Float64Array(ne),this.d=new Float64Array(ne),this.z=new Float64Array(ne+1),this.v=new Int16Array(ne),this.middle=Math.round(ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(B,G,H,L,q,$,ne){for(var ue=0;ue<G;ue++){for(var ye=0;ye<H;ye++)L[ye]=B[ye*G+ue];for(y(L,q,$,ne,H),ye=0;ye<H;ye++)B[ye*G+ue]=q[ye]}for(ye=0;ye<H;ye++){for(ue=0;ue<G;ue++)L[ue]=B[ye*G+ue];for(y(L,q,$,ne,G),ue=0;ue<G;ue++)B[ye*G+ue]=Math.sqrt(q[ue])}}function y(B,G,H,L,q){H[0]=0,L[0]=-1e20,L[1]=1e20;for(var $=1,ne=0;$<q;$++){for(var ue=(B[$]+$*$-(B[H[ne]]+H[ne]*H[ne]))/(2*$-2*H[ne]);ue<=L[ne];)ne--,ue=(B[$]+$*$-(B[H[ne]]+H[ne]*H[ne]))/(2*$-2*H[ne]);H[++ne]=$,L[ne]=ue,L[ne+1]=1e20}for($=0,ne=0;$<q;$++){for(;L[ne+1]<$;)ne++;G[$]=($-H[ne])*($-H[ne])+B[H[ne]]}}g.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),L=0;L<this.size*this.size;L++){var q=G.data[4*L+3]/255;this.gridOuter[L]=q===1?0:q===0?d:Math.pow(Math.max(0,.5-q),2),this.gridInner[L]=q===1?d:q===0?0:Math.pow(Math.max(0,q-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),L=0;L<this.size*this.size;L++){var $=this.gridOuter[L]-this.gridInner[L];H[L]=Math.max(0,Math.min(255,Math.round(255-255*($/this.radius+this.cutoff))))}return H},c.default=x;var m=function(B,G){this.requestManager=B,this.localIdeographFontFamily=G,this.entries={}};m.prototype.setURL=function(B){this.url=B},m.prototype.getGlyphs=function(B,G){var H=this,L=[];for(var q in B)for(var $=0,ne=B[q];$<ne.length;$+=1){var ue=ne[$];L.push({stack:q,id:ue})}o.asyncAll(L,function(ye,Le){var Ie=ye.stack,Ue=ye.id,qe=H.entries[Ie];qe||(qe=H.entries[Ie]={glyphs:{},requests:{},ranges:{}});var Qe=qe.glyphs[Ue];if(Qe===void 0){if(Qe=H._tinySDF(qe,Ie,Ue))return qe.glyphs[Ue]=Qe,void Le(null,{stack:Ie,id:Ue,glyph:Qe});var lt=Math.floor(Ue/256);if(256*lt>65535)Le(new Error("glyphs > 65535 not supported"));else if(qe.ranges[lt])Le(null,{stack:Ie,id:Ue,glyph:Qe});else{var ft=qe.requests[lt];ft||(ft=qe.requests[lt]=[],m.loadGlyphRange(Ie,lt,H.url,H.requestManager,function(xt,St){if(St){for(var Tt in St)H._doesCharSupportLocalGlyph(+Tt)||(qe.glyphs[+Tt]=St[+Tt]);qe.ranges[lt]=!0}for(var zt=0,Et=ft;zt<Et.length;zt+=1)(0,Et[zt])(xt,St);delete qe.requests[lt]})),ft.push(function(xt,St){xt?Le(xt):St&&Le(null,{stack:Ie,id:Ue,glyph:St[Ue]||null})})}}else Le(null,{stack:Ie,id:Ue,glyph:Qe})},function(ye,Le){if(ye)G(ye);else if(Le){for(var Ie={},Ue=0,qe=Le;Ue<qe.length;Ue+=1){var Qe=qe[Ue],lt=Qe.stack,ft=Qe.id,xt=Qe.glyph;(Ie[lt]||(Ie[lt]={}))[ft]=xt&&{id:xt.id,bitmap:xt.bitmap.clone(),metrics:xt.metrics}}G(null,Ie)}})},m.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](B)||o.isChar["Hangul Syllables"](B)||o.isChar.Hiragana(B)||o.isChar.Katakana(B))},m.prototype._tinySDF=function(B,G,H){var L=this.localIdeographFontFamily;if(L&&this._doesCharSupportLocalGlyph(H)){var q=B.tinySDF;if(!q){var $="400";/bold/i.test(G)?$="900":/medium/i.test(G)?$="500":/light/i.test(G)&&($="200"),q=B.tinySDF=new m.TinySDF(24,3,8,.25,L,$)}return{id:H,bitmap:new o.AlphaImage({width:30,height:30},q.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(B,G,H,L,q){var $=256*G,ne=$+255,ue=L.transformRequest(L.normalizeGlyphsURL(H).replace("{fontstack}",B).replace("{range}",$+"-"+ne),o.ResourceType.Glyphs);o.getArrayBuffer(ue,function(ye,Le){if(ye)q(ye);else if(Le){for(var Ie={},Ue=0,qe=o.parseGlyphPBF(Le);Ue<qe.length;Ue+=1){var Qe=qe[Ue];Ie[Qe.id]=Qe}q(null,Ie)}})},m.TinySDF=c;var _=function(){this.specification=o.styleSpec.light.position};_.prototype.possiblyEvaluate=function(B,G){return o.sphericalToCartesian(B.expression.evaluate(G))},_.prototype.interpolate=function(B,G,H){return{x:o.number(B.x,G.x,H),y:o.number(B.y,G.y,H),z:o.number(B.z,G.z,H)}};var f=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new _,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),S="-transition",w=function(B){function G(H){B.call(this),this._transitionable=new o.Transitionable(f),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(H,L){if(L===void 0&&(L={}),!this._validate(o.validateLight,H,L))for(var q in H){var $=H[q];o.endsWith(q,S)?this._transitionable.setTransition(q.slice(0,-11),$):this._transitionable.setValue(q,$)}},G.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},G.prototype._validate=function(H,L,q){return(!q||q.validate!==!1)&&o.emitValidationErrors(this,H.call(o.validateStyle,o.extend({value:L,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},G}(o.Evented),E=function(B,G){this.width=B,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(B,G){var H=B.join(",")+String(G);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(B,G)),this.dashEntry[H]},E.prototype.getDashRanges=function(B,G,H){var L=[],q=B.length%2==1?-B[B.length-1]*H:0,$=B[0]*H,ne=!0;L.push({left:q,right:$,isDash:ne,zeroLength:B[0]===0});for(var ue=B[0],ye=1;ye<B.length;ye++){ne=!ne;var Le=B[ye];q=ue*H,$=(ue+=Le)*H,L.push({left:q,right:$,isDash:ne,zeroLength:Le===0})}return L},E.prototype.addRoundDash=function(B,G,H){for(var L=G/2,q=-H;q<=H;q++)for(var $=this.nextRow+H+q,ne=this.width*$,ue=0,ye=B[ue],Le=0;Le<this.width;Le++){Le/ye.right>1&&(ye=B[++ue]);var Ie=Math.abs(Le-ye.left),Ue=Math.abs(Le-ye.right),qe=Math.min(Ie,Ue),Qe=void 0,lt=q/H*(L+1);if(ye.isDash){var ft=L-Math.abs(lt);Qe=Math.sqrt(qe*qe+ft*ft)}else Qe=L-Math.sqrt(qe*qe+lt*lt);this.data[ne+Le]=Math.max(0,Math.min(255,Qe+128))}},E.prototype.addRegularDash=function(B){for(var G=B.length-1;G>=0;--G){var H=B[G],L=B[G+1];H.zeroLength?B.splice(G,1):L&&L.isDash===H.isDash&&(L.left=H.left,B.splice(G,1))}var q=B[0],$=B[B.length-1];q.isDash===$.isDash&&(q.left=$.left-this.width,$.right=q.right+this.width);for(var ne=this.width*this.nextRow,ue=0,ye=B[ue],Le=0;Le<this.width;Le++){Le/ye.right>1&&(ye=B[++ue]);var Ie=Math.abs(Le-ye.left),Ue=Math.abs(Le-ye.right),qe=Math.min(Ie,Ue),Qe=ye.isDash?qe:-qe;this.data[ne+Le]=Math.max(0,Math.min(255,Qe+128))}},E.prototype.addDash=function(B,G){var H=G?7:0,L=2*H+1;if(this.nextRow+L>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var q=0,$=0;$<B.length;$++)q+=B[$];if(q!==0){var ne=this.width/q,ue=this.getDashRanges(B,this.width,ne);G?this.addRoundDash(ue,ne,H):this.addRegularDash(ue)}var ye={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:q};return this.nextRow+=L,this.dirty=!0,ye},E.prototype.bind=function(B){var G=B.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var O=function B(G,H){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var L=this.workerPool.acquire(this.id),q=0;q<L.length;q++){var $=L[q],ne=new B.Actor($,H,this.id);ne.name="Worker "+q,this.actors.push(ne)}};function C(B,G,H){var L=function(q,$){if(q)return H(q);if($){var ne=o.pick(o.extend($,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);$.vector_layers&&(ne.vectorLayers=$.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(function(ue){return ue.id})),ne.tiles=G.canonicalizeTileset(ne,B.url),H(null,ne)}};return B.url?o.getJSON(G.transformRequest(G.normalizeSourceURL(B.url),o.ResourceType.Source),L):o.browser.frame(function(){return L(null,B)})}O.prototype.broadcast=function(B,G,H){H=H||function(){},o.asyncAll(this.actors,function(L,q){L.send(B,G,q)},H)},O.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},O.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},O.Actor=o.Actor;var P=function(B,G,H){this.bounds=o.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=G||0,this.maxzoom=H||24};P.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},P.prototype.contains=function(B){var G=Math.pow(2,B.z),H=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*G),L=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*G),q=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*G),$=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*G);return B.x>=H&&B.x<q&&B.y>=L&&B.y<$};var R=function(B){function G(H,L,q,$){if(B.call(this),this.id=H,this.dispatcher=q,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(L,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},L),this._collectResourceTiming=L.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent($)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,q){H._tileJSONRequest=null,H._loaded=!0,L?H.fire(new o.ErrorEvent(L)):q&&(o.extend(H,q),q.bounds&&(H.tileBounds=new P(q.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(q.tiles,H.map._requestManager._customAccessToken),o.postMapLoadEvent(q.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setSourceProperty=function(H){this._tileJSONRequest&&this._tileJSONRequest.cancel(),H(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},G.prototype.setTiles=function(H){var L=this;return this.setSourceProperty(function(){L._options.tiles=H}),this},G.prototype.setUrl=function(H){var L=this;return this.setSourceProperty(function(){L.url=H,L._options.url=H}),this},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.loadTile=function(H,L){var q=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),$={request:this.map._requestManager.transformRequest(q,o.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ne(ue,ye){return delete H.request,H.aborted?L(null):ue&&ue.status!==404?L(ue):(ye&&ye.resourceTiming&&(H.resourceTiming=ye.resourceTiming),this.map._refreshExpiredTiles&&ye&&H.setExpiryData(ye),H.loadVectorData(ye,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),L(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}$.request.collectResourceTiming=this._collectResourceTiming,H.actor&&H.state!=="expired"?H.state==="loading"?H.reloadCallback=L:H.request=H.actor.send("reloadTile",$,ne.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",$,ne.bind(this)))},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(o.Evented),j=function(B){function G(H,L,q,$){B.call(this),this.id=H,this.dispatcher=q,this.setEventedParent($),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},L),o.extend(this,o.pick(L,["url","scheme","tileSize"]))}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,q){H._tileJSONRequest=null,H._loaded=!0,L?H.fire(new o.ErrorEvent(L)):q&&(o.extend(H,q),q.bounds&&(H.tileBounds=new P(q.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(q.tiles),o.postMapLoadEvent(q.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.loadTile=function(H,L){var q=this,$=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=o.getImage(this.map._requestManager.transformRequest($,o.ResourceType.Tile),function(ne,ue){if(delete H.request,H.aborted)H.state="unloaded",L(null);else if(ne)H.state="errored",L(ne);else if(ue){q.map._refreshExpiredTiles&&H.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var ye=q.map.painter.context,Le=ye.gl;H.texture=q.map.painter.getTileTexture(ue.width),H.texture?H.texture.update(ue,{useMipmap:!0}):(H.texture=new o.Texture(ye,ue,Le.RGBA,{useMipmap:!0}),H.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),ye.extTextureFilterAnisotropic&&Le.texParameterf(Le.TEXTURE_2D,ye.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ye.extTextureFilterAnisotropicMax)),H.state="loaded",o.cacheEntryPossiblyAdded(q.dispatcher),L(null)}})},G.prototype.abortTile=function(H,L){H.request&&(H.request.cancel(),delete H.request),L()},G.prototype.unloadTile=function(H,L){H.texture&&this.map.painter.saveTileTexture(H.texture),L()},G.prototype.hasTransition=function(){return!1},G}(o.Evented),D=function(B){function G(H,L,q,$){B.call(this,H,L,q,$),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},L),this.encoding=L.encoding||"mapbox"}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(H,L){var q=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function $(ne,ue){ne&&(H.state="errored",L(ne)),ue&&(H.dem=ue,H.needsHillshadePrepare=!0,H.state="loaded",L(null))}H.request=o.getImage(this.map._requestManager.transformRequest(q,o.ResourceType.Tile),(function(ne,ue){if(delete H.request,H.aborted)H.state="unloaded",L(null);else if(ne)H.state="errored",L(ne);else if(ue){this.map._refreshExpiredTiles&&H.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var ye=o.window.ImageBitmap&&ue instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?ue:o.browser.getImageData(ue,1),Le={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:ye,encoding:this.encoding};H.actor&&H.state!=="expired"||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",Le,$.bind(this)))}}).bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},G.prototype._getNeighboringTiles=function(H){var L=H.canonical,q=Math.pow(2,L.z),$=(L.x-1+q)%q,ne=L.x===0?H.wrap-1:H.wrap,ue=(L.x+1+q)%q,ye=L.x+1===q?H.wrap+1:H.wrap,Le={};return Le[new o.OverscaledTileID(H.overscaledZ,ne,L.z,$,L.y).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,ye,L.z,ue,L.y).key]={backfilled:!1},L.y>0&&(Le[new o.OverscaledTileID(H.overscaledZ,ne,L.z,$,L.y-1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,H.wrap,L.z,L.x,L.y-1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,ye,L.z,ue,L.y-1).key]={backfilled:!1}),L.y+1<q&&(Le[new o.OverscaledTileID(H.overscaledZ,ne,L.z,$,L.y+1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,H.wrap,L.z,L.x,L.y+1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,ye,L.z,ue,L.y+1).key]={backfilled:!1}),Le},G.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},G}(j),N=function(B){function G(H,L,q,$){B.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=q.getActor(),this.setEventedParent($),this._data=L.data,this._options=o.extend({},L),this._collectResourceTiming=L.collectResourceTiming,this._resourceTiming=[],L.maxzoom!==void 0&&(this.maxzoom=L.maxzoom),L.type&&(this.type=L.type),L.attribution&&(this.attribution=L.attribution),this.promoteId=L.promoteId;var ne=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:L.cluster||!1,geojsonVtOptions:{buffer:(L.buffer!==void 0?L.buffer:128)*ne,tolerance:(L.tolerance!==void 0?L.tolerance:.375)*ne,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:L.lineMetrics||!1,generateId:L.generateId||!1},superclusterOptions:{maxZoom:L.clusterMaxZoom!==void 0?Math.min(L.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,L.clusterMinPoints||2),extent:o.EXTENT,radius:(L.clusterRadius||50)*ne,log:!1,generateId:L.generateId||!1},clusterProperties:L.clusterProperties,filter:L.filter},L.workerOptions)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L)H.fire(new o.ErrorEvent(L));else{var q={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(q.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new o.Event("data",q))}})},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setData=function(H){var L=this;return this._data=H,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(q){if(q)L.fire(new o.ErrorEvent(q));else{var $={dataType:"source",sourceDataType:"content"};L._collectResourceTiming&&L._resourceTiming&&L._resourceTiming.length>0&&($.resourceTiming=L._resourceTiming,L._resourceTiming=[]),L.fire(new o.Event("data",$))}}),this},G.prototype.getClusterExpansionZoom=function(H,L){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},L),this},G.prototype.getClusterChildren=function(H,L){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},L),this},G.prototype.getClusterLeaves=function(H,L,q,$){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:L,offset:q},$),this},G.prototype._updateWorkerData=function(H){var L=this;this._loaded=!1;var q=o.extend({},this.workerOptions),$=this._data;typeof $=="string"?(q.request=this.map._requestManager.transformRequest(o.browser.resolveURL($),o.ResourceType.Source),q.request.collectResourceTiming=this._collectResourceTiming):q.data=JSON.stringify($),this.actor.send(this.type+".loadData",q,function(ne,ue){L._removed||ue&&ue.abandoned||(L._loaded=!0,ue&&ue.resourceTiming&&ue.resourceTiming[L.id]&&(L._resourceTiming=ue.resourceTiming[L.id].slice(0)),L.actor.send(L.type+".coalesce",{source:q.source},null),H(ne))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(H,L){var q=this,$=H.actor?"reloadTile":"loadTile";H.actor=this.actor;var ne={type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};H.request=this.actor.send($,ne,function(ue,ye){return delete H.request,H.unloadVectorData(),H.aborted?L(null):ue?L(ue):(H.loadVectorData(ye,q.map.painter,$==="reloadTile"),L(null))})},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},G.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(o.Evented),W=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(B){function G(H,L,q,$){B.call(this),this.id=H,this.dispatcher=q,this.coordinates=L.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent($),this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(H,L){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function($,ne){q._loaded=!0,$?q.fire(new o.ErrorEvent($)):ne&&(q.image=ne,H&&(q.coordinates=H),L&&L(),q._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(H){var L=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){L.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setCoordinates=function(H){var L=this;this.coordinates=H;var q=H.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(ne){for(var ue=1/0,ye=1/0,Le=-1/0,Ie=-1/0,Ue=0,qe=ne;Ue<qe.length;Ue+=1){var Qe=qe[Ue];ue=Math.min(ue,Qe.x),ye=Math.min(ye,Qe.y),Le=Math.max(Le,Qe.x),Ie=Math.max(Ie,Qe.y)}var lt=Le-ue,ft=Ie-ye,xt=Math.max(lt,ft),St=Math.max(0,Math.floor(-Math.log(xt)/Math.LN2)),Tt=Math.pow(2,St);return new o.CanonicalTileID(St,Math.floor((ue+Le)/2*Tt),Math.floor((ye+Ie)/2*Tt))}(q),this.minzoom=this.maxzoom=this.tileID.z;var $=q.map(function(ne){return L.tileID.getTilePoint(ne)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack($[0].x,$[0].y,0,0),this._boundsArray.emplaceBack($[1].x,$[1].y,o.EXTENT,0),this._boundsArray.emplaceBack($[3].x,$[3].y,0,o.EXTENT),this._boundsArray.emplaceBack($[2].x,$[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var H=this.map.painter.context,L=H.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(H,this.image,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var $=this.tiles[q];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},G.prototype.loadTile=function(H,L){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},L(null)):(H.state="errored",L(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(o.Evented),V=function(B){function G(H,L,q,$){B.call(this,H,L,q,$),this.roundZoom=!0,this.type="video",this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1;var L=this.options;this.urls=[];for(var q=0,$=L.urls;q<$.length;q+=1){var ne=$[q];this.urls.push(this.map._requestManager.transformRequest(ne,o.ResourceType.Source).url)}o.getVideo(this.urls,function(ue,ye){H._loaded=!0,ue?H.fire(new o.ErrorEvent(ue)):ye&&(H.video=ye,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(H){if(this.video){var L=this.video.seekable;H<L.start(0)||H>L.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+L.start(0)+" and "+L.end(0)+"-second mark."))):this.video.currentTime=H}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var H=this.map.painter.context,L=H.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE),L.texSubImage2D(L.TEXTURE_2D,0,0,0,L.RGBA,L.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(H,this.video,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var $=this.tiles[q];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(F),U=function(B){function G(H,L,q,$){B.call(this,H,L,q,$),L.coordinates?Array.isArray(L.coordinates)&&L.coordinates.length===4&&!L.coordinates.some(function(ne){return!Array.isArray(ne)||ne.length!==2||ne.some(function(ue){return typeof ue!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "coordinates"'))),L.animate&&typeof L.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),L.canvas?typeof L.canvas=="string"||L.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=L,this.animate=L.animate===void 0||L.animate}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var L=this.map.painter.context,q=L.gl;for(var $ in this.boundsBuffer||(this.boundsBuffer=L.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(L,this.canvas,q.RGBA,{premultiply:!0}),this.tiles){var ne=this.tiles[$];ne.state!=="loaded"&&(ne.state="loaded",ne.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var H=0,L=[this.canvas.width,this.canvas.height];H<L.length;H+=1){var q=L[H];if(isNaN(q)||q<=0)return!0}return!1},G}(F),te={vector:R,raster:j,"raster-dem":D,geojson:N,video:V,image:F,canvas:U};function J(B,G){var H=o.identity([]);return o.translate(H,H,[1,1,0]),o.scale(H,H,[.5*B.width,.5*B.height,1]),o.multiply(H,H,B.calculatePosMatrix(G.toUnwrapped()))}function X(B,G,H,L,q,$){var ne=function(ft,xt,St){if(ft)for(var Tt=0,zt=ft;Tt<zt.length;Tt+=1){var Et=xt[zt[Tt]];if(Et&&Et.source===St&&Et.type==="fill-extrusion")return!0}else for(var Yt in xt){var qt=xt[Yt];if(qt.source===St&&qt.type==="fill-extrusion")return!0}return!1}(q&&q.layers,G,B.id),ue=$.maxPitchScaleFactor(),ye=B.tilesIn(L,ue,ne);ye.sort(K);for(var Le=[],Ie=0,Ue=ye;Ie<Ue.length;Ie+=1){var qe=Ue[Ie];Le.push({wrappedTileID:qe.tileID.wrapped().key,queryResults:qe.tile.queryRenderedFeatures(G,H,B._state,qe.queryGeometry,qe.cameraQueryGeometry,qe.scale,q,$,ue,J(B.transform,qe.tileID))})}var Qe=function(ft){for(var xt={},St={},Tt=0,zt=ft;Tt<zt.length;Tt+=1){var Et=zt[Tt],Yt=Et.queryResults,qt=Et.wrappedTileID,Ft=St[qt]=St[qt]||{};for(var fn in Yt)for(var dn=Yt[fn],kn=Ft[fn]=Ft[fn]||{},Sn=xt[fn]=xt[fn]||[],Bn=0,$n=dn;Bn<$n.length;Bn+=1){var sr=$n[Bn];kn[sr.featureIndex]||(kn[sr.featureIndex]=!0,Sn.push(sr))}}return xt}(Le);for(var lt in Qe)Qe[lt].forEach(function(ft){var xt=ft.feature,St=B.getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=St});return Qe}function K(B,G){var H=B.tileID,L=G.tileID;return H.overscaledZ-L.overscaledZ||H.canonical.y-L.canonical.y||H.wrap-L.wrap||H.canonical.x-L.canonical.x}var Q=function(B,G){this.max=B,this.onRemove=G,this.reset()};Q.prototype.reset=function(){for(var B in this.data)for(var G=0,H=this.data[B];G<H.length;G+=1){var L=H[G];L.timeout&&clearTimeout(L.timeout),this.onRemove(L.value)}return this.data={},this.order=[],this},Q.prototype.add=function(B,G,H){var L=this,q=B.wrapped().key;this.data[q]===void 0&&(this.data[q]=[]);var $={value:G,timeout:void 0};if(H!==void 0&&($.timeout=setTimeout(function(){L.remove(B,$)},H)),this.data[q].push($),this.order.push(q),this.order.length>this.max){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},Q.prototype.has=function(B){return B.wrapped().key in this.data},Q.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},Q.prototype._getAndRemoveByKey=function(B){var G=this.data[B].shift();return G.timeout&&clearTimeout(G.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),G.value},Q.prototype.getByKey=function(B){var G=this.data[B];return G?G[0].value:null},Q.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},Q.prototype.remove=function(B,G){if(!this.has(B))return this;var H=B.wrapped().key,L=G===void 0?0:this.data[H].indexOf(G),q=this.data[H][L];return this.data[H].splice(L,1),q.timeout&&clearTimeout(q.timeout),this.data[H].length===0&&delete this.data[H],this.onRemove(q.value),this.order.splice(this.order.indexOf(H),1),this},Q.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},Q.prototype.filter=function(B){var G=[];for(var H in this.data)for(var L=0,q=this.data[H];L<q.length;L+=1){var $=q[L];B($.value)||G.push($)}for(var ne=0,ue=G;ne<ue.length;ne+=1){var ye=ue[ne];this.remove(ye.value.tileID,ye)}};var Z=function(B,G,H){this.context=B;var L=B.gl;this.buffer=L.createBuffer(),this.dynamicDraw=!!H,this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),L.bufferData(L.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};Z.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Z.prototype.updateData=function(B){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},Z.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},oe=function(B,G,H,L){this.length=G.length,this.attributes=H,this.itemSize=G.bytesPerElement,this.dynamicDraw=L,this.context=B;var q=B.gl;this.buffer=q.createBuffer(),B.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};oe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},oe.prototype.updateData=function(B){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,B.arrayBuffer)},oe.prototype.enableAttributes=function(B,G){for(var H=0;H<this.attributes.length;H++){var L=this.attributes[H],q=G.attributes[L.name];q!==void 0&&B.enableVertexAttribArray(q)}},oe.prototype.setVertexAttribPointers=function(B,G,H){for(var L=0;L<this.attributes.length;L++){var q=this.attributes[L],$=G.attributes[q.name];$!==void 0&&B.vertexAttribPointer($,q.components,B[re[q.type]],!1,this.itemSize,q.offset+this.itemSize*(H||0))}},oe.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(B){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var ce=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(H){var L=this.current;(H.r!==L.r||H.g!==L.g||H.b!==L.b||H.a!==L.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ae),he=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},G}(ae),pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},G}(ae),xe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||H[3]!==L[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ae),be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},G}(ae),ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},G}(ae),ge=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(H){var L=this.current;(H.func!==L.func||H.ref!==L.ref||H.mask!==L.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},G}(ae),we=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},G}(ae),_e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this.current=H,this.dirty=!1}},G}(ae),se=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ae),ie=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this.current=H,this.dirty=!1}},G}(ae),fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},G}(ae),Ee=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.BLEND):L.disable(L.BLEND),this.current=H,this.dirty=!1}},G}(ae),Te=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ae),Ae=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(H){var L=this.current;(H.r!==L.r||H.g!==L.g||H.b!==L.b||H.a!==L.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ae),Se=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},G}(ae),Oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this.current=H,this.dirty=!1}},G}(ae),De=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},G}(ae),de=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},G}(ae),me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},G}(ae),Me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},G}(ae),ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||H[3]!==L[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ae),Pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},G}(ae),Ne=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindRenderbuffer(L.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(ae),Ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindTexture(L.TEXTURE_2D,H),this.current=H,this.dirty=!1}},G}(ae),Ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindBuffer(L.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},G}(ae),at=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){var L=this.gl;L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},G}(ae),rt=function(B){function G(H){B.call(this,H),this.vao=H.extVertexArrayObject}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},G}(ae),dt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},G}(ae),vt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},G}(ae),ht=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},G}(ae),et=function(B){function G(H,L){B.call(this,H),this.context=H,this.parent=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(ae),$e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},G}(et),wt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(et),Pt=function(B,G,H,L){this.context=B,this.width=G,this.height=H;var q=B.gl,$=this.framebuffer=q.createFramebuffer();this.colorAttachment=new $e(B,$),L&&(this.depthAttachment=new wt(B,$))};Pt.prototype.destroy=function(){var B=this.context.gl,G=this.colorAttachment.get();if(G&&B.deleteTexture(G),this.depthAttachment){var H=this.depthAttachment.get();H&&B.deleteRenderbuffer(H)}B.deleteFramebuffer(this.framebuffer)};var Ot=function(B,G,H){this.func=B,this.mask=G,this.range=H};Ot.ReadOnly=!1,Ot.ReadWrite=!0,Ot.disabled=new Ot(519,Ot.ReadOnly,[0,1]);var At=7680,He=function(B,G,H,L,q,$){this.test=B,this.ref=G,this.mask=H,this.fail=L,this.depthFail=q,this.pass=$};He.disabled=new He({func:519,mask:0},0,0,At,At,At);var Ze=function(B,G,H){this.blendFunction=B,this.blendColor=G,this.mask=H};Ze.Replace=[1,0],Ze.disabled=new Ze(Ze.Replace,o.Color.transparent,[!1,!1,!1,!1]),Ze.unblended=new Ze(Ze.Replace,o.Color.transparent,[!0,!0,!0,!0]),Ze.alphaBlended=new Ze([1,771],o.Color.transparent,[!0,!0,!0,!0]);var Be=function(B,G,H){this.enable=B,this.mode=G,this.frontFace=H};Be.disabled=new Be(!1,1029,2305),Be.backCCW=new Be(!0,1029,2305);var Ge=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ce(this),this.clearDepth=new he(this),this.clearStencil=new pe(this),this.colorMask=new xe(this),this.depthMask=new be(this),this.stencilMask=new ve(this),this.stencilFunc=new ge(this),this.stencilOp=new we(this),this.stencilTest=new _e(this),this.depthRange=new se(this),this.depthTest=new ie(this),this.depthFunc=new fe(this),this.blend=new Ee(this),this.blendFunc=new Te(this),this.blendColor=new Ae(this),this.blendEquation=new Se(this),this.cullFace=new Oe(this),this.cullFaceSide=new De(this),this.frontFace=new de(this),this.program=new me(this),this.activeTexture=new Me(this),this.viewport=new ze(this),this.bindFramebuffer=new Pe(this),this.bindRenderbuffer=new Ne(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new Ye(this),this.bindElementBuffer=new at(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rt(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new ht(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)};Ge.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ge.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ge.prototype.createIndexBuffer=function(B,G){return new Z(this,B,G)},Ge.prototype.createVertexBuffer=function(B,G,H){return new oe(this,B,G,H)},Ge.prototype.createRenderbuffer=function(B,G,H){var L=this.gl,q=L.createRenderbuffer();return this.bindRenderbuffer.set(q),L.renderbufferStorage(L.RENDERBUFFER,B,G,H),this.bindRenderbuffer.set(null),q},Ge.prototype.createFramebuffer=function(B,G,H){return new Pt(this,B,G,H)},Ge.prototype.clear=function(B){var G=B.color,H=B.depth,L=this.gl,q=0;G&&(q|=L.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),H!==void 0&&(q|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),L.clear(q)},Ge.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},Ge.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},Ge.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},Ge.prototype.setColorMode=function(B){o.deepEqual(B.blendFunction,Ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},Ge.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var it=function(B){function G(H,L,q){var $=this;B.call(this),this.id=H,this.dispatcher=q,this.on("data",function(ne){ne.dataType==="source"&&ne.sourceDataType==="metadata"&&($._sourceLoaded=!0),$._sourceLoaded&&!$._paused&&ne.dataType==="source"&&ne.sourceDataType==="content"&&($.reload(),$.transform&&$.update($.transform))}),this.on("error",function(){$._sourceErrored=!0}),this._source=function(ne,ue,ye,Le){var Ie=new te[ue.type](ne,ue,ye,Le);if(Ie.id!==ne)throw new Error("Expected Source id to be "+ne+" instead of "+Ie.id);return o.bindAll(["load","abort","unload","serialize","prepare"],Ie),Ie}(H,L,q,this),this._tiles={},this._cache=new Q(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},G.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var L=this._tiles[H];if(L.state!=="loaded"&&L.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(H,L){return this._source.loadTile(H,L)},G.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},G.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(H){for(var L in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var q=this._tiles[L];q.upload(H),q.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return o.values(this._tiles).map(function(H){return H.tileID}).sort(tt).map(function(H){return H.key})},G.prototype.getRenderableIds=function(H){var L=this,q=[];for(var $ in this._tiles)this._isIdRenderable($,H)&&q.push(this._tiles[$]);return H?q.sort(function(ne,ue){var ye=ne.tileID,Le=ue.tileID,Ie=new o.Point(ye.canonical.x,ye.canonical.y)._rotate(L.transform.angle),Ue=new o.Point(Le.canonical.x,Le.canonical.y)._rotate(L.transform.angle);return ye.overscaledZ-Le.overscaledZ||Ue.y-Ie.y||Ue.x-Ie.x}).map(function(ne){return ne.tileID.key}):q.map(function(ne){return ne.tileID}).sort(tt).map(function(ne){return ne.key})},G.prototype.hasRenderableParent=function(H){var L=this.findLoadedParent(H,0);return!!L&&this._isIdRenderable(L.tileID.key)},G.prototype._isIdRenderable=function(H,L){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&(L||!this._tiles[H].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)this._tiles[H].state!=="errored"&&this._reloadTile(H,"reloading")},G.prototype._reloadTile=function(H,L){var q=this._tiles[H];q&&(q.state!=="loading"&&(q.state=L),this._loadTile(q,this._tileLoaded.bind(this,q,H,L)))},G.prototype._tileLoaded=function(H,L,q,$){if($)return H.state="errored",void($.status!==404?this._source.fire(new o.ErrorEvent($,{tile:H})):this.update(this.transform));H.timeAdded=o.browser.now(),q==="expired"&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer(L,H),this.getSource().type==="raster-dem"&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},G.prototype._backfillDEM=function(H){for(var L=this.getRenderableIds(),q=0;q<L.length;q++){var $=L[q];if(H.neighboringTiles&&H.neighboringTiles[$]){var ne=this.getTileByID($);ue(H,ne),ue(ne,H)}}function ue(ye,Le){ye.needsHillshadePrepare=!0;var Ie=Le.tileID.canonical.x-ye.tileID.canonical.x,Ue=Le.tileID.canonical.y-ye.tileID.canonical.y,qe=Math.pow(2,ye.tileID.canonical.z),Qe=Le.tileID.key;Ie===0&&Ue===0||Math.abs(Ue)>1||(Math.abs(Ie)>1&&(Math.abs(Ie+qe)===1?Ie+=qe:Math.abs(Ie-qe)===1&&(Ie-=qe)),Le.dem&&ye.dem&&(ye.dem.backfillBorder(Le.dem,Ie,Ue),ye.neighboringTiles&&ye.neighboringTiles[Qe]&&(ye.neighboringTiles[Qe].backfilled=!0)))}},G.prototype.getTile=function(H){return this.getTileByID(H.key)},G.prototype.getTileByID=function(H){return this._tiles[H]},G.prototype._retainLoadedChildren=function(H,L,q,$){for(var ne in this._tiles){var ue=this._tiles[ne];if(!($[ne]||!ue.hasData()||ue.tileID.overscaledZ<=L||ue.tileID.overscaledZ>q)){for(var ye=ue.tileID;ue&&ue.tileID.overscaledZ>L+1;){var Le=ue.tileID.scaledTo(ue.tileID.overscaledZ-1);(ue=this._tiles[Le.key])&&ue.hasData()&&(ye=Le)}for(var Ie=ye;Ie.overscaledZ>L;)if(H[(Ie=Ie.scaledTo(Ie.overscaledZ-1)).key]){$[ye.key]=ye;break}}}},G.prototype.findLoadedParent=function(H,L){if(H.key in this._loadedParentTiles){var q=this._loadedParentTiles[H.key];return q&&q.tileID.overscaledZ>=L?q:null}for(var $=H.overscaledZ-1;$>=L;$--){var ne=H.scaledTo($),ue=this._getLoadedTile(ne);if(ue)return ue}},G.prototype._getLoadedTile=function(H){var L=this._tiles[H.key];return L&&L.hasData()?L:this._cache.getByKey(H.wrapped().key)},G.prototype.updateCacheSize=function(H){var L=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),q=Math.floor(5*L),$=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,q):q;this._cache.setMaxSize($)},G.prototype.handleWrapJump=function(H){var L=(H-(this._prevLng===void 0?H:this._prevLng))/360,q=Math.round(L);if(this._prevLng=H,q){var $={};for(var ne in this._tiles){var ue=this._tiles[ne];ue.tileID=ue.tileID.unwrapTo(ue.tileID.wrap+q),$[ue.tileID.key]=ue}for(var ye in this._tiles=$,this._timers)clearTimeout(this._timers[ye]),delete this._timers[ye];for(var Le in this._tiles){var Ie=this._tiles[Le];this._setTileReloadTimer(Le,Ie)}}},G.prototype.update=function(H){var L=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var q;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?q=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ft){return new o.OverscaledTileID(Ft.canonical.z,Ft.wrap,Ft.canonical.z,Ft.canonical.x,Ft.canonical.y)}):(q=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(q=q.filter(function(Ft){return L._source.hasTile(Ft)}))):q=[];var $=H.coveringZoomLevel(this._source),ne=Math.max($-G.maxOverzooming,this._source.minzoom),ue=Math.max($+G.maxUnderzooming,this._source.minzoom),ye=this._updateRetainedTiles(q,$);if(Re(this._source.type)){for(var Le={},Ie={},Ue=0,qe=Object.keys(ye);Ue<qe.length;Ue+=1){var Qe=qe[Ue],lt=ye[Qe],ft=this._tiles[Qe];if(ft&&!(ft.fadeEndTime&&ft.fadeEndTime<=o.browser.now())){var xt=this.findLoadedParent(lt,ne);xt&&(this._addTile(xt.tileID),Le[xt.tileID.key]=xt.tileID),Ie[Qe]=lt}}for(var St in this._retainLoadedChildren(Ie,$,ue,ye),Le)ye[St]||(this._coveredTiles[St]=!0,ye[St]=Le[St])}for(var Tt in ye)this._tiles[Tt].clearFadeHold();for(var zt=0,Et=o.keysDifference(this._tiles,ye);zt<Et.length;zt+=1){var Yt=Et[zt],qt=this._tiles[Yt];qt.hasSymbolBuckets&&!qt.holdingForFade()?qt.setHoldDuration(this.map._fadeDuration):qt.hasSymbolBuckets&&!qt.symbolFadeFinished()||this._removeTile(Yt)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},G.prototype._updateRetainedTiles=function(H,L){for(var q={},$={},ne=Math.max(L-G.maxOverzooming,this._source.minzoom),ue=Math.max(L+G.maxUnderzooming,this._source.minzoom),ye={},Le=0,Ie=H;Le<Ie.length;Le+=1){var Ue=Ie[Le],qe=this._addTile(Ue);q[Ue.key]=Ue,qe.hasData()||L<this._source.maxzoom&&(ye[Ue.key]=Ue)}this._retainLoadedChildren(ye,L,ue,q);for(var Qe=0,lt=H;Qe<lt.length;Qe+=1){var ft=lt[Qe],xt=this._tiles[ft.key];if(!xt.hasData()){if(L+1>this._source.maxzoom){var St=ft.children(this._source.maxzoom)[0],Tt=this.getTile(St);if(Tt&&Tt.hasData()){q[St.key]=St;continue}}else{var zt=ft.children(this._source.maxzoom);if(q[zt[0].key]&&q[zt[1].key]&&q[zt[2].key]&&q[zt[3].key])continue}for(var Et=xt.wasRequested(),Yt=ft.overscaledZ-1;Yt>=ne;--Yt){var qt=ft.scaledTo(Yt);if($[qt.key]||($[qt.key]=!0,!(xt=this.getTile(qt))&&Et&&(xt=this._addTile(qt)),xt&&(q[qt.key]=qt,Et=xt.wasRequested(),xt.hasData())))break}}}return q},G.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var L=[],q=void 0,$=this._tiles[H].tileID;$.overscaledZ>0;){if($.key in this._loadedParentTiles){q=this._loadedParentTiles[$.key];break}L.push($.key);var ne=$.scaledTo($.overscaledZ-1);if(q=this._getLoadedTile(ne))break;$=ne}for(var ue=0,ye=L;ue<ye.length;ue+=1){var Le=ye[ue];this._loadedParentTiles[Le]=q}}},G.prototype._addTile=function(H){var L=this._tiles[H.key];if(L)return L;(L=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,L),L.tileID=H,this._state.initializeTileState(L,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,L)));var q=!!L;return q||(L=new o.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile(L,this._tileLoaded.bind(this,L,H.key,L.state))),L?(L.uses++,this._tiles[H.key]=L,q||this._source.fire(new o.Event("dataloading",{tile:L,coord:L.tileID,dataType:"source"})),L):null},G.prototype._setTileReloadTimer=function(H,L){var q=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var $=L.getExpiryTimeout();$&&(this._timers[H]=setTimeout(function(){q._reloadTile(H,"expired"),delete q._timers[H]},$))},G.prototype._removeTile=function(H){var L=this._tiles[H];L&&(L.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),L.uses>0||(L.hasData()&&L.state!=="reloading"?this._cache.add(L.tileID,L,L.getExpiryTimeout()):(L.aborted=!0,this._abortTile(L),this._unloadTile(L))))},G.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},G.prototype.tilesIn=function(H,L,q){var $=this,ne=[],ue=this.transform;if(!ue)return ne;for(var ye=q?ue.getCameraQueryGeometry(H):H,Le=H.map(function(Yt){return ue.pointCoordinate(Yt)}),Ie=ye.map(function(Yt){return ue.pointCoordinate(Yt)}),Ue=this.getIds(),qe=1/0,Qe=1/0,lt=-1/0,ft=-1/0,xt=0,St=Ie;xt<St.length;xt+=1){var Tt=St[xt];qe=Math.min(qe,Tt.x),Qe=Math.min(Qe,Tt.y),lt=Math.max(lt,Tt.x),ft=Math.max(ft,Tt.y)}for(var zt=function(Yt){var qt=$._tiles[Ue[Yt]];if(!qt.holdingForFade()){var Ft=qt.tileID,fn=Math.pow(2,ue.zoom-qt.tileID.overscaledZ),dn=L*qt.queryPadding*o.EXTENT/qt.tileSize/fn,kn=[Ft.getTilePoint(new o.MercatorCoordinate(qe,Qe)),Ft.getTilePoint(new o.MercatorCoordinate(lt,ft))];if(kn[0].x-dn<o.EXTENT&&kn[0].y-dn<o.EXTENT&&kn[1].x+dn>=0&&kn[1].y+dn>=0){var Sn=Le.map(function($n){return Ft.getTilePoint($n)}),Bn=Ie.map(function($n){return Ft.getTilePoint($n)});ne.push({tile:qt,tileID:Ft,queryGeometry:Sn,cameraQueryGeometry:Bn,scale:fn})}}},Et=0;Et<Ue.length;Et++)zt(Et);return ne},G.prototype.getVisibleCoordinates=function(H){for(var L=this,q=this.getRenderableIds(H).map(function(ye){return L._tiles[ye].tileID}),$=0,ne=q;$<ne.length;$+=1){var ue=ne[$];ue.posMatrix=this.transform.calculatePosMatrix(ue.toUnwrapped())}return q},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Re(this._source.type))for(var H in this._tiles){var L=this._tiles[H];if(L.fadeEndTime!==void 0&&L.fadeEndTime>=o.browser.now())return!0}return!1},G.prototype.setFeatureState=function(H,L,q){H=H||"_geojsonTileLayer",this._state.updateState(H,L,q)},G.prototype.removeFeatureState=function(H,L,q){H=H||"_geojsonTileLayer",this._state.removeFeatureState(H,L,q)},G.prototype.getFeatureState=function(H,L){return H=H||"_geojsonTileLayer",this._state.getState(H,L)},G.prototype.setDependencies=function(H,L,q){var $=this._tiles[H];$&&$.setDependencies(L,q)},G.prototype.reloadTilesForDependencies=function(H,L){for(var q in this._tiles)this._tiles[q].hasDependency(H,L)&&this._reloadTile(q,"reloading");this._cache.filter(function($){return!$.hasDependency(H,L)})},G}(o.Evented);function tt(B,G){var H=Math.abs(2*B.wrap)-+(B.wrap<0),L=Math.abs(2*G.wrap)-+(G.wrap<0);return B.overscaledZ-G.overscaledZ||L-H||G.canonical.y-B.canonical.y||G.canonical.x-B.canonical.x}function Re(B){return B==="raster"||B==="image"||B==="video"}function Fe(){return new o.window.Worker(ot.workerUrl)}it.maxOverzooming=10,it.maxUnderzooming=3;var nt="mapboxgl_preloaded_worker_pool",We=function(){this.active={}};We.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<We.workerCount;)this.workers.push(new Fe);return this.active[B]=!0,this.workers.slice()},We.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},We.prototype.isPreloaded=function(){return!!this.active[nt]},We.prototype.numActive=function(){return Object.keys(this.active).length};var ct,pt=Math.floor(o.browser.hardwareConcurrency/2);function gt(){return ct||(ct=new We),ct}function ut(B,G){var H={};for(var L in B)L!=="ref"&&(H[L]=B[L]);return o.refProperties.forEach(function(q){q in G&&(H[q]=G[q])}),H}function kt(B){B=B.slice();for(var G=Object.create(null),H=0;H<B.length;H++)G[B[H].id]=B[H];for(var L=0;L<B.length;L++)"ref"in B[L]&&(B[L]=ut(B[L],G[B[L].ref]));return B}We.workerCount=Math.max(Math.min(pt,6),1);var yt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mt(B,G,H){H.push({command:yt.addSource,args:[B,G[B]]})}function Lt(B,G,H){G.push({command:yt.removeSource,args:[B]}),H[B]=!0}function Ct(B,G,H,L){Lt(B,H,L),Mt(B,G,H)}function It(B,G,H){var L;for(L in B[H])if(B[H].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[H][L],G[H][L]))return!1;for(L in G[H])if(G[H].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[H][L],G[H][L]))return!1;return!0}function Wt(B,G,H,L,q,$){var ne;for(ne in G=G||{},B=B||{})B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||H.push({command:$,args:[L,ne,G[ne],q]}));for(ne in G)G.hasOwnProperty(ne)&&!B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||H.push({command:$,args:[L,ne,G[ne],q]}))}function Nt(B){return B.id}function Bt(B,G){return B[G.id]=G,B}function Ht(B,G){if(!B)return[{command:yt.setStyle,args:[G]}];var H=[];try{if(!o.deepEqual(B.version,G.version))return[{command:yt.setStyle,args:[G]}];o.deepEqual(B.center,G.center)||H.push({command:yt.setCenter,args:[G.center]}),o.deepEqual(B.zoom,G.zoom)||H.push({command:yt.setZoom,args:[G.zoom]}),o.deepEqual(B.bearing,G.bearing)||H.push({command:yt.setBearing,args:[G.bearing]}),o.deepEqual(B.pitch,G.pitch)||H.push({command:yt.setPitch,args:[G.pitch]}),o.deepEqual(B.sprite,G.sprite)||H.push({command:yt.setSprite,args:[G.sprite]}),o.deepEqual(B.glyphs,G.glyphs)||H.push({command:yt.setGlyphs,args:[G.glyphs]}),o.deepEqual(B.transition,G.transition)||H.push({command:yt.setTransition,args:[G.transition]}),o.deepEqual(B.light,G.light)||H.push({command:yt.setLight,args:[G.light]});var L={},q=[];(function(ne,ue,ye,Le){var Ie;for(Ie in ue=ue||{},ne=ne||{})ne.hasOwnProperty(Ie)&&(ue.hasOwnProperty(Ie)||Lt(Ie,ye,Le));for(Ie in ue)ue.hasOwnProperty(Ie)&&(ne.hasOwnProperty(Ie)?o.deepEqual(ne[Ie],ue[Ie])||(ne[Ie].type==="geojson"&&ue[Ie].type==="geojson"&&It(ne,ue,Ie)?ye.push({command:yt.setGeoJSONSourceData,args:[Ie,ue[Ie].data]}):Ct(Ie,ue,ye,Le)):Mt(Ie,ue,ye))})(B.sources,G.sources,q,L);var $=[];B.layers&&B.layers.forEach(function(ne){L[ne.source]?H.push({command:yt.removeLayer,args:[ne.id]}):$.push(ne)}),H=H.concat(q),function(ne,ue,ye){ue=ue||[];var Le,Ie,Ue,qe,Qe,lt,ft,xt=(ne=ne||[]).map(Nt),St=ue.map(Nt),Tt=ne.reduce(Bt,{}),zt=ue.reduce(Bt,{}),Et=xt.slice(),Yt=Object.create(null);for(Le=0,Ie=0;Le<xt.length;Le++)Ue=xt[Le],zt.hasOwnProperty(Ue)?Ie++:(ye.push({command:yt.removeLayer,args:[Ue]}),Et.splice(Et.indexOf(Ue,Ie),1));for(Le=0,Ie=0;Le<St.length;Le++)Ue=St[St.length-1-Le],Et[Et.length-1-Le]!==Ue&&(Tt.hasOwnProperty(Ue)?(ye.push({command:yt.removeLayer,args:[Ue]}),Et.splice(Et.lastIndexOf(Ue,Et.length-Ie),1)):Ie++,lt=Et[Et.length-Le],ye.push({command:yt.addLayer,args:[zt[Ue],lt]}),Et.splice(Et.length-Le,0,Ue),Yt[Ue]=!0);for(Le=0;Le<St.length;Le++)if(qe=Tt[Ue=St[Le]],Qe=zt[Ue],!Yt[Ue]&&!o.deepEqual(qe,Qe))if(o.deepEqual(qe.source,Qe.source)&&o.deepEqual(qe["source-layer"],Qe["source-layer"])&&o.deepEqual(qe.type,Qe.type)){for(ft in Wt(qe.layout,Qe.layout,ye,Ue,null,yt.setLayoutProperty),Wt(qe.paint,Qe.paint,ye,Ue,null,yt.setPaintProperty),o.deepEqual(qe.filter,Qe.filter)||ye.push({command:yt.setFilter,args:[Ue,Qe.filter]}),o.deepEqual(qe.minzoom,Qe.minzoom)&&o.deepEqual(qe.maxzoom,Qe.maxzoom)||ye.push({command:yt.setLayerZoomRange,args:[Ue,Qe.minzoom,Qe.maxzoom]}),qe)qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Wt(qe[ft],Qe[ft],ye,Ue,ft.slice(6),yt.setPaintProperty):o.deepEqual(qe[ft],Qe[ft])||ye.push({command:yt.setLayerProperty,args:[Ue,ft,Qe[ft]]}));for(ft in Qe)Qe.hasOwnProperty(ft)&&!qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Wt(qe[ft],Qe[ft],ye,Ue,ft.slice(6),yt.setPaintProperty):o.deepEqual(qe[ft],Qe[ft])||ye.push({command:yt.setLayerProperty,args:[Ue,ft,Qe[ft]]}))}else ye.push({command:yt.removeLayer,args:[Ue]}),lt=Et[Et.lastIndexOf(Ue)+1],ye.push({command:yt.addLayer,args:[Qe,lt]})}($,G.layers,H)}catch(ne){console.warn("Unable to compute style diff:",ne),H=[{command:yt.setStyle,args:[G]}]}return H}var Qt=function(B,G){this.reset(B,G)};Qt.prototype.reset=function(B,G){this.points=B||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Qt.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=o.clamp(B,0,1);for(var G=1,H=this._distances[G],L=B*this.paddedLength+this.padding;H<L&&G<this._distances.length;)H=this._distances[++G];var q=G-1,$=this._distances[q],ne=H-$,ue=ne>0?(L-$)/ne:0;return this.points[q].mult(1-ue).add(this.points[G].mult(ue))};var Cn=function(B,G,H){var L=this.boxCells=[],q=this.circleCells=[];this.xCellCount=Math.ceil(B/H),this.yCellCount=Math.ceil(G/H);for(var $=0;$<this.xCellCount*this.yCellCount;$++)L.push([]),q.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=G,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function Tn(B,G,H,L,q){var $=o.create();return G?(o.scale($,$,[1/q,1/q,1]),H||o.rotateZ($,$,L.angle)):o.multiply($,L.labelPlaneMatrix,B),$}function hn(B,G,H,L,q){if(G){var $=o.clone(B);return o.scale($,$,[q,q,1]),H||o.rotateZ($,$,-L.angle),$}return L.glCoordMatrix}function Zt(B,G){var H=[B.x,B.y,0,1];Vn(H,H,G);var L=H[3];return{point:new o.Point(H[0]/L,H[1]/L),signedDistanceFromCamera:L}}function an(B,G){return .5+B/G*.5}function $t(B,G){var H=B[0]/B[3],L=B[1]/B[3];return H>=-G[0]&&H<=G[0]&&L>=-G[1]&&L<=G[1]}function ln(B,G,H,L,q,$,ne,ue){var ye=L?B.textSizeData:B.iconSizeData,Le=o.evaluateSizeForZoom(ye,H.transform.zoom),Ie=[256/H.width*2+1,256/H.height*2+1],Ue=L?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Ue.clear();for(var qe=B.lineVertexArray,Qe=L?B.text.placedSymbolArray:B.icon.placedSymbolArray,lt=H.transform.width/H.transform.height,ft=!1,xt=0;xt<Qe.length;xt++){var St=Qe.get(xt);if(St.hidden||St.writingMode===o.WritingMode.vertical&&!ft)In(St.numGlyphs,Ue);else{ft=!1;var Tt=[St.anchorX,St.anchorY,0,1];if(o.transformMat4(Tt,Tt,G),$t(Tt,Ie)){var zt=Tt[3],Et=an(H.transform.cameraToCenterDistance,zt),Yt=o.evaluateSizeForFeature(ye,Le,St),qt=ne?Yt/Et:Yt*Et,Ft=new o.Point(St.anchorX,St.anchorY),fn=Zt(Ft,q).point,dn={},kn=Pn(St,qt,!1,ue,G,q,$,B.glyphOffsetArray,qe,Ue,fn,Ft,dn,lt);ft=kn.useVertical,(kn.notEnoughRoom||ft||kn.needsFlipping&&Pn(St,qt,!0,ue,G,q,$,B.glyphOffsetArray,qe,Ue,fn,Ft,dn,lt).notEnoughRoom)&&In(St.numGlyphs,Ue)}else In(St.numGlyphs,Ue)}}L?B.text.dynamicLayoutVertexBuffer.updateData(Ue):B.icon.dynamicLayoutVertexBuffer.updateData(Ue)}function mn(B,G,H,L,q,$,ne,ue,ye,Le,Ie){var Ue=ue.glyphStartIndex+ue.numGlyphs,qe=ue.lineStartIndex,Qe=ue.lineStartIndex+ue.lineLength,lt=G.getoffsetX(ue.glyphStartIndex),ft=G.getoffsetX(Ue-1),xt=_n(B*lt,H,L,q,$,ne,ue.segment,qe,Qe,ye,Le,Ie);if(!xt)return null;var St=_n(B*ft,H,L,q,$,ne,ue.segment,qe,Qe,ye,Le,Ie);return St?{first:xt,last:St}:null}function xn(B,G,H,L){return B===o.WritingMode.horizontal&&Math.abs(H.y-G.y)>Math.abs(H.x-G.x)*L?{useVertical:!0}:(B===o.WritingMode.vertical?G.y<H.y:G.x>H.x)?{needsFlipping:!0}:null}function Pn(B,G,H,L,q,$,ne,ue,ye,Le,Ie,Ue,qe,Qe){var lt,ft=G/24,xt=B.lineOffsetX*ft,St=B.lineOffsetY*ft;if(B.numGlyphs>1){var Tt=B.glyphStartIndex+B.numGlyphs,zt=B.lineStartIndex,Et=B.lineStartIndex+B.lineLength,Yt=mn(ft,ue,xt,St,H,Ie,Ue,B,ye,$,qe);if(!Yt)return{notEnoughRoom:!0};var qt=Zt(Yt.first.point,ne).point,Ft=Zt(Yt.last.point,ne).point;if(L&&!H){var fn=xn(B.writingMode,qt,Ft,Qe);if(fn)return fn}lt=[Yt.first];for(var dn=B.glyphStartIndex+1;dn<Tt-1;dn++)lt.push(_n(ft*ue.getoffsetX(dn),xt,St,H,Ie,Ue,B.segment,zt,Et,ye,$,qe));lt.push(Yt.last)}else{if(L&&!H){var kn=Zt(Ue,q).point,Sn=B.lineStartIndex+B.segment+1,Bn=new o.Point(ye.getx(Sn),ye.gety(Sn)),$n=Zt(Bn,q),sr=$n.signedDistanceFromCamera>0?$n.point:Mn(Ue,Bn,kn,1,q),qn=xn(B.writingMode,kn,sr,Qe);if(qn)return qn}var ir=_n(ft*ue.getoffsetX(B.glyphStartIndex),xt,St,H,Ie,Ue,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,ye,$,qe);if(!ir)return{notEnoughRoom:!0};lt=[ir]}for(var vr=0,Ar=lt;vr<Ar.length;vr+=1){var Kn=Ar[vr];o.addDynamicAttributes(Le,Kn.point,Kn.angle)}return{}}function Mn(B,G,H,L,q){var $=Zt(B.add(B.sub(G)._unit()),q).point,ne=H.sub($);return H.add(ne._mult(L/ne.mag()))}function _n(B,G,H,L,q,$,ne,ue,ye,Le,Ie,Ue){var qe=L?B-G:B+G,Qe=qe>0?1:-1,lt=0;L&&(Qe*=-1,lt=Math.PI),Qe<0&&(lt+=Math.PI);for(var ft=Qe>0?ue+ne:ue+ne+1,xt=q,St=q,Tt=0,zt=0,Et=Math.abs(qe),Yt=[];Tt+zt<=Et;){if((ft+=Qe)<ue||ft>=ye)return null;if(St=xt,Yt.push(xt),(xt=Ue[ft])===void 0){var qt=new o.Point(Le.getx(ft),Le.gety(ft)),Ft=Zt(qt,Ie);if(Ft.signedDistanceFromCamera>0)xt=Ue[ft]=Ft.point;else{var fn=ft-Qe;xt=Mn(Tt===0?$:new o.Point(Le.getx(fn),Le.gety(fn)),qt,St,Et-Tt+1,Ie)}}Tt+=zt,zt=St.dist(xt)}var dn=(Et-Tt)/zt,kn=xt.sub(St),Sn=kn.mult(dn)._add(St);Sn._add(kn._unit()._perp()._mult(H*Qe));var Bn=lt+Math.atan2(xt.y-St.y,xt.x-St.x);return Yt.push(Sn),{point:Sn,angle:Bn,path:Yt}}Cn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Cn.prototype.insert=function(B,G,H,L,q){this._forEachCell(G,H,L,q,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push(G),this.bboxes.push(H),this.bboxes.push(L),this.bboxes.push(q)},Cn.prototype.insertCircle=function(B,G,H,L){this._forEachCell(G-L,H-L,G+L,H+L,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push(G),this.circles.push(H),this.circles.push(L)},Cn.prototype._insertBoxCell=function(B,G,H,L,q,$){this.boxCells[q].push($)},Cn.prototype._insertCircleCell=function(B,G,H,L,q,$){this.circleCells[q].push($)},Cn.prototype._query=function(B,G,H,L,q,$){if(H<0||B>this.width||L<0||G>this.height)return!q&&[];var ne=[];if(B<=0&&G<=0&&this.width<=H&&this.height<=L){if(q)return!0;for(var ue=0;ue<this.boxKeys.length;ue++)ne.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(var ye=0;ye<this.circleKeys.length;ye++){var Le=this.circles[3*ye],Ie=this.circles[3*ye+1],Ue=this.circles[3*ye+2];ne.push({key:this.circleKeys[ye],x1:Le-Ue,y1:Ie-Ue,x2:Le+Ue,y2:Ie+Ue})}return $?ne.filter($):ne}var qe={hitTest:q,seenUids:{box:{},circle:{}}};return this._forEachCell(B,G,H,L,this._queryCell,ne,qe,$),q?ne.length>0:ne},Cn.prototype._queryCircle=function(B,G,H,L,q){var $=B-H,ne=B+H,ue=G-H,ye=G+H;if(ne<0||$>this.width||ye<0||ue>this.height)return!L&&[];var Le=[],Ie={hitTest:L,circle:{x:B,y:G,radius:H},seenUids:{box:{},circle:{}}};return this._forEachCell($,ue,ne,ye,this._queryCellCircle,Le,Ie,q),L?Le.length>0:Le},Cn.prototype.query=function(B,G,H,L,q){return this._query(B,G,H,L,!1,q)},Cn.prototype.hitTest=function(B,G,H,L,q){return this._query(B,G,H,L,!0,q)},Cn.prototype.hitTestCircle=function(B,G,H,L){return this._queryCircle(B,G,H,!0,L)},Cn.prototype._queryCell=function(B,G,H,L,q,$,ne,ue){var ye=ne.seenUids,Le=this.boxCells[q];if(Le!==null)for(var Ie=this.bboxes,Ue=0,qe=Le;Ue<qe.length;Ue+=1){var Qe=qe[Ue];if(!ye.box[Qe]){ye.box[Qe]=!0;var lt=4*Qe;if(B<=Ie[lt+2]&&G<=Ie[lt+3]&&H>=Ie[lt+0]&&L>=Ie[lt+1]&&(!ue||ue(this.boxKeys[Qe]))){if(ne.hitTest)return $.push(!0),!0;$.push({key:this.boxKeys[Qe],x1:Ie[lt],y1:Ie[lt+1],x2:Ie[lt+2],y2:Ie[lt+3]})}}}var ft=this.circleCells[q];if(ft!==null)for(var xt=this.circles,St=0,Tt=ft;St<Tt.length;St+=1){var zt=Tt[St];if(!ye.circle[zt]){ye.circle[zt]=!0;var Et=3*zt;if(this._circleAndRectCollide(xt[Et],xt[Et+1],xt[Et+2],B,G,H,L)&&(!ue||ue(this.circleKeys[zt]))){if(ne.hitTest)return $.push(!0),!0;var Yt=xt[Et],qt=xt[Et+1],Ft=xt[Et+2];$.push({key:this.circleKeys[zt],x1:Yt-Ft,y1:qt-Ft,x2:Yt+Ft,y2:qt+Ft})}}}},Cn.prototype._queryCellCircle=function(B,G,H,L,q,$,ne,ue){var ye=ne.circle,Le=ne.seenUids,Ie=this.boxCells[q];if(Ie!==null)for(var Ue=this.bboxes,qe=0,Qe=Ie;qe<Qe.length;qe+=1){var lt=Qe[qe];if(!Le.box[lt]){Le.box[lt]=!0;var ft=4*lt;if(this._circleAndRectCollide(ye.x,ye.y,ye.radius,Ue[ft+0],Ue[ft+1],Ue[ft+2],Ue[ft+3])&&(!ue||ue(this.boxKeys[lt])))return $.push(!0),!0}}var xt=this.circleCells[q];if(xt!==null)for(var St=this.circles,Tt=0,zt=xt;Tt<zt.length;Tt+=1){var Et=zt[Tt];if(!Le.circle[Et]){Le.circle[Et]=!0;var Yt=3*Et;if(this._circlesCollide(St[Yt],St[Yt+1],St[Yt+2],ye.x,ye.y,ye.radius)&&(!ue||ue(this.circleKeys[Et])))return $.push(!0),!0}}},Cn.prototype._forEachCell=function(B,G,H,L,q,$,ne,ue){for(var ye=this._convertToXCellCoord(B),Le=this._convertToYCellCoord(G),Ie=this._convertToXCellCoord(H),Ue=this._convertToYCellCoord(L),qe=ye;qe<=Ie;qe++)for(var Qe=Le;Qe<=Ue;Qe++){var lt=this.xCellCount*Qe+qe;if(q.call(this,B,G,H,L,lt,$,ne,ue))return}},Cn.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},Cn.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},Cn.prototype._circlesCollide=function(B,G,H,L,q,$){var ne=L-B,ue=q-G,ye=H+$;return ye*ye>ne*ne+ue*ue},Cn.prototype._circleAndRectCollide=function(B,G,H,L,q,$,ne){var ue=($-L)/2,ye=Math.abs(B-(L+ue));if(ye>ue+H)return!1;var Le=(ne-q)/2,Ie=Math.abs(G-(q+Le));if(Ie>Le+H)return!1;if(ye<=ue||Ie<=Le)return!0;var Ue=ye-ue,qe=Ie-Le;return Ue*Ue+qe*qe<=H*H};var Rn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function In(B,G){for(var H=0;H<B;H++){var L=G.length;G.resize(L+4),G.float32.set(Rn,3*L)}}function Vn(B,G,H){var L=G[0],q=G[1];return B[0]=H[0]*L+H[4]*q+H[12],B[1]=H[1]*L+H[5]*q+H[13],B[3]=H[3]*L+H[7]*q+H[15],B}var tr=100,er=function(B,G,H){G===void 0&&(G=new Cn(B.width+200,B.height+200,25)),H===void 0&&(H=new Cn(B.width+200,B.height+200,25)),this.transform=B,this.grid=G,this.ignoredGrid=H,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+tr,this.screenBottomBoundary=B.height+tr,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function Wn(B,G,H){return G*(o.EXTENT/(B.tileSize*Math.pow(2,H-B.tileID.overscaledZ)))}er.prototype.placeCollisionBox=function(B,G,H,L,q){var $=this.projectAndGetPerspectiveRatio(L,B.anchorPointX,B.anchorPointY),ne=H*$.perspectiveRatio,ue=B.x1*ne+$.point.x,ye=B.y1*ne+$.point.y,Le=B.x2*ne+$.point.x,Ie=B.y2*ne+$.point.y;return!this.isInsideGrid(ue,ye,Le,Ie)||!G&&this.grid.hitTest(ue,ye,Le,Ie,q)?{box:[],offscreen:!1}:{box:[ue,ye,Le,Ie],offscreen:this.isOffscreen(ue,ye,Le,Ie)}},er.prototype.placeCollisionCircles=function(B,G,H,L,q,$,ne,ue,ye,Le,Ie,Ue,qe){var Qe=[],lt=new o.Point(G.anchorX,G.anchorY),ft=Zt(lt,$),xt=an(this.transform.cameraToCenterDistance,ft.signedDistanceFromCamera),St=(Le?q/xt:q*xt)/o.ONE_EM,Tt=Zt(lt,ne).point,zt=mn(St,L,G.lineOffsetX*St,G.lineOffsetY*St,!1,Tt,lt,G,H,ne,{}),Et=!1,Yt=!1,qt=!0;if(zt){for(var Ft=.5*Ue*xt+qe,fn=new o.Point(-100,-100),dn=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),kn=new Qt,Sn=zt.first,Bn=zt.last,$n=[],sr=Sn.path.length-1;sr>=1;sr--)$n.push(Sn.path[sr]);for(var qn=1;qn<Bn.path.length;qn++)$n.push(Bn.path[qn]);var ir=2.5*Ft;if(ue){var vr=$n.map(function(Gr){return Zt(Gr,ue)});$n=vr.some(function(Gr){return Gr.signedDistanceFromCamera<=0})?[]:vr.map(function(Gr){return Gr.point})}var Ar=[];if($n.length>0){for(var Kn=$n[0].clone(),ar=$n[0].clone(),br=1;br<$n.length;br++)Kn.x=Math.min(Kn.x,$n[br].x),Kn.y=Math.min(Kn.y,$n[br].y),ar.x=Math.max(ar.x,$n[br].x),ar.y=Math.max(ar.y,$n[br].y);Ar=Kn.x>=fn.x&&ar.x<=dn.x&&Kn.y>=fn.y&&ar.y<=dn.y?[$n]:ar.x<fn.x||Kn.x>dn.x||ar.y<fn.y||Kn.y>dn.y?[]:o.clipLine([$n],fn.x,fn.y,dn.x,dn.y)}for(var lr=0,Tr=Ar;lr<Tr.length;lr+=1){var Er=Tr[lr];kn.reset(Er,.25*Ft);var Rr;Rr=kn.length<=.5*Ft?1:Math.ceil(kn.paddedLength/ir)+1;for(var Fr=0;Fr<Rr;Fr++){var jr=Fr/Math.max(Rr-1,1),qr=kn.lerp(jr),ua=qr.x+tr,Aa=qr.y+tr;Qe.push(ua,Aa,Ft,0);var ri=ua-Ft,Ba=Aa-Ft,Ka=ua+Ft,ga=Aa+Ft;if(qt=qt&&this.isOffscreen(ri,Ba,Ka,ga),Yt=Yt||this.isInsideGrid(ri,Ba,Ka,ga),!B&&this.grid.hitTestCircle(ua,Aa,Ft,Ie)&&(Et=!0,!ye))return{circles:[],offscreen:!1,collisionDetected:Et}}}}return{circles:!ye&&Et||!Yt?[]:Qe,offscreen:qt,collisionDetected:Et}},er.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],H=1/0,L=1/0,q=-1/0,$=-1/0,ne=0,ue=B;ne<ue.length;ne+=1){var ye=ue[ne],Le=new o.Point(ye.x+tr,ye.y+tr);H=Math.min(H,Le.x),L=Math.min(L,Le.y),q=Math.max(q,Le.x),$=Math.max($,Le.y),G.push(Le)}for(var Ie={},Ue={},qe=0,Qe=this.grid.query(H,L,q,$).concat(this.ignoredGrid.query(H,L,q,$));qe<Qe.length;qe+=1){var lt=Qe[qe],ft=lt.key;if(Ie[ft.bucketInstanceId]===void 0&&(Ie[ft.bucketInstanceId]={}),!Ie[ft.bucketInstanceId][ft.featureIndex]){var xt=[new o.Point(lt.x1,lt.y1),new o.Point(lt.x2,lt.y1),new o.Point(lt.x2,lt.y2),new o.Point(lt.x1,lt.y2)];o.polygonIntersectsPolygon(G,xt)&&(Ie[ft.bucketInstanceId][ft.featureIndex]=!0,Ue[ft.bucketInstanceId]===void 0&&(Ue[ft.bucketInstanceId]=[]),Ue[ft.bucketInstanceId].push(ft.featureIndex))}}return Ue},er.prototype.insertCollisionBox=function(B,G,H,L,q){var $={bucketInstanceId:H,featureIndex:L,collisionGroupID:q};(G?this.ignoredGrid:this.grid).insert($,B[0],B[1],B[2],B[3])},er.prototype.insertCollisionCircles=function(B,G,H,L,q){for(var $=G?this.ignoredGrid:this.grid,ne={bucketInstanceId:H,featureIndex:L,collisionGroupID:q},ue=0;ue<B.length;ue+=4)$.insertCircle(ne,B[ue],B[ue+1],B[ue+2])},er.prototype.projectAndGetPerspectiveRatio=function(B,G,H){var L=[G,H,0,1];return Vn(L,L,B),{point:new o.Point((L[0]/L[3]+1)/2*this.transform.width+tr,(-L[1]/L[3]+1)/2*this.transform.height+tr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/L[3]*.5}},er.prototype.isOffscreen=function(B,G,H,L){return H<tr||B>=this.screenRightBoundary||L<tr||G>this.screenBottomBoundary},er.prototype.isInsideGrid=function(B,G,H,L){return H>=0&&B<this.gridRightBoundary&&L>=0&&G<this.gridBottomBoundary},er.prototype.getViewportMatrix=function(){var B=o.identity([]);return o.translate(B,B,[-100,-100,0]),B};var or=function(B,G,H,L){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?G:-G))):L&&H?1:0,this.placed=H};or.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Jt=function(B,G,H,L,q){this.text=new or(B?B.text:null,G,H,q),this.icon=new or(B?B.icon:null,G,L,q)};Jt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var en=function(B,G,H){this.text=B,this.icon=G,this.skipFade=H},En=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},gn=function(B,G,H,L,q){this.bucketInstanceId=B,this.featureIndex=G,this.sourceLayerIndex=H,this.bucketIndex=L,this.tileID=q},Ln=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function Hn(B,G,H,L,q){var $=o.getAnchorAlignment(B),ne=-($.horizontalAlign-.5)*G,ue=-($.verticalAlign-.5)*H,ye=o.evaluateVariableOffset(B,L);return new o.Point(ne+ye[0]*q,ue+ye[1]*q)}function Nn(B,G,H,L,q,$){var ne=B.x1,ue=B.x2,ye=B.y1,Le=B.y2,Ie=B.anchorPointX,Ue=B.anchorPointY,qe=new o.Point(G,H);return L&&qe._rotate(q?$:-$),{x1:ne+qe.x,y1:ye+qe.y,x2:ue+qe.x,y2:Le+qe.y,anchorPointX:Ie,anchorPointY:Ue}}Ln.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var G=++this.maxGroupID;this.collisionGroups[B]={ID:G,predicate:function(H){return H.collisionGroupID===G}}}return this.collisionGroups[B]};var Yn=function(B,G,H,L){this.transform=B.clone(),this.collisionIndex=new er(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Ln(H),this.collisionCircleArrays={},this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}};function fr(B,G,H,L,q){B.emplaceBack(G?1:0,H?1:0,L||0,q||0),B.emplaceBack(G?1:0,H?1:0,L||0,q||0),B.emplaceBack(G?1:0,H?1:0,L||0,q||0),B.emplaceBack(G?1:0,H?1:0,L||0,q||0)}Yn.prototype.getBucketParts=function(B,G,H,L){var q=H.getBucket(G),$=H.latestFeatureIndex;if(q&&$&&G.id===q.layerIds[0]){var ne=H.collisionBoxArray,ue=q.layers[0].layout,ye=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),Le=H.tileSize/o.EXTENT,Ie=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),Ue=ue.get("text-pitch-alignment")==="map",qe=ue.get("text-rotation-alignment")==="map",Qe=Wn(H,1,this.transform.zoom),lt=Tn(Ie,Ue,qe,this.transform,Qe),ft=null;if(Ue){var xt=hn(Ie,Ue,qe,this.transform,Qe);ft=o.multiply([],this.transform.labelPlaneMatrix,xt)}this.retainedQueryData[q.bucketInstanceId]=new gn(q.bucketInstanceId,$,q.sourceLayerIndex,q.index,H.tileID);var St={bucket:q,layout:ue,posMatrix:Ie,textLabelPlaneMatrix:lt,labelToScreenMatrix:ft,scale:ye,textPixelRatio:Le,holdingForFade:H.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(q.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(q.sourceID)};if(L)for(var Tt=0,zt=q.sortKeyRanges;Tt<zt.length;Tt+=1){var Et=zt[Tt],Yt=Et.sortKey,qt=Et.symbolInstanceStart,Ft=Et.symbolInstanceEnd;B.push({sortKey:Yt,symbolInstanceStart:qt,symbolInstanceEnd:Ft,parameters:St})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:q.symbolInstances.length,parameters:St})}},Yn.prototype.attemptAnchorPlacement=function(B,G,H,L,q,$,ne,ue,ye,Le,Ie,Ue,qe,Qe,lt){var ft,xt=[Ue.textOffset0,Ue.textOffset1],St=Hn(B,H,L,xt,q),Tt=this.collisionIndex.placeCollisionBox(Nn(G,St.x,St.y,$,ne,this.transform.angle),Ie,ue,ye,Le.predicate);if(!lt||this.collisionIndex.placeCollisionBox(Nn(lt,St.x,St.y,$,ne,this.transform.angle),Ie,ue,ye,Le.predicate).box.length!==0)return Tt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(ft=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),this.variableOffsets[Ue.crossTileID]={textOffset:xt,width:H,height:L,anchor:B,textBoxScale:q,prevAnchor:ft},this.markUsedJustification(qe,B,Ue,Qe),qe.allowVerticalPlacement&&(this.markUsedOrientation(qe,Qe,Ue),this.placedOrientations[Ue.crossTileID]=Qe),{shift:St,placedGlyphBoxes:Tt}):void 0},Yn.prototype.placeLayerBucketPart=function(B,G,H){var L=this,q=B.parameters,$=q.bucket,ne=q.layout,ue=q.posMatrix,ye=q.textLabelPlaneMatrix,Le=q.labelToScreenMatrix,Ie=q.textPixelRatio,Ue=q.holdingForFade,qe=q.collisionBoxArray,Qe=q.partiallyEvaluatedTextSize,lt=q.collisionGroup,ft=ne.get("text-optional"),xt=ne.get("icon-optional"),St=ne.get("text-allow-overlap"),Tt=ne.get("icon-allow-overlap"),zt=ne.get("text-rotation-alignment")==="map",Et=ne.get("text-pitch-alignment")==="map",Yt=ne.get("icon-text-fit")!=="none",qt=ne.get("symbol-z-order")==="viewport-y",Ft=St&&(Tt||!$.hasIconData()||xt),fn=Tt&&(St||!$.hasTextData()||ft);!$.collisionArrays&&qe&&$.deserializeCollisionBoxes(qe);var dn=function(qn,ir){if(!G[qn.crossTileID])if(Ue)L.placements[qn.crossTileID]=new en(!1,!1,!1);else{var vr,Ar=!1,Kn=!1,ar=!0,br=null,lr={box:null,offscreen:null},Tr={box:null,offscreen:null},Er=null,Rr=null,Fr=0,jr=0,qr=0;ir.textFeatureIndex?Fr=ir.textFeatureIndex:qn.useRuntimeCollisionCircles&&(Fr=qn.featureIndex),ir.verticalTextFeatureIndex&&(jr=ir.verticalTextFeatureIndex);var ua=ir.textBox;if(ua){var Aa=function(_a){var ki=o.WritingMode.horizontal;if($.allowVerticalPlacement&&!_a&&L.prevPlacement){var Ga=L.prevPlacement.placedOrientations[qn.crossTileID];Ga&&(L.placedOrientations[qn.crossTileID]=Ga,ki=Ga,L.markUsedOrientation($,ki,qn))}return ki},ri=function(_a,ki){if($.allowVerticalPlacement&&qn.numVerticalGlyphVertices>0&&ir.verticalTextBox)for(var Ga=0,kl=$.writingModes;Ga<kl.length&&(kl[Ga]===o.WritingMode.vertical?(lr=ki(),Tr=lr):lr=_a(),!(lr&&lr.box&&lr.box.length));Ga+=1);else lr=_a()};if(ne.get("text-variable-anchor")){var Ba=ne.get("text-variable-anchor");if(L.prevPlacement&&L.prevPlacement.variableOffsets[qn.crossTileID]){var Ka=L.prevPlacement.variableOffsets[qn.crossTileID];Ba.indexOf(Ka.anchor)>0&&(Ba=Ba.filter(function(_a){return _a!==Ka.anchor})).unshift(Ka.anchor)}var ga=function(_a,ki,Ga){for(var kl=_a.x2-_a.x1,mc=_a.y2-_a.y1,Pu=qn.textBoxScale,yc=Yt&&!Tt?ki:null,hl={box:[],offscreen:!1},xc=St?2*Ba.length:Ba.length,pl=0;pl<xc;++pl){var Ou=Ba[pl%Ba.length],Iu=pl>=Ba.length,Ws=L.attemptAnchorPlacement(Ou,_a,kl,mc,Pu,zt,Et,Ie,ue,lt,Iu,qn,$,Ga,yc);if(Ws&&(hl=Ws.placedGlyphBoxes)&&hl.box&&hl.box.length){Ar=!0,br=Ws.shift;break}}return hl};ri(function(){return ga(ua,ir.iconBox,o.WritingMode.horizontal)},function(){var _a=ir.verticalTextBox,ki=lr&&lr.box&&lr.box.length;return $.allowVerticalPlacement&&!ki&&qn.numVerticalGlyphVertices>0&&_a?ga(_a,ir.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),lr&&(Ar=lr.box,ar=lr.offscreen);var Gr=Aa(lr&&lr.box);if(!Ar&&L.prevPlacement){var xa=L.prevPlacement.variableOffsets[qn.crossTileID];xa&&(L.variableOffsets[qn.crossTileID]=xa,L.markUsedJustification($,xa.anchor,qn,Gr))}}else{var ra=function(_a,ki){var Ga=L.collisionIndex.placeCollisionBox(_a,St,Ie,ue,lt.predicate);return Ga&&Ga.box&&Ga.box.length&&(L.markUsedOrientation($,ki,qn),L.placedOrientations[qn.crossTileID]=ki),Ga};ri(function(){return ra(ua,o.WritingMode.horizontal)},function(){var _a=ir.verticalTextBox;return $.allowVerticalPlacement&&qn.numVerticalGlyphVertices>0&&_a?ra(_a,o.WritingMode.vertical):{box:null,offscreen:null}}),Aa(lr&&lr.box&&lr.box.length)}}if(Ar=(vr=lr)&&vr.box&&vr.box.length>0,ar=vr&&vr.offscreen,qn.useRuntimeCollisionCircles){var Zr=$.text.placedSymbolArray.get(qn.centerJustifiedTextSymbolIndex),ba=o.evaluateSizeForFeature($.textSizeData,Qe,Zr),Ma=ne.get("text-padding"),Ia=qn.collisionCircleDiameter;Er=L.collisionIndex.placeCollisionCircles(St,Zr,$.lineVertexArray,$.glyphOffsetArray,ba,ue,ye,Le,H,Et,lt.predicate,Ia,Ma),Ar=St||Er.circles.length>0&&!Er.collisionDetected,ar=ar&&Er.offscreen}if(ir.iconFeatureIndex&&(qr=ir.iconFeatureIndex),ir.iconBox){var vs=function(_a){var ki=Yt&&br?Nn(_a,br.x,br.y,zt,Et,L.transform.angle):_a;return L.collisionIndex.placeCollisionBox(ki,Tt,Ie,ue,lt.predicate)};Kn=Tr&&Tr.box&&Tr.box.length&&ir.verticalIconBox?(Rr=vs(ir.verticalIconBox)).box.length>0:(Rr=vs(ir.iconBox)).box.length>0,ar=ar&&Rr.offscreen}var ms=ft||qn.numHorizontalGlyphVertices===0&&qn.numVerticalGlyphVertices===0,Xr=xt||qn.numIconVertices===0;if(ms||Xr?Xr?ms||(Kn=Kn&&Ar):Ar=Kn&&Ar:Kn=Ar=Kn&&Ar,Ar&&vr&&vr.box&&(Tr&&Tr.box&&jr?L.collisionIndex.insertCollisionBox(vr.box,ne.get("text-ignore-placement"),$.bucketInstanceId,jr,lt.ID):L.collisionIndex.insertCollisionBox(vr.box,ne.get("text-ignore-placement"),$.bucketInstanceId,Fr,lt.ID)),Kn&&Rr&&L.collisionIndex.insertCollisionBox(Rr.box,ne.get("icon-ignore-placement"),$.bucketInstanceId,qr,lt.ID),Er&&(Ar&&L.collisionIndex.insertCollisionCircles(Er.circles,ne.get("text-ignore-placement"),$.bucketInstanceId,Fr,lt.ID),H)){var Gs=$.bucketInstanceId,Cs=L.collisionCircleArrays[Gs];Cs===void 0&&(Cs=L.collisionCircleArrays[Gs]=new En);for(var bo=0;bo<Er.circles.length;bo+=4)Cs.circles.push(Er.circles[bo+0]),Cs.circles.push(Er.circles[bo+1]),Cs.circles.push(Er.circles[bo+2]),Cs.circles.push(Er.collisionDetected?1:0)}L.placements[qn.crossTileID]=new en(Ar||Ft,Kn||fn,ar||$.justReloaded),G[qn.crossTileID]=!0}};if(qt)for(var kn=$.getSortedSymbolIndexes(this.transform.angle),Sn=kn.length-1;Sn>=0;--Sn){var Bn=kn[Sn];dn($.symbolInstances.get(Bn),$.collisionArrays[Bn])}else for(var $n=B.symbolInstanceStart;$n<B.symbolInstanceEnd;$n++)dn($.symbolInstances.get($n),$.collisionArrays[$n]);if(H&&$.bucketInstanceId in this.collisionCircleArrays){var sr=this.collisionCircleArrays[$.bucketInstanceId];o.invert(sr.invProjMatrix,ue),sr.viewportMatrix=this.collisionIndex.getViewportMatrix()}$.justReloaded=!1},Yn.prototype.markUsedJustification=function(B,G,H,L){var q,$={left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex};q=L===o.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:$[o.getAnchorJustification(G)];for(var ne=0,ue=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];ne<ue.length;ne+=1){var ye=ue[ne];ye>=0&&(B.text.placedSymbolArray.get(ye).crossTileID=q>=0&&ye!==q?0:H.crossTileID)}},Yn.prototype.markUsedOrientation=function(B,G,H){for(var L=G===o.WritingMode.horizontal||G===o.WritingMode.horizontalOnly?G:0,q=G===o.WritingMode.vertical?G:0,$=0,ne=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];$<ne.length;$+=1){var ue=ne[$];B.text.placedSymbolArray.get(ue).placedOrientation=L}H.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=q)},Yn.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,H=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var L=G?G.symbolFadeChange(B):1,q=G?G.opacities:{},$=G?G.variableOffsets:{},ne=G?G.placedOrientations:{};for(var ue in this.placements){var ye=this.placements[ue],Le=q[ue];Le?(this.opacities[ue]=new Jt(Le,L,ye.text,ye.icon),H=H||ye.text!==Le.text.placed||ye.icon!==Le.icon.placed):(this.opacities[ue]=new Jt(null,L,ye.text,ye.icon,ye.skipFade),H=H||ye.text||ye.icon)}for(var Ie in q){var Ue=q[Ie];if(!this.opacities[Ie]){var qe=new Jt(Ue,L,!1,!1);qe.isHidden()||(this.opacities[Ie]=qe,H=H||Ue.text.placed||Ue.icon.placed)}}for(var Qe in $)this.variableOffsets[Qe]||!this.opacities[Qe]||this.opacities[Qe].isHidden()||(this.variableOffsets[Qe]=$[Qe]);for(var lt in ne)this.placedOrientations[lt]||!this.opacities[lt]||this.opacities[lt].isHidden()||(this.placedOrientations[lt]=ne[lt]);H?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:B)},Yn.prototype.updateLayerOpacities=function(B,G){for(var H={},L=0,q=G;L<q.length;L+=1){var $=q[L],ne=$.getBucket(B);ne&&$.latestFeatureIndex&&B.id===ne.layerIds[0]&&this.updateBucketOpacities(ne,H,$.collisionBoxArray)}},Yn.prototype.updateBucketOpacities=function(B,G,H){var L=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var q=B.layers[0].layout,$=new Jt(null,0,!1,!1,!0),ne=q.get("text-allow-overlap"),ue=q.get("icon-allow-overlap"),ye=q.get("text-variable-anchor"),Le=q.get("text-rotation-alignment")==="map",Ie=q.get("text-pitch-alignment")==="map",Ue=q.get("icon-text-fit")!=="none",qe=new Jt(null,0,ne&&(ue||!B.hasIconData()||q.get("icon-optional")),ue&&(ne||!B.hasTextData()||q.get("text-optional")),!0);!B.collisionArrays&&H&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(H);for(var Qe=function(St,Tt,zt){for(var Et=0;Et<Tt/4;Et++)St.opacityVertexArray.emplaceBack(zt)},lt=function(St){var Tt=B.symbolInstances.get(St),zt=Tt.numHorizontalGlyphVertices,Et=Tt.numVerticalGlyphVertices,Yt=Tt.crossTileID,qt=G[Yt],Ft=L.opacities[Yt];qt?Ft=$:Ft||(Ft=qe,L.opacities[Yt]=Ft),G[Yt]=!0;var fn=zt>0||Et>0,dn=Tt.numIconVertices>0,kn=L.placedOrientations[Tt.crossTileID],Sn=kn===o.WritingMode.vertical,Bn=kn===o.WritingMode.horizontal||kn===o.WritingMode.horizontalOnly;if(fn){var $n=vn(Ft.text),sr=Sn?tn:$n;Qe(B.text,zt,sr);var qn=Bn?tn:$n;Qe(B.text,Et,qn);var ir=Ft.text.isHidden();[Tt.rightJustifiedTextSymbolIndex,Tt.centerJustifiedTextSymbolIndex,Tt.leftJustifiedTextSymbolIndex].forEach(function(qr){qr>=0&&(B.text.placedSymbolArray.get(qr).hidden=ir||Sn?1:0)}),Tt.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(Tt.verticalPlacedTextSymbolIndex).hidden=ir||Bn?1:0);var vr=L.variableOffsets[Tt.crossTileID];vr&&L.markUsedJustification(B,vr.anchor,Tt,kn);var Ar=L.placedOrientations[Tt.crossTileID];Ar&&(L.markUsedJustification(B,"left",Tt,Ar),L.markUsedOrientation(B,Ar,Tt))}if(dn){var Kn=vn(Ft.icon),ar=!(Ue&&Tt.verticalPlacedIconSymbolIndex&&Sn);if(Tt.placedIconSymbolIndex>=0){var br=ar?Kn:tn;Qe(B.icon,Tt.numIconVertices,br),B.icon.placedSymbolArray.get(Tt.placedIconSymbolIndex).hidden=Ft.icon.isHidden()}if(Tt.verticalPlacedIconSymbolIndex>=0){var lr=ar?tn:Kn;Qe(B.icon,Tt.numVerticalIconVertices,lr),B.icon.placedSymbolArray.get(Tt.verticalPlacedIconSymbolIndex).hidden=Ft.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var Tr=B.collisionArrays[St];if(Tr){var Er=new o.Point(0,0);if(Tr.textBox||Tr.verticalTextBox){var Rr=!0;if(ye){var Fr=L.variableOffsets[Yt];Fr?(Er=Hn(Fr.anchor,Fr.width,Fr.height,Fr.textOffset,Fr.textBoxScale),Le&&Er._rotate(Ie?L.transform.angle:-L.transform.angle)):Rr=!1}Tr.textBox&&fr(B.textCollisionBox.collisionVertexArray,Ft.text.placed,!Rr||Sn,Er.x,Er.y),Tr.verticalTextBox&&fr(B.textCollisionBox.collisionVertexArray,Ft.text.placed,!Rr||Bn,Er.x,Er.y)}var jr=!!(!Bn&&Tr.verticalIconBox);Tr.iconBox&&fr(B.iconCollisionBox.collisionVertexArray,Ft.icon.placed,jr,Ue?Er.x:0,Ue?Er.y:0),Tr.verticalIconBox&&fr(B.iconCollisionBox.collisionVertexArray,Ft.icon.placed,!jr,Ue?Er.x:0,Ue?Er.y:0)}}},ft=0;ft<B.symbolInstances.length;ft++)lt(ft);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var xt=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=xt.invProjMatrix,B.placementViewportMatrix=xt.viewportMatrix,B.collisionCircleArray=xt.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},Yn.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yn.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},Yn.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},Yn.prototype.stillRecent=function(B,G){var H=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*H>B},Yn.prototype.setStale=function(){this.stale=!0};var Xt=Math.pow(2,25),pn=Math.pow(2,24),bt=Math.pow(2,17),Ut=Math.pow(2,16),Kt=Math.pow(2,9),un=Math.pow(2,8),cn=Math.pow(2,1);function vn(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var G=B.placed?1:0,H=Math.floor(127*B.opacity);return H*Xt+G*pn+H*bt+G*Ut+H*Kt+G*un+H*cn+G}var tn=0,Vt=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Vt.prototype.continuePlacement=function(B,G,H,L,q){for(var $=this._bucketParts;this._currentTileIndex<B.length;){var ne=B[this._currentTileIndex];if(G.getBucketParts($,L,ne,this._sortAcrossTiles),this._currentTileIndex++,q())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,$.sort(function(ye,Le){return ye.sortKey-Le.sortKey}));this._currentPartIndex<$.length;){var ue=$[this._currentPartIndex];if(G.placeLayerBucketPart(ue,this._seenCrossTileIDs,H),this._currentPartIndex++,q())return!0}return!1};var Gt=function(B,G,H,L,q,$,ne){this.placement=new Yn(B,q,$,ne),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=L,this._done=!1};Gt.prototype.isDone=function(){return this._done},Gt.prototype.continuePlacement=function(B,G,H){for(var L=this,q=o.browser.now(),$=function(){var ye=o.browser.now()-q;return!L._forceFullPlacement&&ye>2};this._currentPlacementIndex>=0;){var ne=G[B[this._currentPlacementIndex]],ue=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=ue)&&(!ne.maxzoom||ne.maxzoom>ue)){if(this._inProgressLayer||(this._inProgressLayer=new Vt(ne)),this._inProgressLayer.continuePlacement(H[ne.source],this.placement,this._showCollisionBoxes,ne,$))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Gt.prototype.commit=function(B){return this.placement.commit(B),this.placement};var nn=512/o.EXTENT/2,sn=function(B,G,H){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var L=0;L<G.length;L++){var q=G.get(L),$=q.key;this.indexedSymbolInstances[$]||(this.indexedSymbolInstances[$]=[]),this.indexedSymbolInstances[$].push({crossTileID:q.crossTileID,coord:this.getScaledCoordinates(q,B)})}};sn.prototype.getScaledCoordinates=function(B,G){var H=G.canonical.z-this.tileID.canonical.z,L=nn/Math.pow(2,H);return{x:Math.floor((G.canonical.x*o.EXTENT+B.anchorX)*L),y:Math.floor((G.canonical.y*o.EXTENT+B.anchorY)*L)}},sn.prototype.findMatches=function(B,G,H){for(var L=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),q=0;q<B.length;q++){var $=B.get(q);if(!$.crossTileID){var ne=this.indexedSymbolInstances[$.key];if(ne)for(var ue=this.getScaledCoordinates($,G),ye=0,Le=ne;ye<Le.length;ye+=1){var Ie=Le[ye];if(Math.abs(Ie.coord.x-ue.x)<=L&&Math.abs(Ie.coord.y-ue.y)<=L&&!H[Ie.crossTileID]){H[Ie.crossTileID]=!0,$.crossTileID=Ie.crossTileID;break}}}}};var wn=function(){this.maxCrossTileID=0};wn.prototype.generate=function(){return++this.maxCrossTileID};var An=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};An.prototype.handleWrapJump=function(B){var G=Math.round((B-this.lng)/360);if(G!==0)for(var H in this.indexes){var L=this.indexes[H],q={};for(var $ in L){var ne=L[$];ne.tileID=ne.tileID.unwrapTo(ne.tileID.wrap+G),q[ne.tileID.key]=ne}this.indexes[H]=q}this.lng=B},An.prototype.addBucket=function(B,G,H){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var L=0;L<G.symbolInstances.length;L++)G.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var q=this.usedCrossTileIDs[B.overscaledZ];for(var $ in this.indexes){var ne=this.indexes[$];if(Number($)>B.overscaledZ)for(var ue in ne){var ye=ne[ue];ye.tileID.isChildOf(B)&&ye.findMatches(G.symbolInstances,B,q)}else{var Le=ne[B.scaledTo(Number($)).key];Le&&Le.findMatches(G.symbolInstances,B,q)}}for(var Ie=0;Ie<G.symbolInstances.length;Ie++){var Ue=G.symbolInstances.get(Ie);Ue.crossTileID||(Ue.crossTileID=H.generate(),q[Ue.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new sn(B,G.symbolInstances,G.bucketInstanceId),!0},An.prototype.removeBucketCrossTileIDs=function(B,G){for(var H in G.indexedSymbolInstances)for(var L=0,q=G.indexedSymbolInstances[H];L<q.length;L+=1){var $=q[L];delete this.usedCrossTileIDs[B][$.crossTileID]}},An.prototype.removeStaleBuckets=function(B){var G=!1;for(var H in this.indexes){var L=this.indexes[H];for(var q in L)B[L[q].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,L[q]),delete L[q],G=!0)}return G};var zn=function(){this.layerIndexes={},this.crossTileIDs=new wn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};zn.prototype.addLayer=function(B,G,H){var L=this.layerIndexes[B.id];L===void 0&&(L=this.layerIndexes[B.id]=new An);var q=!1,$={};L.handleWrapJump(H);for(var ne=0,ue=G;ne<ue.length;ne+=1){var ye=ue[ne],Le=ye.getBucket(B);Le&&B.id===Le.layerIds[0]&&(Le.bucketInstanceId||(Le.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(ye.tileID,Le,this.crossTileIDs)&&(q=!0),$[Le.bucketInstanceId]=!0)}return L.removeStaleBuckets($)&&(q=!0),q},zn.prototype.pruneUnusedLayers=function(B){var G={};for(var H in B.forEach(function(L){G[L]=!0}),this.layerIndexes)G[H]||delete this.layerIndexes[H]};var Fn=function(B,G){return o.emitValidationErrors(B,G&&G.filter(function(H){return H.identifier!=="source.canvas"}))},Xn=o.pick(yt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),jn=o.pick(yt,["setCenter","setZoom","setBearing","setPitch"]),Qn=function(){var B={},G=o.styleSpec.$version;for(var H in o.styleSpec.$root){var L=o.styleSpec.$root[H];if(L.required){var q;(q=H==="version"?G:L.type==="array"?[]:{})!=null&&(B[H]=q)}}return B}(),Jn=function(B){function G(H,L){var q=this;L===void 0&&(L={}),B.call(this),this.map=H,this.dispatcher=new O(gt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new m(H._requestManager,L.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new zn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var $=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(ne){var ue={pluginStatus:ne.pluginStatus,pluginURL:ne.pluginURL};$.dispatcher.broadcast("syncRTLPluginState",ue,function(ye,Le){if(o.triggerPluginCompletionEvent(ye),Le&&Le.every(function(Ue){return Ue}))for(var Ie in $.sourceCaches)$.sourceCaches[Ie].reload()})}),this.on("data",function(ne){if(ne.dataType==="source"&&ne.sourceDataType==="metadata"){var ue=q.sourceCaches[ne.sourceId];if(ue){var ye=ue.getSource();if(ye&&ye.vectorLayerIds)for(var Le in q._layers){var Ie=q._layers[Le];Ie.source===ye.id&&q._validateLayer(Ie)}}}})}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(H,L){var q=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var $=typeof L.validate=="boolean"?L.validate:!o.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,L.accessToken);var ne=this.map._requestManager.transformRequest(H,o.ResourceType.Style);this._request=o.getJSON(ne,function(ue,ye){q._request=null,ue?q.fire(new o.ErrorEvent(ue)):ye&&q._load(ye,$)})},G.prototype.loadJSON=function(H,L){var q=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){q._request=null,q._load(H,L.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Qn,!1)},G.prototype._load=function(H,L){if(!L||!Fn(this,o.validateStyle(H))){for(var q in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(q,H.sources[q],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var $=kt(this.stylesheet.layers);this._order=$.map(function(Le){return Le.id}),this._layers={},this._serializedLayers={};for(var ne=0,ue=$;ne<ue.length;ne+=1){var ye=ue[ne];(ye=o.createStyleLayer(ye)).setEventedParent(this,{layer:{id:ye.id}}),this._layers[ye.id]=ye,this._serializedLayers[ye.id]=ye.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},G.prototype._loadSprite=function(H){var L=this;this._spriteRequest=function(q,$,ne){var ue,ye,Le,Ie=o.browser.devicePixelRatio>1?"@2x":"",Ue=o.getJSON($.transformRequest($.normalizeSpriteURL(q,Ie,".json"),o.ResourceType.SpriteJSON),function(lt,ft){Ue=null,Le||(Le=lt,ue=ft,Qe())}),qe=o.getImage($.transformRequest($.normalizeSpriteURL(q,Ie,".png"),o.ResourceType.SpriteImage),function(lt,ft){qe=null,Le||(Le=lt,ye=ft,Qe())});function Qe(){if(Le)ne(Le);else if(ue&&ye){var lt=o.browser.getImageData(ye),ft={};for(var xt in ue){var St=ue[xt],Tt=St.width,zt=St.height,Et=St.x,Yt=St.y,qt=St.sdf,Ft=St.pixelRatio,fn=St.stretchX,dn=St.stretchY,kn=St.content,Sn=new o.RGBAImage({width:Tt,height:zt});o.RGBAImage.copy(lt,Sn,{x:Et,y:Yt},{x:0,y:0},{width:Tt,height:zt}),ft[xt]={data:Sn,pixelRatio:Ft,sdf:qt,stretchX:fn,stretchY:dn,content:kn}}ne(null,ft)}}return{cancel:function(){Ue&&(Ue.cancel(),Ue=null),qe&&(qe.cancel(),qe=null)}}}(H,this.map._requestManager,function(q,$){if(L._spriteRequest=null,q)L.fire(new o.ErrorEvent(q));else if($)for(var ne in $)L.imageManager.addImage(ne,$[ne]);L.imageManager.setLoaded(!0),L._availableImages=L.imageManager.listImages(),L.dispatcher.broadcast("setImages",L._availableImages),L.fire(new o.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(H){var L=this.sourceCaches[H.source];if(L){var q=H.sourceLayer;if(q){var $=L.getSource();($.type==="geojson"||$.vectorLayerIds&&$.vectorLayerIds.indexOf(q)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+q+'" does not exist on source "'+$.id+'" as specified by style layer "'+H.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(H){for(var L=[],q=0,$=H;q<$.length;q+=1){var ne=$[q],ue=this._layers[ne];ue.type!=="custom"&&L.push(ue.serialize())}return L},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var L in this._layers)if(this._layers[L].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(H){if(this._loaded){var L=this._changed;if(this._changed){var q=Object.keys(this._updatedLayers),$=Object.keys(this._removedLayers);for(var ne in(q.length||$.length)&&this._updateWorkerLayers(q,$),this._updatedSources){var ue=this._updatedSources[ne];ue==="reload"?this._reloadSource(ne):ue==="clear"&&this._clearSource(ne)}for(var ye in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ye].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}var Le={};for(var Ie in this.sourceCaches){var Ue=this.sourceCaches[Ie];Le[Ie]=Ue.used,Ue.used=!1}for(var qe=0,Qe=this._order;qe<Qe.length;qe+=1){var lt=Qe[qe],ft=this._layers[lt];ft.recalculate(H,this._availableImages),!ft.isHidden(H.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var xt in Le){var St=this.sourceCaches[xt];Le[xt]!==St.used&&St.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:xt}))}this.light.recalculate(H),this.z=H.zoom,L&&this.fire(new o.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var L in this.sourceCaches)this.sourceCaches[L].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},G.prototype._updateWorkerLayers=function(H,L){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:L})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(H){var L=this;if(this._checkLoaded(),Fn(this,o.validateStyle(H)))return!1;(H=o.clone$1(H)).layers=kt(H.layers);var q=Ht(this.serialize(),H).filter(function(ne){return!(ne.command in jn)});if(q.length===0)return!1;var $=q.filter(function(ne){return!(ne.command in Xn)});if($.length>0)throw new Error("Unimplemented: "+$.map(function(ne){return ne.command}).join(", ")+".");return q.forEach(function(ne){ne.command!=="setTransition"&&L[ne.command].apply(L,ne.args)}),this.stylesheet=H,!0},G.prototype.addImage=function(H,L){if(this.getImage(H))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,L),this._afterImageUpdated(H)},G.prototype.updateImage=function(H,L){this.imageManager.updateImage(H,L)},G.prototype.getImage=function(H){return this.imageManager.getImage(H)},G.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._afterImageUpdated(H)},G.prototype._afterImageUpdated=function(H){this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(H,L,q){var $=this;if(q===void 0&&(q={}),this._checkLoaded(),this.sourceCaches[H]!==void 0)throw new Error("There is already a source with this ID");if(!L.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(L).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(L.type)>=0&&this._validate(o.validateStyle.source,"sources."+H,L,null,q))){this.map&&this.map._collectResourceTiming&&(L.collectResourceTiming=!0);var ne=this.sourceCaches[H]=new it(H,L,this.dispatcher);ne.style=this,ne.setEventedParent(this,function(){return{isSourceLoaded:$.loaded(),source:ne.serialize(),sourceId:H}}),ne.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(H){if(this._checkLoaded(),this.sourceCaches[H]===void 0)throw new Error("There is no source with this ID");for(var L in this._layers)if(this._layers[L].source===H)return this.fire(new o.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+L+'" is using it.')));var q=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],q.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),q.setEventedParent(null),q.clearTiles(),q.onRemove&&q.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(H,L){this._checkLoaded(),this.sourceCaches[H].getSource().setData(L),this._changed=!0},G.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},G.prototype.addLayer=function(H,L,q){q===void 0&&(q={}),this._checkLoaded();var $=H.id;if(this.getLayer($))this.fire(new o.ErrorEvent(new Error('Layer with id "'+$+'" already exists on this map')));else{var ne;if(H.type==="custom"){if(Fn(this,o.validateCustomStyleLayer(H)))return;ne=o.createStyleLayer(H)}else{if(typeof H.source=="object"&&(this.addSource($,H.source),H=o.clone$1(H),H=o.extend(H,{source:$})),this._validate(o.validateStyle.layer,"layers."+$,H,{arrayIndex:-1},q))return;ne=o.createStyleLayer(H),this._validateLayer(ne),ne.setEventedParent(this,{layer:{id:$}}),this._serializedLayers[ne.id]=ne.serialize()}var ue=L?this._order.indexOf(L):this._order.length;if(L&&ue===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.')));else{if(this._order.splice(ue,0,$),this._layerOrderChanged=!0,this._layers[$]=ne,this._removedLayers[$]&&ne.source&&ne.type!=="custom"){var ye=this._removedLayers[$];delete this._removedLayers[$],ye.type!==ne.type?this._updatedSources[ne.source]="clear":(this._updatedSources[ne.source]="reload",this.sourceCaches[ne.source].pause())}this._updateLayer(ne),ne.onAdd&&ne.onAdd(this.map)}}},G.prototype.moveLayer=function(H,L){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==L){var q=this._order.indexOf(H);this._order.splice(q,1);var $=L?this._order.indexOf(L):this._order.length;L&&$===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.'))):(this._order.splice($,0,H),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(H){this._checkLoaded();var L=this._layers[H];if(L){L.setEventedParent(null);var q=this._order.indexOf(H);this._order.splice(q,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=L,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],L.onRemove&&L.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(H){return this._layers[H]},G.prototype.hasLayer=function(H){return H in this._layers},G.prototype.setLayerZoomRange=function(H,L,q){this._checkLoaded();var $=this.getLayer(H);$?$.minzoom===L&&$.maxzoom===q||(L!=null&&($.minzoom=L),q!=null&&($.maxzoom=q),this._updateLayer($)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(H,L,q){q===void 0&&(q={}),this._checkLoaded();var $=this.getLayer(H);if($){if(!o.deepEqual($.filter,L))return L==null?($.filter=void 0,void this._updateLayer($)):void(this._validate(o.validateStyle.filter,"layers."+$.id+".filter",L,null,q)||($.filter=o.clone$1(L),this._updateLayer($)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(H){return o.clone$1(this.getLayer(H).filter)},G.prototype.setLayoutProperty=function(H,L,q,$){$===void 0&&($={}),this._checkLoaded();var ne=this.getLayer(H);ne?o.deepEqual(ne.getLayoutProperty(L),q)||(ne.setLayoutProperty(L,q,$),this._updateLayer(ne)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(H,L){var q=this.getLayer(H);if(q)return q.getLayoutProperty(L);this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(H,L,q,$){$===void 0&&($={}),this._checkLoaded();var ne=this.getLayer(H);ne?o.deepEqual(ne.getPaintProperty(L),q)||(ne.setPaintProperty(L,q,$)&&this._updateLayer(ne),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(H,L){return this.getLayer(H).getPaintProperty(L)},G.prototype.setFeatureState=function(H,L){this._checkLoaded();var q=H.source,$=H.sourceLayer,ne=this.sourceCaches[q];if(ne!==void 0){var ue=ne.getSource().type;ue==="geojson"&&$?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ue!=="vector"||$?(H.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),ne.setFeatureState($,H.id,L)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(H,L){this._checkLoaded();var q=H.source,$=this.sourceCaches[q];if($!==void 0){var ne=$.getSource().type,ue=ne==="vector"?H.sourceLayer:void 0;ne!=="vector"||ue?L&&typeof H.id!="string"&&typeof H.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):$.removeFeatureState(ue,H.id,L):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(H){this._checkLoaded();var L=H.source,q=H.sourceLayer,$=this.sourceCaches[L];if($!==void 0){if($.getSource().type!=="vector"||q)return H.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),$.getFeatureState(q,H.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return H!==void 0})},G.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&this.sourceCaches[H.source].getSource().type!=="raster"&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(H){for(var L=this,q=function(kn){return L._layers[kn].type==="fill-extrusion"},$={},ne=[],ue=this._order.length-1;ue>=0;ue--){var ye=this._order[ue];if(q(ye)){$[ye]=ue;for(var Le=0,Ie=H;Le<Ie.length;Le+=1){var Ue=Ie[Le][ye];if(Ue)for(var qe=0,Qe=Ue;qe<Qe.length;qe+=1){var lt=Qe[qe];ne.push(lt)}}}}ne.sort(function(kn,Sn){return Sn.intersectionZ-kn.intersectionZ});for(var ft=[],xt=this._order.length-1;xt>=0;xt--){var St=this._order[xt];if(q(St))for(var Tt=ne.length-1;Tt>=0;Tt--){var zt=ne[Tt].feature;if($[zt.layer.id]<xt)break;ft.push(zt),ne.pop()}else for(var Et=0,Yt=H;Et<Yt.length;Et+=1){var qt=Yt[Et][St];if(qt)for(var Ft=0,fn=qt;Ft<fn.length;Ft+=1){var dn=fn[Ft];ft.push(dn.feature)}}}return ft},G.prototype.queryRenderedFeatures=function(H,L,q){L&&L.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",L.filter,null,L);var $={};if(L&&L.layers){if(!Array.isArray(L.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ne=0,ue=L.layers;ne<ue.length;ne+=1){var ye=ue[ne],Le=this._layers[ye];if(!Le)return this.fire(new o.ErrorEvent(new Error("The layer '"+ye+"' does not exist in the map's style and cannot be queried for features."))),[];$[Le.source]=!0}}var Ie=[];for(var Ue in L.availableImages=this._availableImages,this.sourceCaches)L.layers&&!$[Ue]||Ie.push(X(this.sourceCaches[Ue],this._layers,this._serializedLayers,H,L,q));return this.placement&&Ie.push(function(qe,Qe,lt,ft,xt,St,Tt){for(var zt={},Et=St.queryRenderedSymbols(ft),Yt=[],qt=0,Ft=Object.keys(Et).map(Number);qt<Ft.length;qt+=1){var fn=Ft[qt];Yt.push(Tt[fn])}Yt.sort(K);for(var dn=function(){var sr=Sn[kn],qn=sr.featureIndex.lookupSymbolFeatures(Et[sr.bucketInstanceId],Qe,sr.bucketIndex,sr.sourceLayerIndex,xt.filter,xt.layers,xt.availableImages,qe);for(var ir in qn){var vr=zt[ir]=zt[ir]||[],Ar=qn[ir];Ar.sort(function(lr,Tr){var Er=sr.featureSortOrder;if(Er){var Rr=Er.indexOf(lr.featureIndex);return Er.indexOf(Tr.featureIndex)-Rr}return Tr.featureIndex-lr.featureIndex});for(var Kn=0,ar=Ar;Kn<ar.length;Kn+=1){var br=ar[Kn];vr.push(br)}}},kn=0,Sn=Yt;kn<Sn.length;kn+=1)dn();var Bn=function(sr){zt[sr].forEach(function(qn){var ir=qn.feature,vr=qe[sr],Ar=lt[vr.source].getFeatureState(ir.layer["source-layer"],ir.id);ir.source=ir.layer.source,ir.layer["source-layer"]&&(ir.sourceLayer=ir.layer["source-layer"]),ir.state=Ar})};for(var $n in zt)Bn($n);return zt}(this._layers,this._serializedLayers,this.sourceCaches,H,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ie)},G.prototype.querySourceFeatures=function(H,L){L&&L.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",L.filter,null,L);var q=this.sourceCaches[H];return q?function($,ne){for(var ue=$.getRenderableIds().map(function(Qe){return $.getTileByID(Qe)}),ye=[],Le={},Ie=0;Ie<ue.length;Ie++){var Ue=ue[Ie],qe=Ue.tileID.canonical.key;Le[qe]||(Le[qe]=!0,Ue.querySourceFeatures(ye,ne))}return ye}(q,L):[]},G.prototype.addSourceType=function(H,L,q){return G.getSourceType(H)?q(new Error('A source type called "'+H+'" already exists.')):(G.setSourceType(H,L),L.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:L.workerSourceURL},q):q(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(H,L){L===void 0&&(L={}),this._checkLoaded();var q=this.light.getLight(),$=!1;for(var ne in H)if(!o.deepEqual(H[ne],q[ne])){$=!0;break}if($){var ue={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,L),this.light.updateTransitions(ue)}},G.prototype._validate=function(H,L,q,$,ne){return ne===void 0&&(ne={}),(!ne||ne.validate!==!1)&&Fn(this,H.call(o.validateStyle,o.extend({key:L,style:this.serialize(),value:q,styleSpec:o.styleSpec},$)))},G.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var L in this.sourceCaches)this.sourceCaches[L].clearTiles(),this.sourceCaches[L].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},G.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},G.prototype._updateSources=function(H){for(var L in this.sourceCaches)this.sourceCaches[L].update(H)},G.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},G.prototype._updatePlacement=function(H,L,q,$,ne){ne===void 0&&(ne=!1);for(var ue=!1,ye=!1,Le={},Ie=0,Ue=this._order;Ie<Ue.length;Ie+=1){var qe=Ue[Ie],Qe=this._layers[qe];if(Qe.type==="symbol"){if(!Le[Qe.source]){var lt=this.sourceCaches[Qe.source];Le[Qe.source]=lt.getRenderableIds(!0).map(function(Et){return lt.getTileByID(Et)}).sort(function(Et,Yt){return Yt.tileID.overscaledZ-Et.tileID.overscaledZ||(Et.tileID.isLessThan(Yt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer(Qe,Le[Qe.source],H.center.lng);ue=ue||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ne=ne||this._layerOrderChanged||q===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),H.zoom))&&(this.pauseablePlacement=new Gt(H,this._order,ne,L,q,$,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),ye=!0),ue&&this.pauseablePlacement.placement.setStale()),ye||ue)for(var xt=0,St=this._order;xt<St.length;xt+=1){var Tt=St[xt],zt=this._layers[Tt];zt.type==="symbol"&&this.placement.updateLayerOpacities(zt,Le[zt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},G.prototype.getImages=function(H,L,q){this.imageManager.getImages(L.icons,q),this._updateTilesForChangedImages();var $=this.sourceCaches[L.source];$&&$.setDependencies(L.tileID.key,L.type,L.icons)},G.prototype.getGlyphs=function(H,L,q){this.glyphManager.getGlyphs(L.stacks,q)},G.prototype.getResource=function(H,L,q){return o.makeRequest(L,q)},G}(o.Evented);Jn.getSourceType=function(B){return te[B]},Jn.setSourceType=function(B,G){te[B]=G},Jn.registerForPluginStateChange=o.registerForPluginStateChange;var Zn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),ur=pa(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),mr=pa(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),hr=pa(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),rr=pa(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),gr=pa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),xr=pa(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Or=pa(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),aa=pa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),oa=pa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ua=pa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ta=pa(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),ka=pa(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Pr=pa(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ha=pa(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),oi=pa(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ya=pa(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),lo=pa(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),uo=pa(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Zi=pa(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Za=pa(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Xi=pa(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ko=pa(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),qo=pa(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Mi=pa(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Si=pa(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ki=pa(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function pa(B,G){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,L=G.match(/attribute ([\w]+) ([\w]+)/g),q=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=G.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=$?$.concat(q):q,ue={};return{fragmentSource:B=B.replace(H,function(ye,Le,Ie,Ue,qe){return ue[qe]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
varying `+Ie+" "+Ue+" "+qe+`;
#else
uniform `+Ie+" "+Ue+" u_"+qe+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qe+`
    `+Ie+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`}),vertexSource:G=G.replace(H,function(ye,Le,Ie,Ue,qe){var Qe=Ue==="float"?"vec2":"vec4",lt=qe.match(/color/)?"color":Qe;return ue[qe]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+Ie+" "+Qe+" a_"+qe+`;
varying `+Ie+" "+Ue+" "+qe+`;
#else
uniform `+Ie+" "+Ue+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = a_"+qe+`;
#else
    `+Ie+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+Ie+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+Ie+" "+Qe+" a_"+qe+`;
#else
uniform `+Ie+" "+Ue+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+Ie+" "+Ue+" "+qe+" = a_"+qe+`;
#else
    `+Ie+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+Ie+" "+Ue+" "+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+Ie+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`}),staticAttributes:L,staticUniforms:ne}}var za=Object.freeze({__proto__:null,prelude:ur,background:mr,backgroundPattern:hr,circle:rr,clippingMask:gr,heatmap:xr,heatmapTexture:Or,collisionBox:aa,collisionCircle:oa,debug:Ua,fill:ta,fillOutline:ka,fillOutlinePattern:Pr,fillPattern:ha,fillExtrusion:oi,fillExtrusionPattern:Ya,hillshadePrepare:lo,hillshade:uo,line:Zi,lineGradient:Za,linePattern:Xi,lineSDF:ko,raster:qo,symbolIcon:Mi,symbolSDF:Si,symbolTextAndIcon:Ki}),co=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ji(B){for(var G=[],H=0;H<B.length;H++)if(B[H]!==null){var L=B[H].split(" ");G.push(L.pop())}return G}co.prototype.bind=function(B,G,H,L,q,$,ne,ue){this.context=B;for(var ye=this.boundPaintVertexBuffers.length!==L.length,Le=0;!ye&&Le<L.length;Le++)this.boundPaintVertexBuffers[Le]!==L[Le]&&(ye=!0);var Ie=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==H||ye||this.boundIndexBuffer!==q||this.boundVertexOffset!==$||this.boundDynamicVertexBuffer!==ne||this.boundDynamicVertexBuffer2!==ue;!B.extVertexArrayObject||Ie?this.freshBind(G,H,L,q,$,ne,ue):(B.bindVertexArrayOES.set(this.vao),ne&&ne.bind(),q&&q.dynamicDraw&&q.bind(),ue&&ue.bind())},co.prototype.freshBind=function(B,G,H,L,q,$,ne){var ue,ye=B.numAttributes,Le=this.context,Ie=Le.gl;if(Le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Le.extVertexArrayObject.createVertexArrayOES(),Le.bindVertexArrayOES.set(this.vao),ue=0,this.boundProgram=B,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=L,this.boundVertexOffset=q,this.boundDynamicVertexBuffer=$,this.boundDynamicVertexBuffer2=ne;else{ue=Le.currentNumAttributes||0;for(var Ue=ye;Ue<ue;Ue++)Ie.disableVertexAttribArray(Ue)}G.enableAttributes(Ie,B);for(var qe=0,Qe=H;qe<Qe.length;qe+=1)Qe[qe].enableAttributes(Ie,B);$&&$.enableAttributes(Ie,B),ne&&ne.enableAttributes(Ie,B),G.bind(),G.setVertexAttribPointers(Ie,B,q);for(var lt=0,ft=H;lt<ft.length;lt+=1){var xt=ft[lt];xt.bind(),xt.setVertexAttribPointers(Ie,B,q)}$&&($.bind(),$.setVertexAttribPointers(Ie,B,q)),L&&L.bind(),ne&&(ne.bind(),ne.setVertexAttribPointers(Ie,B,q)),Le.currentNumAttributes=ye},co.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ri=function(B,G,H,L,q,$){var ne=B.gl;this.program=ne.createProgram();for(var ue=Ji(H.staticAttributes),ye=L?L.getBinderAttributes():[],Le=ue.concat(ye),Ie=H.staticUniforms?Ji(H.staticUniforms):[],Ue=L?L.getBinderUniforms():[],qe=[],Qe=0,lt=Ie.concat(Ue);Qe<lt.length;Qe+=1){var ft=lt[Qe];qe.indexOf(ft)<0&&qe.push(ft)}var xt=L?L.defines():[];$&&xt.push("#define OVERDRAW_INSPECTOR;");var St=xt.concat(ur.fragmentSource,H.fragmentSource).join(`
`),Tt=xt.concat(ur.vertexSource,H.vertexSource).join(`
`),zt=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(zt,St),ne.compileShader(zt),ne.attachShader(this.program,zt);var Et=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(Et,Tt),ne.compileShader(Et),ne.attachShader(this.program,Et),this.attributes={};var Yt={};this.numAttributes=Le.length;for(var qt=0;qt<this.numAttributes;qt++)Le[qt]&&(ne.bindAttribLocation(this.program,qt,Le[qt]),this.attributes[Le[qt]]=qt);ne.linkProgram(this.program),ne.deleteShader(Et),ne.deleteShader(zt);for(var Ft=0;Ft<qe.length;Ft++){var fn=qe[Ft];if(fn&&!Yt[fn]){var dn=ne.getUniformLocation(this.program,fn);dn&&(Yt[fn]=dn)}}this.fixedUniforms=q(B,Yt),this.binderUniforms=L?L.getUniforms(B,Yt):[]}}};function Ao(B,G,H){var L=1/Wn(H,1,G.transform.tileZoom),q=Math.pow(2,H.tileID.overscaledZ),$=H.tileSize*Math.pow(2,G.transform.tileZoom)/q,ne=$*(H.tileID.canonical.x+H.tileID.wrap*q),ue=$*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[L,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,ue>>16],u_pixel_coord_lower:[65535&ne,65535&ue]}}Ri.prototype.draw=function(B,G,H,L,q,$,ne,ue,ye,Le,Ie,Ue,qe,Qe,lt,ft){var xt,St=B.gl;if(!this.failedToCreate){for(var Tt in B.program.set(this.program),B.setDepthMode(H),B.setStencilMode(L),B.setColorMode(q),B.setCullFace($),this.fixedUniforms)this.fixedUniforms[Tt].set(ne[Tt]);Qe&&Qe.setUniforms(B,this.binderUniforms,Ue,{zoom:qe});for(var zt=(xt={},xt[St.LINES]=2,xt[St.TRIANGLES]=3,xt[St.LINE_STRIP]=1,xt)[G],Et=0,Yt=Ie.get();Et<Yt.length;Et+=1){var qt=Yt[Et],Ft=qt.vaos||(qt.vaos={});(Ft[ue]||(Ft[ue]=new co)).bind(B,this,ye,Qe?Qe.getPaintVertexBuffers():[],Le,qt.vertexOffset,lt,ft),St.drawElements(G,qt.primitiveLength*zt,St.UNSIGNED_SHORT,qt.primitiveOffset*zt*2)}}};var $i=function(B,G,H,L){var q=G.style.light,$=q.properties.get("position"),ne=[$.x,$.y,$.z],ue=o.create$1();q.properties.get("anchor")==="viewport"&&o.fromRotation(ue,-G.transform.angle),o.transformMat3(ne,ne,ue);var ye=q.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[ye.r,ye.g,ye.b],u_vertical_gradient:+H,u_opacity:L}},Mo=function(B,G,H,L,q,$,ne){return o.extend($i(B,G,H,L),Ao($,G,ne),{u_height_factor:-Math.pow(2,q.overscaledZ)/ne.tileSize/8})},fo=function(B){return{u_matrix:B}},So=function(B,G,H,L){return o.extend(fo(B),Ao(H,G,L))},Qi=function(B,G){return{u_matrix:B,u_world:G}},Ks=function(B,G,H,L,q){return o.extend(So(B,G,H,L),{u_world:q})},Bs=function(B,G,H,L){var q,$,ne=B.transform;if(L.paint.get("circle-pitch-alignment")==="map"){var ue=Wn(H,1,ne.zoom);q=!0,$=[ue,ue]}else q=!1,$=ne.pixelsToGLUnits;return{u_camera_to_center_distance:ne.cameraToCenterDistance,u_scale_with_map:+(L.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(G.posMatrix,H,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_pitch_with_map:+q,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:$}},Ho=function(B,G,H){var L=Wn(H,1,G.zoom),q=Math.pow(2,G.zoom-H.tileID.overscaledZ),$=H.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:L,u_extrude_scale:[G.pixelsToGLUnits[0]/(L*q),G.pixelsToGLUnits[1]/(L*q)],u_overscale_factor:$}},il=function(B,G,H){return{u_matrix:B,u_inv_matrix:G,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},ol=function(B,G,H){return H===void 0&&(H=1),{u_matrix:B,u_color:G,u_overlay:0,u_overlay_scale:H}},Go=function(B){return{u_matrix:B}},sl=function(B,G,H,L){return{u_matrix:B,u_extrude_scale:Wn(G,1,H),u_intensity:L}},xl=function(B,G,H,L){var q=o.create();o.ortho(q,0,B.width,B.height,0,0,1);var $=B.context.gl;return{u_matrix:q,u_world:[$.drawingBufferWidth,$.drawingBufferHeight],u_image:H,u_color_ramp:L,u_opacity:G.paint.get("heatmap-opacity")}},bl=function(B,G,H){var L=H.paint.get("hillshade-shadow-color"),q=H.paint.get("hillshade-highlight-color"),$=H.paint.get("hillshade-accent-color"),ne=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=B.transform.angle);var ue,ye,Le,Ie=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),Ie),u_image:0,u_latrange:(ue=G.tileID,ye=Math.pow(2,ue.canonical.z),Le=ue.canonical.y,[new o.MercatorCoordinate(0,Le/ye).toLngLat().lat,new o.MercatorCoordinate(0,(Le+1)/ye).toLngLat().lat]),u_light:[H.paint.get("hillshade-exaggeration"),ne],u_shadow:L,u_highlight:q,u_accent:$}},Wo=function(B,G){var H=G.stride,L=o.create();return o.ortho(L,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(L,L,[0,-o.EXTENT,0]),{u_matrix:L,u_image:1,u_dimension:[H,H],u_zoom:B.overscaledZ,u_unpack:G.getUnpackVector()}},eo=function(B,G,H){var L=B.transform;return{u_matrix:Fi(B,G,H),u_ratio:1/Wn(G,1,L.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},as=function(B,G,H,L){return o.extend(eo(B,G,H),{u_image:0,u_image_height:L})},Yo=function(B,G,H,L){var q=B.transform,$=Zo(G,q);return{u_matrix:Fi(B,G,H),u_texsize:G.imageAtlasTexture.size,u_ratio:1/Wn(G,1,q.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[$,L.fromScale,L.toScale],u_fade:L.t,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},bs=function(B,G,H,L,q){var $=B.transform,ne=B.lineAtlas,ue=Zo(G,$),ye=H.layout.get("line-cap")==="round",Le=ne.getDash(L.from,ye),Ie=ne.getDash(L.to,ye),Ue=Le.width*q.fromScale,qe=Ie.width*q.toScale;return o.extend(eo(B,G,H),{u_patternscale_a:[ue/Ue,-Le.height/2],u_patternscale_b:[ue/qe,-Ie.height/2],u_sdfgamma:ne.width/(256*Math.min(Ue,qe)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Le.y,u_tex_y_b:Ie.y,u_mix:q.t})};function Zo(B,G){return 1/Wn(B,1,G.tileZoom)}function Fi(B,G,H){return B.translatePosMatrix(G.tileID.posMatrix,G,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var Js=function(B,G,H,L,q){return{u_matrix:B,u_tl_parent:G,u_scale_parent:H,u_buffer_scale:1,u_fade_t:L.mix,u_opacity:L.opacity*q.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:q.paint.get("raster-brightness-min"),u_brightness_high:q.paint.get("raster-brightness-max"),u_saturation_factor:(ne=q.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:($=q.paint.get("raster-contrast"),$>0?1/(1-$):1+$),u_spin_weights:Eo(q.paint.get("raster-hue-rotate"))};var $,ne};function Eo(B){B*=Math.PI/180;var G=Math.sin(B),H=Math.cos(B);return[(2*H+1)/3,(-Math.sqrt(3)*G-H+1)/3,(Math.sqrt(3)*G-H+1)/3]}var ho,po=function(B,G,H,L,q,$,ne,ue,ye,Le){var Ie=q.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:Ie.cameraToCenterDistance,u_pitch:Ie.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:Ie.width/Ie.height,u_fade_change:q.options.fadeDuration?q.symbolFadeChange:1,u_matrix:$,u_label_plane_matrix:ne,u_coord_matrix:ue,u_is_text:+ye,u_pitch_with_map:+L,u_texsize:Le,u_texture:0}},Lo=function(B,G,H,L,q,$,ne,ue,ye,Le,Ie){var Ue=q.transform;return o.extend(po(B,G,H,L,q,$,ne,ue,ye,Le),{u_gamma_scale:L?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:1})},Ur=function(B,G,H,L,q,$,ne,ue,ye,Le){return o.extend(Lo(B,G,H,L,q,$,ne,ue,!0,ye),{u_texsize_icon:Le,u_texture_icon:1})},is=function(B,G,H){return{u_matrix:B,u_opacity:G,u_color:H}},_l=function(B,G,H,L,q,$){return o.extend(function(ne,ue,ye,Le){var Ie=ye.imageManager.getPattern(ne.from.toString()),Ue=ye.imageManager.getPattern(ne.to.toString()),qe=ye.imageManager.getPixelSize(),Qe=qe.width,lt=qe.height,ft=Math.pow(2,Le.tileID.overscaledZ),xt=Le.tileSize*Math.pow(2,ye.transform.tileZoom)/ft,St=xt*(Le.tileID.canonical.x+Le.tileID.wrap*ft),Tt=xt*Le.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ie.tl,u_pattern_br_a:Ie.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[Qe,lt],u_mix:ue.t,u_pattern_size_a:Ie.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ue.fromScale,u_scale_b:ue.toScale,u_tile_units_to_pixels:1/Wn(Le,1,ye.transform.tileZoom),u_pixel_coord_upper:[St>>16,Tt>>16],u_pixel_coord_lower:[65535&St,65535&Tt]}}(L,$,H,q),{u_matrix:B,u_opacity:G})},Ns={fillExtrusion:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fillExtrusionPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_height_factor:new o.Uniform1f(B,G.u_height_factor),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fill:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},fillPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},fillOutline:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world)}},fillOutlinePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},circle:function(B,G){return{u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(B,G.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},collisionBox:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(B,G.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_overscale_factor:new o.Uniform1f(B,G.u_overscale_factor)}},collisionCircle:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_inv_matrix:new o.UniformMatrix4f(B,G.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(B,G.u_viewport_size)}},debug:function(B,G){return{u_color:new o.UniformColor(B,G.u_color),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_overlay:new o.Uniform1i(B,G.u_overlay),u_overlay_scale:new o.Uniform1f(B,G.u_overlay_scale)}},clippingMask:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmap:function(B,G){return{u_extrude_scale:new o.Uniform1f(B,G.u_extrude_scale),u_intensity:new o.Uniform1f(B,G.u_intensity),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmapTexture:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_color_ramp:new o.Uniform1i(B,G.u_color_ramp),u_opacity:new o.Uniform1f(B,G.u_opacity)}},hillshade:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_latrange:new o.Uniform2f(B,G.u_latrange),u_light:new o.Uniform2f(B,G.u_light),u_shadow:new o.UniformColor(B,G.u_shadow),u_highlight:new o.UniformColor(B,G.u_highlight),u_accent:new o.UniformColor(B,G.u_accent)}},hillshadePrepare:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_dimension:new o.Uniform2f(B,G.u_dimension),u_zoom:new o.Uniform1f(B,G.u_zoom),u_unpack:new o.Uniform4f(B,G.u_unpack)}},line:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels)}},lineGradient:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_image:new o.Uniform1i(B,G.u_image),u_image_height:new o.Uniform1f(B,G.u_image_height)}},linePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_texsize:new o.Uniform2f(B,G.u_texsize),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_image:new o.Uniform1i(B,G.u_image),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},lineSDF:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(B,G.u_patternscale_a),u_patternscale_b:new o.Uniform2f(B,G.u_patternscale_b),u_sdfgamma:new o.Uniform1f(B,G.u_sdfgamma),u_image:new o.Uniform1i(B,G.u_image),u_tex_y_a:new o.Uniform1f(B,G.u_tex_y_a),u_tex_y_b:new o.Uniform1f(B,G.u_tex_y_b),u_mix:new o.Uniform1f(B,G.u_mix)}},raster:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_tl_parent:new o.Uniform2f(B,G.u_tl_parent),u_scale_parent:new o.Uniform1f(B,G.u_scale_parent),u_buffer_scale:new o.Uniform1f(B,G.u_buffer_scale),u_fade_t:new o.Uniform1f(B,G.u_fade_t),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image0:new o.Uniform1i(B,G.u_image0),u_image1:new o.Uniform1i(B,G.u_image1),u_brightness_low:new o.Uniform1f(B,G.u_brightness_low),u_brightness_high:new o.Uniform1f(B,G.u_brightness_high),u_saturation_factor:new o.Uniform1f(B,G.u_saturation_factor),u_contrast_factor:new o.Uniform1f(B,G.u_contrast_factor),u_spin_weights:new o.Uniform3f(B,G.u_spin_weights)}},symbolIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture)}},symbolSDF:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},symbolTextAndIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texsize_icon:new o.Uniform2f(B,G.u_texsize_icon),u_texture:new o.Uniform1i(B,G.u_texture),u_texture_icon:new o.Uniform1i(B,G.u_texture_icon),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},background:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_color:new o.UniformColor(B,G.u_color)}},backgroundPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image:new o.Uniform1i(B,G.u_image),u_pattern_tl_a:new o.Uniform2f(B,G.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(B,G.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(B,G.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(B,G.u_pattern_br_b),u_texsize:new o.Uniform2f(B,G.u_texsize),u_mix:new o.Uniform1f(B,G.u_mix),u_pattern_size_a:new o.Uniform2f(B,G.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(B,G.u_pattern_size_b),u_scale_a:new o.Uniform1f(B,G.u_scale_a),u_scale_b:new o.Uniform1f(B,G.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(B,G.u_tile_units_to_pixels)}}};function os(B,G,H,L,q,$,ne){for(var ue=B.context,ye=ue.gl,Le=B.useProgram("collisionBox"),Ie=[],Ue=0,qe=0,Qe=0;Qe<L.length;Qe++){var lt=L[Qe],ft=G.getTile(lt),xt=ft.getBucket(H);if(xt){var St=lt.posMatrix;q[0]===0&&q[1]===0||(St=B.translatePosMatrix(lt.posMatrix,ft,q,$));var Tt=ne?xt.textCollisionBox:xt.iconCollisionBox,zt=xt.collisionCircleArray;if(zt.length>0){var Et=o.create(),Yt=St;o.mul(Et,xt.placementInvProjMatrix,B.transform.glCoordMatrix),o.mul(Et,Et,xt.placementViewportMatrix),Ie.push({circleArray:zt,circleOffset:qe,transform:Yt,invTransform:Et}),qe=Ue+=zt.length/4}Tt&&Le.draw(ue,ye.LINES,Ot.disabled,He.disabled,B.colorModeForRenderPass(),Be.disabled,Ho(St,B.transform,ft),H.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,B.transform.zoom,null,null,Tt.collisionVertexBuffer)}}if(ne&&Ie.length){var qt=B.useProgram("collisionCircle"),Ft=new o.StructArrayLayout2f1f2i16;Ft.resize(4*Ue),Ft._trim();for(var fn=0,dn=0,kn=Ie;dn<kn.length;dn+=1)for(var Sn=kn[dn],Bn=0;Bn<Sn.circleArray.length/4;Bn++){var $n=4*Bn,sr=Sn.circleArray[$n+0],qn=Sn.circleArray[$n+1],ir=Sn.circleArray[$n+2],vr=Sn.circleArray[$n+3];Ft.emplace(fn++,sr,qn,ir,vr,0),Ft.emplace(fn++,sr,qn,ir,vr,1),Ft.emplace(fn++,sr,qn,ir,vr,2),Ft.emplace(fn++,sr,qn,ir,vr,3)}(!ho||ho.length<2*Ue)&&(ho=function(Er){var Rr=2*Er,Fr=new o.StructArrayLayout3ui6;Fr.resize(Rr),Fr._trim();for(var jr=0;jr<Rr;jr++){var qr=6*jr;Fr.uint16[qr+0]=4*jr+0,Fr.uint16[qr+1]=4*jr+1,Fr.uint16[qr+2]=4*jr+2,Fr.uint16[qr+3]=4*jr+2,Fr.uint16[qr+4]=4*jr+3,Fr.uint16[qr+5]=4*jr+0}return Fr}(Ue));for(var Ar=ue.createIndexBuffer(ho,!0),Kn=ue.createVertexBuffer(Ft,o.collisionCircleLayout.members,!0),ar=0,br=Ie;ar<br.length;ar+=1){var lr=br[ar],Tr=il(lr.transform,lr.invTransform,B.transform);qt.draw(ue,ye.TRIANGLES,Ot.disabled,He.disabled,B.colorModeForRenderPass(),Be.disabled,Tr,H.id,Kn,Ar,o.SegmentVector.simpleSegment(0,2*lr.circleOffset,lr.circleArray.length,lr.circleArray.length/2),null,B.transform.zoom,null,null,null)}Kn.destroy(),Ar.destroy()}}var ll=o.identity(new Float32Array(16));function wl(B,G,H,L,q,$){var ne=o.getAnchorAlignment(B),ue=-(ne.horizontalAlign-.5)*G,ye=-(ne.verticalAlign-.5)*H,Le=o.evaluateVariableOffset(B,L);return new o.Point((ue/q+Le[0])*$,(ye/q+Le[1])*$)}function js(B,G,H,L,q,$,ne,ue,ye,Le,Ie){var Ue=B.text.placedSymbolArray,qe=B.text.dynamicLayoutVertexArray,Qe=B.icon.dynamicLayoutVertexArray,lt={};qe.clear();for(var ft=0;ft<Ue.length;ft++){var xt=Ue.get(ft),St=B.allowVerticalPlacement&&!xt.placedOrientation,Tt=xt.hidden||!xt.crossTileID||St?null:L[xt.crossTileID];if(Tt){var zt=new o.Point(xt.anchorX,xt.anchorY),Et=Zt(zt,H?ue:ne),Yt=an($.cameraToCenterDistance,Et.signedDistanceFromCamera),qt=q.evaluateSizeForFeature(B.textSizeData,Le,xt)*Yt/o.ONE_EM;H&&(qt*=B.tilePixelRatio/ye);for(var Ft=Tt.width,fn=Tt.height,dn=wl(Tt.anchor,Ft,fn,Tt.textOffset,Tt.textBoxScale,qt),kn=H?Zt(zt.add(dn),ne).point:Et.point.add(G?dn.rotate(-$.angle):dn),Sn=B.allowVerticalPlacement&&xt.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Bn=0;Bn<xt.numGlyphs;Bn++)o.addDynamicAttributes(qe,kn,Sn);Ie&&xt.associatedIconIndex>=0&&(lt[xt.associatedIconIndex]={shiftedAnchor:kn,angle:Sn})}else In(xt.numGlyphs,qe)}if(Ie){Qe.clear();for(var $n=B.icon.placedSymbolArray,sr=0;sr<$n.length;sr++){var qn=$n.get(sr);if(qn.hidden)In(qn.numGlyphs,Qe);else{var ir=lt[sr];if(ir)for(var vr=0;vr<qn.numGlyphs;vr++)o.addDynamicAttributes(Qe,ir.shiftedAnchor,ir.angle);else In(qn.numGlyphs,Qe)}}B.icon.dynamicLayoutVertexBuffer.updateData(Qe)}B.text.dynamicLayoutVertexBuffer.updateData(qe)}function Tl(B,G,H){return H.iconsInText&&G?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function Co(B,G,H,L,q,$,ne,ue,ye,Le,Ie,Ue){for(var qe=B.context,Qe=qe.gl,lt=B.transform,ft=ue==="map",xt=ye==="map",St=ft&&H.layout.get("symbol-placement")!=="point",Tt=ft&&!xt&&!St,zt=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,Et=!1,Yt=B.depthModeForSublayer(0,Ot.ReadOnly),qt=H.layout.get("text-variable-anchor"),Ft=[],fn=0,dn=L;fn<dn.length;fn+=1){var kn=dn[fn],Sn=G.getTile(kn),Bn=Sn.getBucket(H);if(Bn){var $n=q?Bn.text:Bn.icon;if($n&&$n.segments.get().length){var sr=$n.programConfigurations.get(H.id),qn=q||Bn.sdfIcons,ir=q?Bn.textSizeData:Bn.iconSizeData,vr=xt||lt.pitch!==0,Ar=B.useProgram(Tl(qn,q,Bn),sr),Kn=o.evaluateSizeForZoom(ir,lt.zoom),ar=void 0,br=[0,0],lr=void 0,Tr=void 0,Er=null,Rr=void 0;if(q){if(lr=Sn.glyphAtlasTexture,Tr=Qe.LINEAR,ar=Sn.glyphAtlasTexture.size,Bn.iconsInText){br=Sn.imageAtlasTexture.size,Er=Sn.imageAtlasTexture;var Fr=ir.kind==="composite"||ir.kind==="camera";Rr=vr||B.options.rotating||B.options.zooming||Fr?Qe.LINEAR:Qe.NEAREST}}else{var jr=H.layout.get("icon-size").constantOr(0)!==1||Bn.iconsNeedLinear;lr=Sn.imageAtlasTexture,Tr=qn||B.options.rotating||B.options.zooming||jr||vr?Qe.LINEAR:Qe.NEAREST,ar=Sn.imageAtlasTexture.size}var qr=Wn(Sn,1,B.transform.zoom),ua=Tn(kn.posMatrix,xt,ft,B.transform,qr),Aa=hn(kn.posMatrix,xt,ft,B.transform,qr),ri=qt&&Bn.hasTextData(),Ba=H.layout.get("icon-text-fit")!=="none"&&ri&&Bn.hasIconData();St&&ln(Bn,kn.posMatrix,B,q,ua,Aa,xt,Le);var Ka=B.translatePosMatrix(kn.posMatrix,Sn,$,ne),ga=St||q&&qt||Ba?ll:ua,Gr=B.translatePosMatrix(Aa,Sn,$,ne,!0),xa=qn&&H.paint.get(q?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ra={program:Ar,buffers:$n,uniformValues:qn?Bn.iconsInText?Ur(ir.kind,Kn,Tt,xt,B,Ka,ga,Gr,ar,br):Lo(ir.kind,Kn,Tt,xt,B,Ka,ga,Gr,q,ar):po(ir.kind,Kn,Tt,xt,B,Ka,ga,Gr,q,ar),atlasTexture:lr,atlasTextureIcon:Er,atlasInterpolation:Tr,atlasInterpolationIcon:Rr,isSDF:qn,hasHalo:xa};if(zt&&Bn.canOverlap){Et=!0;for(var Zr=0,ba=$n.segments.get();Zr<ba.length;Zr+=1){var Ma=ba[Zr];Ft.push({segments:new o.SegmentVector([Ma]),sortKey:Ma.sortKey,state:ra})}}else Ft.push({segments:$n.segments,sortKey:0,state:ra})}}}Et&&Ft.sort(function(Cs,bo){return Cs.sortKey-bo.sortKey});for(var Ia=0,vs=Ft;Ia<vs.length;Ia+=1){var ms=vs[Ia],Xr=ms.state;if(qe.activeTexture.set(Qe.TEXTURE0),Xr.atlasTexture.bind(Xr.atlasInterpolation,Qe.CLAMP_TO_EDGE),Xr.atlasTextureIcon&&(qe.activeTexture.set(Qe.TEXTURE1),Xr.atlasTextureIcon&&Xr.atlasTextureIcon.bind(Xr.atlasInterpolationIcon,Qe.CLAMP_TO_EDGE)),Xr.isSDF){var Gs=Xr.uniformValues;Xr.hasHalo&&(Gs.u_is_halo=1,Xo(Xr.buffers,ms.segments,H,B,Xr.program,Yt,Ie,Ue,Gs)),Gs.u_is_halo=0}Xo(Xr.buffers,ms.segments,H,B,Xr.program,Yt,Ie,Ue,Xr.uniformValues)}}function Xo(B,G,H,L,q,$,ne,ue,ye){var Le=L.context,Ie=Le.gl;q.draw(Le,Ie.TRIANGLES,$,ne,ue,Be.disabled,ye,H.id,B.layoutVertexBuffer,B.indexBuffer,G,H.paint,L.transform.zoom,B.programConfigurations.get(H.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function go(B,G,H,L,q,$,ne){var ue,ye,Le,Ie,Ue,qe=B.context.gl,Qe=H.paint.get("fill-pattern"),lt=Qe&&Qe.constantOr(1),ft=H.getCrossfadeParameters();ne?(ye=lt&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ue=qe.LINES):(ye=lt?"fillPattern":"fill",ue=qe.TRIANGLES);for(var xt=0,St=L;xt<St.length;xt+=1){var Tt=St[xt],zt=G.getTile(Tt);if(!lt||zt.patternsLoaded()){var Et=zt.getBucket(H);if(Et){var Yt=Et.programConfigurations.get(H.id),qt=B.useProgram(ye,Yt);lt&&(B.context.activeTexture.set(qe.TEXTURE0),zt.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Yt.updatePaintBuffers(ft));var Ft=Qe.constantOr(null);if(Ft&&zt.imageAtlas){var fn=zt.imageAtlas,dn=fn.patternPositions[Ft.to.toString()],kn=fn.patternPositions[Ft.from.toString()];dn&&kn&&Yt.setConstantPatternPositions(dn,kn)}var Sn=B.translatePosMatrix(Tt.posMatrix,zt,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(ne){Ie=Et.indexBuffer2,Ue=Et.segments2;var Bn=[qe.drawingBufferWidth,qe.drawingBufferHeight];Le=ye==="fillOutlinePattern"&&lt?Ks(Sn,B,ft,zt,Bn):Qi(Sn,Bn)}else Ie=Et.indexBuffer,Ue=Et.segments,Le=lt?So(Sn,B,ft,zt):fo(Sn);qt.draw(B.context,ue,q,B.stencilModeForClipping(Tt),$,Be.disabled,Le,H.id,Et.layoutVertexBuffer,Ie,Ue,H.paint,B.transform.zoom,Yt)}}}}function Bi(B,G,H,L,q,$,ne){for(var ue=B.context,ye=ue.gl,Le=H.paint.get("fill-extrusion-pattern"),Ie=Le.constantOr(1),Ue=H.getCrossfadeParameters(),qe=H.paint.get("fill-extrusion-opacity"),Qe=0,lt=L;Qe<lt.length;Qe+=1){var ft=lt[Qe],xt=G.getTile(ft),St=xt.getBucket(H);if(St){var Tt=St.programConfigurations.get(H.id),zt=B.useProgram(Ie?"fillExtrusionPattern":"fillExtrusion",Tt);Ie&&(B.context.activeTexture.set(ye.TEXTURE0),xt.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Tt.updatePaintBuffers(Ue));var Et=Le.constantOr(null);if(Et&&xt.imageAtlas){var Yt=xt.imageAtlas,qt=Yt.patternPositions[Et.to.toString()],Ft=Yt.patternPositions[Et.from.toString()];qt&&Ft&&Tt.setConstantPatternPositions(qt,Ft)}var fn=B.translatePosMatrix(ft.posMatrix,xt,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),dn=H.paint.get("fill-extrusion-vertical-gradient"),kn=Ie?Mo(fn,B,dn,qe,ft,Ue,xt):$i(fn,B,dn,qe);zt.draw(ue,ue.gl.TRIANGLES,q,$,ne,Be.backCCW,kn,H.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,H.paint,B.transform.zoom,Tt)}}}function ss(B,G,H,L,q,$){var ne=B.context,ue=ne.gl,ye=G.fbo;if(ye){var Le=B.useProgram("hillshade");ne.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,ye.colorAttachment.get());var Ie=bl(B,G,H);Le.draw(ne,ue.TRIANGLES,L,q,$,Be.disabled,Ie,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function ul(B,G,H,L,q,$){var ne=B.context,ue=ne.gl,ye=G.dem;if(ye&&ye.data){var Le=ye.dim,Ie=ye.stride,Ue=ye.getPixels();if(ne.activeTexture.set(ue.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||B.getTileTexture(Ie),G.demTexture){var qe=G.demTexture;qe.update(Ue,{premultiply:!1}),qe.bind(ue.NEAREST,ue.CLAMP_TO_EDGE)}else G.demTexture=new o.Texture(ne,Ue,ue.RGBA,{premultiply:!1}),G.demTexture.bind(ue.NEAREST,ue.CLAMP_TO_EDGE);ne.activeTexture.set(ue.TEXTURE0);var Qe=G.fbo;if(!Qe){var lt=new o.Texture(ne,{width:Le,height:Le,data:null},ue.RGBA);lt.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),(Qe=G.fbo=ne.createFramebuffer(Le,Le,!0)).colorAttachment.set(lt.texture)}ne.bindFramebuffer.set(Qe.framebuffer),ne.viewport.set([0,0,Le,Le]),B.useProgram("hillshadePrepare").draw(ne,ue.TRIANGLES,L,q,$,Be.disabled,Wo(G.tileID,ye),H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function _s(B,G,H,L,q){var $=L.paint.get("raster-fade-duration");if($>0){var ne=o.browser.now(),ue=(ne-B.timeAdded)/$,ye=G?(ne-G.timeAdded)/$:-1,Le=H.getSource(),Ie=q.coveringZoomLevel({tileSize:Le.tileSize,roundZoom:Le.roundZoom}),Ue=!G||Math.abs(G.tileID.overscaledZ-Ie)>Math.abs(B.tileID.overscaledZ-Ie),qe=Ue&&B.refreshedUponExpiration?1:o.clamp(Ue?ue:1-ye,0,1);return B.refreshedUponExpiration&&ue>=1&&(B.refreshedUponExpiration=!1),G?{opacity:1,mix:1-qe}:{opacity:qe,mix:0}}return{opacity:1,mix:0}}var Us=new o.Color(1,0,0,1),bi=new o.Color(0,1,0,1),Vs=new o.Color(0,0,1,1),cl=new o.Color(1,0,1,1),ls=new o.Color(0,1,1,1);function Ko(B){var G=B.transform.padding;us(B,B.transform.height-(G.top||0),3,Us),us(B,G.bottom||0,3,bi),Jo(B,G.left||0,3,Vs),Jo(B,B.transform.width-(G.right||0),3,cl);var H=B.transform.centerPoint;(function(L,q,$,ne){var ue=20,ye=2;$o(L,q-ye/2,$-ue/2,ye,ue,ne),$o(L,q-ue/2,$-ye/2,ue,ye,ne)})(B,H.x,B.transform.height-H.y,ls)}function us(B,G,H,L){$o(B,0,G+H/2,B.transform.width,H,L)}function Jo(B,G,H,L){$o(B,G-H/2,0,H,B.transform.height,L)}function $o(B,G,H,L,q,$){var ne=B.context,ue=ne.gl;ue.enable(ue.SCISSOR_TEST),ue.scissor(G*o.browser.devicePixelRatio,H*o.browser.devicePixelRatio,L*o.browser.devicePixelRatio,q*o.browser.devicePixelRatio),ne.clear({color:$}),ue.disable(ue.SCISSOR_TEST)}function ws(B,G,H){var L=B.context,q=L.gl,$=H.posMatrix,ne=B.useProgram("debug"),ue=Ot.disabled,ye=He.disabled,Le=B.colorModeForRenderPass(),Ie="$debug";L.activeTexture.set(q.TEXTURE0),B.emptyTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ne.draw(L,q.LINE_STRIP,ue,ye,Le,Be.disabled,ol($,o.Color.red),Ie,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var Ue=G.getTileByID(H.key).latestRawTileData,qe=Ue&&Ue.byteLength||0,Qe=Math.floor(qe/1024),lt=G.getTile(H).tileSize,ft=512/Math.min(lt,512)*(H.overscaledZ/B.transform.zoom)*.5,xt=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(xt+=" => "+H.overscaledZ),function(St,Tt){St.initDebugOverlayCanvas();var zt=St.debugOverlayCanvas,Et=St.context.gl,Yt=St.debugOverlayCanvas.getContext("2d");Yt.clearRect(0,0,zt.width,zt.height),Yt.shadowColor="white",Yt.shadowBlur=2,Yt.lineWidth=1.5,Yt.strokeStyle="white",Yt.textBaseline="top",Yt.font="bold 36px Open Sans, sans-serif",Yt.fillText(Tt,5,5),Yt.strokeText(Tt,5,5),St.debugOverlayTexture.update(zt),St.debugOverlayTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE)}(B,xt+" "+Qe+"kb"),ne.draw(L,q.TRIANGLES,ue,ye,Ze.alphaBlended,Be.disabled,ol($,o.Color.transparent,ft),Ie,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var qs={symbol:function(B,G,H,L,q){if(B.renderPass==="translucent"){var $=He.disabled,ne=B.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(ue,ye,Le,Ie,Ue,qe,Qe){for(var lt=ye.transform,ft=Ue==="map",xt=qe==="map",St=0,Tt=ue;St<Tt.length;St+=1){var zt=Tt[St],Et=Ie.getTile(zt),Yt=Et.getBucket(Le);if(Yt&&Yt.text&&Yt.text.segments.get().length){var qt=Yt.textSizeData,Ft=o.evaluateSizeForZoom(qt,lt.zoom),fn=Wn(Et,1,ye.transform.zoom),dn=Tn(zt.posMatrix,xt,ft,ye.transform,fn),kn=Le.layout.get("icon-text-fit")!=="none"&&Yt.hasIconData();if(Ft){var Sn=Math.pow(2,lt.zoom-Et.tileID.overscaledZ);js(Yt,ft,xt,Qe,o.symbolSize,lt,dn,zt.posMatrix,Sn,Ft,kn)}}}}(L,B,H,G,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),q),H.paint.get("icon-opacity").constantOr(1)!==0&&Co(B,G,H,L,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),$,ne),H.paint.get("text-opacity").constantOr(1)!==0&&Co(B,G,H,L,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),$,ne),G.map.showCollisionBoxes&&(os(B,G,H,L,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),os(B,G,H,L,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(B,G,H,L){if(B.renderPass==="translucent"){var q=H.paint.get("circle-opacity"),$=H.paint.get("circle-stroke-width"),ne=H.paint.get("circle-stroke-opacity"),ue=H.layout.get("circle-sort-key").constantOr(1)!==void 0;if(q.constantOr(1)!==0||$.constantOr(1)!==0&&ne.constantOr(1)!==0){for(var ye=B.context,Le=ye.gl,Ie=B.depthModeForSublayer(0,Ot.ReadOnly),Ue=He.disabled,qe=B.colorModeForRenderPass(),Qe=[],lt=0;lt<L.length;lt++){var ft=L[lt],xt=G.getTile(ft),St=xt.getBucket(H);if(St){var Tt=St.programConfigurations.get(H.id),zt={programConfiguration:Tt,program:B.useProgram("circle",Tt),layoutVertexBuffer:St.layoutVertexBuffer,indexBuffer:St.indexBuffer,uniformValues:Bs(B,ft,xt,H)};if(ue)for(var Et=0,Yt=St.segments.get();Et<Yt.length;Et+=1){var qt=Yt[Et];Qe.push({segments:new o.SegmentVector([qt]),sortKey:qt.sortKey,state:zt})}else Qe.push({segments:St.segments,sortKey:0,state:zt})}}ue&&Qe.sort(function(vr,Ar){return vr.sortKey-Ar.sortKey});for(var Ft=0,fn=Qe;Ft<fn.length;Ft+=1){var dn=fn[Ft],kn=dn.state,Sn=kn.programConfiguration,Bn=kn.program,$n=kn.layoutVertexBuffer,sr=kn.indexBuffer,qn=kn.uniformValues,ir=dn.segments;Bn.draw(ye,Le.TRIANGLES,Ie,Ue,qe,Be.disabled,qn,H.id,$n,sr,ir,H.paint,B.transform.zoom,Sn)}}}},heatmap:function(B,G,H,L){if(H.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var q=B.context,$=q.gl,ne=He.disabled,ue=new Ze([$.ONE,$.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ft,xt,St){var Tt=ft.gl;ft.activeTexture.set(Tt.TEXTURE1),ft.viewport.set([0,0,xt.width/4,xt.height/4]);var zt=St.heatmapFbo;if(zt)Tt.bindTexture(Tt.TEXTURE_2D,zt.colorAttachment.get()),ft.bindFramebuffer.set(zt.framebuffer);else{var Et=Tt.createTexture();Tt.bindTexture(Tt.TEXTURE_2D,Et),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_WRAP_S,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_WRAP_T,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_MIN_FILTER,Tt.LINEAR),Tt.texParameteri(Tt.TEXTURE_2D,Tt.TEXTURE_MAG_FILTER,Tt.LINEAR),zt=St.heatmapFbo=ft.createFramebuffer(xt.width/4,xt.height/4,!1),function(Yt,qt,Ft,fn){var dn=Yt.gl,kn=Yt.extRenderToTextureHalfFloat?Yt.extTextureHalfFloat.HALF_FLOAT_OES:dn.UNSIGNED_BYTE;dn.texImage2D(dn.TEXTURE_2D,0,dn.RGBA,qt.width/4,qt.height/4,0,dn.RGBA,kn,null),fn.colorAttachment.set(Ft)}(ft,xt,Et,zt)}})(q,B,H),q.clear({color:o.Color.transparent});for(var ye=0;ye<L.length;ye++){var Le=L[ye];if(!G.hasRenderableParent(Le)){var Ie=G.getTile(Le),Ue=Ie.getBucket(H);if(Ue){var qe=Ue.programConfigurations.get(H.id),Qe=B.useProgram("heatmap",qe),lt=B.transform.zoom;Qe.draw(q,$.TRIANGLES,Ot.disabled,ne,ue,Be.disabled,sl(Le.posMatrix,Ie,lt,H.paint.get("heatmap-intensity")),H.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,H.paint,B.transform.zoom,qe)}}}q.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(ft,xt){var St=ft.context,Tt=St.gl,zt=xt.heatmapFbo;if(zt){St.activeTexture.set(Tt.TEXTURE0),Tt.bindTexture(Tt.TEXTURE_2D,zt.colorAttachment.get()),St.activeTexture.set(Tt.TEXTURE1);var Et=xt.colorRampTexture;Et||(Et=xt.colorRampTexture=new o.Texture(St,xt.colorRamp,Tt.RGBA)),Et.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(St,Tt.TRIANGLES,Ot.disabled,He.disabled,ft.colorModeForRenderPass(),Be.disabled,xl(ft,xt,0,1),xt.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,xt.paint,ft.transform.zoom)}}(B,H))},line:function(B,G,H,L){if(B.renderPass==="translucent"){var q=H.paint.get("line-opacity"),$=H.paint.get("line-width");if(q.constantOr(1)!==0&&$.constantOr(1)!==0)for(var ne=B.depthModeForSublayer(0,Ot.ReadOnly),ue=B.colorModeForRenderPass(),ye=H.paint.get("line-dasharray"),Le=H.paint.get("line-pattern"),Ie=Le.constantOr(1),Ue=H.paint.get("line-gradient"),qe=H.getCrossfadeParameters(),Qe=Ie?"linePattern":ye?"lineSDF":Ue?"lineGradient":"line",lt=B.context,ft=lt.gl,xt=!0,St=0,Tt=L;St<Tt.length;St+=1){var zt=Tt[St],Et=G.getTile(zt);if(!Ie||Et.patternsLoaded()){var Yt=Et.getBucket(H);if(Yt){var qt=Yt.programConfigurations.get(H.id),Ft=B.context.program.get(),fn=B.useProgram(Qe,qt),dn=xt||fn.program!==Ft,kn=Le.constantOr(null);if(kn&&Et.imageAtlas){var Sn=Et.imageAtlas,Bn=Sn.patternPositions[kn.to.toString()],$n=Sn.patternPositions[kn.from.toString()];Bn&&$n&&qt.setConstantPatternPositions(Bn,$n)}var sr=Ie?Yo(B,Et,H,qe):ye?bs(B,Et,H,ye,qe):Ue?as(B,Et,H,Yt.lineClipsArray.length):eo(B,Et,H);if(Ie)lt.activeTexture.set(ft.TEXTURE0),Et.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),qt.updatePaintBuffers(qe);else if(ye&&(dn||B.lineAtlas.dirty))lt.activeTexture.set(ft.TEXTURE0),B.lineAtlas.bind(lt);else if(Ue){var qn=Yt.gradients[H.id],ir=qn.texture;if(H.gradientVersion!==qn.version){var vr=256;if(H.stepInterpolant){var Ar=G.getSource().maxzoom,Kn=zt.canonical.z===Ar?Math.ceil(1<<B.transform.maxZoom-zt.canonical.z):1,ar=Yt.maxLineLength/o.EXTENT*1024*Kn;vr=o.clamp(o.nextPowerOfTwo(ar),256,lt.maxTextureSize)}qn.gradient=o.renderColorRamp({expression:H.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:qn.gradient||void 0,clips:Yt.lineClipsArray}),qn.texture?qn.texture.update(qn.gradient):qn.texture=new o.Texture(lt,qn.gradient,ft.RGBA),qn.version=H.gradientVersion,ir=qn.texture}lt.activeTexture.set(ft.TEXTURE0),ir.bind(H.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}fn.draw(lt,ft.TRIANGLES,ne,B.stencilModeForClipping(zt),ue,Be.disabled,sr,H.id,Yt.layoutVertexBuffer,Yt.indexBuffer,Yt.segments,H.paint,B.transform.zoom,qt,Yt.layoutVertexBuffer2),xt=!1}}}}},fill:function(B,G,H,L){var q=H.paint.get("fill-color"),$=H.paint.get("fill-opacity");if($.constantOr(1)!==0){var ne=B.colorModeForRenderPass(),ue=H.paint.get("fill-pattern"),ye=B.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&q.constantOr(o.Color.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===ye){var Le=B.depthModeForSublayer(1,B.renderPass==="opaque"?Ot.ReadWrite:Ot.ReadOnly);go(B,G,H,L,Le,ne,!1)}if(B.renderPass==="translucent"&&H.paint.get("fill-antialias")){var Ie=B.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,Ot.ReadOnly);go(B,G,H,L,Ie,ne,!0)}}},"fill-extrusion":function(B,G,H,L){var q=H.paint.get("fill-extrusion-opacity");if(q!==0&&B.renderPass==="translucent"){var $=new Ot(B.context.gl.LEQUAL,Ot.ReadWrite,B.depthRangeFor3D);if(q!==1||H.paint.get("fill-extrusion-pattern").constantOr(1))Bi(B,G,H,L,$,He.disabled,Ze.disabled),Bi(B,G,H,L,$,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var ne=B.colorModeForRenderPass();Bi(B,G,H,L,$,He.disabled,ne)}}},hillshade:function(B,G,H,L){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var q=B.context,$=B.depthModeForSublayer(0,Ot.ReadOnly),ne=B.colorModeForRenderPass(),ue=B.renderPass==="translucent"?B.stencilConfigForOverlap(L):[{},L],ye=ue[0],Le=0,Ie=ue[1];Le<Ie.length;Le+=1){var Ue=Ie[Le],qe=G.getTile(Ue);qe.needsHillshadePrepare&&B.renderPass==="offscreen"?ul(B,qe,H,$,He.disabled,ne):B.renderPass==="translucent"&&ss(B,qe,H,$,ye[Ue.overscaledZ],ne)}q.viewport.set([0,0,B.width,B.height])}},raster:function(B,G,H,L){if(B.renderPass==="translucent"&&H.paint.get("raster-opacity")!==0&&L.length)for(var q=B.context,$=q.gl,ne=G.getSource(),ue=B.useProgram("raster"),ye=B.colorModeForRenderPass(),Le=ne instanceof F?[{},L]:B.stencilConfigForOverlap(L),Ie=Le[0],Ue=Le[1],qe=Ue[Ue.length-1].overscaledZ,Qe=!B.options.moving,lt=0,ft=Ue;lt<ft.length;lt+=1){var xt=ft[lt],St=B.depthModeForSublayer(xt.overscaledZ-qe,H.paint.get("raster-opacity")===1?Ot.ReadWrite:Ot.ReadOnly,$.LESS),Tt=G.getTile(xt),zt=B.transform.calculatePosMatrix(xt.toUnwrapped(),Qe);Tt.registerFadeDuration(H.paint.get("raster-fade-duration"));var Et=G.findLoadedParent(xt,0),Yt=_s(Tt,Et,G,H,B.transform),qt=void 0,Ft=void 0,fn=H.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;q.activeTexture.set($.TEXTURE0),Tt.texture.bind(fn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),q.activeTexture.set($.TEXTURE1),Et?(Et.texture.bind(fn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),qt=Math.pow(2,Et.tileID.overscaledZ-Tt.tileID.overscaledZ),Ft=[Tt.tileID.canonical.x*qt%1,Tt.tileID.canonical.y*qt%1]):Tt.texture.bind(fn,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST);var dn=Js(zt,Ft||[0,0],qt||1,Yt,H);ne instanceof F?ue.draw(q,$.TRIANGLES,St,He.disabled,ye,Be.disabled,dn,H.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):ue.draw(q,$.TRIANGLES,St,Ie[xt.overscaledZ],ye,Be.disabled,dn,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,G,H){var L=H.paint.get("background-color"),q=H.paint.get("background-opacity");if(q!==0){var $=B.context,ne=$.gl,ue=B.transform,ye=ue.tileSize,Le=H.paint.get("background-pattern");if(!B.isPatternMissing(Le)){var Ie=!Le&&L.a===1&&q===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===Ie){var Ue=He.disabled,qe=B.depthModeForSublayer(0,Ie==="opaque"?Ot.ReadWrite:Ot.ReadOnly),Qe=B.colorModeForRenderPass(),lt=B.useProgram(Le?"backgroundPattern":"background"),ft=ue.coveringTiles({tileSize:ye});Le&&($.activeTexture.set(ne.TEXTURE0),B.imageManager.bind(B.context));for(var xt=H.getCrossfadeParameters(),St=0,Tt=ft;St<Tt.length;St+=1){var zt=Tt[St],Et=B.transform.calculatePosMatrix(zt.toUnwrapped()),Yt=Le?_l(Et,q,B,Le,{tileID:zt,tileSize:ye},xt):is(Et,q,L);lt.draw($,ne.TRIANGLES,qe,Ue,Qe,Be.disabled,Yt,H.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,G,H){for(var L=0;L<H.length;L++)ws(B,G,H[L])},custom:function(B,G,H){var L=B.context,q=H.implementation;if(B.renderPass==="offscreen"){var $=q.prerender;$&&(B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),$.call(q,L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),L.setStencilMode(He.disabled);var ne=q.renderingMode==="3d"?new Ot(B.context.gl.LEQUAL,Ot.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Ot.ReadOnly);L.setDepthMode(ne),q.render(L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState(),L.bindFramebuffer.set(null)}}},$r=function(B,G){this.context=new Ge(B),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=it.maxUnderzooming+it.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zn,this.gpuTimers={}};$r.prototype.resize=function(B,G){if(this.width=B*o.browser.devicePixelRatio,this.height=G*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,L=this.style._order;H<L.length;H+=1){var q=L[H];this.style._layers[q].resize()}},$r.prototype.setup=function(){var B=this.context,G=new o.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(o.EXTENT,0),G.emplaceBack(0,o.EXTENT),G.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=B.createVertexBuffer(G,Zn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var H=new o.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(o.EXTENT,0),H.emplaceBack(0,o.EXTENT),H.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=B.createVertexBuffer(H,Zn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var L=new o.StructArrayLayout4i8;L.emplaceBack(0,0,0,0),L.emplaceBack(o.EXTENT,0,o.EXTENT,0),L.emplaceBack(0,o.EXTENT,0,o.EXTENT),L.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(L,W.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var q=new o.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(1,0),q.emplaceBack(0,1),q.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(q,Zn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var $=new o.StructArrayLayout1ui2;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer($);var ne=new o.StructArrayLayout3ui6;ne.emplaceBack(0,1,2),ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(ne),this.emptyTexture=new o.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var ue=this.context.gl;this.stencilClearMode=new He({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO)},$r.prototype.clearStencil=function(){var B=this.context,G=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=o.create();o.ortho(H,0,this.width,this.height,0,0,1),o.scale(H,H,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,G.TRIANGLES,Ot.disabled,this.stencilClearMode,Ze.disabled,Be.disabled,Go(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},$r.prototype._renderTileClippingMasks=function(B,G){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&G&&G.length){this.currentStencilSource=B.source;var H=this.context,L=H.gl;this.nextStencilID+G.length>256&&this.clearStencil(),H.setColorMode(Ze.disabled),H.setDepthMode(Ot.disabled);var q=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var $=0,ne=G;$<ne.length;$+=1){var ue=ne[$],ye=this._tileClippingMaskIDs[ue.key]=this.nextStencilID++;q.draw(H,L.TRIANGLES,Ot.disabled,new He({func:L.ALWAYS,mask:0},ye,255,L.KEEP,L.KEEP,L.REPLACE),Ze.disabled,Be.disabled,Go(ue.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},$r.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,G=this.context.gl;return new He({func:G.NOTEQUAL,mask:255},B,255,G.KEEP,G.KEEP,G.REPLACE)},$r.prototype.stencilModeForClipping=function(B){var G=this.context.gl;return new He({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,G.KEEP,G.KEEP,G.REPLACE)},$r.prototype.stencilConfigForOverlap=function(B){var G,H=this.context.gl,L=B.sort(function(ye,Le){return Le.overscaledZ-ye.overscaledZ}),q=L[L.length-1].overscaledZ,$=L[0].overscaledZ-q+1;if($>1){this.currentStencilSource=void 0,this.nextStencilID+$>256&&this.clearStencil();for(var ne={},ue=0;ue<$;ue++)ne[ue+q]=new He({func:H.GEQUAL,mask:255},ue+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=$,[ne,L]}return[(G={},G[q]=He.disabled,G),L]},$r.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new Ze([B.CONSTANT_COLOR,B.ONE],new o.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ze.unblended:Ze.alphaBlended},$r.prototype.depthModeForSublayer=function(B,G,H){if(!this.opaquePassEnabledForLayer())return Ot.disabled;var L=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new Ot(H||this.context.gl.LEQUAL,G,[L,L])},$r.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},$r.prototype.render=function(B,G){var H=this;this.style=B,this.options=G,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var L=this.style._order,q=this.style.sourceCaches;for(var $ in q){var ne=q[$];ne.used&&ne.prepare(this.context)}var ue,ye,Le={},Ie={},Ue={};for(var qe in q){var Qe=q[qe];Le[qe]=Qe.getVisibleCoordinates(),Ie[qe]=Le[qe].slice().reverse(),Ue[qe]=Qe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var lt=0;lt<L.length;lt++){var ft=L[lt];if(this.style._layers[ft].is3D()){this.opaquePassCutoff=lt;break}}this.renderPass="offscreen";for(var xt=0,St=L;xt<St.length;xt+=1){var Tt=St[xt],zt=this.style._layers[Tt];if(zt.hasOffscreenPass()&&!zt.isHidden(this.transform.zoom)){var Et=Ie[zt.source];(zt.type==="custom"||Et.length)&&this.renderLayer(this,q[zt.source],zt,Et)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){var Yt=this.style._layers[L[this.currentLayer]],qt=q[Yt.source],Ft=Le[Yt.source];this._renderTileClippingMasks(Yt,Ft),this.renderLayer(this,qt,Yt,Ft)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){var fn=this.style._layers[L[this.currentLayer]],dn=q[fn.source],kn=(fn.type==="symbol"?Ue:Ie)[fn.source];this._renderTileClippingMasks(fn,Le[fn.source]),this.renderLayer(this,dn,fn,kn)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Sn){Sn.source&&!Sn.isHidden(H.transform.zoom)&&(Sn.source!==(ye&&ye.id)&&(ye=H.style.sourceCaches[Sn.source]),(!ue||ue.getSource().maxzoom<ye.getSource().maxzoom)&&(ue=ye))}),ue&&qs.debug(this,ue,ue.getVisibleCoordinates())),this.options.showPadding&&Ko(this),this.context.setDefault()},$r.prototype.renderLayer=function(B,G,H,L){H.isHidden(this.transform.zoom)||(H.type==="background"||H.type==="custom"||L.length)&&(this.id=H.id,this.gpuTimingStart(H),qs[H.type](B,G,H,L,this.style.placement.variableOffsets),this.gpuTimingEnd())},$r.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var G=this.context.extTimerQuery,H=this.gpuTimers[B.id];H||(H=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),H.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,H.query)}},$r.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},$r.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},$r.prototype.queryGpuTimers=function(B){var G={};for(var H in B){var L=B[H],q=this.context.extTimerQuery,$=q.getQueryObjectEXT(L.query,q.QUERY_RESULT_EXT)/1e6;q.deleteQueryEXT(L.query),G[H]=$}return G},$r.prototype.translatePosMatrix=function(B,G,H,L,q){if(!H[0]&&!H[1])return B;var $=q?L==="map"?this.transform.angle:0:L==="viewport"?-this.transform.angle:0;if($){var ne=Math.sin($),ue=Math.cos($);H=[H[0]*ue-H[1]*ne,H[0]*ne+H[1]*ue]}var ye=[q?H[0]:Wn(G,H[0],this.transform.zoom),q?H[1]:Wn(G,H[1],this.transform.zoom),0],Le=new Float32Array(16);return o.translate(Le,B,ye),Le},$r.prototype.saveTileTexture=function(B){var G=this._tileTextures[B.size[0]];G?G.push(B):this._tileTextures[B.size[0]]=[B]},$r.prototype.getTileTexture=function(B){var G=this._tileTextures[B];return G&&G.length>0?G.pop():null},$r.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var G=this.imageManager.getPattern(B.from.toString()),H=this.imageManager.getPattern(B.to.toString());return!G||!H},$r.prototype.useProgram=function(B,G){this.cache=this.cache||{};var H=""+B+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new Ri(this.context,B,za[B],G,Ns[B],this._showOverdrawInspector)),this.cache[H]},$r.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},$r.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},$r.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},$r.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Po=function(B,G){this.points=B,this.planes=G};Po.fromInvProjectionMatrix=function(B,G,H){var L=Math.pow(2,H),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ne){return o.transformMat4([],ne,B)}).map(function(ne){return o.scale$1([],ne,1/ne[3]/G*L)}),$=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ne){var ue=o.sub([],q[ne[0]],q[ne[1]]),ye=o.sub([],q[ne[2]],q[ne[1]]),Le=o.normalize([],o.cross([],ue,ye)),Ie=-o.dot(Le,q[ne[1]]);return Le.concat(Ie)});return new Po(q,$)};var Xa=function(B,G){this.min=B,this.max=G,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};Xa.prototype.quadrant=function(B){for(var G=[B%2==0,B<2],H=o.clone$2(this.min),L=o.clone$2(this.max),q=0;q<G.length;q++)H[q]=G[q]?this.min[q]:this.center[q],L[q]=G[q]?this.center[q]:this.max[q];return L[2]=this.max[2],new Xa(H,L)},Xa.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},Xa.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},Xa.prototype.intersects=function(B){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,L=0;L<B.planes.length;L++){for(var q=B.planes[L],$=0,ne=0;ne<G.length;ne++)$+=o.dot$1(q,G[ne])>=0;if($===0)return 0;$!==G.length&&(H=!1)}if(H)return 2;for(var ue=0;ue<3;ue++){for(var ye=Number.MAX_VALUE,Le=-Number.MAX_VALUE,Ie=0;Ie<B.points.length;Ie++){var Ue=B.points[Ie][ue]-this.min[ue];ye=Math.min(ye,Ue),Le=Math.max(Le,Ue)}if(Le<0||ye>this.max[ue]-this.min[ue])return 0}return 1};var Ni=function(B,G,H,L){if(B===void 0&&(B=0),G===void 0&&(G=0),H===void 0&&(H=0),L===void 0&&(L=0),isNaN(B)||B<0||isNaN(G)||G<0||isNaN(H)||H<0||isNaN(L)||L<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=G,this.left=H,this.right=L};Ni.prototype.interpolate=function(B,G,H){return G.top!=null&&B.top!=null&&(this.top=o.number(B.top,G.top,H)),G.bottom!=null&&B.bottom!=null&&(this.bottom=o.number(B.bottom,G.bottom,H)),G.left!=null&&B.left!=null&&(this.left=o.number(B.left,G.left,H)),G.right!=null&&B.right!=null&&(this.right=o.number(B.right,G.right,H)),this},Ni.prototype.getCenter=function(B,G){var H=o.clamp((this.left+B-this.right)/2,0,B),L=o.clamp((this.top+G-this.bottom)/2,0,G);return new o.Point(H,L)},Ni.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},Ni.prototype.clone=function(){return new Ni(this.top,this.bottom,this.left,this.right)},Ni.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Wr=function(B,G,H,L,q){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=q===void 0||q,this._minZoom=B||0,this._maxZoom=G||22,this._minPitch=H??0,this._maxPitch=L??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ni,this._posMatrixCache={},this._alignedPosMatrixCache={}},Jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Wr.prototype.clone=function(){var B=new Wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},Jr.minZoom.get=function(){return this._minZoom},Jr.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},Jr.maxZoom.get=function(){return this._maxZoom},Jr.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},Jr.minPitch.get=function(){return this._minPitch},Jr.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},Jr.maxPitch.get=function(){return this._maxPitch},Jr.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},Jr.renderWorldCopies.get=function(){return this._renderWorldCopies},Jr.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},Jr.worldSize.get=function(){return this.tileSize*this.scale},Jr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Jr.size.get=function(){return new o.Point(this.width,this.height)},Jr.bearing.get=function(){return-this.angle/Math.PI*180},Jr.bearing.set=function(B){var G=-o.wrap(B,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Jr.pitch.get=function(){return this._pitch/Math.PI*180},Jr.pitch.set=function(B){var G=o.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},Jr.fov.get=function(){return this._fov/Math.PI*180},Jr.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},Jr.zoom.get=function(){return this._zoom},Jr.zoom.set=function(B){var G=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},Jr.center.get=function(){return this._center},Jr.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},Jr.padding.get=function(){return this._edgeInsets.toJSON()},Jr.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},Jr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Wr.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},Wr.prototype.interpolatePadding=function(B,G,H){this._unmodified=!1,this._edgeInsets.interpolate(B,G,H),this._constrain(),this._calcMatrices()},Wr.prototype.coveringZoomLevel=function(B){var G=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,G)},Wr.prototype.getVisibleUnwrappedCoordinates=function(B){var G=[new o.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new o.Point(0,0)),L=this.pointCoordinate(new o.Point(this.width,0)),q=this.pointCoordinate(new o.Point(this.width,this.height)),$=this.pointCoordinate(new o.Point(0,this.height)),ne=Math.floor(Math.min(H.x,L.x,q.x,$.x)),ue=Math.floor(Math.max(H.x,L.x,q.x,$.x)),ye=ne-1;ye<=ue+1;ye++)ye!==0&&G.push(new o.UnwrappedTileID(ye,B));return G},Wr.prototype.coveringTiles=function(B){var G=this.coveringZoomLevel(B),H=G;if(B.minzoom!==void 0&&G<B.minzoom)return[];B.maxzoom!==void 0&&G>B.maxzoom&&(G=B.maxzoom);var L=o.MercatorCoordinate.fromLngLat(this.center),q=Math.pow(2,G),$=[q*L.x,q*L.y,0],ne=Po.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),ue=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ue=G);var ye=function(kn){return{aabb:new Xa([kn*q,0,0],[(kn+1)*q,q,0]),zoom:0,x:0,y:0,wrap:kn,fullyVisible:!1}},Le=[],Ie=[],Ue=G,qe=B.reparseOverscaled?H:G;if(this._renderWorldCopies)for(var Qe=1;Qe<=3;Qe++)Le.push(ye(-Qe)),Le.push(ye(Qe));for(Le.push(ye(0));Le.length>0;){var lt=Le.pop(),ft=lt.x,xt=lt.y,St=lt.fullyVisible;if(!St){var Tt=lt.aabb.intersects(ne);if(Tt===0)continue;St=Tt===2}var zt=lt.aabb.distanceX($),Et=lt.aabb.distanceY($),Yt=Math.max(Math.abs(zt),Math.abs(Et)),qt=3+(1<<Ue-lt.zoom)-2;if(lt.zoom===Ue||Yt>qt&&lt.zoom>=ue)Ie.push({tileID:new o.OverscaledTileID(lt.zoom===Ue?qe:lt.zoom,lt.wrap,lt.zoom,ft,xt),distanceSq:o.sqrLen([$[0]-.5-ft,$[1]-.5-xt])});else for(var Ft=0;Ft<4;Ft++){var fn=(ft<<1)+Ft%2,dn=(xt<<1)+(Ft>>1);Le.push({aabb:lt.aabb.quadrant(Ft),zoom:lt.zoom+1,x:fn,y:dn,wrap:lt.wrap,fullyVisible:St})}}return Ie.sort(function(kn,Sn){return kn.distanceSq-Sn.distanceSq}).map(function(kn){return kn.tileID})},Wr.prototype.resize=function(B,G){this.width=B,this.height=G,this.pixelsToGLUnits=[2/B,-2/G],this._constrain(),this._calcMatrices()},Jr.unmodified.get=function(){return this._unmodified},Wr.prototype.zoomScale=function(B){return Math.pow(2,B)},Wr.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},Wr.prototype.project=function(B){var G=o.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(B.lng)*this.worldSize,o.mercatorYfromLat(G)*this.worldSize)},Wr.prototype.unproject=function(B){return new o.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},Jr.point.get=function(){return this.project(this.center)},Wr.prototype.setLocationAtPoint=function(B,G){var H=this.pointCoordinate(G),L=this.pointCoordinate(this.centerPoint),q=this.locationCoordinate(B),$=new o.MercatorCoordinate(q.x-(H.x-L.x),q.y-(H.y-L.y));this.center=this.coordinateLocation($),this._renderWorldCopies&&(this.center=this.center.wrap())},Wr.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},Wr.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},Wr.prototype.locationCoordinate=function(B){return o.MercatorCoordinate.fromLngLat(B)},Wr.prototype.coordinateLocation=function(B){return B.toLngLat()},Wr.prototype.pointCoordinate=function(B){var G=[B.x,B.y,0,1],H=[B.x,B.y,1,1];o.transformMat4(G,G,this.pixelMatrixInverse),o.transformMat4(H,H,this.pixelMatrixInverse);var L=G[3],q=H[3],$=G[0]/L,ne=H[0]/q,ue=G[1]/L,ye=H[1]/q,Le=G[2]/L,Ie=H[2]/q,Ue=Le===Ie?0:(0-Le)/(Ie-Le);return new o.MercatorCoordinate(o.number($,ne,Ue)/this.worldSize,o.number(ue,ye,Ue)/this.worldSize)},Wr.prototype.coordinatePoint=function(B){var G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix),new o.Point(G[0]/G[3],G[1]/G[3])},Wr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Wr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Wr.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Wr.prototype.calculatePosMatrix=function(B,G){G===void 0&&(G=!1);var H=B.key,L=G?this._alignedPosMatrixCache:this._posMatrixCache;if(L[H])return L[H];var q=B.canonical,$=this.worldSize/this.zoomScale(q.z),ne=q.x+Math.pow(2,q.z)*B.wrap,ue=o.identity(new Float64Array(16));return o.translate(ue,ue,[ne*$,q.y*$,0]),o.scale(ue,ue,[$/o.EXTENT,$/o.EXTENT,1]),o.multiply(ue,G?this.alignedProjMatrix:this.projMatrix,ue),L[H]=new Float32Array(ue),L[H]},Wr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Wr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,G,H,L,q=-90,$=90,ne=-180,ue=180,ye=this.size,Le=this._unmodified;if(this.latRange){var Ie=this.latRange;q=o.mercatorYfromLat(Ie[1])*this.worldSize,B=($=o.mercatorYfromLat(Ie[0])*this.worldSize)-q<ye.y?ye.y/($-q):0}if(this.lngRange){var Ue=this.lngRange;ne=o.mercatorXfromLng(Ue[0])*this.worldSize,G=(ue=o.mercatorXfromLng(Ue[1])*this.worldSize)-ne<ye.x?ye.x/(ue-ne):0}var qe=this.point,Qe=Math.max(G||0,B||0);if(Qe)return this.center=this.unproject(new o.Point(G?(ue+ne)/2:qe.x,B?($+q)/2:qe.y)),this.zoom+=this.scaleZoom(Qe),this._unmodified=Le,void(this._constraining=!1);if(this.latRange){var lt=qe.y,ft=ye.y/2;lt-ft<q&&(L=q+ft),lt+ft>$&&(L=$-ft)}if(this.lngRange){var xt=qe.x,St=ye.x/2;xt-St<ne&&(H=ne+St),xt+St>ue&&(H=ue-St)}H===void 0&&L===void 0||(this.center=this.unproject(new o.Point(H!==void 0?H:qe.x,L!==void 0?L:qe.y))),this._unmodified=Le,this._constraining=!1}},Wr.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var H=Math.PI/2+this._pitch,L=this._fov*(.5+G.y/this.height),q=Math.sin(L)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-H-L,.01,Math.PI-.01)),$=this.point,ne=$.x,ue=$.y,ye=1.01*(Math.cos(Math.PI/2-this._pitch)*q+this.cameraToCenterDistance),Le=this.height/50,Ie=new Float64Array(16);o.perspective(Ie,this._fov,this.width/this.height,Le,ye),Ie[8]=2*-G.x/this.width,Ie[9]=2*G.y/this.height,o.scale(Ie,Ie,[1,-1,1]),o.translate(Ie,Ie,[0,0,-this.cameraToCenterDistance]),o.rotateX(Ie,Ie,this._pitch),o.rotateZ(Ie,Ie,this.angle),o.translate(Ie,Ie,[-ne,-ue,0]),this.mercatorMatrix=o.scale([],Ie,[this.worldSize,this.worldSize,this.worldSize]),o.scale(Ie,Ie,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ie,this.invProjMatrix=o.invert([],this.projMatrix);var Ue=this.width%2/2,qe=this.height%2/2,Qe=Math.cos(this.angle),lt=Math.sin(this.angle),ft=ne-Math.round(ne)+Qe*Ue+lt*qe,xt=ue-Math.round(ue)+Qe*qe+lt*Ue,St=new Float64Array(Ie);if(o.translate(St,St,[ft>.5?ft-1:ft,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=St,Ie=o.create(),o.scale(Ie,Ie,[this.width/2,-this.height/2,1]),o.translate(Ie,Ie,[1,-1,0]),this.labelPlaneMatrix=Ie,Ie=o.create(),o.scale(Ie,Ie,[1,-1,1]),o.translate(Ie,Ie,[-1,-1,0]),o.scale(Ie,Ie,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ie,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ie=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ie,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Wr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new o.Point(0,0)),G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},Wr.prototype.getCameraPoint=function(){var B=this._pitch,G=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,G))},Wr.prototype.getCameraQueryGeometry=function(B){var G=this.getCameraPoint();if(B.length===1)return[B[0],G];for(var H=G.x,L=G.y,q=G.x,$=G.y,ne=0,ue=B;ne<ue.length;ne+=1){var ye=ue[ne];H=Math.min(H,ye.x),L=Math.min(L,ye.y),q=Math.max(q,ye.x),$=Math.max($,ye.y)}return[new o.Point(H,L),new o.Point(q,L),new o.Point(q,$),new o.Point(H,$),new o.Point(H,L)]},Object.defineProperties(Wr.prototype,Jr);var _i=function(B){var G,H,L,q,$;this._hashName=B&&encodeURIComponent(B),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),H=300,L=!1,q=null,$=function(){q=null,L&&(G(),q=setTimeout($,H),L=!1)},function(){return L=!0,q||$(),q})};_i.prototype.addTo=function(B){return this._map=B,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},_i.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},_i.prototype.getHashString=function(B){var G=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,L=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),q=Math.pow(10,L),$=Math.round(G.lng*q)/q,ne=Math.round(G.lat*q)/q,ue=this._map.getBearing(),ye=this._map.getPitch(),Le="";if(Le+=B?"/"+$+"/"+ne+"/"+H:H+"/"+ne+"/"+$,(ue||ye)&&(Le+="/"+Math.round(10*ue)/10),ye&&(Le+="/"+Math.round(ye)),this._hashName){var Ie=this._hashName,Ue=!1,qe=o.window.location.hash.slice(1).split("&").map(function(Qe){var lt=Qe.split("=")[0];return lt===Ie?(Ue=!0,lt+"="+Le):Qe}).filter(function(Qe){return Qe});return Ue||qe.push(Ie+"="+Le),"#"+qe.join("&")}return"#"+Le},_i.prototype._getCurrentHash=function(){var B,G=this,H=o.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function(L){return L.split("=")}).forEach(function(L){L[0]===G._hashName&&(B=L)}),(B&&B[1]||"").split("/")):H.split("/")},_i.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(H){return isNaN(H)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:G,pitch:+(B[4]||0)}),!0}return!1},_i.prototype._updateHashUnthrottled=function(){var B=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,B)}catch{}};var cs={linearity:.3,easing:o.bezier(0,0,.3,1)},Ts=o.extend({deceleration:2500,maxSpeed:1400},cs),Hs=o.extend({deceleration:20,maxSpeed:1400},cs),ks=o.extend({deceleration:1e3,maxSpeed:360},cs),As=o.extend({deceleration:1e3,maxSpeed:90},cs),Ei=function(B){this._map=B,this.clear()};function Oo(B,G){(!B.duration||B.duration<G.duration)&&(B.duration=G.duration,B.easing=G.easing)}function Io(B,G,H){var L=H.maxSpeed,q=H.linearity,$=H.deceleration,ne=o.clamp(B*q/(G/1e3),-L,L),ue=Math.abs(ne)/($*q);return{easing:H.easing,duration:1e3*ue,amount:ne*(ue/2)}}Ei.prototype.clear=function(){this._inertiaBuffer=[]},Ei.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:B})},Ei.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,G=o.browser.now();B.length>0&&G-B[0].time>160;)B.shift()},Ei.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},H=0,L=this._inertiaBuffer;H<L.length;H+=1){var q=L[H].settings;G.zoom+=q.zoomDelta||0,G.bearing+=q.bearingDelta||0,G.pitch+=q.pitchDelta||0,q.panDelta&&G.pan._add(q.panDelta),q.around&&(G.around=q.around),q.pinchAround&&(G.pinchAround=q.pinchAround)}var $=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ne={};if(G.pan.mag()){var ue=Io(G.pan.mag(),$,o.extend({},Ts,B||{}));ne.offset=G.pan.mult(ue.amount/G.pan.mag()),ne.center=this._map.transform.center,Oo(ne,ue)}if(G.zoom){var ye=Io(G.zoom,$,Hs);ne.zoom=this._map.transform.zoom+ye.amount,Oo(ne,ye)}if(G.bearing){var Le=Io(G.bearing,$,ks);ne.bearing=this._map.transform.bearing+o.clamp(Le.amount,-179,179),Oo(ne,Le)}if(G.pitch){var Ie=Io(G.pitch,$,As);ne.pitch=this._map.transform.pitch+Ie.amount,Oo(ne,Ie)}if(ne.zoom||ne.bearing){var Ue=G.pinchAround===void 0?G.around:G.pinchAround;ne.around=Ue?this._map.unproject(Ue):this._map.getCenter()}return this.clear(),o.extend(ne,{noMoveStart:!0})}};var ti=function(B){function G(L,q,$,ne){ne===void 0&&(ne={});var ue=b.mousePos(q.getCanvasContainer(),$),ye=q.unproject(ue);B.call(this,L,o.extend({point:ue,lngLat:ye,originalEvent:$},ne)),this._defaultPrevented=!1,this.target=q}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Ms=function(B){function G(L,q,$){var ne=L==="touchend"?$.changedTouches:$.touches,ue=b.touchPos(q.getCanvasContainer(),ne),ye=ue.map(function(Ue){return q.unproject(Ue)}),Le=ue.reduce(function(Ue,qe,Qe,lt){return Ue.add(qe.div(lt.length))},new o.Point(0,0)),Ie=q.unproject(Le);B.call(this,L,{points:ue,point:Le,lngLats:ye,lngLat:Ie,originalEvent:$}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Li=function(B){function G(L,q,$){B.call(this,L,{originalEvent:$}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Ra=function(B,G){this._map=B,this._clickTolerance=G.clickTolerance};Ra.prototype.reset=function(){delete this._mousedownPos},Ra.prototype.wheel=function(B){return this._firePreventable(new Li(B.type,this._map,B))},Ra.prototype.mousedown=function(B,G){return this._mousedownPos=G,this._firePreventable(new ti(B.type,this._map,B))},Ra.prototype.mouseup=function(B){this._map.fire(new ti(B.type,this._map,B))},Ra.prototype.click=function(B,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new ti(B.type,this._map,B))},Ra.prototype.dblclick=function(B){return this._firePreventable(new ti(B.type,this._map,B))},Ra.prototype.mouseover=function(B){this._map.fire(new ti(B.type,this._map,B))},Ra.prototype.mouseout=function(B){this._map.fire(new ti(B.type,this._map,B))},Ra.prototype.touchstart=function(B){return this._firePreventable(new Ms(B.type,this._map,B))},Ra.prototype.touchmove=function(B){this._map.fire(new Ms(B.type,this._map,B))},Ra.prototype.touchend=function(B){this._map.fire(new Ms(B.type,this._map,B))},Ra.prototype.touchcancel=function(B){this._map.fire(new Ms(B.type,this._map,B))},Ra.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},Ra.prototype.isEnabled=function(){return!0},Ra.prototype.isActive=function(){return!1},Ra.prototype.enable=function(){},Ra.prototype.disable=function(){};var Va=function(B){this._map=B};Va.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Va.prototype.mousemove=function(B){this._map.fire(new ti(B.type,this._map,B))},Va.prototype.mousedown=function(){this._delayContextMenu=!0},Va.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Va.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new ti(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},Va.prototype.isEnabled=function(){return!0},Va.prototype.isActive=function(){return!1},Va.prototype.enable=function(){},Va.prototype.disable=function(){};var ia=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=G.clickTolerance||1};function qa(B,G){for(var H={},L=0;L<B.length;L++)H[B[L].identifier]=G[L];return H}ia.prototype.isEnabled=function(){return!!this._enabled},ia.prototype.isActive=function(){return!!this._active},ia.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ia.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ia.prototype.mousedown=function(B,G){this.isEnabled()&&B.shiftKey&&B.button===0&&(b.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},ia.prototype.mousemoveWindow=function(B,G){if(this._active){var H=G;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var L=this._startPos;this._lastPos=H,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var q=Math.min(L.x,H.x),$=Math.max(L.x,H.x),ne=Math.min(L.y,H.y),ue=Math.max(L.y,H.y);b.setTransform(this._box,"translate("+q+"px,"+ne+"px)"),this._box.style.width=$-q+"px",this._box.style.height=ue-ne+"px"}}},ia.prototype.mouseupWindow=function(B,G){var H=this;if(this._active&&B.button===0){var L=this._startPos,q=G;if(this.reset(),b.suppressClick(),L.x!==q.x||L.y!==q.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function($){return $.fitScreenCoordinates(L,q,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},ia.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},ia.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},ia.prototype._fireEvent=function(B,G){return this._map.fire(new o.Event(B,{originalEvent:G}))};var to=function(B){this.reset(),this.numTouches=B.numTouches};to.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},to.prototype.touchstart=function(B,G,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),H.length===this.numTouches&&(this.centroid=function(L){for(var q=new o.Point(0,0),$=0,ne=L;$<ne.length;$+=1){var ue=ne[$];q._add(ue)}return q.div(L.length)}(G),this.touches=qa(H,G)))},to.prototype.touchmove=function(B,G,H){if(!this.aborted&&this.centroid){var L=qa(H,G);for(var q in this.touches){var $=this.touches[q],ne=L[q];(!ne||ne.dist($)>30)&&(this.aborted=!0)}}},to.prototype.touchend=function(B,G,H){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),H.length===0){var L=!this.aborted&&this.centroid;if(this.reset(),L)return L}};var Qo=function(B){this.singleTap=new to(B),this.numTaps=B.numTaps,this.reset()};Qo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Qo.prototype.touchstart=function(B,G,H){this.singleTap.touchstart(B,G,H)},Qo.prototype.touchmove=function(B,G,H){this.singleTap.touchmove(B,G,H)},Qo.prototype.touchend=function(B,G,H){var L=this.singleTap.touchend(B,G,H);if(L){var q=B.timeStamp-this.lastTime<500,$=!this.lastTap||this.lastTap.dist(L)<30;if(q&&$||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=L,this.count===this.numTaps)return this.reset(),L}};var ji=function(){this._zoomIn=new Qo({numTouches:1,numTaps:2}),this._zoomOut=new Qo({numTouches:2,numTaps:1}),this.reset()};ji.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ji.prototype.touchstart=function(B,G,H){this._zoomIn.touchstart(B,G,H),this._zoomOut.touchstart(B,G,H)},ji.prototype.touchmove=function(B,G,H){this._zoomIn.touchmove(B,G,H),this._zoomOut.touchmove(B,G,H)},ji.prototype.touchend=function(B,G,H){var L=this,q=this._zoomIn.touchend(B,G,H),$=this._zoomOut.touchend(B,G,H);return q?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(q)},{originalEvent:B})}}):$?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject($)},{originalEvent:B})}}):void 0},ji.prototype.touchcancel=function(){this.reset()},ji.prototype.enable=function(){this._enabled=!0},ji.prototype.disable=function(){this._enabled=!1,this.reset()},ji.prototype.isEnabled=function(){return this._enabled},ji.prototype.isActive=function(){return this._active};var Do={};Do[0]=1,Do[2]=2;var si=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};si.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},si.prototype._correctButton=function(B,G){return!1},si.prototype._move=function(B,G){return{}},si.prototype.mousedown=function(B,G){if(!this._lastPoint){var H=b.mouseButton(B);this._correctButton(B,H)&&(this._lastPoint=G,this._eventButton=H)}},si.prototype.mousemoveWindow=function(B,G){var H=this._lastPoint;if(H){if(B.preventDefault(),function(L,q){var $=Do[q];return L.buttons===void 0||(L.buttons&$)!==$}(B,this._eventButton))this.reset();else if(this._moved||!(G.dist(H)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(H,G)}},si.prototype.mouseupWindow=function(B){this._lastPoint&&b.mouseButton(B)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},si.prototype.enable=function(){this._enabled=!0},si.prototype.disable=function(){this._enabled=!1,this.reset()},si.prototype.isEnabled=function(){return this._enabled},si.prototype.isActive=function(){return this._active};var es=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(H,L){B.prototype.mousedown.call(this,H,L),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(H,L){return L===0&&!H.ctrlKey},G.prototype._move=function(H,L){return{around:L,panDelta:L.sub(H)}},G}(si),vo=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,L){return L===0&&H.ctrlKey||L===2},G.prototype._move=function(H,L){var q=.8*(L.x-H.x);if(q)return this._active=!0,{bearingDelta:q}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(si),Ci=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,L){return L===0&&H.ctrlKey||L===2},G.prototype._move=function(H,L){var q=-.5*(L.y-H.y);if(q)return this._active=!0,{pitchDelta:q}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(si),Pi=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};Pi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},Pi.prototype.touchstart=function(B,G,H){return this._calculateTransform(B,G,H)},Pi.prototype.touchmove=function(B,G,H){if(this._active&&!(H.length<this._minTouches))return B.preventDefault(),this._calculateTransform(B,G,H)},Pi.prototype.touchend=function(B,G,H){this._calculateTransform(B,G,H),this._active&&H.length<this._minTouches&&this.reset()},Pi.prototype.touchcancel=function(){this.reset()},Pi.prototype._calculateTransform=function(B,G,H){H.length>0&&(this._active=!0);var L=qa(H,G),q=new o.Point(0,0),$=new o.Point(0,0),ne=0;for(var ue in L){var ye=L[ue],Le=this._touches[ue];Le&&(q._add(ye),$._add(ye.sub(Le)),ne++,L[ue]=ye)}if(this._touches=L,!(ne<this._minTouches)&&$.mag()){var Ie=$.div(ne);if(this._sum._add(Ie),!(this._sum.mag()<this._clickTolerance))return{around:q.div(ne),panDelta:Ie}}},Pi.prototype.enable=function(){this._enabled=!0},Pi.prototype.disable=function(){this._enabled=!1,this.reset()},Pi.prototype.isEnabled=function(){return this._enabled},Pi.prototype.isActive=function(){return this._active};var sa=function(){this.reset()};function Ui(B,G,H){for(var L=0;L<B.length;L++)if(B[L].identifier===H)return G[L]}sa.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},sa.prototype._start=function(B){},sa.prototype._move=function(B,G,H){return{}},sa.prototype.touchstart=function(B,G,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([G[0],G[1]]))},sa.prototype.touchmove=function(B,G,H){if(this._firstTwoTouches){B.preventDefault();var L=this._firstTwoTouches,q=L[0],$=L[1],ne=Ui(H,G,q),ue=Ui(H,G,$);if(ne&&ue){var ye=this._aroundCenter?null:ne.add(ue).div(2);return this._move([ne,ue],ye,B)}}},sa.prototype.touchend=function(B,G,H){if(this._firstTwoTouches){var L=this._firstTwoTouches,q=L[0],$=L[1],ne=Ui(H,G,q),ue=Ui(H,G,$);ne&&ue||(this._active&&b.suppressClick(),this.reset())}},sa.prototype.touchcancel=function(){this.reset()},sa.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},sa.prototype.disable=function(){this._enabled=!1,this.reset()},sa.prototype.isEnabled=function(){return this._enabled},sa.prototype.isActive=function(){return this._active};function wr(B,G){return Math.log(B/G)/Math.LN2}var Ss=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},G.prototype._move=function(H,L){var q=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(wr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wr(this._distance,q),pinchAround:L}},G}(sa);function $s(B,G){return 180*B.angleWith(G)/Math.PI}var zo=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},G.prototype._move=function(H,L){var q=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$s(this._vector,q),pinchAround:L}},G.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var L=25/(Math.PI*this._minDiameter)*360,q=$s(H,this._startVector);return Math.abs(q)<L},G}(sa);function Ro(B){return Math.abs(B.y)>Math.abs(B.x)}var ts=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(H){this._lastPoints=H,Ro(H[0].sub(H[1]))&&(this._valid=!1)},G.prototype._move=function(H,L,q){var $=H[0].sub(this._lastPoints[0]),ne=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically($,ne,q.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:($.y+ne.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(H,L,q){if(this._valid!==void 0)return this._valid;var $=H.mag()>=2,ne=L.mag()>=2;if($||ne){if(!$||!ne)return this._firstMove===void 0&&(this._firstMove=q),q-this._firstMove<100&&void 0;var ue=H.y>0==L.y>0;return Ro(H)&&Ro(L)&&ue}},G}(sa),fs={panStep:100,bearingStep:15,pitchStep:10},dr=function(){var B=fs;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep,this._rotationDisabled=!1};function Es(B){return B*(2-B)}dr.prototype.reset=function(){this._active=!1},dr.prototype.keydown=function(B){var G=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var H=0,L=0,q=0,$=0,ne=0;switch(B.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:B.shiftKey?L=-1:(B.preventDefault(),$=-1);break;case 39:B.shiftKey?L=1:(B.preventDefault(),$=1);break;case 38:B.shiftKey?q=1:(B.preventDefault(),ne=-1);break;case 40:B.shiftKey?q=-1:(B.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(L=0,q=0),{cameraAnimation:function(ue){var ye=ue.getZoom();ue.easeTo({duration:300,easeId:"keyboardHandler",easing:Es,zoom:H?Math.round(ye)+H*(B.shiftKey?2:1):ye,bearing:ue.getBearing()+L*G._bearingStep,pitch:ue.getPitch()+q*G._pitchStep,offset:[-$*G._panStep,-ne*G._panStep],center:ue.getCenter()},{originalEvent:B})}}}},dr.prototype.enable=function(){this._enabled=!0},dr.prototype.disable=function(){this._enabled=!1,this.reset()},dr.prototype.isEnabled=function(){return this._enabled},dr.prototype.isActive=function(){return this._active},dr.prototype.disableRotation=function(){this._rotationDisabled=!0},dr.prototype.enableRotation=function(){this._rotationDisabled=!1};var mo=4.000244140625,Fa=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)};Fa.prototype.setZoomRate=function(B){this._defaultZoomRate=B},Fa.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},Fa.prototype.isEnabled=function(){return!!this._enabled},Fa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Fa.prototype.isZooming=function(){return!!this._zooming},Fa.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},Fa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fa.prototype.wheel=function(B){if(this.isEnabled()){var G=B.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,H=o.browser.now(),L=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,G!==0&&G%mo==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":L>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(L*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),B.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=B,this._delta-=G,this._active||this._start(B)),B.preventDefault()}},Fa.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},Fa.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=b.mousePos(this._el,B);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Fa.prototype.renderFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var H=this._type==="wheel"&&Math.abs(this._delta)>mo?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&L!==0&&(L=1/L);var q=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(q*L))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var $,ne=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,ue=this._startZoom,ye=this._easing,Le=!1;if(this._type==="wheel"&&ue&&ye){var Ie=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Ue=ye(Ie);$=o.number(ue,ne,Ue),Ie<1?this._frameId||(this._frameId=!0):Le=!0}else $=ne,Le=!0;return this._active=!0,Le&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Le,zoomDelta:$-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Fa.prototype._smoothOutEasing=function(B){var G=o.ease;if(this._prevEase){var H=this._prevEase,L=(o.browser.now()-H.start)/H.duration,q=H.easing(L+.01)-H.easing(L),$=.27/Math.sqrt(q*q+1e-4)*.01,ne=Math.sqrt(.0729-$*$);G=o.bezier($,ne,.25,1)}return this._prevEase={start:o.browser.now(),duration:B,easing:G},G},Fa.prototype.reset=function(){this._active=!1};var Fo=function(B,G){this._clickZoom=B,this._tapZoom=G};Fo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Fo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Fo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Fo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Vi=function(){this.reset()};Vi.prototype.reset=function(){this._active=!1},Vi.prototype.dblclick=function(B,G){return B.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(B.shiftKey?-1:1),around:H.unproject(G)},{originalEvent:B})}}},Vi.prototype.enable=function(){this._enabled=!0},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active};var Oi=function(){this._tap=new Qo({numTouches:1,numTaps:1}),this.reset()};Oi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Oi.prototype.touchstart=function(B,G,H){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=G[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(B,G,H))},Oi.prototype.touchmove=function(B,G,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var L=G[0],q=L.y-this._swipePoint.y;return this._swipePoint=L,B.preventDefault(),this._active=!0,{zoomDelta:q/128}}}else this._tap.touchmove(B,G,H)},Oi.prototype.touchend=function(B,G,H){this._tapTime?this._swipePoint&&H.length===0&&this.reset():this._tap.touchend(B,G,H)&&(this._tapTime=B.timeStamp)},Oi.prototype.touchcancel=function(){this.reset()},Oi.prototype.enable=function(){this._enabled=!0},Oi.prototype.disable=function(){this._enabled=!1,this.reset()},Oi.prototype.isEnabled=function(){return this._enabled},Oi.prototype.isActive=function(){return this._active};var ni=function(B,G,H){this._el=B,this._mousePan=G,this._touchPan=H};ni.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ni.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ni.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ni.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var no=function(B,G,H){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=G,this._mousePitch=H};no.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},no.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},no.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},no.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ii=function(B,G,H,L){this._el=B,this._touchZoom=G,this._touchRotate=H,this._tapDragZoom=L,this._rotationDisabled=!1,this._enabled=!0};Ii.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ii.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ii.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ii.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ii.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ii.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var yo=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Ls=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G}(o.Event);function Bo(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var Hr=function(B,G){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ei(B),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),o.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!0}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[o.window,"blur",void 0]];for(var L=0,q=this._listeners;L<q.length;L+=1){var $=q[L],ne=$[0],ue=$[1],ye=$[2];b.addEventListener(ne,ue,ne===o.window.document?this.handleWindowEvent:this.handleEvent,ye)}};Hr.prototype.destroy=function(){for(var B=0,G=this._listeners;B<G.length;B+=1){var H=G[B],L=H[0],q=H[1],$=H[2];b.removeEventListener(L,q,L===o.window.document?this.handleWindowEvent:this.handleEvent,$)}},Hr.prototype._addDefaultHandlers=function(B){var G=this._map,H=G.getCanvasContainer();this._add("mapEvent",new Ra(G,B));var L=G.boxZoom=new ia(G,B);this._add("boxZoom",L);var q=new ji,$=new Vi;G.doubleClickZoom=new Fo($,q),this._add("tapZoom",q),this._add("clickZoom",$);var ne=new Oi;this._add("tapDragZoom",ne);var ue=G.touchPitch=new ts;this._add("touchPitch",ue);var ye=new vo(B),Le=new Ci(B);G.dragRotate=new no(B,ye,Le),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",Le,["mouseRotate"]);var Ie=new es(B),Ue=new Pi(B);G.dragPan=new ni(H,Ie,Ue),this._add("mousePan",Ie),this._add("touchPan",Ue,["touchZoom","touchRotate"]);var qe=new zo,Qe=new Ss;G.touchZoomRotate=new Ii(H,Qe,qe,ne),this._add("touchRotate",qe,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]);var lt=G.scrollZoom=new Fa(G,this);this._add("scrollZoom",lt,["mousePan"]);var ft=G.keyboard=new dr;this._add("keyboard",ft),this._add("blockableMapEvent",new Va(G));for(var xt=0,St=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];xt<St.length;xt+=1){var Tt=St[xt];B.interactive&&B[Tt]&&G[Tt].enable(B[Tt])}},Hr.prototype._add=function(B,G,H){this._handlers.push({handlerName:B,handler:G,allowed:H}),this._handlersById[B]=G},Hr.prototype.stop=function(B){if(!this._updatingCamera){for(var G=0,H=this._handlers;G<H.length;G+=1)H[G].handler.reset();this._inertia.clear(),this._fireEvents({},{},B),this._changes=[]}},Hr.prototype.isActive=function(){for(var B=0,G=this._handlers;B<G.length;B+=1)if(G[B].handler.isActive())return!0;return!1},Hr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Hr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Hr.prototype.isMoving=function(){return!!yo(this._eventsInProgress)||this.isZooming()},Hr.prototype._blockedByActive=function(B,G,H){for(var L in B)if(L!==H&&(!G||G.indexOf(L)<0))return!0;return!1},Hr.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},Hr.prototype._getMapTouches=function(B){for(var G=[],H=0,L=B;H<L.length;H+=1){var q=L[H],$=q.target;this._el.contains($)&&G.push(q)}return G},Hr.prototype.handleEvent=function(B,G){if(B.type!=="blur"){this._updatingCamera=!0;for(var H=B.type==="renderFrame"?void 0:B,L={needsRenderFrame:!1},q={},$={},ne=B.touches?this._getMapTouches(B.touches):void 0,ue=ne?b.touchPos(this._el,ne):b.mousePos(this._el,B),ye=0,Le=this._handlers;ye<Le.length;ye+=1){var Ie=Le[ye],Ue=Ie.handlerName,qe=Ie.handler,Qe=Ie.allowed;if(qe.isEnabled()){var lt=void 0;this._blockedByActive($,Qe,Ue)?qe.reset():qe[G||B.type]&&(lt=qe[G||B.type](B,ue,ne),this.mergeHandlerResult(L,q,lt,Ue,H),lt&&lt.needsRenderFrame&&this._triggerRenderFrame()),(lt||qe.isActive())&&($[Ue]=qe)}}var ft={};for(var xt in this._previousActiveHandlers)$[xt]||(ft[xt]=H);this._previousActiveHandlers=$,(Object.keys(ft).length||Bo(L))&&(this._changes.push([L,q,ft]),this._triggerRenderFrame()),(Object.keys($).length||Bo(L))&&this._map._stop(!0),this._updatingCamera=!1;var St=L.cameraAnimation;St&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],St(this._map))}else this.stop(!0)},Hr.prototype.mergeHandlerResult=function(B,G,H,L,q){if(H){o.extend(B,H);var $={handlerName:L,originalEvent:H.originalEvent||q};H.zoomDelta!==void 0&&(G.zoom=$),H.panDelta!==void 0&&(G.drag=$),H.pitchDelta!==void 0&&(G.pitch=$),H.bearingDelta!==void 0&&(G.rotate=$)}},Hr.prototype._applyChanges=function(){for(var B={},G={},H={},L=0,q=this._changes;L<q.length;L+=1){var $=q[L],ne=$[0],ue=$[1],ye=$[2];ne.panDelta&&(B.panDelta=(B.panDelta||new o.Point(0,0))._add(ne.panDelta)),ne.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+ne.zoomDelta),ne.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+ne.bearingDelta),ne.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+ne.pitchDelta),ne.around!==void 0&&(B.around=ne.around),ne.pinchAround!==void 0&&(B.pinchAround=ne.pinchAround),ne.noInertia&&(B.noInertia=ne.noInertia),o.extend(G,ue),o.extend(H,ye)}this._updateMapTransform(B,G,H),this._changes=[]},Hr.prototype._updateMapTransform=function(B,G,H){var L=this._map,q=L.transform;if(!Bo(B))return this._fireEvents(G,H,!0);var $=B.panDelta,ne=B.zoomDelta,ue=B.bearingDelta,ye=B.pitchDelta,Le=B.around,Ie=B.pinchAround;Ie!==void 0&&(Le=Ie),L._stop(!0),Le=Le||L.transform.centerPoint;var Ue=q.pointLocation($?Le.sub($):Le);ue&&(q.bearing+=ue),ye&&(q.pitch+=ye),ne&&(q.zoom+=ne),q.setLocationAtPoint(Ue,Le),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents(G,H,!0)},Hr.prototype._fireEvents=function(B,G,H){var L=this,q=yo(this._eventsInProgress),$=yo(B),ne={};for(var ue in B){var ye=B[ue].originalEvent;this._eventsInProgress[ue]||(ne[ue+"start"]=ye),this._eventsInProgress[ue]=B[ue]}for(var Le in!q&&$&&this._fireEvent("movestart",$.originalEvent),ne)this._fireEvent(Le,ne[Le]);for(var Ie in $&&this._fireEvent("move",$.originalEvent),B){var Ue=B[Ie].originalEvent;this._fireEvent(Ie,Ue)}var qe,Qe={};for(var lt in this._eventsInProgress){var ft=this._eventsInProgress[lt],xt=ft.handlerName,St=ft.originalEvent;this._handlersById[xt].isActive()||(delete this._eventsInProgress[lt],qe=G[xt]||St,Qe[lt+"end"]=qe)}for(var Tt in Qe)this._fireEvent(Tt,Qe[Tt]);var zt=yo(this._eventsInProgress);if(H&&(q||$)&&!zt){this._updatingCamera=!0;var Et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Yt=function(qt){return qt!==0&&-L._bearingSnap<qt&&qt<L._bearingSnap};Et?(Yt(Et.bearing||this._map.getBearing())&&(Et.bearing=0),this._map.easeTo(Et,{originalEvent:qe})):(this._map.fire(new o.Event("moveend",{originalEvent:qe})),Yt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Hr.prototype._fireEvent=function(B,G){this._map.fire(new o.Event(B,G?{originalEvent:G}:{}))},Hr.prototype._requestFrame=function(){var B=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete B._frameId,B.handleEvent(new Ls("renderFrame",{timeStamp:G})),B._applyChanges()})},Hr.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ha=function(B){function G(H,L){B.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=L.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(H,L){return this.jumpTo({center:H},L)},G.prototype.panBy=function(H,L,q){return H=o.Point.convert(H).mult(-1),this.panTo(this.transform.center,o.extend({offset:H},L),q)},G.prototype.panTo=function(H,L,q){return this.easeTo(o.extend({center:H},L),q)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(H,L){return this.jumpTo({zoom:H},L),this},G.prototype.zoomTo=function(H,L,q){return this.easeTo(o.extend({zoom:H},L),q)},G.prototype.zoomIn=function(H,L){return this.zoomTo(this.getZoom()+1,H,L),this},G.prototype.zoomOut=function(H,L){return this.zoomTo(this.getZoom()-1,H,L),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(H,L){return this.jumpTo({bearing:H},L),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(H,L){return this.jumpTo({padding:H},L),this},G.prototype.rotateTo=function(H,L,q){return this.easeTo(o.extend({bearing:H},L),q)},G.prototype.resetNorth=function(H,L){return this.rotateTo(0,o.extend({duration:1e3},H),L),this},G.prototype.resetNorthPitch=function(H,L){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},H),L),this},G.prototype.snapToNorth=function(H,L){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,L):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(H,L){return this.jumpTo({pitch:H},L),this},G.prototype.cameraForBounds=function(H,L){H=o.LngLatBounds.convert(H);var q=L&&L.bearing||0;return this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),q,L)},G.prototype._cameraForBoxAndBearing=function(H,L,q,$){var ne={top:0,bottom:0,right:0,left:0};if(typeof($=o.extend({padding:ne,offset:[0,0],maxZoom:this.transform.maxZoom},$)).padding=="number"){var ue=$.padding;$.padding={top:ue,bottom:ue,right:ue,left:ue}}$.padding=o.extend(ne,$.padding);var ye=this.transform,Le=ye.padding,Ie=ye.project(o.LngLat.convert(H)),Ue=ye.project(o.LngLat.convert(L)),qe=Ie.rotate(-q*Math.PI/180),Qe=Ue.rotate(-q*Math.PI/180),lt=new o.Point(Math.max(qe.x,Qe.x),Math.max(qe.y,Qe.y)),ft=new o.Point(Math.min(qe.x,Qe.x),Math.min(qe.y,Qe.y)),xt=lt.sub(ft),St=(ye.width-(Le.left+Le.right+$.padding.left+$.padding.right))/xt.x,Tt=(ye.height-(Le.top+Le.bottom+$.padding.top+$.padding.bottom))/xt.y;if(!(Tt<0||St<0)){var zt=Math.min(ye.scaleZoom(ye.scale*Math.min(St,Tt)),$.maxZoom),Et=typeof $.offset.x=="number"?new o.Point($.offset.x,$.offset.y):o.Point.convert($.offset),Yt=($.padding.left-$.padding.right)/2,qt=($.padding.top-$.padding.bottom)/2,Ft=new o.Point(Yt,qt).rotate(q*Math.PI/180),fn=Et.add(Ft).mult(ye.scale/ye.zoomScale(zt));return{center:ye.unproject(Ie.add(Ue).div(2).sub(fn)),zoom:zt,bearing:q}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(H,L,q){return this._fitInternal(this.cameraForBounds(H,L),L,q)},G.prototype.fitScreenCoordinates=function(H,L,q,$,ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(H)),this.transform.pointLocation(o.Point.convert(L)),q,$),$,ne)},G.prototype._fitInternal=function(H,L,q){return H?(delete(L=o.extend(H,L)).padding,L.linear?this.easeTo(L,q):this.flyTo(L,q)):this},G.prototype.jumpTo=function(H,L){this.stop();var q=this.transform,$=!1,ne=!1,ue=!1;return"zoom"in H&&q.zoom!==+H.zoom&&($=!0,q.zoom=+H.zoom),H.center!==void 0&&(q.center=o.LngLat.convert(H.center)),"bearing"in H&&q.bearing!==+H.bearing&&(ne=!0,q.bearing=+H.bearing),"pitch"in H&&q.pitch!==+H.pitch&&(ue=!0,q.pitch=+H.pitch),H.padding==null||q.isPaddingEqual(H.padding)||(q.padding=H.padding),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L)),$&&this.fire(new o.Event("zoomstart",L)).fire(new o.Event("zoom",L)).fire(new o.Event("zoomend",L)),ne&&this.fire(new o.Event("rotatestart",L)).fire(new o.Event("rotate",L)).fire(new o.Event("rotateend",L)),ue&&this.fire(new o.Event("pitchstart",L)).fire(new o.Event("pitch",L)).fire(new o.Event("pitchend",L)),this.fire(new o.Event("moveend",L))},G.prototype.easeTo=function(H,L){var q=this;this._stop(!1,H.easeId),((H=o.extend({offset:[0,0],duration:500,easing:o.ease},H)).animate===!1||!H.essential&&o.browser.prefersReducedMotion)&&(H.duration=0);var $=this.transform,ne=this.getZoom(),ue=this.getBearing(),ye=this.getPitch(),Le=this.getPadding(),Ie="zoom"in H?+H.zoom:ne,Ue="bearing"in H?this._normalizeBearing(H.bearing,ue):ue,qe="pitch"in H?+H.pitch:ye,Qe="padding"in H?H.padding:$.padding,lt=o.Point.convert(H.offset),ft=$.centerPoint.add(lt),xt=$.pointLocation(ft),St=o.LngLat.convert(H.center||xt);this._normalizeCenter(St);var Tt,zt,Et=$.project(xt),Yt=$.project(St).sub(Et),qt=$.zoomScale(Ie-ne);H.around&&(Tt=o.LngLat.convert(H.around),zt=$.locationPoint(Tt));var Ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ie!==ne,this._rotating=this._rotating||ue!==Ue,this._pitching=this._pitching||qe!==ye,this._padding=!$.isPaddingEqual(Qe),this._easeId=H.easeId,this._prepareEase(L,H.noMoveStart,Ft),this._ease(function(fn){if(q._zooming&&($.zoom=o.number(ne,Ie,fn)),q._rotating&&($.bearing=o.number(ue,Ue,fn)),q._pitching&&($.pitch=o.number(ye,qe,fn)),q._padding&&($.interpolatePadding(Le,Qe,fn),ft=$.centerPoint.add(lt)),Tt)$.setLocationAtPoint(Tt,zt);else{var dn=$.zoomScale($.zoom-ne),kn=Ie>ne?Math.min(2,qt):Math.max(.5,qt),Sn=Math.pow(kn,1-fn),Bn=$.unproject(Et.add(Yt.mult(fn*Sn)).mult(dn));$.setLocationAtPoint($.renderWorldCopies?Bn.wrap():Bn,ft)}q._fireMoveEvents(L)},function(fn){q._afterEase(L,fn)},H),this},G.prototype._prepareEase=function(H,L,q){q===void 0&&(q={}),this._moving=!0,L||q.moving||this.fire(new o.Event("movestart",H)),this._zooming&&!q.zooming&&this.fire(new o.Event("zoomstart",H)),this._rotating&&!q.rotating&&this.fire(new o.Event("rotatestart",H)),this._pitching&&!q.pitching&&this.fire(new o.Event("pitchstart",H))},G.prototype._fireMoveEvents=function(H){this.fire(new o.Event("move",H)),this._zooming&&this.fire(new o.Event("zoom",H)),this._rotating&&this.fire(new o.Event("rotate",H)),this._pitching&&this.fire(new o.Event("pitch",H))},G.prototype._afterEase=function(H,L){if(!this._easeId||!L||this._easeId!==L){delete this._easeId;var q=this._zooming,$=this._rotating,ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,q&&this.fire(new o.Event("zoomend",H)),$&&this.fire(new o.Event("rotateend",H)),ne&&this.fire(new o.Event("pitchend",H)),this.fire(new o.Event("moveend",H))}},G.prototype.flyTo=function(H,L){var q=this;if(!H.essential&&o.browser.prefersReducedMotion){var $=o.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo($,L)}this.stop(),H=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},H);var ne=this.transform,ue=this.getZoom(),ye=this.getBearing(),Le=this.getPitch(),Ie=this.getPadding(),Ue="zoom"in H?o.clamp(+H.zoom,ne.minZoom,ne.maxZoom):ue,qe="bearing"in H?this._normalizeBearing(H.bearing,ye):ye,Qe="pitch"in H?+H.pitch:Le,lt="padding"in H?H.padding:ne.padding,ft=ne.zoomScale(Ue-ue),xt=o.Point.convert(H.offset),St=ne.centerPoint.add(xt),Tt=ne.pointLocation(St),zt=o.LngLat.convert(H.center||Tt);this._normalizeCenter(zt);var Et=ne.project(Tt),Yt=ne.project(zt).sub(Et),qt=H.curve,Ft=Math.max(ne.width,ne.height),fn=Ft/ft,dn=Yt.mag();if("minZoom"in H){var kn=o.clamp(Math.min(H.minZoom,ue,Ue),ne.minZoom,ne.maxZoom),Sn=Ft/ne.zoomScale(kn-ue);qt=Math.sqrt(Sn/dn*2)}var Bn=qt*qt;function $n(lr){var Tr=(fn*fn-Ft*Ft+(lr?-1:1)*Bn*Bn*dn*dn)/(2*(lr?fn:Ft)*Bn*dn);return Math.log(Math.sqrt(Tr*Tr+1)-Tr)}function sr(lr){return(Math.exp(lr)-Math.exp(-lr))/2}function qn(lr){return(Math.exp(lr)+Math.exp(-lr))/2}var ir=$n(0),vr=function(lr){return qn(ir)/qn(ir+qt*lr)},Ar=function(lr){return Ft*((qn(ir)*(sr(Tr=ir+qt*lr)/qn(Tr))-sr(ir))/Bn)/dn;var Tr},Kn=($n(1)-ir)/qt;if(Math.abs(dn)<1e-6||!isFinite(Kn)){if(Math.abs(Ft-fn)<1e-6)return this.easeTo(H,L);var ar=fn<Ft?-1:1;Kn=Math.abs(Math.log(fn/Ft))/qt,Ar=function(){return 0},vr=function(lr){return Math.exp(ar*qt*lr)}}if("duration"in H)H.duration=+H.duration;else{var br="screenSpeed"in H?+H.screenSpeed/qt:+H.speed;H.duration=1e3*Kn/br}return H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=ye!==qe,this._pitching=Qe!==Le,this._padding=!ne.isPaddingEqual(lt),this._prepareEase(L,!1),this._ease(function(lr){var Tr=lr*Kn,Er=1/vr(Tr);ne.zoom=lr===1?Ue:ue+ne.scaleZoom(Er),q._rotating&&(ne.bearing=o.number(ye,qe,lr)),q._pitching&&(ne.pitch=o.number(Le,Qe,lr)),q._padding&&(ne.interpolatePadding(Ie,lt,lr),St=ne.centerPoint.add(xt));var Rr=lr===1?zt:ne.unproject(Et.add(Yt.mult(Ar(Tr))).mult(Er));ne.setLocationAtPoint(ne.renderWorldCopies?Rr.wrap():Rr,St),q._fireMoveEvents(L)},function(){return q._afterEase(L)},H),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(H,L){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var q=this._onEaseEnd;delete this._onEaseEnd,q.call(this,L)}if(!H){var $=this.handlers;$&&$.stop(!1)}return this},G.prototype._ease=function(H,L,q){q.animate===!1||q.duration===0?(H(1),L()):(this._easeStart=o.browser.now(),this._easeOptions=q,this._onEaseFrame=H,this._onEaseEnd=L,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var H=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(H,L){H=o.wrap(H,-180,180);var q=Math.abs(H-L);return Math.abs(H-360-L)<q&&(H-=360),Math.abs(H+360-L)<q&&(H+=360),H},G.prototype._normalizeCenter=function(H){var L=this.transform;if(L.renderWorldCopies&&!L.lngRange){var q=H.lng-L.center.lng;H.lng+=q>180?-360:q<-180?360:0}},G}(o.Evented),li=function(B){B===void 0&&(B={}),this.options=B,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};li.prototype.getDefaultPosition=function(){return"bottom-right"},li.prototype.onAdd=function(B){var G=this.options&&this.options.compact;return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},li.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},li.prototype._setElementTitle=function(B,G){var H=this._map._getUIString("AttributionControl."+G);B.title=H,B.setAttribute("aria-label",H)},li.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},li.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(B){var H=G.reduce(function(L,q,$){return q.value&&(L+=q.key+"="+q.value+($<G.length-1?"&":"")),L},"?");B.href=o.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow",this._setElementTitle(B,"MapFeedback")}},li.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.sourceDataType!=="visibility"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},li.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(ue){return typeof ue!="string"?"":ue})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var H=this._map.style.sourceCaches;for(var L in H){var q=H[L];if(q.used){var $=q.getSource();$.attribution&&B.indexOf($.attribution)<0&&B.push($.attribution)}}B.sort(function(ue,ye){return ue.length-ye.length});var ne=(B=B.filter(function(ue,ye){for(var Le=ye+1;Le<B.length;Le++)if(B[Le].indexOf(ue)>=0)return!1;return!0})).join(" | ");ne!==this._attribHTML&&(this._attribHTML=ne,B.length?(this._innerContainer.innerHTML=ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},li.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ro=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};ro.prototype.onAdd=function(B){this._map=B,this._container=b.create("div","mapboxgl-ctrl");var G=b.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ro.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ro.prototype.getDefaultPosition=function(){return"bottom-left"},ro.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ro.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var G in B)if(B[G].getSource().mapbox_logo)return!0;return!1}},ro.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var G=B[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var ui=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ui.prototype.add=function(B){var G=++this._id;return this._queue.push({callback:B,id:G,cancelled:!1}),G},ui.prototype.remove=function(B){for(var G=this._currentlyRunning,H=0,L=G?this._queue.concat(G):this._queue;H<L.length;H+=1){var q=L[H];if(q.id===B)return void(q.cancelled=!0)}},ui.prototype.run=function(B){B===void 0&&(B=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,L=G;H<L.length;H+=1){var q=L[H];if(!q.cancelled&&(q.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ui.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var hs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ps=o.window.HTMLImageElement,ci=o.window.HTMLElement,Vr=o.window.ImageBitmap,ao=60,ns={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ao,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qi=function(B){function G(L){var q=this;if((L=o.extend({},ns,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>ao)throw new Error("maxPitch must be less than or equal to 60");var $=new Wr(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies);if(B.call(this,$,L),this._interactive=L.interactive,this._maxTileCacheSize=L.maxTileCacheSize,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new ui,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},hs,L.locale),this._clickTolerance=L.clickTolerance,this._requestManager=new o.RequestManager(L.transformRequest,L.accessToken),typeof L.container=="string"){if(this._container=o.window.document.getElementById(L.container),!this._container)throw new Error("Container '"+L.container+"' not found.")}else{if(!(L.container instanceof ci))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return q._update(!1)}),this.on("moveend",function(){return q._update(!1)}),this.on("zoom",function(){return q._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Hr(this,L);var ne=typeof L.hash=="string"&&L.hash||void 0;this._hash=L.hash&&new _i(ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,o.extend({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new li({customAttribution:L.customAttribution})),this.addControl(new ro,L.logoPosition),this.on("style.load",function(){q.transform.unmodified&&q.jumpTo(q.style.stylesheet)}),this.on("data",function(ue){q._update(ue.dataType==="style"),q.fire(new o.Event(ue.dataType+"data",ue))}),this.on("dataloading",function(ue){q.fire(new o.Event(ue.dataType+"dataloading",ue))})}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(L,q){if(q===void 0&&(q=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var $=L.onAdd(this);this._controls.push(L);var ne=this._controlPositions[q];return q.indexOf("bottom")!==-1?ne.insertBefore($,ne.firstChild):ne.appendChild($),this},G.prototype.removeControl=function(L){if(!L||!L.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var q=this._controls.indexOf(L);return q>-1&&this._controls.splice(q,1),L.onRemove(this),this},G.prototype.hasControl=function(L){return this._controls.indexOf(L)>-1},G.prototype.resize=function(L){var q=this._containerDimensions(),$=q[0],ne=q[1];this._resizeCanvas($,ne),this.transform.resize($,ne),this.painter.resize($,ne);var ue=!this._moving;return ue&&(this.stop(),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L))),this.fire(new o.Event("resize",L)),ue&&this.fire(new o.Event("moveend",L)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(L){return this.transform.setMaxBounds(o.LngLatBounds.convert(L)),this._update()},G.prototype.setMinZoom=function(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(L){if((L=L??ao)>ao)throw new Error("maxPitch must be less than or equal to 60");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(L){return this.transform.renderWorldCopies=L,this._update()},G.prototype.project=function(L){return this.transform.locationPoint(o.LngLat.convert(L))},G.prototype.unproject=function(L){return this.transform.pointLocation(o.Point.convert(L))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(L,q,$){var ne,ue=this;if(L==="mouseenter"||L==="mouseover"){var ye=!1;return{layer:q,listener:$,delegates:{mousemove:function(Ie){var Ue=ue.getLayer(q)?ue.queryRenderedFeatures(Ie.point,{layers:[q]}):[];Ue.length?ye||(ye=!0,$.call(ue,new ti(L,ue,Ie.originalEvent,{features:Ue}))):ye=!1},mouseout:function(){ye=!1}}}}if(L==="mouseleave"||L==="mouseout"){var Le=!1;return{layer:q,listener:$,delegates:{mousemove:function(Ie){(ue.getLayer(q)?ue.queryRenderedFeatures(Ie.point,{layers:[q]}):[]).length?Le=!0:Le&&(Le=!1,$.call(ue,new ti(L,ue,Ie.originalEvent)))},mouseout:function(Ie){Le&&(Le=!1,$.call(ue,new ti(L,ue,Ie.originalEvent)))}}}}return{layer:q,listener:$,delegates:(ne={},ne[L]=function(Ie){var Ue=ue.getLayer(q)?ue.queryRenderedFeatures(Ie.point,{layers:[q]}):[];Ue.length&&(Ie.features=Ue,$.call(ue,Ie),delete Ie.features)},ne)}},G.prototype.on=function(L,q,$){if($===void 0)return B.prototype.on.call(this,L,q);var ne=this._createDelegatedListener(L,q,$);for(var ue in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(ne),ne.delegates)this.on(ue,ne.delegates[ue]);return this},G.prototype.once=function(L,q,$){if($===void 0)return B.prototype.once.call(this,L,q);var ne=this._createDelegatedListener(L,q,$);for(var ue in ne.delegates)this.once(ue,ne.delegates[ue]);return this},G.prototype.off=function(L,q,$){var ne=this;return $===void 0?B.prototype.off.call(this,L,q):(this._delegatedListeners&&this._delegatedListeners[L]&&function(ue){for(var ye=ue[L],Le=0;Le<ye.length;Le++){var Ie=ye[Le];if(Ie.layer===q&&Ie.listener===$){for(var Ue in Ie.delegates)ne.off(Ue,Ie.delegates[Ue]);return ye.splice(Le,1),ne}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(L,q){if(!this.style)return[];var $;if(q!==void 0||L===void 0||L instanceof o.Point||Array.isArray(L)||(q=L,L=void 0),q=q||{},(L=L||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof L[0]=="number")$=[o.Point.convert(L)];else{var ne=o.Point.convert(L[0]),ue=o.Point.convert(L[1]);$=[ne,new o.Point(ue.x,ne.y),ue,new o.Point(ne.x,ue.y),ne]}return this.style.queryRenderedFeatures($,q,this.transform)},G.prototype.querySourceFeatures=function(L,q){return this.style.querySourceFeatures(L,q)},G.prototype.setStyle=function(L,q){return(q=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},q)).diff!==!1&&q.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,q),this):(this._localIdeographFontFamily=q.localIdeographFontFamily,this._updateStyle(L,q))},G.prototype._getUIString=function(L){var q=this._locale[L];if(q==null)throw new Error("Missing UI string '"+L+"'");return q},G.prototype._updateStyle=function(L,q){return this.style&&(this.style.setEventedParent(null),this.style._remove()),L?(this.style=new Jn(this,q||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L):this.style.loadJSON(L),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Jn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(L,q){var $=this;if(typeof L=="string"){var ne=this._requestManager.normalizeStyleURL(L),ue=this._requestManager.transformRequest(ne,o.ResourceType.Style);o.getJSON(ue,function(ye,Le){ye?$.fire(new o.ErrorEvent(ye)):Le&&$._updateDiff(Le,q)})}else typeof L=="object"&&this._updateDiff(L,q)},G.prototype._updateDiff=function(L,q){try{this.style.setState(L)&&this._update(!0)}catch($){o.warnOnce("Unable to perform style diff: "+($.message||$.error||$)+".  Rebuilding the style from scratch."),this._updateStyle(L,q)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(L,q){return this._lazyInitEmptyStyle(),this.style.addSource(L,q),this._update(!0)},G.prototype.isSourceLoaded=function(L){var q=this.style&&this.style.sourceCaches[L];if(q!==void 0)return q.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+L+"'")))},G.prototype.areTilesLoaded=function(){var L=this.style&&this.style.sourceCaches;for(var q in L){var $=L[q]._tiles;for(var ne in $){var ue=$[ne];if(ue.state!=="loaded"&&ue.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(L,q,$){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,q,$)},G.prototype.removeSource=function(L){return this.style.removeSource(L),this._update(!0)},G.prototype.getSource=function(L){return this.style.getSource(L)},G.prototype.addImage=function(L,q,$){$===void 0&&($={});var ne=$.pixelRatio;ne===void 0&&(ne=1);var ue=$.sdf;ue===void 0&&(ue=!1);var ye=$.stretchX,Le=$.stretchY,Ie=$.content;if(this._lazyInitEmptyStyle(),q instanceof ps||Vr&&q instanceof Vr){var Ue=o.browser.getImageData(q),qe=Ue.width,Qe=Ue.height,lt=Ue.data;this.style.addImage(L,{data:new o.RGBAImage({width:qe,height:Qe},lt),pixelRatio:ne,stretchX:ye,stretchY:Le,content:Ie,sdf:ue,version:0})}else{if(q.width===void 0||q.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ft=q.width,xt=q.height,St=q.data,Tt=q;this.style.addImage(L,{data:new o.RGBAImage({width:ft,height:xt},new Uint8Array(St)),pixelRatio:ne,stretchX:ye,stretchY:Le,content:Ie,sdf:ue,version:0,userImage:Tt}),Tt.onAdd&&Tt.onAdd(this,L)}},G.prototype.updateImage=function(L,q){var $=this.style.getImage(L);if(!$)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ne=q instanceof ps||Vr&&q instanceof Vr?o.browser.getImageData(q):q,ue=ne.width,ye=ne.height,Le=ne.data;if(ue===void 0||ye===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ue!==$.data.width||ye!==$.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var Ie=!(q instanceof ps||Vr&&q instanceof Vr);$.data.replace(Le,Ie),this.style.updateImage(L,$)},G.prototype.hasImage=function(L){return L?!!this.style.getImage(L):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(L){this.style.removeImage(L)},G.prototype.loadImage=function(L,q){o.getImage(this._requestManager.transformRequest(L,o.ResourceType.Image),q)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(L,q){return this._lazyInitEmptyStyle(),this.style.addLayer(L,q),this._update(!0)},G.prototype.moveLayer=function(L,q){return this.style.moveLayer(L,q),this._update(!0)},G.prototype.removeLayer=function(L){return this.style.removeLayer(L),this._update(!0)},G.prototype.getLayer=function(L){return this.style.getLayer(L)},G.prototype.setLayerZoomRange=function(L,q,$){return this.style.setLayerZoomRange(L,q,$),this._update(!0)},G.prototype.setFilter=function(L,q,$){return $===void 0&&($={}),this.style.setFilter(L,q,$),this._update(!0)},G.prototype.getFilter=function(L){return this.style.getFilter(L)},G.prototype.setPaintProperty=function(L,q,$,ne){return ne===void 0&&(ne={}),this.style.setPaintProperty(L,q,$,ne),this._update(!0)},G.prototype.getPaintProperty=function(L,q){return this.style.getPaintProperty(L,q)},G.prototype.setLayoutProperty=function(L,q,$,ne){return ne===void 0&&(ne={}),this.style.setLayoutProperty(L,q,$,ne),this._update(!0)},G.prototype.getLayoutProperty=function(L,q){return this.style.getLayoutProperty(L,q)},G.prototype.setLight=function(L,q){return q===void 0&&(q={}),this._lazyInitEmptyStyle(),this.style.setLight(L,q),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(L,q){return this.style.setFeatureState(L,q),this._update()},G.prototype.removeFeatureState=function(L,q){return this.style.removeFeatureState(L,q),this._update()},G.prototype.getFeatureState=function(L){return this.style.getFeatureState(L)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var L=0,q=0;return this._container&&(L=this._container.clientWidth||400,q=this._container.clientHeight||300),[L,q]},G.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var L=this._container;L.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",L)).style.visibility="hidden",this._detectMissingCSS();var q=this._canvasContainer=b.create("div","mapboxgl-canvas-container",L);this._interactive&&q.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",q),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var $=this._containerDimensions();this._resizeCanvas($[0],$[1]);var ne=this._controlContainer=b.create("div","mapboxgl-control-container",L),ue=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ye){ue[ye]=b.create("div","mapboxgl-ctrl-"+ye,ne)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},G.prototype._resizeCanvas=function(L,q){var $=o.browser.devicePixelRatio||1;this._canvas.width=$*L,this._canvas.height=$*q,this._canvas.style.width=L+"px",this._canvas.style.height=q+"px"},G.prototype._setupPainter=function(){var L=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),q=this._canvas.getContext("webgl",L)||this._canvas.getContext("experimental-webgl",L);q?(this.painter=new $r(q,this.transform),o.webpSupported.testSupport(q)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(L){L.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:L}))},G.prototype._contextRestored=function(L){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:L}))},G.prototype._onMapScroll=function(L){if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(L){return this.style?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(L){return this._update(),this._renderTaskQueue.add(L)},G.prototype._cancelRenderFrame=function(L){this._renderTaskQueue.remove(L)},G.prototype._render=function(L){var q,$=this,ne=0,ue=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(q=ue.createQueryEXT(),ue.beginQueryEXT(ue.TIME_ELAPSED_EXT,q),ne=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),!this._removed){var ye=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Le=this.transform.zoom,Ie=o.browser.now();this.style.zoomHistory.update(Le,Ie);var Ue=new o.EvaluationParameters(Le,{now:Ie,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qe=Ue.crossFadingFactor();qe===1&&qe===this._crossFadingFactor||(ye=!0,this._crossFadingFactor=qe),this.style.update(Ue)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||ye)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Qe=o.browser.now()-ne;ue.endQueryEXT(ue.TIME_ELAPSED_EXT,q),setTimeout(function(){var xt=ue.getQueryObjectEXT(q,ue.QUERY_RESULT_EXT)/1e6;ue.deleteQueryEXT(q),$.fire(new o.Event("gpu-timing-frame",{cpuTime:Qe,gpuTime:xt}))},50)}if(this.listens("gpu-timing-layer")){var lt=this.painter.collectGpuTimers();setTimeout(function(){var xt=$.painter.queryGpuTimers(lt);$.fire(new o.Event("gpu-timing-layer",{layerTimes:xt}))},50)}var ft=this._sourcesDirty||this._styleDirty||this._placementDirty;return ft||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ft||(this._fullyLoaded=!0),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var L=0,q=this._controls;L<q.length;L+=1)q[L].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var $=this.painter.context.gl.getExtension("WEBGL_lose_context");$&&$.loseContext&&$.loseContext(),ds(this._canvasContainer),ds(this._controlContainer),ds(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},G.prototype.triggerRepaint=function(){var L=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(q){L._frame=null,L._render(q)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(L){this._trackResize&&this.resize({originalEvent:L})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function(L){this._showPadding!==L&&(this._showPadding=L,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function(L){this._vertices=L,this._update()},G.prototype._setCacheLimits=function(L,q){o.setCacheLimits(L,q)},H.version.get=function(){return o.version},Object.defineProperties(G.prototype,H),G}(Ha);function ds(B){B.parentNode&&B.parentNode.removeChild(B)}var gs={showCompass:!0,showZoom:!0,visualizePitch:!1},Hi=function(B){var G=this;this.options=o.extend({},gs,B),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return G._map.zoomIn({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return G._map.zoomOut({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:H}):G._map.resetNorth({},{originalEvent:H})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Hi.prototype._updateZoomButtons=function(){var B=this._map.getZoom(),G=B===this._map.getMaxZoom(),H=B===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=H,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",H.toString())},Hi.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},Hi.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new la(this._map,this._compass,this.options.visualizePitch)),this._container},Hi.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Hi.prototype._createButton=function(B,G){var H=b.create("button",B,this._container);return H.type="button",H.addEventListener("click",G),H},Hi.prototype._setButtonTitle=function(B,G){var H=this._map._getUIString("NavigationControl."+G);B.title=H,B.setAttribute("aria-label",H)};var la=function(B,G,H){H===void 0&&(H=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new vo({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,H&&(this.mousePitch=new Ci({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(G,"mousedown",this.mousedown),b.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(G,"touchmove",this.touchmove),b.addEventListener(G,"touchend",this.touchend),b.addEventListener(G,"touchcancel",this.reset)};function rs(B,G,H){if(B=new o.LngLat(B.lng,B.lat),G){var L=new o.LngLat(B.lng-360,B.lat),q=new o.LngLat(B.lng+360,B.lat),$=H.locationPoint(B).distSqr(G);H.locationPoint(L).distSqr(G)<$?B=L:H.locationPoint(q).distSqr(G)<$&&(B=q)}for(;Math.abs(B.lng-H.center.lng)>180;){var ne=H.locationPoint(B);if(ne.x>=0&&ne.y>=0&&ne.x<=H.width&&ne.y<=H.height)break;B.lng>H.center.lng?B.lng-=360:B.lng+=360}return B}la.prototype.down=function(B,G){this.mouseRotate.mousedown(B,G),this.mousePitch&&this.mousePitch.mousedown(B,G),b.disableDrag()},la.prototype.move=function(B,G){var H=this.map,L=this.mouseRotate.mousemoveWindow(B,G);if(L&&L.bearingDelta&&H.setBearing(H.getBearing()+L.bearingDelta),this.mousePitch){var q=this.mousePitch.mousemoveWindow(B,G);q&&q.pitchDelta&&H.setPitch(H.getPitch()+q.pitchDelta)}},la.prototype.off=function(){var B=this.element;b.removeEventListener(B,"mousedown",this.mousedown),b.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(B,"touchmove",this.touchmove),b.removeEventListener(B,"touchend",this.touchend),b.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},la.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(o.window,"mousemove",this.mousemove),b.removeEventListener(o.window,"mouseup",this.mouseup)},la.prototype.mousedown=function(B){this.down(o.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),b.mousePos(this.element,B)),b.addEventListener(o.window,"mousemove",this.mousemove),b.addEventListener(o.window,"mouseup",this.mouseup)},la.prototype.mousemove=function(B){this.move(B,b.mousePos(this.element,B))},la.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},la.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},la.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},la.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},la.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var kr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cr(B,G,H){var L=B.classList;for(var q in kr)L.remove("mapboxgl-"+H+"-anchor-"+q);L.add("mapboxgl-"+H+"-anchor-"+G)}var wi,io=function(B){function G(H,L){if(B.call(this),(H instanceof o.window.HTMLElement||L)&&(H=o.extend({element:H},L)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._scale=H&&H.scale||1,this._draggable=H&&H.draggable||!1,this._clickTolerance=H&&H.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&H.pitchAlignment!=="auto"?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=o.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var q=b.createNS("http://www.w3.org/2000/svg","svg");q.setAttributeNS(null,"display","block"),q.setAttributeNS(null,"height","41px"),q.setAttributeNS(null,"width","27px"),q.setAttributeNS(null,"viewBox","0 0 27 41");var $=b.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"stroke","none"),$.setAttributeNS(null,"stroke-width","1"),$.setAttributeNS(null,"fill","none"),$.setAttributeNS(null,"fill-rule","evenodd");var ne=b.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill-rule","nonzero");var ue=b.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ue.setAttributeNS(null,"fill","#000000");for(var ye=0,Le=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ye<Le.length;ye+=1){var Ie=Le[ye],Ue=b.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",Ie.rx),Ue.setAttributeNS(null,"ry",Ie.ry),ue.appendChild(Ue)}var qe=b.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill",this._color);var Qe=b.createNS("http://www.w3.org/2000/svg","path");Qe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qe.appendChild(Qe);var lt=b.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"opacity","0.25"),lt.setAttributeNS(null,"fill","#000000");var ft=b.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),lt.appendChild(ft);var xt=b.createNS("http://www.w3.org/2000/svg","g");xt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xt.setAttributeNS(null,"fill","#FFFFFF");var St=b.createNS("http://www.w3.org/2000/svg","g");St.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Tt=b.createNS("http://www.w3.org/2000/svg","circle");Tt.setAttributeNS(null,"fill","#000000"),Tt.setAttributeNS(null,"opacity","0.25"),Tt.setAttributeNS(null,"cx","5.5"),Tt.setAttributeNS(null,"cy","5.5"),Tt.setAttributeNS(null,"r","5.4999962");var zt=b.createNS("http://www.w3.org/2000/svg","circle");zt.setAttributeNS(null,"fill","#FFFFFF"),zt.setAttributeNS(null,"cx","5.5"),zt.setAttributeNS(null,"cy","5.5"),zt.setAttributeNS(null,"r","5.4999962"),St.appendChild(Tt),St.appendChild(zt),ne.appendChild(ue),ne.appendChild(qe),ne.appendChild(lt),ne.appendChild(xt),ne.appendChild(St),q.appendChild(ne),q.setAttributeNS(null,"height",41*this._scale+"px"),q.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(q),this._offset=o.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Et){Et.preventDefault()}),this._element.addEventListener("mousedown",function(Et){Et.preventDefault()}),Cr(this._element,this._anchor,"marker"),this._popup=null}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var L=13.5,q=Math.sqrt(Math.pow(L,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[q,-1*(24.6+q)],"bottom-right":[-q,-1*(24.6+q)],left:[L,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(H){var L=H.code,q=H.charCode||H.keyCode;L!=="Space"&&L!=="Enter"&&q!==32&&q!==13||this.togglePopup()},G.prototype._onMapClick=function(H){var L=H.originalEvent.target,q=this._element;this._popup&&(L===q||q.contains(L))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},G.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=rs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(L="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var q="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?q="rotateX(0deg)":this._pitchAlignment==="map"&&(q="rotateX("+this._map.getPitch()+"deg)"),H&&H.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,kr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+q+" "+L)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(H){return this._offset=o.Point.convert(H),this._update(),this},G.prototype._onMove=function(H){if(!this._isDragging){var L=this._clickTolerance||this._map._clickTolerance;this._isDragging=H.point.dist(this._pointerdownPos)>=L}this._isDragging&&(this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._pointerdownPos=H.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&H!=="auto"?H:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(o.Evented),xo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},La=0,oo=!1,Qr=function(B){function G(H){B.call(this),this.options=o.extend({},xo,H),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){return this._map=H,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),L=this._setupUI,wi!==void 0?L(wi):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(q){wi=q.state!=="denied",L(wi)}):(wi=!!o.window.navigator.geolocation,L(wi)),this._container;var L},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,La=0,oo=!1},G.prototype._isOutOfMapMaxBounds=function(H){var L=this._map.getMaxBounds(),q=H.coords;return L&&(q.longitude<L.getWest()||q.longitude>L.getEast()||q.latitude<L.getSouth()||q.latitude>L.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(H),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",H)),this._finish()}},G.prototype._updateCamera=function(H){var L=new o.LngLat(H.coords.longitude,H.coords.latitude),q=H.coords.accuracy,$=this._map.getBearing(),ne=o.extend({bearing:$},this.options.fitBoundsOptions);this._map.fitBounds(L.toBounds(q),ne,{geolocateSource:!0})},G.prototype._updateMarker=function(H){if(H){var L=new o.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat(L).addTo(this._map),this._userLocationDotMarker.setLngLat(L).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,L=this._map.unproject([0,H]),q=this._map.unproject([1,H]),$=L.distanceTo(q),ne=Math.ceil(2*this._accuracy/$);this._circleElement.style.width=ne+"px",this._circleElement.style.height=ne+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(H.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(H.code===3&&oo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",H)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(H){var L=this;if(this._container.addEventListener("contextmenu",function(ne){return ne.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",H===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q)}else{var $=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=$,this._geolocateButton.setAttribute("aria-label",$)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new io(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new io({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ne){var ue=ne.originalEvent&&ne.originalEvent.type==="resize";ne.geolocateSource||L._watchState!=="ACTIVE_LOCK"||ue||(L._watchState="BACKGROUND",L._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),L._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),L.fire(new o.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":La--,oo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++La>1?(H={maximumAge:6e5,timeout:0},oo=!0):(H=this.options.positionOptions,oo=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(o.Evented),fl={maxWidth:100,unit:"metric"},Ti=function(B){this.options=o.extend({},fl,B),o.bindAll(["_onMove","setUnit"],this)};function na(B,G,H){var L=H&&H.maxWidth||100,q=B._container.clientHeight/2,$=B.unproject([0,q]),ne=B.unproject([L,q]),ue=$.distanceTo(ne);if(H&&H.unit==="imperial"){var ye=3.2808*ue;ye>5280?da(G,L,ye/5280,B._getUIString("ScaleControl.Miles")):da(G,L,ye,B._getUIString("ScaleControl.Feet"))}else H&&H.unit==="nautical"?da(G,L,ue/1852,B._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?da(G,L,ue/1e3,B._getUIString("ScaleControl.Kilometers")):da(G,L,ue,B._getUIString("ScaleControl.Meters"))}function da(B,G,H,L){var q,$,ne,ue=(q=H,($=Math.pow(10,(""+Math.floor(q)).length-1))*((ne=q/$)>=10?10:ne>=5?5:ne>=3?3:ne>=2?2:ne>=1?1:function(Le){var Ie=Math.pow(10,Math.ceil(-Math.log(Le)/Math.LN10));return Math.round(Le*Ie)/Ie}(ne))),ye=ue/H;B.style.width=G*ye+"px",B.innerHTML=ue+"&nbsp;"+L}Ti.prototype.getDefaultPosition=function(){return"bottom-left"},Ti.prototype._onMove=function(){na(this._map,this._container,this.options)},Ti.prototype.onAdd=function(B){return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ti.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ti.prototype.setUnit=function(B){this.options.unit=B,na(this._map,this._container,this.options)};var gi=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof o.window.HTMLElement?this._container=B.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};gi.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},gi.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},gi.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},gi.prototype._setupUI=function(){var B=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},gi.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},gi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},gi.prototype._isFullscreen=function(){return this._fullscreen},gi.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},gi.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var No={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Qs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xe=function(B){function G(H){B.call(this),this.options=o.extend(Object.create(No),H),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(H){return this.setDOMContent(o.window.document.createTextNode(H))},G.prototype.setHTML=function(H){var L,q=o.window.document.createDocumentFragment(),$=o.window.document.createElement("body");for($.innerHTML=H;L=$.firstChild;)q.appendChild(L);return this.setDOMContent(q)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},G.prototype.setDOMContent=function(H){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(H),this._createCloseButton(),this._update(),this._focusFirstElement(),this},G.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},G.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},G.prototype.setOffset=function(H){return this.options.offset=H,this._update(),this},G.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},G.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(H){this._update(H.point)},G.prototype._onMouseMove=function(H){this._update(H.point)},G.prototype._onDrag=function(H){this._update(H.point)},G.prototype._update=function(H){var L=this,q=this._lngLat||this._trackPointer;if(this._map&&q&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(qe){return L._container.classList.add(qe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=rs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var $=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),ne=this.options.anchor,ue=Je(this.options.offset);if(!ne){var ye,Le=this._container.offsetWidth,Ie=this._container.offsetHeight;ye=$.y+ue.bottom.y<Ie?["top"]:$.y>this._map.transform.height-Ie?["bottom"]:[],$.x<Le/2?ye.push("left"):$.x>this._map.transform.width-Le/2&&ye.push("right"),ne=ye.length===0?"bottom":ye.join("-")}var Ue=$.add(ue[ne]).round();b.setTransform(this._container,kr[ne]+" translate("+Ue.x+"px,"+Ue.y+"px)"),Cr(this._container,ne,"popup")}},G.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var H=this._container.querySelector(Qs);H&&H.focus()}},G.prototype._onClose=function(){this.remove()},G}(o.Evented);function Je(B){if(B){if(typeof B=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new o.Point(0,0),top:new o.Point(0,B),"top-left":new o.Point(G,G),"top-right":new o.Point(-G,G),bottom:new o.Point(0,-B),"bottom-left":new o.Point(G,-G),"bottom-right":new o.Point(-G,-G),left:new o.Point(B,0),right:new o.Point(-B,0)}}if(B instanceof o.Point||Array.isArray(B)){var H=o.Point.convert(B);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:o.Point.convert(B.center||[0,0]),top:o.Point.convert(B.top||[0,0]),"top-left":o.Point.convert(B["top-left"]||[0,0]),"top-right":o.Point.convert(B["top-right"]||[0,0]),bottom:o.Point.convert(B.bottom||[0,0]),"bottom-left":o.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(B["bottom-right"]||[0,0]),left:o.Point.convert(B.left||[0,0]),right:o.Point.convert(B.right||[0,0])}}return Je(new o.Point(0,0))}var ot={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:qi,NavigationControl:Hi,GeolocateControl:Qr,AttributionControl:li,ScaleControl:Ti,FullscreenControl:gi,Popup:Xe,Marker:io,Style:Jn,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){gt().acquire(nt)},clearPrewarmedResources:function(){var B=ct;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(nt),ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(B){o.config.ACCESS_TOKEN=B},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(B){o.config.API_URL=B},get workerCount(){return We.workerCount},set workerCount(B){We.workerCount=B},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){o.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){o.clearTileCache(B)},workerUrl:""};return ot}),M}()},3108:function(ee,z,e){ee.exports=e(26099)},26099:function(ee,z,e){var M=e(64928),k=e(32420),o=e(51160),T=e(76752),b=e(55616),h=e(31264),s=e(47520),t=e(18400),a=e(72512),n=e(76244);function r(i,l){for(var u=l[0],p=l[1],c=1/(l[2]-u),x=1/(l[3]-p),d=new Array(i.length),g=0,v=i.length/2;g<v;g++)d[2*g]=k((i[2*g]-u)*c,0,1),d[2*g+1]=k((i[2*g+1]-p)*x,0,1);return d}ee.exports=function(i,l){l||(l={}),i=s(i,"float64"),l=b(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=h(l.maxDepth,255),p=h(l.bounds,T(i,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var c,x=r(i,p),d=i.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?c=new(a(l.dtype))(d):l.dtype&&(c=l.dtype,Array.isArray(c)&&(c.length=d));for(var g=0;g<d;++g)c[g]=g;var v=[],y=[],m=[],_=[];(function R(j,D,N,W,F,V){if(!W.length)return null;var U=v[F]||(v[F]=[]),te=m[F]||(m[F]=[]),J=y[F]||(y[F]=[]),X=U.length;if(++F>u||V>1073741824){for(var K=0;K<W.length;K++)U.push(W[K]),te.push(V),J.push(null,null,null,null);return X}if(U.push(W[0]),te.push(V),W.length<=1)return J.push(null,null,null,null),X;for(var Q=.5*N,Z=j+Q,re=D+Q,oe=[],ae=[],ce=[],he=[],pe=1,xe=W.length;pe<xe;pe++){var be=W[pe],ve=x[2*be],ge=x[2*be+1];ve<Z?ge<re?oe.push(be):ae.push(be):ge<re?ce.push(be):he.push(be)}return V<<=2,J.push(R(j,D,Q,oe,F,V),R(j,re,Q,ae,F,V+1),R(Z,D,Q,ce,F,V+2),R(Z,re,Q,he,F,V+3)),X})(0,0,1,c,0,1);for(var f=0,S=0;S<v.length;S++){var w=v[S];if(c.set)c.set(w,f);else for(var E=0,O=w.length;E<O;E++)c[E+f]=w[E];var C=f+v[S].length;_[S]=[f,C],f=C}return c.range=function(){for(var R,j=[],D=arguments.length;D--;)j[D]=arguments[D];if(t(j[j.length-1])){var N=j.pop();j.length||N.x==null&&N.l==null&&N.left==null||(j=[N],R={}),R=b(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else R={};j.length||(j=p);var W,F=o.apply(void 0,j),V=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],U=V[0],te=V[1],J=V[2],X=V[3],K=r([U,te,J,X],p),Q=K[0],Z=K[1],re=K[2],oe=K[3],ae=h(R.level,v.length);if(R.d!=null&&(typeof R.d=="number"?W=[R.d,R.d]:R.d.length&&(W=R.d),ae=Math.min(Math.max(Math.ceil(-n(Math.abs(W[0])/(p[2]-p[0]))),Math.ceil(-n(Math.abs(W[1])/(p[3]-p[1])))),ae)),ae=Math.min(ae,v.length),R.lod)return function(he,pe,xe,be,ve){for(var ge=[],we=0;we<ve;we++){var _e=m[we],se=_[we][0],ie=P(he,pe,we),fe=P(xe,be,we),Ee=M.ge(_e,ie),Te=M.gt(_e,fe,Ee,_e.length-1);ge[we]=[Ee+se,Te+se]}return ge}(Q,Z,re,oe,ae);var ce=[];return function he(pe,xe,be,ve,ge,we){if(ge!==null&&we!==null&&!(Q>pe+be||Z>xe+be||re<pe||oe<xe||ve>=ae||ge===we)){var _e=v[ve];we===void 0&&(we=_e.length);for(var se=ge;se<we;se++){var ie=_e[se],fe=i[2*ie],Ee=i[2*ie+1];fe>=U&&fe<=J&&Ee>=te&&Ee<=X&&ce.push(ie)}var Te=y[ve],Ae=Te[4*ge+0],Se=Te[4*ge+1],Oe=Te[4*ge+2],De=Te[4*ge+3],de=function(ze,Pe){for(var Ne=null,Ve=0;Ne===null;)if(Ne=ze[4*Pe+Ve],++Ve>ze.length)return null;return Ne}(Te,ge+1),me=.5*be,Me=ve+1;he(pe,xe,me,Me,Ae,Se||Oe||De||de),he(pe,xe+me,me,Me,Se,Oe||De||de),he(pe+me,xe,me,Me,Oe,De||de),he(pe+me,xe+me,me,Me,De,de)}}(0,0,1,0,0,1),ce},c;function P(R,j,D){for(var N=1,W=.5,F=.5,V=.5,U=0;U<D;U++)N<<=2,N+=R<W?j<F?0:1:j<F?2:3,V*=.5,W+=R<W?-V:V,F+=j<F?-V:V;return N}}},40440:function(ee,z,e){Object.defineProperty(z,"__esModule",{value:!0});var M=e(3256),k=6378137;function o(h){var s=0;if(h&&h.length>0){s+=Math.abs(T(h[0]));for(var t=1;t<h.length;t++)s-=Math.abs(T(h[t]))}return s}function T(h){var s,t,a,n,r,i,l=0,u=h.length;if(u>2){for(i=0;i<u;i++)i===u-2?(a=u-2,n=u-1,r=0):i===u-1?(a=u-1,n=0,r=1):(a=i,n=i+1,r=i+2),s=h[a],t=h[n],l+=(b(h[r][0])-b(s[0]))*Math.sin(b(t[1]));l=l*k*k/2}return l}function b(h){return h*Math.PI/180}z.default=function(h){return M.geomReduce(h,function(s,t){return s+function(a){var n,r=0;switch(a.type){case"Polygon":return o(a.coordinates);case"MultiPolygon":for(n=0;n<a.coordinates.length;n++)r+=o(a.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(ee,z){function e(i,l,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=l||{},p.geometry=i,p}function M(i,l,u){if(u===void 0&&(u={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(i[0])||!r(i[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:i},l,u)}function k(i,l,u){u===void 0&&(u={});for(var p=0,c=i;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:i},l,u)}function o(i,l,u){if(u===void 0&&(u={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:i},l,u)}function T(i,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=i,u}function b(i,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:i},l,u)}function h(i,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:i},l,u)}function s(i,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:i},l,u)}function t(i,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return i*u}function a(i,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return i/u}function n(i){return i%(2*Math.PI)*180/Math.PI}function r(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(i,l,u){switch(i){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(i+" is invalid")}},z.point=M,z.points=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return M(p,l)}),u)},z.polygon=k,z.polygons=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return k(p,l)}),u)},z.lineString=o,z.lineStrings=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return o(p,l)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=h,z.multiPolygon=s,z.geometryCollection=function(i,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:i},l,u)},z.round=function(i,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(i*u)/u},z.radiansToLength=t,z.lengthToRadians=a,z.lengthToDegrees=function(i,l){return n(a(i,l))},z.bearingToAzimuth=function(i){var l=i%360;return l<0&&(l+=360),l},z.radiansToDegrees=n,z.degreesToRadians=function(i){return i%360*Math.PI/180},z.convertLength=function(i,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(i>=0))throw new Error("length must be a positive number");return t(a(i,l),u)},z.convertArea=function(i,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(i>=0))throw new Error("area must be a positive number");var p=z.areaFactors[l];if(!p)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return i/p*c},z.isNumber=r,z.isObject=function(i){return!!i&&i.constructor===Object},z.validateBBox=function(i){if(!i)throw new Error("bbox is required");if(!Array.isArray(i))throw new Error("bbox must be an Array");if(i.length!==4&&i.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},z.validateId=function(i){if(!i)throw new Error("id is required");if(["string","number"].indexOf(typeof i)===-1)throw new Error("id must be a number or a string")}},3256:function(ee,z,e){Object.defineProperty(z,"__esModule",{value:!0});var M=e(46284);function k(a,n,r){if(a!==null)for(var i,l,u,p,c,x,d,g,v=0,y=0,m=a.type,_=m==="FeatureCollection",f=m==="Feature",S=_?a.features.length:1,w=0;w<S;w++){c=(g=!!(d=_?a.features[w].geometry:f?a.geometry:a)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<c;E++){var O=0,C=0;if((p=g?d.geometries[E]:d)!==null){x=p.coordinates;var P=p.type;switch(v=!r||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(x,y,w,O,C)===!1)return!1;y++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<x.length;i++){if(n(x[i],y,w,O,C)===!1)return!1;y++,P==="MultiPoint"&&O++}P==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<x.length;i++){for(l=0;l<x[i].length-v;l++){if(n(x[i][l],y,w,O,C)===!1)return!1;y++}P==="MultiLineString"&&O++,P==="Polygon"&&C++}P==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<x.length;i++){for(C=0,l=0;l<x[i].length;l++){for(u=0;u<x[i][l].length-v;u++){if(n(x[i][l][u],y,w,O,C)===!1)return!1;y++}C++}O++}break;case"GeometryCollection":for(i=0;i<p.geometries.length;i++)if(k(p.geometries[i],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(a,n){var r;switch(a.type){case"FeatureCollection":for(r=0;r<a.features.length&&n(a.features[r].properties,r)!==!1;r++);break;case"Feature":n(a.properties,0)}}function T(a,n){if(a.type==="Feature")n(a,0);else if(a.type==="FeatureCollection")for(var r=0;r<a.features.length&&n(a.features[r],r)!==!1;r++);}function b(a,n){var r,i,l,u,p,c,x,d,g,v,y=0,m=a.type==="FeatureCollection",_=a.type==="Feature",f=m?a.features.length:1;for(r=0;r<f;r++){for(c=m?a.features[r].geometry:_?a.geometry:a,d=m?a.features[r].properties:_?a.properties:{},g=m?a.features[r].bbox:_?a.bbox:void 0,v=m?a.features[r].id:_?a.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<p;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,d,g,v)===!1)return!1;break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(n(u.geometries[i],y,d,g,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,d,g,v)===!1)return!1;y++}}function h(a,n){b(a,function(r,i,l,u,p){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:p}),i,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<r.coordinates.length;d++){var g={type:c,coordinates:r.coordinates[d]};if(n(M.feature(g,l),i,d)===!1)return!1}})}function s(a,n){h(a,function(r,i,l){var u=0;if(r.geometry){var p=r.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,d=0,g=0;return k(r,function(v,y,m,_,f){if(c===void 0||i>x||_>d||f>g)return c=v,x=i,d=_,g=f,void(u=0);var S=M.lineString([c,v],r.properties);if(n(S,i,l,f,u)===!1)return!1;u++,c=v})!==!1&&void 0}}})}function t(a,n){if(!a)throw new Error("geojson is required");h(a,function(r,i,l){if(r.geometry!==null){var u=r.geometry.type,p=r.geometry.coordinates;switch(u){case"LineString":if(n(r,i,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(n(M.lineString(p[c],r.properties),i,l,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(a,n,r,i){var l=r;return k(a,function(u,p,c,x,d){l=p===0&&r===void 0?u:n(l,u,p,c,x,d)},i),l},z.propEach=o,z.propReduce=function(a,n,r){var i=r;return o(a,function(l,u){i=u===0&&r===void 0?l:n(i,l,u)}),i},z.featureEach=T,z.featureReduce=function(a,n,r){var i=r;return T(a,function(l,u){i=u===0&&r===void 0?l:n(i,l,u)}),i},z.coordAll=function(a){var n=[];return k(a,function(r){n.push(r)}),n},z.geomEach=b,z.geomReduce=function(a,n,r){var i=r;return b(a,function(l,u,p,c,x){i=u===0&&r===void 0?l:n(i,l,u,p,c,x)}),i},z.flattenEach=h,z.flattenReduce=function(a,n,r){var i=r;return h(a,function(l,u,p){i=u===0&&p===0&&r===void 0?l:n(i,l,u,p)}),i},z.segmentEach=s,z.segmentReduce=function(a,n,r){var i=r,l=!1;return s(a,function(u,p,c,x,d){i=l===!1&&r===void 0?u:n(i,u,p,c,x,d),l=!0}),i},z.lineEach=t,z.lineReduce=function(a,n,r){var i=r;return t(a,function(l,u,p,c){i=u===0&&r===void 0?l:n(i,l,u,p,c)}),i},z.findSegment=function(a,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,i=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":i<0&&(i=a.features.length+i),c=c||a.features[i].properties,r=a.features[i].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),M.lineString([x[p],x[p+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),M.lineString([x[u][p],x[u][p+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),p<0&&(p=x[l].length+p-1),M.lineString([x[l][p],x[l][p+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),p<0&&(p=x[l][u].length-p-1),M.lineString([x[l][u][p],x[l][u][p+1]],c,n)}throw new Error("geojson is invalid")},z.findPoint=function(a,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,i=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":i<0&&(i=a.features.length+i),c=c||a.features[i].properties,r=a.features[i].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return p<0&&(p=x.length+p),M.point(x[p],c,n);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),M.point(x[u][p],c,n);case"MultiLineString":return l<0&&(l=x.length+l),p<0&&(p=x[l].length+p),M.point(x[l][p],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),p<0&&(p=x[l][u].length-p),M.point(x[l][u][p],c,n)}throw new Error("geojson is invalid")}},42428:function(ee,z,e){Object.defineProperty(z,"__esModule",{value:!0});var M=e(84880);function k(o){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(o,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,z.default=k},76796:function(ee,z){function e(i,l,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=l||{},p.geometry=i,p}function M(i,l,u){if(u===void 0&&(u={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(i[0])||!r(i[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:i},l,u)}function k(i,l,u){u===void 0&&(u={});for(var p=0,c=i;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:i},l,u)}function o(i,l,u){if(u===void 0&&(u={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:i},l,u)}function T(i,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=i,u}function b(i,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:i},l,u)}function h(i,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:i},l,u)}function s(i,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:i},l,u)}function t(i,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return i*u}function a(i,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return i/u}function n(i){return i%(2*Math.PI)*180/Math.PI}function r(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(i,l,u){switch(i){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(i+" is invalid")}},z.point=M,z.points=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return M(p,l)}),u)},z.polygon=k,z.polygons=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return k(p,l)}),u)},z.lineString=o,z.lineStrings=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return o(p,l)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=h,z.multiPolygon=s,z.geometryCollection=function(i,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:i},l,u)},z.round=function(i,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(i*u)/u},z.radiansToLength=t,z.lengthToRadians=a,z.lengthToDegrees=function(i,l){return n(a(i,l))},z.bearingToAzimuth=function(i){var l=i%360;return l<0&&(l+=360),l},z.radiansToDegrees=n,z.degreesToRadians=function(i){return i%360*Math.PI/180},z.convertLength=function(i,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(i>=0))throw new Error("length must be a positive number");return t(a(i,l),u)},z.convertArea=function(i,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(i>=0))throw new Error("area must be a positive number");var p=z.areaFactors[l];if(!p)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return i/p*c},z.isNumber=r,z.isObject=function(i){return!!i&&i.constructor===Object},z.validateBBox=function(i){if(!i)throw new Error("bbox is required");if(!Array.isArray(i))throw new Error("bbox must be an Array");if(i.length!==4&&i.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},z.validateId=function(i){if(!i)throw new Error("id is required");if(["string","number"].indexOf(typeof i)===-1)throw new Error("id must be a number or a string")}},84880:function(ee,z,e){Object.defineProperty(z,"__esModule",{value:!0});var M=e(76796);function k(a,n,r){if(a!==null)for(var i,l,u,p,c,x,d,g,v=0,y=0,m=a.type,_=m==="FeatureCollection",f=m==="Feature",S=_?a.features.length:1,w=0;w<S;w++){c=(g=!!(d=_?a.features[w].geometry:f?a.geometry:a)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<c;E++){var O=0,C=0;if((p=g?d.geometries[E]:d)!==null){x=p.coordinates;var P=p.type;switch(v=!r||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(x,y,w,O,C)===!1)return!1;y++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<x.length;i++){if(n(x[i],y,w,O,C)===!1)return!1;y++,P==="MultiPoint"&&O++}P==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<x.length;i++){for(l=0;l<x[i].length-v;l++){if(n(x[i][l],y,w,O,C)===!1)return!1;y++}P==="MultiLineString"&&O++,P==="Polygon"&&C++}P==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<x.length;i++){for(C=0,l=0;l<x[i].length;l++){for(u=0;u<x[i][l].length-v;u++){if(n(x[i][l][u],y,w,O,C)===!1)return!1;y++}C++}O++}break;case"GeometryCollection":for(i=0;i<p.geometries.length;i++)if(k(p.geometries[i],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(a,n){var r;switch(a.type){case"FeatureCollection":for(r=0;r<a.features.length&&n(a.features[r].properties,r)!==!1;r++);break;case"Feature":n(a.properties,0)}}function T(a,n){if(a.type==="Feature")n(a,0);else if(a.type==="FeatureCollection")for(var r=0;r<a.features.length&&n(a.features[r],r)!==!1;r++);}function b(a,n){var r,i,l,u,p,c,x,d,g,v,y=0,m=a.type==="FeatureCollection",_=a.type==="Feature",f=m?a.features.length:1;for(r=0;r<f;r++){for(c=m?a.features[r].geometry:_?a.geometry:a,d=m?a.features[r].properties:_?a.properties:{},g=m?a.features[r].bbox:_?a.bbox:void 0,v=m?a.features[r].id:_?a.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<p;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,d,g,v)===!1)return!1;break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(n(u.geometries[i],y,d,g,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,d,g,v)===!1)return!1;y++}}function h(a,n){b(a,function(r,i,l,u,p){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:p}),i,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<r.coordinates.length;d++){var g={type:c,coordinates:r.coordinates[d]};if(n(M.feature(g,l),i,d)===!1)return!1}})}function s(a,n){h(a,function(r,i,l){var u=0;if(r.geometry){var p=r.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,d=0,g=0;return k(r,function(v,y,m,_,f){if(c===void 0||i>x||_>d||f>g)return c=v,x=i,d=_,g=f,void(u=0);var S=M.lineString([c,v],r.properties);if(n(S,i,l,f,u)===!1)return!1;u++,c=v})!==!1&&void 0}}})}function t(a,n){if(!a)throw new Error("geojson is required");h(a,function(r,i,l){if(r.geometry!==null){var u=r.geometry.type,p=r.geometry.coordinates;switch(u){case"LineString":if(n(r,i,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(n(M.lineString(p[c],r.properties),i,l,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(a,n,r,i){var l=r;return k(a,function(u,p,c,x,d){l=p===0&&r===void 0?u:n(l,u,p,c,x,d)},i),l},z.propEach=o,z.propReduce=function(a,n,r){var i=r;return o(a,function(l,u){i=u===0&&r===void 0?l:n(i,l,u)}),i},z.featureEach=T,z.featureReduce=function(a,n,r){var i=r;return T(a,function(l,u){i=u===0&&r===void 0?l:n(i,l,u)}),i},z.coordAll=function(a){var n=[];return k(a,function(r){n.push(r)}),n},z.geomEach=b,z.geomReduce=function(a,n,r){var i=r;return b(a,function(l,u,p,c,x){i=u===0&&r===void 0?l:n(i,l,u,p,c,x)}),i},z.flattenEach=h,z.flattenReduce=function(a,n,r){var i=r;return h(a,function(l,u,p){i=u===0&&p===0&&r===void 0?l:n(i,l,u,p)}),i},z.segmentEach=s,z.segmentReduce=function(a,n,r){var i=r,l=!1;return s(a,function(u,p,c,x,d){i=l===!1&&r===void 0?u:n(i,u,p,c,x,d),l=!0}),i},z.lineEach=t,z.lineReduce=function(a,n,r){var i=r;return t(a,function(l,u,p,c){i=u===0&&r===void 0?l:n(i,l,u,p,c)}),i},z.findSegment=function(a,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,i=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":i<0&&(i=a.features.length+i),c=c||a.features[i].properties,r=a.features[i].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),M.lineString([x[p],x[p+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),M.lineString([x[u][p],x[u][p+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),p<0&&(p=x[l].length+p-1),M.lineString([x[l][p],x[l][p+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),p<0&&(p=x[l][u].length-p-1),M.lineString([x[l][u][p],x[l][u][p+1]],c,n)}throw new Error("geojson is invalid")},z.findPoint=function(a,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,i=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":i<0&&(i=a.features.length+i),c=c||a.features[i].properties,r=a.features[i].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return p<0&&(p=x.length+p),M.point(x[p],c,n);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),M.point(x[u][p],c,n);case"MultiLineString":return l<0&&(l=x.length+l),p<0&&(p=x[l].length+p),M.point(x[l][p],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),p<0&&(p=x[l][u].length-p),M.point(x[l][u][p],c,n)}throw new Error("geojson is invalid")}},77844:function(ee,z,e){Object.defineProperty(z,"__esModule",{value:!0});var M=e(43752),k=e(49840);z.default=function(o,T){T===void 0&&(T={});var b=0,h=0,s=0;return M.coordEach(o,function(t){b+=t[0],h+=t[1],s++}),k.point([b/s,h/s],T.properties)}},49840:function(ee,z){function e(i,l,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=l||{},p.geometry=i,p}function M(i,l,u){return u===void 0&&(u={}),e({type:"Point",coordinates:i},l,u)}function k(i,l,u){u===void 0&&(u={});for(var p=0,c=i;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<x[x.length-1].length;d++)if(x[x.length-1][d]!==x[0][d])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:i},l,u)}function o(i,l,u){if(u===void 0&&(u={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:i},l,u)}function T(i,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=i,u}function b(i,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:i},l,u)}function h(i,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:i},l,u)}function s(i,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:i},l,u)}function t(i,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return i*u}function a(i,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return i/u}function n(i){return i%(2*Math.PI)*180/Math.PI}function r(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)&&!/^\s*$/.test(i)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:z.earthRadius/1.0936},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:.91441111923921},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(i,l,u){switch(i){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(i+" is invalid")}},z.point=M,z.points=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return M(p,l)}),u)},z.polygon=k,z.polygons=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return k(p,l)}),u)},z.lineString=o,z.lineStrings=function(i,l,u){return u===void 0&&(u={}),T(i.map(function(p){return o(p,l)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=h,z.multiPolygon=s,z.geometryCollection=function(i,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:i},l,u)},z.round=function(i,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(i*u)/u},z.radiansToLength=t,z.lengthToRadians=a,z.lengthToDegrees=function(i,l){return n(a(i,l))},z.bearingToAzimuth=function(i){var l=i%360;return l<0&&(l+=360),l},z.radiansToDegrees=n,z.degreesToRadians=function(i){return i%360*Math.PI/180},z.convertLength=function(i,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(i>=0))throw new Error("length must be a positive number");return t(a(i,l),u)},z.convertArea=function(i,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(i>=0))throw new Error("area must be a positive number");var p=z.areaFactors[l];if(!p)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return i/p*c},z.isNumber=r,z.isObject=function(i){return!!i&&i.constructor===Object},z.validateBBox=function(i){if(!i)throw new Error("bbox is required");if(!Array.isArray(i))throw new Error("bbox must be an Array");if(i.length!==4&&i.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},z.validateId=function(i){if(!i)throw new Error("id is required");if(["string","number"].indexOf(typeof i)===-1)throw new Error("id must be a number or a string")},z.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},z.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},z.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},z.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},z.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},z.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},z.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(ee,z,e){Object.defineProperty(z,"__esModule",{value:!0});var M=e(49840);function k(a,n,r){if(a!==null)for(var i,l,u,p,c,x,d,g,v=0,y=0,m=a.type,_=m==="FeatureCollection",f=m==="Feature",S=_?a.features.length:1,w=0;w<S;w++){c=(g=!!(d=_?a.features[w].geometry:f?a.geometry:a)&&d.type==="GeometryCollection")?d.geometries.length:1;for(var E=0;E<c;E++){var O=0,C=0;if((p=g?d.geometries[E]:d)!==null){x=p.coordinates;var P=p.type;switch(v=!r||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(x,y,w,O,C)===!1)return!1;y++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<x.length;i++){if(n(x[i],y,w,O,C)===!1)return!1;y++,P==="MultiPoint"&&O++}P==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<x.length;i++){for(l=0;l<x[i].length-v;l++){if(n(x[i][l],y,w,O,C)===!1)return!1;y++}P==="MultiLineString"&&O++,P==="Polygon"&&C++}P==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<x.length;i++){for(C=0,l=0;l<x[i].length;l++){for(u=0;u<x[i][l].length-v;u++){if(n(x[i][l][u],y,w,O,C)===!1)return!1;y++}C++}O++}break;case"GeometryCollection":for(i=0;i<p.geometries.length;i++)if(k(p.geometries[i],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(a,n){var r;switch(a.type){case"FeatureCollection":for(r=0;r<a.features.length&&n(a.features[r].properties,r)!==!1;r++);break;case"Feature":n(a.properties,0)}}function T(a,n){if(a.type==="Feature")n(a,0);else if(a.type==="FeatureCollection")for(var r=0;r<a.features.length&&n(a.features[r],r)!==!1;r++);}function b(a,n){var r,i,l,u,p,c,x,d,g,v,y=0,m=a.type==="FeatureCollection",_=a.type==="Feature",f=m?a.features.length:1;for(r=0;r<f;r++){for(c=m?a.features[r].geometry:_?a.geometry:a,d=m?a.features[r].properties:_?a.properties:{},g=m?a.features[r].bbox:_?a.bbox:void 0,v=m?a.features[r].id:_?a.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<p;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,d,g,v)===!1)return!1;break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(n(u.geometries[i],y,d,g,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,d,g,v)===!1)return!1;y++}}function h(a,n){b(a,function(r,i,l,u,p){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:p}),i,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var d=0;d<r.coordinates.length;d++){var g={type:c,coordinates:r.coordinates[d]};if(n(M.feature(g,l),i,d)===!1)return!1}})}function s(a,n){h(a,function(r,i,l){var u=0;if(r.geometry){var p=r.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,d=0,g=0;return k(r,function(v,y,m,_,f){if(c===void 0||i>x||_>d||f>g)return c=v,x=i,d=_,g=f,void(u=0);var S=M.lineString([c,v],r.properties);if(n(S,i,l,f,u)===!1)return!1;u++,c=v})!==!1&&void 0}}})}function t(a,n){if(!a)throw new Error("geojson is required");h(a,function(r,i,l){if(r.geometry!==null){var u=r.geometry.type,p=r.geometry.coordinates;switch(u){case"LineString":if(n(r,i,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(n(M.lineString(p[c],r.properties),i,l,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(a,n,r,i){var l=r;return k(a,function(u,p,c,x,d){l=p===0&&r===void 0?u:n(l,u,p,c,x,d)},i),l},z.propEach=o,z.propReduce=function(a,n,r){var i=r;return o(a,function(l,u){i=u===0&&r===void 0?l:n(i,l,u)}),i},z.featureEach=T,z.featureReduce=function(a,n,r){var i=r;return T(a,function(l,u){i=u===0&&r===void 0?l:n(i,l,u)}),i},z.coordAll=function(a){var n=[];return k(a,function(r){n.push(r)}),n},z.geomEach=b,z.geomReduce=function(a,n,r){var i=r;return b(a,function(l,u,p,c,x){i=u===0&&r===void 0?l:n(i,l,u,p,c,x)}),i},z.flattenEach=h,z.flattenReduce=function(a,n,r){var i=r;return h(a,function(l,u,p){i=u===0&&p===0&&r===void 0?l:n(i,l,u,p)}),i},z.segmentEach=s,z.segmentReduce=function(a,n,r){var i=r,l=!1;return s(a,function(u,p,c,x,d){i=l===!1&&r===void 0?u:n(i,u,p,c,x,d),l=!0}),i},z.lineEach=t,z.lineReduce=function(a,n,r){var i=r;return t(a,function(l,u,p,c){i=u===0&&r===void 0?l:n(i,l,u,p,c)}),i},z.findSegment=function(a,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,i=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":i<0&&(i=a.features.length+i),c=c||a.features[i].properties,r=a.features[i].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),M.lineString([x[p],x[p+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),M.lineString([x[u][p],x[u][p+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),p<0&&(p=x[l].length+p-1),M.lineString([x[l][p],x[l][p+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),p<0&&(p=x[l][u].length-p-1),M.lineString([x[l][u][p],x[l][u][p+1]],c,n)}throw new Error("geojson is invalid")},z.findPoint=function(a,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,i=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,c=n.properties;switch(a.type){case"FeatureCollection":i<0&&(i=a.features.length+i),c=c||a.features[i].properties,r=a.features[i].geometry;break;case"Feature":c=c||a.properties,r=a.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=a;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return p<0&&(p=x.length+p),M.point(x[p],c,n);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),M.point(x[u][p],c,n);case"MultiLineString":return l<0&&(l=x.length+l),p<0&&(p=x[l].length+p),M.point(x[l][p],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),p<0&&(p=x[l][u].length-p),M.point(x[l][u][p],c,n)}throw new Error("geojson is invalid")}},49972:function(ee){ee.exports=function(z){var e=0,M=0,k=0,o=0;return z.map(function(T){var b=(T=T.slice())[0],h=b.toUpperCase();if(b!=h)switch(T[0]=h,b){case"a":T[6]+=k,T[7]+=o;break;case"v":T[1]+=o;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=o}switch(h){case"Z":k=e,o=M;break;case"H":k=T[1];break;case"V":o=T[1];break;case"M":k=e=T[1],o=M=T[2];break;default:k=T[T.length-2],o=T[T.length-1]}return T})}},76752:function(ee){ee.exports=function(z,e){if(!z||z.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var M=Array(2*e),k=0;k<e;k++){for(var o=-1/0,T=1/0,b=k,h=z.length;b<h;b+=e)z[b]>o&&(o=z[b]),z[b]<T&&(T=z[b]);M[k]=T,M[e+k]=o}return M}},10272:function(ee){ee.exports=function(z,e,M){if(typeof Array.prototype.findIndex=="function")return z.findIndex(e,M);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(z),o=k.length;if(o===0)return-1;for(var T=0;T<o;T++)if(e.call(M,k[T],T,k))return T;return-1}},71152:function(ee,z,e){var M=e(76752);ee.exports=function(k,o,T){if(!k||k.length==null)throw Error("Argument should be an array");o==null&&(o=1),T==null&&(T=M(k,o));for(var b=0;b<o;b++){var h=T[o+b],s=T[b],t=b,a=k.length;if(h===1/0&&s===-1/0)for(t=b;t<a;t+=o)k[t]=k[t]===h?1:k[t]===s?0:.5;else if(h===1/0)for(t=b;t<a;t+=o)k[t]=k[t]===h?1:0;else if(s===-1/0)for(t=b;t<a;t+=o)k[t]=k[t]===s?0:1;else{var n=h-s;for(t=b;t<a;t+=o)isNaN(k[t])||(k[t]=n===0?.5:(k[t]-s)/n)}}return k}},67752:function(ee){ee.exports=function(z,e){var M=typeof z=="number",k=typeof e=="number";M&&!k?(e=z,z=0):M||k||(z=0,e=0);var o=(e|=0)-(z|=0);if(o<0)throw new Error("array length must be positive");for(var T=new Array(o),b=0,h=z;b<o;b++,h++)T[b]=h;return T}},45408:function(ee,z,e){var M=e(4168);function k(D){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},k(D)}var o,T,b=e(86832).codes,h=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,a=b.ERR_INVALID_RETURN_VALUE,n=b.ERR_MISSING_ARGS,r=e(26144),i=e(35840).inspect,l=e(35840).types,u=l.isPromise,p=l.isRegExp,c=Object.assign?Object.assign:e(60964).assign,x=Object.is?Object.is:e(39896);function d(){var D=e(25116);o=D.isDeepEqual,T=D.isDeepStrictEqual}var g=!1,v=ee.exports=f,y={};function m(D){throw D.message instanceof Error?D.message:new r(D)}function _(D,N,W,F){if(!W){var V=!1;if(N===0)V=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var U=new r({actual:W,expected:!0,message:F,operator:"==",stackStartFn:D});throw U.generatedMessage=V,U}}function f(){for(var D=arguments.length,N=new Array(D),W=0;W<D;W++)N[W]=arguments[W];_.apply(void 0,[f,N.length].concat(N))}v.fail=function D(N,W,F,V,U){var te,J=arguments.length;if(J===0?te="Failed":J===1?(F=N,N=void 0):(g===!1&&(g=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),J===2&&(V="!=")),F instanceof Error)throw F;var X={actual:N,expected:W,operator:V===void 0?"fail":V,stackStartFn:U||D};F!==void 0&&(X.message=F);var K=new r(X);throw te&&(K.message=te,K.generatedMessage=!0),K},v.AssertionError=r,v.ok=f,v.equal=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");N!=W&&m({actual:N,expected:W,message:F,operator:"==",stackStartFn:D})},v.notEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");N==W&&m({actual:N,expected:W,message:F,operator:"!=",stackStartFn:D})},v.deepEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),o(N,W)||m({actual:N,expected:W,message:F,operator:"deepEqual",stackStartFn:D})},v.notDeepEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),o(N,W)&&m({actual:N,expected:W,message:F,operator:"notDeepEqual",stackStartFn:D})},v.deepStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),T(N,W)||m({actual:N,expected:W,message:F,operator:"deepStrictEqual",stackStartFn:D})},v.notDeepStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&d(),T(N,W)&&m({actual:N,expected:W,message:F,operator:"notDeepStrictEqual",stackStartFn:D})},v.strictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)||m({actual:N,expected:W,message:F,operator:"strictEqual",stackStartFn:D})},v.notStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)&&m({actual:N,expected:W,message:F,operator:"notStrictEqual",stackStartFn:D})};var S=function D(N,W,F){var V=this;(function(U,te){if(!(U instanceof te))throw new TypeError("Cannot call a class as a function")})(this,D),W.forEach(function(U){U in N&&(F!==void 0&&typeof F[U]=="string"&&p(N[U])&&N[U].test(F[U])?V[U]=F[U]:V[U]=N[U])})};function w(D,N,W,F){if(typeof N!="function"){if(p(N))return N.test(D);if(arguments.length===2)throw new s("expected",["Function","RegExp"],N);if(k(D)!=="object"||D===null){var V=new r({actual:D,expected:N,message:W,operator:"deepStrictEqual",stackStartFn:F});throw V.operator=F.name,V}var U=Object.keys(N);if(N instanceof Error)U.push("name","message");else if(U.length===0)throw new t("error",N,"may not be an empty object");return o===void 0&&d(),U.forEach(function(te){typeof D[te]=="string"&&p(N[te])&&N[te].test(D[te])||function(J,X,K,Q,Z,re){if(!(K in J)||!T(J[K],X[K])){if(!Q){var oe=new S(J,Z),ae=new S(X,Z,J),ce=new r({actual:oe,expected:ae,operator:"deepStrictEqual",stackStartFn:re});throw ce.actual=J,ce.expected=X,ce.operator=re.name,ce}m({actual:J,expected:X,message:Q,operator:re.name,stackStartFn:re})}}(D,N,te,W,U,F)}),!0}return N.prototype!==void 0&&D instanceof N||!Error.isPrototypeOf(N)&&N.call({},D)===!0}function E(D){if(typeof D!="function")throw new s("fn","Function",D);try{D()}catch(N){return N}return y}function O(D){return u(D)||D!==null&&k(D)==="object"&&typeof D.then=="function"&&typeof D.catch=="function"}function C(D){return Promise.resolve().then(function(){var N;if(typeof D=="function"){if(!O(N=D()))throw new a("instance of Promise","promiseFn",N)}else{if(!O(D))throw new s("promiseFn",["Function","Promise"],D);N=D}return Promise.resolve().then(function(){return N}).then(function(){return y}).catch(function(W){return W})})}function P(D,N,W,F){if(typeof W=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],W);if(k(N)==="object"&&N!==null){if(N.message===W)throw new h("error/message",'The error message "'.concat(N.message,'" is identical to the message.'))}else if(N===W)throw new h("error/message",'The error "'.concat(N,'" is identical to the message.'));F=W,W=void 0}else if(W!=null&&k(W)!=="object"&&typeof W!="function")throw new s("error",["Object","Error","Function","RegExp"],W);if(N===y){var V="";W&&W.name&&(V+=" (".concat(W.name,")")),V+=F?": ".concat(F):".";var U=D.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:W,operator:D.name,message:"Missing expected ".concat(U).concat(V),stackStartFn:D})}if(W&&!w(N,W,F,D))throw N}function R(D,N,W,F){if(N!==y){if(typeof W=="string"&&(F=W,W=void 0),!W||w(N,W)){var V=F?": ".concat(F):".",U=D.name==="doesNotReject"?"rejection":"exception";m({actual:N,expected:W,operator:D.name,message:"Got unwanted ".concat(U).concat(V,`
`)+'Actual message: "'.concat(N&&N.message,'"'),stackStartFn:D})}throw N}}function j(){for(var D=arguments.length,N=new Array(D),W=0;W<D;W++)N[W]=arguments[W];_.apply(void 0,[j,N.length].concat(N))}v.throws=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),V=1;V<W;V++)F[V-1]=arguments[V];P.apply(void 0,[D,E(N)].concat(F))},v.rejects=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),V=1;V<W;V++)F[V-1]=arguments[V];return C(N).then(function(U){return P.apply(void 0,[D,U].concat(F))})},v.doesNotThrow=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),V=1;V<W;V++)F[V-1]=arguments[V];R.apply(void 0,[D,E(N)].concat(F))},v.doesNotReject=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),V=1;V<W;V++)F[V-1]=arguments[V];return C(N).then(function(U){return R.apply(void 0,[D,U].concat(F))})},v.ifError=function D(N){if(N!=null){var W="ifError got unwanted exception: ";k(N)==="object"&&typeof N.message=="string"?N.message.length===0&&N.constructor?W+=N.constructor.name:W+=N.message:W+=i(N);var F=new r({actual:N,expected:null,operator:"ifError",message:W,stackStartFn:D}),V=N.stack;if(typeof V=="string"){var U=V.split(`
`);U.shift();for(var te=F.stack.split(`
`),J=0;J<U.length;J++){var X=te.indexOf(U[J]);if(X!==-1){te=te.slice(0,X);break}}F.stack="".concat(te.join(`
`),`
`).concat(U.join(`
`))}throw F}},v.strict=c(j,v,{equal:v.strictEqual,deepEqual:v.deepStrictEqual,notEqual:v.notStrictEqual,notDeepEqual:v.notDeepStrictEqual}),v.strict.strict=v.strict},26144:function(ee,z,e){var M=e(4168);function k(m,_,f){return _ in m?Object.defineProperty(m,_,{value:f,enumerable:!0,configurable:!0,writable:!0}):m[_]=f,m}function o(m,_){for(var f=0;f<_.length;f++){var S=_[f];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function T(m,_){return!_||n(_)!=="object"&&typeof _!="function"?b(m):_}function b(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function h(m){var _=typeof Map=="function"?new Map:void 0;return h=function(f){if(f===null||(S=f,Function.toString.call(S).indexOf("[native code]")===-1))return f;var S;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(f))return _.get(f);_.set(f,w)}function w(){return s(f,arguments,a(this).constructor)}return w.prototype=Object.create(f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,f)},h(m)}function s(m,_,f){return s=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,w,E){var O=[null];O.push.apply(O,w);var C=new(Function.bind.apply(S,O));return E&&t(C,E.prototype),C},s.apply(null,arguments)}function t(m,_){return t=Object.setPrototypeOf||function(f,S){return f.__proto__=S,f},t(m,_)}function a(m){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},a(m)}function n(m){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},n(m)}var r=e(35840).inspect,i=e(86832).codes.ERR_INVALID_ARG_TYPE;function l(m,_,f){return(f===void 0||f>m.length)&&(f=m.length),m.substring(f-_.length,f)===_}var u="",p="",c="",x="",d={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function g(m){var _=Object.keys(m),f=Object.create(Object.getPrototypeOf(m));return _.forEach(function(S){f[S]=m[S]}),Object.defineProperty(f,"message",{value:m.message}),f}function v(m){return r(m,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var y=function(m){function _(w){var E;if(function(te,J){if(!(te instanceof J))throw new TypeError("Cannot call a class as a function")}(this,_),n(w)!=="object"||w===null)throw new i("options","Object",w);var O=w.message,C=w.operator,P=w.stackStartFn,R=w.actual,j=w.expected,D=Error.stackTraceLimit;if(Error.stackTraceLimit=0,O!=null)E=T(this,a(_).call(this,String(O)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(u="\x1B[34m",p="\x1B[32m",x="\x1B[39m",c="\x1B[31m"):(u="",p="",x="",c="")),n(R)==="object"&&R!==null&&n(j)==="object"&&j!==null&&"stack"in R&&R instanceof Error&&"stack"in j&&j instanceof Error&&(R=g(R),j=g(j)),C==="deepStrictEqual"||C==="strictEqual")E=T(this,a(_).call(this,function(te,J,X){var K="",Q="",Z=0,re="",oe=!1,ae=v(te),ce=ae.split(`
`),he=v(J).split(`
`),pe=0,xe="";if(X==="strictEqual"&&n(te)==="object"&&n(J)==="object"&&te!==null&&J!==null&&(X="strictEqualObject"),ce.length===1&&he.length===1&&ce[0]!==he[0]){var be=ce[0].length+he[0].length;if(be<=10){if(!(n(te)==="object"&&te!==null||n(J)==="object"&&J!==null||te===0&&J===0))return"".concat(d[X],`

`)+"".concat(ce[0]," !== ").concat(he[0],`
`)}else if(X!=="strictEqualObject"&&be<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;ce[0][pe]===he[0][pe];)pe++;pe>2&&(xe=`
  `.concat(function(Oe,De){if(De=Math.floor(De),Oe.length==0||De==0)return"";var de=Oe.length*De;for(De=Math.floor(Math.log(De)/Math.log(2));De;)Oe+=Oe,De--;return Oe+Oe.substring(0,de-Oe.length)}(" ",pe),"^"),pe=0)}}for(var ve=ce[ce.length-1],ge=he[he.length-1];ve===ge&&(pe++<2?re=`
  `.concat(ve).concat(re):K=ve,ce.pop(),he.pop(),ce.length!==0&&he.length!==0);)ve=ce[ce.length-1],ge=he[he.length-1];var we=Math.max(ce.length,he.length);if(we===0){var _e=ae.split(`
`);if(_e.length>30)for(_e[26]="".concat(u,"...").concat(x);_e.length>27;)_e.pop();return"".concat(d.notIdentical,`

`).concat(_e.join(`
`),`
`)}pe>3&&(re=`
`.concat(u,"...").concat(x).concat(re),oe=!0),K!==""&&(re=`
  `.concat(K).concat(re),K="");var se=0,ie=d[X]+`
`.concat(p,"+ actual").concat(x," ").concat(c,"- expected").concat(x),fe=" ".concat(u,"...").concat(x," Lines skipped");for(pe=0;pe<we;pe++){var Ee=pe-Z;if(ce.length<pe+1)Ee>1&&pe>2&&(Ee>4?(Q+=`
`.concat(u,"...").concat(x),oe=!0):Ee>3&&(Q+=`
  `.concat(he[pe-2]),se++),Q+=`
  `.concat(he[pe-1]),se++),Z=pe,K+=`
`.concat(c,"-").concat(x," ").concat(he[pe]),se++;else if(he.length<pe+1)Ee>1&&pe>2&&(Ee>4?(Q+=`
`.concat(u,"...").concat(x),oe=!0):Ee>3&&(Q+=`
  `.concat(ce[pe-2]),se++),Q+=`
  `.concat(ce[pe-1]),se++),Z=pe,Q+=`
`.concat(p,"+").concat(x," ").concat(ce[pe]),se++;else{var Te=he[pe],Ae=ce[pe],Se=Ae!==Te&&(!l(Ae,",")||Ae.slice(0,-1)!==Te);Se&&l(Te,",")&&Te.slice(0,-1)===Ae&&(Se=!1,Ae+=","),Se?(Ee>1&&pe>2&&(Ee>4?(Q+=`
`.concat(u,"...").concat(x),oe=!0):Ee>3&&(Q+=`
  `.concat(ce[pe-2]),se++),Q+=`
  `.concat(ce[pe-1]),se++),Z=pe,Q+=`
`.concat(p,"+").concat(x," ").concat(Ae),K+=`
`.concat(c,"-").concat(x," ").concat(Te),se+=2):(Q+=K,K="",Ee!==1&&pe!==0||(Q+=`
  `.concat(Ae),se++))}if(se>20&&pe<we-2)return"".concat(ie).concat(fe,`
`).concat(Q,`
`).concat(u,"...").concat(x).concat(K,`
`)+"".concat(u,"...").concat(x)}return"".concat(ie).concat(oe?fe:"",`
`).concat(Q).concat(K).concat(re).concat(xe)}(R,j,C)));else if(C==="notDeepStrictEqual"||C==="notStrictEqual"){var N=d[C],W=v(R).split(`
`);if(C==="notStrictEqual"&&n(R)==="object"&&R!==null&&(N=d.notStrictEqualObject),W.length>30)for(W[26]="".concat(u,"...").concat(x);W.length>27;)W.pop();E=W.length===1?T(this,a(_).call(this,"".concat(N," ").concat(W[0]))):T(this,a(_).call(this,"".concat(N,`

`).concat(W.join(`
`),`
`)))}else{var F=v(R),V="",U=d[C];C==="notDeepEqual"||C==="notEqual"?(F="".concat(d[C],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(V="".concat(v(j)),F.length>512&&(F="".concat(F.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),C==="deepEqual"||C==="equal"?F="".concat(U,`

`).concat(F,`

should equal

`):V=" ".concat(C," ").concat(V)),E=T(this,a(_).call(this,"".concat(F).concat(V)))}return Error.stackTraceLimit=D,E.generatedMessage=!O,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=R,E.expected=j,E.operator=C,Error.captureStackTrace&&Error.captureStackTrace(b(E),P),E.stack,E.name="AssertionError",T(E)}var f,S;return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(_,m),f=_,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:r.custom,value:function(w,E){return r(this,function(O){for(var C=1;C<arguments.length;C++){var P=arguments[C]!=null?arguments[C]:{},R=Object.keys(P);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(P).filter(function(j){return Object.getOwnPropertyDescriptor(P,j).enumerable}))),R.forEach(function(j){k(O,j,P[j])})}return O}({},E,{customInspect:!1,depth:0}))}}],S&&o(f.prototype,S),_}(h(Error));ee.exports=y},86832:function(ee,z,e){function M(a){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},M(a)}function k(a){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},k(a)}function o(a,n){return o=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},o(a,n)}var T,b,h={};function s(a,n,r){r||(r=Error);var i=function(l){function u(p,c,x){var d;return function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,u),d=function(g,v){return!v||M(v)!=="object"&&typeof v!="function"?function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(g):v}(this,k(u).call(this,function(g,v,y){return typeof n=="string"?n:n(g,v,y)}(p,c,x))),d.code=a,d}return function(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),c&&o(p,c)}(u,l),u}(r);h[a]=i}function t(a,n){if(Array.isArray(a)){var r=a.length;return a=a.map(function(i){return String(i)}),r>2?"one of ".concat(n," ").concat(a.slice(0,r-1).join(", "),", or ")+a[r-1]:r===2?"one of ".concat(n," ").concat(a[0]," or ").concat(a[1]):"of ".concat(n," ").concat(a[0])}return"of ".concat(n," ").concat(String(a))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(a,n,r){var i,l,u,p,c;if(T===void 0&&(T=e(45408)),T(typeof a=="string","'name' must be a string"),typeof n=="string"&&(l="not ",n.substr(0,4)===l)?(i="must not be",n=n.replace(/^not /,"")):i="must be",function(d,g,v){return(v===void 0||v>d.length)&&(v=d.length),d.substring(v-9,v)===g}(a," argument"))u="The ".concat(a," ").concat(i," ").concat(t(n,"type"));else{var x=(typeof c!="number"&&(c=0),c+1>(p=a).length||p.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(a,'" ').concat(x," ").concat(i," ").concat(t(n,"type"))}return u+". Received type ".concat(M(r))},TypeError),s("ERR_INVALID_ARG_VALUE",function(a,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(35840));var i=b.inspect(n);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(a,"' ").concat(r,". Received ").concat(i)},TypeError),s("ERR_INVALID_RETURN_VALUE",function(a,n,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(M(r)),"Expected ".concat(a,' to be returned from the "').concat(n,'"')+" function but got ".concat(i,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];T===void 0&&(T=e(45408)),T(n.length>0,"At least one arg needs to be specified");var i="The ",l=n.length;switch(n=n.map(function(u){return'"'.concat(u,'"')}),l){case 1:i+="".concat(n[0]," argument");break;case 2:i+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:i+=n.slice(0,l-1).join(", "),i+=", and ".concat(n[l-1]," arguments")}return"".concat(i," must be specified")},TypeError),ee.exports.codes=h},25116:function(ee,z,e){function M(Z,re){return function(oe){if(Array.isArray(oe))return oe}(Z)||function(oe,ae){var ce=[],he=!0,pe=!1,xe=void 0;try{for(var be,ve=oe[Symbol.iterator]();!(he=(be=ve.next()).done)&&(ce.push(be.value),!ae||ce.length!==ae);he=!0);}catch(ge){pe=!0,xe=ge}finally{try{he||ve.return==null||ve.return()}finally{if(pe)throw xe}}return ce}(Z,re)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(Z){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},k(Z)}var o=/a/g.flags!==void 0,T=function(Z){var re=[];return Z.forEach(function(oe){return re.push(oe)}),re},b=function(Z){var re=[];return Z.forEach(function(oe,ae){return re.push([ae,oe])}),re},h=Object.is?Object.is:e(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function a(Z){return Z.call.bind(Z)}var n=a(Object.prototype.hasOwnProperty),r=a(Object.prototype.propertyIsEnumerable),i=a(Object.prototype.toString),l=e(35840).types,u=l.isAnyArrayBuffer,p=l.isArrayBufferView,c=l.isDate,x=l.isMap,d=l.isRegExp,g=l.isSet,v=l.isNativeError,y=l.isBoxedPrimitive,m=l.isNumberObject,_=l.isStringObject,f=l.isBooleanObject,S=l.isBigIntObject,w=l.isSymbolObject,E=l.isFloat32Array,O=l.isFloat64Array;function C(Z){if(Z.length===0||Z.length>10)return!0;for(var re=0;re<Z.length;re++){var oe=Z.charCodeAt(re);if(oe<48||oe>57)return!0}return Z.length===10&&Z>=Math.pow(2,32)}function P(Z){return Object.keys(Z).filter(C).concat(s(Z).filter(Object.prototype.propertyIsEnumerable.bind(Z)))}function R(Z,re){if(Z===re)return 0;for(var oe=Z.length,ae=re.length,ce=0,he=Math.min(oe,ae);ce<he;++ce)if(Z[ce]!==re[ce]){oe=Z[ce],ae=re[ce];break}return oe<ae?-1:ae<oe?1:0}var j=0,D=1,N=2,W=3;function F(Z,re,oe,ae){if(Z===re)return Z!==0||!oe||h(Z,re);if(oe){if(k(Z)!=="object")return typeof Z=="number"&&t(Z)&&t(re);if(k(re)!=="object"||Z===null||re===null||Object.getPrototypeOf(Z)!==Object.getPrototypeOf(re))return!1}else{if(Z===null||k(Z)!=="object")return(re===null||k(re)!=="object")&&Z==re;if(re===null||k(re)!=="object")return!1}var ce,he,pe,xe,be=i(Z);if(be!==i(re))return!1;if(Array.isArray(Z)){if(Z.length!==re.length)return!1;var ve=P(Z),ge=P(re);return ve.length===ge.length&&U(Z,re,oe,ae,D,ve)}if(be==="[object Object]"&&(!x(Z)&&x(re)||!g(Z)&&g(re)))return!1;if(c(Z)){if(!c(re)||Date.prototype.getTime.call(Z)!==Date.prototype.getTime.call(re))return!1}else if(d(Z)){if(!d(re)||(pe=Z,xe=re,!(o?pe.source===xe.source&&pe.flags===xe.flags:RegExp.prototype.toString.call(pe)===RegExp.prototype.toString.call(xe))))return!1}else if(v(Z)||Z instanceof Error){if(Z.message!==re.message||Z.name!==re.name)return!1}else{if(p(Z)){if(oe||!E(Z)&&!O(Z)){if(!function(se,ie){return se.byteLength===ie.byteLength&&R(new Uint8Array(se.buffer,se.byteOffset,se.byteLength),new Uint8Array(ie.buffer,ie.byteOffset,ie.byteLength))===0}(Z,re))return!1}else if(!function(se,ie){if(se.byteLength!==ie.byteLength)return!1;for(var fe=0;fe<se.byteLength;fe++)if(se[fe]!==ie[fe])return!1;return!0}(Z,re))return!1;var we=P(Z),_e=P(re);return we.length===_e.length&&U(Z,re,oe,ae,j,we)}if(g(Z))return!(!g(re)||Z.size!==re.size)&&U(Z,re,oe,ae,N);if(x(Z))return!(!x(re)||Z.size!==re.size)&&U(Z,re,oe,ae,W);if(u(Z)){if(he=re,(ce=Z).byteLength!==he.byteLength||R(new Uint8Array(ce),new Uint8Array(he))!==0)return!1}else if(y(Z)&&!function(se,ie){return m(se)?m(ie)&&h(Number.prototype.valueOf.call(se),Number.prototype.valueOf.call(ie)):_(se)?_(ie)&&String.prototype.valueOf.call(se)===String.prototype.valueOf.call(ie):f(se)?f(ie)&&Boolean.prototype.valueOf.call(se)===Boolean.prototype.valueOf.call(ie):S(se)?S(ie)&&BigInt.prototype.valueOf.call(se)===BigInt.prototype.valueOf.call(ie):w(ie)&&Symbol.prototype.valueOf.call(se)===Symbol.prototype.valueOf.call(ie)}(Z,re))return!1}return U(Z,re,oe,ae,j)}function V(Z,re){return re.filter(function(oe){return r(Z,oe)})}function U(Z,re,oe,ae,ce,he){if(arguments.length===5){he=Object.keys(Z);var pe=Object.keys(re);if(he.length!==pe.length)return!1}for(var xe=0;xe<he.length;xe++)if(!n(re,he[xe]))return!1;if(oe&&arguments.length===5){var be=s(Z);if(be.length!==0){var ve=0;for(xe=0;xe<be.length;xe++){var ge=be[xe];if(r(Z,ge)){if(!r(re,ge))return!1;he.push(ge),ve++}else if(r(re,ge))return!1}var we=s(re);if(be.length!==we.length&&V(re,we).length!==ve)return!1}else{var _e=s(re);if(_e.length!==0&&V(re,_e).length!==0)return!1}}if(he.length===0&&(ce===j||ce===D&&Z.length===0||Z.size===0))return!0;if(ae===void 0)ae={val1:new Map,val2:new Map,position:0};else{var se=ae.val1.get(Z);if(se!==void 0){var ie=ae.val2.get(re);if(ie!==void 0)return se===ie}ae.position++}ae.val1.set(Z,ae.position),ae.val2.set(re,ae.position);var fe=function(Ee,Te,Ae,Se,Oe,De){var de=0;if(De===N){if(!function(Pe,Ne,Ve,Ye){for(var at=null,rt=T(Pe),dt=0;dt<rt.length;dt++){var vt=rt[dt];if(k(vt)==="object"&&vt!==null)at===null&&(at=new Set),at.add(vt);else if(!Ne.has(vt)){if(Ve||!X(Pe,Ne,vt))return!1;at===null&&(at=new Set),at.add(vt)}}if(at!==null){for(var ht=T(Ne),et=0;et<ht.length;et++){var $e=ht[et];if(k($e)==="object"&&$e!==null){if(!te(at,$e,Ve,Ye))return!1}else if(!Ve&&!Pe.has($e)&&!te(at,$e,Ve,Ye))return!1}return at.size===0}return!0}(Ee,Te,Ae,Oe))return!1}else if(De===W){if(!function(Pe,Ne,Ve,Ye){for(var at=null,rt=b(Pe),dt=0;dt<rt.length;dt++){var vt=M(rt[dt],2),ht=vt[0],et=vt[1];if(k(ht)==="object"&&ht!==null)at===null&&(at=new Set),at.add(ht);else{var $e=Ne.get(ht);if($e===void 0&&!Ne.has(ht)||!F(et,$e,Ve,Ye)){if(Ve||!K(Pe,Ne,ht,et,Ye))return!1;at===null&&(at=new Set),at.add(ht)}}}if(at!==null){for(var wt=b(Ne),Pt=0;Pt<wt.length;Pt++){var Ot=M(wt[Pt],2),At=(ht=Ot[0],Ot[1]);if(k(ht)==="object"&&ht!==null){if(!Q(at,Pe,ht,At,Ve,Ye))return!1}else if(!(Ve||Pe.has(ht)&&F(Pe.get(ht),At,!1,Ye)||Q(at,Pe,ht,At,!1,Ye)))return!1}return at.size===0}return!0}(Ee,Te,Ae,Oe))return!1}else if(De===D)for(;de<Ee.length;de++){if(!n(Ee,de)){if(n(Te,de))return!1;for(var me=Object.keys(Ee);de<me.length;de++){var Me=me[de];if(!n(Te,Me)||!F(Ee[Me],Te[Me],Ae,Oe))return!1}return me.length===Object.keys(Te).length}if(!n(Te,de)||!F(Ee[de],Te[de],Ae,Oe))return!1}for(de=0;de<Se.length;de++){var ze=Se[de];if(!F(Ee[ze],Te[ze],Ae,Oe))return!1}return!0}(Z,re,oe,he,ae,ce);return ae.val1.delete(Z),ae.val2.delete(re),fe}function te(Z,re,oe,ae){for(var ce=T(Z),he=0;he<ce.length;he++){var pe=ce[he];if(F(re,pe,oe,ae))return Z.delete(pe),!0}return!1}function J(Z){switch(k(Z)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Z=+Z;case"number":if(t(Z))return!1}return!0}function X(Z,re,oe){var ae=J(oe);return ae??(re.has(ae)&&!Z.has(ae))}function K(Z,re,oe,ae,ce){var he=J(oe);if(he!=null)return he;var pe=re.get(he);return!(pe===void 0&&!re.has(he)||!F(ae,pe,!1,ce))&&!Z.has(he)&&F(ae,pe,!1,ce)}function Q(Z,re,oe,ae,ce,he){for(var pe=T(Z),xe=0;xe<pe.length;xe++){var be=pe[xe];if(F(oe,be,ce,he)&&F(ae,re.get(be),ce,he))return Z.delete(be),!0}return!1}ee.exports={isDeepEqual:function(Z,re){return F(Z,re,!1)},isDeepStrictEqual:function(Z,re){return F(Z,re,!0)}}},83160:function(ee,z,e){e.r(z),e.d(z,{decode:function(){return b},encode:function(){return T}});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<64;o++)k[M.charCodeAt(o)]=o;var T=function(h){var s,t=new Uint8Array(h),a=t.length,n="";for(s=0;s<a;s+=3)n+=M[t[s]>>2],n+=M[(3&t[s])<<4|t[s+1]>>4],n+=M[(15&t[s+1])<<2|t[s+2]>>6],n+=M[63&t[s+2]];return a%3==2?n=n.substring(0,n.length-1)+"=":a%3==1&&(n=n.substring(0,n.length-2)+"=="),n},b=function(h){var s,t,a,n,r,i=.75*h.length,l=h.length,u=0;h[h.length-1]==="="&&(i--,h[h.length-2]==="="&&i--);var p=new ArrayBuffer(i),c=new Uint8Array(p);for(s=0;s<l;s+=4)t=k[h.charCodeAt(s)],a=k[h.charCodeAt(s+1)],n=k[h.charCodeAt(s+2)],r=k[h.charCodeAt(s+3)],c[u++]=t<<2|a>>4,c[u++]=(15&a)<<4|n>>2,c[u++]=(3&n)<<6|63&r;return p}},59968:function(ee,z){z.byteLength=function(s){var t=b(s),a=t[0],n=t[1];return 3*(a+n)/4-n},z.toByteArray=function(s){var t,a,n=b(s),r=n[0],i=n[1],l=new k(function(c,x,d){return 3*(x+d)/4-d}(0,r,i)),u=0,p=i>0?r-4:r;for(a=0;a<p;a+=4)t=M[s.charCodeAt(a)]<<18|M[s.charCodeAt(a+1)]<<12|M[s.charCodeAt(a+2)]<<6|M[s.charCodeAt(a+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return i===2&&(t=M[s.charCodeAt(a)]<<2|M[s.charCodeAt(a+1)]>>4,l[u++]=255&t),i===1&&(t=M[s.charCodeAt(a)]<<10|M[s.charCodeAt(a+1)]<<4|M[s.charCodeAt(a+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},z.fromByteArray=function(s){for(var t,a=s.length,n=a%3,r=[],i=16383,l=0,u=a-n;l<u;l+=i)r.push(h(s,l,l+i>u?u:l+i));return n===1?(t=s[a-1],r.push(e[t>>2]+e[t<<4&63]+"==")):n===2&&(t=(s[a-2]<<8)+s[a-1],r.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),r.join("")};for(var e=[],M=[],k=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=o[T],M[o.charCodeAt(T)]=T;function b(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=s.indexOf("=");return a===-1&&(a=t),[a,a===t?0:4-a%4]}function h(s,t,a){for(var n,r,i=[],l=t;l<a;l+=3)n=(s[l]<<16&16711680)+(s[l+1]<<8&65280)+(255&s[l+2]),i.push(e[(r=n)>>18&63]+e[r>>12&63]+e[r>>6&63]+e[63&r]);return i.join("")}M[45]=62,M[95]=63},64928:function(ee){function z(b,h,s,t,a){for(var n=a+1;t<=a;){var r=t+a>>>1,i=b[r];(s!==void 0?s(i,h):i-h)>=0?(n=r,a=r-1):t=r+1}return n}function e(b,h,s,t,a){for(var n=a+1;t<=a;){var r=t+a>>>1,i=b[r];(s!==void 0?s(i,h):i-h)>0?(n=r,a=r-1):t=r+1}return n}function M(b,h,s,t,a){for(var n=t-1;t<=a;){var r=t+a>>>1,i=b[r];(s!==void 0?s(i,h):i-h)<0?(n=r,t=r+1):a=r-1}return n}function k(b,h,s,t,a){for(var n=t-1;t<=a;){var r=t+a>>>1,i=b[r];(s!==void 0?s(i,h):i-h)<=0?(n=r,t=r+1):a=r-1}return n}function o(b,h,s,t,a){for(;t<=a;){var n=t+a>>>1,r=b[n],i=s!==void 0?s(r,h):r-h;if(i===0)return n;i<=0?t=n+1:a=n-1}return-1}function T(b,h,s,t,a,n){return typeof s=="function"?n(b,h,s,t===void 0?0:0|t,a===void 0?b.length-1:0|a):n(b,h,void 0,s===void 0?0:0|s,t===void 0?b.length-1:0|t)}ee.exports={ge:function(b,h,s,t,a){return T(b,h,s,t,a,z)},gt:function(b,h,s,t,a){return T(b,h,s,t,a,e)},lt:function(b,h,s,t,a){return T(b,h,s,t,a,M)},le:function(b,h,s,t,a){return T(b,h,s,t,a,k)},eq:function(b,h,s,t,a){return T(b,h,s,t,a,o)}}},308:function(ee,z){function e(k){var o=32;return(k&=-k)&&o--,65535&k&&(o-=16),16711935&k&&(o-=8),252645135&k&&(o-=4),858993459&k&&(o-=2),1431655765&k&&(o-=1),o}z.INT_BITS=32,z.INT_MAX=2147483647,z.INT_MIN=-2147483648,z.sign=function(k){return(k>0)-(k<0)},z.abs=function(k){var o=k>>31;return(k^o)-o},z.min=function(k,o){return o^(k^o)&-(k<o)},z.max=function(k,o){return k^(k^o)&-(k<o)},z.isPow2=function(k){return!(k&k-1||!k)},z.log2=function(k){var o,T;return o=(k>65535)<<4,o|=T=((k>>>=o)>255)<<3,o|=T=((k>>>=T)>15)<<2,(o|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},z.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},z.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},z.countTrailingZeros=e,z.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},z.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},z.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var M=new Array(256);(function(k){for(var o=0;o<256;++o){var T=o,b=o,h=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--h;k[o]=b<<h&255}})(M),z.reverse=function(k){return M[255&k]<<24|M[k>>>8&255]<<16|M[k>>>16&255]<<8|M[k>>>24&255]},z.interleave2=function(k,o){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},z.deinterleave2=function(k,o){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>o&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},z.interleave3=function(k,o,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},z.deinterleave3=function(k,o){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>o&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},z.nextCombination=function(k){var o=k|k-1;return o+1|(~o&-~o)-1>>>e(k)+1}},29620:function(ee,z,e){var M=e(32420);ee.exports=function(b,h){h||(h={});var s,t,a,n,r,i,l,u,p,c,x,d=h.cutoff==null?.25:h.cutoff,g=h.radius==null?8:h.radius,v=h.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!h.width||!h.height)throw Error("For raw data width and height should be provided by options");s=h.width,t=h.height,n=b,i=h.stride?h.stride:Math.floor(b.length/s/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(l=(u=b).getContext("2d"),s=u.width,t=u.height,n=(p=l.getImageData(0,0,s,t)).data,i=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(l=b,s=(u=b.canvas).width,t=u.height,n=(p=l.getImageData(0,0,s,t)).data,i=4):window.ImageData&&b instanceof window.ImageData&&(p=b,s=b.width,t=b.height,n=p.data,i=4);if(a=Math.max(s,t),window.Uint8ClampedArray&&n instanceof window.Uint8ClampedArray||window.Uint8Array&&n instanceof window.Uint8Array)for(r=n,n=Array(s*t),c=0,x=r.length;c<x;c++)n[c]=r[c*i+v]/255;else if(i!==1)throw Error("Raw data can have only 1 value per pixel");var y=Array(s*t),m=Array(s*t),_=Array(a),f=Array(a),S=Array(a+1),w=Array(a);for(c=0,x=s*t;c<x;c++){var E=n[c];y[c]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),m[c]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}o(y,s,t,_,f,w,S),o(m,s,t,_,f,w,S);var O=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(c=0,x=s*t;c<x;c++)O[c]=M(1-((y[c]-m[c])/g+d),0,1);return O};var k=1e20;function o(b,h,s,t,a,n,r){for(var i=0;i<h;i++){for(var l=0;l<s;l++)t[l]=b[l*h+i];for(T(t,a,n,r,s),l=0;l<s;l++)b[l*h+i]=a[l]}for(l=0;l<s;l++){for(i=0;i<h;i++)t[i]=b[l*h+i];for(T(t,a,n,r,h),i=0;i<h;i++)b[l*h+i]=Math.sqrt(a[i])}}function T(b,h,s,t,a){s[0]=0,t[0]=-1e20,t[1]=1e20;for(var n=1,r=0;n<a;n++){for(var i=(b[n]+n*n-(b[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);i<=t[r];)r--,i=(b[n]+n*n-(b[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);s[++r]=n,t[r]=i,t[r+1]=1e20}for(n=0,r=0;n<a;n++){for(;t[r+1]<n;)r++;h[n]=(n-s[r])*(n-s[r])+b[s[r]]}}},99676:function(ee,z,e){var M=e(53664),k=e(57916),o=k(M("String.prototype.indexOf"));ee.exports=function(T,b){var h=M(T,!!b);return typeof h=="function"&&o(T,".prototype.")>-1?k(h):h}},57916:function(ee,z,e){var M=e(8844),k=e(53664),o=e(14500),T=k("%TypeError%"),b=k("%Function.prototype.apply%"),h=k("%Function.prototype.call%"),s=k("%Reflect.apply%",!0)||M.call(h,b),t=k("%Object.defineProperty%",!0),a=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}ee.exports=function(r){if(typeof r!="function")throw new T("a function is required");var i=s(M,h,arguments);return o(i,1+a(0,r.length-(arguments.length-1)),!0)};var n=function(){return s(M,b,arguments)};t?t(ee.exports,"apply",{value:n}):ee.exports.apply=n},32420:function(ee){ee.exports=function(z,e,M){return e<M?z<e?e:z>M?M:z:z<M?M:z>e?e:z}},3808:function(ee,z,e){var M=e(32420);function k(o,T){T==null&&(T=!0);var b=o[0],h=o[1],s=o[2],t=o[3];return t==null&&(t=T?1:255),T&&(b*=255,h*=255,s*=255,t*=255),16777216*(b=255&M(b,0,255))+((h=255&M(h,0,255))<<16)+((s=255&M(s,0,255))<<8)+(255&M(t,0,255))}ee.exports=k,ee.exports.to=k,ee.exports.from=function(o,T){var b=(o=+o)>>>24,h=(16711680&o)>>>16,s=(65280&o)>>>8,t=255&o;return T===!1?[b,h,s,t]:[b/255,h/255,s/255,t/255]}},17592:function(ee){ee.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(ee,z,e){var M=e(96824),k=e(32420),o=e(72512);ee.exports=function(T,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var h=new(o(b))(4),s=b!=="uint8"&&b!=="uint8_clamped";return T.length&&typeof T!="string"||((T=M(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3]!=null?T[3]:255,s&&(h[0]/=255,h[1]/=255,h[2]/=255,h[3]/=255),h):(s?(h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3]!=null?T[3]:1):(h[0]=k(Math.floor(255*T[0]),0,255),h[1]=k(Math.floor(255*T[1]),0,255),h[2]=k(Math.floor(255*T[2]),0,255),h[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),h)}},96824:function(ee,z,e){var M=e(95532),k=e(53576),o=e(32420);ee.exports=function(T){var b,h=M(T);return h.space?((b=Array(3))[0]=o(h.values[0],0,255),b[1]=o(h.values[1],0,255),b[2]=o(h.values[2],0,255),h.space[0]==="h"&&(b=k.rgb(b)),b.push(o(h.alpha,0,1)),b):[]}},95532:function(ee,z,e){var M=e(17592);ee.exports=function(o){var T,b,h=[],s=1;if(typeof o=="string")if(o=o.toLowerCase(),M[o])h=M[o].slice(),b="rgb";else if(o==="transparent")s=0,b="rgb",h=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var t=o.slice(1);s=1,(r=t.length)<=4?(h=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],r===4&&(s=parseInt(t[3]+t[3],16)/255)):(h=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],r===8&&(s=parseInt(t[6]+t[7],16)/255)),h[0]||(h[0]=0),h[1]||(h[1]=0),h[2]||(h[2]=0),b="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var a=T[1],n=a==="rgb";b=t=a.replace(/a$/,"");var r=t==="cmyk"?4:t==="gray"?1:3;h=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(i,l){if(/%$/.test(i))return l===r?parseFloat(i)/100:t==="rgb"?255*parseFloat(i)/100:parseFloat(i);if(t[l]==="h"){if(/deg$/.test(i))return parseFloat(i);if(k[i]!==void 0)return k[i]}return parseFloat(i)}),a===t&&h.push(1),s=n||h[r]===void 0?1:h[r],h=h.slice(0,r)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(h=o.match(/([0-9]+)/g).map(function(i){return parseFloat(i)}),b=o.match(/([a-z])/gi).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(h=[o[0],o[1],o[2]],b="rgb",s=o.length===4?o[3]:1):o instanceof Object&&(o.r!=null||o.red!=null||o.R!=null?(b="rgb",h=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(b="hsl",h=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),s=o.a||o.alpha||o.opacity||1,o.opacity!=null&&(s/=100)):(b="rgb",h=[o>>>16,(65280&o)>>>8,255&o]);return{space:b,values:h,alpha:s}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(ee,z,e){var M=e(19336);ee.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var o,T,b,h,s,t=k[0]/360,a=k[1]/100,n=k[2]/100;if(a===0)return[s=255*n,s,s];o=2*n-(T=n<.5?n*(1+a):n+a-n*a),h=[0,0,0];for(var r=0;r<3;r++)(b=t+.3333333333333333*-(r-1))<0?b++:b>1&&b--,s=6*b<1?o+6*(T-o)*b:2*b<1?T:3*b<2?o+(T-o)*(.6666666666666666-b)*6:o,h[r]=255*s;return h}},M.hsl=function(k){var o,T,b=k[0]/255,h=k[1]/255,s=k[2]/255,t=Math.min(b,h,s),a=Math.max(b,h,s),n=a-t;return a===t?o=0:b===a?o=(h-s)/n:h===a?o=2+(s-b)/n:s===a&&(o=4+(b-h)/n),(o=Math.min(60*o,360))<0&&(o+=360),T=(t+a)/2,[o,100*(a===t?0:T<=.5?n/(a+t):n/(2-a-t)),100*T]}},19336:function(ee){ee.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(ee){ee.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(ee,z,e){ee.exports={parse:e(46416),stringify:e(49395)}},8744:function(ee,z,e){var M=e(30584);ee.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||M.indexOf(k)!==-1}}},46416:function(ee,z,e){var M=e(92384),k=e(68194),o=e(3748),T=e(2904),b=e(47916),h=e(7294),s=e(39956),t=e(8744).isSize;ee.exports=n;var a=n.cache={};function n(i){if(typeof i!="string")throw new Error("Font argument must be a string.");if(a[i])return a[i];if(i==="")throw new Error("Cannot parse an empty string.");if(o.indexOf(i)!==-1)return a[i]={system:i};for(var l,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=s(i,/\s+/);l=p.shift();){if(k.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=l}),a[i]=u;if(b.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(h.indexOf(l)===-1){if(T.indexOf(l)===-1){if(t(l)){var c=s(l,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=r(c[1]):p[0]==="/"&&(p.shift(),u.lineHeight=r(p.shift())),!p.length)throw new Error("Missing required font-family.");return u.family=s(p.join(" "),/\s*,\s*/).map(M),a[i]=u}throw new Error("Unknown or unsupported font token: "+l)}u.weight=l}else u.stretch=l;else u.variant=l;else u.style=l}throw new Error("Missing required font-size.")}function r(i){var l=parseFloat(i);return l.toString()===i?l:i}},49395:function(ee,z,e){var M=e(55616),k=e(8744).isSize,o=i(e(68194)),T=i(e(3748)),b=i(e(2904)),h=i(e(47916)),s=i(e(7294)),t={normal:1,"small-caps":1},a={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},n="serif";function r(l,u){if(l&&!u[l]&&!o[l])throw Error("Unknown keyword `"+l+"`");return l}function i(l){for(var u={},p=0;p<l.length;p++)u[l[p]]=1;return u}ee.exports=function(l){if((l=M(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&r(l.system,T),l.system;if(r(l.style,h),r(l.variant,t),r(l.weight,b),r(l.stretch,s),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!k)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=n),Array.isArray(l.family)&&(l.family.length||(l.family=[n]),l.family=l.family.map(function(p){return a[p]?p:'"'+p+'"'}).join(", "));var u=[];return u.push(l.style),l.variant!==l.style&&u.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&u.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&u.push(l.stretch),u.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),u.push(l.family),u.filter(Boolean).join(" ")}},27940:function(ee,z,e){var M,k=e(81680),o=e(18496),T=e(87396),b=e(95920),h=e(50868),s=e(84323),t=Function.prototype.bind,a=Object.defineProperty,n=Object.prototype.hasOwnProperty;M=function(r,i,l){var u,p=o(i)&&T(i.value);return delete(u=b(i)).writable,delete u.value,u.get=function(){return!l.overwriteDefinition&&n.call(this,r)?p:(i.value=t.call(p,l.resolveContext?l.resolveContext(this):this),a(this,r,i),this[r])},u},ee.exports=function(r){var i=h(arguments[1]);return k(i.resolveContext)&&T(i.resolveContext),s(r,function(l,u){return M(u,l,i)})}},21092:function(ee,z,e){var M=e(81680),k=e(85488),o=e(38452),T=e(50868),b=e(71056),h=ee.exports=function(s,t){var a,n,r,i,l;return arguments.length<2||typeof s!="string"?(i=t,t=s,s=null):i=arguments[2],M(s)?(a=b.call(s,"c"),n=b.call(s,"e"),r=b.call(s,"w")):(a=r=!0,n=!1),l={value:t,configurable:a,enumerable:n,writable:r},i?o(T(i),l):l};h.gs=function(s,t,a){var n,r,i,l;return typeof s!="string"?(i=a,a=t,t=s,s=null):i=arguments[3],M(t)?k(t)?M(a)?k(a)||(i=a,a=void 0):a=void 0:(i=t,t=a=void 0):t=void 0,M(s)?(n=b.call(s,"c"),r=b.call(s,"e")):(n=!0,r=!1),l={get:t,set:a,configurable:n,enumerable:r},i?o(T(i),l):l}},84706:function(ee,z,e){function M(r,i){return r<i?-1:r>i?1:r>=i?0:NaN}e.d(z,{XE:function(){return M},kv:function(){return T},mo:function(){return h},Uf:function(){return s},SY:function(){return t},ik:function(){return a},oh:function(){return n}}),(k=M).length===1&&(o=k,k=function(r,i){return M(o(r),i)});var k,o;function T(r,i){var l,u,p=r.length,c=-1;if(i==null){for(;++c<p;)if((l=r[c])!=null&&l>=l)for(u=l;++c<p;)(l=r[c])!=null&&l>u&&(u=l)}else for(;++c<p;)if((l=i(r[c],c,r))!=null&&l>=l)for(u=l;++c<p;)(l=i(r[c],c,r))!=null&&l>u&&(u=l);return u}function b(r){return r===null?NaN:+r}function h(r,i){var l,u=r.length,p=u,c=-1,x=0;if(i==null)for(;++c<u;)isNaN(l=b(r[c]))?--p:x+=l;else for(;++c<u;)isNaN(l=b(i(r[c],c,r)))?--p:x+=l;if(p)return x/p}function s(r){for(var i,l,u,p=r.length,c=-1,x=0;++c<p;)x+=r[c].length;for(l=new Array(x);--p>=0;)for(i=(u=r[p]).length;--i>=0;)l[--x]=u[i];return l}function t(r,i){var l,u,p=r.length,c=-1;if(i==null){for(;++c<p;)if((l=r[c])!=null&&l>=l)for(u=l;++c<p;)(l=r[c])!=null&&u>l&&(u=l)}else for(;++c<p;)if((l=i(r[c],c,r))!=null&&l>=l)for(u=l;++c<p;)(l=i(r[c],c,r))!=null&&u>l&&(u=l);return u}function a(r,i,l){r=+r,i=+i,l=(p=arguments.length)<2?(i=r,r=0,1):p<3?1:+l;for(var u=-1,p=0|Math.max(0,Math.ceil((i-r)/l)),c=new Array(p);++u<p;)c[u]=r+u*l;return c}function n(r,i){var l,u=r.length,p=-1,c=0;if(i==null)for(;++p<u;)(l=+r[p])&&(c+=l);else for(;++p<u;)(l=+i(r[p],p,r))&&(c+=l);return c}},34712:function(ee,z,e){e.d(z,{kH:function(){return T},UJ:function(){return b}});var M="$";function k(){}function o(i,l){var u=new k;if(i instanceof k)i.each(function(g,v){u.set(v,g)});else if(Array.isArray(i)){var p,c=-1,x=i.length;if(l==null)for(;++c<x;)u.set(c,i[c]);else for(;++c<x;)u.set(l(p=i[c],c,i),p)}else if(i)for(var d in i)u.set(d,i[d]);return u}k.prototype=o.prototype={constructor:k,has:function(i){return M+i in this},get:function(i){return this[M+i]},set:function(i,l){return this[M+i]=l,this},remove:function(i){var l=M+i;return l in this&&delete this[l]},clear:function(){for(var i in this)i[0]===M&&delete this[i]},keys:function(){var i=[];for(var l in this)l[0]===M&&i.push(l.slice(1));return i},values:function(){var i=[];for(var l in this)l[0]===M&&i.push(this[l]);return i},entries:function(){var i=[];for(var l in this)l[0]===M&&i.push({key:l.slice(1),value:this[l]});return i},size:function(){var i=0;for(var l in this)l[0]===M&&++i;return i},empty:function(){for(var i in this)if(i[0]===M)return!1;return!0},each:function(i){for(var l in this)l[0]===M&&i(this[l],l.slice(1),this)}};var T=o;function b(){var i,l,u,p=[],c=[];function x(g,v,y,m){if(v>=p.length)return i!=null&&g.sort(i),l!=null?l(g):g;for(var _,f,S,w=-1,E=g.length,O=p[v++],C=T(),P=y();++w<E;)(S=C.get(_=O(f=g[w])+""))?S.push(f):C.set(_,[f]);return C.each(function(R,j){m(P,j,x(R,v,y,m))}),P}function d(g,v){if(++v>p.length)return g;var y,m=c[v-1];return l!=null&&v>=p.length?y=g.entries():(y=[],g.each(function(_,f){y.push({key:f,values:d(_,v)})})),m!=null?y.sort(function(_,f){return m(_.key,f.key)}):y}return u={object:function(g){return x(g,0,h,s)},map:function(g){return x(g,0,t,a)},entries:function(g){return d(x(g,0,t,a),0)},key:function(g){return p.push(g),u},sortKeys:function(g){return c[p.length-1]=g,u},sortValues:function(g){return i=g,u},rollup:function(g){return l=g,u}}}function h(){return{}}function s(i,l,u){i[l]=u}function t(){return T()}function a(i,l,u){i.set(l,u)}function n(){}var r=T.prototype;n.prototype={constructor:n,has:r.has,add:function(i){return this[M+(i+="")]=i,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each}},49812:function(ee,z,e){function M(be,ve){var ge;function we(){var _e,se,ie=ge.length,fe=0,Ee=0;for(_e=0;_e<ie;++_e)fe+=(se=ge[_e]).x,Ee+=se.y;for(fe=fe/ie-be,Ee=Ee/ie-ve,_e=0;_e<ie;++_e)(se=ge[_e]).x-=fe,se.y-=Ee}return be==null&&(be=0),ve==null&&(ve=0),we.initialize=function(_e){ge=_e},we.x=function(_e){return arguments.length?(be=+_e,we):be},we.y=function(_e){return arguments.length?(ve=+_e,we):ve},we}function k(be){return function(){return be}}function o(){return 1e-6*(Math.random()-.5)}function T(be,ve,ge,we){if(isNaN(ve)||isNaN(ge))return be;var _e,se,ie,fe,Ee,Te,Ae,Se,Oe,De=be._root,de={data:we},me=be._x0,Me=be._y0,ze=be._x1,Pe=be._y1;if(!De)return be._root=de,be;for(;De.length;)if((Te=ve>=(se=(me+ze)/2))?me=se:ze=se,(Ae=ge>=(ie=(Me+Pe)/2))?Me=ie:Pe=ie,_e=De,!(De=De[Se=Ae<<1|Te]))return _e[Se]=de,be;if(fe=+be._x.call(null,De.data),Ee=+be._y.call(null,De.data),ve===fe&&ge===Ee)return de.next=De,_e?_e[Se]=de:be._root=de,be;do _e=_e?_e[Se]=new Array(4):be._root=new Array(4),(Te=ve>=(se=(me+ze)/2))?me=se:ze=se,(Ae=ge>=(ie=(Me+Pe)/2))?Me=ie:Pe=ie;while((Se=Ae<<1|Te)==(Oe=(Ee>=ie)<<1|fe>=se));return _e[Oe]=De,_e[Se]=de,be}function b(be,ve,ge,we,_e){this.node=be,this.x0=ve,this.y0=ge,this.x1=we,this.y1=_e}function h(be){return be[0]}function s(be){return be[1]}function t(be,ve,ge){var we=new a(ve??h,ge??s,NaN,NaN,NaN,NaN);return be==null?we:we.addAll(be)}function a(be,ve,ge,we,_e,se){this._x=be,this._y=ve,this._x0=ge,this._y0=we,this._x1=_e,this._y1=se,this._root=void 0}function n(be){for(var ve={data:be.data},ge=ve;be=be.next;)ge=ge.next={data:be.data};return ve}e.r(z),e.d(z,{forceCenter:function(){return M},forceCollide:function(){return u},forceLink:function(){return d},forceManyBody:function(){return ce},forceRadial:function(){return he},forceSimulation:function(){return ae},forceX:function(){return pe},forceY:function(){return xe}});var r=t.prototype=a.prototype;function i(be){return be.x+be.vx}function l(be){return be.y+be.vy}function u(be){var ve,ge,we=1,_e=1;function se(){for(var Ee,Te,Ae,Se,Oe,De,de,me=ve.length,Me=0;Me<_e;++Me)for(Te=t(ve,i,l).visitAfter(ie),Ee=0;Ee<me;++Ee)Ae=ve[Ee],De=ge[Ae.index],de=De*De,Se=Ae.x+Ae.vx,Oe=Ae.y+Ae.vy,Te.visit(ze);function ze(Pe,Ne,Ve,Ye,at){var rt=Pe.data,dt=Pe.r,vt=De+dt;if(!rt)return Ne>Se+vt||Ye<Se-vt||Ve>Oe+vt||at<Oe-vt;if(rt.index>Ae.index){var ht=Se-rt.x-rt.vx,et=Oe-rt.y-rt.vy,$e=ht*ht+et*et;$e<vt*vt&&(ht===0&&($e+=(ht=o())*ht),et===0&&($e+=(et=o())*et),$e=(vt-($e=Math.sqrt($e)))/$e*we,Ae.vx+=(ht*=$e)*(vt=(dt*=dt)/(de+dt)),Ae.vy+=(et*=$e)*vt,rt.vx-=ht*(vt=1-vt),rt.vy-=et*vt)}}}function ie(Ee){if(Ee.data)return Ee.r=ge[Ee.data.index];for(var Te=Ee.r=0;Te<4;++Te)Ee[Te]&&Ee[Te].r>Ee.r&&(Ee.r=Ee[Te].r)}function fe(){if(ve){var Ee,Te,Ae=ve.length;for(ge=new Array(Ae),Ee=0;Ee<Ae;++Ee)Te=ve[Ee],ge[Te.index]=+be(Te,Ee,ve)}}return typeof be!="function"&&(be=k(be==null?1:+be)),se.initialize=function(Ee){ve=Ee,fe()},se.iterations=function(Ee){return arguments.length?(_e=+Ee,se):_e},se.strength=function(Ee){return arguments.length?(we=+Ee,se):we},se.radius=function(Ee){return arguments.length?(be=typeof Ee=="function"?Ee:k(+Ee),fe(),se):be},se}r.copy=function(){var be,ve,ge=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),we=this._root;if(!we)return ge;if(!we.length)return ge._root=n(we),ge;for(be=[{source:we,target:ge._root=new Array(4)}];we=be.pop();)for(var _e=0;_e<4;++_e)(ve=we.source[_e])&&(ve.length?be.push({source:ve,target:we.target[_e]=new Array(4)}):we.target[_e]=n(ve));return ge},r.add=function(be){var ve=+this._x.call(null,be),ge=+this._y.call(null,be);return T(this.cover(ve,ge),ve,ge,be)},r.addAll=function(be){var ve,ge,we,_e,se=be.length,ie=new Array(se),fe=new Array(se),Ee=1/0,Te=1/0,Ae=-1/0,Se=-1/0;for(ge=0;ge<se;++ge)isNaN(we=+this._x.call(null,ve=be[ge]))||isNaN(_e=+this._y.call(null,ve))||(ie[ge]=we,fe[ge]=_e,we<Ee&&(Ee=we),we>Ae&&(Ae=we),_e<Te&&(Te=_e),_e>Se&&(Se=_e));if(Ee>Ae||Te>Se)return this;for(this.cover(Ee,Te).cover(Ae,Se),ge=0;ge<se;++ge)T(this,ie[ge],fe[ge],be[ge]);return this},r.cover=function(be,ve){if(isNaN(be=+be)||isNaN(ve=+ve))return this;var ge=this._x0,we=this._y0,_e=this._x1,se=this._y1;if(isNaN(ge))_e=(ge=Math.floor(be))+1,se=(we=Math.floor(ve))+1;else{for(var ie,fe,Ee=_e-ge,Te=this._root;ge>be||be>=_e||we>ve||ve>=se;)switch(fe=(ve<we)<<1|be<ge,(ie=new Array(4))[fe]=Te,Te=ie,Ee*=2,fe){case 0:_e=ge+Ee,se=we+Ee;break;case 1:ge=_e-Ee,se=we+Ee;break;case 2:_e=ge+Ee,we=se-Ee;break;case 3:ge=_e-Ee,we=se-Ee}this._root&&this._root.length&&(this._root=Te)}return this._x0=ge,this._y0=we,this._x1=_e,this._y1=se,this},r.data=function(){var be=[];return this.visit(function(ve){if(!ve.length)do be.push(ve.data);while(ve=ve.next)}),be},r.extent=function(be){return arguments.length?this.cover(+be[0][0],+be[0][1]).cover(+be[1][0],+be[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(be,ve,ge){var we,_e,se,ie,fe,Ee,Te,Ae=this._x0,Se=this._y0,Oe=this._x1,De=this._y1,de=[],me=this._root;for(me&&de.push(new b(me,Ae,Se,Oe,De)),ge==null?ge=1/0:(Ae=be-ge,Se=ve-ge,Oe=be+ge,De=ve+ge,ge*=ge);Ee=de.pop();)if(!(!(me=Ee.node)||(_e=Ee.x0)>Oe||(se=Ee.y0)>De||(ie=Ee.x1)<Ae||(fe=Ee.y1)<Se))if(me.length){var Me=(_e+ie)/2,ze=(se+fe)/2;de.push(new b(me[3],Me,ze,ie,fe),new b(me[2],_e,ze,Me,fe),new b(me[1],Me,se,ie,ze),new b(me[0],_e,se,Me,ze)),(Te=(ve>=ze)<<1|be>=Me)&&(Ee=de[de.length-1],de[de.length-1]=de[de.length-1-Te],de[de.length-1-Te]=Ee)}else{var Pe=be-+this._x.call(null,me.data),Ne=ve-+this._y.call(null,me.data),Ve=Pe*Pe+Ne*Ne;if(Ve<ge){var Ye=Math.sqrt(ge=Ve);Ae=be-Ye,Se=ve-Ye,Oe=be+Ye,De=ve+Ye,we=me.data}}return we},r.remove=function(be){if(isNaN(se=+this._x.call(null,be))||isNaN(ie=+this._y.call(null,be)))return this;var ve,ge,we,_e,se,ie,fe,Ee,Te,Ae,Se,Oe,De=this._root,de=this._x0,me=this._y0,Me=this._x1,ze=this._y1;if(!De)return this;if(De.length)for(;;){if((Te=se>=(fe=(de+Me)/2))?de=fe:Me=fe,(Ae=ie>=(Ee=(me+ze)/2))?me=Ee:ze=Ee,ve=De,!(De=De[Se=Ae<<1|Te]))return this;if(!De.length)break;(ve[Se+1&3]||ve[Se+2&3]||ve[Se+3&3])&&(ge=ve,Oe=Se)}for(;De.data!==be;)if(we=De,!(De=De.next))return this;return(_e=De.next)&&delete De.next,we?(_e?we.next=_e:delete we.next,this):ve?(_e?ve[Se]=_e:delete ve[Se],(De=ve[0]||ve[1]||ve[2]||ve[3])&&De===(ve[3]||ve[2]||ve[1]||ve[0])&&!De.length&&(ge?ge[Oe]=De:this._root=De),this):(this._root=_e,this)},r.removeAll=function(be){for(var ve=0,ge=be.length;ve<ge;++ve)this.remove(be[ve]);return this},r.root=function(){return this._root},r.size=function(){var be=0;return this.visit(function(ve){if(!ve.length)do++be;while(ve=ve.next)}),be},r.visit=function(be){var ve,ge,we,_e,se,ie,fe=[],Ee=this._root;for(Ee&&fe.push(new b(Ee,this._x0,this._y0,this._x1,this._y1));ve=fe.pop();)if(!be(Ee=ve.node,we=ve.x0,_e=ve.y0,se=ve.x1,ie=ve.y1)&&Ee.length){var Te=(we+se)/2,Ae=(_e+ie)/2;(ge=Ee[3])&&fe.push(new b(ge,Te,Ae,se,ie)),(ge=Ee[2])&&fe.push(new b(ge,we,Ae,Te,ie)),(ge=Ee[1])&&fe.push(new b(ge,Te,_e,se,Ae)),(ge=Ee[0])&&fe.push(new b(ge,we,_e,Te,Ae))}return this},r.visitAfter=function(be){var ve,ge=[],we=[];for(this._root&&ge.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));ve=ge.pop();){var _e=ve.node;if(_e.length){var se,ie=ve.x0,fe=ve.y0,Ee=ve.x1,Te=ve.y1,Ae=(ie+Ee)/2,Se=(fe+Te)/2;(se=_e[0])&&ge.push(new b(se,ie,fe,Ae,Se)),(se=_e[1])&&ge.push(new b(se,Ae,fe,Ee,Se)),(se=_e[2])&&ge.push(new b(se,ie,Se,Ae,Te)),(se=_e[3])&&ge.push(new b(se,Ae,Se,Ee,Te))}we.push(ve)}for(;ve=we.pop();)be(ve.node,ve.x0,ve.y0,ve.x1,ve.y1);return this},r.x=function(be){return arguments.length?(this._x=be,this):this._x},r.y=function(be){return arguments.length?(this._y=be,this):this._y};var p=e(34712);function c(be){return be.index}function x(be,ve){var ge=be.get(ve);if(!ge)throw new Error("missing: "+ve);return ge}function d(be){var ve,ge,we,_e,se,ie=c,fe=function(de){return 1/Math.min(_e[de.source.index],_e[de.target.index])},Ee=k(30),Te=1;function Ae(de){for(var me=0,Me=be.length;me<Te;++me)for(var ze,Pe,Ne,Ve,Ye,at,rt,dt=0;dt<Me;++dt)Pe=(ze=be[dt]).source,Ve=(Ne=ze.target).x+Ne.vx-Pe.x-Pe.vx||o(),Ye=Ne.y+Ne.vy-Pe.y-Pe.vy||o(),Ve*=at=((at=Math.sqrt(Ve*Ve+Ye*Ye))-ge[dt])/at*de*ve[dt],Ye*=at,Ne.vx-=Ve*(rt=se[dt]),Ne.vy-=Ye*rt,Pe.vx+=Ve*(rt=1-rt),Pe.vy+=Ye*rt}function Se(){if(we){var de,me,Me=we.length,ze=be.length,Pe=(0,p.kH)(we,ie);for(de=0,_e=new Array(Me);de<ze;++de)(me=be[de]).index=de,typeof me.source!="object"&&(me.source=x(Pe,me.source)),typeof me.target!="object"&&(me.target=x(Pe,me.target)),_e[me.source.index]=(_e[me.source.index]||0)+1,_e[me.target.index]=(_e[me.target.index]||0)+1;for(de=0,se=new Array(ze);de<ze;++de)me=be[de],se[de]=_e[me.source.index]/(_e[me.source.index]+_e[me.target.index]);ve=new Array(ze),Oe(),ge=new Array(ze),De()}}function Oe(){if(we)for(var de=0,me=be.length;de<me;++de)ve[de]=+fe(be[de],de,be)}function De(){if(we)for(var de=0,me=be.length;de<me;++de)ge[de]=+Ee(be[de],de,be)}return be==null&&(be=[]),Ae.initialize=function(de){we=de,Se()},Ae.links=function(de){return arguments.length?(be=de,Se(),Ae):be},Ae.id=function(de){return arguments.length?(ie=de,Ae):ie},Ae.iterations=function(de){return arguments.length?(Te=+de,Ae):Te},Ae.strength=function(de){return arguments.length?(fe=typeof de=="function"?de:k(+de),Oe(),Ae):fe},Ae.distance=function(de){return arguments.length?(Ee=typeof de=="function"?de:k(+de),De(),Ae):Ee},Ae}var g={value:function(){}};function v(){for(var be,ve=0,ge=arguments.length,we={};ve<ge;++ve){if(!(be=arguments[ve]+"")||be in we||/[\s.]/.test(be))throw new Error("illegal type: "+be);we[be]=[]}return new y(we)}function y(be){this._=be}function m(be,ve){for(var ge,we=0,_e=be.length;we<_e;++we)if((ge=be[we]).name===ve)return ge.value}function _(be,ve,ge){for(var we=0,_e=be.length;we<_e;++we)if(be[we].name===ve){be[we]=g,be=be.slice(0,we).concat(be.slice(we+1));break}return ge!=null&&be.push({name:ve,value:ge}),be}y.prototype=v.prototype={constructor:y,on:function(be,ve){var ge,we,_e=this._,se=(we=_e,(be+"").trim().split(/^|\s+/).map(function(Ee){var Te="",Ae=Ee.indexOf(".");if(Ae>=0&&(Te=Ee.slice(Ae+1),Ee=Ee.slice(0,Ae)),Ee&&!we.hasOwnProperty(Ee))throw new Error("unknown type: "+Ee);return{type:Ee,name:Te}})),ie=-1,fe=se.length;if(!(arguments.length<2)){if(ve!=null&&typeof ve!="function")throw new Error("invalid callback: "+ve);for(;++ie<fe;)if(ge=(be=se[ie]).type)_e[ge]=_(_e[ge],be.name,ve);else if(ve==null)for(ge in _e)_e[ge]=_(_e[ge],be.name,null);return this}for(;++ie<fe;)if((ge=(be=se[ie]).type)&&(ge=m(_e[ge],be.name)))return ge},copy:function(){var be={},ve=this._;for(var ge in ve)be[ge]=ve[ge].slice();return new y(be)},call:function(be,ve){if((ge=arguments.length-2)>0)for(var ge,we,_e=new Array(ge),se=0;se<ge;++se)_e[se]=arguments[se+2];if(!this._.hasOwnProperty(be))throw new Error("unknown type: "+be);for(se=0,ge=(we=this._[be]).length;se<ge;++se)we[se].value.apply(ve,_e)},apply:function(be,ve,ge){if(!this._.hasOwnProperty(be))throw new Error("unknown type: "+be);for(var we=this._[be],_e=0,se=we.length;_e<se;++_e)we[_e].value.apply(ve,ge)}};var f,S,w=v,E=0,O=0,C=0,P=1e3,R=0,j=0,D=0,N=typeof performance=="object"&&performance.now?performance:Date,W=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(be){setTimeout(be,17)};function F(){return j||(W(V),j=N.now()+D)}function V(){j=0}function U(){this._call=this._time=this._next=null}function te(be,ve,ge){var we=new U;return we.restart(be,ve,ge),we}function J(){j=(R=N.now())+D,E=O=0;try{(function(){F(),++E;for(var be,ve=f;ve;)(be=j-ve._time)>=0&&ve._call.call(null,be),ve=ve._next;--E})()}finally{E=0,function(){for(var be,ve,ge=f,we=1/0;ge;)ge._call?(we>ge._time&&(we=ge._time),be=ge,ge=ge._next):(ve=ge._next,ge._next=null,ge=be?be._next=ve:f=ve);S=be,K(we)}(),j=0}}function X(){var be=N.now(),ve=be-R;ve>P&&(D-=ve,R=be)}function K(be){E||(O&&(O=clearTimeout(O)),be-j>24?(be<1/0&&(O=setTimeout(J,be-N.now()-D)),C&&(C=clearInterval(C))):(C||(R=N.now(),C=setInterval(X,P)),E=1,W(J)))}function Q(be){return be.x}function Z(be){return be.y}U.prototype=te.prototype={constructor:U,restart:function(be,ve,ge){if(typeof be!="function")throw new TypeError("callback is not a function");ge=(ge==null?F():+ge)+(ve==null?0:+ve),this._next||S===this||(S?S._next=this:f=this,S=this),this._call=be,this._time=ge,K()},stop:function(){this._call&&(this._call=null,this._time=1/0,K())}};var re=10,oe=Math.PI*(3-Math.sqrt(5));function ae(be){var ve,ge=1,we=.001,_e=1-Math.pow(we,1/300),se=0,ie=.6,fe=(0,p.kH)(),Ee=te(Ae),Te=w("tick","end");function Ae(){Se(),Te.call("tick",ve),ge<we&&(Ee.stop(),Te.call("end",ve))}function Se(de){var me,Me,ze=be.length;de===void 0&&(de=1);for(var Pe=0;Pe<de;++Pe)for(ge+=(se-ge)*_e,fe.each(function(Ne){Ne(ge)}),me=0;me<ze;++me)(Me=be[me]).fx==null?Me.x+=Me.vx*=ie:(Me.x=Me.fx,Me.vx=0),Me.fy==null?Me.y+=Me.vy*=ie:(Me.y=Me.fy,Me.vy=0);return ve}function Oe(){for(var de,me=0,Me=be.length;me<Me;++me){if((de=be[me]).index=me,de.fx!=null&&(de.x=de.fx),de.fy!=null&&(de.y=de.fy),isNaN(de.x)||isNaN(de.y)){var ze=re*Math.sqrt(me),Pe=me*oe;de.x=ze*Math.cos(Pe),de.y=ze*Math.sin(Pe)}(isNaN(de.vx)||isNaN(de.vy))&&(de.vx=de.vy=0)}}function De(de){return de.initialize&&de.initialize(be),de}return be==null&&(be=[]),Oe(),ve={tick:Se,restart:function(){return Ee.restart(Ae),ve},stop:function(){return Ee.stop(),ve},nodes:function(de){return arguments.length?(be=de,Oe(),fe.each(De),ve):be},alpha:function(de){return arguments.length?(ge=+de,ve):ge},alphaMin:function(de){return arguments.length?(we=+de,ve):we},alphaDecay:function(de){return arguments.length?(_e=+de,ve):+_e},alphaTarget:function(de){return arguments.length?(se=+de,ve):se},velocityDecay:function(de){return arguments.length?(ie=1-de,ve):1-ie},force:function(de,me){return arguments.length>1?(me==null?fe.remove(de):fe.set(de,De(me)),ve):fe.get(de)},find:function(de,me,Me){var ze,Pe,Ne,Ve,Ye,at=0,rt=be.length;for(Me==null?Me=1/0:Me*=Me,at=0;at<rt;++at)(Ne=(ze=de-(Ve=be[at]).x)*ze+(Pe=me-Ve.y)*Pe)<Me&&(Ye=Ve,Me=Ne);return Ye},on:function(de,me){return arguments.length>1?(Te.on(de,me),ve):Te.on(de)}}}function ce(){var be,ve,ge,we,_e=k(-30),se=1,ie=1/0,fe=.81;function Ee(Oe){var De,de=be.length,me=t(be,Q,Z).visitAfter(Ae);for(ge=Oe,De=0;De<de;++De)ve=be[De],me.visit(Se)}function Te(){if(be){var Oe,De,de=be.length;for(we=new Array(de),Oe=0;Oe<de;++Oe)De=be[Oe],we[De.index]=+_e(De,Oe,be)}}function Ae(Oe){var De,de,me,Me,ze,Pe=0,Ne=0;if(Oe.length){for(me=Me=ze=0;ze<4;++ze)(De=Oe[ze])&&(de=Math.abs(De.value))&&(Pe+=De.value,Ne+=de,me+=de*De.x,Me+=de*De.y);Oe.x=me/Ne,Oe.y=Me/Ne}else{(De=Oe).x=De.data.x,De.y=De.data.y;do Pe+=we[De.data.index];while(De=De.next)}Oe.value=Pe}function Se(Oe,De,de,me){if(!Oe.value)return!0;var Me=Oe.x-ve.x,ze=Oe.y-ve.y,Pe=me-De,Ne=Me*Me+ze*ze;if(Pe*Pe/fe<Ne)return Ne<ie&&(Me===0&&(Ne+=(Me=o())*Me),ze===0&&(Ne+=(ze=o())*ze),Ne<se&&(Ne=Math.sqrt(se*Ne)),ve.vx+=Me*Oe.value*ge/Ne,ve.vy+=ze*Oe.value*ge/Ne),!0;if(!(Oe.length||Ne>=ie)){(Oe.data!==ve||Oe.next)&&(Me===0&&(Ne+=(Me=o())*Me),ze===0&&(Ne+=(ze=o())*ze),Ne<se&&(Ne=Math.sqrt(se*Ne)));do Oe.data!==ve&&(Pe=we[Oe.data.index]*ge/Ne,ve.vx+=Me*Pe,ve.vy+=ze*Pe);while(Oe=Oe.next)}}return Ee.initialize=function(Oe){be=Oe,Te()},Ee.strength=function(Oe){return arguments.length?(_e=typeof Oe=="function"?Oe:k(+Oe),Te(),Ee):_e},Ee.distanceMin=function(Oe){return arguments.length?(se=Oe*Oe,Ee):Math.sqrt(se)},Ee.distanceMax=function(Oe){return arguments.length?(ie=Oe*Oe,Ee):Math.sqrt(ie)},Ee.theta=function(Oe){return arguments.length?(fe=Oe*Oe,Ee):Math.sqrt(fe)},Ee}function he(be,ve,ge){var we,_e,se,ie=k(.1);function fe(Te){for(var Ae=0,Se=we.length;Ae<Se;++Ae){var Oe=we[Ae],De=Oe.x-ve||1e-6,de=Oe.y-ge||1e-6,me=Math.sqrt(De*De+de*de),Me=(se[Ae]-me)*_e[Ae]*Te/me;Oe.vx+=De*Me,Oe.vy+=de*Me}}function Ee(){if(we){var Te,Ae=we.length;for(_e=new Array(Ae),se=new Array(Ae),Te=0;Te<Ae;++Te)se[Te]=+be(we[Te],Te,we),_e[Te]=isNaN(se[Te])?0:+ie(we[Te],Te,we)}}return typeof be!="function"&&(be=k(+be)),ve==null&&(ve=0),ge==null&&(ge=0),fe.initialize=function(Te){we=Te,Ee()},fe.strength=function(Te){return arguments.length?(ie=typeof Te=="function"?Te:k(+Te),Ee(),fe):ie},fe.radius=function(Te){return arguments.length?(be=typeof Te=="function"?Te:k(+Te),Ee(),fe):be},fe.x=function(Te){return arguments.length?(ve=+Te,fe):ve},fe.y=function(Te){return arguments.length?(ge=+Te,fe):ge},fe}function pe(be){var ve,ge,we,_e=k(.1);function se(fe){for(var Ee,Te=0,Ae=ve.length;Te<Ae;++Te)(Ee=ve[Te]).vx+=(we[Te]-Ee.x)*ge[Te]*fe}function ie(){if(ve){var fe,Ee=ve.length;for(ge=new Array(Ee),we=new Array(Ee),fe=0;fe<Ee;++fe)ge[fe]=isNaN(we[fe]=+be(ve[fe],fe,ve))?0:+_e(ve[fe],fe,ve)}}return typeof be!="function"&&(be=k(be==null?0:+be)),se.initialize=function(fe){ve=fe,ie()},se.strength=function(fe){return arguments.length?(_e=typeof fe=="function"?fe:k(+fe),ie(),se):_e},se.x=function(fe){return arguments.length?(be=typeof fe=="function"?fe:k(+fe),ie(),se):be},se}function xe(be){var ve,ge,we,_e=k(.1);function se(fe){for(var Ee,Te=0,Ae=ve.length;Te<Ae;++Te)(Ee=ve[Te]).vy+=(we[Te]-Ee.y)*ge[Te]*fe}function ie(){if(ve){var fe,Ee=ve.length;for(ge=new Array(Ee),we=new Array(Ee),fe=0;fe<Ee;++fe)ge[fe]=isNaN(we[fe]=+be(ve[fe],fe,ve))?0:+_e(ve[fe],fe,ve)}}return typeof be!="function"&&(be=k(be==null?0:+be)),se.initialize=function(fe){ve=fe,ie()},se.strength=function(fe){return arguments.length?(_e=typeof fe=="function"?fe:k(+fe),ie(),se):_e},se.y=function(fe){return arguments.length?(be=typeof fe=="function"?fe:k(+fe),ie(),se):be},se}},57624:function(ee,z,e){function M(u,p){if((c=(u=p?u.toExponential(p-1):u.toExponential()).indexOf("e"))<0)return null;var c,x=u.slice(0,c);return[x.length>1?x[0]+x.slice(2):x,+u.slice(c+1)]}e.d(z,{E9:function(){return n},SO:function(){return l}});var k,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(p=o.exec(u)))throw new Error("invalid format: "+u);var p;return new b({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function b(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function h(u,p){var c=M(u,p);if(!c)return u+"";var x=c[0],d=c[1];return d<0?"0."+new Array(-d).join("0")+x:x.length>d+1?x.slice(0,d+1)+"."+x.slice(d+1):x+new Array(d-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(u,p){return(100*u).toFixed(p)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,p){return u.toExponential(p)},f:function(u,p){return u.toFixed(p)},g:function(u,p){return u.toPrecision(p)},o:function(u){return Math.round(u).toString(8)},p:function(u,p){return h(100*u,p)},r:h,s:function(u,p){var c=M(u,p);if(!c)return u+"";var x=c[0],d=c[1],g=d-(k=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,v=x.length;return g===v?x:g>v?x+new Array(g-v+1).join("0"):g>0?x.slice(0,g)+"."+x.slice(g):"0."+new Array(1-g).join("0")+M(u,Math.max(0,p+g-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var a,n,r=Array.prototype.map,i=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function l(u){var p,c,x=u.grouping===void 0||u.thousands===void 0?t:(p=r.call(u.grouping,Number),c=u.thousands+"",function(w,E){for(var O=w.length,C=[],P=0,R=p[0],j=0;O>0&&R>0&&(j+R+1>E&&(R=Math.max(1,E-j)),C.push(w.substring(O-=R,O+R)),!((j+=R+1)>E));)R=p[P=(P+1)%p.length];return C.reverse().join(c)}),d=u.currency===void 0?"":u.currency[0]+"",g=u.currency===void 0?"":u.currency[1]+"",v=u.decimal===void 0?".":u.decimal+"",y=u.numerals===void 0?t:function(w){return function(E){return E.replace(/[0-9]/g,function(O){return w[+O]})}}(r.call(u.numerals,String)),m=u.percent===void 0?"%":u.percent+"",_=u.minus===void 0?"-":u.minus+"",f=u.nan===void 0?"NaN":u.nan+"";function S(w){var E=(w=T(w)).fill,O=w.align,C=w.sign,P=w.symbol,R=w.zero,j=w.width,D=w.comma,N=w.precision,W=w.trim,F=w.type;F==="n"?(D=!0,F="g"):s[F]||(N===void 0&&(N=12),W=!0,F="g"),(R||E==="0"&&O==="=")&&(R=!0,E="0",O="=");var V=P==="$"?d:P==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",U=P==="$"?g:/[%p]/.test(F)?m:"",te=s[F],J=/[defgprs%]/.test(F);function X(K){var Q,Z,re,oe=V,ae=U;if(F==="c")ae=te(K)+ae,K="";else{var ce=(K=+K)<0||1/K<0;if(K=isNaN(K)?f:te(Math.abs(K),N),W&&(K=function(xe){e:for(var be,ve=xe.length,ge=1,we=-1;ge<ve;++ge)switch(xe[ge]){case".":we=be=ge;break;case"0":we===0&&(we=ge),be=ge;break;default:if(!+xe[ge])break e;we>0&&(we=0)}return we>0?xe.slice(0,we)+xe.slice(be+1):xe}(K)),ce&&+K==0&&C!=="+"&&(ce=!1),oe=(ce?C==="("?C:_:C==="-"||C==="("?"":C)+oe,ae=(F==="s"?i[8+k/3]:"")+ae+(ce&&C==="("?")":""),J){for(Q=-1,Z=K.length;++Q<Z;)if(48>(re=K.charCodeAt(Q))||re>57){ae=(re===46?v+K.slice(Q+1):K.slice(Q))+ae,K=K.slice(0,Q);break}}}D&&!R&&(K=x(K,1/0));var he=oe.length+K.length+ae.length,pe=he<j?new Array(j-he+1).join(E):"";switch(D&&R&&(K=x(pe+K,pe.length?j-ae.length:1/0),pe=""),O){case"<":K=oe+K+ae+pe;break;case"=":K=oe+pe+K+ae;break;case"^":K=pe.slice(0,he=pe.length>>1)+oe+K+ae+pe.slice(he);break;default:K=pe+oe+K+ae}return y(K)}return N=N===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N)),X.toString=function(){return w+""},X}return{format:S,formatPrefix:function(w,E){var O,C=S(((w=T(w)).type="f",w)),P=3*Math.max(-8,Math.min(8,Math.floor((O=E,((O=M(Math.abs(O)))?O[1]:NaN)/3)))),R=Math.pow(10,-P),j=i[8+P/3];return function(D){return C(R*D)+j}}}}a=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n=a.format,a.formatPrefix},87108:function(ee,z,e){e.r(z),e.d(z,{geoAiry:function(){return D},geoAiryRaw:function(){return j},geoAitoff:function(){return W},geoAitoffRaw:function(){return N},geoArmadillo:function(){return V},geoArmadilloRaw:function(){return F},geoAugust:function(){return te},geoAugustRaw:function(){return U},geoBaker:function(){return Q},geoBakerRaw:function(){return K},geoBerghaus:function(){return oe},geoBerghausRaw:function(){return re},geoBertin1953:function(){return ge},geoBertin1953Raw:function(){return ve},geoBoggs:function(){return Ae},geoBoggsRaw:function(){return Te},geoBonne:function(){return me},geoBonneRaw:function(){return de},geoBottomley:function(){return ze},geoBottomleyRaw:function(){return Me},geoBromley:function(){return Ne},geoBromleyRaw:function(){return Pe},geoChamberlin:function(){return $e},geoChamberlinAfrica:function(){return et},geoChamberlinRaw:function(){return vt},geoCollignon:function(){return Pt},geoCollignonRaw:function(){return wt},geoCraig:function(){return At},geoCraigRaw:function(){return Ot},geoCraster:function(){return Be},geoCrasterRaw:function(){return Ze},geoCylindricalEqualArea:function(){return it},geoCylindricalEqualAreaRaw:function(){return Ge},geoCylindricalStereographic:function(){return Re},geoCylindricalStereographicRaw:function(){return tt},geoEckert1:function(){return nt},geoEckert1Raw:function(){return Fe},geoEckert2:function(){return ct},geoEckert2Raw:function(){return We},geoEckert3:function(){return gt},geoEckert3Raw:function(){return pt},geoEckert4:function(){return kt},geoEckert4Raw:function(){return ut},geoEckert5:function(){return Mt},geoEckert5Raw:function(){return yt},geoEckert6:function(){return Ct},geoEckert6Raw:function(){return Lt},geoEisenlohr:function(){return Nt},geoEisenlohrRaw:function(){return Wt},geoFahey:function(){return Qt},geoFaheyRaw:function(){return Ht},geoFoucaut:function(){return Tn},geoFoucautRaw:function(){return Cn},geoFoucautSinusoidal:function(){return Zt},geoFoucautSinusoidalRaw:function(){return hn},geoGilbert:function(){return xn},geoGingery:function(){return Rn},geoGingeryRaw:function(){return Pn},geoGinzburg4:function(){return tr},geoGinzburg4Raw:function(){return Vn},geoGinzburg5:function(){return Wn},geoGinzburg5Raw:function(){return er},geoGinzburg6:function(){return Jt},geoGinzburg6Raw:function(){return or},geoGinzburg8:function(){return En},geoGinzburg8Raw:function(){return en},geoGinzburg9:function(){return Ln},geoGinzburg9Raw:function(){return gn},geoGringorten:function(){return Yn},geoGringortenQuincuncial:function(){return si},geoGringortenRaw:function(){return Nn},geoGuyou:function(){return bt},geoGuyouRaw:function(){return pn},geoHammer:function(){return pe},geoHammerRaw:function(){return ce},geoHammerRetroazimuthal:function(){return cn},geoHammerRetroazimuthalRaw:function(){return Kt},geoHealpix:function(){return zn},geoHealpixRaw:function(){return nn},geoHill:function(){return Xn},geoHillRaw:function(){return Fn},geoHomolosine:function(){return mr},geoHomolosineRaw:function(){return ur},geoHufnagel:function(){return rr},geoHufnagelRaw:function(){return hr},geoHyperelliptical:function(){return aa},geoHyperellipticalRaw:function(){return Or},geoInterrupt:function(){return ta},geoInterruptedBoggs:function(){return Pr},geoInterruptedHomolosine:function(){return oi},geoInterruptedMollweide:function(){return lo},geoInterruptedMollweideHemispheres:function(){return Zi},geoInterruptedQuarticAuthalic:function(){return wl},geoInterruptedSinuMollweide:function(){return Xi},geoInterruptedSinusoidal:function(){return qo},geoKavrayskiy7:function(){return Si},geoKavrayskiy7Raw:function(){return Mi},geoLagrange:function(){return pa},geoLagrangeRaw:function(){return Ki},geoLarrivee:function(){return Ji},geoLarriveeRaw:function(){return co},geoLaskowski:function(){return Ao},geoLaskowskiRaw:function(){return Ri},geoLittrow:function(){return Mo},geoLittrowRaw:function(){return $i},geoLoximuthal:function(){return So},geoLoximuthalRaw:function(){return fo},geoMiller:function(){return Ks},geoMillerRaw:function(){return Qi},geoModifiedStereographic:function(){return Yo},geoModifiedStereographicAlaska:function(){return xl},geoModifiedStereographicGs48:function(){return bl},geoModifiedStereographicGs50:function(){return Wo},geoModifiedStereographicLee:function(){return as},geoModifiedStereographicMiller:function(){return eo},geoModifiedStereographicRaw:function(){return Bs},geoMollweide:function(){return ie},geoMollweideRaw:function(){return se},geoMtFlatPolarParabolic:function(){return Js},geoMtFlatPolarParabolicRaw:function(){return Fi},geoMtFlatPolarQuartic:function(){return ho},geoMtFlatPolarQuarticRaw:function(){return Eo},geoMtFlatPolarSinusoidal:function(){return Lo},geoMtFlatPolarSinusoidalRaw:function(){return po},geoNaturalEarth:function(){return Ur.c},geoNaturalEarth2:function(){return _l},geoNaturalEarth2Raw:function(){return is},geoNaturalEarthRaw:function(){return Ur.g},geoNellHammer:function(){return os},geoNellHammerRaw:function(){return Ns},geoNicolosi:function(){return Tl},geoNicolosiRaw:function(){return js},geoPatterson:function(){return cl},geoPattersonRaw:function(){return Vs},geoPeirceQuincuncial:function(){return es},geoPierceQuincuncial:function(){return es},geoPolyconic:function(){return Ko},geoPolyconicRaw:function(){return ls},geoPolyhedral:function(){return $r},geoPolyhedralButterfly:function(){return cs},geoPolyhedralCollignon:function(){return ks},geoPolyhedralWaterman:function(){return As},geoProject:function(){return Ms},geoQuantize:function(){return vo},geoQuincuncial:function(){return Do},geoRectangularPolyconic:function(){return Pi},geoRectangularPolyconicRaw:function(){return Ci},geoRobinson:function(){return wr},geoRobinsonRaw:function(){return Ui},geoSatellite:function(){return $s},geoSatelliteRaw:function(){return Ss},geoSinuMollweide:function(){return Zn},geoSinuMollweideRaw:function(){return Jn},geoSinusoidal:function(){return De},geoSinusoidalRaw:function(){return Oe},geoStitch:function(){return Ha},geoTimes:function(){return ro},geoTimesRaw:function(){return li},geoTwoPointAzimuthal:function(){return ci},geoTwoPointAzimuthalRaw:function(){return hs},geoTwoPointAzimuthalUsa:function(){return ps},geoTwoPointEquidistant:function(){return ns},geoTwoPointEquidistantRaw:function(){return Vr},geoTwoPointEquidistantUsa:function(){return ao},geoVanDerGrinten:function(){return ds},geoVanDerGrinten2:function(){return Hi},geoVanDerGrinten2Raw:function(){return gs},geoVanDerGrinten3:function(){return rs},geoVanDerGrinten3Raw:function(){return la},geoVanDerGrinten4:function(){return Cr},geoVanDerGrinten4Raw:function(){return kr},geoVanDerGrintenRaw:function(){return qi},geoWagner:function(){return io},geoWagner4:function(){return fl},geoWagner4Raw:function(){return Qr},geoWagner6:function(){return na},geoWagner6Raw:function(){return Ti},geoWagner7:function(){return xo},geoWagnerRaw:function(){return wi},geoWiechel:function(){return gi},geoWiechelRaw:function(){return da},geoWinkel3:function(){return Qs},geoWinkel3Raw:function(){return No}});var M=e(87952),k=Math.abs,o=Math.atan,T=Math.atan2,b=Math.cos,h=Math.exp,s=Math.floor,t=Math.log,a=Math.max,n=Math.min,r=Math.pow,i=Math.round,l=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},u=Math.sin,p=Math.tan,c=1e-6,x=1e-12,d=Math.PI,g=d/2,v=d/4,y=Math.SQRT1_2,m=C(2),_=C(d),f=2*d,S=180/d,w=d/180;function E(Xe){return Xe>1?g:Xe<-1?-g:Math.asin(Xe)}function O(Xe){return Xe>1?0:Xe<-1?d:Math.acos(Xe)}function C(Xe){return Xe>0?Math.sqrt(Xe):0}function P(Xe){return(h(Xe)-h(-Xe))/2}function R(Xe){return(h(Xe)+h(-Xe))/2}function j(Xe){var Je=p(Xe/2),ot=2*t(b(Xe/2))/(Je*Je);function B(G,H){var L=b(G),q=b(H),$=u(H),ne=q*L,ue=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+ot/(1+ne));return[ue*q*u(G),ue*$]}return B.invert=function(G,H){var L,q=C(G*G+H*H),$=-Xe/2,ne=50;if(!q)return[0,0];do{var ue=$/2,ye=b(ue),Le=u(ue),Ie=Le/ye,Ue=-t(k(ye));$-=L=(2/Ie*Ue-ot*Ie-q)/(-Ue/(Le*Le)+1-ot/(2*ye*ye))*(ye<0?.7:1)}while(k(L)>c&&--ne>0);var qe=u($);return[T(G*qe,q*b($)),E(H*qe/q)]},B}function D(){var Xe=g,Je=(0,M.U)(j),ot=Je(Xe);return ot.radius=function(B){return arguments.length?Je(Xe=B*w):Xe*S},ot.scale(179.976).clipAngle(147)}function N(Xe,Je){var ot=b(Je),B=function(G){return G?G/Math.sin(G):1}(O(ot*b(Xe/=2)));return[2*ot*u(Xe)*B,u(Je)*B]}function W(){return(0,M.c)(N).scale(152.63)}function F(Xe){var Je=u(Xe),ot=b(Xe),B=Xe>=0?1:-1,G=p(B*Xe),H=(1+Je-ot)/2;function L(q,$){var ne=b($),ue=b(q/=2);return[(1+ne)*u(q),(B*$>-T(ue,G)-.001?0:10*-B)+H+u($)*ot-(1+ne)*Je*ue]}return L.invert=function(q,$){var ne=0,ue=0,ye=50;do{var Le=b(ne),Ie=u(ne),Ue=b(ue),qe=u(ue),Qe=1+Ue,lt=Qe*Ie-q,ft=H+qe*ot-Qe*Je*Le-$,xt=Qe*Le/2,St=-Ie*qe,Tt=Je*Qe*Ie/2,zt=ot*Ue+Je*Le*qe,Et=St*Tt-zt*xt,Yt=(ft*St-lt*zt)/Et/2,qt=(lt*Tt-ft*xt)/Et;k(qt)>2&&(qt/=2),ne-=Yt,ue-=qt}while((k(Yt)>c||k(qt)>c)&&--ye>0);return B*ue>-T(b(ne),G)-.001?[2*ne,ue]:null},L}function V(){var Xe=20*w,Je=Xe>=0?1:-1,ot=p(Je*Xe),B=(0,M.U)(F),G=B(Xe),H=G.stream;return G.parallel=function(L){return arguments.length?(ot=p((Je=(Xe=L*w)>=0?1:-1)*Xe),B(Xe)):Xe*S},G.stream=function(L){var q=G.rotate(),$=H(L),ne=(G.rotate([0,0]),H(L)),ue=G.precision();return G.rotate(q),$.sphere=function(){ne.polygonStart(),ne.lineStart();for(var ye=-180*Je;Je*ye<180;ye+=90*Je)ne.point(ye,90*Je);if(Xe)for(;Je*(ye-=3*Je*ue)>=-180;)ne.point(ye,Je*-T(b(ye*w/2),ot)*S);ne.lineEnd(),ne.polygonEnd()},$},G.scale(218.695).center([0,28.0974])}function U(Xe,Je){var ot=p(Je/2),B=C(1-ot*ot),G=1+B*b(Xe/=2),H=u(Xe)*B/G,L=ot/G,q=H*H,$=L*L;return[1.3333333333333333*H*(3+q-3*$),1.3333333333333333*L*(3+3*q-$)]}function te(){return(0,M.c)(U).scale(66.1603)}N.invert=function(Xe,Je){if(!(Xe*Xe+4*Je*Je>d*d+c)){var ot=Xe,B=Je,G=25;do{var H,L=u(ot),q=u(ot/2),$=b(ot/2),ne=u(B),ue=b(B),ye=u(2*B),Le=ne*ne,Ie=ue*ue,Ue=q*q,qe=1-Ie*$*$,Qe=qe?O(ue*$)*C(H=1/qe):H=0,lt=2*Qe*ue*q-Xe,ft=Qe*ne-Je,xt=H*(Ie*Ue+Qe*ue*$*Le),St=H*(.5*L*ye-2*Qe*ne*q),Tt=.25*H*(ye*q-Qe*ne*Ie*L),zt=H*(Le*$+Qe*Ue*ue),Et=St*Tt-zt*xt;if(!Et)break;var Yt=(ft*St-lt*zt)/Et,qt=(lt*Tt-ft*xt)/Et;ot-=Yt,B-=qt}while((k(Yt)>c||k(qt)>c)&&--G>0);return[ot,B]}},U.invert=function(Xe,Je){if(Je*=.375,!(Xe*=.375)&&k(Je)>1)return null;var ot=1+Xe*Xe+Je*Je,B=C((ot-C(ot*ot-4*Je*Je))/2),G=E(B)/3,H=B?function(ne){return t(ne+C(ne*ne-1))}(k(Je/B))/3:function(ne){return t(ne+C(ne*ne+1))}(k(Xe))/3,L=b(G),q=R(H),$=q*q-L*L;return[2*l(Xe)*T(P(H)*L,.25-$),2*l(Je)*T(q*u(G),.25+$)]};var J=C(8),X=t(1+m);function K(Xe,Je){var ot=k(Je);return ot<v?[Xe,t(p(v+Je/2))]:[Xe*b(ot)*(2*m-1/u(ot)),l(Je)*(2*m*(ot-v)-t(p(ot/2)))]}function Q(){return(0,M.c)(K).scale(112.314)}K.invert=function(Xe,Je){if((B=k(Je))<X)return[Xe,2*o(h(Je))-g];var ot,B,G=v,H=25;do{var L=b(G/2),q=p(G/2);G-=ot=(J*(G-v)-t(q)-B)/(J-L*L/(2*q))}while(k(ot)>x&&--H>0);return[Xe/(b(G)*(J-1/u(G))),l(Je)*G]};var Z=e(69020);function re(Xe){var Je=2*d/Xe;function ot(B,G){var H=(0,Z.O)(B,G);if(k(B)>g){var L=T(H[1],H[0]),q=C(H[0]*H[0]+H[1]*H[1]),$=Je*i((L-g)/Je)+g,ne=T(u(L-=$),2-b(L));L=$+E(d/q*u(ne))-ne,H[0]=q*b(L),H[1]=q*u(L)}return H}return ot.invert=function(B,G){var H=C(B*B+G*G);if(H>g){var L=T(G,B),q=Je*i((L-g)/Je)+g,$=L>q?-1:1,ne=H*b(q-L),ue=1/p($*O((ne-d)/C(d*(d-2*ne)+H*H)));L=q+2*o((ue+$*C(ue*ue-3))/3),B=H*b(L),G=H*u(L)}return Z.O.invert(B,G)},ot}function oe(){var Xe=5,Je=(0,M.U)(re),ot=Je(Xe),B=ot.stream,G=.01,H=-b(G*w),L=u(G*w);return ot.lobes=function(q){return arguments.length?Je(Xe=+q):Xe},ot.stream=function(q){var $=ot.rotate(),ne=B(q),ue=(ot.rotate([0,0]),B(q));return ot.rotate($),ne.sphere=function(){ue.polygonStart(),ue.lineStart();for(var ye=0,Le=360/Xe,Ie=2*d/Xe,Ue=90-180/Xe,qe=g;ye<Xe;++ye,Ue-=Le,qe-=Ie)ue.point(T(L*b(qe),H)*S,E(L*u(qe))*S),Ue<-90?(ue.point(-90,-180-Ue-G),ue.point(-90,-180-Ue+G)):(ue.point(90,Ue+G),ue.point(90,Ue-G));ue.lineEnd(),ue.polygonEnd()},ne},ot.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=e(54724);function ce(Xe,Je){if(arguments.length<2&&(Je=Xe),Je===1)return ae.y;if(Je===1/0)return he;function ot(B,G){var H=(0,ae.y)(B/Je,G);return H[0]*=Xe,H}return ot.invert=function(B,G){var H=ae.y.invert(B/Xe,G);return H[0]*=Je,H},ot}function he(Xe,Je){return[Xe*b(Je)/b(Je/=2),2*u(Je)]}function pe(){var Xe=2,Je=(0,M.U)(ce),ot=Je(Xe);return ot.coefficient=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(169.529)}function xe(Xe,Je,ot){var B,G,H,L=100;ot=ot===void 0?0:+ot,Je=+Je;do(G=Xe(ot))===(H=Xe(ot+c))&&(H=G+c),ot-=B=-1*c*(G-Je)/(G-H);while(L-- >0&&k(B)>c);return L<0?NaN:ot}function be(Xe,Je,ot){return Je===void 0&&(Je=40),ot===void 0&&(ot=x),function(B,G,H,L){var q,$,ne;H=H===void 0?0:+H,L=L===void 0?0:+L;for(var ue=0;ue<Je;ue++){var ye=Xe(H,L),Le=ye[0]-B,Ie=ye[1]-G;if(k(Le)<ot&&k(Ie)<ot)break;var Ue=Le*Le+Ie*Ie;if(Ue>q)H-=$/=2,L-=ne/=2;else{q=Ue;var qe=(H>0?-1:1)*ot,Qe=(L>0?-1:1)*ot,lt=Xe(H+qe,L),ft=Xe(H,L+Qe),xt=(lt[0]-ye[0])/qe,St=(lt[1]-ye[1])/qe,Tt=(ft[0]-ye[0])/Qe,zt=(ft[1]-ye[1])/Qe,Et=zt*xt-St*Tt,Yt=(k(Et)<.5?.5:1)/Et;if(H+=$=(Ie*Tt-Le*zt)*Yt,L+=ne=(Le*St-Ie*xt)*Yt,k($)<ot&&k(ne)<ot)break}}return[H,L]}}function ve(){var Xe=ce(1.68,2);function Je(ot,B){if(ot+B<-1.4){var G=(ot-B+1.6)*(ot+B+1.4)/8;ot+=G,B-=.8*G*u(B+d/2)}var H=Xe(ot,B),L=(1-b(ot*B))/12;return H[1]<0&&(H[0]*=1+L),H[1]>0&&(H[1]*=1+L/1.5*H[0]*H[0]),H}return Je.invert=be(Je),Je}function ge(){return(0,M.c)(ve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function we(Xe,Je){var ot,B=Xe*u(Je),G=30;do Je-=ot=(Je+u(Je)-B)/(1+b(Je));while(k(ot)>c&&--G>0);return Je/2}function _e(Xe,Je,ot){function B(G,H){return[Xe*G*b(H=we(ot,H)),Je*u(H)]}return B.invert=function(G,H){return H=E(H/Je),[G/(Xe*b(H)),E((2*H+u(2*H))/ot)]},B}he.invert=function(Xe,Je){var ot=2*E(Je/2);return[Xe*b(ot/2)/b(ot),ot]};var se=_e(m/g,m,d);function ie(){return(0,M.c)(se).scale(169.529)}var fe=2.00276,Ee=1.11072;function Te(Xe,Je){var ot=we(d,Je);return[fe*Xe/(1/b(Je)+Ee/b(ot)),(Je+m*u(ot))/fe]}function Ae(){return(0,M.c)(Te).scale(160.857)}function Se(Xe){var Je=0,ot=(0,M.U)(Xe),B=ot(Je);return B.parallel=function(G){return arguments.length?ot(Je=G*w):Je*S},B}function Oe(Xe,Je){return[Xe*b(Je),Je]}function De(){return(0,M.c)(Oe).scale(152.63)}function de(Xe){if(!Xe)return Oe;var Je=1/p(Xe);function ot(B,G){var H=Je+Xe-G,L=H&&B*b(G)/H;return[H*u(L),Je-H*b(L)]}return ot.invert=function(B,G){var H=C(B*B+(G=Je-G)*G),L=Je+Xe-H;return[H/b(L)*T(B,G),L]},ot}function me(){return Se(de).scale(123.082).center([0,26.1441]).parallel(45)}function Me(Xe){function Je(ot,B){var G=g-B,H=G&&ot*Xe*u(G)/G;return[G*u(H)/Xe,g-G*b(H)]}return Je.invert=function(ot,B){var G=ot*Xe,H=g-B,L=C(G*G+H*H),q=T(G,H);return[(L?L/u(L):1)*q/Xe,g-L]},Je}function ze(){var Xe=.5,Je=(0,M.U)(Me),ot=Je(Xe);return ot.fraction=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(158.837)}Te.invert=function(Xe,Je){var ot,B,G=fe*Je,H=Je<0?-v:v,L=25;do B=G-m*u(H),H-=ot=(u(2*H)+2*H-d*u(B))/(2*b(2*H)+2+d*b(B)*m*b(H));while(k(ot)>c&&--L>0);return B=G-m*u(H),[Xe*(1/b(B)+Ee/b(H))/fe,B]},Oe.invert=function(Xe,Je){return[Xe/b(Je),Je]};var Pe=_e(1,4/d,d);function Ne(){return(0,M.c)(Pe).scale(152.63)}var Ve=e(24052),Ye=e(92992);function at(Xe,Je,ot,B,G,H){var L,q=b(H);if(k(Xe)>1||k(H)>1)L=O(ot*G+Je*B*q);else{var $=u(Xe/2),ne=u(H/2);L=2*E(C($*$+Je*B*ne*ne))}return k(L)>c?[L,T(B*u(H),Je*G-ot*B*q)]:[0,0]}function rt(Xe,Je,ot){return O((Xe*Xe+Je*Je-ot*ot)/(2*Xe*Je))}function dt(Xe){return Xe-2*d*s((Xe+d)/(2*d))}function vt(Xe,Je,ot){for(var B,G=[[Xe[0],Xe[1],u(Xe[1]),b(Xe[1])],[Je[0],Je[1],u(Je[1]),b(Je[1])],[ot[0],ot[1],u(ot[1]),b(ot[1])]],H=G[2],L=0;L<3;++L,H=B)B=G[L],H.v=at(B[1]-H[1],H[3],H[2],B[3],B[2],B[0]-H[0]),H.point=[0,0];var q=rt(G[0].v[0],G[2].v[0],G[1].v[0]),$=rt(G[0].v[0],G[1].v[0],G[2].v[0]),ne=d-q;G[2].point[1]=0,G[0].point[0]=-(G[1].point[0]=G[0].v[0]/2);var ue=[G[2].point[0]=G[0].point[0]+G[2].v[0]*b(q),2*(G[0].point[1]=G[1].point[1]=G[2].v[0]*u(q))];return function(ye,Le){var Ie,Ue=u(Le),qe=b(Le),Qe=new Array(3);for(Ie=0;Ie<3;++Ie){var lt=G[Ie];if(Qe[Ie]=at(Le-lt[1],lt[3],lt[2],qe,Ue,ye-lt[0]),!Qe[Ie][0])return lt.point;Qe[Ie][1]=dt(Qe[Ie][1]-lt.v[1])}var ft=ue.slice();for(Ie=0;Ie<3;++Ie){var xt=Ie==2?0:Ie+1,St=rt(G[Ie].v[0],Qe[Ie][0],Qe[xt][0]);Qe[Ie][1]<0&&(St=-St),Ie?Ie==1?(St=$-St,ft[0]-=Qe[Ie][0]*b(St),ft[1]-=Qe[Ie][0]*u(St)):(St=ne-St,ft[0]+=Qe[Ie][0]*b(St),ft[1]+=Qe[Ie][0]*u(St)):(ft[0]+=Qe[Ie][0]*b(St),ft[1]-=Qe[Ie][0]*u(St))}return ft[0]/=3,ft[1]/=3,ft}}function ht(Xe){return Xe[0]*=w,Xe[1]*=w,Xe}function et(){return $e([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function $e(Xe,Je,ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:[Xe,Je,ot]}),G=[-B[0],-B[1]],H=(0,Ye.c)(G),L=vt(ht(H(Xe)),ht(H(Je)),ht(H(ot)));L.invert=be(L);var q=(0,M.c)(L).rotate(G),$=q.center;return delete q.rotate,q.center=function(ne){return arguments.length?$(H(ne)):H.invert($())},q.clipAngle(90)}function wt(Xe,Je){var ot=C(1-u(Je));return[2/_*Xe*ot,_*(1-ot)]}function Pt(){return(0,M.c)(wt).scale(95.6464).center([0,30])}function Ot(Xe){var Je=p(Xe);function ot(B,G){return[B,(B?B/u(B):1)*(u(G)*b(B)-Je*b(G))]}return ot.invert=Je?function(B,G){B&&(G*=u(B)/B);var H=b(B);return[B,2*T(C(H*H+Je*Je-G*G)-H,Je-G)]}:function(B,G){return[B,E(B?G*p(B)/B:G)]},ot}function At(){return Se(Ot).scale(249.828).clipAngle(90)}wt.invert=function(Xe,Je){var ot=(ot=Je/_-1)*ot;return[ot>0?Xe*C(d/ot)/2:0,E(1-ot)]};var He=C(3);function Ze(Xe,Je){return[He*Xe*(2*b(2*Je/3)-1)/_,He*_*u(Je/3)]}function Be(){return(0,M.c)(Ze).scale(156.19)}function Ge(Xe){var Je=b(Xe);function ot(B,G){return[B*Je,u(G)/Je]}return ot.invert=function(B,G){return[B/Je,E(G*Je)]},ot}function it(){return Se(Ge).parallel(38.58).scale(195.044)}function tt(Xe){var Je=b(Xe);function ot(B,G){return[B*Je,(1+Je)*p(G/2)]}return ot.invert=function(B,G){return[B/Je,2*o(G/(1+Je))]},ot}function Re(){return Se(tt).scale(124.75)}function Fe(Xe,Je){var ot=C(8/(3*d));return[ot*Xe*(1-k(Je)/d),ot*Je]}function nt(){return(0,M.c)(Fe).scale(165.664)}function We(Xe,Je){var ot=C(4-3*u(k(Je)));return[2/C(6*d)*Xe*ot,l(Je)*C(2*d/3)*(2-ot)]}function ct(){return(0,M.c)(We).scale(165.664)}function pt(Xe,Je){var ot=C(d*(4+d));return[2/ot*Xe*(1+C(1-4*Je*Je/(d*d))),4/ot*Je]}function gt(){return(0,M.c)(pt).scale(180.739)}function ut(Xe,Je){var ot=(2+g)*u(Je);Je/=2;for(var B=0,G=1/0;B<10&&k(G)>c;B++){var H=b(Je);Je-=G=(Je+u(Je)*(H+2)-ot)/(2*H*(1+H))}return[2/C(d*(4+d))*Xe*(1+b(Je)),2*C(d/(4+d))*u(Je)]}function kt(){return(0,M.c)(ut).scale(180.739)}function yt(Xe,Je){return[Xe*(1+b(Je))/C(2+d),2*Je/C(2+d)]}function Mt(){return(0,M.c)(yt).scale(173.044)}function Lt(Xe,Je){for(var ot=(1+g)*u(Je),B=0,G=1/0;B<10&&k(G)>c;B++)Je-=G=(Je+u(Je)-ot)/(1+b(Je));return ot=C(2+d),[Xe*(1+b(Je))/ot,2*Je/ot]}function Ct(){return(0,M.c)(Lt).scale(173.044)}Ze.invert=function(Xe,Je){var ot=3*E(Je/(He*_));return[_*Xe/(He*(2*b(2*ot/3)-1)),ot]},Fe.invert=function(Xe,Je){var ot=C(8/(3*d)),B=Je/ot;return[Xe/(ot*(1-k(B)/d)),B]},We.invert=function(Xe,Je){var ot=2-k(Je)/C(2*d/3);return[Xe*C(6*d)/(2*ot),l(Je)*E((4-ot*ot)/3)]},pt.invert=function(Xe,Je){var ot=C(d*(4+d))/2;return[Xe*ot/(1+C(1-Je*Je*(4+d)/(4*d))),Je*ot/2]},ut.invert=function(Xe,Je){var ot=Je*C((4+d)/d)/2,B=E(ot),G=b(B);return[Xe/(2/C(d*(4+d))*(1+G)),E((B+ot*(G+2))/(2+g))]},yt.invert=function(Xe,Je){var ot=C(2+d),B=Je*ot/2;return[ot*Xe/(1+b(B)),B]},Lt.invert=function(Xe,Je){var ot=1+g,B=C(ot/2);return[2*Xe*B/(1+b(Je*=B)),E((Je+u(Je))/ot)]};var It=3+2*m;function Wt(Xe,Je){var ot=u(Xe/=2),B=b(Xe),G=C(b(Je)),H=b(Je/=2),L=u(Je)/(H+m*B*G),q=C(2/(1+L*L)),$=C((m*H+(B+ot)*G)/(m*H+(B-ot)*G));return[It*(q*($-1/$)-2*t($)),It*(q*L*($+1/$)-2*o(L))]}function Nt(){return(0,M.c)(Wt).scale(62.5271)}Wt.invert=function(Xe,Je){if(!(ot=U.invert(Xe/1.2,1.065*Je)))return null;var ot,B=ot[0],G=ot[1],H=20;Xe/=It,Je/=It;do{var L=B/2,q=G/2,$=u(L),ne=b(L),ue=u(q),ye=b(q),Le=b(G),Ie=C(Le),Ue=ue/(ye+m*ne*Ie),qe=Ue*Ue,Qe=C(2/(1+qe)),lt=(m*ye+(ne+$)*Ie)/(m*ye+(ne-$)*Ie),ft=C(lt),xt=ft-1/ft,St=ft+1/ft,Tt=Qe*xt-2*t(ft)-Xe,zt=Qe*Ue*St-2*o(Ue)-Je,Et=ue&&y*Ie*$*qe/ue,Yt=(m*ne*ye+Ie)/(2*(ye+m*ne*Ie)*(ye+m*ne*Ie)*Ie),qt=-.5*Ue*Qe*Qe*Qe,Ft=qt*Et,fn=qt*Yt,dn=(dn=2*ye+m*Ie*(ne-$))*dn*ft,kn=(m*ne*ye*Ie+Le)/dn,Sn=-m*$*ue/(Ie*dn),Bn=xt*Ft-2*kn/ft+Qe*(kn+kn/lt),$n=xt*fn-2*Sn/ft+Qe*(Sn+Sn/lt),sr=Ue*St*Ft-2*Et/(1+qe)+Qe*St*Et+Qe*Ue*(kn-kn/lt),qn=Ue*St*fn-2*Yt/(1+qe)+Qe*St*Yt+Qe*Ue*(Sn-Sn/lt),ir=$n*sr-qn*Bn;if(!ir)break;var vr=(zt*$n-Tt*qn)/ir,Ar=(Tt*sr-zt*Bn)/ir;B-=vr,G=a(-g,n(g,G-Ar))}while((k(vr)>c||k(Ar)>c)&&--H>0);return k(k(G)-g)<c?[0,G]:H&&[B,G]};var Bt=b(35*w);function Ht(Xe,Je){var ot=p(Je/2);return[Xe*Bt*C(1-ot*ot),(1+Bt)*ot]}function Qt(){return(0,M.c)(Ht).scale(137.152)}function Cn(Xe,Je){var ot=Je/2,B=b(ot);return[2*Xe/_*b(Je)*B*B,_*p(ot)]}function Tn(){return(0,M.c)(Cn).scale(135.264)}function hn(Xe){var Je=1-Xe,ot=G(d,0)[0]-G(-d,0)[0],B=C(2*(G(0,g)[1]-G(0,-g)[1])/ot);function G(q,$){var ne=b($),ue=u($);return[ne/(Je+Xe*ne)*q,Je*$+Xe*ue]}function H(q,$){var ne=G(q,$);return[ne[0]*B,ne[1]/B]}function L(q){return H(0,q)[1]}return H.invert=function(q,$){var ne=xe(L,$);return[q/B*(Xe+Je/b(ne)),ne]},H}function Zt(){var Xe=.5,Je=(0,M.U)(hn),ot=Je(Xe);return ot.alpha=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(168.725)}Ht.invert=function(Xe,Je){var ot=Je/(1+Bt);return[Xe&&Xe/(Bt*C(1-ot*ot)),2*o(ot)]},Cn.invert=function(Xe,Je){var ot=o(Je/_),B=b(ot),G=2*ot;return[Xe*_/2/(b(G)*B*B),G]};var an=e(4888),$t=e(69604);function ln(Xe){return[Xe[0]/2,E(p(Xe[1]/2*w))*S]}function mn(Xe){return[2*Xe[0],2*o(u(Xe[1]*w))*S]}function xn(Xe){Xe==null&&(Xe=an.c);var Je=Xe(),ot=(0,$t.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function B(H){return Je(ln(H))}function G(H){B[H]=function(){return arguments.length?(Je[H].apply(Je,arguments),B):Je[H]()}}return Je.invert&&(B.invert=function(H){return mn(Je.invert(H))}),B.stream=function(H){var L=Je.stream(H),q=ot.stream({point:function($,ne){L.point($/2,E(p(-ne/2*w))*S)},lineStart:function(){L.lineStart()},lineEnd:function(){L.lineEnd()},polygonStart:function(){L.polygonStart()},polygonEnd:function(){L.polygonEnd()}});return q.sphere=L.sphere,q},B.rotate=function(H){return arguments.length?(ot.rotate(H),B):ot.rotate()},B.center=function(H){return arguments.length?(Je.center(ln(H)),B):mn(Je.center())},G("angle"),G("clipAngle"),G("clipExtent"),G("fitExtent"),G("fitHeight"),G("fitSize"),G("fitWidth"),G("scale"),G("translate"),G("precision"),B.scale(249.5)}function Pn(Xe,Je){var ot=2*d/Je,B=Xe*Xe;function G(H,L){var q=(0,Z.O)(H,L),$=q[0],ne=q[1],ue=$*$+ne*ne;if(ue>B){var ye=C(ue),Le=T(ne,$),Ie=ot*i(Le/ot),Ue=Le-Ie,qe=Xe*b(Ue),Qe=(Xe*u(Ue)-Ue*u(qe))/(g-qe),lt=Mn(Ue,Qe),ft=(d-Xe)/_n(lt,qe,d);$=ye;var xt,St=50;do $-=xt=(Xe+_n(lt,qe,$)*ft-ye)/(lt($)*ft);while(k(xt)>c&&--St>0);ne=Ue*u($),$<g&&(ne-=Qe*($-g));var Tt=u(Ie),zt=b(Ie);q[0]=$*zt-ne*Tt,q[1]=$*Tt+ne*zt}return q}return G.invert=function(H,L){var q=H*H+L*L;if(q>B){var $=C(q),ne=T(L,H),ue=ot*i(ne/ot),ye=ne-ue;H=$*b(ye),L=$*u(ye);for(var Le=H-g,Ie=u(H),Ue=L/Ie,qe=H<g?1/0:0,Qe=10;;){var lt=Xe*u(Ue),ft=Xe*b(Ue),xt=u(ft),St=g-ft,Tt=(lt-Ue*xt)/St,zt=Mn(Ue,Tt);if(k(qe)<x||!--Qe)break;Ue-=qe=(Ue*Ie-Tt*Le-L)/(Ie-2*Le*(St*(ft+Ue*lt*b(ft)-xt)-lt*(lt-Ue*xt))/(St*St))}H=($=Xe+_n(zt,ft,H)*(d-Xe)/_n(zt,ft,d))*b(ne=ue+Ue),L=$*u(ne)}return Z.O.invert(H,L)},G}function Mn(Xe,Je){return function(ot){var B=Xe*b(ot);return ot<g&&(B-=Je),C(1+B*B)}}function _n(Xe,Je,ot){for(var B=(ot-Je)/50,G=Xe(Je)+Xe(ot),H=1,L=Je;H<50;++H)G+=2*Xe(L+=B);return .5*G*B}function Rn(){var Xe=6,Je=30*w,ot=b(Je),B=u(Je),G=(0,M.U)(Pn),H=G(Je,Xe),L=H.stream,q=-b(.01*w),$=u(.01*w);return H.radius=function(ne){return arguments.length?(ot=b(Je=ne*w),B=u(Je),G(Je,Xe)):Je*S},H.lobes=function(ne){return arguments.length?G(Je,Xe=+ne):Xe},H.stream=function(ne){var ue=H.rotate(),ye=L(ne),Le=(H.rotate([0,0]),L(ne));return H.rotate(ue),ye.sphere=function(){Le.polygonStart(),Le.lineStart();for(var Ie=0,Ue=2*d/Xe,qe=0;Ie<Xe;++Ie,qe-=Ue)Le.point(T($*b(qe),q)*S,E($*u(qe))*S),Le.point(T(B*b(qe-Ue/2),ot)*S,E(B*u(qe-Ue/2))*S);Le.lineEnd(),Le.polygonEnd()},ye},H.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function In(Xe,Je,ot,B,G,H,L,q){function $(ne,ue){if(!ue)return[Xe*ne/d,0];var ye=ue*ue,Le=Xe+ye*(Je+ye*(ot+ye*B)),Ie=ue*(G-1+ye*(H-q+ye*L)),Ue=(Le*Le+Ie*Ie)/(2*Ie),qe=ne*E(Le/Ue)/d;return[Ue*u(qe),ue*(1+ye*q)+Ue*(1-b(qe))]}return arguments.length<8&&(q=0),$.invert=function(ne,ue){var ye,Le,Ie=d*ne/Xe,Ue=ue,qe=50;do{var Qe=Ue*Ue,lt=Xe+Qe*(Je+Qe*(ot+Qe*B)),ft=Ue*(G-1+Qe*(H-q+Qe*L)),xt=lt*lt+ft*ft,St=2*ft,Tt=xt/St,zt=Tt*Tt,Et=E(lt/Tt)/d,Yt=Ie*Et,qt=lt*lt,Ft=(2*Je+Qe*(4*ot+6*Qe*B))*Ue,fn=G+Qe*(3*H+5*Qe*L),dn=(2*(lt*Ft+ft*(fn-1))*St-xt*(2*(fn-1)))/(St*St),kn=b(Yt),Sn=u(Yt),Bn=Tt*kn,$n=Tt*Sn,sr=Ie/d*(1/C(1-qt/zt))*(Ft*Tt-lt*dn)/zt,qn=$n-ne,ir=Ue*(1+Qe*q)+Tt-Bn-ue,vr=dn*Sn+Bn*sr,Ar=Bn*Et,Kn=1+dn-(dn*kn-$n*sr),ar=$n*Et,br=vr*ar-Kn*Ar;if(!br)break;Ie-=ye=(ir*vr-qn*Kn)/br,Ue-=Le=(qn*ar-ir*Ar)/br}while((k(ye)>c||k(Le)>c)&&--qe>0);return[Ie,Ue]},$}var Vn=In(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function tr(){return(0,M.c)(Vn).scale(149.995)}var er=In(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Wn(){return(0,M.c)(er).scale(153.93)}var or=In(5/6*d,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Jt(){return(0,M.c)(or).scale(130.945)}function en(Xe,Je){var ot=Xe*Xe,B=Je*Je;return[Xe*(1-.162388*B)*(.87-952426e-9*ot*ot),Je*(1+B/12)]}function En(){return(0,M.c)(en).scale(131.747)}en.invert=function(Xe,Je){var ot,B=Xe,G=Je,H=50;do{var L=G*G;G-=ot=(G*(1+L/12)-Je)/(1+L/4)}while(k(ot)>c&&--H>0);H=50,Xe/=1-.162388*L;do{var q=(q=B*B)*q;B-=ot=(B*(.87-952426e-9*q)-Xe)/(.87-.00476213*q)}while(k(ot)>c&&--H>0);return[B,G]};var gn=In(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ln(){return(0,M.c)(gn).scale(131.087)}function Hn(Xe){var Je=Xe(g,0)[0]-Xe(-g,0)[0];function ot(B,G){var H=B>0?-.5:.5,L=Xe(B+H*d,G);return L[0]-=H*Je,L}return Xe.invert&&(ot.invert=function(B,G){var H=B>0?-.5:.5,L=Xe.invert(B+H*Je,G),q=L[0]-H*d;return q<-d?q+=2*d:q>d&&(q-=2*d),L[0]=q,L}),ot}function Nn(Xe,Je){var ot=l(Xe),B=l(Je),G=b(Je),H=b(Xe)*G,L=u(Xe)*G,q=u(B*Je);Xe=k(T(L,q)),Je=E(H),k(Xe-g)>c&&(Xe%=g);var $=function(ne,ue){if(ue===g)return[0,0];var ye,Le,Ie=u(ue),Ue=Ie*Ie,qe=Ue*Ue,Qe=1+qe,lt=1+3*qe,ft=1-qe,xt=E(1/C(Qe)),St=ft+Ue*Qe*xt,Tt=(1-Ie)/St,zt=C(Tt),Et=Tt*Qe,Yt=C(Et),qt=zt*ft;if(ne===0)return[0,-(qt+Ue*Yt)];var Ft,fn=b(ue),dn=1/fn,kn=2*Ie*fn,Sn=(-St*fn-(1-Ie)*((-3*Ue+xt*lt)*kn))/(St*St),Bn=-dn*kn,$n=-dn*(Ue*Qe*Sn+Tt*lt*kn),sr=-2*dn*(ft*(.5*Sn/zt)-2*Ue*zt*kn),qn=4*ne/d;if(ne>.222*d||ue<d/4&&ne>.175*d){if(ye=(qt+Ue*C(Et*(1+qe)-qt*qt))/(1+qe),ne>d/4)return[ye,ye];var ir=ye,vr=.5*ye;ye=.5*(vr+ir),Le=50;do{var Ar=ye*(sr+Bn*C(Et-ye*ye))+$n*E(ye/Yt)-qn;if(!Ar)break;Ar<0?vr=ye:ir=ye,ye=.5*(vr+ir)}while(k(ir-vr)>c&&--Le>0)}else{ye=c,Le=25;do{var Kn=ye*ye,ar=C(Et-Kn),br=sr+Bn*ar,lr=ye*br+$n*E(ye/Yt)-qn;ye-=Ft=ar?lr/(br+($n-Bn*Kn)/ar):0}while(k(Ft)>c&&--Le>0)}return[ye,-qt-Ue*C(Et-ye*ye)]}(Xe>d/4?g-Xe:Xe,Je);return Xe>d/4&&(q=$[0],$[0]=-$[1],$[1]=-q),$[0]*=ot,$[1]*=-B,$}function Yn(){return(0,M.c)(Hn(Nn)).scale(239.75)}function fr(Xe,Je){var ot,B,G,H,L,q;if(Je<c)return[(H=u(Xe))-(ot=Je*(Xe-H*(B=b(Xe)))/4)*B,B+ot*H,1-Je*H*H/2,Xe-ot];if(Je>=1-c)return ot=(1-Je)/4,G=1/(B=R(Xe)),[(H=((q=h(2*(q=Xe)))-1)/(q+1))+ot*((L=B*P(Xe))-Xe)/(B*B),G-ot*H*G*(L-Xe),G+ot*H*G*(L+Xe),2*o(h(Xe))-g+ot*(L-Xe)/B];var $=[1,0,0,0,0,0,0,0,0],ne=[C(Je),0,0,0,0,0,0,0,0],ue=0;for(B=C(1-Je),L=1;k(ne[ue]/$[ue])>c&&ue<8;)ot=$[ue++],ne[ue]=(ot-B)/2,$[ue]=(ot+B)/2,B=C(ot*B),L*=2;G=L*$[ue]*Xe;do G=(E(H=ne[ue]*u(B=G)/$[ue])+G)/2;while(--ue);return[u(G),H=b(G),H/b(G-B),G]}function Xt(Xe,Je){if(!Je)return Xe;if(Je===1)return t(p(Xe/2+v));for(var ot=1,B=C(1-Je),G=C(Je),H=0;k(G)>c;H++){if(Xe%d){var L=o(B*p(Xe)/ot);L<0&&(L+=d),Xe+=L+~~(Xe/d)*d}else Xe+=Xe;G=(ot+B)/2,B=C(ot*B),G=((ot=G)-B)/2}return Xe/(r(2,H)*ot)}function pn(Xe,Je){var ot=(m-1)/(m+1),B=C(1-ot*ot),G=Xt(g,B*B),H=t(p(d/4+k(Je)/2)),L=h(-1*H)/C(ot),q=function(ne,ue){var ye=ne*ne,Le=ue+1,Ie=1-ye-ue*ue;return[.5*((ne>=0?g:-g)-T(Ie,2*ne)),-.25*t(Ie*Ie+4*ye)+.5*t(Le*Le+ye)]}(L*b(-1*Xe),L*u(-1*Xe)),$=function(ne,ue,ye){var Le=k(ne),Ie=P(k(ue));if(Le){var Ue=1/u(Le),qe=1/(p(Le)*p(Le)),Qe=-(qe+ye*(Ie*Ie*Ue*Ue)-1+ye),lt=(-Qe+C(Qe*Qe-(ye-1)*qe*4))/2;return[Xt(o(1/C(lt)),ye)*l(ne),Xt(o(C((lt/qe-1)/ye)),1-ye)*l(ue)]}return[0,Xt(o(Ie),1-ye)*l(ue)]}(q[0],q[1],B*B);return[-$[1],(Je>=0?1:-1)*(.5*G-$[0])]}function bt(){return(0,M.c)(Hn(pn)).scale(151.496)}Nn.invert=function(Xe,Je){k(Xe)>1&&(Xe=2*l(Xe)-Xe),k(Je)>1&&(Je=2*l(Je)-Je);var ot=l(Xe),B=l(Je),G=-ot*Xe,H=-B*Je,L=H/G<1,q=function(ye,Le){for(var Ie=0,Ue=1,qe=.5,Qe=50;;){var lt=qe*qe,ft=C(qe),xt=E(1/C(1+lt)),St=1-lt+qe*(1+lt)*xt,Tt=(1-ft)/St,zt=C(Tt),Et=Tt*(1+lt),Yt=zt*(1-lt),qt=C(Et-ye*ye),Ft=Le+Yt+qe*qt;if(k(Ue-Ie)<x||--Qe==0||Ft===0)break;Ft>0?Ie=qe:Ue=qe,qe=.5*(Ie+Ue)}if(!Qe)return null;var fn=E(ft),dn=b(fn),kn=1/dn,Sn=2*ft*dn,Bn=(-St*dn-(-3*qe+xt*(1+3*lt))*Sn*(1-ft))/(St*St);return[d/4*(ye*(-2*kn*((1-lt)*(.5*Bn/zt)-2*qe*zt*Sn)+-kn*Sn*qt)+-kn*(qe*(1+lt)*Bn+Tt*(1+3*lt)*Sn)*E(ye/C(Et))),fn]}(L?H:G,L?G:H),$=q[0],ne=q[1],ue=b(ne);return L&&($=-g-$),[ot*(T(u($)*ue,-u(ne))+d),B*E(b($)*ue)]},pn.invert=function(Xe,Je){var ot,B,G,H,L,q,$=(m-1)/(m+1),ne=C(1-$*$),ue=(B=-Xe,G=ne*ne,(ot=.5*Xt(g,ne*ne)-Je)?(H=fr(ot,G),B?(q=(L=fr(B,1-G))[1]*L[1]+G*H[0]*H[0]*L[0]*L[0],[[H[0]*L[2]/q,H[1]*H[2]*L[0]*L[1]/q],[H[1]*L[1]/q,-H[0]*H[2]*L[0]*L[2]/q],[H[2]*L[1]*L[2]/q,-G*H[0]*H[1]*L[0]/q]]):[[H[0],0],[H[1],0],[H[2],0]]):[[0,(L=fr(B,1-G))[0]/L[1]],[1/L[1],0],[L[2]/L[1],0]]),ye=function(Le,Ie){var Ue=Ie[0]*Ie[0]+Ie[1]*Ie[1];return[(Le[0]*Ie[0]+Le[1]*Ie[1])/Ue,(Le[1]*Ie[0]-Le[0]*Ie[1])/Ue]}(ue[0],ue[1]);return[T(ye[1],ye[0])/-1,2*o(h(-.5*t($*ye[0]*ye[0]+$*ye[1]*ye[1])))-g]};var Ut=e(61780);function Kt(Xe){var Je=u(Xe),ot=b(Xe),B=un(Xe);function G(H,L){var q=B(H,L);H=q[0],L=q[1];var $=u(L),ne=b(L),ue=b(H),ye=O(Je*$+ot*ne*ue),Le=u(ye),Ie=k(Le)>c?ye/Le:1;return[Ie*ot*u(H),(k(H)>g?Ie:-Ie)*(Je*ne-ot*$*ue)]}return B.invert=un(-Xe),G.invert=function(H,L){var q=C(H*H+L*L),$=-u(q),ne=b(q),ue=q*ne,ye=-L*$,Le=q*Je,Ie=C(ue*ue+ye*ye-Le*Le),Ue=T(ue*Le+ye*Ie,ye*Le-ue*Ie),qe=(q>g?-1:1)*T(H*$,q*b(Ue)*ne+L*u(Ue)*$);return B.invert(qe,Ue)},G}function un(Xe){var Je=u(Xe),ot=b(Xe);return function(B,G){var H=b(G),L=b(B)*H,q=u(B)*H,$=u(G);return[T(q,L*ot-$*Je),E($*ot+L*Je)]}}function cn(){var Xe=0,Je=(0,M.U)(Kt),ot=Je(Xe),B=ot.rotate,G=ot.stream,H=(0,Ut.c)();return ot.parallel=function(L){if(!arguments.length)return Xe*S;var q=ot.rotate();return Je(Xe=L*w).rotate(q)},ot.rotate=function(L){return arguments.length?(B.call(ot,[L[0],L[1]-Xe*S]),H.center([-L[0],-L[1]]),ot):((L=B.call(ot))[1]+=Xe*S,L)},ot.stream=function(L){return(L=G(L)).sphere=function(){L.polygonStart();var q,$=H.radius(89.99)().coordinates[0],ne=$.length-1,ue=-1;for(L.lineStart();++ue<ne;)L.point((q=$[ue])[0],q[1]);for(L.lineEnd(),ne=($=H.radius(90.01)().coordinates[0]).length-1,L.lineStart();--ue>=0;)L.point((q=$[ue])[0],q[1]);L.lineEnd(),L.polygonEnd()},L},ot.scale(79.4187).parallel(45).clipAngle(179.999)}var vn=e(84706),tn=e(16016),Vt=E(1-1/3)*S,Gt=Ge(0);function nn(Xe){var Je=Vt*w,ot=wt(d,Je)[0]-wt(-d,Je)[0],B=Gt(0,Je)[1],G=wt(0,Je)[1],H=_-G,L=f/Xe,q=4/f,$=B+H*H*4/f;function ne(ue,ye){var Le,Ie=k(ye);if(Ie>Je){var Ue=n(Xe-1,a(0,s((ue+d)/L)));(Le=wt(ue+=d*(Xe-1)/Xe-Ue*L,Ie))[0]=Le[0]*f/ot-f*(Xe-1)/(2*Xe)+Ue*f/Xe,Le[1]=B+4*(Le[1]-G)*H/f,ye<0&&(Le[1]=-Le[1])}else Le=Gt(ue,ye);return Le[0]*=q,Le[1]/=$,Le}return ne.invert=function(ue,ye){ue/=q;var Le=k(ye*=$);if(Le>B){var Ie=n(Xe-1,a(0,s((ue+d)/L)));ue=(ue+d*(Xe-1)/Xe-Ie*L)*ot/f;var Ue=wt.invert(ue,.25*(Le-B)*f/H+G);return Ue[0]-=d*(Xe-1)/Xe-Ie*L,ye<0&&(Ue[1]=-Ue[1]),Ue}return Gt.invert(ue,ye)},ne}function sn(Xe,Je){return[Xe,1&Je?90-c:Vt]}function wn(Xe,Je){return[Xe,1&Je?-90+c:-Vt]}function An(Xe){return[Xe[0]*(1-c),Xe[1]]}function zn(){var Xe=4,Je=(0,M.U)(nn),ot=Je(Xe),B=ot.stream;return ot.lobes=function(G){return arguments.length?Je(Xe=+G):Xe},ot.stream=function(G){var H=ot.rotate(),L=B(G),q=(ot.rotate([0,0]),B(G));return ot.rotate(H),L.sphere=function(){var $,ne;(0,tn.c)(($=180/Xe,ne=[].concat((0,vn.ik)(-180,180+$/2,$).map(sn),(0,vn.ik)(180,-180-$/2,-$).map(wn)),{type:"Polygon",coordinates:[$===180?ne.map(An):ne]}),q)},L},ot.scale(239.75)}function Fn(Xe){var Je,ot=1+Xe,B=E(u(1/ot)),G=2*C(d/(Je=d+4*B*ot)),H=.5*G*(ot+C(Xe*(2+Xe))),L=Xe*Xe,q=ot*ot;function $(ne,ue){var ye,Le,Ie=1-u(ue);if(Ie&&Ie<2){var Ue,qe=g-ue,Qe=25;do{var lt=u(qe),ft=b(qe),xt=B+T(lt,ot-ft),St=1+q-2*ot*ft;qe-=Ue=(qe-L*B-ot*lt+St*xt-.5*Ie*Je)/(2*ot*lt*xt)}while(k(Ue)>x&&--Qe>0);ye=G*C(St),Le=ne*xt/d}else ye=G*(Xe+Ie),Le=ne*B/d;return[ye*u(Le),H-ye*b(Le)]}return $.invert=function(ne,ue){var ye=ne*ne+(ue-=H)*ue,Le=(1+q-ye/(G*G))/(2*ot),Ie=O(Le),Ue=u(Ie),qe=B+T(Ue,ot-Le);return[E(ne/C(ye))*d/qe,E(1-2*(Ie-L*B-ot*Ue+(1+q-2*ot*Le)*qe)/Je)]},$}function Xn(){var Xe=1,Je=(0,M.U)(Fn),ot=Je(Xe);return ot.ratio=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(167.774).center([0,18.67])}var jn=.7109889596207567,Qn=.0528035274542;function Jn(Xe,Je){return Je>-.7109889596207567?((Xe=se(Xe,Je))[1]+=Qn,Xe):Oe(Xe,Je)}function Zn(){return(0,M.c)(Jn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function ur(Xe,Je){return k(Je)>jn?((Xe=se(Xe,Je))[1]-=Je>0?Qn:-.0528035274542,Xe):Oe(Xe,Je)}function mr(){return(0,M.c)(ur).scale(152.63)}function hr(Xe,Je,ot,B){var G=C(4*d/(2*ot+(1+Xe-Je/2)*u(2*ot)+(Xe+Je)/2*u(4*ot)+Je/2*u(6*ot))),H=C(B*u(ot)*C((1+Xe*b(2*ot)+Je*b(4*ot))/(1+Xe+Je))),L=ot*$(1);function q(ye){return C(1+Xe*b(2*ye)+Je*b(4*ye))}function $(ye){var Le=ye*ot;return(2*Le+(1+Xe-Je/2)*u(2*Le)+(Xe+Je)/2*u(4*Le)+Je/2*u(6*Le))/ot}function ne(ye){return q(ye)*u(ye)}var ue=function(ye,Le){var Ie=ot*xe($,L*u(Le)/ot,Le/d);isNaN(Ie)&&(Ie=ot*l(Le));var Ue=G*q(Ie);return[Ue*H*ye/d*b(Ie),Ue/H*u(Ie)]};return ue.invert=function(ye,Le){var Ie=xe(ne,Le*H/G);return[ye*d/(b(Ie)*G*H*q(Ie)),E(ot*$(Ie/ot)/L)]},ot===0&&(G=C(B/d),(ue=function(ye,Le){return[ye*G,u(Le)/G]}).invert=function(ye,Le){return[ye/G,E(Le*G)]}),ue}function rr(){var Xe=1,Je=0,ot=45*w,B=2,G=(0,M.U)(hr),H=G(Xe,Je,ot,B);return H.a=function(L){return arguments.length?G(Xe=+L,Je,ot,B):Xe},H.b=function(L){return arguments.length?G(Xe,Je=+L,ot,B):Je},H.psiMax=function(L){return arguments.length?G(Xe,Je,ot=+L*w,B):ot*S},H.ratio=function(L){return arguments.length?G(Xe,Je,ot,B=+L):B},H.scale(180.739)}function gr(Xe,Je,ot,B,G,H,L,q,$,ne,ue){if(ue.nanEncountered)return NaN;var ye,Le,Ie,Ue,qe,Qe,lt,ft,xt,St;if(Le=Xe(Je+.25*(ye=ot-Je)),Ie=Xe(ot-.25*ye),isNaN(Le))ue.nanEncountered=!0;else{if(!isNaN(Ie))return St=((Qe=(Ue=ye*(B+4*Le+G)/12)+(qe=ye*(G+4*Ie+H)/12))-L)/15,ne>$?(ue.maxDepthCount++,Qe+St):Math.abs(St)<q?Qe+St:(ft=gr(Xe,Je,lt=Je+.5*ye,B,Le,G,Ue,.5*q,$,ne+1,ue),isNaN(ft)?(ue.nanEncountered=!0,NaN):(xt=gr(Xe,lt,ot,G,Ie,H,qe,.5*q,$,ne+1,ue),isNaN(xt)?(ue.nanEncountered=!0,NaN):ft+xt));ue.nanEncountered=!0}}function xr(Xe,Je,ot,B,G){G===void 0&&(G=20);var H=Xe(Je),L=Xe(.5*(Je+ot)),q=Xe(ot);return gr(Xe,Je,ot,H,L,q,(H+4*L+q)*(ot-Je)/6,B,G,1,{maxDepthCount:0,nanEncountered:!1})}function Or(Xe,Je,ot){function B(Ie){return Xe+(1-Xe)*r(1-r(Ie,Je),1/Je)}function G(Ie){return xr(B,0,Ie,1e-4)}for(var H=1/G(1),L=1e3,q=1.00000001*H,$=[],ne=0;ne<=L;ne++)$.push(G(ne/L)*q);function ue(Ie){var Ue=0,qe=L,Qe=500;do $[Qe]>Ie?qe=Qe:Ue=Qe,Qe=Ue+qe>>1;while(Qe>Ue);var lt=$[Qe+1]-$[Qe];return lt&&(lt=(Ie-$[Qe+1])/lt),(Qe+1+lt)/L}var ye=2*ue(1)/d*H/ot,Le=function(Ie,Ue){var qe=ue(k(u(Ue))),Qe=B(qe)*Ie;return qe/=ye,[Qe,Ue>=0?qe:-qe]};return Le.invert=function(Ie,Ue){var qe;return k(Ue*=ye)<1&&(qe=l(Ue)*E(G(k(Ue))*H)),[Ie/B(k(Ue)),qe]},Le}function aa(){var Xe=0,Je=2.5,ot=1.183136,B=(0,M.U)(Or),G=B(Xe,Je,ot);return G.alpha=function(H){return arguments.length?B(Xe=+H,Je,ot):Xe},G.k=function(H){return arguments.length?B(Xe,Je=+H,ot):Je},G.gamma=function(H){return arguments.length?B(Xe,Je,ot=+H):ot},G.scale(152.63)}function oa(Xe,Je){return k(Xe[0]-Je[0])<c&&k(Xe[1]-Je[1])<c}function Ua(Xe,Je){for(var ot,B,G,H=-1,L=Xe.length,q=Xe[0],$=[];++H<L;){B=((ot=Xe[H])[0]-q[0])/Je,G=(ot[1]-q[1])/Je;for(var ne=0;ne<Je;++ne)$.push([q[0]+ne*B,q[1]+ne*G]);q=ot}return $.push(ot),$}function ta(Xe,Je,ot){var B,G;function H($,ne){for(var ue=ne<0?-1:1,ye=Je[+(ne<0)],Le=0,Ie=ye.length-1;Le<Ie&&$>ye[Le][2][0];++Le);var Ue=Xe($-ye[Le][1][0],ne);return Ue[0]+=Xe(ye[Le][1][0],ue*ne>ue*ye[Le][0][1]?ye[Le][0][1]:ne)[0],Ue}ot?H.invert=ot(H):Xe.invert&&(H.invert=function($,ne){for(var ue=G[+(ne<0)],ye=Je[+(ne<0)],Le=0,Ie=ue.length;Le<Ie;++Le){var Ue=ue[Le];if(Ue[0][0]<=$&&$<Ue[1][0]&&Ue[0][1]<=ne&&ne<Ue[1][1]){var qe=Xe.invert($-Xe(ye[Le][1][0],0)[0],ne);return qe[0]+=ye[Le][1][0],oa(H(qe[0],qe[1]),[$,ne])?qe:null}}});var L=(0,M.c)(H),q=L.stream;return L.stream=function($){var ne=L.rotate(),ue=q($),ye=(L.rotate([0,0]),q($));return L.rotate(ne),ue.sphere=function(){(0,tn.c)(B,ye)},ue},L.lobes=function($){return arguments.length?(B=function(ne){var ue,ye,Le,Ie,Ue,qe,Qe,lt=[],ft=ne[0].length;for(Qe=0;Qe<ft;++Qe)ye=(ue=ne[0][Qe])[0][0],Le=ue[0][1],Ie=ue[1][1],Ue=ue[2][0],qe=ue[2][1],lt.push(Ua([[ye+c,Le+c],[ye+c,Ie-c],[Ue-c,Ie-c],[Ue-c,qe+c]],30));for(Qe=ne[1].length-1;Qe>=0;--Qe)ye=(ue=ne[1][Qe])[0][0],Le=ue[0][1],Ie=ue[1][1],Ue=ue[2][0],qe=ue[2][1],lt.push(Ua([[Ue-c,qe-c],[Ue-c,Ie+c],[ye+c,Ie+c],[ye+c,Le-c]],30));return{type:"Polygon",coordinates:[(0,vn.Uf)(lt)]}}($),Je=$.map(function(ne){return ne.map(function(ue){return[[ue[0][0]*w,ue[0][1]*w],[ue[1][0]*w,ue[1][1]*w],[ue[2][0]*w,ue[2][1]*w]]})}),G=Je.map(function(ne){return ne.map(function(ue){var ye,Le=Xe(ue[0][0],ue[0][1])[0],Ie=Xe(ue[2][0],ue[2][1])[0],Ue=Xe(ue[1][0],ue[0][1])[1],qe=Xe(ue[1][0],ue[1][1])[1];return Ue>qe&&(ye=Ue,Ue=qe,qe=ye),[[Le,Ue],[Ie,qe]]})}),L):Je.map(function(ne){return ne.map(function(ue){return[[ue[0][0]*S,ue[0][1]*S],[ue[1][0]*S,ue[1][1]*S],[ue[2][0]*S,ue[2][1]*S]]})})},Je!=null&&L.lobes(Je),L}Jn.invert=function(Xe,Je){return Je>-.7109889596207567?se.invert(Xe,Je-Qn):Oe.invert(Xe,Je)},ur.invert=function(Xe,Je){return k(Je)>jn?se.invert(Xe,Je+(Je>0?Qn:-.0528035274542)):Oe.invert(Xe,Je)};var ka=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Pr(){return ta(Te,ka).scale(160.857)}var ha=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function oi(){return ta(ur,ha).scale(152.63)}var Ya=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function lo(){return ta(se,Ya).scale(169.529)}var uo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Zi(){return ta(se,uo).scale(169.529).rotate([20,0])}var Za=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Xi(){return ta(Jn,Za,be).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ko=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function qo(){return ta(Oe,ko).scale(152.63).rotate([-20,0])}function Mi(Xe,Je){return[3/f*Xe*C(d*d/3-Je*Je),Je]}function Si(){return(0,M.c)(Mi).scale(158.837)}function Ki(Xe){function Je(ot,B){if(k(k(B)-g)<c)return[0,B<0?-2:2];var G=u(B),H=r((1+G)/(1-G),Xe/2),L=.5*(H+1/H)+b(ot*=Xe);return[2*u(ot)/L,(H-1/H)/L]}return Je.invert=function(ot,B){var G=k(B);if(k(G-2)<c)return ot?null:[0,l(B)*g];if(G>2)return null;var H=(ot/=2)*ot,L=(B/=2)*B,q=2*B/(1+H+L);return q=r((1+q)/(1-q),1/Xe),[T(2*ot,1-H-L)/Xe,E((q-1)/(q+1))]},Je}function pa(){var Xe=.5,Je=(0,M.U)(Ki),ot=Je(Xe);return ot.spacing=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(124.75)}Mi.invert=function(Xe,Je){return[f/3*Xe/C(d*d/3-Je*Je),Je]};var za=d/m;function co(Xe,Je){return[Xe*(1+C(b(Je)))/2,Je/(b(Je/2)*b(Xe/6))]}function Ji(){return(0,M.c)(co).scale(97.2672)}function Ri(Xe,Je){var ot=Xe*Xe,B=Je*Je;return[Xe*(.975534+B*(-.0143059*ot-.119161+-.0547009*B)),Je*(1.00384+ot*(.0802894+-.02855*B+199025e-9*ot)+B*(.0998909+-.0491032*B))]}function Ao(){return(0,M.c)(Ri).scale(139.98)}function $i(Xe,Je){return[u(Xe)/b(Je),p(Je)*b(Xe)]}function Mo(){return(0,M.c)($i).scale(144.049).clipAngle(89.999)}function fo(Xe){var Je=b(Xe),ot=p(v+Xe/2);function B(G,H){var L=H-Xe,q=k(L)<c?G*Je:k(q=v+H/2)<c||k(k(q)-g)<c?0:G*L/t(p(q)/ot);return[q,L]}return B.invert=function(G,H){var L,q=H+Xe;return[k(H)<c?G/Je:k(L=v+q/2)<c||k(k(L)-g)<c?0:G*t(p(L)/ot)/H,q]},B}function So(){return Se(fo).parallel(40).scale(158.837)}function Qi(Xe,Je){return[Xe,1.25*t(p(v+.4*Je))]}function Ks(){return(0,M.c)(Qi).scale(108.318)}function Bs(Xe){var Je=Xe.length-1;function ot(B,G){for(var H,L=b(G),q=2/(1+L*b(B)),$=q*L*u(B),ne=q*u(G),ue=Je,ye=Xe[ue],Le=ye[0],Ie=ye[1];--ue>=0;)Le=(ye=Xe[ue])[0]+$*(H=Le)-ne*Ie,Ie=ye[1]+$*Ie+ne*H;return[Le=$*(H=Le)-ne*Ie,Ie=$*Ie+ne*H]}return ot.invert=function(B,G){var H=20,L=B,q=G;do{for(var $,ne=Je,ue=Xe[ne],ye=ue[0],Le=ue[1],Ie=0,Ue=0;--ne>=0;)Ie=ye+L*($=Ie)-q*Ue,Ue=Le+L*Ue+q*$,ye=(ue=Xe[ne])[0]+L*($=ye)-q*Le,Le=ue[1]+L*Le+q*$;var qe,Qe,lt=(Ie=ye+L*($=Ie)-q*Ue)*Ie+(Ue=Le+L*Ue+q*$)*Ue;L-=qe=((ye=L*($=ye)-q*Le-B)*Ie+(Le=L*Le+q*$-G)*Ue)/lt,q-=Qe=(Le*Ie-ye*Ue)/lt}while(k(qe)+k(Qe)>c*c&&--H>0);if(H){var ft=C(L*L+q*q),xt=2*o(.5*ft),St=u(xt);return[T(L*St,ft*b(xt)),ft?E(q*St/ft):0]}},ot}co.invert=function(Xe,Je){var ot=k(Xe),B=k(Je),G=c,H=g;B<za?H*=B/za:G+=6*O(za/B);for(var L=0;L<25;L++){var q=u(H),$=C(b(H)),ne=u(H/2),ue=b(H/2),ye=u(G/6),Le=b(G/6),Ie=.5*G*(1+$)-ot,Ue=H/(ue*Le)-B,qe=$?-.25*G*q/$:0,Qe=.5*(1+$),lt=(1+.5*H*ne/ue)/(ue*Le),ft=H/ue*(ye/6)/(Le*Le),xt=qe*ft-lt*Qe,St=(Ie*ft-Ue*Qe)/xt,Tt=(Ue*qe-Ie*lt)/xt;if(H-=St,G-=Tt,k(St)<c&&k(Tt)<c)break}return[Xe<0?-G:G,Je<0?-H:H]},Ri.invert=function(Xe,Je){var ot=l(Xe)*d,B=Je/2,G=50;do{var H=ot*ot,L=B*B,q=ot*B,$=ot*(.975534+L*(-.0143059*H-.119161+-.0547009*L))-Xe,ne=B*(1.00384+H*(.0802894+-.02855*L+199025e-9*H)+L*(.0998909+-.0491032*L))-Je,ue=.975534-L*(.119161+3*H*.0143059+.0547009*L),ye=-q*(.238322+.2188036*L+.0286118*H),Le=q*(.1605788+7961e-7*H+-.0571*L),Ie=1.00384+H*(.0802894+199025e-9*H)+L*(3*(.0998909-.02855*H)-.245516*L),Ue=ye*Le-Ie*ue,qe=(ne*ye-$*Ie)/Ue,Qe=($*Le-ne*ue)/Ue;ot-=qe,B-=Qe}while((k(qe)>c||k(Qe)>c)&&--G>0);return G&&[ot,B]},$i.invert=function(Xe,Je){var ot=Xe*Xe,B=Je*Je+1,G=ot+B,H=Xe?y*C((G-C(G*G-4*ot))/ot):1/C(B);return[E(Xe*H),l(Je)*O(H)]},Qi.invert=function(Xe,Je){return[Xe,2.5*o(h(.8*Je))-.625*d]};var Ho=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],il=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ol=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Go=[[.9245,0],[0,0],[.01943,0]],sl=[[.721316,0],[0,0],[-.00881625,-.00617325]];function xl(){return Yo(Ho,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function bl(){return Yo(il,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Wo(){return Yo(ol,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function eo(){return Yo(Go,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function as(){return Yo(sl,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Yo(Xe,Je){var ot=(0,M.c)(Bs(Xe)).rotate(Je).clipAngle(90),B=(0,Ye.c)(Je),G=ot.center;return delete ot.rotate,ot.center=function(H){return arguments.length?G(B(H)):B.invert(G())},ot}var bs=C(6),Zo=C(7);function Fi(Xe,Je){var ot=E(7*u(Je)/(3*bs));return[bs*Xe*(2*b(2*ot/3)-1)/Zo,9*u(ot/3)/Zo]}function Js(){return(0,M.c)(Fi).scale(164.859)}function Eo(Xe,Je){for(var ot,B=(1+y)*u(Je),G=Je,H=0;H<25&&(G-=ot=(u(G/2)+u(G)-B)/(.5*b(G/2)+b(G)),!(k(ot)<c));H++);return[Xe*(1+2*b(G)/b(G/2))/(3*m),2*C(3)*u(G/2)/C(2+m)]}function ho(){return(0,M.c)(Eo).scale(188.209)}function po(Xe,Je){for(var ot,B=C(6/(4+d)),G=(1+d/4)*u(Je),H=Je/2,L=0;L<25&&(H-=ot=(H/2+u(H)-G)/(.5+b(H)),!(k(ot)<c));L++);return[B*(.5+b(H))*Xe/1.5,B*H]}function Lo(){return(0,M.c)(po).scale(166.518)}Fi.invert=function(Xe,Je){var ot=3*E(Je*Zo/9);return[Xe*Zo/(bs*(2*b(2*ot/3)-1)),E(3*u(ot)*bs/7)]},Eo.invert=function(Xe,Je){var ot=Je*C(2+m)/(2*C(3)),B=2*E(ot);return[3*m*Xe/(1+2*b(B)/b(B/2)),E((ot+u(B))/(1+y))]},po.invert=function(Xe,Je){var ot=C(6/(4+d)),B=Je/ot;return k(k(B)-g)<c&&(B=B<0?-g:g),[1.5*Xe/(ot*(.5+b(B))),E((B/2+u(B))/(1+d/4))]};var Ur=e(47984);function is(Xe,Je){var ot=Je*Je,B=ot*ot,G=ot*B;return[Xe*(.84719-.13063*ot+G*G*(.05494*ot-.04515-.02326*B+.00331*G)),Je*(1.01183+B*B*(.01926*ot-.02625-.00396*B))]}function _l(){return(0,M.c)(is).scale(175.295)}function Ns(Xe,Je){return[Xe*(1+b(Je))/2,2*(Je-p(Je/2))]}function os(){return(0,M.c)(Ns).scale(152.63)}is.invert=function(Xe,Je){var ot,B,G,H,L=Je,q=25;do L-=ot=(L*(1.01183+(G=(B=L*L)*B)*G*(.01926*B-.02625-.00396*G))-Je)/(1.01183+G*G*(.21186*B-.23625+-.05148*G));while(k(ot)>x&&--q>0);return[Xe/(.84719-.13063*(B=L*L)+(H=B*(G=B*B))*H*(.05494*B-.04515-.02326*G+.00331*H)),L]},Ns.invert=function(Xe,Je){for(var ot=Je/2,B=0,G=1/0;B<10&&k(G)>c;++B){var H=b(Je/2);Je-=G=(Je-p(Je/2)-ot)/(1-.5/(H*H))}return[2*Xe/(1+b(Je)),Je]};var ll=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function wl(){return ta(ce(1/0),ll).rotate([20,0]).scale(152.63)}function js(Xe,Je){var ot=u(Je),B=b(Je),G=l(Xe);if(Xe===0||k(Je)===g)return[0,Je];if(Je===0)return[Xe,0];if(k(Xe)===g)return[Xe*B,g*ot];var H=d/(2*Xe)-2*Xe/d,L=2*Je/d,q=(1-L*L)/(ot-L),$=H*H,ne=q*q,ue=1+$/ne,ye=1+ne/$,Le=(H*ot/q-H/2)/ue,Ie=(ne*ot/$+q/2)/ye,Ue=Ie*Ie-(ne*ot*ot/$+q*ot-1)/ye;return[g*(Le+C(Le*Le+B*B/ue)*G),g*(Ie+C(Ue<0?0:Ue)*l(-Je*H)*G)]}function Tl(){return(0,M.c)(js).scale(127.267)}js.invert=function(Xe,Je){var ot=(Xe/=g)*Xe,B=ot+(Je/=g)*Je,G=d*d;return[Xe?(B-1+C((1-B)*(1-B)+4*ot))/(2*Xe)*g:0,xe(function(H){return B*(d*u(H)-2*H)*d+4*H*H*(Je-u(H))+2*d*H-G*Je},0)]};var Co=1.0148,Xo=.23185,go=-.14499,Bi=.02406,ss=Co,ul=5*Xo,_s=7*go,Us=9*Bi,bi=1.790857183;function Vs(Xe,Je){var ot=Je*Je;return[Xe,Je*(Co+ot*ot*(Xo+ot*(go+Bi*ot)))]}function cl(){return(0,M.c)(Vs).scale(139.319)}function ls(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=p(Je),B=Xe*u(Je);return[u(B)/ot,Je+(1-b(B))/ot]}function Ko(){return(0,M.c)(ls).scale(103.74)}Vs.invert=function(Xe,Je){Je>bi?Je=bi:Je<-1.790857183&&(Je=-1.790857183);var ot,B=Je;do{var G=B*B;B-=ot=(B*(Co+G*G*(Xo+G*(go+Bi*G)))-Je)/(ss+G*G*(ul+G*(_s+Us*G)))}while(k(ot)>c);return[Xe,B]},ls.invert=function(Xe,Je){if(k(Je)<c)return[Xe,0];var ot,B=Xe*Xe+Je*Je,G=.5*Je,H=10;do{var L=p(G),q=1/b(G),$=B-2*Je*G+G*G;G-=ot=(L*$+2*(G-Je))/(2+$*q*q+2*(G-Je)*L)}while(k(ot)>c&&--H>0);return L=p(G),[(k(Je)<k(G+1/L)?E(Xe*L):l(Je)*l(Xe)*(O(k(Xe*L))+g))/u(G),G]};var us=e(13696),Jo=e(27284);function $o(Xe,Je){return[Xe[0]*Je[0]+Xe[1]*Je[3],Xe[0]*Je[1]+Xe[1]*Je[4],Xe[0]*Je[2]+Xe[1]*Je[5]+Xe[2],Xe[3]*Je[0]+Xe[4]*Je[3],Xe[3]*Je[1]+Xe[4]*Je[4],Xe[3]*Je[2]+Xe[4]*Je[5]+Xe[5]]}function ws(Xe,Je){return[Xe[0]-Je[0],Xe[1]-Je[1]]}function qs(Xe){return C(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function $r(Xe,Je,ot){function B(q,$){var ne,ue=Je(q,$),ye=ue.project([q*S,$*S]);return(ne=ue.transform)?[ne[0]*ye[0]+ne[1]*ye[1]+ne[2],-(ne[3]*ye[0]+ne[4]*ye[1]+ne[5])]:(ye[1]=-ye[1],ye)}function G(q,$){var ne=q.project.invert,ue=q.transform,ye=$;if(ue&&(ue=function(Qe){var lt=1/(Qe[0]*Qe[4]-Qe[1]*Qe[3]);return[lt*Qe[4],-lt*Qe[1],lt*(Qe[1]*Qe[5]-Qe[2]*Qe[4]),-lt*Qe[3],lt*Qe[0],lt*(Qe[2]*Qe[3]-Qe[0]*Qe[5])]}(ue),ye=[ue[0]*ye[0]+ue[1]*ye[1]+ue[2],ue[3]*ye[0]+ue[4]*ye[1]+ue[5]]),ne&&q===function(Qe){return Je(Qe[0]*w,Qe[1]*w)}(Le=ne(ye)))return Le;for(var Le,Ie=q.children,Ue=0,qe=Ie&&Ie.length;Ue<qe;++Ue)if(Le=G(Ie[Ue],$))return Le}(function q($,ne){if($.edges=function(Tt){for(var zt=Tt.length,Et=[],Yt=Tt[zt-1],qt=0;qt<zt;++qt)Et.push([Yt,Yt=Tt[qt]]);return Et}($.face),ne.face){var ue=$.shared=function(Tt,zt){for(var Et,Yt,qt=Tt.length,Ft=null,fn=0;fn<qt;++fn){Et=Tt[fn];for(var dn=zt.length;--dn>=0;)if(Yt=zt[dn],Et[0]===Yt[0]&&Et[1]===Yt[1]){if(Ft)return[Ft,Et];Ft=Et}}}($.face,ne.face),ye=(qe=ue.map(ne.project),Qe=ue.map($.project),lt=ws(qe[1],qe[0]),ft=ws(Qe[1],Qe[0]),xt=function(Tt,zt){return T(Tt[0]*zt[1]-Tt[1]*zt[0],Tt[0]*zt[0]+Tt[1]*zt[1])}(lt,ft),St=qs(lt)/qs(ft),$o([1,0,qe[0][0],0,1,qe[0][1]],$o([St,0,0,0,St,0],$o([b(xt),u(xt),0,-u(xt),b(xt),0],[1,0,-Qe[0][0],0,1,-Qe[0][1]]))));$.transform=ne.transform?$o(ne.transform,ye):ye;for(var Le=ne.edges,Ie=0,Ue=Le.length;Ie<Ue;++Ie)Xa(ue[0],Le[Ie][1])&&Xa(ue[1],Le[Ie][0])&&(Le[Ie]=$),Xa(ue[0],Le[Ie][0])&&Xa(ue[1],Le[Ie][1])&&(Le[Ie]=$);for(Ie=0,Ue=(Le=$.edges).length;Ie<Ue;++Ie)Xa(ue[0],Le[Ie][0])&&Xa(ue[1],Le[Ie][1])&&(Le[Ie]=ne),Xa(ue[0],Le[Ie][1])&&Xa(ue[1],Le[Ie][0])&&(Le[Ie]=ne)}else $.transform=ne.transform;var qe,Qe,lt,ft,xt,St;return $.children&&$.children.forEach(function(Tt){q(Tt,$)}),$})(Xe,{transform:null}),Ni(Xe)&&(B.invert=function(q,$){var ne=G(Xe,[q,-$]);return ne&&(ne[0]*=w,ne[1]*=w,ne)});var H=(0,M.c)(B),L=H.stream;return H.stream=function(q){var $=H.rotate(),ne=L(q),ue=(H.rotate([0,0]),L(q));return H.rotate($),ne.sphere=function(){ue.polygonStart(),ue.lineStart(),Po(ue,Xe),ue.lineEnd(),ue.polygonEnd()},ne},H.angle(ot==null?-30:ot*S)}function Po(Xe,Je,ot){var B,G,H=Je.edges,L=H.length,q={type:"MultiPoint",coordinates:Je.face},$=Je.face.filter(function(qe){return k(qe[1])!==90}),ne=(0,us.c)({type:"MultiPoint",coordinates:$}),ue=!1,ye=-1,Le=ne[1][0]-ne[0][0],Ie=Le===180||Le===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,Ve.c)(q);if(ot)for(;++ye<L&&H[ye]!==ot;);++ye;for(var Ue=0;Ue<L;++Ue)G=H[(Ue+ye)%L],Array.isArray(G)?(ue||(Xe.point((B=(0,Jo.c)(G[0],Ie)(c))[0],B[1]),ue=!0),Xe.point((B=(0,Jo.c)(G[1],Ie)(c))[0],B[1])):(ue=!1,G!==ot&&Po(Xe,G,Je))}function Xa(Xe,Je){return Xe&&Je&&Xe[0]===Je[0]&&Xe[1]===Je[1]}function Ni(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Ni)}var Wr=e(53285),Jr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],_i=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function(Je){return Jr[Je]})});function cs(Xe){Xe=Xe||function(ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:ot});return(0,Wr.c)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var Je=_i.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,B){var G=Je[ot];G&&(G.children||(G.children=[])).push(Je[B])}),$r(Je[0],function(ot,B){return Je[ot<-d/2?B<0?6:4:ot<0?B<0?2:0:ot<d/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ts=2/C(3);function Hs(Xe,Je){var ot=wt(Xe,Je);return[ot[0]*Ts,ot[1]]}function ks(Xe){Xe=Xe||function(ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:ot});return(0,M.c)(Hs).translate([0,0]).scale(1).rotate(B[1]>0?[-B[0],0]:[180-B[0],180])};var Je=_i.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,B){var G=Je[ot];G&&(G.children||(G.children=[])).push(Je[B])}),$r(Je[0],function(ot,B){return Je[ot<-d/2?B<0?6:4:ot<0?B<0?2:0:ot<d/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function As(Xe){Xe=Xe||function(H){var L=H.length===6?(0,Ve.c)({type:"MultiPoint",coordinates:H}):H[0];return(0,Wr.c)().scale(1).translate([0,0]).rotate([-L[0],-L[1]])};var Je=_i.map(function(H){for(var L,q=H.map(Io),$=q.length,ne=q[$-1],ue=[],ye=0;ye<$;++ye)L=q[ye],ue.push(Oo([.9486832980505138*ne[0]+.31622776601683794*L[0],.9486832980505138*ne[1]+.31622776601683794*L[1],.9486832980505138*ne[2]+.31622776601683794*L[2]]),Oo([.9486832980505138*L[0]+.31622776601683794*ne[0],.9486832980505138*L[1]+.31622776601683794*ne[1],.9486832980505138*L[2]+.31622776601683794*ne[2]])),ne=L;return ue}),ot=[],B=[-1,0,0,1,0,1,4,5];Je.forEach(function(H,L){for(var q,$,ne=_i[L],ue=ne.length,ye=ot[L]=[],Le=0;Le<ue;++Le)Je.push([ne[Le],H[(2*Le+2)%(2*ue)],H[(2*Le+1)%(2*ue)]]),B.push(L),ye.push((q=Io(H[(2*Le+2)%(2*ue)]),$=Io(H[(2*Le+1)%(2*ue)]),[q[1]*$[2]-q[2]*$[1],q[2]*$[0]-q[0]*$[2],q[0]*$[1]-q[1]*$[0]]))});var G=Je.map(function(H){return{project:Xe(H),face:H}});return B.forEach(function(H,L){var q=G[H];q&&(q.children||(q.children=[])).push(G[L])}),$r(G[0],function(H,L){var q=b(L),$=[q*b(H),q*u(H),u(L)],ne=H<-d/2?L<0?6:4:H<0?L<0?2:0:H<d/2?L<0?3:1:L<0?7:5,ue=ot[ne];return G[Ei(ue[0],$)<0?8+3*ne:Ei(ue[1],$)<0?8+3*ne+1:Ei(ue[2],$)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function Ei(Xe,Je){for(var ot=0,B=Xe.length,G=0;ot<B;++ot)G+=Xe[ot]*Je[ot];return G}function Oo(Xe){return[T(Xe[1],Xe[0])*S,E(a(-1,n(1,Xe[2])))*S]}function Io(Xe){var Je=Xe[0]*w,ot=Xe[1]*w,B=b(ot);return[B*b(Je),B*u(Je),u(ot)]}function ti(){}function Ms(Xe,Je){var ot,B=Je.stream;if(!B)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":ot=Ra;break;case"FeatureCollection":ot=Li;break;default:ot=Va}return ot(Xe,B)}function Li(Xe,Je){return{type:"FeatureCollection",features:Xe.features.map(function(ot){return Ra(ot,Je)})}}function Ra(Xe,Je){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:Va(Xe.geometry,Je)}}function Va(Xe,Je){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(B,G){return{type:"GeometryCollection",geometries:B.geometries.map(function(H){return Va(H,G)})}}(Xe,Je);var ot;switch(Xe.type){case"Point":case"MultiPoint":ot=to;break;case"LineString":case"MultiLineString":ot=Qo;break;case"Polygon":case"MultiPolygon":case"Sphere":ot=ji;break;default:return null}return(0,tn.c)(Xe,Je(ot)),ot.result()}Hs.invert=function(Xe,Je){return wt.invert(Xe/Ts,Je)};var ia=[],qa=[],to={point:function(Xe,Je){ia.push([Xe,Je])},result:function(){var Xe=ia.length?ia.length<2?{type:"Point",coordinates:ia[0]}:{type:"MultiPoint",coordinates:ia}:null;return ia=[],Xe}},Qo={lineStart:ti,point:function(Xe,Je){ia.push([Xe,Je])},lineEnd:function(){ia.length&&(qa.push(ia),ia=[])},result:function(){var Xe=qa.length?qa.length<2?{type:"LineString",coordinates:qa[0]}:{type:"MultiLineString",coordinates:qa}:null;return qa=[],Xe}},ji={polygonStart:ti,lineStart:ti,point:function(Xe,Je){ia.push([Xe,Je])},lineEnd:function(){var Xe=ia.length;if(Xe){do ia.push(ia[0].slice());while(++Xe<4);qa.push(ia),ia=[]}},polygonEnd:ti,result:function(){if(!qa.length)return null;var Xe=[],Je=[];return qa.forEach(function(ot){(function(B){if((G=B.length)<4)return!1;for(var G,H=0,L=B[G-1][1]*B[0][0]-B[G-1][0]*B[0][1];++H<G;)L+=B[H-1][1]*B[H][0]-B[H-1][0]*B[H][1];return L<=0})(ot)?Xe.push([ot]):Je.push(ot)}),Je.forEach(function(ot){var B=ot[0];Xe.some(function(G){if(function(H,L){for(var q=L[0],$=L[1],ne=!1,ue=0,ye=H.length,Le=ye-1;ue<ye;Le=ue++){var Ie=H[ue],Ue=Ie[0],qe=Ie[1],Qe=H[Le],lt=Qe[0],ft=Qe[1];qe>$^ft>$&&q<(lt-Ue)*($-qe)/(ft-qe)+Ue&&(ne=!ne)}return ne}(G[0],B))return G.push(ot),!0})||Xe.push([ot])}),qa=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function Do(Xe){var Je=Xe(g,0)[0]-Xe(-g,0)[0];function ot(B,G){var H=k(B)<g,L=Xe(H?B:B>0?B-d:B+d,G),q=(L[0]-L[1])*y,$=(L[0]+L[1])*y;if(H)return[q,$];var ne=Je*y,ue=q>0^$>0?-1:1;return[ue*q-l($)*ne,ue*$-l(q)*ne]}return Xe.invert&&(ot.invert=function(B,G){var H=(B+G)*y,L=(G-B)*y,q=k(H)<.5*Je&&k(L)<.5*Je;if(!q){var $=Je*y,ne=H>0^L>0?-1:1,ue=-ne*B+(L>0?1:-1)*$,ye=-ne*G+(H>0?1:-1)*$;H=(-ue-ye)*y,L=(ue-ye)*y}var Le=Xe.invert(H,L);return q||(Le[0]+=H>0?d:-d),Le}),(0,M.c)(ot).rotate([-90,-90,45]).clipAngle(179.999)}function si(){return Do(Nn).scale(176.423)}function es(){return Do(pn).scale(111.48)}function vo(Xe,Je){if(!(0<=(Je=+Je)&&Je<=20))throw new Error("invalid digits");function ot(ne){var ue=ne.length,ye=2,Le=new Array(ue);for(Le[0]=+ne[0].toFixed(Je),Le[1]=+ne[1].toFixed(Je);ye<ue;)Le[ye]=ne[ye],++ye;return Le}function B(ne){return ne.map(ot)}function G(ne){for(var ue=ot(ne[0]),ye=[ue],Le=1;Le<ne.length;Le++){var Ie=ot(ne[Le]);(Ie.length>2||Ie[0]!=ue[0]||Ie[1]!=ue[1])&&(ye.push(Ie),ue=Ie)}return ye.length===1&&ne.length>1&&ye.push(ot(ne[ne.length-1])),ye}function H(ne){return ne.map(G)}function L(ne){if(ne==null)return ne;var ue;switch(ne.type){case"GeometryCollection":ue={type:"GeometryCollection",geometries:ne.geometries.map(L)};break;case"Point":ue={type:"Point",coordinates:ot(ne.coordinates)};break;case"MultiPoint":ue={type:ne.type,coordinates:B(ne.coordinates)};break;case"LineString":ue={type:ne.type,coordinates:G(ne.coordinates)};break;case"MultiLineString":case"Polygon":ue={type:ne.type,coordinates:H(ne.coordinates)};break;case"MultiPolygon":ue={type:"MultiPolygon",coordinates:ne.coordinates.map(H)};break;default:return ne}return ne.bbox!=null&&(ue.bbox=ne.bbox),ue}function q(ne){var ue={type:"Feature",properties:ne.properties,geometry:L(ne.geometry)};return ne.id!=null&&(ue.id=ne.id),ne.bbox!=null&&(ue.bbox=ne.bbox),ue}if(Xe!=null)switch(Xe.type){case"Feature":return q(Xe);case"FeatureCollection":var $={type:"FeatureCollection",features:Xe.features.map(q)};return Xe.bbox!=null&&($.bbox=Xe.bbox),$;default:return L(Xe)}return Xe}function Ci(Xe){var Je=u(Xe);function ot(B,G){var H=Je?p(B*Je/2)/Je:B/2;if(!G)return[2*H,-Xe];var L=2*o(H*u(G)),q=1/p(G);return[u(L)*q,G+(1-b(L))*q-Xe]}return ot.invert=function(B,G){if(k(G+=Xe)<c)return[Je?2*o(Je*B/2)/Je:B,0];var H,L=B*B+G*G,q=0,$=10;do{var ne=p(q),ue=1/b(q),ye=L-2*G*q+q*q;q-=H=(ne*ye+2*(q-G))/(2+ye*ue*ue+2*(q-G)*ne)}while(k(H)>c&&--$>0);var Le=B*(ne=p(q)),Ie=p(k(G)<k(q+1/ne)?.5*E(Le):.5*O(Le)+d/4)/u(q);return[Je?2*o(Je*Ie)/Je:2*Ie,q]},ot}function Pi(){return Se(Ci).scale(131.215)}var sa=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Ui(Xe,Je){var ot,B=n(18,36*k(Je)/d),G=s(B),H=B-G,L=(ot=sa[G])[0],q=ot[1],$=(ot=sa[++G])[0],ne=ot[1],ue=(ot=sa[n(19,++G)])[0],ye=ot[1];return[Xe*($+H*(ue-L)/2+H*H*(ue-2*$+L)/2),(Je>0?g:-g)*(ne+H*(ye-q)/2+H*H*(ye-2*ne+q)/2)]}function wr(){return(0,M.c)(Ui).scale(152.63)}function Ss(Xe,Je){var ot=function(L){function q($,ne){var ue=b(ne),ye=(L-1)/(L-ue*b($));return[ye*ue*u($),ye*u(ne)]}return q.invert=function($,ne){var ue=$*$+ne*ne,ye=C(ue),Le=(L-C(1-ue*(L+1)/(L-1)))/((L-1)/ye+ye/(L-1));return[T($*Le,ye*C(1-Le*Le)),ye?E(ne*Le/ye):0]},q}(Xe);if(!Je)return ot;var B=b(Je),G=u(Je);function H(L,q){var $=ot(L,q),ne=$[1],ue=ne*G/(Xe-1)+B;return[$[0]*B/ue,ne/ue]}return H.invert=function(L,q){var $=(Xe-1)/(Xe-1-q*G);return ot.invert($*L,$*q*B)},H}function $s(){var Xe=2,Je=0,ot=(0,M.U)(Ss),B=ot(Xe,Je);return B.distance=function(G){return arguments.length?ot(Xe=+G,Je):Xe},B.tilt=function(G){return arguments.length?ot(Xe,Je=G*w):Je*S},B.scale(432.147).clipAngle(O(1/Xe)*S-1e-6)}sa.forEach(function(Xe){Xe[1]*=1.0144}),Ui.invert=function(Xe,Je){var ot=Je/g,B=90*ot,G=n(18,k(B/5)),H=a(0,s(G));do{var L=sa[H][1],q=sa[H+1][1],$=sa[n(19,H+2)][1],ne=$-L,ue=$-2*q+L,ye=2*(k(ot)-q)/ne,Le=ue/ne,Ie=ye*(1-Le*ye*(1-2*Le*ye));if(Ie>=0||H===1){B=(Je>=0?5:-5)*(Ie+G);var Ue,qe=50;do Ie=(G=n(18,k(B)/5))-(H=s(G)),L=sa[H][1],q=sa[H+1][1],$=sa[n(19,H+2)][1],B-=(Ue=(Je>=0?g:-g)*(q+Ie*($-L)/2+Ie*Ie*($-2*q+L)/2)-Je)*S;while(k(Ue)>x&&--qe>0);break}}while(--H>=0);var Qe=sa[H][0],lt=sa[H+1][0],ft=sa[n(19,H+2)][0];return[Xe/(lt+Ie*(ft-Qe)/2+Ie*Ie*(ft-2*lt+Qe)/2),B*w]};var zo=1e-4,Ro=1e4,ts=-180,fs=ts+zo,dr=180,Es=dr-zo,mo=-90,Fa=mo+zo,Fo=90,Vi=Fo-zo;function Oi(Xe){return Xe.length>0}function ni(Xe){return Xe===mo||Xe===Fo?[0,Xe]:[ts,(Je=Xe,Math.floor(Je*Ro)/Ro)];var Je}function no(Xe){var Je=Xe[0],ot=Xe[1],B=!1;return Je<=fs?(Je=ts,B=!0):Je>=Es&&(Je=dr,B=!0),ot<=Fa?(ot=mo,B=!0):ot>=Vi&&(ot=Fo,B=!0),B?[Je,ot]:Xe}function Ii(Xe){return Xe.map(no)}function yo(Xe,Je,ot){for(var B=0,G=Xe.length;B<G;++B){var H=Xe[B].slice();ot.push({index:-1,polygon:Je,ring:H});for(var L=0,q=H.length;L<q;++L){var $=H[L],ne=$[0],ue=$[1];if(ne<=fs||ne>=Es||ue<=Fa||ue>=Vi){H[L]=no($);for(var ye=L+1;ye<q;++ye){var Le=H[ye],Ie=Le[0],Ue=Le[1];if(Ie>fs&&Ie<Es&&Ue>Fa&&Ue<Vi)break}if(ye===L+1)continue;if(L){var qe={index:-1,polygon:Je,ring:H.slice(0,L+1)};qe.ring[qe.ring.length-1]=ni(ue),ot[ot.length-1]=qe}else ot.pop();if(ye>=q)break;ot.push({index:-1,polygon:Je,ring:H=H.slice(ye-1)}),H[0]=ni(H[0][1]),L=-1,q=H.length}}}}function Ls(Xe){var Je,ot,B,G,H,L,q=Xe.length,$={},ne={};for(Je=0;Je<q;++Je)B=(ot=Xe[Je]).ring[0],H=ot.ring[ot.ring.length-1],B[0]!==H[0]||B[1]!==H[1]?(ot.index=Je,$[B]=ne[H]=ot):(ot.polygon.push(ot.ring),Xe[Je]=null);for(Je=0;Je<q;++Je)if(ot=Xe[Je]){if(B=ot.ring[0],H=ot.ring[ot.ring.length-1],G=ne[B],L=$[H],delete $[B],delete ne[H],B[0]===H[0]&&B[1]===H[1]){ot.polygon.push(ot.ring);continue}G?(delete ne[B],delete $[G.ring[0]],G.ring.pop(),Xe[G.index]=null,ot={index:-1,polygon:G.polygon,ring:G.ring.concat(ot.ring)},G===L?ot.polygon.push(ot.ring):(ot.index=q++,Xe.push($[ot.ring[0]]=ne[ot.ring[ot.ring.length-1]]=ot))):L?(delete $[H],delete ne[L.ring[L.ring.length-1]],ot.ring.pop(),ot={index:q++,polygon:L.polygon,ring:ot.ring.concat(L.ring)},Xe[L.index]=null,Xe.push($[ot.ring[0]]=ne[ot.ring[ot.ring.length-1]]=ot)):(ot.ring.push(ot.ring[0]),ot.polygon.push(ot.ring))}}function Bo(Xe){var Je={type:"Feature",geometry:Hr(Xe.geometry)};return Xe.id!=null&&(Je.id=Xe.id),Xe.bbox!=null&&(Je.bbox=Xe.bbox),Xe.properties!=null&&(Je.properties=Xe.properties),Je}function Hr(Xe){if(Xe==null)return Xe;var Je,ot,B,G;switch(Xe.type){case"GeometryCollection":Je={type:"GeometryCollection",geometries:Xe.geometries.map(Hr)};break;case"Point":Je={type:"Point",coordinates:no(Xe.coordinates)};break;case"MultiPoint":case"LineString":Je={type:Xe.type,coordinates:Ii(Xe.coordinates)};break;case"MultiLineString":Je={type:"MultiLineString",coordinates:Xe.coordinates.map(Ii)};break;case"Polygon":var H=[];yo(Xe.coordinates,H,ot=[]),Ls(ot),Je={type:"Polygon",coordinates:H};break;case"MultiPolygon":ot=[],B=-1,G=Xe.coordinates.length;for(var L=new Array(G);++B<G;)yo(Xe.coordinates[B],L[B]=[],ot);Ls(ot),Je={type:"MultiPolygon",coordinates:L.filter(Oi)};break;default:return Xe}return Xe.bbox!=null&&(Je.bbox=Xe.bbox),Je}function Ha(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return Bo(Xe);case"FeatureCollection":var Je={type:"FeatureCollection",features:Xe.features.map(Bo)};return Xe.bbox!=null&&(Je.bbox=Xe.bbox),Je;default:return Hr(Xe)}}function li(Xe,Je){var ot=p(Je/2),B=u(v*ot);return[Xe*(.74482-.34588*B*B),1.70711*ot]}function ro(){return(0,M.c)(li).scale(146.153)}function ui(Xe,Je,ot){var B=(0,Jo.c)(Je,ot),G=B(.5),H=(0,Ye.c)([-G[0],-G[1]])(Je),L=B.distance/2,q=-E(u(H[1]*w)/u(L)),$=[-G[0],-G[1],-(H[0]>0?d-q:q)*S],ne=(0,M.c)(Xe(L)).rotate($),ue=(0,Ye.c)($),ye=ne.center;return delete ne.rotate,ne.center=function(Le){return arguments.length?ye(ue(Le)):ue.invert(ye())},ne.clipAngle(90)}function hs(Xe){var Je=b(Xe);function ot(B,G){var H=(0,Wr.Y)(B,G);return H[0]*=Je,H}return ot.invert=function(B,G){return Wr.Y.invert(B/Je,G)},ot}function ps(){return ci([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function ci(Xe,Je){return ui(hs,Xe,Je)}function Vr(Xe){if(!(Xe*=2))return Z.O;var Je=-Xe/2,ot=-Je,B=Xe*Xe,G=p(ot),H=.5/u(ot);function L(q,$){var ne=O(b($)*b(q-Je)),ue=O(b($)*b(q-ot));return[((ne*=ne)-(ue*=ue))/(2*Xe),($<0?-1:1)*C(4*B*ue-(B-ne+ue)*(B-ne+ue))/(2*Xe)]}return L.invert=function(q,$){var ne,ue,ye=$*$,Le=b(C(ye+(ne=q+Je)*ne)),Ie=b(C(ye+(ne=q+ot)*ne));return[T(ue=Le-Ie,ne=(Le+Ie)*G),($<0?-1:1)*O(C(ne*ne+ue*ue)*H)]},L}function ao(){return ns([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ns(Xe,Je){return ui(Vr,Xe,Je)}function qi(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=k(Je/g),B=E(ot);if(k(Xe)<c||k(k(Je)-g)<c)return[0,l(Je)*d*p(B/2)];var G=b(B),H=k(d/Xe-Xe/d)/2,L=H*H,q=G/(ot+G-1),$=q*(2/ot-1),ne=$*$,ue=ne+L,ye=q-ne,Le=L+q;return[l(Xe)*d*(H*ye+C(L*ye*ye-ue*(q*q-ne)))/ue,l(Je)*d*($*Le-H*C((L+1)*ue-Le*Le))/ue]}function ds(){return(0,M.c)(qi).scale(79.4183)}function gs(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=k(Je/g),B=E(ot);if(k(Xe)<c||k(k(Je)-g)<c)return[0,l(Je)*d*p(B/2)];var G=b(B),H=k(d/Xe-Xe/d)/2,L=H*H,q=G*(C(1+L)-H*G)/(1+L*ot*ot);return[l(Xe)*d*q,l(Je)*d*C(1-q*(2*H+q))]}function Hi(){return(0,M.c)(gs).scale(79.4183)}function la(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=Je/g,B=E(ot);if(k(Xe)<c||k(k(Je)-g)<c)return[0,d*p(B/2)];var G=(d/Xe-Xe/d)/2,H=ot/(1+b(B));return[d*(l(Xe)*C(G*G+1-H*H)-G),d*H]}function rs(){return(0,M.c)(la).scale(79.4183)}function kr(Xe,Je){if(!Je)return[Xe,0];var ot=k(Je);if(!Xe||ot===g)return[0,Je];var B=ot/g,G=B*B,H=(8*B-G*(G+2)-5)/(2*G*(B-1)),L=H*H,q=B*H,$=G+L+2*q,ne=B+3*H,ue=Xe/g,ye=ue+1/ue,Le=l(k(Xe)-g)*C(ye*ye-4),Ie=Le*Le,Ue=(Le*($+L-1)+2*C($*(G+L*Ie-1)+(1-G)*(G*(ne*ne+4*L)+12*q*L+4*L*L)))/(4*$+Ie);return[l(Xe)*g*Ue,l(Je)*g*C(1+Le*k(Ue)-Ue*Ue)]}function Cr(){return(0,M.c)(kr).scale(127.16)}function wi(Xe,Je,ot,B){var G=d/3;Xe=a(Xe,c),Je=a(Je,c),Xe=n(Xe,g),Je=n(Je,d-c),ot=a(ot,0),ot=n(ot,100-c);var H=(B=a(B,c))/100,L=O((ot/100+1)*b(G))/G,q=u(Xe)/u(L*g),$=Je/d,ne=C(H*u(Xe/2)/u(Je/2));return function(ue,ye,Le,Ie,Ue){function qe(Qe,lt){var ft=Le*u(Ie*lt),xt=C(1-ft*ft),St=C(2/(1+xt*b(Qe*=Ue)));return[ue*xt*St*u(Qe),ye*ft*St]}return qe.invert=function(Qe,lt){var ft=Qe/ue,xt=lt/ye,St=C(ft*ft+xt*xt),Tt=2*E(St/2);return[T(Qe*p(Tt),ue*St)/Ue,St&&E(lt*u(Tt)/(ye*Le*St))/Ie]},qe}(ne/C($*q*L),1/(ne*C($*q*L)),q,L,$)}function io(){var Xe=65*w,Je=60*w,ot=20,B=200,G=(0,M.U)(wi),H=G(Xe,Je,ot,B);return H.poleline=function(L){return arguments.length?G(Xe=+L*w,Je,ot,B):Xe*S},H.parallels=function(L){return arguments.length?G(Xe,Je=+L*w,ot,B):Je*S},H.inflation=function(L){return arguments.length?G(Xe,Je,ot=+L,B):ot},H.ratio=function(L){return arguments.length?G(Xe,Je,ot,B=+L):B},H.scale(163.775)}function xo(){return io().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}li.invert=function(Xe,Je){var ot=Je/1.70711,B=u(v*ot);return[Xe/(.74482-.34588*B*B),2*o(ot)]},qi.invert=function(Xe,Je){if(k(Je)<c)return[Xe,0];if(k(Xe)<c)return[0,g*u(2*o(Je/d))];var ot=(Xe/=d)*Xe,B=(Je/=d)*Je,G=ot+B,H=G*G,L=-k(Je)*(1+G),q=L-2*B+ot,$=-2*L+1+2*B+H,ne=B/$+(2*q*q*q/($*$*$)-9*L*q/($*$))/27,ue=(L-q*q/(3*$))/$,ye=2*C(-ue/3),Le=O(3*ne/(ue*ye))/3;return[d*(G-1+C(1+2*(ot-B)+H))/(2*Xe),l(Je)*d*(-ye*b(Le+d/3)-q/(3*$))]},gs.invert=function(Xe,Je){if(!Xe)return[0,g*u(2*o(Je/d))];var ot=k(Xe/d),B=(1-ot*ot-(Je/=d)*Je)/(2*ot),G=C(B*B+1);return[l(Xe)*d*(G-B),l(Je)*g*u(2*T(C((1-2*B*ot)*(B+G)-ot),C(G+B+ot)))]},la.invert=function(Xe,Je){if(!Je)return[Xe,0];var ot=Je/d,B=(d*d*(1-ot*ot)-Xe*Xe)/(2*d*Xe);return[Xe?d*(l(Xe)*C(B*B+1)-B):0,g*u(2*o(ot))]},kr.invert=function(Xe,Je){var ot;if(!Xe||!Je)return[Xe,Je];Je/=d;var B=l(Xe)*Xe/g,G=(B*B-1+4*Je*Je)/k(B),H=G*G,L=2*Je,q=50;do{var $=L*L,ne=(8*L-$*($+2)-5)/(2*$*(L-1)),ue=(3*L-$*L-10)/(2*$*L),ye=ne*ne,Le=L*ne,Ie=L+ne,Ue=Ie*Ie,qe=L+3*ne,Qe=-2*Ie*(4*Le*ye+(1-4*$+3*$*$)*(1+ue)+ye*(14*$-6-H+(8*$-8-2*H)*ue)+Le*(12*$-8+(10*$-10-H)*ue)),lt=C(Ue*($+ye*H-1)+(1-$)*($*(qe*qe+4*ye)+ye*(12*Le+4*ye)));L-=ot=(G*(Ue+ye-1)+2*lt-B*(4*Ue+H))/(G*(2*ne*ue+2*Ie*(1+ue))+Qe/lt-8*Ie*(G*(-1+ye+Ue)+2*lt)*(1+ue)/(H+4*Ue))}while(ot>c&&--q>0);return[l(Xe)*(C(G*G+4)+G)*d/4,g*L]};var La=4*d+3*C(3),oo=2*C(2*d*C(3)/La),Qr=_e(oo*C(3)/d,oo,La/6);function fl(){return(0,M.c)(Qr).scale(176.84)}function Ti(Xe,Je){return[Xe*C(1-3*Je*Je/(d*d)),Je]}function na(){return(0,M.c)(Ti).scale(152.63)}function da(Xe,Je){var ot=b(Je),B=b(Xe)*ot,G=1-B,H=b(Xe=T(u(Xe)*ot,-u(Je))),L=u(Xe);return[L*(ot=C(1-B*B))-H*G,-H*ot-L*G]}function gi(){return(0,M.c)(da).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function No(Xe,Je){var ot=N(Xe,Je);return[(ot[0]+Xe/g)/2,(ot[1]+Je)/2]}function Qs(){return(0,M.c)(No).scale(158.837)}Ti.invert=function(Xe,Je){return[Xe/C(1-3*Je*Je/(d*d)),Je]},da.invert=function(Xe,Je){var ot=(Xe*Xe+Je*Je)/-2,B=C(-ot*(2+ot)),G=Je*ot+Xe*B,H=Xe*ot-Je*B,L=C(H*H+G*G);return[T(B*G,L*(1+ot)),L?-E(B*H/L):0]},No.invert=function(Xe,Je){var ot=Xe,B=Je,G=25;do{var H,L=b(B),q=u(B),$=u(2*B),ne=q*q,ue=L*L,ye=u(ot),Le=b(ot/2),Ie=u(ot/2),Ue=Ie*Ie,qe=1-ue*Le*Le,Qe=qe?O(L*Le)*C(H=1/qe):H=0,lt=.5*(2*Qe*L*Ie+ot/g)-Xe,ft=.5*(Qe*q+B)-Je,xt=.5*H*(ue*Ue+Qe*L*Le*ne)+.5/g,St=H*(ye*$/4-Qe*q*Ie),Tt=.125*H*($*Ie-Qe*q*ue*ye),zt=.5*H*(ne*Le+Qe*Ue*L)+.5,Et=St*Tt-zt*xt,Yt=(ft*St-lt*zt)/Et,qt=(lt*Tt-ft*xt)/Et;ot-=Yt,B-=qt}while((k(Yt)>c||k(qt)>c)&&--G>0);return[ot,B]}},88728:function(ee,z,e){function M(){return new k}function k(){this.reset()}e.d(z,{c:function(){return M}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(o,b,this.t),T(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new k;function T(b,h,s){var t=b.s=h+s,a=t-h,n=t-a;b.t=h-n+(s-a)}},95384:function(ee,z,e){e.d(z,{cp:function(){return x},mQ:function(){return n},oB:function(){return i}});var M,k,o,T,b,h=e(88728),s=e(64528),t=e(70932),a=e(16016),n=(0,h.c)(),r=(0,h.c)(),i={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){n.reset(),i.lineStart=l,i.lineEnd=u},polygonEnd:function(){var d=+n;r.add(d<0?s.kD+d:d),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){r.add(s.kD)}};function l(){i.point=p}function u(){c(M,k)}function p(d,g){i.point=c,M=d,k=g,d*=s.qw,g*=s.qw,o=d,T=(0,s.W8)(g=g/2+s.wL),b=(0,s.g$)(g)}function c(d,g){d*=s.qw,g=(g*=s.qw)/2+s.wL;var v=d-o,y=v>=0?1:-1,m=y*v,_=(0,s.W8)(g),f=(0,s.g$)(g),S=b*f,w=T*_+S*(0,s.W8)(m),E=S*y*(0,s.g$)(m);n.add((0,s.WE)(E,w)),o=d,T=_,b=f}function x(d){return r.reset(),(0,a.c)(d,i),2*r}},13696:function(ee,z,e){e.d(z,{c:function(){return O}});var M,k,o,T,b,h,s,t,a,n,r=e(88728),i=e(95384),l=e(84220),u=e(64528),p=e(16016),c=(0,r.c)(),x={point:d,lineStart:v,lineEnd:y,polygonStart:function(){x.point=m,x.lineStart=_,x.lineEnd=f,c.reset(),i.oB.polygonStart()},polygonEnd:function(){i.oB.polygonEnd(),x.point=d,x.lineStart=v,x.lineEnd=y,i.mQ<0?(M=-(o=180),k=-(T=90)):c>u.Gg?T=90:c<-u.Gg&&(k=-90),n[0]=M,n[1]=o},sphere:function(){M=-(o=180),k=-(T=90)}};function d(C,P){a.push(n=[M=C,o=C]),P<k&&(k=P),P>T&&(T=P)}function g(C,P){var R=(0,l.ux)([C*u.qw,P*u.qw]);if(t){var j=(0,l.CW)(t,R),D=[j[1],-j[0],0],N=(0,l.CW)(D,j);(0,l.cJ)(N),N=(0,l.G)(N);var W,F=C-b,V=F>0?1:-1,U=N[0]*u.oh*V,te=(0,u.a2)(F)>180;te^(V*b<U&&U<V*C)?(W=N[1]*u.oh)>T&&(T=W):te^(V*b<(U=(U+360)%360-180)&&U<V*C)?(W=-N[1]*u.oh)<k&&(k=W):(P<k&&(k=P),P>T&&(T=P)),te?C<b?S(M,C)>S(M,o)&&(o=C):S(C,o)>S(M,o)&&(M=C):o>=M?(C<M&&(M=C),C>o&&(o=C)):C>b?S(M,C)>S(M,o)&&(o=C):S(C,o)>S(M,o)&&(M=C)}else a.push(n=[M=C,o=C]);P<k&&(k=P),P>T&&(T=P),t=R,b=C}function v(){x.point=g}function y(){n[0]=M,n[1]=o,x.point=d,t=null}function m(C,P){if(t){var R=C-b;c.add((0,u.a2)(R)>180?R+(R>0?360:-360):R)}else h=C,s=P;i.oB.point(C,P),g(C,P)}function _(){i.oB.lineStart()}function f(){m(h,s),i.oB.lineEnd(),(0,u.a2)(c)>u.Gg&&(M=-(o=180)),n[0]=M,n[1]=o,t=null}function S(C,P){return(P-=C)<0?P+360:P}function w(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function O(C){var P,R,j,D,N,W,F;if(T=o=-(M=k=1/0),a=[],(0,p.c)(C,x),R=a.length){for(a.sort(w),P=1,N=[j=a[0]];P<R;++P)E(j,(D=a[P])[0])||E(j,D[1])?(S(j[0],D[1])>S(j[0],j[1])&&(j[1]=D[1]),S(D[0],j[1])>S(j[0],j[1])&&(j[0]=D[0])):N.push(j=D);for(W=-1/0,P=0,j=N[R=N.length-1];P<=R;j=D,++P)D=N[P],(F=S(j[1],D[0]))>W&&(W=F,M=D[0],o=j[1])}return a=n=null,M===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,k],[o,T]]}},84220:function(ee,z,e){e.d(z,{CW:function(){return b},Ez:function(){return T},G:function(){return k},cJ:function(){return t},mg:function(){return h},ux:function(){return o},wx:function(){return s}});var M=e(64528);function k(a){return[(0,M.WE)(a[1],a[0]),(0,M.qR)(a[2])]}function o(a){var n=a[0],r=a[1],i=(0,M.W8)(r);return[i*(0,M.W8)(n),i*(0,M.g$)(n),(0,M.g$)(r)]}function T(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}function b(a,n){return[a[1]*n[2]-a[2]*n[1],a[2]*n[0]-a[0]*n[2],a[0]*n[1]-a[1]*n[0]]}function h(a,n){a[0]+=n[0],a[1]+=n[1],a[2]+=n[2]}function s(a,n){return[a[0]*n,a[1]*n,a[2]*n]}function t(a){var n=(0,M._I)(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=n,a[1]/=n,a[2]/=n}},24052:function(ee,z,e){e.d(z,{c:function(){return R}});var M,k,o,T,b,h,s,t,a,n,r,i,l,u,p,c,x=e(64528),d=e(70932),g=e(16016),v={sphere:d.c,point:y,lineStart:_,lineEnd:w,polygonStart:function(){v.lineStart=E,v.lineEnd=O},polygonEnd:function(){v.lineStart=_,v.lineEnd=w}};function y(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D);m(N*(0,x.W8)(j),N*(0,x.g$)(j),(0,x.g$)(D))}function m(j,D,N){++M,o+=(j-o)/M,T+=(D-T)/M,b+=(N-b)/M}function _(){v.point=f}function f(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D);u=N*(0,x.W8)(j),p=N*(0,x.g$)(j),c=(0,x.g$)(D),v.point=S,m(u,p,c)}function S(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D),W=N*(0,x.W8)(j),F=N*(0,x.g$)(j),V=(0,x.g$)(D),U=(0,x.WE)((0,x._I)((U=p*V-c*F)*U+(U=c*W-u*V)*U+(U=u*F-p*W)*U),u*W+p*F+c*V);k+=U,h+=U*(u+(u=W)),s+=U*(p+(p=F)),t+=U*(c+(c=V)),m(u,p,c)}function w(){v.point=y}function E(){v.point=C}function O(){P(i,l),v.point=y}function C(j,D){i=j,l=D,j*=x.qw,D*=x.qw,v.point=P;var N=(0,x.W8)(D);u=N*(0,x.W8)(j),p=N*(0,x.g$)(j),c=(0,x.g$)(D),m(u,p,c)}function P(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D),W=N*(0,x.W8)(j),F=N*(0,x.g$)(j),V=(0,x.g$)(D),U=p*V-c*F,te=c*W-u*V,J=u*F-p*W,X=(0,x._I)(U*U+te*te+J*J),K=(0,x.qR)(X),Q=X&&-K/X;a+=Q*U,n+=Q*te,r+=Q*J,k+=K,h+=K*(u+(u=W)),s+=K*(p+(p=F)),t+=K*(c+(c=V)),m(u,p,c)}function R(j){M=k=o=T=b=h=s=t=a=n=r=0,(0,g.c)(j,v);var D=a,N=n,W=r,F=D*D+N*N+W*W;return F<x.a8&&(D=h,N=s,W=t,k<x.Gg&&(D=o,N=T,W=b),(F=D*D+N*N+W*W)<x.a8)?[NaN,NaN]:[(0,x.WE)(N,D)*x.oh,(0,x.qR)(W/(0,x._I)(F))*x.oh]}},61780:function(ee,z,e){e.d(z,{Q:function(){return b},c:function(){return s}});var M=e(84220);function k(t){return function(){return t}}var o=e(64528),T=e(92992);function b(t,a,n,r,i,l){if(n){var u=(0,o.W8)(a),p=(0,o.g$)(a),c=r*n;i==null?(i=a+r*o.kD,l=a-c/2):(i=h(u,i),l=h(u,l),(r>0?i<l:i>l)&&(i+=r*o.kD));for(var x,d=i;r>0?d>l:d<l;d-=c)x=(0,M.G)([u,-p*(0,o.W8)(d),-p*(0,o.g$)(d)]),t.point(x[0],x[1])}}function h(t,a){(a=(0,M.ux)(a))[0]-=t,(0,M.cJ)(a);var n=(0,o.mE)(-a[1]);return((-a[2]<0?-n:n)+o.kD-o.Gg)%o.kD}function s(){var t,a,n=k([0,0]),r=k(90),i=k(6),l={point:function(p,c){t.push(p=a(p,c)),p[0]*=o.oh,p[1]*=o.oh}};function u(){var p=n.apply(this,arguments),c=r.apply(this,arguments)*o.qw,x=i.apply(this,arguments)*o.qw;return t=[],a=(0,T.O)(-p[0]*o.qw,-p[1]*o.qw,0).invert,b(l,c,x,1),p={type:"Polygon",coordinates:[t]},t=a=null,p}return u.center=function(p){return arguments.length?(n=typeof p=="function"?p:k([+p[0],+p[1]]),u):n},u.radius=function(p){return arguments.length?(r=typeof p=="function"?p:k(+p),u):r},u.precision=function(p){return arguments.length?(i=typeof p=="function"?p:k(+p),u):i},u}},78284:function(ee,z,e){var M=e(14229),k=e(64528);z.c=(0,M.c)(function(){return!0},function(o){var T,b=NaN,h=NaN,s=NaN;return{lineStart:function(){o.lineStart(),T=1},point:function(t,a){var n=t>0?k.pi:-k.pi,r=(0,k.a2)(t-b);(0,k.a2)(r-k.pi)<k.Gg?(o.point(b,h=(h+a)/2>0?k.or:-k.or),o.point(s,h),o.lineEnd(),o.lineStart(),o.point(n,h),o.point(t,h),T=0):s!==n&&r>=k.pi&&((0,k.a2)(b-s)<k.Gg&&(b-=s*k.Gg),(0,k.a2)(t-n)<k.Gg&&(t-=n*k.Gg),h=function(i,l,u,p){var c,x,d=(0,k.g$)(i-u);return(0,k.a2)(d)>k.Gg?(0,k.MQ)(((0,k.g$)(l)*(x=(0,k.W8)(p))*(0,k.g$)(u)-(0,k.g$)(p)*(c=(0,k.W8)(l))*(0,k.g$)(i))/(c*x*d)):(l+p)/2}(b,h,t,a),o.point(s,h),o.lineEnd(),o.lineStart(),o.point(n,h),T=0),o.point(b=t,h=a),s=n},lineEnd:function(){o.lineEnd(),b=h=NaN},clean:function(){return 2-T}}},function(o,T,b,h){var s;if(o==null)s=b*k.or,h.point(-k.pi,s),h.point(0,s),h.point(k.pi,s),h.point(k.pi,0),h.point(k.pi,-s),h.point(0,-s),h.point(-k.pi,-s),h.point(-k.pi,0),h.point(-k.pi,s);else if((0,k.a2)(o[0]-T[0])>k.Gg){var t=o[0]<T[0]?k.pi:-k.pi;s=b*t/2,h.point(-t,s),h.point(0,s),h.point(t,s)}else h.point(T[0],T[1])},[-k.pi,-k.or])},97208:function(ee,z,e){e.d(z,{c:function(){return k}});var M=e(70932);function k(){var o,T=[];return{point:function(b,h,s){o.push([b,h,s])},lineStart:function(){T.push(o=[])},lineEnd:M.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],o=null,b}}}},2728:function(ee,z,e){e.d(z,{c:function(){return h}});var M=e(84220),k=e(61780),o=e(64528),T=e(41860),b=e(14229);function h(s){var t=(0,o.W8)(s),a=6*o.qw,n=t>0,r=(0,o.a2)(t)>o.Gg;function i(p,c){return(0,o.W8)(p)*(0,o.W8)(c)>t}function l(p,c,x){var d=(0,M.ux)(p),g=(0,M.ux)(c),v=[1,0,0],y=(0,M.CW)(d,g),m=(0,M.Ez)(y,y),_=y[0],f=m-_*_;if(!f)return!x&&p;var S=t*m/f,w=-t*_/f,E=(0,M.CW)(v,y),O=(0,M.wx)(v,S),C=(0,M.wx)(y,w);(0,M.mg)(O,C);var P=E,R=(0,M.Ez)(O,P),j=(0,M.Ez)(P,P),D=R*R-j*((0,M.Ez)(O,O)-1);if(!(D<0)){var N=(0,o._I)(D),W=(0,M.wx)(P,(-R-N)/j);if((0,M.mg)(W,O),W=(0,M.G)(W),!x)return W;var F,V=p[0],U=c[0],te=p[1],J=c[1];U<V&&(F=V,V=U,U=F);var X=U-V,K=(0,o.a2)(X-o.pi)<o.Gg;if(!K&&J<te&&(F=te,te=J,J=F),K||X<o.Gg?K?te+J>0^W[1]<((0,o.a2)(W[0]-V)<o.Gg?te:J):te<=W[1]&&W[1]<=J:X>o.pi^(V<=W[0]&&W[0]<=U)){var Q=(0,M.wx)(P,(-R+N)/j);return(0,M.mg)(Q,O),[W,(0,M.G)(Q)]}}}function u(p,c){var x=n?s:o.pi-s,d=0;return p<-x?d|=1:p>x&&(d|=2),c<-x?d|=4:c>x&&(d|=8),d}return(0,b.c)(i,function(p){var c,x,d,g,v;return{lineStart:function(){g=d=!1,v=1},point:function(y,m){var _,f=[y,m],S=i(y,m),w=n?S?0:u(y,m):S?u(y+(y<0?o.pi:-o.pi),m):0;if(!c&&(g=d=S)&&p.lineStart(),S!==d&&(!(_=l(c,f))||(0,T.c)(c,_)||(0,T.c)(f,_))&&(f[2]=1),S!==d)v=0,S?(p.lineStart(),_=l(f,c),p.point(_[0],_[1])):(_=l(c,f),p.point(_[0],_[1],2),p.lineEnd()),c=_;else if(r&&c&&n^S){var E;w&x||!(E=l(f,c,!0))||(v=0,n?(p.lineStart(),p.point(E[0][0],E[0][1]),p.point(E[1][0],E[1][1]),p.lineEnd()):(p.point(E[1][0],E[1][1]),p.lineEnd(),p.lineStart(),p.point(E[0][0],E[0][1],3)))}!S||c&&(0,T.c)(c,f)||p.point(f[0],f[1]),c=f,d=S,x=w},lineEnd:function(){d&&p.lineEnd(),c=null},clean:function(){return v|(g&&d)<<1}}},function(p,c,x,d){(0,k.Q)(d,s,a,x,p,c)},n?[0,-s]:[-o.pi,s-o.pi])}},14229:function(ee,z,e){e.d(z,{c:function(){return h}});var M=e(97208),k=e(32232),o=e(64528),T=e(58196),b=e(84706);function h(a,n,r,i){return function(l){var u,p,c,x=n(l),d=(0,M.c)(),g=n(d),v=!1,y={point:m,lineStart:f,lineEnd:S,polygonStart:function(){y.point=w,y.lineStart=E,y.lineEnd=O,p=[],u=[]},polygonEnd:function(){y.point=m,y.lineStart=f,y.lineEnd=S,p=(0,b.Uf)(p);var C=(0,T.c)(u,i);p.length?(v||(l.polygonStart(),v=!0),(0,k.c)(p,t,C,r,l)):C&&(v||(l.polygonStart(),v=!0),l.lineStart(),r(null,null,1,l),l.lineEnd()),v&&(l.polygonEnd(),v=!1),p=u=null},sphere:function(){l.polygonStart(),l.lineStart(),r(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function m(C,P){a(C,P)&&l.point(C,P)}function _(C,P){x.point(C,P)}function f(){y.point=_,x.lineStart()}function S(){y.point=m,x.lineEnd()}function w(C,P){c.push([C,P]),g.point(C,P)}function E(){g.lineStart(),c=[]}function O(){w(c[0][0],c[0][1]),g.lineEnd();var C,P,R,j,D=g.clean(),N=d.result(),W=N.length;if(c.pop(),u.push(c),c=null,W)if(1&D){if((P=(R=N[0]).length-1)>0){for(v||(l.polygonStart(),v=!0),l.lineStart(),C=0;C<P;++C)l.point((j=R[C])[0],j[1]);l.lineEnd()}}else W>1&&2&D&&N.push(N.pop().concat(N.shift())),p.push(N.filter(s))}return y}}function s(a){return a.length>1}function t(a,n){return((a=a.x)[0]<0?a[1]-o.or-o.Gg:o.or-a[1])-((n=n.x)[0]<0?n[1]-o.or-o.Gg:o.or-n[1])}},21676:function(ee,z,e){e.d(z,{c:function(){return s}});var M=e(64528),k=e(97208),o=e(32232),T=e(84706),b=1e9,h=-1e9;function s(t,a,n,r){function i(x,d){return t<=x&&x<=n&&a<=d&&d<=r}function l(x,d,g,v){var y=0,m=0;if(x==null||(y=u(x,g))!==(m=u(d,g))||c(x,d)<0^g>0)do v.point(y===0||y===3?t:n,y>1?r:a);while((y=(y+g+4)%4)!==m);else v.point(d[0],d[1])}function u(x,d){return(0,M.a2)(x[0]-t)<M.Gg?d>0?0:3:(0,M.a2)(x[0]-n)<M.Gg?d>0?2:1:(0,M.a2)(x[1]-a)<M.Gg?d>0?1:0:d>0?3:2}function p(x,d){return c(x.x,d.x)}function c(x,d){var g=u(x,1),v=u(d,1);return g!==v?g-v:g===0?d[1]-x[1]:g===1?x[0]-d[0]:g===2?x[1]-d[1]:d[0]-x[0]}return function(x){var d,g,v,y,m,_,f,S,w,E,O,C=x,P=(0,k.c)(),R={point:j,lineStart:function(){R.point=D,g&&g.push(v=[]),E=!0,w=!1,f=S=NaN},lineEnd:function(){d&&(D(y,m),_&&w&&P.rejoin(),d.push(P.result())),R.point=j,w&&C.lineEnd()},polygonStart:function(){C=P,d=[],g=[],O=!0},polygonEnd:function(){var N=function(){for(var V=0,U=0,te=g.length;U<te;++U)for(var J,X,K=g[U],Q=1,Z=K.length,re=K[0],oe=re[0],ae=re[1];Q<Z;++Q)J=oe,X=ae,oe=(re=K[Q])[0],ae=re[1],X<=r?ae>r&&(oe-J)*(r-X)>(ae-X)*(t-J)&&++V:ae<=r&&(oe-J)*(r-X)<(ae-X)*(t-J)&&--V;return V}(),W=O&&N,F=(d=(0,T.Uf)(d)).length;(W||F)&&(x.polygonStart(),W&&(x.lineStart(),l(null,null,1,x),x.lineEnd()),F&&(0,o.c)(d,p,N,l,x),x.polygonEnd()),C=x,d=g=v=null}};function j(N,W){i(N,W)&&C.point(N,W)}function D(N,W){var F=i(N,W);if(g&&v.push([N,W]),E)y=N,m=W,_=F,E=!1,F&&(C.lineStart(),C.point(N,W));else if(F&&w)C.point(N,W);else{var V=[f=Math.max(h,Math.min(b,f)),S=Math.max(h,Math.min(b,S))],U=[N=Math.max(h,Math.min(b,N)),W=Math.max(h,Math.min(b,W))];(function(te,J,X,K,Q,Z){var re,oe=te[0],ae=te[1],ce=0,he=1,pe=J[0]-oe,xe=J[1]-ae;if(re=X-oe,pe||!(re>0)){if(re/=pe,pe<0){if(re<ce)return;re<he&&(he=re)}else if(pe>0){if(re>he)return;re>ce&&(ce=re)}if(re=Q-oe,pe||!(re<0)){if(re/=pe,pe<0){if(re>he)return;re>ce&&(ce=re)}else if(pe>0){if(re<ce)return;re<he&&(he=re)}if(re=K-ae,xe||!(re>0)){if(re/=xe,xe<0){if(re<ce)return;re<he&&(he=re)}else if(xe>0){if(re>he)return;re>ce&&(ce=re)}if(re=Z-ae,xe||!(re<0)){if(re/=xe,xe<0){if(re>he)return;re>ce&&(ce=re)}else if(xe>0){if(re<ce)return;re<he&&(he=re)}return ce>0&&(te[0]=oe+ce*pe,te[1]=ae+ce*xe),he<1&&(J[0]=oe+he*pe,J[1]=ae+he*xe),!0}}}}})(V,U,t,a,n,r)?(w||(C.lineStart(),C.point(V[0],V[1])),C.point(U[0],U[1]),F||C.lineEnd(),O=!1):F&&(C.lineStart(),C.point(N,W),O=!1)}f=N,S=W,w=F}return R}}},32232:function(ee,z,e){e.d(z,{c:function(){return T}});var M=e(41860),k=e(64528);function o(h,s,t,a){this.x=h,this.z=s,this.o=t,this.e=a,this.v=!1,this.n=this.p=null}function T(h,s,t,a,n){var r,i,l=[],u=[];if(h.forEach(function(v){if(!((y=v.length-1)<=0)){var y,m,_=v[0],f=v[y];if((0,M.c)(_,f)){if(!_[2]&&!f[2]){for(n.lineStart(),r=0;r<y;++r)n.point((_=v[r])[0],_[1]);return void n.lineEnd()}f[0]+=2*k.Gg}l.push(m=new o(_,v,null,!0)),u.push(m.o=new o(_,null,m,!1)),l.push(m=new o(f,v,null,!1)),u.push(m.o=new o(f,null,m,!0))}}),l.length){for(u.sort(s),b(l),b(u),r=0,i=u.length;r<i;++r)u[r].e=t=!t;for(var p,c,x=l[0];;){for(var d=x,g=!0;d.v;)if((d=d.n)===x)return;p=d.z,n.lineStart();do{if(d.v=d.o.v=!0,d.e){if(g)for(r=0,i=p.length;r<i;++r)n.point((c=p[r])[0],c[1]);else a(d.x,d.n.x,1,n);d=d.n}else{if(g)for(p=d.p.z,r=p.length-1;r>=0;--r)n.point((c=p[r])[0],c[1]);else a(d.x,d.p.x,-1,n);d=d.p}p=(d=d.o).z,g=!g}while(!d.v);n.lineEnd()}}}function b(h){if(s=h.length){for(var s,t,a=0,n=h[0];++a<s;)n.n=t=h[a],t.p=n,n=t;n.n=t=h[0],t.p=n}}},68120:function(ee,z,e){function M(k,o){function T(b,h){return b=k(b,h),o(b[0],b[1])}return k.invert&&o.invert&&(T.invert=function(b,h){return(b=o.invert(b,h))&&k.invert(b[0],b[1])}),T}e.d(z,{c:function(){return M}})},7376:function(ee,z,e){function M(k){return k}e.d(z,{c:function(){return M}})},83356:function(ee,z,e){e.r(z),e.d(z,{geoAlbers:function(){return gt},geoAlbersUsa:function(){return kt},geoArea:function(){return M.cp},geoAzimuthalEqualArea:function(){return yt.c},geoAzimuthalEqualAreaRaw:function(){return yt.y},geoAzimuthalEquidistant:function(){return Mt.c},geoAzimuthalEquidistantRaw:function(){return Mt.O},geoBounds:function(){return k.c},geoCentroid:function(){return o.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return b.c},geoClipCircle:function(){return h.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.c},geoConicConformal:function(){return Ht},geoConicConformalRaw:function(){return Bt},geoConicEqualArea:function(){return pt},geoConicEqualAreaRaw:function(){return ct},geoConicEquidistant:function(){return Tn},geoConicEquidistantRaw:function(){return Cn},geoContains:function(){return N},geoDistance:function(){return S},geoEqualEarth:function(){return xn},geoEqualEarthRaw:function(){return mn},geoEquirectangular:function(){return Qt.c},geoEquirectangularRaw:function(){return Qt.u},geoGnomonic:function(){return Pn.c},geoGnomonicRaw:function(){return Pn.Y},geoGraticule:function(){return U},geoGraticule10:function(){return te},geoIdentity:function(){return _n},geoInterpolate:function(){return Z.c},geoLength:function(){return m},geoMercator:function(){return It},geoMercatorRaw:function(){return Ct},geoNaturalEarth1:function(){return Rn.c},geoNaturalEarth1Raw:function(){return Rn.g},geoOrthographic:function(){return In.c},geoOrthographicRaw:function(){return In.t},geoPath:function(){return Fe},geoProjection:function(){return nt.c},geoProjectionMutator:function(){return nt.U},geoRotation:function(){return Lt.c},geoStereographic:function(){return er},geoStereographicRaw:function(){return tr},geoStream:function(){return c.c},geoTransform:function(){return Mn.c},geoTransverseMercator:function(){return or},geoTransverseMercatorRaw:function(){return Wn}});var M=e(95384),k=e(13696),o=e(24052),T=e(61780),b=e(78284),h=e(2728),s=e(21676);function t(){var Jt,en,En,gn=0,Ln=0,Hn=960,Nn=500;return En={stream:function(Yn){return Jt&&en===Yn?Jt:Jt=(0,s.c)(gn,Ln,Hn,Nn)(en=Yn)},extent:function(Yn){return arguments.length?(gn=+Yn[0][0],Ln=+Yn[0][1],Hn=+Yn[1][0],Nn=+Yn[1][1],Jt=en=null,En):[[gn,Ln],[Hn,Nn]]}}}var a,n,r,i=e(58196),l=e(88728),u=e(64528),p=e(70932),c=e(16016),x=(0,l.c)(),d={sphere:p.c,point:p.c,lineStart:function(){d.point=v,d.lineEnd=g},lineEnd:p.c,polygonStart:p.c,polygonEnd:p.c};function g(){d.point=d.lineEnd=p.c}function v(Jt,en){Jt*=u.qw,en*=u.qw,a=Jt,n=(0,u.g$)(en),r=(0,u.W8)(en),d.point=y}function y(Jt,en){Jt*=u.qw,en*=u.qw;var En=(0,u.g$)(en),gn=(0,u.W8)(en),Ln=(0,u.a2)(Jt-a),Hn=(0,u.W8)(Ln),Nn=gn*(0,u.g$)(Ln),Yn=r*En-n*gn*Hn,fr=n*En+r*gn*Hn;x.add((0,u.WE)((0,u._I)(Nn*Nn+Yn*Yn),fr)),a=Jt,n=En,r=gn}function m(Jt){return x.reset(),(0,c.c)(Jt,d),+x}var _=[null,null],f={type:"LineString",coordinates:_};function S(Jt,en){return _[0]=Jt,_[1]=en,m(f)}var w={Feature:function(Jt,en){return O(Jt.geometry,en)},FeatureCollection:function(Jt,en){for(var En=Jt.features,gn=-1,Ln=En.length;++gn<Ln;)if(O(En[gn].geometry,en))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Jt,en){return C(Jt.coordinates,en)},MultiPoint:function(Jt,en){for(var En=Jt.coordinates,gn=-1,Ln=En.length;++gn<Ln;)if(C(En[gn],en))return!0;return!1},LineString:function(Jt,en){return P(Jt.coordinates,en)},MultiLineString:function(Jt,en){for(var En=Jt.coordinates,gn=-1,Ln=En.length;++gn<Ln;)if(P(En[gn],en))return!0;return!1},Polygon:function(Jt,en){return R(Jt.coordinates,en)},MultiPolygon:function(Jt,en){for(var En=Jt.coordinates,gn=-1,Ln=En.length;++gn<Ln;)if(R(En[gn],en))return!0;return!1},GeometryCollection:function(Jt,en){for(var En=Jt.geometries,gn=-1,Ln=En.length;++gn<Ln;)if(O(En[gn],en))return!0;return!1}};function O(Jt,en){return!(!Jt||!E.hasOwnProperty(Jt.type))&&E[Jt.type](Jt,en)}function C(Jt,en){return S(Jt,en)===0}function P(Jt,en){for(var En,gn,Ln,Hn=0,Nn=Jt.length;Hn<Nn;Hn++){if((gn=S(Jt[Hn],en))===0||Hn>0&&(Ln=S(Jt[Hn],Jt[Hn-1]))>0&&En<=Ln&&gn<=Ln&&(En+gn-Ln)*(1-Math.pow((En-gn)/Ln,2))<u.a8*Ln)return!0;En=gn}return!1}function R(Jt,en){return!!(0,i.c)(Jt.map(j),D(en))}function j(Jt){return(Jt=Jt.map(D)).pop(),Jt}function D(Jt){return[Jt[0]*u.qw,Jt[1]*u.qw]}function N(Jt,en){return(Jt&&w.hasOwnProperty(Jt.type)?w[Jt.type]:O)(Jt,en)}var W=e(84706);function F(Jt,en,En){var gn=(0,W.ik)(Jt,en-u.Gg,En).concat(en);return function(Ln){return gn.map(function(Hn){return[Ln,Hn]})}}function V(Jt,en,En){var gn=(0,W.ik)(Jt,en-u.Gg,En).concat(en);return function(Ln){return gn.map(function(Hn){return[Hn,Ln]})}}function U(){var Jt,en,En,gn,Ln,Hn,Nn,Yn,fr,Xt,pn,bt,Ut=10,Kt=Ut,un=90,cn=360,vn=2.5;function tn(){return{type:"MultiLineString",coordinates:Vt()}}function Vt(){return(0,W.ik)((0,u.Km)(gn/un)*un,En,un).map(pn).concat((0,W.ik)((0,u.Km)(Yn/cn)*cn,Nn,cn).map(bt)).concat((0,W.ik)((0,u.Km)(en/Ut)*Ut,Jt,Ut).filter(function(Gt){return(0,u.a2)(Gt%un)>u.Gg}).map(fr)).concat((0,W.ik)((0,u.Km)(Hn/Kt)*Kt,Ln,Kt).filter(function(Gt){return(0,u.a2)(Gt%cn)>u.Gg}).map(Xt))}return tn.lines=function(){return Vt().map(function(Gt){return{type:"LineString",coordinates:Gt}})},tn.outline=function(){return{type:"Polygon",coordinates:[pn(gn).concat(bt(Nn).slice(1),pn(En).reverse().slice(1),bt(Yn).reverse().slice(1))]}},tn.extent=function(Gt){return arguments.length?tn.extentMajor(Gt).extentMinor(Gt):tn.extentMinor()},tn.extentMajor=function(Gt){return arguments.length?(gn=+Gt[0][0],En=+Gt[1][0],Yn=+Gt[0][1],Nn=+Gt[1][1],gn>En&&(Gt=gn,gn=En,En=Gt),Yn>Nn&&(Gt=Yn,Yn=Nn,Nn=Gt),tn.precision(vn)):[[gn,Yn],[En,Nn]]},tn.extentMinor=function(Gt){return arguments.length?(en=+Gt[0][0],Jt=+Gt[1][0],Hn=+Gt[0][1],Ln=+Gt[1][1],en>Jt&&(Gt=en,en=Jt,Jt=Gt),Hn>Ln&&(Gt=Hn,Hn=Ln,Ln=Gt),tn.precision(vn)):[[en,Hn],[Jt,Ln]]},tn.step=function(Gt){return arguments.length?tn.stepMajor(Gt).stepMinor(Gt):tn.stepMinor()},tn.stepMajor=function(Gt){return arguments.length?(un=+Gt[0],cn=+Gt[1],tn):[un,cn]},tn.stepMinor=function(Gt){return arguments.length?(Ut=+Gt[0],Kt=+Gt[1],tn):[Ut,Kt]},tn.precision=function(Gt){return arguments.length?(vn=+Gt,fr=F(Hn,Ln,90),Xt=V(en,Jt,vn),pn=F(Yn,Nn,90),bt=V(gn,En,vn),tn):vn},tn.extentMajor([[-180,-90+u.Gg],[180,90-u.Gg]]).extentMinor([[-180,-80-u.Gg],[180,80+u.Gg]])}function te(){return U()()}var J,X,K,Q,Z=e(27284),re=e(7376),oe=(0,l.c)(),ae=(0,l.c)(),ce={point:p.c,lineStart:p.c,lineEnd:p.c,polygonStart:function(){ce.lineStart=he,ce.lineEnd=be},polygonEnd:function(){ce.lineStart=ce.lineEnd=ce.point=p.c,oe.add((0,u.a2)(ae)),ae.reset()},result:function(){var Jt=oe/2;return oe.reset(),Jt}};function he(){ce.point=pe}function pe(Jt,en){ce.point=xe,J=K=Jt,X=Q=en}function xe(Jt,en){ae.add(Q*Jt-K*en),K=Jt,Q=en}function be(){xe(J,X)}var ve,ge,we,_e,se=ce,ie=e(73784),fe=0,Ee=0,Te=0,Ae=0,Se=0,Oe=0,De=0,de=0,me=0,Me={point:ze,lineStart:Pe,lineEnd:Ye,polygonStart:function(){Me.lineStart=at,Me.lineEnd=rt},polygonEnd:function(){Me.point=ze,Me.lineStart=Pe,Me.lineEnd=Ye},result:function(){var Jt=me?[De/me,de/me]:Oe?[Ae/Oe,Se/Oe]:Te?[fe/Te,Ee/Te]:[NaN,NaN];return fe=Ee=Te=Ae=Se=Oe=De=de=me=0,Jt}};function ze(Jt,en){fe+=Jt,Ee+=en,++Te}function Pe(){Me.point=Ne}function Ne(Jt,en){Me.point=Ve,ze(we=Jt,_e=en)}function Ve(Jt,en){var En=Jt-we,gn=en-_e,Ln=(0,u._I)(En*En+gn*gn);Ae+=Ln*(we+Jt)/2,Se+=Ln*(_e+en)/2,Oe+=Ln,ze(we=Jt,_e=en)}function Ye(){Me.point=ze}function at(){Me.point=dt}function rt(){vt(ve,ge)}function dt(Jt,en){Me.point=vt,ze(ve=we=Jt,ge=_e=en)}function vt(Jt,en){var En=Jt-we,gn=en-_e,Ln=(0,u._I)(En*En+gn*gn);Ae+=Ln*(we+Jt)/2,Se+=Ln*(_e+en)/2,Oe+=Ln,De+=(Ln=_e*Jt-we*en)*(we+Jt),de+=Ln*(_e+en),me+=3*Ln,ze(we=Jt,_e=en)}var ht=Me;function et(Jt){this._context=Jt}et.prototype={_radius:4.5,pointRadius:function(Jt){return this._radius=Jt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Jt,en){switch(this._point){case 0:this._context.moveTo(Jt,en),this._point=1;break;case 1:this._context.lineTo(Jt,en);break;default:this._context.moveTo(Jt+this._radius,en),this._context.arc(Jt,en,this._radius,0,u.kD)}},result:p.c};var $e,wt,Pt,Ot,At,He=(0,l.c)(),Ze={point:p.c,lineStart:function(){Ze.point=Be},lineEnd:function(){$e&&Ge(wt,Pt),Ze.point=p.c},polygonStart:function(){$e=!0},polygonEnd:function(){$e=null},result:function(){var Jt=+He;return He.reset(),Jt}};function Be(Jt,en){Ze.point=Ge,wt=Ot=Jt,Pt=At=en}function Ge(Jt,en){Ot-=Jt,At-=en,He.add((0,u._I)(Ot*Ot+At*At)),Ot=Jt,At=en}var it=Ze;function tt(){this._string=[]}function Re(Jt){return"m0,"+Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+-2*Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+2*Jt+"z"}function Fe(Jt,en){var En,gn,Ln=4.5;function Hn(Nn){return Nn&&(typeof Ln=="function"&&gn.pointRadius(+Ln.apply(this,arguments)),(0,c.c)(Nn,En(gn))),gn.result()}return Hn.area=function(Nn){return(0,c.c)(Nn,En(se)),se.result()},Hn.measure=function(Nn){return(0,c.c)(Nn,En(it)),it.result()},Hn.bounds=function(Nn){return(0,c.c)(Nn,En(ie.c)),ie.c.result()},Hn.centroid=function(Nn){return(0,c.c)(Nn,En(ht)),ht.result()},Hn.projection=function(Nn){return arguments.length?(En=Nn==null?(Jt=null,re.c):(Jt=Nn).stream,Hn):Jt},Hn.context=function(Nn){return arguments.length?(gn=Nn==null?(en=null,new tt):new et(en=Nn),typeof Ln!="function"&&gn.pointRadius(Ln),Hn):en},Hn.pointRadius=function(Nn){return arguments.length?(Ln=typeof Nn=="function"?Nn:(gn.pointRadius(+Nn),+Nn),Hn):Ln},Hn.projection(Jt).context(en)}tt.prototype={_radius:4.5,_circle:Re(4.5),pointRadius:function(Jt){return(Jt=+Jt)!==this._radius&&(this._radius=Jt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Jt,en){switch(this._point){case 0:this._string.push("M",Jt,",",en),this._point=1;break;case 1:this._string.push("L",Jt,",",en);break;default:this._circle==null&&(this._circle=Re(this._radius)),this._string.push("M",Jt,",",en,this._circle)}},result:function(){if(this._string.length){var Jt=this._string.join("");return this._string=[],Jt}return null}};var nt=e(87952);function We(Jt){var en=0,En=u.pi/3,gn=(0,nt.U)(Jt),Ln=gn(en,En);return Ln.parallels=function(Hn){return arguments.length?gn(en=Hn[0]*u.qw,En=Hn[1]*u.qw):[en*u.oh,En*u.oh]},Ln}function ct(Jt,en){var En=(0,u.g$)(Jt),gn=(En+(0,u.g$)(en))/2;if((0,u.a2)(gn)<u.Gg)return function(Yn){var fr=(0,u.W8)(Yn);function Xt(pn,bt){return[pn*fr,(0,u.g$)(bt)/fr]}return Xt.invert=function(pn,bt){return[pn/fr,(0,u.qR)(bt*fr)]},Xt}(Jt);var Ln=1+En*(2*gn-En),Hn=(0,u._I)(Ln)/gn;function Nn(Yn,fr){var Xt=(0,u._I)(Ln-2*gn*(0,u.g$)(fr))/gn;return[Xt*(0,u.g$)(Yn*=gn),Hn-Xt*(0,u.W8)(Yn)]}return Nn.invert=function(Yn,fr){var Xt=Hn-fr,pn=(0,u.WE)(Yn,(0,u.a2)(Xt))*(0,u.kq)(Xt);return Xt*gn<0&&(pn-=u.pi*(0,u.kq)(Yn)*(0,u.kq)(Xt)),[pn/gn,(0,u.qR)((Ln-(Yn*Yn+Xt*Xt)*gn*gn)/(2*gn))]},Nn}function pt(){return We(ct).scale(155.424).center([0,33.6442])}function gt(){return pt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ut=e(86420);function kt(){var Jt,en,En,gn,Ln,Hn,Nn=gt(),Yn=pt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),fr=pt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Xt={point:function(Ut,Kt){Hn=[Ut,Kt]}};function pn(Ut){var Kt=Ut[0],un=Ut[1];return Hn=null,En.point(Kt,un),Hn||(gn.point(Kt,un),Hn)||(Ln.point(Kt,un),Hn)}function bt(){return Jt=en=null,pn}return pn.invert=function(Ut){var Kt=Nn.scale(),un=Nn.translate(),cn=(Ut[0]-un[0])/Kt,vn=(Ut[1]-un[1])/Kt;return(vn>=.12&&vn<.234&&cn>=-.425&&cn<-.214?Yn:vn>=.166&&vn<.234&&cn>=-.214&&cn<-.115?fr:Nn).invert(Ut)},pn.stream=function(Ut){return Jt&&en===Ut?Jt:(Kt=[Nn.stream(en=Ut),Yn.stream(Ut),fr.stream(Ut)],un=Kt.length,Jt={point:function(cn,vn){for(var tn=-1;++tn<un;)Kt[tn].point(cn,vn)},sphere:function(){for(var cn=-1;++cn<un;)Kt[cn].sphere()},lineStart:function(){for(var cn=-1;++cn<un;)Kt[cn].lineStart()},lineEnd:function(){for(var cn=-1;++cn<un;)Kt[cn].lineEnd()},polygonStart:function(){for(var cn=-1;++cn<un;)Kt[cn].polygonStart()},polygonEnd:function(){for(var cn=-1;++cn<un;)Kt[cn].polygonEnd()}});var Kt,un},pn.precision=function(Ut){return arguments.length?(Nn.precision(Ut),Yn.precision(Ut),fr.precision(Ut),bt()):Nn.precision()},pn.scale=function(Ut){return arguments.length?(Nn.scale(Ut),Yn.scale(.35*Ut),fr.scale(Ut),pn.translate(Nn.translate())):Nn.scale()},pn.translate=function(Ut){if(!arguments.length)return Nn.translate();var Kt=Nn.scale(),un=+Ut[0],cn=+Ut[1];return En=Nn.translate(Ut).clipExtent([[un-.455*Kt,cn-.238*Kt],[un+.455*Kt,cn+.238*Kt]]).stream(Xt),gn=Yn.translate([un-.307*Kt,cn+.201*Kt]).clipExtent([[un-.425*Kt+u.Gg,cn+.12*Kt+u.Gg],[un-.214*Kt-u.Gg,cn+.234*Kt-u.Gg]]).stream(Xt),Ln=fr.translate([un-.205*Kt,cn+.212*Kt]).clipExtent([[un-.214*Kt+u.Gg,cn+.166*Kt+u.Gg],[un-.115*Kt-u.Gg,cn+.234*Kt-u.Gg]]).stream(Xt),bt()},pn.fitExtent=function(Ut,Kt){return(0,ut.QX)(pn,Ut,Kt)},pn.fitSize=function(Ut,Kt){return(0,ut.UV)(pn,Ut,Kt)},pn.fitWidth=function(Ut,Kt){return(0,ut.Qx)(pn,Ut,Kt)},pn.fitHeight=function(Ut,Kt){return(0,ut.OW)(pn,Ut,Kt)},pn.scale(1070)}var yt=e(54724),Mt=e(69020),Lt=e(92992);function Ct(Jt,en){return[Jt,(0,u.Yz)((0,u.a6)((u.or+en)/2))]}function It(){return Wt(Ct).scale(961/u.kD)}function Wt(Jt){var en,En,gn,Ln=(0,nt.c)(Jt),Hn=Ln.center,Nn=Ln.scale,Yn=Ln.translate,fr=Ln.clipExtent,Xt=null;function pn(){var bt=u.pi*Nn(),Ut=Ln((0,Lt.c)(Ln.rotate()).invert([0,0]));return fr(Xt==null?[[Ut[0]-bt,Ut[1]-bt],[Ut[0]+bt,Ut[1]+bt]]:Jt===Ct?[[Math.max(Ut[0]-bt,Xt),en],[Math.min(Ut[0]+bt,En),gn]]:[[Xt,Math.max(Ut[1]-bt,en)],[En,Math.min(Ut[1]+bt,gn)]])}return Ln.scale=function(bt){return arguments.length?(Nn(bt),pn()):Nn()},Ln.translate=function(bt){return arguments.length?(Yn(bt),pn()):Yn()},Ln.center=function(bt){return arguments.length?(Hn(bt),pn()):Hn()},Ln.clipExtent=function(bt){return arguments.length?(bt==null?Xt=en=En=gn=null:(Xt=+bt[0][0],en=+bt[0][1],En=+bt[1][0],gn=+bt[1][1]),pn()):Xt==null?null:[[Xt,en],[En,gn]]},pn()}function Nt(Jt){return(0,u.a6)((u.or+Jt)/2)}function Bt(Jt,en){var En=(0,u.W8)(Jt),gn=Jt===en?(0,u.g$)(Jt):(0,u.Yz)(En/(0,u.W8)(en))/(0,u.Yz)(Nt(en)/Nt(Jt)),Ln=En*(0,u.g3)(Nt(Jt),gn)/gn;if(!gn)return Ct;function Hn(Nn,Yn){Ln>0?Yn<-u.or+u.Gg&&(Yn=-u.or+u.Gg):Yn>u.or-u.Gg&&(Yn=u.or-u.Gg);var fr=Ln/(0,u.g3)(Nt(Yn),gn);return[fr*(0,u.g$)(gn*Nn),Ln-fr*(0,u.W8)(gn*Nn)]}return Hn.invert=function(Nn,Yn){var fr=Ln-Yn,Xt=(0,u.kq)(gn)*(0,u._I)(Nn*Nn+fr*fr),pn=(0,u.WE)(Nn,(0,u.a2)(fr))*(0,u.kq)(fr);return fr*gn<0&&(pn-=u.pi*(0,u.kq)(Nn)*(0,u.kq)(fr)),[pn/gn,2*(0,u.MQ)((0,u.g3)(Ln/Xt,1/gn))-u.or]},Hn}function Ht(){return We(Bt).scale(109.5).parallels([30,30])}Ct.invert=function(Jt,en){return[Jt,2*(0,u.MQ)((0,u.oN)(en))-u.or]};var Qt=e(69604);function Cn(Jt,en){var En=(0,u.W8)(Jt),gn=Jt===en?(0,u.g$)(Jt):(En-(0,u.W8)(en))/(en-Jt),Ln=En/gn+Jt;if((0,u.a2)(gn)<u.Gg)return Qt.u;function Hn(Nn,Yn){var fr=Ln-Yn,Xt=gn*Nn;return[fr*(0,u.g$)(Xt),Ln-fr*(0,u.W8)(Xt)]}return Hn.invert=function(Nn,Yn){var fr=Ln-Yn,Xt=(0,u.WE)(Nn,(0,u.a2)(fr))*(0,u.kq)(fr);return fr*gn<0&&(Xt-=u.pi*(0,u.kq)(Nn)*(0,u.kq)(fr)),[Xt/gn,Ln-(0,u.kq)(gn)*(0,u._I)(Nn*Nn+fr*fr)]},Hn}function Tn(){return We(Cn).scale(131.154).center([0,13.9389])}var hn=1.340264,Zt=-.081106,an=893e-6,$t=.003796,ln=(0,u._I)(3)/2;function mn(Jt,en){var En=(0,u.qR)(ln*(0,u.g$)(en)),gn=En*En,Ln=gn*gn*gn;return[Jt*(0,u.W8)(En)/(ln*(hn+3*Zt*gn+Ln*(7*an+9*$t*gn))),En*(hn+Zt*gn+Ln*(an+$t*gn))]}function xn(){return(0,nt.c)(mn).scale(177.158)}mn.invert=function(Jt,en){for(var En,gn=en,Ln=gn*gn,Hn=Ln*Ln*Ln,Nn=0;Nn<12&&(Hn=(Ln=(gn-=En=(gn*(hn+Zt*Ln+Hn*(an+$t*Ln))-en)/(hn+3*Zt*Ln+Hn*(7*an+9*$t*Ln)))*gn)*Ln*Ln,!((0,u.a2)(En)<u.a8));++Nn);return[ln*Jt*(hn+3*Zt*Ln+Hn*(7*an+9*$t*Ln))/(0,u.W8)(gn),(0,u.qR)((0,u.g$)(gn)/ln)]};var Pn=e(53285),Mn=e(15196);function _n(){var Jt,en,En,gn,Ln,Hn,Nn,Yn=1,fr=0,Xt=0,pn=1,bt=1,Ut=0,Kt=null,un=1,cn=1,vn=(0,Mn.s)({point:function(nn,sn){var wn=Gt([nn,sn]);this.stream.point(wn[0],wn[1])}}),tn=re.c;function Vt(){return un=Yn*pn,cn=Yn*bt,Hn=Nn=null,Gt}function Gt(nn){var sn=nn[0]*un,wn=nn[1]*cn;if(Ut){var An=wn*Jt-sn*en;sn=sn*Jt+wn*en,wn=An}return[sn+fr,wn+Xt]}return Gt.invert=function(nn){var sn=nn[0]-fr,wn=nn[1]-Xt;if(Ut){var An=wn*Jt+sn*en;sn=sn*Jt-wn*en,wn=An}return[sn/un,wn/cn]},Gt.stream=function(nn){return Hn&&Nn===nn?Hn:Hn=vn(tn(Nn=nn))},Gt.postclip=function(nn){return arguments.length?(tn=nn,Kt=En=gn=Ln=null,Vt()):tn},Gt.clipExtent=function(nn){return arguments.length?(tn=nn==null?(Kt=En=gn=Ln=null,re.c):(0,s.c)(Kt=+nn[0][0],En=+nn[0][1],gn=+nn[1][0],Ln=+nn[1][1]),Vt()):Kt==null?null:[[Kt,En],[gn,Ln]]},Gt.scale=function(nn){return arguments.length?(Yn=+nn,Vt()):Yn},Gt.translate=function(nn){return arguments.length?(fr=+nn[0],Xt=+nn[1],Vt()):[fr,Xt]},Gt.angle=function(nn){return arguments.length?(Ut=nn%360*u.qw,en=(0,u.g$)(Ut),Jt=(0,u.W8)(Ut),Vt()):Ut*u.oh},Gt.reflectX=function(nn){return arguments.length?(pn=nn?-1:1,Vt()):pn<0},Gt.reflectY=function(nn){return arguments.length?(bt=nn?-1:1,Vt()):bt<0},Gt.fitExtent=function(nn,sn){return(0,ut.QX)(Gt,nn,sn)},Gt.fitSize=function(nn,sn){return(0,ut.UV)(Gt,nn,sn)},Gt.fitWidth=function(nn,sn){return(0,ut.Qx)(Gt,nn,sn)},Gt.fitHeight=function(nn,sn){return(0,ut.OW)(Gt,nn,sn)},Gt}var Rn=e(47984),In=e(4888),Vn=e(62280);function tr(Jt,en){var En=(0,u.W8)(en),gn=1+(0,u.W8)(Jt)*En;return[En*(0,u.g$)(Jt)/gn,(0,u.g$)(en)/gn]}function er(){return(0,nt.c)(tr).scale(250).clipAngle(142)}function Wn(Jt,en){return[(0,u.Yz)((0,u.a6)((u.or+en)/2)),-Jt]}function or(){var Jt=Wt(Wn),en=Jt.center,En=Jt.rotate;return Jt.center=function(gn){return arguments.length?en([-gn[1],gn[0]]):[(gn=en())[1],-gn[0]]},Jt.rotate=function(gn){return arguments.length?En([gn[0],gn[1],gn.length>2?gn[2]+90:90]):[(gn=En())[0],gn[1],gn[2]-90]},En([0,0,90]).scale(159.155)}tr.invert=(0,Vn.g)(function(Jt){return 2*(0,u.MQ)(Jt)}),Wn.invert=function(Jt,en){return[-en,2*(0,u.MQ)((0,u.oN)(Jt))-u.or]}},27284:function(ee,z,e){e.d(z,{c:function(){return k}});var M=e(64528);function k(o,T){var b=o[0]*M.qw,h=o[1]*M.qw,s=T[0]*M.qw,t=T[1]*M.qw,a=(0,M.W8)(h),n=(0,M.g$)(h),r=(0,M.W8)(t),i=(0,M.g$)(t),l=a*(0,M.W8)(b),u=a*(0,M.g$)(b),p=r*(0,M.W8)(s),c=r*(0,M.g$)(s),x=2*(0,M.qR)((0,M._I)((0,M.SD)(t-h)+a*r*(0,M.SD)(s-b))),d=(0,M.g$)(x),g=x?function(v){var y=(0,M.g$)(v*=x)/d,m=(0,M.g$)(x-v)/d,_=m*l+y*p,f=m*u+y*c,S=m*n+y*i;return[(0,M.WE)(f,_)*M.oh,(0,M.WE)(S,(0,M._I)(_*_+f*f))*M.oh]}:function(){return[b*M.oh,h*M.oh]};return g.distance=x,g}},64528:function(ee,z,e){e.d(z,{Gg:function(){return M},Km:function(){return l},MQ:function(){return n},SD:function(){return _},W8:function(){return i},WE:function(){return r},Yz:function(){return p},_I:function(){return g},a2:function(){return a},a6:function(){return v},a8:function(){return k},g$:function(){return x},g3:function(){return c},kD:function(){return h},kq:function(){return d},mE:function(){return y},oN:function(){return u},oh:function(){return s},or:function(){return T},pi:function(){return o},qR:function(){return m},qw:function(){return t},wL:function(){return b}});var M=1e-6,k=1e-12,o=Math.PI,T=o/2,b=o/4,h=2*o,s=180/o,t=o/180,a=Math.abs,n=Math.atan,r=Math.atan2,i=Math.cos,l=Math.ceil,u=Math.exp,p=Math.log,c=Math.pow,x=Math.sin,d=Math.sign||function(f){return f>0?1:f<0?-1:0},g=Math.sqrt,v=Math.tan;function y(f){return f>1?0:f<-1?o:Math.acos(f)}function m(f){return f>1?T:f<-1?-T:Math.asin(f)}function _(f){return(f=x(f/2))*f}},70932:function(ee,z,e){function M(){}e.d(z,{c:function(){return M}})},73784:function(ee,z,e){var M=e(70932),k=1/0,o=k,T=-k,b=T,h={point:function(s,t){s<k&&(k=s),s>T&&(T=s),t<o&&(o=t),t>b&&(b=t)},lineStart:M.c,lineEnd:M.c,polygonStart:M.c,polygonEnd:M.c,result:function(){var s=[[k,o],[T,b]];return T=b=-(o=k=1/0),s}};z.c=h},41860:function(ee,z,e){e.d(z,{c:function(){return k}});var M=e(64528);function k(o,T){return(0,M.a2)(o[0]-T[0])<M.Gg&&(0,M.a2)(o[1]-T[1])<M.Gg}},58196:function(ee,z,e){e.d(z,{c:function(){return h}});var M=e(88728),k=e(84220),o=e(64528),T=(0,M.c)();function b(s){return(0,o.a2)(s[0])<=o.pi?s[0]:(0,o.kq)(s[0])*(((0,o.a2)(s[0])+o.pi)%o.kD-o.pi)}function h(s,t){var a=b(t),n=t[1],r=(0,o.g$)(n),i=[(0,o.g$)(a),-(0,o.W8)(a),0],l=0,u=0;T.reset(),r===1?n=o.or+o.Gg:r===-1&&(n=-o.or-o.Gg);for(var p=0,c=s.length;p<c;++p)if(d=(x=s[p]).length)for(var x,d,g=x[d-1],v=b(g),y=g[1]/2+o.wL,m=(0,o.g$)(y),_=(0,o.W8)(y),f=0;f<d;++f,v=w,m=O,_=C,g=S){var S=x[f],w=b(S),E=S[1]/2+o.wL,O=(0,o.g$)(E),C=(0,o.W8)(E),P=w-v,R=P>=0?1:-1,j=R*P,D=j>o.pi,N=m*O;if(T.add((0,o.WE)(N*R*(0,o.g$)(j),_*C+N*(0,o.W8)(j))),l+=D?P+R*o.kD:P,D^v>=a^w>=a){var W=(0,k.CW)((0,k.ux)(g),(0,k.ux)(S));(0,k.cJ)(W);var F=(0,k.CW)(i,W);(0,k.cJ)(F);var V=(D^P>=0?-1:1)*(0,o.qR)(F[2]);(n>V||n===V&&(W[0]||W[1]))&&(u+=D^P>=0?1:-1)}}return(l<-o.Gg||l<o.Gg&&T<-o.Gg)^1&u}},62280:function(ee,z,e){e.d(z,{a:function(){return k},g:function(){return o}});var M=e(64528);function k(T){return function(b,h){var s=(0,M.W8)(b),t=(0,M.W8)(h),a=T(s*t);return[a*t*(0,M.g$)(b),a*(0,M.g$)(h)]}}function o(T){return function(b,h){var s=(0,M._I)(b*b+h*h),t=T(s),a=(0,M.g$)(t),n=(0,M.W8)(t);return[(0,M.WE)(b*a,s*n),(0,M.qR)(s&&h*a/s)]}}},54724:function(ee,z,e){e.d(z,{c:function(){return b},y:function(){return T}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(h){return(0,M._I)(2/(1+h))});function b(){return(0,o.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.g)(function(h){return 2*(0,M.qR)(h/2)})},69020:function(ee,z,e){e.d(z,{O:function(){return T},c:function(){return b}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(h){return(h=(0,M.mE)(h))&&h/(0,M.g$)(h)});function b(){return(0,o.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.g)(function(h){return h})},69604:function(ee,z,e){e.d(z,{c:function(){return o},u:function(){return k}});var M=e(87952);function k(T,b){return[T,b]}function o(){return(0,M.c)(k).scale(152.63)}k.invert=k},86420:function(ee,z,e){e.d(z,{OW:function(){return s},QX:function(){return T},Qx:function(){return h},UV:function(){return b}});var M=e(16016),k=e(73784);function o(t,a,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),(0,M.c)(n,t.stream(k.c)),a(k.c.result()),r!=null&&t.clipExtent(r),t}function T(t,a,n){return o(t,function(r){var i=a[1][0]-a[0][0],l=a[1][1]-a[0][1],u=Math.min(i/(r[1][0]-r[0][0]),l/(r[1][1]-r[0][1])),p=+a[0][0]+(i-u*(r[1][0]+r[0][0]))/2,c=+a[0][1]+(l-u*(r[1][1]+r[0][1]))/2;t.scale(150*u).translate([p,c])},n)}function b(t,a,n){return T(t,[[0,0],a],n)}function h(t,a,n){return o(t,function(r){var i=+a,l=i/(r[1][0]-r[0][0]),u=(i-l*(r[1][0]+r[0][0]))/2,p=-l*r[0][1];t.scale(150*l).translate([u,p])},n)}function s(t,a,n){return o(t,function(r){var i=+a,l=i/(r[1][1]-r[0][1]),u=-l*r[0][0],p=(i-l*(r[1][1]+r[0][1]))/2;t.scale(150*l).translate([u,p])},n)}},53285:function(ee,z,e){e.d(z,{Y:function(){return T},c:function(){return b}});var M=e(64528),k=e(62280),o=e(87952);function T(h,s){var t=(0,M.W8)(s),a=(0,M.W8)(h)*t;return[t*(0,M.g$)(h)/a,(0,M.g$)(s)/a]}function b(){return(0,o.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.g)(M.MQ)},87952:function(ee,z,e){e.d(z,{c:function(){return x},U:function(){return d}});var M=e(78284),k=e(2728),o=e(21676),T=e(68120),b=e(7376),h=e(64528),s=e(92992),t=e(15196),a=e(86420),n=e(84220),r=16,i=(0,h.W8)(30*h.qw);function l(g,v){return+v?function(y,m){function _(f,S,w,E,O,C,P,R,j,D,N,W,F,V){var U=P-f,te=R-S,J=U*U+te*te;if(J>4*m&&F--){var X=E+D,K=O+N,Q=C+W,Z=(0,h._I)(X*X+K*K+Q*Q),re=(0,h.qR)(Q/=Z),oe=(0,h.a2)((0,h.a2)(Q)-1)<h.Gg||(0,h.a2)(w-j)<h.Gg?(w+j)/2:(0,h.WE)(K,X),ae=y(oe,re),ce=ae[0],he=ae[1],pe=ce-f,xe=he-S,be=te*pe-U*xe;(be*be/J>m||(0,h.a2)((U*pe+te*xe)/J-.5)>.3||E*D+O*N+C*W<i)&&(_(f,S,w,E,O,C,ce,he,oe,X/=Z,K/=Z,Q,F,V),V.point(ce,he),_(ce,he,oe,X,K,Q,P,R,j,D,N,W,F,V))}}return function(f){var S,w,E,O,C,P,R,j,D,N,W,F,V={point:U,lineStart:te,lineEnd:X,polygonStart:function(){f.polygonStart(),V.lineStart=K},polygonEnd:function(){f.polygonEnd(),V.lineStart=te}};function U(re,oe){re=y(re,oe),f.point(re[0],re[1])}function te(){j=NaN,V.point=J,f.lineStart()}function J(re,oe){var ae=(0,n.ux)([re,oe]),ce=y(re,oe);_(j,D,R,N,W,F,j=ce[0],D=ce[1],R=re,N=ae[0],W=ae[1],F=ae[2],r,f),f.point(j,D)}function X(){V.point=U,f.lineEnd()}function K(){te(),V.point=Q,V.lineEnd=Z}function Q(re,oe){J(S=re,oe),w=j,E=D,O=N,C=W,P=F,V.point=J}function Z(){_(j,D,R,N,W,F,w,E,S,O,C,P,r,f),V.lineEnd=X,X()}return V}}(g,v):function(y){return(0,t.s)({point:function(m,_){m=y(m,_),this.stream.point(m[0],m[1])}})}(g)}var u=(0,t.s)({point:function(g,v){this.stream.point(g*h.qw,v*h.qw)}});function p(g,v,y,m,_){function f(S,w){return[v+g*(S*=m),y-g*(w*=_)]}return f.invert=function(S,w){return[(S-v)/g*m,(y-w)/g*_]},f}function c(g,v,y,m,_,f){var S=(0,h.W8)(f),w=(0,h.g$)(f),E=S*g,O=w*g,C=S/g,P=w/g,R=(w*y-S*v)/g,j=(w*v+S*y)/g;function D(N,W){return[E*(N*=m)-O*(W*=_)+v,y-O*N-E*W]}return D.invert=function(N,W){return[m*(C*N-P*W+R),_*(j-P*N-C*W)]},D}function x(g){return d(function(){return g})()}function d(g){var v,y,m,_,f,S,w,E,O,C,P=150,R=480,j=250,D=0,N=0,W=0,F=0,V=0,U=0,te=1,J=1,X=null,K=M.c,Q=null,Z=b.c,re=.5;function oe(pe){return E(pe[0]*h.qw,pe[1]*h.qw)}function ae(pe){return(pe=E.invert(pe[0],pe[1]))&&[pe[0]*h.oh,pe[1]*h.oh]}function ce(){var pe=c(P,0,0,te,J,U).apply(null,v(D,N)),xe=(U?c:p)(P,R-pe[0],j-pe[1],te,J,U);return y=(0,s.O)(W,F,V),w=(0,T.c)(v,xe),E=(0,T.c)(y,w),S=l(w,re),he()}function he(){return O=C=null,oe}return oe.stream=function(pe){return O&&C===pe?O:O=u(function(xe){return(0,t.s)({point:function(be,ve){var ge=xe(be,ve);return this.stream.point(ge[0],ge[1])}})}(y)(K(S(Z(C=pe)))))},oe.preclip=function(pe){return arguments.length?(K=pe,X=void 0,he()):K},oe.postclip=function(pe){return arguments.length?(Z=pe,Q=m=_=f=null,he()):Z},oe.clipAngle=function(pe){return arguments.length?(K=+pe?(0,k.c)(X=pe*h.qw):(X=null,M.c),he()):X*h.oh},oe.clipExtent=function(pe){return arguments.length?(Z=pe==null?(Q=m=_=f=null,b.c):(0,o.c)(Q=+pe[0][0],m=+pe[0][1],_=+pe[1][0],f=+pe[1][1]),he()):Q==null?null:[[Q,m],[_,f]]},oe.scale=function(pe){return arguments.length?(P=+pe,ce()):P},oe.translate=function(pe){return arguments.length?(R=+pe[0],j=+pe[1],ce()):[R,j]},oe.center=function(pe){return arguments.length?(D=pe[0]%360*h.qw,N=pe[1]%360*h.qw,ce()):[D*h.oh,N*h.oh]},oe.rotate=function(pe){return arguments.length?(W=pe[0]%360*h.qw,F=pe[1]%360*h.qw,V=pe.length>2?pe[2]%360*h.qw:0,ce()):[W*h.oh,F*h.oh,V*h.oh]},oe.angle=function(pe){return arguments.length?(U=pe%360*h.qw,ce()):U*h.oh},oe.reflectX=function(pe){return arguments.length?(te=pe?-1:1,ce()):te<0},oe.reflectY=function(pe){return arguments.length?(J=pe?-1:1,ce()):J<0},oe.precision=function(pe){return arguments.length?(S=l(w,re=pe*pe),he()):(0,h._I)(re)},oe.fitExtent=function(pe,xe){return(0,a.QX)(oe,pe,xe)},oe.fitSize=function(pe,xe){return(0,a.UV)(oe,pe,xe)},oe.fitWidth=function(pe,xe){return(0,a.Qx)(oe,pe,xe)},oe.fitHeight=function(pe,xe){return(0,a.OW)(oe,pe,xe)},function(){return v=g.apply(this,arguments),oe.invert=v.invert&&ae,ce()}}},47984:function(ee,z,e){e.d(z,{c:function(){return T},g:function(){return o}});var M=e(87952),k=e(64528);function o(b,h){var s=h*h,t=s*s;return[b*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),h*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,M.c)(o).scale(175.295)}o.invert=function(b,h){var s,t=h,a=25;do{var n=t*t,r=n*n;t-=s=(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))-h)/(1.007226+n*(.045255+r*(.259866*n-.311325-.06507600000000001*r)))}while((0,k.a2)(s)>k.Gg&&--a>0);return[b/(.8707+(n=t*t)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),t]}},4888:function(ee,z,e){e.d(z,{c:function(){return b},t:function(){return T}});var M=e(64528),k=e(62280),o=e(87952);function T(h,s){return[(0,M.W8)(s)*(0,M.g$)(h),(0,M.g$)(s)]}function b(){return(0,o.c)(T).scale(249.5).clipAngle(90+M.Gg)}T.invert=(0,k.g)(M.qR)},92992:function(ee,z,e){e.d(z,{O:function(){return T},c:function(){return t}});var M=e(68120),k=e(64528);function o(a,n){return[(0,k.a2)(a)>k.pi?a+Math.round(-a/k.kD)*k.kD:a,n]}function T(a,n,r){return(a%=k.kD)?n||r?(0,M.c)(h(a),s(n,r)):h(a):n||r?s(n,r):o}function b(a){return function(n,r){return[(n+=a)>k.pi?n-k.kD:n<-k.pi?n+k.kD:n,r]}}function h(a){var n=b(a);return n.invert=b(-a),n}function s(a,n){var r=(0,k.W8)(a),i=(0,k.g$)(a),l=(0,k.W8)(n),u=(0,k.g$)(n);function p(c,x){var d=(0,k.W8)(x),g=(0,k.W8)(c)*d,v=(0,k.g$)(c)*d,y=(0,k.g$)(x),m=y*r+g*i;return[(0,k.WE)(v*l-m*u,g*r-y*i),(0,k.qR)(m*l+v*u)]}return p.invert=function(c,x){var d=(0,k.W8)(x),g=(0,k.W8)(c)*d,v=(0,k.g$)(c)*d,y=(0,k.g$)(x),m=y*l-v*u;return[(0,k.WE)(v*l+y*u,g*r+m*i),(0,k.qR)(m*r-g*i)]},p}function t(a){function n(r){return(r=a(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r}return a=T(a[0]*k.qw,a[1]*k.qw,a.length>2?a[2]*k.qw:0),n.invert=function(r){return(r=a.invert(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r},n}o.invert=o},16016:function(ee,z,e){function M(s,t){s&&o.hasOwnProperty(s.type)&&o[s.type](s,t)}e.d(z,{c:function(){return h}});var k={Feature:function(s,t){M(s.geometry,t)},FeatureCollection:function(s,t){for(var a=s.features,n=-1,r=a.length;++n<r;)M(a[n].geometry,t)}},o={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var a=s.coordinates,n=-1,r=a.length;++n<r;)s=a[n],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var a=s.coordinates,n=-1,r=a.length;++n<r;)T(a[n],t,0)},Polygon:function(s,t){b(s.coordinates,t)},MultiPolygon:function(s,t){for(var a=s.coordinates,n=-1,r=a.length;++n<r;)b(a[n],t)},GeometryCollection:function(s,t){for(var a=s.geometries,n=-1,r=a.length;++n<r;)M(a[n],t)}};function T(s,t,a){var n,r=-1,i=s.length-a;for(t.lineStart();++r<i;)n=s[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function b(s,t){var a=-1,n=s.length;for(t.polygonStart();++a<n;)T(s[a],t,1);t.polygonEnd()}function h(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):M(s,t)}},15196:function(ee,z,e){function M(T){return{stream:k(T)}}function k(T){return function(b){var h=new o;for(var s in T)h[s]=T[s];return h.stream=b,h}}function o(){}e.d(z,{c:function(){return M},s:function(){return k}}),o.prototype={constructor:o,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(ee,z,e){function M(ie,fe){return ie.parent===fe.parent?1:2}function k(ie,fe){return ie+fe.x}function o(ie,fe){return Math.max(ie,fe.y)}function T(){var ie=M,fe=1,Ee=1,Te=!1;function Ae(Se){var Oe,De=0;Se.eachAfter(function(Pe){var Ne=Pe.children;Ne?(Pe.x=function(Ve){return Ve.reduce(k,0)/Ve.length}(Ne),Pe.y=function(Ve){return 1+Ve.reduce(o,0)}(Ne)):(Pe.x=Oe?De+=ie(Pe,Oe):0,Pe.y=0,Oe=Pe)});var de=function(Pe){for(var Ne;Ne=Pe.children;)Pe=Ne[0];return Pe}(Se),me=function(Pe){for(var Ne;Ne=Pe.children;)Pe=Ne[Ne.length-1];return Pe}(Se),Me=de.x-ie(de,me)/2,ze=me.x+ie(me,de)/2;return Se.eachAfter(Te?function(Pe){Pe.x=(Pe.x-Se.x)*fe,Pe.y=(Se.y-Pe.y)*Ee}:function(Pe){Pe.x=(Pe.x-Me)/(ze-Me)*fe,Pe.y=(1-(Se.y?Pe.y/Se.y:1))*Ee})}return Ae.separation=function(Se){return arguments.length?(ie=Se,Ae):ie},Ae.size=function(Se){return arguments.length?(Te=!1,fe=+Se[0],Ee=+Se[1],Ae):Te?null:[fe,Ee]},Ae.nodeSize=function(Se){return arguments.length?(Te=!0,fe=+Se[0],Ee=+Se[1],Ae):Te?[fe,Ee]:null},Ae}function b(ie){var fe=0,Ee=ie.children,Te=Ee&&Ee.length;if(Te)for(;--Te>=0;)fe+=Ee[Te].value;else fe=1;ie.value=fe}function h(ie,fe){var Ee,Te,Ae,Se,Oe,De=new n(ie),de=+ie.value&&(De.value=ie.value),me=[De];for(fe==null&&(fe=s);Ee=me.pop();)if(de&&(Ee.value=+Ee.data.value),(Ae=fe(Ee.data))&&(Oe=Ae.length))for(Ee.children=new Array(Oe),Se=Oe-1;Se>=0;--Se)me.push(Te=Ee.children[Se]=new n(Ae[Se])),Te.parent=Ee,Te.depth=Ee.depth+1;return De.eachBefore(a)}function s(ie){return ie.children}function t(ie){ie.data=ie.data.data}function a(ie){var fe=0;do ie.height=fe;while((ie=ie.parent)&&ie.height<++fe)}function n(ie){this.data=ie,this.depth=this.height=0,this.parent=null}e.r(z),e.d(z,{cluster:function(){return T},hierarchy:function(){return h},pack:function(){return P},packEnclose:function(){return i},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return K},tree:function(){return he},treemap:function(){return ge},treemapBinary:function(){return we},treemapDice:function(){return W},treemapResquarify:function(){return se},treemapSlice:function(){return pe},treemapSliceDice:function(){return _e},treemapSquarify:function(){return ve}}),n.prototype=h.prototype={constructor:n,count:function(){return this.eachAfter(b)},each:function(ie){var fe,Ee,Te,Ae,Se=this,Oe=[Se];do for(fe=Oe.reverse(),Oe=[];Se=fe.pop();)if(ie(Se),Ee=Se.children)for(Te=0,Ae=Ee.length;Te<Ae;++Te)Oe.push(Ee[Te]);while(Oe.length);return this},eachAfter:function(ie){for(var fe,Ee,Te,Ae=this,Se=[Ae],Oe=[];Ae=Se.pop();)if(Oe.push(Ae),fe=Ae.children)for(Ee=0,Te=fe.length;Ee<Te;++Ee)Se.push(fe[Ee]);for(;Ae=Oe.pop();)ie(Ae);return this},eachBefore:function(ie){for(var fe,Ee,Te=this,Ae=[Te];Te=Ae.pop();)if(ie(Te),fe=Te.children)for(Ee=fe.length-1;Ee>=0;--Ee)Ae.push(fe[Ee]);return this},sum:function(ie){return this.eachAfter(function(fe){for(var Ee=+ie(fe.data)||0,Te=fe.children,Ae=Te&&Te.length;--Ae>=0;)Ee+=Te[Ae].value;fe.value=Ee})},sort:function(ie){return this.eachBefore(function(fe){fe.children&&fe.children.sort(ie)})},path:function(ie){for(var fe=this,Ee=function(Se,Oe){if(Se===Oe)return Se;var De=Se.ancestors(),de=Oe.ancestors(),me=null;for(Se=De.pop(),Oe=de.pop();Se===Oe;)me=Se,Se=De.pop(),Oe=de.pop();return me}(fe,ie),Te=[fe];fe!==Ee;)fe=fe.parent,Te.push(fe);for(var Ae=Te.length;ie!==Ee;)Te.splice(Ae,0,ie),ie=ie.parent;return Te},ancestors:function(){for(var ie=this,fe=[ie];ie=ie.parent;)fe.push(ie);return fe},descendants:function(){var ie=[];return this.each(function(fe){ie.push(fe)}),ie},leaves:function(){var ie=[];return this.eachBefore(function(fe){fe.children||ie.push(fe)}),ie},links:function(){var ie=this,fe=[];return ie.each(function(Ee){Ee!==ie&&fe.push({source:Ee.parent,target:Ee})}),fe},copy:function(){return h(this).eachBefore(t)}};var r=Array.prototype.slice;function i(ie){for(var fe,Ee,Te=0,Ae=(ie=function(Oe){for(var De,de,me=Oe.length;me;)de=Math.random()*me--|0,De=Oe[me],Oe[me]=Oe[de],Oe[de]=De;return Oe}(r.call(ie))).length,Se=[];Te<Ae;)fe=ie[Te],Ee&&p(Ee,fe)?++Te:(Ee=x(Se=l(Se,fe)),Te=0);return Ee}function l(ie,fe){var Ee,Te;if(c(fe,ie))return[fe];for(Ee=0;Ee<ie.length;++Ee)if(u(fe,ie[Ee])&&c(d(ie[Ee],fe),ie))return[ie[Ee],fe];for(Ee=0;Ee<ie.length-1;++Ee)for(Te=Ee+1;Te<ie.length;++Te)if(u(d(ie[Ee],ie[Te]),fe)&&u(d(ie[Ee],fe),ie[Te])&&u(d(ie[Te],fe),ie[Ee])&&c(g(ie[Ee],ie[Te],fe),ie))return[ie[Ee],ie[Te],fe];throw new Error}function u(ie,fe){var Ee=ie.r-fe.r,Te=fe.x-ie.x,Ae=fe.y-ie.y;return Ee<0||Ee*Ee<Te*Te+Ae*Ae}function p(ie,fe){var Ee=ie.r-fe.r+1e-6,Te=fe.x-ie.x,Ae=fe.y-ie.y;return Ee>0&&Ee*Ee>Te*Te+Ae*Ae}function c(ie,fe){for(var Ee=0;Ee<fe.length;++Ee)if(!p(ie,fe[Ee]))return!1;return!0}function x(ie){switch(ie.length){case 1:return{x:(fe=ie[0]).x,y:fe.y,r:fe.r};case 2:return d(ie[0],ie[1]);case 3:return g(ie[0],ie[1],ie[2])}var fe}function d(ie,fe){var Ee=ie.x,Te=ie.y,Ae=ie.r,Se=fe.x,Oe=fe.y,De=fe.r,de=Se-Ee,me=Oe-Te,Me=De-Ae,ze=Math.sqrt(de*de+me*me);return{x:(Ee+Se+de/ze*Me)/2,y:(Te+Oe+me/ze*Me)/2,r:(ze+Ae+De)/2}}function g(ie,fe,Ee){var Te=ie.x,Ae=ie.y,Se=ie.r,Oe=fe.x,De=fe.y,de=fe.r,me=Ee.x,Me=Ee.y,ze=Ee.r,Pe=Te-Oe,Ne=Te-me,Ve=Ae-De,Ye=Ae-Me,at=de-Se,rt=ze-Se,dt=Te*Te+Ae*Ae-Se*Se,vt=dt-Oe*Oe-De*De+de*de,ht=dt-me*me-Me*Me+ze*ze,et=Ne*Ve-Pe*Ye,$e=(Ve*ht-Ye*vt)/(2*et)-Te,wt=(Ye*at-Ve*rt)/et,Pt=(Ne*vt-Pe*ht)/(2*et)-Ae,Ot=(Pe*rt-Ne*at)/et,At=wt*wt+Ot*Ot-1,He=2*(Se+$e*wt+Pt*Ot),Ze=$e*$e+Pt*Pt-Se*Se,Be=-(At?(He+Math.sqrt(He*He-4*At*Ze))/(2*At):Ze/He);return{x:Te+$e+wt*Be,y:Ae+Pt+Ot*Be,r:Be}}function v(ie,fe,Ee){var Te,Ae,Se,Oe,De=ie.x-fe.x,de=ie.y-fe.y,me=De*De+de*de;me?(Ae=fe.r+Ee.r,Ae*=Ae,Oe=ie.r+Ee.r,Ae>(Oe*=Oe)?(Te=(me+Oe-Ae)/(2*me),Se=Math.sqrt(Math.max(0,Oe/me-Te*Te)),Ee.x=ie.x-Te*De-Se*de,Ee.y=ie.y-Te*de+Se*De):(Te=(me+Ae-Oe)/(2*me),Se=Math.sqrt(Math.max(0,Ae/me-Te*Te)),Ee.x=fe.x+Te*De-Se*de,Ee.y=fe.y+Te*de+Se*De)):(Ee.x=fe.x+Ee.r,Ee.y=fe.y)}function y(ie,fe){var Ee=ie.r+fe.r-1e-6,Te=fe.x-ie.x,Ae=fe.y-ie.y;return Ee>0&&Ee*Ee>Te*Te+Ae*Ae}function m(ie){var fe=ie._,Ee=ie.next._,Te=fe.r+Ee.r,Ae=(fe.x*Ee.r+Ee.x*fe.r)/Te,Se=(fe.y*Ee.r+Ee.y*fe.r)/Te;return Ae*Ae+Se*Se}function _(ie){this._=ie,this.next=null,this.previous=null}function f(ie){if(!(Ae=ie.length))return 0;var fe,Ee,Te,Ae,Se,Oe,De,de,me,Me,ze;if((fe=ie[0]).x=0,fe.y=0,!(Ae>1))return fe.r;if(Ee=ie[1],fe.x=-Ee.r,Ee.x=fe.r,Ee.y=0,!(Ae>2))return fe.r+Ee.r;v(Ee,fe,Te=ie[2]),fe=new _(fe),Ee=new _(Ee),Te=new _(Te),fe.next=Te.previous=Ee,Ee.next=fe.previous=Te,Te.next=Ee.previous=fe;e:for(De=3;De<Ae;++De){v(fe._,Ee._,Te=ie[De]),Te=new _(Te),de=Ee.next,me=fe.previous,Me=Ee._.r,ze=fe._.r;do if(Me<=ze){if(y(de._,Te._)){Ee=de,fe.next=Ee,Ee.previous=fe,--De;continue e}Me+=de._.r,de=de.next}else{if(y(me._,Te._)){(fe=me).next=Ee,Ee.previous=fe,--De;continue e}ze+=me._.r,me=me.previous}while(de!==me.next);for(Te.previous=fe,Te.next=Ee,fe.next=Ee.previous=Ee=Te,Se=m(fe);(Te=Te.next)!==Ee;)(Oe=m(Te))<Se&&(fe=Te,Se=Oe);Ee=fe.next}for(fe=[Ee._],Te=Ee;(Te=Te.next)!==Ee;)fe.push(Te._);for(Te=i(fe),De=0;De<Ae;++De)(fe=ie[De]).x-=Te.x,fe.y-=Te.y;return Te.r}function S(ie){return f(ie),ie}function w(ie){if(typeof ie!="function")throw new Error;return ie}function E(){return 0}function O(ie){return function(){return ie}}function C(ie){return Math.sqrt(ie.value)}function P(){var ie=null,fe=1,Ee=1,Te=E;function Ae(Se){return Se.x=fe/2,Se.y=Ee/2,ie?Se.eachBefore(R(ie)).eachAfter(j(Te,.5)).eachBefore(D(1)):Se.eachBefore(R(C)).eachAfter(j(E,1)).eachAfter(j(Te,Se.r/Math.min(fe,Ee))).eachBefore(D(Math.min(fe,Ee)/(2*Se.r))),Se}return Ae.radius=function(Se){return arguments.length?(ie=(Oe=Se)==null?null:w(Oe),Ae):ie;var Oe},Ae.size=function(Se){return arguments.length?(fe=+Se[0],Ee=+Se[1],Ae):[fe,Ee]},Ae.padding=function(Se){return arguments.length?(Te=typeof Se=="function"?Se:O(+Se),Ae):Te},Ae}function R(ie){return function(fe){fe.children||(fe.r=Math.max(0,+ie(fe)||0))}}function j(ie,fe){return function(Ee){if(Te=Ee.children){var Te,Ae,Se,Oe=Te.length,De=ie(Ee)*fe||0;if(De)for(Ae=0;Ae<Oe;++Ae)Te[Ae].r+=De;if(Se=f(Te),De)for(Ae=0;Ae<Oe;++Ae)Te[Ae].r-=De;Ee.r=Se+De}}}function D(ie){return function(fe){var Ee=fe.parent;fe.r*=ie,Ee&&(fe.x=Ee.x+ie*fe.x,fe.y=Ee.y+ie*fe.y)}}function N(ie){ie.x0=Math.round(ie.x0),ie.y0=Math.round(ie.y0),ie.x1=Math.round(ie.x1),ie.y1=Math.round(ie.y1)}function W(ie,fe,Ee,Te,Ae){for(var Se,Oe=ie.children,De=-1,de=Oe.length,me=ie.value&&(Te-fe)/ie.value;++De<de;)(Se=Oe[De]).y0=Ee,Se.y1=Ae,Se.x0=fe,Se.x1=fe+=Se.value*me}function F(){var ie=1,fe=1,Ee=0,Te=!1;function Ae(Se){var Oe=Se.height+1;return Se.x0=Se.y0=Ee,Se.x1=ie,Se.y1=fe/Oe,Se.eachBefore(function(De,de){return function(me){me.children&&W(me,me.x0,De*(me.depth+1)/de,me.x1,De*(me.depth+2)/de);var Me=me.x0,ze=me.y0,Pe=me.x1-Ee,Ne=me.y1-Ee;Pe<Me&&(Me=Pe=(Me+Pe)/2),Ne<ze&&(ze=Ne=(ze+Ne)/2),me.x0=Me,me.y0=ze,me.x1=Pe,me.y1=Ne}}(fe,Oe)),Te&&Se.eachBefore(N),Se}return Ae.round=function(Se){return arguments.length?(Te=!!Se,Ae):Te},Ae.size=function(Se){return arguments.length?(ie=+Se[0],fe=+Se[1],Ae):[ie,fe]},Ae.padding=function(Se){return arguments.length?(Ee=+Se,Ae):Ee},Ae}var V="$",U={depth:-1},te={};function J(ie){return ie.id}function X(ie){return ie.parentId}function K(){var ie=J,fe=X;function Ee(Te){var Ae,Se,Oe,De,de,me,Me,ze=Te.length,Pe=new Array(ze),Ne={};for(Se=0;Se<ze;++Se)Ae=Te[Se],de=Pe[Se]=new n(Ae),(me=ie(Ae,Se,Te))!=null&&(me+="")&&(Ne[Me=V+(de.id=me)]=Me in Ne?te:de);for(Se=0;Se<ze;++Se)if(de=Pe[Se],(me=fe(Te[Se],Se,Te))!=null&&(me+="")){if(!(De=Ne[V+me]))throw new Error("missing: "+me);if(De===te)throw new Error("ambiguous: "+me);De.children?De.children.push(de):De.children=[de],de.parent=De}else{if(Oe)throw new Error("multiple roots");Oe=de}if(!Oe)throw new Error("no root");if(Oe.parent=U,Oe.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--ze}).eachBefore(a),Oe.parent=null,ze>0)throw new Error("cycle");return Oe}return Ee.id=function(Te){return arguments.length?(ie=w(Te),Ee):ie},Ee.parentId=function(Te){return arguments.length?(fe=w(Te),Ee):fe},Ee}function Q(ie,fe){return ie.parent===fe.parent?1:2}function Z(ie){var fe=ie.children;return fe?fe[0]:ie.t}function re(ie){var fe=ie.children;return fe?fe[fe.length-1]:ie.t}function oe(ie,fe,Ee){var Te=Ee/(fe.i-ie.i);fe.c-=Te,fe.s+=Ee,ie.c+=Te,fe.z+=Ee,fe.m+=Ee}function ae(ie,fe,Ee){return ie.a.parent===fe.parent?ie.a:Ee}function ce(ie,fe){this._=ie,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=fe}function he(){var ie=Q,fe=1,Ee=1,Te=null;function Ae(de){var me=function(rt){for(var dt,vt,ht,et,$e,wt=new ce(rt,0),Pt=[wt];dt=Pt.pop();)if(ht=dt._.children)for(dt.children=new Array($e=ht.length),et=$e-1;et>=0;--et)Pt.push(vt=dt.children[et]=new ce(ht[et],et)),vt.parent=dt;return(wt.parent=new ce(null,0)).children=[wt],wt}(de);if(me.eachAfter(Se),me.parent.m=-me.z,me.eachBefore(Oe),Te)de.eachBefore(De);else{var Me=de,ze=de,Pe=de;de.eachBefore(function(rt){rt.x<Me.x&&(Me=rt),rt.x>ze.x&&(ze=rt),rt.depth>Pe.depth&&(Pe=rt)});var Ne=Me===ze?1:ie(Me,ze)/2,Ve=Ne-Me.x,Ye=fe/(ze.x+Ne+Ve),at=Ee/(Pe.depth||1);de.eachBefore(function(rt){rt.x=(rt.x+Ve)*Ye,rt.y=rt.depth*at})}return de}function Se(de){var me=de.children,Me=de.parent.children,ze=de.i?Me[de.i-1]:null;if(me){(function(Ne){for(var Ve,Ye=0,at=0,rt=Ne.children,dt=rt.length;--dt>=0;)(Ve=rt[dt]).z+=Ye,Ve.m+=Ye,Ye+=Ve.s+(at+=Ve.c)})(de);var Pe=(me[0].z+me[me.length-1].z)/2;ze?(de.z=ze.z+ie(de._,ze._),de.m=de.z-Pe):de.z=Pe}else ze&&(de.z=ze.z+ie(de._,ze._));de.parent.A=function(Ne,Ve,Ye){if(Ve){for(var at,rt=Ne,dt=Ne,vt=Ve,ht=rt.parent.children[0],et=rt.m,$e=dt.m,wt=vt.m,Pt=ht.m;vt=re(vt),rt=Z(rt),vt&&rt;)ht=Z(ht),(dt=re(dt)).a=Ne,(at=vt.z+wt-rt.z-et+ie(vt._,rt._))>0&&(oe(ae(vt,Ne,Ye),Ne,at),et+=at,$e+=at),wt+=vt.m,et+=rt.m,Pt+=ht.m,$e+=dt.m;vt&&!re(dt)&&(dt.t=vt,dt.m+=wt-$e),rt&&!Z(ht)&&(ht.t=rt,ht.m+=et-Pt,Ye=Ne)}return Ye}(de,ze,de.parent.A||Me[0])}function Oe(de){de._.x=de.z+de.parent.m,de.m+=de.parent.m}function De(de){de.x*=fe,de.y=de.depth*Ee}return Ae.separation=function(de){return arguments.length?(ie=de,Ae):ie},Ae.size=function(de){return arguments.length?(Te=!1,fe=+de[0],Ee=+de[1],Ae):Te?null:[fe,Ee]},Ae.nodeSize=function(de){return arguments.length?(Te=!0,fe=+de[0],Ee=+de[1],Ae):Te?[fe,Ee]:null},Ae}function pe(ie,fe,Ee,Te,Ae){for(var Se,Oe=ie.children,De=-1,de=Oe.length,me=ie.value&&(Ae-Ee)/ie.value;++De<de;)(Se=Oe[De]).x0=fe,Se.x1=Te,Se.y0=Ee,Se.y1=Ee+=Se.value*me}ce.prototype=Object.create(n.prototype);var xe=(1+Math.sqrt(5))/2;function be(ie,fe,Ee,Te,Ae,Se){for(var Oe,De,de,me,Me,ze,Pe,Ne,Ve,Ye,at,rt=[],dt=fe.children,vt=0,ht=0,et=dt.length,$e=fe.value;vt<et;){de=Ae-Ee,me=Se-Te;do Me=dt[ht++].value;while(!Me&&ht<et);for(ze=Pe=Me,at=Me*Me*(Ye=Math.max(me/de,de/me)/($e*ie)),Ve=Math.max(Pe/at,at/ze);ht<et;++ht){if(Me+=De=dt[ht].value,De<ze&&(ze=De),De>Pe&&(Pe=De),at=Me*Me*Ye,(Ne=Math.max(Pe/at,at/ze))>Ve){Me-=De;break}Ve=Ne}rt.push(Oe={value:Me,dice:de<me,children:dt.slice(vt,ht)}),Oe.dice?W(Oe,Ee,Te,Ae,$e?Te+=me*Me/$e:Se):pe(Oe,Ee,Te,$e?Ee+=de*Me/$e:Ae,Se),$e-=Me,vt=ht}return rt}var ve=function ie(fe){function Ee(Te,Ae,Se,Oe,De){be(fe,Te,Ae,Se,Oe,De)}return Ee.ratio=function(Te){return ie((Te=+Te)>1?Te:1)},Ee}(xe);function ge(){var ie=ve,fe=!1,Ee=1,Te=1,Ae=[0],Se=E,Oe=E,De=E,de=E,me=E;function Me(Pe){return Pe.x0=Pe.y0=0,Pe.x1=Ee,Pe.y1=Te,Pe.eachBefore(ze),Ae=[0],fe&&Pe.eachBefore(N),Pe}function ze(Pe){var Ne=Ae[Pe.depth],Ve=Pe.x0+Ne,Ye=Pe.y0+Ne,at=Pe.x1-Ne,rt=Pe.y1-Ne;at<Ve&&(Ve=at=(Ve+at)/2),rt<Ye&&(Ye=rt=(Ye+rt)/2),Pe.x0=Ve,Pe.y0=Ye,Pe.x1=at,Pe.y1=rt,Pe.children&&(Ne=Ae[Pe.depth+1]=Se(Pe)/2,Ve+=me(Pe)-Ne,Ye+=Oe(Pe)-Ne,(at-=De(Pe)-Ne)<Ve&&(Ve=at=(Ve+at)/2),(rt-=de(Pe)-Ne)<Ye&&(Ye=rt=(Ye+rt)/2),ie(Pe,Ve,Ye,at,rt))}return Me.round=function(Pe){return arguments.length?(fe=!!Pe,Me):fe},Me.size=function(Pe){return arguments.length?(Ee=+Pe[0],Te=+Pe[1],Me):[Ee,Te]},Me.tile=function(Pe){return arguments.length?(ie=w(Pe),Me):ie},Me.padding=function(Pe){return arguments.length?Me.paddingInner(Pe).paddingOuter(Pe):Me.paddingInner()},Me.paddingInner=function(Pe){return arguments.length?(Se=typeof Pe=="function"?Pe:O(+Pe),Me):Se},Me.paddingOuter=function(Pe){return arguments.length?Me.paddingTop(Pe).paddingRight(Pe).paddingBottom(Pe).paddingLeft(Pe):Me.paddingTop()},Me.paddingTop=function(Pe){return arguments.length?(Oe=typeof Pe=="function"?Pe:O(+Pe),Me):Oe},Me.paddingRight=function(Pe){return arguments.length?(De=typeof Pe=="function"?Pe:O(+Pe),Me):De},Me.paddingBottom=function(Pe){return arguments.length?(de=typeof Pe=="function"?Pe:O(+Pe),Me):de},Me.paddingLeft=function(Pe){return arguments.length?(me=typeof Pe=="function"?Pe:O(+Pe),Me):me},Me}function we(ie,fe,Ee,Te,Ae){var Se,Oe,De=ie.children,de=De.length,me=new Array(de+1);for(me[0]=Oe=Se=0;Se<de;++Se)me[Se+1]=Oe+=De[Se].value;(function Me(ze,Pe,Ne,Ve,Ye,at,rt){if(ze>=Pe-1){var dt=De[ze];return dt.x0=Ve,dt.y0=Ye,dt.x1=at,void(dt.y1=rt)}for(var vt=me[ze],ht=Ne/2+vt,et=ze+1,$e=Pe-1;et<$e;){var wt=et+$e>>>1;me[wt]<ht?et=wt+1:$e=wt}ht-me[et-1]<me[et]-ht&&ze+1<et&&--et;var Pt=me[et]-vt,Ot=Ne-Pt;if(at-Ve>rt-Ye){var At=(Ve*Ot+at*Pt)/Ne;Me(ze,et,Pt,Ve,Ye,At,rt),Me(et,Pe,Ot,At,Ye,at,rt)}else{var He=(Ye*Ot+rt*Pt)/Ne;Me(ze,et,Pt,Ve,Ye,at,He),Me(et,Pe,Ot,Ve,He,at,rt)}})(0,de,ie.value,fe,Ee,Te,Ae)}function _e(ie,fe,Ee,Te,Ae){(1&ie.depth?pe:W)(ie,fe,Ee,Te,Ae)}var se=function ie(fe){function Ee(Te,Ae,Se,Oe,De){if((de=Te._squarify)&&de.ratio===fe)for(var de,me,Me,ze,Pe,Ne=-1,Ve=de.length,Ye=Te.value;++Ne<Ve;){for(Me=(me=de[Ne]).children,ze=me.value=0,Pe=Me.length;ze<Pe;++ze)me.value+=Me[ze].value;me.dice?W(me,Ae,Se,Oe,Se+=(De-Se)*me.value/Ye):pe(me,Ae,Se,Ae+=(Oe-Ae)*me.value/Ye,De),Ye-=me.value}else Te._squarify=de=be(fe,Te,Ae,Se,Oe,De),de.ratio=fe}return Ee.ratio=function(Te){return ie((Te=+Te)>1?Te:1)},Ee}(xe)},10132:function(ee,z,e){e.d(z,{ak:function(){return p}});var M=Math.PI,k=2*M,o=1e-6,T=k-o;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function h(){return new b}b.prototype=h.prototype={constructor:b,moveTo:function(c,x){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,x){this._+="L"+(this._x1=+c)+","+(this._y1=+x)},quadraticCurveTo:function(c,x,d,g){this._+="Q"+ +c+","+ +x+","+(this._x1=+d)+","+(this._y1=+g)},bezierCurveTo:function(c,x,d,g,v,y){this._+="C"+ +c+","+ +x+","+ +d+","+ +g+","+(this._x1=+v)+","+(this._y1=+y)},arcTo:function(c,x,d,g,v){c=+c,x=+x,d=+d,g=+g,v=+v;var y=this._x1,m=this._y1,_=d-c,f=g-x,S=y-c,w=m-x,E=S*S+w*w;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=x);else if(E>o)if(Math.abs(w*_-f*S)>o&&v){var O=d-y,C=g-m,P=_*_+f*f,R=O*O+C*C,j=Math.sqrt(P),D=Math.sqrt(E),N=v*Math.tan((M-Math.acos((P+E-R)/(2*j*D)))/2),W=N/D,F=N/j;Math.abs(W-1)>o&&(this._+="L"+(c+W*S)+","+(x+W*w)),this._+="A"+v+","+v+",0,0,"+ +(w*O>S*C)+","+(this._x1=c+F*_)+","+(this._y1=x+F*f)}else this._+="L"+(this._x1=c)+","+(this._y1=x)},arc:function(c,x,d,g,v,y){c=+c,x=+x,y=!!y;var m=(d=+d)*Math.cos(g),_=d*Math.sin(g),f=c+m,S=x+_,w=1^y,E=y?g-v:v-g;if(d<0)throw new Error("negative radius: "+d);this._x1===null?this._+="M"+f+","+S:(Math.abs(this._x1-f)>o||Math.abs(this._y1-S)>o)&&(this._+="L"+f+","+S),d&&(E<0&&(E=E%k+k),E>T?this._+="A"+d+","+d+",0,1,"+w+","+(c-m)+","+(x-_)+"A"+d+","+d+",0,1,"+w+","+(this._x1=f)+","+(this._y1=S):E>o&&(this._+="A"+d+","+d+",0,"+ +(E>=M)+","+w+","+(this._x1=c+d*Math.cos(v))+","+(this._y1=x+d*Math.sin(v))))},rect:function(c,x,d,g){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)+"h"+ +d+"v"+ +g+"h"+-d+"Z"},toString:function(){return this._}};var s=h,t=Array.prototype.slice;function a(c){return function(){return c}}function n(c){return c[0]}function r(c){return c[1]}function i(c){return c.source}function l(c){return c.target}function u(c,x,d,g,v){c.moveTo(x,d),c.bezierCurveTo(x=(x+g)/2,d,x,v,g,v)}function p(){return function(c){var x=i,d=l,g=n,v=r,y=null;function m(){var _,f=t.call(arguments),S=x.apply(this,f),w=d.apply(this,f);if(y||(y=_=s()),c(y,+g.apply(this,(f[0]=S,f)),+v.apply(this,f),+g.apply(this,(f[0]=w,f)),+v.apply(this,f)),_)return y=null,_+""||null}return m.source=function(_){return arguments.length?(x=_,m):x},m.target=function(_){return arguments.length?(d=_,m):d},m.x=function(_){return arguments.length?(g=typeof _=="function"?_:a(+_),m):g},m.y=function(_){return arguments.length?(v=typeof _=="function"?_:a(+_),m):v},m.context=function(_){return arguments.length?(y=_??null,m):y},m}(u)}},94336:function(ee,z,e){e.d(z,{Yn:function(){return i},m_:function(){return n},E9:function(){return l}});var M=e(8208),k=e(58931),o=e(46192),T=e(68936),b=e(32171),h=e(53528);function s(et){if(0<=et.y&&et.y<100){var $e=new Date(-1,et.m,et.d,et.H,et.M,et.S,et.L);return $e.setFullYear(et.y),$e}return new Date(et.y,et.m,et.d,et.H,et.M,et.S,et.L)}function t(et){if(0<=et.y&&et.y<100){var $e=new Date(Date.UTC(-1,et.m,et.d,et.H,et.M,et.S,et.L));return $e.setUTCFullYear(et.y),$e}return new Date(Date.UTC(et.y,et.m,et.d,et.H,et.M,et.S,et.L))}function a(et,$e,wt){return{y:et,m:$e,d:wt,H:0,M:0,S:0,L:0}}function n(et){var $e=et.dateTime,wt=et.date,Pt=et.time,Ot=et.periods,At=et.days,He=et.shortDays,Ze=et.months,Be=et.shortMonths,Ge=v(Ot),it=y(Ot),tt=v(At),Re=y(At),Fe=v(He),nt=y(He),We=v(Ze),ct=y(Ze),pt=v(Be),gt=y(Be),ut={a:function(It){return He[It.getDay()]},A:function(It){return At[It.getDay()]},b:function(It){return Be[It.getMonth()]},B:function(It){return Ze[It.getMonth()]},c:null,d:K,e:K,f:ae,H:Q,I:Z,j:re,L:oe,m:ce,M:he,p:function(It){return Ot[+(It.getHours()>=12)]},q:function(It){return 1+~~(It.getMonth()/3)},Q:vt,s:ht,S:pe,u:xe,U:be,V:ve,w:ge,W:we,x:null,X:null,y:_e,Y:se,Z:ie,"%":dt},kt={a:function(It){return He[It.getUTCDay()]},A:function(It){return At[It.getUTCDay()]},b:function(It){return Be[It.getUTCMonth()]},B:function(It){return Ze[It.getUTCMonth()]},c:null,d:fe,e:fe,f:Oe,H:Ee,I:Te,j:Ae,L:Se,m:De,M:de,p:function(It){return Ot[+(It.getUTCHours()>=12)]},q:function(It){return 1+~~(It.getUTCMonth()/3)},Q:vt,s:ht,S:me,u:Me,U:ze,V:Pe,w:Ne,W:Ve,x:null,X:null,y:Ye,Y:at,Z:rt,"%":dt},yt={a:function(It,Wt,Nt){var Bt=Fe.exec(Wt.slice(Nt));return Bt?(It.w=nt[Bt[0].toLowerCase()],Nt+Bt[0].length):-1},A:function(It,Wt,Nt){var Bt=tt.exec(Wt.slice(Nt));return Bt?(It.w=Re[Bt[0].toLowerCase()],Nt+Bt[0].length):-1},b:function(It,Wt,Nt){var Bt=pt.exec(Wt.slice(Nt));return Bt?(It.m=gt[Bt[0].toLowerCase()],Nt+Bt[0].length):-1},B:function(It,Wt,Nt){var Bt=We.exec(Wt.slice(Nt));return Bt?(It.m=ct[Bt[0].toLowerCase()],Nt+Bt[0].length):-1},c:function(It,Wt,Nt){return Ct(It,$e,Wt,Nt)},d:j,e:j,f:U,H:N,I:N,j:D,L:V,m:R,M:W,p:function(It,Wt,Nt){var Bt=Ge.exec(Wt.slice(Nt));return Bt?(It.p=it[Bt[0].toLowerCase()],Nt+Bt[0].length):-1},q:P,Q:J,s:X,S:F,u:_,U:f,V:S,w:m,W:w,x:function(It,Wt,Nt){return Ct(It,wt,Wt,Nt)},X:function(It,Wt,Nt){return Ct(It,Pt,Wt,Nt)},y:O,Y:E,Z:C,"%":te};function Mt(It,Wt){return function(Nt){var Bt,Ht,Qt,Cn=[],Tn=-1,hn=0,Zt=It.length;for(Nt instanceof Date||(Nt=new Date(+Nt));++Tn<Zt;)It.charCodeAt(Tn)===37&&(Cn.push(It.slice(hn,Tn)),(Ht=u[Bt=It.charAt(++Tn)])!=null?Bt=It.charAt(++Tn):Ht=Bt==="e"?" ":"0",(Qt=Wt[Bt])&&(Bt=Qt(Nt,Ht)),Cn.push(Bt),hn=Tn+1);return Cn.push(It.slice(hn,Tn)),Cn.join("")}}function Lt(It,Wt){return function(Nt){var Bt,Ht,Qt=a(1900,void 0,1);if(Ct(Qt,It,Nt+="",0)!=Nt.length)return null;if("Q"in Qt)return new Date(Qt.Q);if("s"in Qt)return new Date(1e3*Qt.s+("L"in Qt?Qt.L:0));if(Wt&&!("Z"in Qt)&&(Qt.Z=0),"p"in Qt&&(Qt.H=Qt.H%12+12*Qt.p),Qt.m===void 0&&(Qt.m="q"in Qt?Qt.q:0),"V"in Qt){if(Qt.V<1||Qt.V>53)return null;"w"in Qt||(Qt.w=1),"Z"in Qt?(Ht=(Bt=t(a(Qt.y,0,1))).getUTCDay(),Bt=Ht>4||Ht===0?M.ot.ceil(Bt):(0,M.ot)(Bt),Bt=k.c.offset(Bt,7*(Qt.V-1)),Qt.y=Bt.getUTCFullYear(),Qt.m=Bt.getUTCMonth(),Qt.d=Bt.getUTCDate()+(Qt.w+6)%7):(Ht=(Bt=s(a(Qt.y,0,1))).getDay(),Bt=Ht>4||Ht===0?o.qT.ceil(Bt):(0,o.qT)(Bt),Bt=T.c.offset(Bt,7*(Qt.V-1)),Qt.y=Bt.getFullYear(),Qt.m=Bt.getMonth(),Qt.d=Bt.getDate()+(Qt.w+6)%7)}else("W"in Qt||"U"in Qt)&&("w"in Qt||(Qt.w="u"in Qt?Qt.u%7:"W"in Qt?1:0),Ht="Z"in Qt?t(a(Qt.y,0,1)).getUTCDay():s(a(Qt.y,0,1)).getDay(),Qt.m=0,Qt.d="W"in Qt?(Qt.w+6)%7+7*Qt.W-(Ht+5)%7:Qt.w+7*Qt.U-(Ht+6)%7);return"Z"in Qt?(Qt.H+=Qt.Z/100|0,Qt.M+=Qt.Z%100,t(Qt)):s(Qt)}}function Ct(It,Wt,Nt,Bt){for(var Ht,Qt,Cn=0,Tn=Wt.length,hn=Nt.length;Cn<Tn;){if(Bt>=hn)return-1;if((Ht=Wt.charCodeAt(Cn++))===37){if(Ht=Wt.charAt(Cn++),!(Qt=yt[Ht in u?Wt.charAt(Cn++):Ht])||(Bt=Qt(It,Nt,Bt))<0)return-1}else if(Ht!=Nt.charCodeAt(Bt++))return-1}return Bt}return ut.x=Mt(wt,ut),ut.X=Mt(Pt,ut),ut.c=Mt($e,ut),kt.x=Mt(wt,kt),kt.X=Mt(Pt,kt),kt.c=Mt($e,kt),{format:function(It){var Wt=Mt(It+="",ut);return Wt.toString=function(){return It},Wt},parse:function(It){var Wt=Lt(It+="",!1);return Wt.toString=function(){return It},Wt},utcFormat:function(It){var Wt=Mt(It+="",kt);return Wt.toString=function(){return It},Wt},utcParse:function(It){var Wt=Lt(It+="",!0);return Wt.toString=function(){return It},Wt}}}var r,i,l,u={"-":"",_:" ",0:"0"},p=/^\s*\d+/,c=/^%/,x=/[\\^$*+?|[\]().{}]/g;function d(et,$e,wt){var Pt=et<0?"-":"",Ot=(Pt?-et:et)+"",At=Ot.length;return Pt+(At<wt?new Array(wt-At+1).join($e)+Ot:Ot)}function g(et){return et.replace(x,"\\$&")}function v(et){return new RegExp("^(?:"+et.map(g).join("|")+")","i")}function y(et){for(var $e={},wt=-1,Pt=et.length;++wt<Pt;)$e[et[wt].toLowerCase()]=wt;return $e}function m(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+1));return Pt?(et.w=+Pt[0],wt+Pt[0].length):-1}function _(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+1));return Pt?(et.u=+Pt[0],wt+Pt[0].length):-1}function f(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.U=+Pt[0],wt+Pt[0].length):-1}function S(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.V=+Pt[0],wt+Pt[0].length):-1}function w(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.W=+Pt[0],wt+Pt[0].length):-1}function E(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+4));return Pt?(et.y=+Pt[0],wt+Pt[0].length):-1}function O(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.y=+Pt[0]+(+Pt[0]>68?1900:2e3),wt+Pt[0].length):-1}function C(et,$e,wt){var Pt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec($e.slice(wt,wt+6));return Pt?(et.Z=Pt[1]?0:-(Pt[2]+(Pt[3]||"00")),wt+Pt[0].length):-1}function P(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+1));return Pt?(et.q=3*Pt[0]-3,wt+Pt[0].length):-1}function R(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.m=Pt[0]-1,wt+Pt[0].length):-1}function j(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.d=+Pt[0],wt+Pt[0].length):-1}function D(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+3));return Pt?(et.m=0,et.d=+Pt[0],wt+Pt[0].length):-1}function N(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.H=+Pt[0],wt+Pt[0].length):-1}function W(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.M=+Pt[0],wt+Pt[0].length):-1}function F(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+2));return Pt?(et.S=+Pt[0],wt+Pt[0].length):-1}function V(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+3));return Pt?(et.L=+Pt[0],wt+Pt[0].length):-1}function U(et,$e,wt){var Pt=p.exec($e.slice(wt,wt+6));return Pt?(et.L=Math.floor(Pt[0]/1e3),wt+Pt[0].length):-1}function te(et,$e,wt){var Pt=c.exec($e.slice(wt,wt+1));return Pt?wt+Pt[0].length:-1}function J(et,$e,wt){var Pt=p.exec($e.slice(wt));return Pt?(et.Q=+Pt[0],wt+Pt[0].length):-1}function X(et,$e,wt){var Pt=p.exec($e.slice(wt));return Pt?(et.s=+Pt[0],wt+Pt[0].length):-1}function K(et,$e){return d(et.getDate(),$e,2)}function Q(et,$e){return d(et.getHours(),$e,2)}function Z(et,$e){return d(et.getHours()%12||12,$e,2)}function re(et,$e){return d(1+T.c.count((0,b.c)(et),et),$e,3)}function oe(et,$e){return d(et.getMilliseconds(),$e,3)}function ae(et,$e){return oe(et,$e)+"000"}function ce(et,$e){return d(et.getMonth()+1,$e,2)}function he(et,$e){return d(et.getMinutes(),$e,2)}function pe(et,$e){return d(et.getSeconds(),$e,2)}function xe(et){var $e=et.getDay();return $e===0?7:$e}function be(et,$e){return d(o.uU.count((0,b.c)(et)-1,et),$e,2)}function ve(et,$e){var wt=et.getDay();return et=wt>=4||wt===0?(0,o.kD)(et):o.kD.ceil(et),d(o.kD.count((0,b.c)(et),et)+((0,b.c)(et).getDay()===4),$e,2)}function ge(et){return et.getDay()}function we(et,$e){return d(o.qT.count((0,b.c)(et)-1,et),$e,2)}function _e(et,$e){return d(et.getFullYear()%100,$e,2)}function se(et,$e){return d(et.getFullYear()%1e4,$e,4)}function ie(et){var $e=et.getTimezoneOffset();return($e>0?"-":($e*=-1,"+"))+d($e/60|0,"0",2)+d($e%60,"0",2)}function fe(et,$e){return d(et.getUTCDate(),$e,2)}function Ee(et,$e){return d(et.getUTCHours(),$e,2)}function Te(et,$e){return d(et.getUTCHours()%12||12,$e,2)}function Ae(et,$e){return d(1+k.c.count((0,h.c)(et),et),$e,3)}function Se(et,$e){return d(et.getUTCMilliseconds(),$e,3)}function Oe(et,$e){return Se(et,$e)+"000"}function De(et,$e){return d(et.getUTCMonth()+1,$e,2)}function de(et,$e){return d(et.getUTCMinutes(),$e,2)}function me(et,$e){return d(et.getUTCSeconds(),$e,2)}function Me(et){var $e=et.getUTCDay();return $e===0?7:$e}function ze(et,$e){return d(M.EV.count((0,h.c)(et)-1,et),$e,2)}function Pe(et,$e){var wt=et.getUTCDay();return et=wt>=4||wt===0?(0,M.yA)(et):M.yA.ceil(et),d(M.yA.count((0,h.c)(et),et)+((0,h.c)(et).getUTCDay()===4),$e,2)}function Ne(et){return et.getUTCDay()}function Ve(et,$e){return d(M.ot.count((0,h.c)(et)-1,et),$e,2)}function Ye(et,$e){return d(et.getUTCFullYear()%100,$e,2)}function at(et,$e){return d(et.getUTCFullYear()%1e4,$e,4)}function rt(){return"+0000"}function dt(){return"%"}function vt(et){return+et}function ht(et){return Math.floor(+et/1e3)}r=n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),i=r.format,r.parse,l=r.utcFormat,r.utcParse},68936:function(ee,z,e){e.d(z,{m:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(b){b.setHours(0,0,0,0)},function(b,h){b.setDate(b.getDate()+h)},function(b,h){return(h-b-(h.getTimezoneOffset()-b.getTimezoneOffset())*k.iy)/k.SK},function(b){return b.getDate()-1});z.c=o;var T=o.range},69792:function(ee,z,e){e.d(z,{KK:function(){return b},SK:function(){return T},cg:function(){return o},iy:function(){return k},yc:function(){return M}});var M=1e3,k=6e4,o=36e5,T=864e5,b=6048e5},73220:function(ee,z,e){e.r(z),e.d(z,{timeDay:function(){return p.c},timeDays:function(){return p.m},timeFriday:function(){return c.iB},timeFridays:function(){return c.sJ},timeHour:function(){return l},timeHours:function(){return u},timeInterval:function(){return M.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return T},timeMinute:function(){return n},timeMinutes:function(){return r},timeMonday:function(){return c.qT},timeMondays:function(){return c.QP},timeMonth:function(){return d},timeMonths:function(){return g},timeSaturday:function(){return c.Wc},timeSaturdays:function(){return c.aI},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return c.uU},timeSundays:function(){return c.Ab},timeThursday:function(){return c.kD},timeThursdays:function(){return c.eC},timeTuesday:function(){return c.Mf},timeTuesdays:function(){return c.Oc},timeWednesday:function(){return c.eg},timeWednesdays:function(){return c.sn},timeWeek:function(){return c.uU},timeWeeks:function(){return c.Ab},timeYear:function(){return v.c},timeYears:function(){return v.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return O.od},utcFridays:function(){return O.iG},utcHour:function(){return S},utcHours:function(){return w},utcMillisecond:function(){return o},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return _},utcMonday:function(){return O.ot},utcMondays:function(){return O.iO},utcMonth:function(){return P},utcMonths:function(){return R},utcSaturday:function(){return O.Ad},utcSaturdays:function(){return O.K8},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return O.EV},utcSundays:function(){return O.Wq},utcThursday:function(){return O.yA},utcThursdays:function(){return O.ob},utcTuesday:function(){return O.sG},utcTuesdays:function(){return O.kl},utcWednesday:function(){return O._6},utcWednesdays:function(){return O.W_},utcWeek:function(){return O.EV},utcWeeks:function(){return O.Wq},utcYear:function(){return j.c},utcYears:function(){return j.i}});var M=e(81628),k=(0,M.c)(function(){},function(D,N){D.setTime(+D+N)},function(D,N){return N-D});k.every=function(D){return D=Math.floor(D),isFinite(D)&&D>0?D>1?(0,M.c)(function(N){N.setTime(Math.floor(N/D)*D)},function(N,W){N.setTime(+N+W*D)},function(N,W){return(W-N)/D}):k:null};var o=k,T=k.range,b=e(69792),h=(0,M.c)(function(D){D.setTime(D-D.getMilliseconds())},function(D,N){D.setTime(+D+N*b.yc)},function(D,N){return(N-D)/b.yc},function(D){return D.getUTCSeconds()}),s=h,t=h.range,a=(0,M.c)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*b.yc)},function(D,N){D.setTime(+D+N*b.iy)},function(D,N){return(N-D)/b.iy},function(D){return D.getMinutes()}),n=a,r=a.range,i=(0,M.c)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*b.yc-D.getMinutes()*b.iy)},function(D,N){D.setTime(+D+N*b.cg)},function(D,N){return(N-D)/b.cg},function(D){return D.getHours()}),l=i,u=i.range,p=e(68936),c=e(46192),x=(0,M.c)(function(D){D.setDate(1),D.setHours(0,0,0,0)},function(D,N){D.setMonth(D.getMonth()+N)},function(D,N){return N.getMonth()-D.getMonth()+12*(N.getFullYear()-D.getFullYear())},function(D){return D.getMonth()}),d=x,g=x.range,v=e(32171),y=(0,M.c)(function(D){D.setUTCSeconds(0,0)},function(D,N){D.setTime(+D+N*b.iy)},function(D,N){return(N-D)/b.iy},function(D){return D.getUTCMinutes()}),m=y,_=y.range,f=(0,M.c)(function(D){D.setUTCMinutes(0,0,0)},function(D,N){D.setTime(+D+N*b.cg)},function(D,N){return(N-D)/b.cg},function(D){return D.getUTCHours()}),S=f,w=f.range,E=e(58931),O=e(8208),C=(0,M.c)(function(D){D.setUTCDate(1),D.setUTCHours(0,0,0,0)},function(D,N){D.setUTCMonth(D.getUTCMonth()+N)},function(D,N){return N.getUTCMonth()-D.getUTCMonth()+12*(N.getUTCFullYear()-D.getUTCFullYear())},function(D){return D.getUTCMonth()}),P=C,R=C.range,j=e(53528)},81628:function(ee,z,e){e.d(z,{c:function(){return o}});var M=new Date,k=new Date;function o(T,b,h,s){function t(a){return T(a=arguments.length===0?new Date:new Date(+a)),a}return t.floor=function(a){return T(a=new Date(+a)),a},t.ceil=function(a){return T(a=new Date(a-1)),b(a,1),T(a),a},t.round=function(a){var n=t(a),r=t.ceil(a);return a-n<r-a?n:r},t.offset=function(a,n){return b(a=new Date(+a),n==null?1:Math.floor(n)),a},t.range=function(a,n,r){var i,l=[];if(a=t.ceil(a),r=r==null?1:Math.floor(r),!(a<n&&r>0))return l;do l.push(i=new Date(+a)),b(a,r),T(a);while(i<a&&a<n);return l},t.filter=function(a){return o(function(n){if(n>=n)for(;T(n),!a(n);)n.setTime(n-1)},function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;b(n,-1),!a(n););else for(;--r>=0;)for(;b(n,1),!a(n););})},h&&(t.count=function(a,n){return M.setTime(+a),k.setTime(+n),T(M),T(k),Math.floor(h(M,k))},t.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?t.filter(s?function(n){return s(n)%a==0}:function(n){return t.count(0,n)%a==0}):t:null}),t}},58931:function(ee,z,e){e.d(z,{o:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(b){b.setUTCHours(0,0,0,0)},function(b,h){b.setUTCDate(b.getUTCDate()+h)},function(b,h){return(h-b)/k.SK},function(b){return b.getUTCDate()-1});z.c=o;var T=o.range},8208:function(ee,z,e){e.d(z,{Ad:function(){return n},EV:function(){return T},K8:function(){return x},W_:function(){return u},Wq:function(){return r},_6:function(){return s},iG:function(){return c},iO:function(){return i},kl:function(){return l},ob:function(){return p},od:function(){return a},ot:function(){return b},sG:function(){return h},yA:function(){return t}});var M=e(81628),k=e(69792);function o(d){return(0,M.c)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-d)%7),g.setUTCHours(0,0,0,0)},function(g,v){g.setUTCDate(g.getUTCDate()+7*v)},function(g,v){return(v-g)/k.KK})}var T=o(0),b=o(1),h=o(2),s=o(3),t=o(4),a=o(5),n=o(6),r=T.range,i=b.range,l=h.range,u=s.range,p=t.range,c=a.range,x=n.range},53528:function(ee,z,e){e.d(z,{i:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,h){b.setUTCFullYear(b.getUTCFullYear()+h*T)}):null},z.c=k;var o=k.range},46192:function(ee,z,e){e.d(z,{Ab:function(){return r},Mf:function(){return h},Oc:function(){return l},QP:function(){return i},Wc:function(){return n},aI:function(){return x},eC:function(){return p},eg:function(){return s},iB:function(){return a},kD:function(){return t},qT:function(){return b},sJ:function(){return c},sn:function(){return u},uU:function(){return T}});var M=e(81628),k=e(69792);function o(d){return(0,M.c)(function(g){g.setDate(g.getDate()-(g.getDay()+7-d)%7),g.setHours(0,0,0,0)},function(g,v){g.setDate(g.getDate()+7*v)},function(g,v){return(v-g-(v.getTimezoneOffset()-g.getTimezoneOffset())*k.iy)/k.KK})}var T=o(0),b=o(1),h=o(2),s=o(3),t=o(4),a=o(5),n=o(6),r=T.range,i=b.range,l=h.range,u=s.range,p=t.range,c=a.range,x=n.range},32171:function(ee,z,e){e.d(z,{Q:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,h){b.setFullYear(b.getFullYear()+h*T)}):null},z.c=k;var o=k.range},64348:function(ee,z,e){var M=e(39640)(),k=e(53664),o=M&&k("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var T=k("%SyntaxError%"),b=k("%TypeError%"),h=e(2304);ee.exports=function(s,t,a){if(!s||typeof s!="object"&&typeof s!="function")throw new b("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new b("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new b("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new b("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new b("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new b("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,r=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],u=!!h&&h(s,t);if(o)o(s,t,{configurable:i===null&&u?u.configurable:!i,enumerable:n===null&&u?u.enumerable:!n,value:a,writable:r===null&&u?u.writable:!r});else{if(!l&&(n||r||i))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");s[t]=a}}},81288:function(ee,z,e){var M=e(41820),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",o=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,h=e(39640)(),s=b&&h,t=function(n,r,i,l){if(r in n){if(l===!0){if(n[r]===i)return}else if(typeof(u=l)!="function"||o.call(u)!=="[object Function]"||!l())return}var u;s?b(n,r,{configurable:!0,enumerable:!1,value:i,writable:!0}):n[r]=i},a=function(n,r){var i=arguments.length>2?arguments[2]:{},l=M(r);k&&(l=T.call(l,Object.getOwnPropertySymbols(r)));for(var u=0;u<l.length;u+=1)t(n,l[u],r[l[u]],i[l[u]])};a.supportsDescriptors=!!s,ee.exports=a},31264:function(ee){ee.exports=function(){for(var z=0;z<arguments.length;z++)if(arguments[z]!==void 0)return arguments[z]}},63768:function(ee){ee.exports=M;var z=(M.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function M(o,T){Array.isArray(o)&&(o=o.join(", "));var b,h={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),b||(b=e),z.font=s+"px "+o;for(var a=0;a<b.length;a++){var n=b[a],r=z.measureText(n[0]).width+z.measureText(n[1]).width,i=z.measureText(n).width;if(Math.abs(r-i)>s*t){var l=(i-r)/s;h[n]=1e3*l}}return h}function k(o){for(var T=[],b=o[0];b<=o[1];b++)for(var h=String.fromCharCode(b),s=o[0];s<o[1];s++){var t=h+String.fromCharCode(s);T.push(t)}return T}M.createPairs=k,M.ascii=e},22235:function(ee,z,e){var M=e(49972),k=e(48816),o={M:"moveTo",C:"bezierCurveTo"};ee.exports=function(T,b){T.beginPath(),k(M(b)).forEach(function(h){var s=h[0],t=h.slice(1);T[o[s]].apply(T,t)}),T.closePath()}},72512:function(ee){ee.exports=function(z){switch(z){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(ee){function z(e,M,k){var o=0|e[k];if(o<=0)return[];var T,b=new Array(o);if(k===e.length-1)for(T=0;T<o;++T)b[T]=M;else for(T=0;T<o;++T)b[T]=z(e,M,k+1);return b}ee.exports=function(e,M){switch(M===void 0&&(M=0),typeof e){case"number":if(e>0)return function(k,o){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=o;return T}(0|e,M);break;case"object":if(typeof e.length=="number")return z(e,M,0)}return[]}},28912:function(ee){function z(S,w,E){E=E||2;var O,C,P,R,j,D,N,W=w&&w.length,F=W?w[0]*E:S.length,V=e(S,0,F,E,!0),U=[];if(!V||V.next===V.prev)return U;if(W&&(V=function(J,X,K,Q){var Z,re,oe,ae=[];for(Z=0,re=X.length;Z<re;Z++)(oe=e(J,X[Z]*Q,Z<re-1?X[Z+1]*Q:J.length,Q,!1))===oe.next&&(oe.steiner=!0),ae.push(r(oe));for(ae.sort(s),Z=0;Z<ae.length;Z++)t(ae[Z],K),K=M(K,K.next);return K}(S,w,V,E)),S.length>80*E){O=P=S[0],C=R=S[1];for(var te=E;te<F;te+=E)(j=S[te])<O&&(O=j),(D=S[te+1])<C&&(C=D),j>P&&(P=j),D>R&&(R=D);N=(N=Math.max(P-O,R-C))!==0?1/N:0}return k(V,U,E,O,C,N),U}function e(S,w,E,O,C){var P,R;if(C===f(S,w,E,O)>0)for(P=w;P<E;P+=O)R=y(P,S[P],S[P+1],R);else for(P=E-O;P>=w;P-=O)R=y(P,S[P],S[P+1],R);return R&&p(R,R.next)&&(m(R),R=R.next),R}function M(S,w){if(!S)return S;w||(w=S);var E,O=S;do if(E=!1,O.steiner||!p(O,O.next)&&u(O.prev,O,O.next)!==0)O=O.next;else{if(m(O),(O=w=O.prev)===O.next)break;E=!0}while(E||O!==w);return w}function k(S,w,E,O,C,P,R){if(S){!R&&P&&function(W,F,V,U){var te=W;do te.z===null&&(te.z=n(te.x,te.y,F,V,U)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==W);te.prevZ.nextZ=null,te.prevZ=null,function(J){var X,K,Q,Z,re,oe,ae,ce,he=1;do{for(K=J,J=null,re=null,oe=0;K;){for(oe++,Q=K,ae=0,X=0;X<he&&(ae++,Q=Q.nextZ);X++);for(ce=he;ae>0||ce>0&&Q;)ae!==0&&(ce===0||!Q||K.z<=Q.z)?(Z=K,K=K.nextZ,ae--):(Z=Q,Q=Q.nextZ,ce--),re?re.nextZ=Z:J=Z,Z.prevZ=re,re=Z;K=Q}re.nextZ=null,he*=2}while(oe>1)}(te)}(S,O,C,P);for(var j,D,N=S;S.prev!==S.next;)if(j=S.prev,D=S.next,P?T(S,O,C,P):o(S))w.push(j.i/E),w.push(S.i/E),w.push(D.i/E),m(S),S=D.next,N=D.next;else if((S=D)===N){R?R===1?k(S=b(M(S),w,E),w,E,O,C,P,2):R===2&&h(S,w,E,O,C,P):k(M(S),w,E,O,C,P,1);break}}}function o(S){var w=S.prev,E=S,O=S.next;if(u(w,E,O)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(i(w.x,w.y,E.x,E.y,O.x,O.y,C.x,C.y)&&u(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,w,E,O){var C=S.prev,P=S,R=S.next;if(u(C,P,R)>=0)return!1;for(var j=C.x<P.x?C.x<R.x?C.x:R.x:P.x<R.x?P.x:R.x,D=C.y<P.y?C.y<R.y?C.y:R.y:P.y<R.y?P.y:R.y,N=C.x>P.x?C.x>R.x?C.x:R.x:P.x>R.x?P.x:R.x,W=C.y>P.y?C.y>R.y?C.y:R.y:P.y>R.y?P.y:R.y,F=n(j,D,w,E,O),V=n(N,W,w,E,O),U=S.prevZ,te=S.nextZ;U&&U.z>=F&&te&&te.z<=V;){if(U!==S.prev&&U!==S.next&&i(C.x,C.y,P.x,P.y,R.x,R.y,U.x,U.y)&&u(U.prev,U,U.next)>=0||(U=U.prevZ,te!==S.prev&&te!==S.next&&i(C.x,C.y,P.x,P.y,R.x,R.y,te.x,te.y)&&u(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;U&&U.z>=F;){if(U!==S.prev&&U!==S.next&&i(C.x,C.y,P.x,P.y,R.x,R.y,U.x,U.y)&&u(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;te&&te.z<=V;){if(te!==S.prev&&te!==S.next&&i(C.x,C.y,P.x,P.y,R.x,R.y,te.x,te.y)&&u(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function b(S,w,E){var O=S;do{var C=O.prev,P=O.next.next;!p(C,P)&&c(C,O,O.next,P)&&g(C,P)&&g(P,C)&&(w.push(C.i/E),w.push(O.i/E),w.push(P.i/E),m(O),m(O.next),O=S=P),O=O.next}while(O!==S);return M(O)}function h(S,w,E,O,C,P){var R=S;do{for(var j=R.next.next;j!==R.prev;){if(R.i!==j.i&&l(R,j)){var D=v(R,j);return R=M(R,R.next),D=M(D,D.next),k(R,w,E,O,C,P),void k(D,w,E,O,C,P)}j=j.next}R=R.next}while(R!==S)}function s(S,w){return S.x-w.x}function t(S,w){if(w=function(O,C){var P,R=C,j=O.x,D=O.y,N=-1/0;do{if(D<=R.y&&D>=R.next.y&&R.next.y!==R.y){var W=R.x+(D-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(W<=j&&W>N){if(N=W,W===j){if(D===R.y)return R;if(D===R.next.y)return R.next}P=R.x<R.next.x?R:R.next}}R=R.next}while(R!==C);if(!P)return null;if(j===N)return P;var F,V=P,U=P.x,te=P.y,J=1/0;R=P;do j>=R.x&&R.x>=U&&j!==R.x&&i(D<te?j:N,D,U,te,D<te?N:j,D,R.x,R.y)&&(F=Math.abs(D-R.y)/(j-R.x),g(R,O)&&(F<J||F===J&&(R.x>P.x||R.x===P.x&&a(P,R)))&&(P=R,J=F)),R=R.next;while(R!==V);return P}(S,w),w){var E=v(w,S);M(w,w.next),M(E,E.next)}}function a(S,w){return u(S.prev,S,w.prev)<0&&u(w.next,S,S.next)<0}function n(S,w,E,O,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-O)*C)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function r(S){var w=S,E=S;do(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next;while(w!==S);return E}function i(S,w,E,O,C,P,R,j){return(C-R)*(w-j)-(S-R)*(P-j)>=0&&(S-R)*(O-j)-(E-R)*(w-j)>=0&&(E-R)*(P-j)-(C-R)*(O-j)>=0}function l(S,w){return S.next.i!==w.i&&S.prev.i!==w.i&&!function(E,O){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==O.i&&C.next.i!==O.i&&c(C,C.next,E,O))return!0;C=C.next}while(C!==E);return!1}(S,w)&&(g(S,w)&&g(w,S)&&function(E,O){var C=E,P=!1,R=(E.x+O.x)/2,j=(E.y+O.y)/2;do C.y>j!=C.next.y>j&&C.next.y!==C.y&&R<(C.next.x-C.x)*(j-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next;while(C!==E);return P}(S,w)&&(u(S.prev,S,w.prev)||u(S,w.prev,w))||p(S,w)&&u(S.prev,S,S.next)>0&&u(w.prev,w,w.next)>0)}function u(S,w,E){return(w.y-S.y)*(E.x-w.x)-(w.x-S.x)*(E.y-w.y)}function p(S,w){return S.x===w.x&&S.y===w.y}function c(S,w,E,O){var C=d(u(S,w,E)),P=d(u(S,w,O)),R=d(u(E,O,S)),j=d(u(E,O,w));return C!==P&&R!==j||!(C!==0||!x(S,E,w))||!(P!==0||!x(S,O,w))||!(R!==0||!x(E,S,O))||!(j!==0||!x(E,w,O))}function x(S,w,E){return w.x<=Math.max(S.x,E.x)&&w.x>=Math.min(S.x,E.x)&&w.y<=Math.max(S.y,E.y)&&w.y>=Math.min(S.y,E.y)}function d(S){return S>0?1:S<0?-1:0}function g(S,w){return u(S.prev,S,S.next)<0?u(S,w,S.next)>=0&&u(S,S.prev,w)>=0:u(S,w,S.prev)<0||u(S,S.next,w)<0}function v(S,w){var E=new _(S.i,S.x,S.y),O=new _(w.i,w.x,w.y),C=S.next,P=w.prev;return S.next=w,w.prev=S,E.next=C,C.prev=E,O.next=E,E.prev=O,P.next=O,O.prev=P,O}function y(S,w,E,O){var C=new _(S,w,E);return O?(C.next=O.next,C.prev=O,O.next.prev=C,O.next=C):(C.prev=C,C.next=C),C}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function _(S,w,E){this.i=S,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f(S,w,E,O){for(var C=0,P=w,R=E-O;P<E;P+=O)C+=(S[R]-S[P])*(S[P+1]+S[R+1]),R=P;return C}ee.exports=z,ee.exports.default=z,z.deviation=function(S,w,E,O){var C=w&&w.length,P=C?w[0]*E:S.length,R=Math.abs(f(S,0,P,E));if(C)for(var j=0,D=w.length;j<D;j++){var N=w[j]*E,W=j<D-1?w[j+1]*E:S.length;R-=Math.abs(f(S,N,W,E))}var F=0;for(j=0;j<O.length;j+=3){var V=O[j]*E,U=O[j+1]*E,te=O[j+2]*E;F+=Math.abs((S[V]-S[te])*(S[U+1]-S[V+1])-(S[V]-S[U])*(S[te+1]-S[V+1]))}return R===0&&F===0?0:Math.abs((F-R)/R)},z.flatten=function(S){for(var w=S[0][0].length,E={vertices:[],holes:[],dimensions:w},O=0,C=0;C<S.length;C++){for(var P=0;P<S[C].length;P++)for(var R=0;R<w;R++)E.vertices.push(S[C][P][R]);C>0&&(O+=S[C-1].length,E.holes.push(O))}return E}},6688:function(ee,z,e){var M=e(78484);ee.exports=function(k,o){var T,b=[],h=[],s=[],t={},a=[];function n(g){s[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(v){delete t[g][v],s[v]&&n(v)})}function r(g){var v,y,m=!1;for(h.push(g),s[g]=!0,v=0;v<a[g].length;v++)(y=a[g][v])===T?(i(T,h),m=!0):s[y]||(m=r(y));if(m)n(g);else for(v=0;v<a[g].length;v++){y=a[g][v];var _=t[y];_||(_={},t[y]=_),_[y]=!0}return h.pop(),m}function i(g,v){var y=[].concat(v).concat(g);o?o(r):b.push(y)}function l(g){(function(E){for(var O=0;O<k.length;O++)O<E&&(k[O]=[]),k[O]=k[O].filter(function(C){return C>=E})})(g);for(var v,y=M(k).components.filter(function(E){return E.length>1}),m=1/0,_=0;_<y.length;_++)for(var f=0;f<y[_].length;f++)y[_][f]<m&&(m=y[_][f],v=_);var S=y[v];if(!S)return!1;var w=k.map(function(E,O){return S.indexOf(O)===-1?[]:E.filter(function(C){return S.indexOf(C)!==-1})});return{leastVertex:m,adjList:w}}T=0;for(var u=k.length;T<u;){var p=l(T);if(T=p.leastVertex,a=p.adjList){for(var c=0;c<a.length;c++)for(var x=0;x<a[c].length;x++){var d=a[c][x];s[+d]=!1,t[d]={}}r(T),T+=1}else T=u}return o?void 0:b}},41476:function(ee,z,e){var M=e(9252);ee.exports=function(){return M(this).length=0,this}},74772:function(ee,z,e){ee.exports=e(44716)()?Array.from:e(80816)},44716:function(ee){ee.exports=function(){var z,e,M=Array.from;return typeof M=="function"&&(e=M(z=["raz","dwa"]),!!(e&&e!==z&&e[1]==="dwa"))}},80816:function(ee,z,e){var M=e(92664).iterator,k=e(60948),o=e(17024),T=e(81304),b=e(34044),h=e(9252),s=e(42584),t=e(29768),a=Array.isArray,n=Function.prototype.call,r={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;ee.exports=function(l){var u,p,c,x,d,g,v,y,m,_,f=arguments[1],S=arguments[2];if(l=Object(h(l)),s(f)&&b(f),this&&this!==Array&&o(this))u=this;else{if(!f){if(k(l))return(d=l.length)!==1?Array.apply(null,l):((x=new Array(1))[0]=l[0],x);if(a(l)){for(x=new Array(d=l.length),p=0;p<d;++p)x[p]=l[p];return x}}x=[]}if(!a(l)){if((m=l[M])!==void 0){for(v=b(m).call(l),u&&(x=new u),y=v.next(),p=0;!y.done;)_=f?n.call(f,S,y.value,p):y.value,u?(r.value=_,i(x,p,r)):x[p]=_,y=v.next(),++p;d=p}else if(t(l)){for(d=l.length,u&&(x=new u),p=0,c=0;p<d;++p)_=l[p],p+1<d&&(g=_.charCodeAt(0))>=55296&&g<=56319&&(_+=l[++p]),_=f?n.call(f,S,_,c):_,u?(r.value=_,i(x,c,r)):x[c]=_,++c;d=c}}if(d===void 0)for(d=T(l.length),u&&(x=new u(d)),p=0;p<d;++p)_=f?n.call(f,S,l[p],p):l[p],u?(r.value=_,i(x,p,r)):x[p]=_;return u&&(r.value=null,x.length=d),x}},60948:function(ee){var z=Object.prototype.toString,e=z.call(function(){return arguments}());ee.exports=function(M){return z.call(M)===e}},17024:function(ee){var z=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ee.exports=function(M){return typeof M=="function"&&e(z.call(M))}},33208:function(ee){ee.exports=function(){}},85608:function(ee,z,e){ee.exports=e(37328)()?Math.sign:e(92928)},37328:function(ee){ee.exports=function(){var z=Math.sign;return typeof z=="function"&&z(10)===1&&z(-20)===-1}},92928:function(ee){ee.exports=function(z){return z=Number(z),isNaN(z)||z===0?z:z>0?1:-1}},96936:function(ee,z,e){var M=e(85608),k=Math.abs,o=Math.floor;ee.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?M(T)*o(k(T)):T}},81304:function(ee,z,e){var M=e(96936),k=Math.max;ee.exports=function(o){return k(0,M(o))}},14428:function(ee,z,e){var M=e(34044),k=e(9252),o=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,h=Object.prototype.propertyIsEnumerable;ee.exports=function(s,t){return function(a,n){var r,i=arguments[2],l=arguments[3];return a=Object(k(a)),M(n),r=b(a),l&&r.sort(typeof l=="function"?o.call(l,a):void 0),typeof s!="function"&&(s=r[s]),T.call(s,r,function(u,p){return h.call(a,u)?T.call(n,i,a[u],u,a,p):t})}}},38452:function(ee,z,e){ee.exports=e(96276)()?Object.assign:e(81892)},96276:function(ee){ee.exports=function(){var z,e=Object.assign;return typeof e=="function"&&(e(z={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),z.foo+z.bar+z.trzy==="razdwatrzy")}},81892:function(ee,z,e){var M=e(54768),k=e(9252),o=Math.max;ee.exports=function(T,b){var h,s,t,a=o(arguments.length,2);for(T=Object(k(T)),t=function(n){try{T[n]=b[n]}catch(r){h||(h=r)}},s=1;s<a;++s)M(b=arguments[s]).forEach(t);if(h!==void 0)throw h;return T}},95920:function(ee,z,e){var M=e(74772),k=e(38452),o=e(9252);ee.exports=function(T){var b=Object(o(T)),h=arguments[1],s=Object(arguments[2]);if(b!==T&&!h)return b;var t={};return h?M(h,function(a){(s.ensure||a in T)&&(t[a]=T[a])}):k(t,T),t}},14452:function(ee,z,e){var M,k,o,T,b=Object.create;e(63092)()||(M=e(8672)),ee.exports=M?M.level!==1?b:(k={},o={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(h){o[h]=h!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,o),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(h,s){return b(h===null?k:h,s)}):b},42748:function(ee,z,e){ee.exports=e(14428)("forEach")},69127:function(ee,z,e){var M=e(42584),k={function:!0,object:!0};ee.exports=function(o){return M(o)&&k[typeof o]||!1}},42584:function(ee,z,e){var M=e(33208)();ee.exports=function(k){return k!==M&&k!==null}},54768:function(ee,z,e){ee.exports=e(87888)()?Object.keys:e(89592)},87888:function(ee){ee.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(ee,z,e){var M=e(42584),k=Object.keys;ee.exports=function(o){return k(M(o)?Object(o):o)}},84323:function(ee,z,e){var M=e(34044),k=e(42748),o=Function.prototype.call;ee.exports=function(T,b){var h={},s=arguments[2];return M(b),k(T,function(t,a,n,r){h[a]=o.call(b,s,t,a,n,r)}),h}},50868:function(ee,z,e){var M=e(42584),k=Array.prototype.forEach,o=Object.create;ee.exports=function(T){var b=o(null);return k.call(arguments,function(h){M(h)&&function(s,t){var a;for(a in s)t[a]=s[a]}(Object(h),b)}),b}},69932:function(ee,z,e){ee.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(ee){var z=Object.create,e=Object.getPrototypeOf,M={};ee.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&e(k((arguments[0]||z)(null),M))===M}},8672:function(ee,z,e){var M,k,o,T,b=e(69127),h=e(9252),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(n,r){if(h(n),r===null||b(r))return n;throw new TypeError("Prototype must be null or an object")},ee.exports=(k=function(){var n,r=Object.create(null),i={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(n=l.set).call(r,i)}catch{}if(Object.getPrototypeOf(r)===i)return{set:n,level:2}}return r.__proto__=i,Object.getPrototypeOf(r)===i?{level:2}:((r={}).__proto__=i,Object.getPrototypeOf(r)===i&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,o=function(n,r){return T.call(M(n,r),r),n}):o=function(n,r){return M(n,r).__proto__=r,n}:o=function n(r,i){var l;return M(r,i),(l=s.call(n.nullPolyfill,r))&&delete n.nullPolyfill.__proto__,i===null&&(i=n.nullPolyfill),r.__proto__=i,l&&t(n.nullPolyfill,"__proto__",a),r},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(14452)},34044:function(ee){ee.exports=function(z){if(typeof z!="function")throw new TypeError(z+" is not a function");return z}},92584:function(ee,z,e){var M=e(69127);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not an Object");return k}},9252:function(ee,z,e){var M=e(42584);ee.exports=function(k){if(!M(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(ee,z,e){ee.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(ee){var z="razdwatrzy";ee.exports=function(){return typeof z.contains=="function"&&z.contains("dwa")===!0&&z.contains("foo")===!1}},93040:function(ee){var z=String.prototype.indexOf;ee.exports=function(e){return z.call(this,e,arguments[1])>-1}},29768:function(ee){var z=Object.prototype.toString,e=z.call("");ee.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||z.call(M)===e)||!1}},82252:function(ee){var z=Object.create(null),e=Math.random;ee.exports=function(){var M;do M=e().toString(36).slice(2);while(z[M]);return M}},52104:function(ee,z,e){var M,k=e(69932),o=e(71056),T=e(21092),b=e(92664),h=e(85512),s=Object.defineProperty;M=ee.exports=function(t,a){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");h.call(this,t),a=a?o.call(a,"key+value")?"key+value":o.call(a,"key")?"key":"value":"value",s(this,"__kind__",T("",a))},k&&k(M,h),delete M.prototype.constructor,M.prototype=Object.create(h.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(M.prototype,b.toStringTag,T("c","Array Iterator"))},76024:function(ee,z,e){var M=e(60948),k=e(34044),o=e(29768),T=e(76252),b=Array.isArray,h=Function.prototype.call,s=Array.prototype.some;ee.exports=function(t,a){var n,r,i,l,u,p,c,x,d=arguments[2];if(b(t)||M(t)?n="array":o(t)?n="string":t=T(t),k(a),i=function(){l=!0},n!=="array")if(n!=="string")for(r=t.next();!r.done;){if(h.call(a,d,r.value,i),l)return;r=t.next()}else for(p=t.length,u=0;u<p&&(c=t[u],u+1<p&&(x=c.charCodeAt(0))>=55296&&x<=56319&&(c+=t[++u]),h.call(a,d,c,i),!l);++u);else s.call(t,function(g){return h.call(a,d,g,i),l})}},76252:function(ee,z,e){var M=e(60948),k=e(29768),o=e(52104),T=e(80940),b=e(52891),h=e(92664).iterator;ee.exports=function(s){return typeof b(s)[h]=="function"?s[h]():M(s)?new o(s):k(s)?new T(s):new o(s)}},85512:function(ee,z,e){var M,k=e(41476),o=e(38452),T=e(34044),b=e(9252),h=e(21092),s=e(27940),t=e(92664),a=Object.defineProperty,n=Object.defineProperties;ee.exports=M=function(r,i){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");n(this,{__list__:h("w",b(r)),__context__:h("w",i),__nextIndex__:h("w",0)}),i&&(T(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete M.prototype.constructor,n(M.prototype,o({_next:h(function(){var r;if(this.__list__)return this.__redo__&&(r=this.__redo__.shift())!==void 0?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(r){return r===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:h(function(r){return this.__list__[r]}),_unBind:h(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:h(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:h(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,l){i>=r&&(this.__redo__[l]=++i)},this),this.__redo__.push(r)):a(this,"__redo__",h("c",[r])))}),_onDelete:h(function(r){var i;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((i=this.__redo__.indexOf(r))!==-1&&this.__redo__.splice(i,1),this.__redo__.forEach(function(l,u){l>r&&(this.__redo__[u]=--l)},this)))}),_onClear:h(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),a(M.prototype,t.iterator,h(function(){return this}))},76368:function(ee,z,e){var M=e(60948),k=e(42584),o=e(29768),T=e(92664).iterator,b=Array.isArray;ee.exports=function(h){return!(!k(h)||!b(h)&&!o(h)&&!M(h)&&typeof h[T]!="function")}},80940:function(ee,z,e){var M,k=e(69932),o=e(21092),T=e(92664),b=e(85512),h=Object.defineProperty;M=ee.exports=function(s){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),h(this,"__length__",o("",s.length))},k&&k(M,b),delete M.prototype.constructor,M.prototype=Object.create(b.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(s){var t,a=this.__list__[s];return this.__nextIndex__===this.__length__?a:(t=a.charCodeAt(0))>=55296&&t<=56319?a+this.__list__[this.__nextIndex__++]:a})}),h(M.prototype,T.toStringTag,o("c","String Iterator"))},52891:function(ee,z,e){var M=e(76368);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not iterable");return k}},60964:function(ee){function z(e,M){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),o=1;o<arguments.length;o++){var T=arguments[o];if(T!=null)for(var b=Object.keys(Object(T)),h=0,s=b.length;h<s;h++){var t=b[h],a=Object.getOwnPropertyDescriptor(T,t);a!==void 0&&a.enumerable&&(k[t]=T[t])}}return k}ee.exports={assign:z,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:z})}}},92664:function(ee,z,e){ee.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(ee,z,e){var M=e(12296),k={object:!0,symbol:!0};ee.exports=function(){var o,T=M.Symbol;if(typeof T!="function")return!1;o=T("test symbol");try{String(o)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},53908:function(ee){ee.exports=function(z){return!!z&&(typeof z=="symbol"||!!z.constructor&&z.constructor.name==="Symbol"&&z[z.constructor.toStringTag]==="Symbol")}},96863:function(ee,z,e){var M=e(21092),k=Object.create,o=Object.defineProperty,T=Object.prototype,b=k(null);ee.exports=function(h){for(var s,t,a=0;b[h+(a||"")];)++a;return b[h+=a||""]=!0,o(T,s="@@"+h,M.gs(null,function(n){t||(t=!0,o(this,s,M(n)),t=!1)})),s}},53540:function(ee,z,e){var M=e(21092),k=e(12296).Symbol;ee.exports=function(o){return Object.defineProperties(o,{hasInstance:M("",k&&k.hasInstance||o("hasInstance")),isConcatSpreadable:M("",k&&k.isConcatSpreadable||o("isConcatSpreadable")),iterator:M("",k&&k.iterator||o("iterator")),match:M("",k&&k.match||o("match")),replace:M("",k&&k.replace||o("replace")),search:M("",k&&k.search||o("search")),species:M("",k&&k.species||o("species")),split:M("",k&&k.split||o("split")),toPrimitive:M("",k&&k.toPrimitive||o("toPrimitive")),toStringTag:M("",k&&k.toStringTag||o("toStringTag")),unscopables:M("",k&&k.unscopables||o("unscopables"))})}},73852:function(ee,z,e){var M=e(21092),k=e(63948),o=Object.create(null);ee.exports=function(T){return Object.defineProperties(T,{for:M(function(b){return o[b]?o[b]:o[b]=T(String(b))}),keyFor:M(function(b){var h;for(h in k(b),o)if(o[h]===b)return h})})}},18376:function(ee,z,e){var M,k,o,T=e(21092),b=e(63948),h=e(12296).Symbol,s=e(96863),t=e(53540),a=e(73852),n=Object.create,r=Object.defineProperties,i=Object.defineProperty;if(typeof h=="function")try{String(h()),o=!0}catch{}else h=null;k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return M(l)},ee.exports=M=function l(u){var p;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return o?h(u):(p=n(k.prototype),u=u===void 0?"":String(u),r(p,{__description__:T("",u),__name__:T("",s(u))}))},t(M),a(M),r(k.prototype,{constructor:T(M),toString:T("",function(){return this.__name__})}),r(M.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),i(M.prototype,M.toPrimitive,T("",function(){var l=b(this);return typeof l=="symbol"?l:l.toString()})),i(M.prototype,M.toStringTag,T("c","Symbol")),i(k.prototype,M.toStringTag,T("c",M.prototype[M.toStringTag])),i(k.prototype,M.toPrimitive,T("c",M.prototype[M.toPrimitive]))},63948:function(ee,z,e){var M=e(53908);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(ee,z,e){ee.exports=e(96979)()?WeakMap:e(64864)},96979:function(ee){ee.exports=function(){var z,e;if(typeof WeakMap!="function")return!1;try{z=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(z)==="[object WeakMap]"&&typeof z.set=="function"&&z.set({},1)===z&&typeof z.delete=="function"&&typeof z.has=="function"&&z.get(e)==="one"}},69876:function(ee){ee.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(ee,z,e){var M,k=e(42584),o=e(69932),T=e(92584),b=e(9252),h=e(82252),s=e(21092),t=e(76252),a=e(76024),n=e(92664).toStringTag,r=e(69876),i=Array.isArray,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;ee.exports=M=function(){var c,x=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return c=r&&o&&WeakMap!==M?o(new WeakMap,p(this)):this,k(x)&&(i(x)||(x=t(x))),l(c,"__weakMapData__",s("c","$weakMap$"+h())),x&&a(x,function(d){b(d),c.set(d[0],d[1])}),c},r&&(o&&o(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:s(M)})),Object.defineProperties(M.prototype,{delete:s(function(c){return!!u.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:s(function(c){if(u.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:s(function(c){return u.call(T(c),this.__weakMapData__)}),set:s(function(c,x){return l(T(c),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),l(M.prototype,n,s("c","WeakMap"))},61252:function(ee){var z,e=typeof Reflect=="object"?Reflect:null,M=e&&typeof e.apply=="function"?e.apply:function(u,p,c){return Function.prototype.apply.call(u,p,c)};z=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function o(){o.init.call(this)}ee.exports=o,ee.exports.once=function(u,p){return new Promise(function(c,x){function d(v){u.removeListener(p,g),x(v)}function g(){typeof u.removeListener=="function"&&u.removeListener("error",d),c([].slice.call(arguments))}l(u,p,g,{once:!0}),p!=="error"&&function(v,y,m){typeof v.on=="function"&&l(v,"error",y,{once:!0})}(u,d)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var T=10;function b(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function h(u){return u._maxListeners===void 0?o.defaultMaxListeners:u._maxListeners}function s(u,p,c,x){var d,g,v,y;if(b(c),(g=u._events)===void 0?(g=u._events=Object.create(null),u._eventsCount=0):(g.newListener!==void 0&&(u.emit("newListener",p,c.listener?c.listener:c),g=u._events),v=g[p]),v===void 0)v=g[p]=c,++u._eventsCount;else if(typeof v=="function"?v=g[p]=x?[c,v]:[v,c]:x?v.unshift(c):v.push(c),(d=h(u))>0&&v.length>d&&!v.warned){v.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=u,m.type=p,m.count=v.length,y=m,console&&console.warn&&console.warn(y)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(u,p,c){var x={fired:!1,wrapFn:void 0,target:u,type:p,listener:c},d=t.bind(x);return d.listener=c,x.wrapFn=d,d}function n(u,p,c){var x=u._events;if(x===void 0)return[];var d=x[p];return d===void 0?[]:typeof d=="function"?c?[d.listener||d]:[d]:c?function(g){for(var v=new Array(g.length),y=0;y<v.length;++y)v[y]=g[y].listener||g[y];return v}(d):i(d,d.length)}function r(u){var p=this._events;if(p!==void 0){var c=p[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function i(u,p){for(var c=new Array(p),x=0;x<p;++x)c[x]=u[x];return c}function l(u,p,c,x){if(typeof u.on=="function")x.once?u.once(p,c):u.on(p,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(p,function d(g){x.once&&u.removeEventListener(p,d),c(g)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(u){for(var p=[],c=1;c<arguments.length;c++)p.push(arguments[c]);var x=u==="error",d=this._events;if(d!==void 0)x=x&&d.error===void 0;else if(!x)return!1;if(x){var g;if(p.length>0&&(g=p[0]),g instanceof Error)throw g;var v=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw v.context=g,v}var y=d[u];if(y===void 0)return!1;if(typeof y=="function")M(y,this,p);else{var m=y.length,_=i(y,m);for(c=0;c<m;++c)M(_[c],this,p)}return!0},o.prototype.addListener=function(u,p){return s(this,u,p,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(u,p){return s(this,u,p,!0)},o.prototype.once=function(u,p){return b(p),this.on(u,a(this,u,p)),this},o.prototype.prependOnceListener=function(u,p){return b(p),this.prependListener(u,a(this,u,p)),this},o.prototype.removeListener=function(u,p){var c,x,d,g,v;if(b(p),(x=this._events)===void 0)return this;if((c=x[u])===void 0)return this;if(c===p||c.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,c.listener||p));else if(typeof c!="function"){for(d=-1,g=c.length-1;g>=0;g--)if(c[g]===p||c[g].listener===p){v=c[g].listener,d=g;break}if(d<0)return this;d===0?c.shift():function(y,m){for(;m+1<y.length;m++)y[m]=y[m+1];y.pop()}(c,d),c.length===1&&(x[u]=c[0]),x.removeListener!==void 0&&this.emit("removeListener",u,v||p)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(u){var p,c,x;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var d,g=Object.keys(c);for(x=0;x<g.length;++x)(d=g[x])!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=c[u])=="function")this.removeListener(u,p);else if(p!==void 0)for(x=p.length-1;x>=0;x--)this.removeListener(u,p[x]);return this},o.prototype.listeners=function(u){return n(this,u,!0)},o.prototype.rawListeners=function(u){return n(this,u,!1)},o.listenerCount=function(u,p){return typeof u.listenerCount=="function"?u.listenerCount(p):r.call(u,p)},o.prototype.listenerCount=r,o.prototype.eventNames=function(){return this._eventsCount>0?z(this._events):[]}},39072:function(ee){var z=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ee.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return z()}try{return __global__||z()}finally{delete Object.prototype.__global__}}()},12296:function(ee,z,e){ee.exports=e(45072)()?globalThis:e(39072)},45072:function(ee){ee.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(ee,z,e){var M=e(94576);ee.exports=function(k){var o=typeof k;if(o==="string"){var T=k;if((k=+k)==0&&M(T))return!1}else if(o!=="number")return!1;return k-k<1}},47520:function(ee,z,e){var M=e(72512);ee.exports=function(k,o,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,h,s,t,a=k[0].length,n=k.length*a;o&&typeof o!="string"||(o=new(M(o||"float32"))(n+T));var r=o.length-T;if(n!==r)throw new Error("source length "+n+" ("+a+"x"+k.length+") does not match destination length "+r);for(b=0,s=T;b<k.length;b++)for(h=0;h<a;h++)o[s++]=k[b][h]===null?NaN:k[b][h]}else if(o&&typeof o!="string")o.set(k,T);else{var i=M(o||"float32");if(Array.isArray(k)||o==="array")for(b=0,s=T,t=(o=new i(k.length+T)).length;s<t;s++,b++)o[s]=k[b]===null?NaN:k[b];else T===0?o=new i(k):(o=new i(k.length+T)).set(k,T)}return o}},33888:function(ee,z,e){var M=e(49395),k=[32,126];ee.exports=function(o){var T=(o=o||{}).shape?o.shape:o.canvas?[o.canvas.width,o.canvas.height]:[512,512],b=o.canvas||document.createElement("canvas"),h=o.font,s=typeof o.step=="number"?[o.step,o.step]:o.step||[32,32],t=o.chars||k;if(h&&typeof h!="string"&&(h=M(h)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var a=[],n=t[0],r=0;n<=t[1];n++)a[r++]=String.fromCharCode(n);t=a}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var i=b.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,b.width,b.height),i.font=h,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var l=s[0]/2,u=s[1]/2;for(n=0;n<t.length;n++)i.fillText(t[n],l,u),(l+=s[0])>T[0]-s[0]/2&&(l=s[0]/2,u+=s[1]);return b}},71920:function(ee){function z(o,T){T||(T={}),(typeof o=="string"||Array.isArray(o))&&(T.family=o);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var h=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(o=[T.style||T.fontStyle||"",s,h].join(" ")+"px "+b,T.origin||"top");if(z.cache[b]&&h<=z.cache[b].em)return e(z.cache[b],t);var a=T.canvas||z.canvas,n=a.getContext("2d"),r={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},i=Math.ceil(1.5*h);a.height=i,a.width=.5*i,n.font=o;var l="H",u={top:0};n.clearRect(0,0,i,i),n.textBaseline="top",n.fillStyle="black",n.fillText(l,0,0);var p=M(n.getImageData(0,0,i,i));n.clearRect(0,0,i,i),n.textBaseline="bottom",n.fillText(l,0,i);var c=M(n.getImageData(0,0,i,i));u.lineHeight=u.bottom=i-c+p,n.clearRect(0,0,i,i),n.textBaseline="alphabetic",n.fillText(l,0,i);var x=i-M(n.getImageData(0,0,i,i))-1+p;u.baseline=u.alphabetic=x,n.clearRect(0,0,i,i),n.textBaseline="middle",n.fillText(l,0,.5*i);var d=M(n.getImageData(0,0,i,i));u.median=u.middle=i-d-1+p-.5*i,n.clearRect(0,0,i,i),n.textBaseline="hanging",n.fillText(l,0,.5*i);var g=M(n.getImageData(0,0,i,i));u.hanging=i-g-1+p-.5*i,n.clearRect(0,0,i,i),n.textBaseline="ideographic",n.fillText(l,0,i);var v=M(n.getImageData(0,0,i,i));if(u.ideographic=i-v-1+p,r.upper&&(n.clearRect(0,0,i,i),n.textBaseline="top",n.fillText(r.upper,0,0),u.upper=M(n.getImageData(0,0,i,i)),u.capHeight=u.baseline-u.upper),r.lower&&(n.clearRect(0,0,i,i),n.textBaseline="top",n.fillText(r.lower,0,0),u.lower=M(n.getImageData(0,0,i,i)),u.xHeight=u.baseline-u.lower),r.tittle&&(n.clearRect(0,0,i,i),n.textBaseline="top",n.fillText(r.tittle,0,0),u.tittle=M(n.getImageData(0,0,i,i))),r.ascent&&(n.clearRect(0,0,i,i),n.textBaseline="top",n.fillText(r.ascent,0,0),u.ascent=M(n.getImageData(0,0,i,i))),r.descent&&(n.clearRect(0,0,i,i),n.textBaseline="top",n.fillText(r.descent,0,0),u.descent=k(n.getImageData(0,0,i,i))),r.overshoot){n.clearRect(0,0,i,i),n.textBaseline="top",n.fillText(r.overshoot,0,0);var y=k(n.getImageData(0,0,i,i));u.overshoot=y-x}for(var m in u)u[m]/=h;return u.em=h,z.cache[b]=u,e(u,t)}function e(o,T){var b={};for(var h in typeof T=="string"&&(T=o[T]),o)h!=="em"&&(b[h]=o[h]-T);return b}function M(o){for(var T=o.height,b=o.data,h=3;h<b.length;h+=4)if(b[h]!==0)return Math.floor(.25*(h-3)/T)}function k(o){for(var T=o.height,b=o.data,h=b.length-1;h>0;h-=4)if(b[h]!==0)return Math.floor(.25*(h-3)/T)}ee.exports=z,z.canvas=document.createElement("canvas"),z.cache={}},46492:function(ee,z,e){var M=e(90720),k=Object.prototype.toString,o=Object.prototype.hasOwnProperty;ee.exports=function(T,b,h){if(!M(b))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=h),k.call(T)==="[object Array]"?function(t,a,n){for(var r=0,i=t.length;r<i;r++)o.call(t,r)&&(n==null?a(t[r],r,t):a.call(n,t[r],r,t))}(T,b,s):typeof T=="string"?function(t,a,n){for(var r=0,i=t.length;r<i;r++)n==null?a(t.charAt(r),r,t):a.call(n,t.charAt(r),r,t)}(T,b,s):function(t,a,n){for(var r in t)o.call(t,r)&&(n==null?a(t[r],r,t):a.call(n,t[r],r,t))}(T,b,s)}},74336:function(ee){var z=Object.prototype.toString,e=Math.max,M=function(k,o){for(var T=[],b=0;b<k.length;b+=1)T[b]=k[b];for(var h=0;h<o.length;h+=1)T[h+k.length]=o[h];return T};ee.exports=function(k){var o=this;if(typeof o!="function"||z.apply(o)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var T,b=function(n,r){for(var i=[],l=1,u=0;l<n.length;l+=1,u+=1)i[u]=n[l];return i}(arguments),h=e(0,o.length-b.length),s=[],t=0;t<h;t++)s[t]="$"+t;if(T=Function("binder","return function ("+function(n,r){for(var i="",l=0;l<n.length;l+=1)i+=n[l],l+1<n.length&&(i+=",");return i}(s)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var n=o.apply(this,M(b,arguments));return Object(n)===n?n:this}return o.apply(k,M(b,arguments))}),o.prototype){var a=function(){};a.prototype=o.prototype,T.prototype=new a,a.prototype=null}return T}},8844:function(ee,z,e){var M=e(74336);ee.exports=Function.prototype.bind||M},13380:function(ee){ee.exports=function(z,e){if(typeof z!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var M=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(M.width=e.width),typeof e.height=="number"&&(M.height=e.height);var k,o=e;try{var T=[z];z.indexOf("webgl")===0&&T.push("experimental-"+z);for(var b=0;b<T.length;b++)if(k=M.getContext(T[b],o))return k}catch{k=null}return k||null}},53664:function(ee,z,e){var M,k=SyntaxError,o=Function,T=TypeError,b=function(O){try{return o('"use strict"; return ('+O+").constructor;")()}catch{}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var s=function(){throw new T},t=h?function(){try{return s}catch{try{return h(arguments,"callee").get}catch{return s}}}():s,a=e(71080)(),n=e(69572)(),r=Object.getPrototypeOf||(n?function(O){return O.__proto__}:null),i={},l=typeof Uint8Array<"u"&&r?r(Uint8Array):M,u={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":a&&r?r([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":i,"%AsyncGenerator%":i,"%AsyncGeneratorFunction%":i,"%AsyncIteratorPrototype%":i,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":i,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":a&&r?r(r([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&a&&r?r(new Map()[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&a&&r?r(new Set()[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":a&&r?r(""[Symbol.iterator]()):M,"%Symbol%":a?Symbol:M,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if(r)try{null.error}catch(O){var p=r(r(O));u["%Error.prototype%"]=p}var c=function O(C){var P;if(C==="%AsyncFunction%")P=b("async function () {}");else if(C==="%GeneratorFunction%")P=b("function* () {}");else if(C==="%AsyncGeneratorFunction%")P=b("async function* () {}");else if(C==="%AsyncGenerator%"){var R=O("%AsyncGeneratorFunction%");R&&(P=R.prototype)}else if(C==="%AsyncIteratorPrototype%"){var j=O("%AsyncGenerator%");j&&r&&(P=r(j.prototype))}return u[C]=P,P},x={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},d=e(8844),g=e(92064),v=d.call(Function.call,Array.prototype.concat),y=d.call(Function.apply,Array.prototype.splice),m=d.call(Function.call,String.prototype.replace),_=d.call(Function.call,String.prototype.slice),f=d.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(O,C){var P,R=O;if(g(x,R)&&(R="%"+(P=x[R])[0]+"%"),g(u,R)){var j=u[R];if(j===i&&(j=c(R)),j===void 0&&!C)throw new T("intrinsic "+O+" exists, but is not available. Please file an issue!");return{alias:P,name:R,value:j}}throw new k("intrinsic "+O+" does not exist!")};ee.exports=function(O,C){if(typeof O!="string"||O.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new T('"allowMissing" argument must be a boolean');if(f(/^%?[^%]*%?$/,O)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var P=function(Q){var Z=_(Q,0,1),re=_(Q,-1);if(Z==="%"&&re!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(re==="%"&&Z!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var oe=[];return m(Q,S,function(ae,ce,he,pe){oe[oe.length]=he?m(pe,w,"$1"):ce||ae}),oe}(O),R=P.length>0?P[0]:"",j=E("%"+R+"%",C),D=j.name,N=j.value,W=!1,F=j.alias;F&&(R=F[0],y(P,v([0,1],F)));for(var V=1,U=!0;V<P.length;V+=1){var te=P[V],J=_(te,0,1),X=_(te,-1);if((J==='"'||J==="'"||J==="`"||X==='"'||X==="'"||X==="`")&&J!==X)throw new k("property names with quotes must have matching quotes");if(te!=="constructor"&&U||(W=!0),g(u,D="%"+(R+="."+te)+"%"))N=u[D];else if(N!=null){if(!(te in N)){if(!C)throw new T("base intrinsic for "+O+" exists, but the property is not available.");return}if(h&&V+1>=P.length){var K=h(N,te);N=(U=!!K)&&"get"in K&&!("originalValue"in K.get)?K.get:N[te]}else U=g(N,te),N=N[te];U&&!W&&(u[D]=N)}}return N}},12408:function(ee){ee.exports=function(z,e){var M=e[0],k=e[1],o=e[2],T=e[3],b=e[4],h=e[5],s=e[6],t=e[7],a=e[8],n=e[9],r=e[10],i=e[11],l=e[12],u=e[13],p=e[14],c=e[15];return z[0]=h*(r*c-i*p)-n*(s*c-t*p)+u*(s*i-t*r),z[1]=-(k*(r*c-i*p)-n*(o*c-T*p)+u*(o*i-T*r)),z[2]=k*(s*c-t*p)-h*(o*c-T*p)+u*(o*t-T*s),z[3]=-(k*(s*i-t*r)-h*(o*i-T*r)+n*(o*t-T*s)),z[4]=-(b*(r*c-i*p)-a*(s*c-t*p)+l*(s*i-t*r)),z[5]=M*(r*c-i*p)-a*(o*c-T*p)+l*(o*i-T*r),z[6]=-(M*(s*c-t*p)-b*(o*c-T*p)+l*(o*t-T*s)),z[7]=M*(s*i-t*r)-b*(o*i-T*r)+a*(o*t-T*s),z[8]=b*(n*c-i*u)-a*(h*c-t*u)+l*(h*i-t*n),z[9]=-(M*(n*c-i*u)-a*(k*c-T*u)+l*(k*i-T*n)),z[10]=M*(h*c-t*u)-b*(k*c-T*u)+l*(k*t-T*h),z[11]=-(M*(h*i-t*n)-b*(k*i-T*n)+a*(k*t-T*h)),z[12]=-(b*(n*p-r*u)-a*(h*p-s*u)+l*(h*r-s*n)),z[13]=M*(n*p-r*u)-a*(k*p-o*u)+l*(k*r-o*n),z[14]=-(M*(h*p-s*u)-b*(k*p-o*u)+l*(k*s-o*h)),z[15]=M*(h*r-s*n)-b*(k*r-o*n)+a*(k*s-o*h),z}},76860:function(ee){ee.exports=function(z){var e=new Float32Array(16);return e[0]=z[0],e[1]=z[1],e[2]=z[2],e[3]=z[3],e[4]=z[4],e[5]=z[5],e[6]=z[6],e[7]=z[7],e[8]=z[8],e[9]=z[9],e[10]=z[10],e[11]=z[11],e[12]=z[12],e[13]=z[13],e[14]=z[14],e[15]=z[15],e}},64492:function(ee){ee.exports=function(z,e){return z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},54212:function(ee){ee.exports=function(){var z=new Float32Array(16);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},70800:function(ee){ee.exports=function(z){var e=z[0],M=z[1],k=z[2],o=z[3],T=z[4],b=z[5],h=z[6],s=z[7],t=z[8],a=z[9],n=z[10],r=z[11],i=z[12],l=z[13],u=z[14],p=z[15];return(e*b-M*T)*(n*p-r*u)-(e*h-k*T)*(a*p-r*l)+(e*s-o*T)*(a*u-n*l)+(M*h-k*b)*(t*p-r*i)-(M*s-o*b)*(t*u-n*i)+(k*s-o*h)*(t*l-a*i)}},61784:function(ee){ee.exports=function(z,e){var M=e[0],k=e[1],o=e[2],T=e[3],b=M+M,h=k+k,s=o+o,t=M*b,a=k*b,n=k*h,r=o*b,i=o*h,l=o*s,u=T*b,p=T*h,c=T*s;return z[0]=1-n-l,z[1]=a+c,z[2]=r-p,z[3]=0,z[4]=a-c,z[5]=1-t-l,z[6]=i+u,z[7]=0,z[8]=r+p,z[9]=i-u,z[10]=1-t-n,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},91616:function(ee){ee.exports=function(z,e,M){var k,o,T,b=M[0],h=M[1],s=M[2],t=Math.sqrt(b*b+h*h+s*s);return Math.abs(t)<1e-6?null:(b*=t=1/t,h*=t,s*=t,k=Math.sin(e),T=1-(o=Math.cos(e)),z[0]=b*b*T+o,z[1]=h*b*T+s*k,z[2]=s*b*T-h*k,z[3]=0,z[4]=b*h*T-s*k,z[5]=h*h*T+o,z[6]=s*h*T+b*k,z[7]=0,z[8]=b*s*T+h*k,z[9]=h*s*T-b*k,z[10]=s*s*T+o,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}},51944:function(ee){ee.exports=function(z,e,M){var k=e[0],o=e[1],T=e[2],b=e[3],h=k+k,s=o+o,t=T+T,a=k*h,n=k*s,r=k*t,i=o*s,l=o*t,u=T*t,p=b*h,c=b*s,x=b*t;return z[0]=1-(i+u),z[1]=n+x,z[2]=r-c,z[3]=0,z[4]=n-x,z[5]=1-(a+u),z[6]=l+p,z[7]=0,z[8]=r+c,z[9]=l-p,z[10]=1-(a+i),z[11]=0,z[12]=M[0],z[13]=M[1],z[14]=M[2],z[15]=1,z}},69444:function(ee){ee.exports=function(z,e){return z[0]=e[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=e[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=e[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},48268:function(ee){ee.exports=function(z,e){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=e[0],z[13]=e[1],z[14]=e[2],z[15]=1,z}},21856:function(ee){ee.exports=function(z,e){var M=Math.sin(e),k=Math.cos(e);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=k,z[6]=M,z[7]=0,z[8]=0,z[9]=-M,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},79216:function(ee){ee.exports=function(z,e){var M=Math.sin(e),k=Math.cos(e);return z[0]=k,z[1]=0,z[2]=-M,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=M,z[9]=0,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},57736:function(ee){ee.exports=function(z,e){var M=Math.sin(e),k=Math.cos(e);return z[0]=k,z[1]=M,z[2]=0,z[3]=0,z[4]=-M,z[5]=k,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},38848:function(ee){ee.exports=function(z,e,M,k,o,T,b){var h=1/(M-e),s=1/(o-k),t=1/(T-b);return z[0]=2*T*h,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=2*T*s,z[6]=0,z[7]=0,z[8]=(M+e)*h,z[9]=(o+k)*s,z[10]=(b+T)*t,z[11]=-1,z[12]=0,z[13]=0,z[14]=b*T*2*t,z[15]=0,z}},36635:function(ee){ee.exports=function(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},36524:function(ee,z,e){ee.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(ee){ee.exports=function(z,e){var M=e[0],k=e[1],o=e[2],T=e[3],b=e[4],h=e[5],s=e[6],t=e[7],a=e[8],n=e[9],r=e[10],i=e[11],l=e[12],u=e[13],p=e[14],c=e[15],x=M*h-k*b,d=M*s-o*b,g=M*t-T*b,v=k*s-o*h,y=k*t-T*h,m=o*t-T*s,_=a*u-n*l,f=a*p-r*l,S=a*c-i*l,w=n*p-r*u,E=n*c-i*u,O=r*c-i*p,C=x*O-d*E+g*w+v*S-y*f+m*_;return C?(C=1/C,z[0]=(h*O-s*E+t*w)*C,z[1]=(o*E-k*O-T*w)*C,z[2]=(u*m-p*y+c*v)*C,z[3]=(r*y-n*m-i*v)*C,z[4]=(s*S-b*O-t*f)*C,z[5]=(M*O-o*S+T*f)*C,z[6]=(p*g-l*m-c*d)*C,z[7]=(a*m-r*g+i*d)*C,z[8]=(b*E-h*S+t*_)*C,z[9]=(k*S-M*E-T*_)*C,z[10]=(l*y-u*g+c*x)*C,z[11]=(n*g-a*y-i*x)*C,z[12]=(h*f-b*w-s*_)*C,z[13]=(M*w-k*f+o*_)*C,z[14]=(u*d-l*v-p*x)*C,z[15]=(a*v-n*d+r*x)*C,z):null}},56508:function(ee,z,e){var M=e(36635);ee.exports=function(k,o,T,b){var h,s,t,a,n,r,i,l,u,p,c=o[0],x=o[1],d=o[2],g=b[0],v=b[1],y=b[2],m=T[0],_=T[1],f=T[2];return Math.abs(c-m)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(d-f)<1e-6?M(k):(i=c-m,l=x-_,u=d-f,h=v*(u*=p=1/Math.sqrt(i*i+l*l+u*u))-y*(l*=p),s=y*(i*=p)-g*u,t=g*l-v*i,(p=Math.sqrt(h*h+s*s+t*t))?(h*=p=1/p,s*=p,t*=p):(h=0,s=0,t=0),a=l*t-u*s,n=u*h-i*t,r=i*s-l*h,(p=Math.sqrt(a*a+n*n+r*r))?(a*=p=1/p,n*=p,r*=p):(a=0,n=0,r=0),k[0]=h,k[1]=a,k[2]=i,k[3]=0,k[4]=s,k[5]=n,k[6]=l,k[7]=0,k[8]=t,k[9]=r,k[10]=u,k[11]=0,k[12]=-(h*c+s*x+t*d),k[13]=-(a*c+n*x+r*d),k[14]=-(i*c+l*x+u*d),k[15]=1,k)}},80944:function(ee){ee.exports=function(z,e,M){var k=e[0],o=e[1],T=e[2],b=e[3],h=e[4],s=e[5],t=e[6],a=e[7],n=e[8],r=e[9],i=e[10],l=e[11],u=e[12],p=e[13],c=e[14],x=e[15],d=M[0],g=M[1],v=M[2],y=M[3];return z[0]=d*k+g*h+v*n+y*u,z[1]=d*o+g*s+v*r+y*p,z[2]=d*T+g*t+v*i+y*c,z[3]=d*b+g*a+v*l+y*x,d=M[4],g=M[5],v=M[6],y=M[7],z[4]=d*k+g*h+v*n+y*u,z[5]=d*o+g*s+v*r+y*p,z[6]=d*T+g*t+v*i+y*c,z[7]=d*b+g*a+v*l+y*x,d=M[8],g=M[9],v=M[10],y=M[11],z[8]=d*k+g*h+v*n+y*u,z[9]=d*o+g*s+v*r+y*p,z[10]=d*T+g*t+v*i+y*c,z[11]=d*b+g*a+v*l+y*x,d=M[12],g=M[13],v=M[14],y=M[15],z[12]=d*k+g*h+v*n+y*u,z[13]=d*o+g*s+v*r+y*p,z[14]=d*T+g*t+v*i+y*c,z[15]=d*b+g*a+v*l+y*x,z}},97688:function(ee){ee.exports=function(z,e,M,k,o,T,b){var h=1/(e-M),s=1/(k-o),t=1/(T-b);return z[0]=-2*h,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*s,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*t,z[11]=0,z[12]=(e+M)*h,z[13]=(o+k)*s,z[14]=(b+T)*t,z[15]=1,z}},51296:function(ee){ee.exports=function(z,e,M,k,o){var T=1/Math.tan(e/2),b=1/(k-o);return z[0]=T/M,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=T,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=(o+k)*b,z[11]=-1,z[12]=0,z[13]=0,z[14]=2*o*k*b,z[15]=0,z}},63688:function(ee){ee.exports=function(z,e,M,k){var o=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),h=Math.tan(e.rightDegrees*Math.PI/180),s=2/(b+h),t=2/(o+T);return z[0]=s,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=t,z[6]=0,z[7]=0,z[8]=-(b-h)*s*.5,z[9]=(o-T)*t*.5,z[10]=k/(M-k),z[11]=-1,z[12]=0,z[13]=0,z[14]=k*M/(M-k),z[15]=0,z}},30016:function(ee){ee.exports=function(z,e,M,k){var o,T,b,h,s,t,a,n,r,i,l,u,p,c,x,d,g,v,y,m,_,f,S,w,E=k[0],O=k[1],C=k[2],P=Math.sqrt(E*E+O*O+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,O*=P,C*=P,o=Math.sin(M),b=1-(T=Math.cos(M)),h=e[0],s=e[1],t=e[2],a=e[3],n=e[4],r=e[5],i=e[6],l=e[7],u=e[8],p=e[9],c=e[10],x=e[11],d=E*E*b+T,g=O*E*b+C*o,v=C*E*b-O*o,y=E*O*b-C*o,m=O*O*b+T,_=C*O*b+E*o,f=E*C*b+O*o,S=O*C*b-E*o,w=C*C*b+T,z[0]=h*d+n*g+u*v,z[1]=s*d+r*g+p*v,z[2]=t*d+i*g+c*v,z[3]=a*d+l*g+x*v,z[4]=h*y+n*m+u*_,z[5]=s*y+r*m+p*_,z[6]=t*y+i*m+c*_,z[7]=a*y+l*m+x*_,z[8]=h*f+n*S+u*w,z[9]=s*f+r*S+p*w,z[10]=t*f+i*S+c*w,z[11]=a*f+l*S+x*w,e!==z&&(z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z)}},15456:function(ee){ee.exports=function(z,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[4],b=e[5],h=e[6],s=e[7],t=e[8],a=e[9],n=e[10],r=e[11];return e!==z&&(z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[4]=T*o+t*k,z[5]=b*o+a*k,z[6]=h*o+n*k,z[7]=s*o+r*k,z[8]=t*o-T*k,z[9]=a*o-b*k,z[10]=n*o-h*k,z[11]=r*o-s*k,z}},64840:function(ee){ee.exports=function(z,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],b=e[1],h=e[2],s=e[3],t=e[8],a=e[9],n=e[10],r=e[11];return e!==z&&(z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*o-t*k,z[1]=b*o-a*k,z[2]=h*o-n*k,z[3]=s*o-r*k,z[8]=T*k+t*o,z[9]=b*k+a*o,z[10]=h*k+n*o,z[11]=s*k+r*o,z}},4192:function(ee){ee.exports=function(z,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],b=e[1],h=e[2],s=e[3],t=e[4],a=e[5],n=e[6],r=e[7];return e!==z&&(z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*o+t*k,z[1]=b*o+a*k,z[2]=h*o+n*k,z[3]=s*o+r*k,z[4]=t*o-T*k,z[5]=a*o-b*k,z[6]=n*o-h*k,z[7]=r*o-s*k,z}},68152:function(ee){ee.exports=function(z,e,M){var k=M[0],o=M[1],T=M[2];return z[0]=e[0]*k,z[1]=e[1]*k,z[2]=e[2]*k,z[3]=e[3]*k,z[4]=e[4]*o,z[5]=e[5]*o,z[6]=e[6]*o,z[7]=e[7]*o,z[8]=e[8]*T,z[9]=e[9]*T,z[10]=e[10]*T,z[11]=e[11]*T,z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},89412:function(ee){ee.exports=function(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}},35176:function(ee){ee.exports=function(z,e,M){var k,o,T,b,h,s,t,a,n,r,i,l,u=M[0],p=M[1],c=M[2];return e===z?(z[12]=e[0]*u+e[4]*p+e[8]*c+e[12],z[13]=e[1]*u+e[5]*p+e[9]*c+e[13],z[14]=e[2]*u+e[6]*p+e[10]*c+e[14],z[15]=e[3]*u+e[7]*p+e[11]*c+e[15]):(k=e[0],o=e[1],T=e[2],b=e[3],h=e[4],s=e[5],t=e[6],a=e[7],n=e[8],r=e[9],i=e[10],l=e[11],z[0]=k,z[1]=o,z[2]=T,z[3]=b,z[4]=h,z[5]=s,z[6]=t,z[7]=a,z[8]=n,z[9]=r,z[10]=i,z[11]=l,z[12]=k*u+h*p+n*c+e[12],z[13]=o*u+s*p+r*c+e[13],z[14]=T*u+t*p+i*c+e[14],z[15]=b*u+a*p+l*c+e[15]),z}},86520:function(ee){ee.exports=function(z,e){if(z===e){var M=e[1],k=e[2],o=e[3],T=e[6],b=e[7],h=e[11];z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=M,z[6]=e[9],z[7]=e[13],z[8]=k,z[9]=T,z[11]=e[14],z[12]=o,z[13]=b,z[14]=h}else z[0]=e[0],z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=e[1],z[5]=e[5],z[6]=e[9],z[7]=e[13],z[8]=e[2],z[9]=e[6],z[10]=e[10],z[11]=e[14],z[12]=e[3],z[13]=e[7],z[14]=e[11],z[15]=e[15];return z}},23352:function(ee,z,e){var M=e(42771),k=e(55616),o=e(28624),T=e(55212),b=e(60463),h=e(72160),s=e(33888),t=e(14144),a=e(51160),n=e(58908),r=e(65819),i=e(23464),l=e(63768),u=e(50896),p=e(71920),c=e(47520),x=e(308).nextPow2,d=new b,g=!1;if(document.body){var v=document.body.appendChild(document.createElement("div"));v.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(v).fontStretch&&(g=!0),document.body.removeChild(v)}var y=function(m){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=d.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),d.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(n(m)?m:{})};y.prototype.createShader=function(){var m=this.regl,_=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(f,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(f,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(f,S){return S.atlas.texture},charStep:function(f,S){return S.atlas.step},em:function(f,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:_,atlas:{}}},y.prototype.update=function(m){var _=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function(fe){return parseFloat(fe)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=a(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=c(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=y.baseFontSize+"px sans-serif");var f,S=!1,w=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(fe,Ee){if(typeof fe=="string")try{fe=M.parse(fe)}catch{fe=M.parse(y.baseFontSize+"px "+fe)}else{var Te=fe.style,Ae=fe.weight,Se=fe.stretch,Oe=fe.variant;fe=M.parse(M.stringify(fe)),Te&&(fe.style=Te),Ae&&(fe.weight=Ae),Se&&(fe.stretch=Se),Oe&&(fe.variant=Oe)}var De=M.stringify({size:y.baseFontSize,family:fe.family,stretch:g?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style}),de=r(fe.size),me=Math.round(de[0]*i(de[1]));if(me!==_.fontSize[Ee]&&(w=!0,_.fontSize[Ee]=me),!(_.font[Ee]&&De==_.font[Ee].baseString||(S=!0,_.font[Ee]=y.fonts[De],_.font[Ee]))){var Me=fe.family.join(", "),ze=[fe.style];fe.style!=fe.variant&&ze.push(fe.variant),fe.variant!=fe.weight&&ze.push(fe.weight),g&&fe.weight!=fe.stretch&&ze.push(fe.stretch),_.font[Ee]={baseString:De,family:Me,weight:fe.weight,stretch:fe.stretch,style:fe.style,variant:fe.variant,width:{},kerning:{},metrics:p(Me,{origin:"top",fontSize:y.baseFontSize,fontStyle:ze.join(" ")})},y.fonts[De]=_.font[Ee]}}),(S||w)&&this.font.forEach(function(fe,Ee){var Te=M.stringify({size:_.fontSize[Ee],family:fe.family,stretch:g?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style});if(_.fontAtlas[Ee]=_.shader.atlas[Te],!_.fontAtlas[Ee]){var Ae=fe.metrics;_.shader.atlas[Te]=_.fontAtlas[Ee]={fontString:Te,step:2*Math.ceil(_.fontSize[Ee]*Ae.bottom*.5),em:_.fontSize[Ee],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}m.text==null&&(m.text=_.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),O=0;O<E.length;O++)E[O]=m.text;m.text=E}if(m.text!=null||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];f=[],this.font.forEach(function(fe,Ee){y.atlasContext.font=fe.baseString;for(var Te=_.fontAtlas[Ee],Ae=0;Ae<_.text.length;Ae++){var Se=_.text.charAt(Ae);if(Te.ids[Se]==null&&(Te.ids[Se]=Te.chars.length,Te.chars.push(Se),f.push(Se)),fe.width[Se]==null&&(fe.width[Se]=y.atlasContext.measureText(Se).width/y.baseFontSize,_.kerning)){var Oe=[];for(var De in fe.width)Oe.push(De+Se,Se+De);u(fe.kerning,l(fe.family,{pairs:Oe}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,R=t.mallocFloat(2*this.count),j=0,D=0;j<this.counts.length;j++){var N=this.counts[j];if(P)for(var W=0;W<N;W++)R[D++]=m.position[2*j],R[D++]=m.position[2*j+1];else for(var F=0;F<N;F++)R[D++]=m.position[j][0],R[D++]=m.position[j][1]}this.position.call?this.position({type:"float",data:R}):this.position=this.regl.buffer({type:"float",data:R}),t.freeFloat(R)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var V=t.mallocUint8(this.count),U=t.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,J=0;te<this.counts.length;te++){for(var X=this.counts[te],K=this.font[te]||this.font[0],Q=this.fontAtlas[te]||this.fontAtlas[0],Z=0;Z<X;Z++){var re=this.text.charAt(J),oe=this.text.charAt(J-1);if(V[J]=Q.ids[re],U[2*J]=K.width[re],Z){var ae=U[2*J-2],ce=U[2*J],he=U[2*J-1]+.5*ae+.5*ce;if(this.kerning){var pe=K.kerning[oe+re];pe&&(he+=.001*pe)}U[2*J+1]=he}else U[2*J+1]=.5*U[2*J];J++}this.textWidth.push(U.length?.5*U[2*J-2]+U[2*J-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:U,type:"float",usage:"stream"}),t.freeUint8(V),t.freeFloat(U),f.length&&this.font.forEach(function(fe,Ee){var Te=_.fontAtlas[Ee],Ae=Te.step,Se=Math.floor(y.maxAtlasSize/Ae),Oe=Math.min(Se,Te.chars.length),De=Math.ceil(Te.chars.length/Oe),de=x(Oe*Ae),me=x(De*Ae);Te.width=de,Te.height=me,Te.rows=De,Te.cols=Oe,Te.em&&Te.texture({data:s({canvas:y.atlasCanvas,font:Te.fontString,chars:Te.chars,shape:[de,me],step:[Ae,Ae]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(fe,Ee){var Te=Array.isArray(_.align)?_.align.length>1?_.align[Ee]:_.align[0]:_.align;if(typeof Te=="number")return Te;switch(Te){case"right":case"end":return-fe;case"center":case"centre":case"middle":return .5*-fe}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(fe,Ee){var Te=(_.font[Ee]||_.font[0]).metrics,Ae=0;return Ae+=.5*Te.bottom,-1*(Ae+=typeof fe=="number"?fe-Te.baseline:-Te[fe])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var xe;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var be=m.color.length;xe=t.mallocUint8(be);for(var ve=(m.color.subarray||m.color.slice).bind(m.color),ge=0;ge<be;ge+=4)xe.set(h(ve(ge,ge+4),"uint8"),ge)}else{var we=m.color.length;xe=t.mallocUint8(4*we);for(var _e=0;_e<we;_e++)xe.set(h(m.color[_e]||0,"uint8"),4*_e)}this.color=xe}else this.color=h(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var se=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(se);for(var ie=0;ie<this.batch.length;ie++)this.batch[ie]={count:this.counts.length>1?this.counts[ie]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ie]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ie,4*ie+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ie]:this.opacity,baseline:this.baselineOffset[ie]!=null?this.baselineOffset[ie]:this.baselineOffset[0],align:this.align?this.alignOffset[ie]!=null?this.alignOffset[ie]:this.alignOffset[0]:0,atlas:this.fontAtlas[ie]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ie,2*ie+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},y.prototype.destroy=function(){},y.prototype.kerning=!0,y.prototype.position={constant:new Float32Array(2)},y.prototype.translate=null,y.prototype.scale=null,y.prototype.font=null,y.prototype.text="",y.prototype.positionOffset=[0,0],y.prototype.opacity=1,y.prototype.color=new Uint8Array([0,0,0,255]),y.prototype.alignOffset=[0,0],y.maxAtlasSize=1024,y.atlasCanvas=document.createElement("canvas"),y.atlasContext=y.atlasCanvas.getContext("2d",{alpha:!1}),y.baseFontSize=64,y.fonts={},ee.exports=y},55212:function(ee,z,e){var M=e(55616);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var h=b.container.getBoundingClientRect();b.canvas.width=b.width||h.right-h.left,b.canvas.height=b.height||h.bottom-h.top}}function o(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}ee.exports=function(b){var h;if(b?typeof b=="string"&&(b={container:b}):b={},(b=o(b)||typeof(h=b).nodeName=="string"&&typeof h.appendChild=="function"&&typeof h.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:M(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}o(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},26444:function(ee){ee.exports=function(z){typeof z=="string"&&(z=[z]);for(var e=[].slice.call(arguments,1),M=[],k=0;k<z.length-1;k++)M.push(z[k],e[k]||"");return M.push(z[k]),M.join("")}},2304:function(ee,z,e){var M=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}ee.exports=M},52264:function(ee,z,e){var M,k=e(24200);M=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,ee.exports=M},89184:function(ee,z,e){var M=e(24200);ee.exports=M&&function(){var k=!1;try{var o=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{k=!1}return k}()},39640:function(ee,z,e){var M=e(53664)("%Object.defineProperty%",!0),k=function(){if(M)try{return M({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return M([],"length",{value:1}).length!==1}catch{return!0}},ee.exports=k},69572:function(ee){var z={foo:{}},e=Object;ee.exports=function(){return{__proto__:z}.foo===z.foo&&!({__proto__:null}instanceof e)}},71080:function(ee,z,e){var M=typeof Symbol<"u"&&Symbol,k=e(89320);ee.exports=function(){return typeof M=="function"&&typeof Symbol=="function"&&typeof M("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},89320:function(ee){ee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var z={},e=Symbol("test"),M=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;for(e in z[e]=42,z)return!1;if(typeof Object.keys=="function"&&Object.keys(z).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(z).length!==0)return!1;var k=Object.getOwnPropertySymbols(z);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(z,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(z,e);if(o.value!==42||o.enumerable!==!0)return!1}return!0}},46672:function(ee,z,e){var M=e(89320);ee.exports=function(){return M()&&!!Symbol.toStringTag}},92064:function(ee,z,e){var M=Function.prototype.call,k=Object.prototype.hasOwnProperty,o=e(8844);ee.exports=o.call(M,k)},35984:function(ee,z){z.read=function(e,M,k,o,T){var b,h,s=8*T-o-1,t=(1<<s)-1,a=t>>1,n=-7,r=k?T-1:0,i=k?-1:1,l=e[M+r];for(r+=i,b=l&(1<<-n)-1,l>>=-n,n+=s;n>0;b=256*b+e[M+r],r+=i,n-=8);for(h=b&(1<<-n)-1,b>>=-n,n+=o;n>0;h=256*h+e[M+r],r+=i,n-=8);if(b===0)b=1-a;else{if(b===t)return h?NaN:1/0*(l?-1:1);h+=Math.pow(2,o),b-=a}return(l?-1:1)*h*Math.pow(2,b-o)},z.write=function(e,M,k,o,T,b){var h,s,t,a=8*b-T-1,n=(1<<a)-1,r=n>>1,i=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=o?0:b-1,u=o?1:-1,p=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(s=isNaN(M)?1:0,h=n):(h=Math.floor(Math.log(M)/Math.LN2),M*(t=Math.pow(2,-h))<1&&(h--,t*=2),(M+=h+r>=1?i/t:i*Math.pow(2,1-r))*t>=2&&(h++,t/=2),h+r>=n?(s=0,h=n):h+r>=1?(s=(M*t-1)*Math.pow(2,T),h+=r):(s=M*Math.pow(2,r-1)*Math.pow(2,T),h=0));T>=8;e[k+l]=255&s,l+=u,s/=256,T-=8);for(h=h<<T|s,a+=T;a>0;e[k+l]=255&h,l+=u,h/=256,a-=8);e[k+l-u]|=128*p}},6768:function(ee){typeof Object.create=="function"?ee.exports=function(z,e){e&&(z.super_=e,z.prototype=Object.create(e.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:ee.exports=function(z,e){if(e){z.super_=e;var M=function(){};M.prototype=e.prototype,z.prototype=new M,z.prototype.constructor=z}}},91148:function(ee,z,e){var M=e(46672)(),k=e(99676)("Object.prototype.toString"),o=function(h){return!(M&&h&&typeof h=="object"&&Symbol.toStringTag in h)&&k(h)==="[object Arguments]"},T=function(h){return!!o(h)||h!==null&&typeof h=="object"&&typeof h.length=="number"&&h.length>=0&&k(h)!=="[object Array]"&&k(h.callee)==="[object Function]"},b=function(){return o(arguments)}();o.isLegacyArguments=T,ee.exports=b?o:T},24200:function(ee){ee.exports=!0},90720:function(ee){var z,e,M=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{z=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,z)}catch(r){r!==e&&(k=null)}else k=null;var o=/^\s*class\b/,T=function(r){try{var i=M.call(r);return o.test(i)}catch{return!1}},b=function(r){try{return!T(r)&&(M.call(r),!0)}catch{return!1}},h=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),a=function(){return!1};if(typeof document=="object"){var n=document.all;h.call(n)===h.call(document.all)&&(a=function(r){if((t||!r)&&(r===void 0||typeof r=="object"))try{var i=h.call(r);return(i==="[object HTMLAllCollection]"||i==="[object HTML document.all class]"||i==="[object HTMLCollection]"||i==="[object Object]")&&r("")==null}catch{}return!1})}ee.exports=k?function(r){if(a(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{k(r,null,z)}catch(i){if(i!==e)return!1}return!T(r)&&b(r)}:function(r){if(a(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(s)return b(r);if(T(r))return!1;var i=h.call(r);return!(i!=="[object Function]"&&i!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(i))&&b(r)}},84420:function(ee,z,e){var M,k=Object.prototype.toString,o=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(46672)(),h=Object.getPrototypeOf;ee.exports=function(s){if(typeof s!="function")return!1;if(T.test(o.call(s)))return!0;if(!b)return k.call(s)==="[object GeneratorFunction]";if(!h)return!1;if(M===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!t&&h(t)}return h(s)===M}},96604:function(ee){ee.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(ee){ee.exports=function(z){return z!=z}},1560:function(ee,z,e){var M=e(57916),k=e(81288),o=e(85992),T=e(57740),b=e(59736),h=M(T(),Number);k(h,{getPolyfill:T,implementation:o,shim:b}),ee.exports=h},57740:function(ee,z,e){var M=e(85992);ee.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},59736:function(ee,z,e){var M=e(81288),k=e(57740);ee.exports=function(){var o=k();return M(Number,{isNaN:o},{isNaN:function(){return Number.isNaN!==o}}),o}},18400:function(ee){ee.exports=function(z){var e=typeof z;return z!==null&&(e==="object"||e==="function")}},58908:function(ee){var z=Object.prototype.toString;ee.exports=function(e){var M;return z.call(e)==="[object Object]"&&((M=Object.getPrototypeOf(e))===null||M===Object.getPrototypeOf({}))}},94576:function(ee){ee.exports=function(z){for(var e,M=z.length,k=0;k<M;k++)if(((e=z.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(ee){ee.exports=function(z){return typeof z=="string"&&(z=z.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(z)&&/[\dz]$/i.test(z)&&z.length>4))}},7728:function(ee,z,e){var M=e(46492),k=e(63436),o=e(99676),T=o("Object.prototype.toString"),b=e(46672)(),h=e(2304),s=typeof globalThis>"u"?e.g:globalThis,t=k(),a=o("Array.prototype.indexOf",!0)||function(l,u){for(var p=0;p<l.length;p+=1)if(l[p]===u)return p;return-1},n=o("String.prototype.slice"),r={},i=Object.getPrototypeOf;b&&h&&i&&M(t,function(l){var u=new s[l];if(Symbol.toStringTag in u){var p=i(u),c=h(p,Symbol.toStringTag);if(!c){var x=i(p);c=h(x,Symbol.toStringTag)}r[l]=c.get}}),ee.exports=function(l){if(!l||typeof l!="object")return!1;if(!b||!(Symbol.toStringTag in l)){var u=n(T(l),8,-1);return a(t,u)>-1}return!!h&&function(p){var c=!1;return M(r,function(x,d){if(!c)try{c=x.call(p)===d}catch{}}),c}(l)}},76244:function(ee){ee.exports=Math.log2||function(z){return Math.log(z)*Math.LOG2E}},62644:function(ee,z,e){ee.exports=function(k,o){o||(o=k,k=window);var T=0,b=0,h=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function a(g){var v=!1;return"altKey"in g&&(v=v||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(v=v||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(v=v||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(v=v||g.metaKey!==s.meta,s.meta=!!g.metaKey),v}function n(g,v){var y=M.x(v),m=M.y(v);"buttons"in v&&(g=0|v.buttons),(g!==T||y!==b||m!==h||a(v))&&(T=0|g,b=y||0,h=m||0,o&&o(T,b,h,s))}function r(g){n(0,g)}function i(){(T||b||h||s.shift||s.alt||s.meta||s.control)&&(b=h=0,T=0,s.shift=s.alt=s.control=s.meta=!1,o&&o(0,0,0,s))}function l(g){a(g)&&o&&o(T,b,h,s)}function u(g){M.buttons(g)===0?n(0,g):n(T,g)}function p(g){n(T|M.buttons(g),g)}function c(g){n(T&~M.buttons(g),g)}function x(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",p),k.addEventListener("mouseup",c),k.addEventListener("mouseleave",r),k.addEventListener("mouseenter",r),k.addEventListener("mouseout",r),k.addEventListener("mouseover",r),k.addEventListener("blur",i),k.addEventListener("keyup",l),k.addEventListener("keydown",l),k.addEventListener("keypress",l),k!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}x();var d={element:k};return Object.defineProperties(d,{enabled:{get:function(){return t},set:function(g){g?x():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",p),k.removeEventListener("mouseup",c),k.removeEventListener("mouseleave",r),k.removeEventListener("mouseenter",r),k.removeEventListener("mouseout",r),k.removeEventListener("mouseover",r),k.removeEventListener("blur",i),k.removeEventListener("keyup",l),k.removeEventListener("keydown",l),k.removeEventListener("keypress",l),k!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return h},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),d};var M=e(93784)},29128:function(ee){var z={left:0,top:0};ee.exports=function(e,M,k){M=M||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var o,T=e.clientX||0,b=e.clientY||0,h=(o=M)===window||o===document||o===document.body?z:o.getBoundingClientRect();return k[0]=T-h.left,k[1]=b-h.top,k}},93784:function(ee,z){function e(M){return M.target||M.srcElement||window}z.buttons=function(M){if(typeof M=="object"){if("buttons"in M)return M.buttons;if("which"in M){if((k=M.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in M){var k;if((k=M.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},z.element=e,z.x=function(M){if(typeof M=="object"){if("offsetX"in M)return M.offsetX;var k=e(M).getBoundingClientRect();return M.clientX-k.left}return 0},z.y=function(M){if(typeof M=="object"){if("offsetY"in M)return M.offsetY;var k=e(M).getBoundingClientRect();return M.clientY-k.top}return 0}},97264:function(ee,z,e){var M=e(23464);ee.exports=function(k,o,T){typeof k=="function"&&(T=!!o,o=k,k=window);var b=M("ex",k),h=function(s){T&&s.preventDefault();var t=s.deltaX||0,a=s.deltaY||0,n=s.deltaZ||0,r=1;switch(s.deltaMode){case 1:r=b;break;case 2:r=window.innerHeight}if(a*=r,n*=r,(t*=r)||a||n)return o(t,a,n,s)};return k.addEventListener("wheel",h),h}},88324:function(ee,z,e){var M;(function(k,o,T){o[k]=o[k]||function(){var b,h,s,t=Object.prototype.toString,a=typeof setImmediate<"u"?function(y){return setImmediate(y)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(y,m,_,f){return Object.defineProperty(y,m,{value:_,writable:!0,configurable:f!==!1})}}catch{b=function(m,_,f){return m[_]=f,m}}function n(y,m){s.add(y,m),h||(h=a(s.drain))}function r(y){var m,_=typeof y;return y==null||_!="object"&&_!="function"||(m=y.then),typeof m=="function"&&m}function i(){for(var y=0;y<this.chain.length;y++)l(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function l(y,m,_){var f,S;try{m===!1?_.reject(y.msg):(f=m===!0?y.msg:m.call(void 0,y.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(S=r(f))?S.call(f,_.resolve,_.reject):_.resolve(f)}catch(w){_.reject(w)}}function u(y){var m,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(m=r(y))?n(function(){var f=new x(_);try{m.call(y,function(){u.apply(f,arguments)},function(){p.apply(f,arguments)})}catch(S){p.call(f,S)}}):(_.msg=y,_.state=1,_.chain.length>0&&n(i,_))}catch(f){p.call(new x(_),f)}}}function p(y){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=y,m.state=2,m.chain.length>0&&n(i,m))}function c(y,m,_,f){for(var S=0;S<m.length;S++)(function(w){y.resolve(m[w]).then(function(E){_(w,E)},f)})(S)}function x(y){this.def=y,this.triggered=!1}function d(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new d(this);this.then=function(_,f){var S={success:typeof _!="function"||_,failure:typeof f=="function"&&f};return S.promise=new this.constructor(function(w,E){if(typeof w!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=w,S.reject=E}),m.chain.push(S),m.state!==0&&n(i,m),S.promise},this.catch=function(_){return this.then(void 0,_)};try{y.call(void 0,function(_){u.call(m,_)},function(_){p.call(m,_)})}catch(_){p.call(m,_)}}s=function(){var y,m,_;function f(S,w){this.fn=S,this.self=w,this.next=void 0}return{add:function(S,w){_=new f(S,w),m?m.next=_:y=_,m=_,_=void 0},drain:function(){var S=y;for(y=m=h=void 0;S;)S.fn.call(S.self),S=S.next}}}();var v=b({},"constructor",g,!1);return g.prototype=v,b(v,"__NPO__",0,!1),b(g,"resolve",function(y){return y&&typeof y=="object"&&y.__NPO__===1?y:new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");m(y)})}),b(g,"reject",function(y){return new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");_(y)})}),b(g,"all",function(y){var m=this;return t.call(y)!="[object Array]"?m.reject(TypeError("Not an array")):y.length===0?m.resolve([]):new m(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");var S=y.length,w=Array(S),E=0;c(m,y,function(O,C){w[O]=C,++E===S&&_(w)},f)})}),b(g,"race",function(y){var m=this;return t.call(y)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");c(m,y,function(S,w){_(w)},f)})}),g}(),ee.exports?ee.exports=o[k]:(M=(function(){return o[k]}).call(z,e,z,ee))===void 0||(ee.exports=M)})("Promise",e.g!==void 0?e.g:this)},48816:function(ee){var z=Math.PI,e=b(120);function M(h,s,t,a){return["C",h,s,t,a,t,a]}function k(h,s,t,a,n,r){return["C",h/3+.6666666666666666*t,s/3+.6666666666666666*a,n/3+.6666666666666666*t,r/3+.6666666666666666*a,n,r]}function o(h,s,t,a,n,r,i,l,u,p){if(p)S=p[0],w=p[1],_=p[2],f=p[3];else{var c=T(h,s,-n);h=c.x,s=c.y;var x=(h-(l=(c=T(l,u,-n)).x))/2,d=(s-(u=c.y))/2,g=x*x/(t*t)+d*d/(a*a);g>1&&(t*=g=Math.sqrt(g),a*=g);var v=t*t,y=a*a,m=(r==i?-1:1)*Math.sqrt(Math.abs((v*y-v*d*d-y*x*x)/(v*d*d+y*x*x)));m==1/0&&(m=1);var _=m*t*d/a+(h+l)/2,f=m*-a*x/t+(s+u)/2,S=Math.asin(((s-f)/a).toFixed(9)),w=Math.asin(((u-f)/a).toFixed(9));(S=h<_?z-S:S)<0&&(S=2*z+S),(w=l<_?z-w:w)<0&&(w=2*z+w),i&&S>w&&(S-=2*z),!i&&w>S&&(w-=2*z)}if(Math.abs(w-S)>e){var E=w,O=l,C=u;w=S+e*(i&&w>S?1:-1);var P=o(l=_+t*Math.cos(w),u=f+a*Math.sin(w),t,a,n,0,i,O,C,[w,E,_,f])}var R=Math.tan((w-S)/4),j=4/3*t*R,D=4/3*a*R,N=[2*h-(h+j*Math.sin(S)),2*s-(s-D*Math.cos(S)),l+j*Math.sin(w),u-D*Math.cos(w),l,u];if(p)return N;P&&(N=N.concat(P));for(var W=0;W<N.length;){var F=T(N[W],N[W+1],n);N[W++]=F.x,N[W++]=F.y}return N}function T(h,s,t){return{x:h*Math.cos(t)-s*Math.sin(t),y:h*Math.sin(t)+s*Math.cos(t)}}function b(h){return h*(z/180)}ee.exports=function(h){for(var s,t=[],a=0,n=0,r=0,i=0,l=null,u=null,p=0,c=0,x=0,d=h.length;x<d;x++){var g=h[x],v=g[0];switch(v){case"M":r=g[1],i=g[2];break;case"A":(g=o(p,c,g[1],g[2],b(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var y=p,m=c;s!="C"&&s!="S"||(y+=y-a,m+=m-n),g=["C",y,m,g[1],g[2],g[3],g[4]];break;case"T":s=="Q"||s=="T"?(l=2*p-l,u=2*c-u):(l=p,u=c),g=k(p,c,l,u,g[1],g[2]);break;case"Q":l=g[1],u=g[2],g=k(p,c,g[1],g[2],g[3],g[4]);break;case"L":g=M(p,c,g[1],g[2]);break;case"H":g=M(p,c,g[1],c);break;case"V":g=M(p,c,p,g[1]);break;case"Z":g=M(p,c,r,i)}s=v,p=g[g.length-2],c=g[g.length-1],g.length>4?(a=g[g.length-4],n=g[g.length-3]):(a=p,n=c),t.push(g)}return t}},50896:function(ee){var z=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;ee.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var o={},T=0;T<10;T++)o["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(o).map(function(h){return o[h]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(h){b[h]=h}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,o){for(var T,b,h=function(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}(k),s=1;s<arguments.length;s++){for(var t in T=Object(arguments[s]))e.call(T,t)&&(h[t]=T[t]);if(z){b=z(T);for(var a=0;a<b.length;a++)M.call(T,b[a])&&(h[b[a]]=T[b[a]])}}return h}},76835:function(ee){var z=function(e){return e!=e};ee.exports=function(e,M){return e===0&&M===0?1/e==1/M:e===M||!(!z(e)||!z(M))}},39896:function(ee,z,e){var M=e(81288),k=e(57916),o=e(76835),T=e(66148),b=e(16408),h=k(T(),Object);M(h,{getPolyfill:T,implementation:o,shim:b}),ee.exports=h},66148:function(ee,z,e){var M=e(76835);ee.exports=function(){return typeof Object.is=="function"?Object.is:M}},16408:function(ee,z,e){var M=e(66148),k=e(81288);ee.exports=function(){var o=M();return k(Object,{is:o},{is:function(){return Object.is!==o}}),o}},32764:function(ee,z,e){var M;if(!Object.keys){var k=Object.prototype.hasOwnProperty,o=Object.prototype.toString,T=e(97344),b=Object.prototype.propertyIsEnumerable,h=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=function(i){var l=i.constructor;return l&&l.prototype===i},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},r=function(){if(typeof window>"u")return!1;for(var i in window)try{if(!n["$"+i]&&k.call(window,i)&&window[i]!==null&&typeof window[i]=="object")try{a(window[i])}catch{return!0}}catch{return!0}return!1}();M=function(i){var l=i!==null&&typeof i=="object",u=o.call(i)==="[object Function]",p=T(i),c=l&&o.call(i)==="[object String]",x=[];if(!l&&!u&&!p)throw new TypeError("Object.keys called on a non-object");var d=s&&u;if(c&&i.length>0&&!k.call(i,0))for(var g=0;g<i.length;++g)x.push(String(g));if(p&&i.length>0)for(var v=0;v<i.length;++v)x.push(String(v));else for(var y in i)d&&y==="prototype"||!k.call(i,y)||x.push(String(y));if(h)for(var m=function(f){if(typeof window>"u"||!r)return a(f);try{return a(f)}catch{return!1}}(i),_=0;_<t.length;++_)m&&t[_]==="constructor"||!k.call(i,t[_])||x.push(t[_]);return x}}ee.exports=M},41820:function(ee,z,e){var M=Array.prototype.slice,k=e(97344),o=Object.keys,T=o?function(h){return o(h)}:e(32764),b=Object.keys;T.shim=function(){if(Object.keys){var h=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);h||(Object.keys=function(s){return k(s)?b(M.call(s)):b(s)})}else Object.keys=T;return Object.keys||T},ee.exports=T},97344:function(ee){var z=Object.prototype.toString;ee.exports=function(e){var M=z.call(e),k=M==="[object Arguments]";return k||(k=M!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&z.call(e.callee)==="[object Function]"),k}},32868:function(ee){function z(k,o){if(typeof k!="string")return[k];var T=[k];typeof o=="string"||Array.isArray(o)?o={brackets:o}:o||(o={});var b=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],h=o.escape||"___",s=!!o.flat;b.forEach(function(a){var n=new RegExp(["\\",a[0],"[^\\",a[0],"\\",a[1],"]*\\",a[1]].join("")),r=[];function i(l,u,p){var c=T.push(l.slice(a[0].length,-a[1].length))-1;return r.push(c),h+c+h}T.forEach(function(l,u){for(var p,c=0;l!=p;)if(p=l,l=l.replace(n,i),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=l}),r=r.reverse(),T=T.map(function(l){return r.forEach(function(u){l=l.replace(new RegExp("(\\"+h+u+"\\"+h+")","g"),a[0]+"$1"+a[1])}),l})});var t=new RegExp("\\"+h+"([0-9]+)\\"+h);return s?T:function a(n,r,i){for(var l,u=[],p=0;l=t.exec(n);){if(p++>1e4)throw Error("Circular references in parenthesis");u.push(n.slice(0,l.index)),u.push(a(r[l[1]],r)),n=n.slice(l.index+l[0].length)}return u.push(n),u}(T[0],T)}function e(k,o){if(o&&o.flat){var T,b=o&&o.escape||"___",h=k[0];if(!h)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;h!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=h,h=h.replace(s,a)}return h}return k.reduce(function n(r,i){return Array.isArray(i)&&(i=i.reduce(n,"")),r+i},"");function a(n,r){if(k[r]==null)throw Error("Reference "+r+"is undefined");return k[r]}}function M(k,o){return Array.isArray(k)?e(k,o):z(k,o)}M.parse=z,M.stringify=e,ee.exports=M},51160:function(ee,z,e){var M=e(55616);ee.exports=function(k){var o;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?o=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(o={x:(k=M(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?o.width=k.right-o.x:o.width=0:o.width=k.width,k.height==null?k.bottom?o.height=k.bottom-o.y:o.height=0:o.height=k.height),o}},21984:function(ee){ee.exports=function(k){var o=[];return k.replace(e,function(T,b,h){var s=b.toLowerCase();for(h=function(t){var a=t.match(M);return a?a.map(Number):[]}(h),s=="m"&&h.length>2&&(o.push([b].concat(h.splice(0,2))),s="l",b=b=="m"?"l":"L");;){if(h.length==z[s])return h.unshift(b),o.push(h);if(h.length<z[s])throw new Error("malformed path data");o.push([b].concat(h.splice(0,z[s])))}}),o};var z={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(ee){ee.exports=function(z,e){e||(e=[0,""]),z=String(z);var M=parseFloat(z,10);return e[0]=M,e[1]=z.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(ee,z,e){var M=e(4168);(function(){var k,o,T,b,h,s;typeof performance<"u"&&performance!==null&&performance.now?ee.exports=function(){return performance.now()}:M!=null&&M.hrtime?(ee.exports=function(){return(k()-h)/1e6},o=M.hrtime,b=(k=function(){var t;return 1e9*(t=o())[0]+t[1]})(),s=1e9*M.uptime(),h=b-s):Date.now?(ee.exports=function(){return Date.now()-T},T=Date.now()):(ee.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},55616:function(ee){ee.exports=function(M,k,o){var T,b,h={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(b=0;b<k.length;b++)s[k[b]]=!0;k=s}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var a=k[T];if(Array.isArray(a))for(b=0;b<a.length;b++){var n=a[b];if(o&&(t[n]=!0),n in M){if(h[T]=M[n],o)for(var r=b;r<a.length;r++)t[a[r]]=!0;break}}else T in M&&(k[T]&&(h[T]=M[T]),o&&(t[T]=!0))}if(o)for(T in M)t[T]||(h[T]=M[T]);return h};var z={};function e(M){return z[M]?z[M]:(typeof M=="string"&&(M=z[M]=M.split(/\s*,\s*|\s+/)),M)}},61456:function(ee){ee.exports=function(z,e,M,k){var o=z[0],T=z[1],b=!1;M===void 0&&(M=0),k===void 0&&(k=e.length);for(var h=k-M,s=0,t=h-1;s<h;t=s++){var a=e[s+M][0],n=e[s+M][1],r=e[t+M][0],i=e[t+M][1];n>T!=i>T&&o<(r-a)*(T-n)/(i-n)+a&&(b=!b)}return b}},14756:function(ee,z,e){var M,k=e(7688),o=e(28648),T=e(72200),b=e(11403),h=e(82368),s=e(17792),t=!1,a=o();function n(r,i,l){var u=M.segments(r),p=M.segments(i),c=l(M.combine(u,p));return M.polygon(c)}M={buildLog:function(r){return r===!0?t=k():r===!1&&(t=!1),t!==!1&&t.list},epsilon:function(r){return a.epsilon(r)},segments:function(r){var i=T(!0,a,t);return r.regions.forEach(i.addRegion),{segments:i.calculate(r.inverted),inverted:r.inverted}},combine:function(r,i){return{combined:T(!1,a,t).calculate(r.segments,r.inverted,i.segments,i.inverted),inverted1:r.inverted,inverted2:i.inverted}},selectUnion:function(r){return{segments:h.union(r.combined,t),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:h.intersect(r.combined,t),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:h.difference(r.combined,t),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:h.differenceRev(r.combined,t),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:h.xor(r.combined,t),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:b(r.segments,a,t),inverted:r.inverted}},polygonFromGeoJSON:function(r){return s.toPolygon(M,r)},polygonToGeoJSON:function(r){return s.fromPolygon(M,a,r)},union:function(r,i){return n(r,i,M.selectUnion)},intersect:function(r,i){return n(r,i,M.selectIntersect)},difference:function(r,i){return n(r,i,M.selectDifference)},differenceRev:function(r,i){return n(r,i,M.selectDifferenceRev)},xor:function(r,i){return n(r,i,M.selectXor)}},typeof window=="object"&&(window.PolyBool=M),ee.exports=M},7688:function(ee){ee.exports=function(){var z,e=0,M=!1;function k(o,T){return z.list.push({type:o,data:T?JSON.parse(JSON.stringify(T)):void 0}),z}return z={list:[],segmentId:function(){return e++},checkIntersection:function(o,T){return k("check",{seg1:o,seg2:T})},segmentChop:function(o,T){return k("div_seg",{seg:o,pt:T}),k("chop",{seg:o,pt:T})},statusRemove:function(o){return k("pop_seg",{seg:o})},segmentUpdate:function(o){return k("seg_update",{seg:o})},segmentNew:function(o,T){return k("new_seg",{seg:o,primary:T})},segmentRemove:function(o){return k("rem_seg",{seg:o})},tempStatus:function(o,T,b){return k("temp_status",{seg:o,above:T,below:b})},rewind:function(o){return k("rewind",{seg:o})},status:function(o,T,b){return k("status",{seg:o,above:T,below:b})},vert:function(o){return o===M?z:(M=o,k("vert",{x:o}))},log:function(o){return typeof o!="string"&&(o=JSON.stringify(o,!1,"  ")),k("log",{txt:o})},reset:function(){return k("reset")},selected:function(o){return k("selected",{segs:o})},chainStart:function(o){return k("chain_start",{seg:o})},chainRemoveHead:function(o,T){return k("chain_rem_head",{index:o,pt:T})},chainRemoveTail:function(o,T){return k("chain_rem_tail",{index:o,pt:T})},chainNew:function(o,T){return k("chain_new",{pt1:o,pt2:T})},chainMatch:function(o){return k("chain_match",{index:o})},chainClose:function(o){return k("chain_close",{index:o})},chainAddHead:function(o,T){return k("chain_add_head",{index:o,pt:T})},chainAddTail:function(o,T){return k("chain_add_tail",{index:o,pt:T})},chainConnect:function(o,T){return k("chain_con",{index1:o,index2:T})},chainReverse:function(o){return k("chain_rev",{index:o})},chainJoin:function(o,T){return k("chain_join",{index1:o,index2:T})},done:function(){return k("done")}}}},28648:function(ee){ee.exports=function(z){typeof z!="number"&&(z=1e-10);var e={epsilon:function(M){return typeof M=="number"&&(z=M),z},pointAboveOrOnLine:function(M,k,o){var T=k[0],b=k[1],h=o[0],s=o[1],t=M[0];return(h-T)*(M[1]-b)-(s-b)*(t-T)>=-z},pointBetween:function(M,k,o){var T=M[1]-k[1],b=o[0]-k[0],h=M[0]-k[0],s=o[1]-k[1],t=h*b+T*s;return!(t<z||t-(b*b+s*s)>-z)},pointsSameX:function(M,k){return Math.abs(M[0]-k[0])<z},pointsSameY:function(M,k){return Math.abs(M[1]-k[1])<z},pointsSame:function(M,k){return e.pointsSameX(M,k)&&e.pointsSameY(M,k)},pointsCompare:function(M,k){return e.pointsSameX(M,k)?e.pointsSameY(M,k)?0:M[1]<k[1]?-1:1:M[0]<k[0]?-1:1},pointsCollinear:function(M,k,o){var T=M[0]-k[0],b=M[1]-k[1],h=k[0]-o[0],s=k[1]-o[1];return Math.abs(T*s-h*b)<z},linesIntersect:function(M,k,o,T){var b=k[0]-M[0],h=k[1]-M[1],s=T[0]-o[0],t=T[1]-o[1],a=b*t-h*s;if(Math.abs(a)<z)return!1;var n=M[0]-o[0],r=M[1]-o[1],i=(s*r-t*n)/a,l=(b*r-h*n)/a,u={alongA:0,alongB:0,pt:[M[0]+i*b,M[1]+i*h]};return u.alongA=i<=-z?-2:i<z?-1:i-1<=-z?0:i-1<z?1:2,u.alongB=l<=-z?-2:l<z?-1:l-1<=-z?0:l-1<z?1:2,u},pointInsideRegion:function(M,k){for(var o=M[0],T=M[1],b=k[k.length-1][0],h=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var a=k[t][0],n=k[t][1];n-T>z!=h-T>z&&(b-a)*(T-n)/(h-n)+a-o>z&&(s=!s),b=a,h=n}return s}};return e}},17792:function(ee){var z={toPolygon:function(e,M){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function h(a){var n=a.slice(0,a.length-1);return e.segments({inverted:!1,regions:[n]})}for(var s=h(b[0]),t=1;t<b.length;t++)s=e.selectDifference(e.combine(s,h(b[t])));return s}if(M.type==="Polygon")return e.polygon(k(M.coordinates));if(M.type==="MultiPolygon"){for(var o=e.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)o=e.selectUnion(e.combine(o,k(M.coordinates[T])));return e.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,k){function o(l,u){return M.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],u)}function T(l){return{region:l,children:[]}}k=e.polygon(e.segments(k));var b=T(null);function h(l,u){for(var p=0;p<l.children.length;p++)if(o(u,(x=l.children[p]).region))return void h(x,u);var c=T(u);for(p=0;p<l.children.length;p++){var x;o((x=l.children[p]).region,u)&&(c.children.push(x),l.children.splice(p,1),p--)}l.children.push(c)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||h(b,t)}function a(l,u){for(var p=0,c=l[l.length-1][0],x=l[l.length-1][1],d=[],g=0;g<l.length;g++){var v=l[g][0],y=l[g][1];d.push([v,y]),p+=y*c-v*x,c=v,x=y}return p<0!==u&&d.reverse(),d.push([d[0][0],d[0][1]]),d}var n=[];function r(l){var u=[a(l.region,!1)];n.push(u);for(var p=0;p<l.children.length;p++)u.push(i(l.children[p]))}function i(l){for(var u=0;u<l.children.length;u++)r(l.children[u]);return a(l.region,!0)}for(s=0;s<b.children.length;s++)r(b.children[s]);return n.length<=0?{type:"Polygon",coordinates:[]}:n.length==1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}};ee.exports=z},72200:function(ee,z,e){var M=e(48088);ee.exports=function(k,o,T){function b(r,i,l){return{id:T?T.segmentId():-1,start:r,end:i,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var h=M.create();function s(r,i){h.insertBefore(r,function(l){return u=r.isStart,p=r.pt,c=i,x=l.isStart,d=l.pt,g=l.other.pt,((v=o.pointsCompare(p,d))!==0?v:o.pointsSame(c,g)?0:u!==x?u?1:-1:o.pointAboveOrOnLine(c,x?d:g,x?g:d)?1:-1)<0;var u,p,c,x,d,g,v})}function t(r,i){var l=function(u,p){var c=M.node({isStart:!0,pt:u.start,seg:u,primary:p,other:null,status:null});return s(c,u.end),c}(r,i);return function(u,p,c){var x=M.node({isStart:!1,pt:p.end,seg:p,primary:c,other:u,status:null});u.other=x,s(x,u.pt)}(l,r,i),l}function a(r,i){var l=b(i,r.seg.end,r.seg);return function(u,p){T&&T.segmentChop(u.seg,p),u.other.remove(),u.seg.end=p,u.other.pt=p,s(u.other,u.pt)}(r,i),t(l,r.primary)}function n(r,i){var l=M.create();function u(w){return l.findTransition(function(E){var O,C,P,R,j,D;return O=w,C=E.ev,P=O.seg.start,R=O.seg.end,j=C.seg.start,D=C.seg.end,(o.pointsCollinear(P,j,D)?o.pointsCollinear(R,j,D)||o.pointAboveOrOnLine(R,j,D)?1:-1:o.pointAboveOrOnLine(P,j,D)?1:-1)>0})}function p(w,E){var O=w.seg,C=E.seg,P=O.start,R=O.end,j=C.start,D=C.end;T&&T.checkIntersection(O,C);var N=o.linesIntersect(P,R,j,D);if(N===!1){if(!o.pointsCollinear(P,R,j)||o.pointsSame(P,D)||o.pointsSame(R,j))return!1;var W=o.pointsSame(P,j),F=o.pointsSame(R,D);if(W&&F)return E;var V=!W&&o.pointBetween(P,j,D),U=!F&&o.pointBetween(R,j,D);if(W)return U?a(E,R):a(w,D),E;V&&(F||(U?a(E,R):a(w,D)),a(E,P))}else N.alongA===0&&(N.alongB===-1?a(w,j):N.alongB===0?a(w,N.pt):N.alongB===1&&a(w,D)),N.alongB===0&&(N.alongA===-1?a(E,P):N.alongA===0?a(E,N.pt):N.alongA===1&&a(E,R));return!1}for(var c=[];!h.isEmpty();){var x=h.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let w=function(){if(g){var E=p(x,g);if(E)return E}return!!v&&p(x,v)};T&&T.segmentNew(x.seg,x.primary);var d=u(x),g=d.before?d.before.ev:null,v=d.after?d.after.ev:null;T&&T.tempStatus(x.seg,!!g&&g.seg,!!v&&v.seg);var y,m,_=w();if(_&&(k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(_.seg),x.other.remove(),x.remove()),h.getHead()!==x){T&&T.rewind(x.seg);continue}k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=v?v.seg.myFill.above:r,x.seg.myFill.above=m?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(y=v?x.primary===v.primary?v.seg.otherFill.above:v.seg.myFill.above:x.primary?i:r,x.seg.otherFill={above:y,below:y}),T&&T.status(x.seg,!!g&&g.seg,!!v&&v.seg),x.other.status=d.insert(M.node({ev:x}))}else{var f=x.status;if(f===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(f.prev)&&l.exists(f.next)&&p(f.prev.ev,f.next.ev),T&&T.statusRemove(f.ev.seg),f.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}c.push(x.seg)}h.getHead().remove()}return T&&T.done(),c}return k?{addRegion:function(r){for(var i,l,u,p=r[r.length-1],c=0;c<r.length;c++){i=p,p=r[c];var x=o.pointsCompare(i,p);x!==0&&t((l=x<0?i:p,u=x<0?p:i,{id:T?T.segmentId():-1,start:l,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return n(r,!1)}}:{calculate:function(r,i,l,u){return r.forEach(function(p){t(b(p.start,p.end,p),!0)}),l.forEach(function(p){t(b(p.start,p.end,p),!1)}),n(i,u)}}}},48088:function(ee){ee.exports={create:function(){var z={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==z.root},isEmpty:function(){return z.root.next===null},getHead:function(){return z.root.next},insertBefore:function(e,M){for(var k=z.root,o=z.root.next;o!==null;){if(M(o))return e.prev=o.prev,e.next=o,o.prev.next=e,void(o.prev=e);k=o,o=o.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var M=z.root,k=z.root.next;k!==null&&!e(k);)M=k,k=k.next;return{before:M===z.root?null:M,after:k,insert:function(o){return o.prev=M,o.next=k,M.next=o,k!==null&&(k.prev=o),o}}}};return z},node:function(z){return z.prev=null,z.next=null,z.remove=function(){z.prev.next=z.next,z.next&&(z.next.prev=z.prev),z.prev=null,z.next=null},z}}},11403:function(ee){ee.exports=function(z,e,M){var k=[],o=[];return z.forEach(function(T){var b=T.start,h=T.end;if(e.pointsSame(b,h))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},a=s,n=0;n<k.length;n++){var r=(c=k[n])[0],i=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(r,b)){if(f(n,!0,!0))break}else if(e.pointsSame(r,h)){if(f(n,!0,!1))break}else if(e.pointsSame(i,b)){if(f(n,!1,!0))break}else if(e.pointsSame(i,h)&&f(n,!1,!1))break}if(a===s)return k.push([b,h]),void(M&&M.chainNew(b,h));if(a===t){M&&M.chainMatch(s.index);var l=s.index,u=s.matches_pt1?h:b,p=s.matches_head,c=k[l],x=p?c[0]:c[c.length-1],d=p?c[1]:c[c.length-2],g=p?c[c.length-1]:c[0],v=p?c[c.length-2]:c[1];return e.pointsCollinear(d,x,u)&&(p?(M&&M.chainRemoveHead(s.index,u),c.shift()):(M&&M.chainRemoveTail(s.index,u),c.pop()),x=d),e.pointsSame(g,u)?(k.splice(l,1),e.pointsCollinear(v,g,x)&&(p?(M&&M.chainRemoveTail(s.index,x),c.pop()):(M&&M.chainRemoveHead(s.index,x),c.shift())),M&&M.chainClose(s.index),void o.push(c)):void(p?(M&&M.chainAddHead(s.index,u),c.unshift(u)):(M&&M.chainAddTail(s.index,u),c.push(u)))}var y=s.index,m=t.index;M&&M.chainConnect(y,m);var _=k[y].length<k[m].length;s.matches_head?t.matches_head?_?(S(y),w(y,m)):(S(m),w(m,y)):w(m,y):t.matches_head?w(y,m):_?(S(y),w(m,y)):(S(m),w(y,m))}function f(E,O,C){return a.index=E,a.matches_head=O,a.matches_pt1=C,a===s?(a=t,!1):(a=null,!0)}function S(E){M&&M.chainReverse(E),k[E].reverse()}function w(E,O){var C=k[E],P=k[O],R=C[C.length-1],j=C[C.length-2],D=P[0],N=P[1];e.pointsCollinear(j,R,D)&&(M&&M.chainRemoveTail(E,R),C.pop(),R=j),e.pointsCollinear(R,D,N)&&(M&&M.chainRemoveHead(O,D),P.shift()),M&&M.chainJoin(E,O),k[E]=C.concat(P),k.splice(O,1)}}),o}},82368:function(ee){function z(M,k,o){var T=[];return M.forEach(function(b){var h=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[h]!==0&&T.push({id:o?o.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[h]===1,below:k[h]===2},otherFill:null})}),o&&o.selected(T),T}var e={union:function(M,k){return z(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(M,k){return z(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(M,k){return z(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(M,k){return z(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(M,k){return z(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};ee.exports=e},9696:function(ee,z,e){var M=e(29936).Transform,k=e(55619);function o(){M.call(this,{readableObjectMode:!0})}function T(b,h,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,h&&(this.code=h),s&&(this.statusCode=s)}o.prototype=Object.create(M.prototype),o.prototype.constructor=o,k(o.prototype),z.gS=function(b,h,s){for(var t=h,a=0;a<s.length;)if(b[t++]!==s[a++])return!1;return!0},z.wR=function(b,h){var s=[],t=0;if(h&&h==="hex")for(;t<b.length;)s.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)s.push(255&b.charCodeAt(t));return s},z.Bz=function(b,h){return b[h]|b[h+1]<<8},z.eW=function(b,h){return b[h+1]|b[h]<<8},z.st=function(b,h){return b[h]|b[h+1]<<8|b[h+2]<<16|16777216*b[h+3]},z.eI=function(b,h){return b[h+3]|b[h+2]<<8|b[h+1]<<16|16777216*b[h]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},11688:function(ee){function z(k,o){var T=new Error(k);return T.code=o,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function M(k,o,T){this.input=k.subarray(o,T),this.start=o;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw z("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}M.prototype.each=function(k){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},M.prototype.read_uint16=function(k){var o=this.input;if(k+2>o.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?256*o[k]+o[k+1]:o[k]+256*o[k+1]},M.prototype.read_uint32=function(k){var o=this.input;if(k+4>o.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[k]+65536*o[k+1]+256*o[k+2]+o[k+3]:o[k]+256*o[k+1]+65536*o[k+2]+16777216*o[k+3]},M.prototype.is_subifd_link=function(k,o){return k===0&&o===34665||k===0&&o===34853||k===34665&&o===40965},M.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(k,o){var T;switch(k){case 1:case 2:return this.input[o];case 6:return(T=this.input[o])|33554430*(128&T);case 3:return this.read_uint16(o);case 8:return(T=this.read_uint16(o))|131070*(32768&T);case 4:return this.read_uint32(o);case 9:return 0|this.read_uint32(o);default:return null}},M.prototype.scan_ifd=function(k,o,T){var b=this.read_uint16(o);o+=2;for(var h=0;h<b;h++){var s=this.read_uint16(o),t=this.read_uint16(o+2),a=this.read_uint32(o+4),n=this.exif_format_length(t),r=a*n,i=r<=4?o+8:this.read_uint32(o+8),l=!1;if(i+r>this.input.length)throw z("unexpected EOF","EBADDATA");for(var u=[],p=i,c=0;c<a;c++,p+=n){var x=this.exif_format_read(t,p);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:s,offset:u[0]}),l=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:a,entry_offset:o+this.start,data_length:r,data_offset:i+this.start,value:u,is_subifd_link:l})===!1)return void(this.aborted=!0);o+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},ee.exports.ExifParser=M,ee.exports.get_orientation=function(k){var o=0;try{return new M(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return o=T.value[0],!1}),o}catch{return-1}}},44600:function(ee,z,e){var M=e(9696).eW,k=e(9696).eI;function o(a,n){if(a.length<4+n)return null;var r=k(a,n);return a.length<r+n||r<8?null:{boxtype:String.fromCharCode.apply(null,a.slice(n+4,n+8)),data:a.slice(n+8,n+r),end:n+r}}function T(a,n){for(var r=0;;){var i=o(a,r);if(!i)break;switch(i.boxtype){case"ispe":n.sizes.push({width:k(i.data,4),height:k(i.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&i.data[0]})}r=i.end}}function b(a,n,r){for(var i=0,l=0;l<r;l++)i=256*i+(a[n+l]||0);return i}function h(a,n){for(var r=a[4]>>4&15,i=15&a[4],l=a[5]>>4&15,u=M(a,6),p=8,c=0;c<u;c++){var x=M(a,p),d=M(a,p+=2),g=b(a,p+=2,l),v=M(a,p+=l);if(p+=2,d===0&&v===1){var y=b(a,p,r),m=b(a,p+r,i);n.item_loc[x]={length:m,offset:y+g}}p+=v*(r+i)}}function s(a,n){for(var r=M(a,4),i=6,l=0;l<r;l++){var u=o(a,i);if(!u)break;if(u.boxtype==="infe"){for(var p=M(u.data,4),c="",x=8;x<u.data.length&&u.data[x];x++)c+=String.fromCharCode(u.data[x]);n.item_inf[c]=p}i=u.end}}function t(a,n){for(var r=0;;){var i=o(a,r);if(!i)break;i.boxtype==="ipco"&&T(i.data,n),r=i.end}}ee.exports.unbox=o,ee.exports.readSizeFromMeta=function(a){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,d){for(var g=4;;){var v=o(x,g);if(!v)break;v.boxtype==="iprp"&&t(v.data,d),v.boxtype==="iloc"&&h(v.data,d),v.boxtype==="iinf"&&s(v.data,d),g=v.end}}(a,n),n.sizes.length){var r,i,l,u=(i=(r=n.sizes).reduce(function(x,d){return x.width>d.width||x.width===d.width&&x.height>d.height?x:d}),l=r.reduce(function(x,d){return x.height>d.height||x.height===d.height&&x.width>d.width?x:d}),i.width>l.height||i.width===l.height&&i.height>l.width?i:l),p=1;n.transforms.forEach(function(x){var d={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(p=x.value===0?g[p]:d[p=d[p=g[p]]]),x.type==="irot")for(var v=0;v<x.value;v++)p=d[p]});var c=null;return n.item_inf.Exif&&(c=n.item_loc[n.item_inf.Exif]),{width:u.width,height:u.height,orientation:n.transforms.length?p:null,variants:n.sizes,exif_location:c}}},ee.exports.getMimeType=function(a){var n=String.fromCharCode.apply(null,a.slice(0,4)),r={};r[n]=!0;for(var i=8;i<a.length;i+=4)r[String.fromCharCode.apply(null,a.slice(i,i+4))]=!0;if(r.mif1||r.msf1||r.miaf)return n==="avif"||n==="avis"||n==="avio"?{type:"avif",mime:"image/avif"}:n==="heic"||n==="heix"?{type:"heic",mime:"image/heic"}:n==="hevc"||n==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(ee,z,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=e(44600),b=e(11688),h=M("ftyp");ee.exports=function(s){if(k(s,4,h)){var t=T.unbox(s,0);if(t){var a=T.getMimeType(t.data);if(a){for(var n,r=t.end;;){var i=T.unbox(s,r);if(!i)break;if(r=i.end,i.boxtype==="mdat")return;if(i.boxtype==="meta"){n=i.data;break}}if(n){var l=T.readSizeFromMeta(n);if(l){var u={width:l.width,height:l.height,type:a.type,mime:a.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(u.variants=l.variants),l.orientation&&(u.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=s.length){var p=o(s,l.exif_location.offset),c=s.slice(l.exif_location.offset+p+4,l.exif_location.offset+l.exif_location.length),x=b.get_orientation(c);x>0&&(u.orientation=x)}return u}}}}}}},38728:function(ee,z,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("BM");ee.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:o(b,18),height:o(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(ee,z,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("GIF87a"),b=M("GIF89a");ee.exports=function(h){if(!(h.length<10)&&(k(h,0,T)||k(h,0,b)))return{width:o(h,6),height:o(h,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(ee,z,e){var M=e(9696).Bz;ee.exports=function(k){var o=M(k,0),T=M(k,2),b=M(k,4);if(o===0&&T===1&&b){for(var h=[],s={width:0,height:0},t=0;t<b;t++){var a=k[6+16*t]||256,n=k[6+16*t+1]||256,r={width:a,height:n};h.push(r),(a>s.width||n>s.height)&&(s=r)}return{width:s.width,height:s.height,variants:h,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(ee,z,e){var M=e(9696).eW,k=e(9696).wR,o=e(9696).gS,T=e(11688),b=k("Exif\0\0");ee.exports=function(h){if(!(h.length<2)&&h[0]===255&&h[1]===216&&h[2]===255)for(var s=2;;){for(;;){if(h.length-s<2)return;if(h[s++]===255)break}for(var t,a,n=h[s++];n===255;)n=h[s++];if(208<=n&&n<=217||n===1)t=0;else{if(!(192<=n&&n<=254)||h.length-s<2)return;t=M(h,s)-2,s+=2}if(n===217||n===218)return;if(n===225&&t>=10&&o(h,s,b)&&(a=T.get_orientation(h.slice(s+6,s+t))),t>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(h.length-s<t)return;var r={width:M(h,s+3),height:M(h,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return a>0&&(r.orientation=a),r}s+=t}}},37276:function(ee,z,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M(`PNG\r

`),b=M("IHDR");ee.exports=function(h){if(!(h.length<24)&&k(h,0,T)&&k(h,12,b))return{width:o(h,16),height:o(h,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(ee,z,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M("8BPS\0");ee.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:o(b,18),height:o(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(ee){function z(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,o=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function h(s){return b.test(s)?s.match(b)[0]:"px"}ee.exports=function(s){if(function(g){var v,y=0,m=g.length;for(g[0]===239&&g[1]===187&&g[2]===191&&(y=3);y<m&&((v=g[y])===32||v===9||v===13||v===10);)y++;return y!==m&&g[y]===60}(s)){for(var t="",a=0;a<s.length;a++)t+=String.fromCharCode(s[a]);var n=(t.match(e)||[""])[0];if(M.test(n)){var r=function(g){var v=g.match(k),y=g.match(o),m=g.match(T);return{width:v&&(v[1]||v[2]),height:y&&(y[1]||y[2]),viewbox:m&&(m[1]||m[2])}}(n),i=parseFloat(r.width),l=parseFloat(r.height);if(r.width&&r.height)return!z(i)||!z(l)?void 0:{width:i,height:l,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.height)};var u=(r.viewbox||"").split(" "),p={width:u[2],height:u[3]},c=parseFloat(p.width),x=parseFloat(p.height);if(z(c)&&z(x)&&h(p.width)===h(p.height)){var d=c/x;return r.width?z(i)?{width:i,height:i/d,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.width)}:void 0:r.height?z(l)?{width:l*d,height:l,type:"svg",mime:"image/svg+xml",wUnits:h(r.height),hUnits:h(r.height)}:void 0:{width:c,height:x,type:"svg",mime:"image/svg+xml",wUnits:h(p.width),hUnits:h(p.height)}}}}}},98792:function(ee,z,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).eW,b=e(9696).st,h=e(9696).eI,s=M("II*\0"),t=M("MM\0*");function a(i,l,u){return u?T(i,l):o(i,l)}function n(i,l,u){return u?h(i,l):b(i,l)}function r(i,l,u){var p=a(i,l+2,u);return n(i,l+4,u)!==1||p!==3&&p!==4?null:p===3?a(i,l+8,u):n(i,l+8,u)}ee.exports=function(i){if(!(i.length<8)&&(k(i,0,s)||k(i,0,t))){var l=i[0]===77,u=n(i,4,l)-8;if(!(u<0)){var p=u+8;if(!(i.length-p<2)){var c=12*a(i,p+0,l);if(!(c<=0||(p+=2,i.length-p<c))){var x,d,g,v;for(x=0;x<c;x+=12)(v=a(i,p+x,l))===256?d=r(i,p+x,l):v===257&&(g=r(i,p+x,l));return d&&g?{width:d,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(ee,z,e){var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).st,b=e(11688),h=M("RIFF"),s=M("WEBP");function t(r,i){if(r[i+3]===157&&r[i+4]===1&&r[i+5]===42)return{width:16383&o(r,i+6),height:16383&o(r,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function a(r,i){if(r[i]===47){var l=T(r,i+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function n(r,i){return{width:1+(r[i+6]<<16|r[i+5]<<8|r[i+4]),height:1+(r[i+9]<<i|r[i+8]<<8|r[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ee.exports=function(r){if(!(r.length<16)&&(k(r,0,h)||k(r,8,s))){var i=12,l=null,u=0,p=T(r,4)+8;if(!(p>r.length)){for(;i+8<p;)if(r[i]!==0){var c=String.fromCharCode.apply(null,r.slice(i,i+4)),x=T(r,i+4);c==="VP8 "&&x>=10?l=l||t(r,i+8):c==="VP8L"&&x>=9?l=l||a(r,i+8):c==="VP8X"&&x>=10?l=l||n(r,i+8):c==="EXIF"&&(u=b.get_orientation(r.slice(i+8,i+8+x)),i=1/0),i+=8+x}else i++;if(l)return u>0&&(l.orientation=u),l}}}},87480:function(ee,z,e){ee.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(ee,z,e){var M=e(87480);ee.exports=function(k){return function(o){for(var T=Object.keys(M),b=0;b<T.length;b++){var h=M[T[b]](o);if(h)return h}return null}(k)},ee.exports.parsers=M},4168:function(ee){var z,e,M=ee.exports={};function k(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function T(l){if(z===setTimeout)return setTimeout(l,0);if((z===k||!z)&&setTimeout)return z=setTimeout,setTimeout(l,0);try{return z(l,0)}catch{try{return z.call(null,l,0)}catch{return z.call(this,l,0)}}}(function(){try{z=typeof setTimeout=="function"?setTimeout:k}catch{z=k}try{e=typeof clearTimeout=="function"?clearTimeout:o}catch{e=o}})();var b,h=[],s=!1,t=-1;function a(){s&&b&&(s=!1,b.length?h=b.concat(h):t=-1,h.length&&n())}function n(){if(!s){var l=T(a);s=!0;for(var u=h.length;u;){for(b=h,h=[];++t<u;)b&&b[t].run();t=-1,u=h.length}b=null,s=!1,function(p){if(e===clearTimeout)return clearTimeout(p);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(p);try{return e(p)}catch{try{return e.call(null,p)}catch{return e.call(this,p)}}}(l)}}function r(l,u){this.fun=l,this.array=u}function i(){}M.nextTick=function(l){var u=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)u[p-1]=arguments[p];h.push(new r(l,u)),h.length!==1||s||T(n)},r.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=i,M.addListener=i,M.once=i,M.off=i,M.removeListener=i,M.removeAllListeners=i,M.emit=i,M.prependListener=i,M.prependOnceListener=i,M.listeners=function(l){return[]},M.binding=function(l){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(l){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},3951:function(ee,z,e){for(var M=e(41984),k=typeof window>"u"?e.g:window,o=["moz","webkit"],T="AnimationFrame",b=k["request"+T],h=k["cancel"+T]||k["cancelRequest"+T],s=0;!b&&s<o.length;s++)b=k[o[s]+"Request"+T],h=k[o[s]+"Cancel"+T]||k[o[s]+"CancelRequest"+T];if(!b||!h){var t=0,a=0,n=[];b=function(r){if(n.length===0){var i=M(),l=Math.max(0,16.666666666666668-(i-t));t=l+i,setTimeout(function(){var u=n.slice(0);n.length=0;for(var p=0;p<u.length;p++)if(!u[p].cancelled)try{u[p].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(l))}return n.push({handle:++a,callback:r,cancelled:!1}),a},h=function(r){for(var i=0;i<n.length;i++)n[i].handle===r&&(n[i].cancelled=!0)}}ee.exports=function(r){return b.call(k,r)},ee.exports.cancel=function(){h.apply(k,arguments)},ee.exports.polyfill=function(r){r||(r=k),r.requestAnimationFrame=b,r.cancelAnimationFrame=h}},24544:function(ee,z,e){var M=e(76752),k=e(72160),o=e(45223),T=e(55616),b=e(50896),h=e(47520),s=e(37816),t=s.float32,a=s.fract32;ee.exports=function(r,i){if(typeof r=="function"?(i||(i={}),i.regl=r):i=r,i.length&&(i.positions=i),!(r=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,u,p,c,x,d,g=r._gl,v={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},y=[];return c=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=r.buffer({usage:"static",type:"float",data:n}),S(i),l=r({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(E,O){return[O.viewport.x,O.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,O){return 4*O.offset},divisor:1},position:{buffer:u,offset:function(E,O){return 8*O.offset},divisor:1},positionFract:{buffer:p,offset:function(E,O){return 8*O.offset},divisor:1},error:{buffer:x,offset:function(E,O){return 16*O.offset},divisor:1},direction:{buffer:d,stride:24,offset:0},lineOffset:{buffer:d,stride:24,offset:8},capOffset:{buffer:d,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:n.length}),b(m,{update:S,draw:_,destroy:w,regl:r,gl:g,canvas:g.canvas,groups:y}),m;function m(E){E?S(E):E===null&&w(),_()}function _(E){if(typeof E=="number")return f(E);E&&!Array.isArray(E)&&(E=[E]),r._refresh(),y.forEach(function(O,C){O&&(E&&(E[C]?O.draw=!0:O.draw=!1),O.draw?f(C):O.draw=!0)})}function f(E){typeof E=="number"&&(E=y[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var O=0,C=0;if(m.groups=y=E.map(function(F,V){var U=y[V];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=T(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),U||(y[V]=U={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=b({},v,F)),o(U,F,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=h(te),C+=te.length,te},positions:function(te,J){return te=h(te,"float64"),J.count=Math.floor(te.length/2),J.bounds=M(te,2),J.offset=O,O+=J.count,te}},{color:function(te,J){var X=J.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var K=te;te=Array(X);for(var Q=0;Q<X;Q++)te[Q]=K}if(te.length<X)throw Error("Not enough colors");for(var Z=new Uint8Array(4*X),re=0;re<X;re++){var oe=k(te[re],"uint8");Z.set(oe,4*re)}return Z},range:function(te,J,X){var K=J.bounds;return te||(te=K),J.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],J.translate=[-te[0],-te[1]],J.scaleFract=a(J.scale),J.translateFract=a(J.translate),te},viewport:function(te){var J;return Array.isArray(te)?J={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?(J={x:te.x||te.left||0,y:te.y||te.top||0},te.right?J.width=te.right-J.x:J.width=te.w||te.width||0,te.bottom?J.height=te.bottom-J.y:J.height=te.h||te.height||0):J={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},J}}])),U}),O||C){var P=y.reduce(function(F,V,U){return F+(V?V.count:0)},0),R=new Float64Array(2*P),j=new Uint8Array(4*P),D=new Float32Array(4*P);y.forEach(function(F,V){if(F){var U=F.positions,te=F.count,J=F.offset,X=F.color,K=F.errors;te&&(j.set(X,4*J),D.set(K,4*J),R.set(U,2*J))}});var N=t(R);u(N);var W=a(R,N);p(W),c(j),x(D)}}}function w(){u.destroy(),p.destroy(),c.destroy(),x.destroy(),d.destroy()}};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(ee,z,e){var M=e(72160),k=e(76752),o=e(50896),T=e(55616),b=e(47520),h=e(28912),s=e(71152),t=e(37816),a=t.float32,n=t.fract32,r=e(60463),i=e(51160),l=e(10272);function u(p,c){if(!(this instanceof u))return new u(p,c);if(typeof p=="function"?(c||(c={}),c.regl=p):c=p,c.length&&(c.positions=c),!(p=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=u.shaders.has(p)?u.shaders.get(p):u.shaders.set(p,u.createShaders(p)).get(p),this.update(c)}ee.exports=u,u.dashMult=2,u.maxPatternLength=256,u.precisionThreshold=3e6,u.maxPoints=1e4,u.maxLines=2048,u.shaders=new r,u.createShaders=function(p){var c,x=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),d={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(v,y){return y.join==="round"?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(v,y){return[y.viewport.x,y.viewport.y,v.viewportWidth,v.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(v,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},g=p(o({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},d));try{c=p(o({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},d))}catch{c=g}return{fill:p({primitive:"triangle",elements:function(v,y){return y.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(v,y){return[y.viewport.x,y.viewport.y,v.viewportWidth,v.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:d.blend,depth:{enable:!1},scissor:d.scissor,stencil:d.stencil,viewport:d.viewport}),rect:g,miter:c}},u.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},u.prototype.render=function(){for(var p,c=[],x=arguments.length;x--;)c[x]=arguments[x];c.length&&(p=this).update.apply(p,c),this.draw()},u.prototype.draw=function(){for(var p=this,c=[],x=arguments.length;x--;)c[x]=arguments[x];return(c.length?c:this.passes).forEach(function(d,g){var v;if(d&&Array.isArray(d))return(v=p).draw.apply(v,d);typeof d=="number"&&(d=p.passes[d]),d&&d.count>1&&d.opacity&&(p.regl._refresh(),d.fill&&d.triangles&&d.triangles.length>2&&p.shaders.fill(d),d.thickness&&(d.scale[0]*d.viewport.width>u.precisionThreshold||d.scale[1]*d.viewport.height>u.precisionThreshold||d.join==="rect"||!d.join&&(d.thickness<=2||d.count>=u.maxPoints)?p.shaders.rect(d):p.shaders.miter(d)))}),this},u.prototype.update=function(p){var c=this;if(p){p.length!=null?typeof p[0]=="number"&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var x=this.regl,d=this.gl;if(p.forEach(function(_,f){var S=c.passes[f];if(_!==void 0)if(_!==null){if(typeof _[0]=="number"&&(_={positions:_}),_=T(_,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(c.passes[f]=S={id:f,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},_=o({},u.defaults,_)),_.thickness!=null&&(S.thickness=parseFloat(_.thickness)),_.opacity!=null&&(S.opacity=parseFloat(_.opacity)),_.miterLimit!=null&&(S.miterLimit=parseFloat(_.miterLimit)),_.overlay!=null&&(S.overlay=!!_.overlay,f<u.maxLines&&(S.depth=2*(u.maxLines-1-f%u.maxLines)/u.maxLines-1)),_.join!=null&&(S.join=_.join),_.hole!=null&&(S.hole=_.hole),_.fill!=null&&(S.fill=_.fill?M(_.fill,"uint8"):null),_.viewport!=null&&(S.viewport=i(_.viewport)),S.viewport||(S.viewport=i([d.drawingBufferWidth,d.drawingBufferHeight])),_.close!=null&&(S.close=_.close),_.positions===null&&(_.positions=[]),_.positions){var w,E;if(_.positions.x&&_.positions.y){var O=_.positions.x,C=_.positions.y;E=S.count=Math.max(O.length,C.length),w=new Float64Array(2*E);for(var P=0;P<E;P++)w[2*P]=O[P],w[2*P+1]=C[P]}else w=b(_.positions,"float64"),E=S.count=Math.floor(w.length/2);var R=S.bounds=k(w,2);if(S.fill){for(var j=[],D={},N=0,W=0,F=0,V=S.count;W<V;W++){var U=w[2*W],te=w[2*W+1];isNaN(U)||isNaN(te)||U==null||te==null?(U=w[2*N],te=w[2*N+1],D[W]=N):N=W,j[F++]=U,j[F++]=te}if(_.splitNull){S.count-1 in D||(D[S.count]=S.count-1);var J=Object.keys(D).map(Number).sort(function(vt,ht){return vt-ht}),X=[],K=0,Q=S.hole!=null?S.hole[0]:null;if(Q!=null){var Z=l(J,function(vt){return vt>=Q});(J=J.slice(0,Z)).push(Q)}for(var re=function(vt){var ht=j.slice(2*K,2*J[vt]).concat(Q?j.slice(2*Q):[]),et=(S.hole||[]).map(function(wt){return wt-Q+(J[vt]-K)}),$e=h(ht,et);$e=$e.map(function(wt){return wt+K+(wt+K<J[vt]?0:Q-J[vt])}),X.push.apply(X,$e),K=J[vt]+1},oe=0;oe<J.length;oe++)re(oe);for(var ae=0,ce=X.length;ae<ce;ae++)D[X[ae]]!=null&&(X[ae]=D[X[ae]]);S.triangles=X}else{for(var he=h(j,S.hole||[]),pe=0,xe=he.length;pe<xe;pe++)D[he[pe]]!=null&&(he[pe]=D[he[pe]]);S.triangles=he}}var be=new Float64Array(w);s(be,2,R);var ve=new Float64Array(2*E+6);S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(ve[0]=be[2*E-4],ve[1]=be[2*E-3]):(ve[0]=be[2*E-2],ve[1]=be[2*E-1]):(ve[0]=be[0],ve[1]=be[1]),ve.set(be,2),S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(ve[2*E+2]=be[2],ve[2*E+3]=be[3],S.count-=1):(ve[2*E+2]=be[0],ve[2*E+3]=be[1],ve[2*E+4]=be[2],ve[2*E+5]=be[3]):(ve[2*E+2]=be[2*E-2],ve[2*E+3]=be[2*E-1],ve[2*E+4]=be[2*E-2],ve[2*E+5]=be[2*E-1]);var ge=a(ve);S.positionBuffer(ge);var we=n(ve,ge);S.positionFractBuffer(we)}if(_.range?S.range=_.range:S.range||(S.range=S.bounds),(_.range||_.positions)&&S.count){var _e=S.bounds,se=_e[2]-_e[0],ie=_e[3]-_e[1],fe=S.range[2]-S.range[0],Ee=S.range[3]-S.range[1];S.scale=[se/fe,ie/Ee],S.translate=[-S.range[0]/fe+_e[0]/fe||0,-S.range[1]/Ee+_e[1]/Ee||0],S.scaleFract=n(S.scale),S.translateFract=n(S.translate)}if(_.dashes){var Te,Ae=0;if(!_.dashes||_.dashes.length<2)Ae=1,Te=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ae=0;for(var Se=0;Se<_.dashes.length;++Se)Ae+=_.dashes[Se];Te=new Uint8Array(Ae*u.dashMult);for(var Oe=0,De=255,de=0;de<2;de++)for(var me=0;me<_.dashes.length;++me){for(var Me=0,ze=_.dashes[me]*u.dashMult*.5;Me<ze;++Me)Te[Oe++]=De;De^=255}}S.dashLength=Ae,S.dashTexture({channels:1,data:Te,width:Te.length,height:1,mag:"linear",min:"linear"},0,0)}if(_.color){var Pe=S.count,Ne=_.color;Ne||(Ne="transparent");var Ve=new Uint8Array(4*Pe+4);if(Array.isArray(Ne)&&typeof Ne[0]!="number"){for(var Ye=0;Ye<Pe;Ye++){var at=M(Ne[Ye],"uint8");Ve.set(at,4*Ye)}Ve.set(M(Ne[0],"uint8"),4*Pe)}else for(var rt=M(Ne,"uint8"),dt=0;dt<Pe+1;dt++)Ve.set(rt,4*dt);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ve})}}else c.passes[f]=null}),p.length<this.passes.length){for(var g=p.length;g<this.passes.length;g++){var v=this.passes[g];v&&(v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy())}this.passes.length=p.length}for(var y=[],m=0;m<this.passes.length;m++)this.passes[m]!==null&&y.push(this.passes[m]);return this.passes=y,this}},u.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(ee,z,e){function M(g,v){return function(y){if(Array.isArray(y))return y}(g)||function(y,m){var _=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(_!=null){var f,S,w,E,O=[],C=!0,P=!1;try{if(w=(_=_.call(y)).next,m!==0)for(;!(C=(f=w.call(_)).done)&&(O.push(f.value),O.length!==m);C=!0);}catch(R){P=!0,S=R}finally{try{if(!C&&_.return!=null&&(E=_.return(),Object(E)!==E))return}finally{if(P)throw S}}return O}}(g,v)||k(g,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(g,v){if(g){if(typeof g=="string")return o(g,v);var y=Object.prototype.toString.call(g).slice(8,-1);return y==="Object"&&g.constructor&&(y=g.constructor.name),y==="Map"||y==="Set"?Array.from(g):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?o(g,v):void 0}}function o(g,v){(v==null||v>g.length)&&(v=g.length);for(var y=0,m=new Array(v);y<v;y++)m[y]=g[y];return m}var T=e(72160),b=e(76752),h=e(3808),s=e(3108),t=e(50896),a=e(26444),n=e(55616),r=e(45223),i=e(47520),l=e(96604),u=e(37816),p=e(51160),c=x;function x(g,v){var y=this;if(!(this instanceof x))return new x(g,v);typeof g=="function"?(v||(v={}),v.regl=g):(v=g,g=null),v&&v.length&&(v.positions=v);var m,_=(g=v.regl)._gl,f=[];this.tooManyColors=l,m=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:f,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(v);var S={uniforms:{constPointSize:!!v.constPointSize,opacity:g.prop("opacity"),paletteSize:function(O,C){return[y.tooManyColors?0:255,m.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:m},attributes:{x:function(O,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(O,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(O,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(O,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(O,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/y.maxSize)]}},borderSize:function(O,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/y.maxSize)]}},colorId:function(O,C){return C.color.length?{buffer:C.colorBuffer,stride:y.tooManyColors?8:4,offset:0}:{constant:y.tooManyColors?f.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(O,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:y.tooManyColors?8:4,offset:y.tooManyColors?4:2}:{constant:y.tooManyColors?f.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(O,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},w=t({},S);w.frag=a([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),w.vert=a([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=g(w);var E=t({},S);E.frag=a([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=a([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var g=this,v=arguments.length,y=new Array(v),m=0;m<v;m++)y[m]=arguments[m];var _=this.groups;if(y.length===1&&Array.isArray(y[0])&&(y[0][0]===null||Array.isArray(y[0][0]))&&(y=y[0]),this.regl._refresh(),y.length)for(var f=0;f<y.length;f++)this.drawItem(f,y[f]);else _.forEach(function(S,w){g.drawItem(w)});return this},x.prototype.drawItem=function(g,v){var y,m=this.groups,_=m[g];if(typeof v=="number"&&(g=v,_=m[v],v=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,v));for(var f=[],S=1;S<_.activation.length;S++)_.activation[S]&&(_.activation[S]===!0||_.activation[S].data.length)&&f.push.apply(f,function(w){if(Array.isArray(w))return o(w)}(y=this.getMarkerDrawOptions(S,_,v))||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(y)||k(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());f.length&&this.drawMarker(f)}},x.prototype.getMarkerDrawOptions=function(g,v,y){var m=v.range,_=v.tree,f=v.viewport,S=v.activation,w=v.selectionBuffer,E=v.count;if(this.regl,!_)return y?[t({},v,{markerTexture:this.markerTextures[g],activation:S[g],count:y.length,elements:y,offset:0})]:[t({},v,{markerTexture:this.markerTextures[g],activation:S[g],offset:0})];var O=[],C=_.range(m,{lod:!0,px:[(m[2]-m[0])/f.width,(m[3]-m[1])/f.height]});if(y){for(var P=S[g].data,R=new Uint8Array(E),j=0;j<y.length;j++){var D=y[j];R[D]=P?P[D]:1}w.subdata(R)}for(var N=C.length;N--;){var W=M(C[N],2),F=W[0],V=W[1];O.push(t({},v,{markerTexture:this.markerTextures[g],activation:y?w:S[g],offset:F,count:V-F}))}return O},x.prototype.update=function(){for(var g=this,v=arguments.length,y=new Array(v),m=0;m<v;m++)y[m]=arguments[m];if(y.length){y.length===1&&Array.isArray(y[0])&&(y=y[0]);var _=this.groups,f=this.gl,S=this.regl,w=this.maxSize,E=this.maxColors,O=this.palette;this.groups=_=y.map(function(C,P){var R=_[P];if(C===void 0)return R;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=n(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(g.tooManyColors=C.tooManyColors),R||(_[P]=R={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=R.marker,delete R.marker),C.marker&&!("positions"in C)&&(C.positions=R.positions,delete R.positions);var j=0,D=0;if(r(R,C,[{snap:!0,size:function(xe,be){return xe==null&&(xe=x.defaults.size),j+=xe&&xe.length?1:0,xe},borderSize:function(xe,be){return xe==null&&(xe=x.defaults.borderSize),j+=xe&&xe.length?1:0,xe},opacity:parseFloat,color:function(xe,be){return xe==null&&(xe=x.defaults.color),xe=g.updateColor(xe),D++,xe},borderColor:function(xe,be){return xe==null&&(xe=x.defaults.borderColor),xe=g.updateColor(xe),D++,xe},bounds:function(xe,be,ve){return"range"in ve||(ve.range=null),xe},positions:function(xe,be,ve){var ge=be.snap,we=be.positionBuffer,_e=be.positionFractBuffer,se=be.selectionBuffer;if(xe.x||xe.y)return xe.x.length?be.xAttr={buffer:S.buffer(xe.x),offset:0,stride:4,count:xe.x.length}:be.xAttr={buffer:xe.x.buffer,offset:4*xe.x.offset||0,stride:4*(xe.x.stride||1),count:xe.x.count},xe.y.length?be.yAttr={buffer:S.buffer(xe.y),offset:0,stride:4,count:xe.y.length}:be.yAttr={buffer:xe.y.buffer,offset:4*xe.y.offset||0,stride:4*(xe.y.stride||1),count:xe.y.count},be.count=Math.max(be.xAttr.count,be.yAttr.count),xe;xe=i(xe,"float64");var ie=be.count=Math.floor(xe.length/2),fe=be.bounds=ie?b(xe,2):null;if(ve.range||be.range||(delete be.range,ve.range=fe),ve.marker||be.marker||(delete be.marker,ve.marker=null),ge&&(ge===!0||ie>ge)?be.tree=s(xe,{bounds:fe}):ge&&ge.length&&(be.tree=ge),be.tree){var Ee={primitive:"points",usage:"static",data:be.tree,type:"uint32"};be.elements?be.elements(Ee):be.elements=S.elements(Ee)}var Te=u.float32(xe);return we({data:Te,usage:"dynamic"}),_e({data:u.fract32(xe,Te),usage:"dynamic"}),se({data:new Uint8Array(ie),type:"uint8",usage:"stream"}),xe}},{marker:function(xe,be,ve){var ge=be.activation;if(ge.forEach(function(Te){return Te&&Te.destroy&&Te.destroy()}),ge.length=0,xe&&typeof xe[0]!="number"){for(var we=[],_e=0,se=Math.min(xe.length,be.count);_e<se;_e++){var ie=g.addMarker(xe[_e]);we[ie]||(we[ie]=new Uint8Array(be.count)),we[ie][_e]=1}for(var fe=0;fe<we.length;fe++)if(we[fe]){var Ee={data:we[fe],type:"uint8",usage:"static"};ge[fe]?ge[fe](Ee):ge[fe]=S.buffer(Ee),ge[fe].data=we[fe]}}else ge[g.addMarker(xe)]=!0;return xe},range:function(xe,be,ve){var ge=be.bounds;if(ge)return xe||(xe=ge),be.scale=[1/(xe[2]-xe[0]),1/(xe[3]-xe[1])],be.translate=[-xe[0],-xe[1]],be.scaleFract=u.fract(be.scale),be.translateFract=u.fract(be.translate),xe},viewport:function(xe){return p(xe||[f.drawingBufferWidth,f.drawingBufferHeight])}}]),j){var N=R,W=N.count,F=N.size,V=N.borderSize,U=N.sizeBuffer,te=new Uint8Array(2*W);if(F.length||V.length)for(var J=0;J<W;J++)te[2*J]=Math.round(255*(F[J]==null?F:F[J])/w),te[2*J+1]=Math.round(255*(V[J]==null?V:V[J])/w);U({data:te,usage:"dynamic"})}if(D){var X,K=R,Q=K.count,Z=K.color,re=K.borderColor,oe=K.colorBuffer;if(g.tooManyColors){if(Z.length||re.length){X=new Uint8Array(8*Q);for(var ae=0;ae<Q;ae++){var ce=Z[ae];X[8*ae]=O[4*ce],X[8*ae+1]=O[4*ce+1],X[8*ae+2]=O[4*ce+2],X[8*ae+3]=O[4*ce+3];var he=re[ae];X[8*ae+4]=O[4*he],X[8*ae+5]=O[4*he+1],X[8*ae+6]=O[4*he+2],X[8*ae+7]=O[4*he+3]}}}else if(Z.length||re.length){X=new Uint8Array(4*Q+2);for(var pe=0;pe<Q;pe++)Z[pe]!=null&&(X[4*pe]=Z[pe]%E,X[4*pe+1]=Math.floor(Z[pe]/E)),re[pe]!=null&&(X[4*pe+2]=re[pe]%E,X[4*pe+3]=Math.floor(re[pe]/E))}oe({data:X||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return R})}},x.prototype.addMarker=function(g){var v,y=this.markerTextures,m=this.regl,_=this.markerCache,f=g==null?0:_.indexOf(g);if(f>=0)return f;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)v=g;else{v=new Uint8Array(g.length);for(var S=0,w=g.length;S<w;S++)v[S]=255*g[S]}var E=Math.floor(Math.sqrt(v.length));return f=y.length,_.push(g),y.push(m.texture({channels:1,data:v,radius:E,mag:"linear",min:"linear"})),f},x.prototype.updateColor=function(g){var v=this.paletteIds,y=this.palette,m=this.maxColors;Array.isArray(g)||(g=[g]);var _=[];if(typeof g[0]=="number"){var f=[];if(Array.isArray(g))for(var S=0;S<g.length;S+=4)f.push(g.slice(S,S+4));else for(var w=0;w<g.length;w+=4)f.push(g.subarray(w,w+4));g=f}for(var E=0;E<g.length;E++){var O=g[E];O=T(O,"uint8");var C=h(O,!1);if(v[C]==null){var P=y.length;v[C]=Math.floor(P/4),y[P]=O[0],y[P+1]=O[1],y[P+2]=O[2],y[P+3]=O[3]}_[E]=v[C]}return!this.tooManyColors&&y.length>4*m&&(this.tooManyColors=!0),this.updatePalette(y),_.length===1?_[0]:_},x.prototype.updatePalette=function(g){if(!this.tooManyColors){var v=this.maxColors,y=this.paletteTexture,m=Math.ceil(.25*g.length/v);if(m>1)for(var _=.25*(g=g.slice()).length%v;_<m*v;_++)g.push(0,0,0,0);y.height<m&&y.resize(v,m),y.subimage({width:Math.min(.25*g.length,v),height:m,data:g},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(v){return v&&v.destroy&&v.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var d=e(50896);ee.exports=function(g,v){var y=new c(g,v),m=y.render.bind(y);return d(m,{render:m,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette}),m}},55795:function(ee,z,e){var M=e(38540),k=e(55616),o=e(76752),T=e(3951),b=e(67752),h=e(51160),s=e(47520);function t(i,l){if(!(this instanceof t))return new t(i);this.traces=[],this.passes={},this.regl=i,this.scatter=M(i),this.canvas=this.scatter.canvas}function a(i,l,u){return(i.id!=null?i.id:i)<<16|(255&l)<<8|255&u}function n(i,l,u){var p,c,x,d,g=i[l],v=i[u];return g.length>2?(g[0],g[2],p=g[1],c=g[3]):g.length?(p=g[0],c=g[1]):(g.x,p=g.y,g.x,g.width,c=g.y+g.height),v.length>2?(x=v[0],d=v[2],v[1],v[3]):v.length?(x=v[0],d=v[1]):(x=v.x,v.y,d=v.x+v.width,v.y,v.height),[x,p,d,c]}function r(i){if(typeof i=="number")return[i,i,i,i];if(i.length===2)return[i[0],i[1],i[0],i[1]];var l=h(i);return[l.x,l.y,l.x+l.width,l.y+l.height]}ee.exports=t,t.prototype.render=function(){for(var i,l=this,u=[],p=arguments.length;p--;)u[p]=arguments[p];return u.length&&(i=this).update.apply(i,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,T(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var i,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var p=0;p<l.length;p++)this.updateItem(p,l[p]);this.traces=this.traces.filter(Boolean);for(var c=[],x=0,d=0;d<this.traces.length;d++){for(var g=this.traces[d],v=this.traces[d].passes,y=0;y<v.length;y++)c.push(this.passes[v[y]]);g.passOffset=x,x+=g.passes.length}return(i=this.scatter).update.apply(i,c),this}},t.prototype.updateItem=function(i,l){var u=this.regl;if(l===null)return this.traces[i]=null,this;if(!l)return this;var p,c=k(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[i]||(this.traces[i]={id:i,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:h([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(x.color=c.color),c.size!=null&&(x.size=c.size),c.marker!=null&&(x.marker=c.marker),c.borderColor!=null&&(x.borderColor=c.borderColor),c.borderSize!=null&&(x.borderSize=c.borderSize),c.opacity!=null&&(x.opacity=c.opacity),c.viewport&&(x.viewport=h(c.viewport)),c.diagonal!=null&&(x.diagonal=c.diagonal),c.upper!=null&&(x.upper=c.upper),c.lower!=null&&(x.lower=c.lower),c.data){x.buffer(s(c.data)),x.columns=c.data.length,x.count=c.data[0].length,x.bounds=[];for(var d=0;d<x.columns;d++)x.bounds[d]=o(c.data[d],1)}c.range&&(x.range=c.range,p=x.range&&typeof x.range[0]!="number"),c.domain&&(x.domain=c.domain);var g=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===x.columns&&typeof c.padding[c.padding.length-1]=="number"?(x.padding=c.padding.map(r),g=!0):x.padding=r(c.padding));var v=x.columns,y=x.count,m=x.viewport.width,_=x.viewport.height,f=x.viewport.x,S=x.viewport.y,w=m/v,E=_/v;x.passes=[];for(var O=0;O<v;O++)for(var C=0;C<v;C++)if((x.diagonal||C!==O)&&(x.upper||!(O>C))&&(x.lower||!(O<C))){var P=a(x.id,O,C),R=this.passes[P]||(this.passes[P]={});if(c.data&&(c.transpose?R.positions={x:{buffer:x.buffer,offset:C,count:y,stride:v},y:{buffer:x.buffer,offset:O,count:y,stride:v}}:R.positions={x:{buffer:x.buffer,offset:C*y,count:y},y:{buffer:x.buffer,offset:O*y,count:y}},R.bounds=n(x.bounds,O,C)),c.domain||c.viewport||c.data){var j=g?n(x.padding,O,C):x.padding;if(x.domain){var D=n(x.domain,O,C),N=D[0],W=D[1],F=D[2],V=D[3];R.viewport=[f+N*m+j[0],S+W*_+j[1],f+F*m-j[2],S+V*_-j[3]]}else R.viewport=[f+C*w+w*j[0],S+O*E+E*j[1],f+(C+1)*w-w*j[2],S+(O+1)*E-E*j[3]]}c.color&&(R.color=x.color),c.size&&(R.size=x.size),c.marker&&(R.marker=x.marker),c.borderSize&&(R.borderSize=x.borderSize),c.borderColor&&(R.borderColor=x.borderColor),c.opacity&&(R.opacity=x.opacity),c.range&&(R.range=p?n(x.range,O,C):x.range||R.bounds),x.passes.push(P)}return this},t.prototype.draw=function(){for(var i,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var p=[],c=0;c<l.length;c++)if(typeof l[c]=="number"){var x=this.traces[l[c]],d=x.passes,g=x.passOffset;p.push.apply(p,b(g,g+d.length))}else if(l[c].length){var v=l[c],y=this.traces[c],m=y.passes,_=y.passOffset;m=m.map(function(f,S){p[_+S]=v})}(i=this.scatter).draw.apply(i,p)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(ee){ee.exports=function(){function z(Be,Ge){this.id=re++,this.type=Be,this.data=Ge}function e(Be){if(Be.length===0)return[];var Ge=Be.charAt(0),it=Be.charAt(Be.length-1);if(1<Be.length&&Ge===it&&(Ge==='"'||Ge==="'"))return['"'+Be.substr(1,Be.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ge=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Be))return e(Be.substr(0,Ge.index)).concat(e(Ge[1])).concat(e(Be.substr(Ge.index+Ge[0].length)));if((Ge=Be.split(".")).length===1)return['"'+Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Be=[],it=0;it<Ge.length;++it)Be=Be.concat(e(Ge[it]));return Be}function M(Be){return"["+e(Be).join("][")+"]"}function k(Be){return typeof Be=="string"?Be.split():Be}function o(Be){return typeof Be=="string"?document.querySelector(Be):Be}function T(Be){var Ge,it,tt,Re,Fe=Be||{};Be={};var nt=[],We=[],ct=typeof window>"u"?1:window.devicePixelRatio,pt=!1,gt={},ut=function(yt){},kt=function(){};if(typeof Fe=="string"?Ge=document.querySelector(Fe):typeof Fe=="object"&&(typeof Fe.nodeName=="string"&&typeof Fe.appendChild=="function"&&typeof Fe.getBoundingClientRect=="function"?Ge=Fe:typeof Fe.drawArrays=="function"||typeof Fe.drawElements=="function"?tt=(Re=Fe).canvas:("gl"in Fe?Re=Fe.gl:"canvas"in Fe?tt=o(Fe.canvas):"container"in Fe&&(it=o(Fe.container)),"attributes"in Fe&&(Be=Fe.attributes),"extensions"in Fe&&(nt=k(Fe.extensions)),"optionalExtensions"in Fe&&(We=k(Fe.optionalExtensions)),"onDone"in Fe&&(ut=Fe.onDone),"profile"in Fe&&(pt=!!Fe.profile),"pixelRatio"in Fe&&(ct=+Fe.pixelRatio),"cachedCode"in Fe&&(gt=Fe.cachedCode))),Ge&&(Ge.nodeName.toLowerCase()==="canvas"?tt=Ge:it=Ge),!Re){if(!tt){if(!(Ge=function(yt,Mt,Lt){function Ct(){var Nt=window.innerWidth,Bt=window.innerHeight;yt!==document.body&&(Nt=(Bt=Wt.getBoundingClientRect()).right-Bt.left,Bt=Bt.bottom-Bt.top),Wt.width=Lt*Nt,Wt.height=Lt*Bt}var It,Wt=document.createElement("canvas");return Z(Wt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),yt.appendChild(Wt),yt===document.body&&(Wt.style.position="absolute",Z(yt.style,{margin:0,padding:0})),yt!==document.body&&typeof ResizeObserver=="function"?(It=new ResizeObserver(function(){setTimeout(Ct)})).observe(yt):window.addEventListener("resize",Ct,!1),Ct(),{canvas:Wt,onDestroy:function(){It?It.disconnect():window.removeEventListener("resize",Ct),yt.removeChild(Wt)}}}(it||document.body,0,ct)))return null;tt=Ge.canvas,kt=Ge.onDestroy}Be.premultipliedAlpha===void 0&&(Be.premultipliedAlpha=!0),Re=function(yt,Mt){function Lt(Ct){try{return yt.getContext(Ct,Mt)}catch{return null}}return Lt("webgl")||Lt("experimental-webgl")||Lt("webgl-experimental")}(tt,Be)}return Re?{gl:Re,canvas:tt,container:it,extensions:nt,optionalExtensions:We,pixelRatio:ct,profile:pt,cachedCode:gt,onDone:ut,onDestroy:kt}:(kt(),ut("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Be,Ge){for(var it=Array(Be),tt=0;tt<Be;++tt)it[tt]=Ge(tt);return it}function h(Be){var Ge,it;return Ge=(65535<Be)<<4,Ge|=it=(255<(Be>>>=Ge))<<3,(Ge|=it=(15<(Be>>>=it))<<2)|(it=(3<(Be>>>=it))<<1)|Be>>>it>>1}function s(){function Be(tt){e:{for(var Re=16;268435456>=Re;Re*=16)if(tt<=Re){tt=Re;break e}tt=0}return 0<(Re=it[h(tt)>>2]).length?Re.pop():new ArrayBuffer(tt)}function Ge(tt){it[h(tt.byteLength)>>2].push(tt)}var it=b(8,function(){return[]});return{alloc:Be,free:Ge,allocType:function(tt,Re){var Fe=null;switch(tt){case 5120:Fe=new Int8Array(Be(Re),0,Re);break;case 5121:Fe=new Uint8Array(Be(Re),0,Re);break;case 5122:Fe=new Int16Array(Be(2*Re),0,Re);break;case 5123:Fe=new Uint16Array(Be(2*Re),0,Re);break;case 5124:Fe=new Int32Array(Be(4*Re),0,Re);break;case 5125:Fe=new Uint32Array(Be(4*Re),0,Re);break;case 5126:Fe=new Float32Array(Be(4*Re),0,Re);break;default:return null}return Fe.length!==Re?Fe.subarray(0,Re):Fe},freeType:function(tt){Ge(tt.buffer)}}}function t(Be){return!!Be&&typeof Be=="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||xe(Be.data))}function a(Be,Ge,it,tt,Re,Fe){for(var nt=0;nt<Ge;++nt)for(var We=Be[nt],ct=0;ct<it;++ct)for(var pt=We[ct],gt=0;gt<tt;++gt)Re[Fe++]=pt[gt]}function n(Be,Ge,it,tt,Re){for(var Fe=1,nt=it+1;nt<Ge.length;++nt)Fe*=Ge[nt];var We=Ge[it];if(Ge.length-it==4){var ct=Ge[it+1],pt=Ge[it+2];for(Ge=Ge[it+3],nt=0;nt<We;++nt)a(Be[nt],ct,pt,Ge,tt,Re),Re+=Fe}else for(nt=0;nt<We;++nt)n(Be[nt],Ge,it+1,tt,Re),Re+=Fe}function r(Be){return 0|ge[Object.prototype.toString.call(Be)]}function i(Be,Ge){for(var it=0;it<Ge.length;++it)Be[it]=Ge[it]}function l(Be,Ge,it,tt,Re,Fe,nt){for(var We=0,ct=0;ct<it;++ct)for(var pt=0;pt<tt;++pt)Be[We++]=Ge[Re*ct+Fe*pt+nt]}function u(Be,Ge,it,tt){function Re(ut){this.id=ct++,this.buffer=Be.createBuffer(),this.type=ut,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,it.profile&&(this.stats={size:0})}function Fe(ut,kt,yt){ut.byteLength=kt.byteLength,Be.bufferData(ut.type,kt,yt)}function nt(ut,kt,yt,Mt,Lt,Ct){if(ut.usage=yt,Array.isArray(kt)){if(ut.dtype=Mt||5126,0<kt.length)if(Array.isArray(kt[0])){Lt=ie(kt);for(var It=Mt=1;It<Lt.length;++It)Mt*=Lt[It];ut.dimension=Mt,Fe(ut,kt=se(kt,Lt,ut.dtype),yt),Ct?ut.persistentData=kt:he.freeType(kt)}else typeof kt[0]=="number"?(ut.dimension=Lt,i(Lt=he.allocType(ut.dtype,kt.length),kt),Fe(ut,Lt,yt),Ct?ut.persistentData=Lt:he.freeType(Lt)):xe(kt[0])&&(ut.dimension=kt[0].length,ut.dtype=Mt||r(kt[0])||5126,Fe(ut,kt=se(kt,[kt.length,kt[0].length],ut.dtype),yt),Ct?ut.persistentData=kt:he.freeType(kt))}else if(xe(kt))ut.dtype=Mt||r(kt),ut.dimension=Lt,Fe(ut,kt,yt),Ct&&(ut.persistentData=new Uint8Array(new Uint8Array(kt.buffer)));else if(t(kt)){Lt=kt.shape;var Wt=kt.stride,Nt=(It=kt.offset,0),Bt=0,Ht=0,Qt=0;Lt.length===1?(Nt=Lt[0],Bt=1,Ht=Wt[0],Qt=0):Lt.length===2&&(Nt=Lt[0],Bt=Lt[1],Ht=Wt[0],Qt=Wt[1]),ut.dtype=Mt||r(kt.data)||5126,ut.dimension=Bt,l(Lt=he.allocType(ut.dtype,Nt*Bt),kt.data,Nt,Bt,Ht,Qt,It),Fe(ut,Lt,yt),Ct?ut.persistentData=Lt:he.freeType(Lt)}else kt instanceof ArrayBuffer&&(ut.dtype=5121,ut.dimension=Lt,Fe(ut,kt,yt),Ct&&(ut.persistentData=new Uint8Array(new Uint8Array(kt))))}function We(ut){Ge.bufferCount--,tt(ut),Be.deleteBuffer(ut.buffer),ut.buffer=null,delete pt[ut.id]}var ct=0,pt={};Re.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},Re.prototype.destroy=function(){We(this)};var gt=[];return it.profile&&(Ge.getTotalBufferSize=function(){var ut=0;return Object.keys(pt).forEach(function(kt){ut+=pt[kt].stats.size}),ut}),{create:function(ut,kt,yt,Mt){function Lt(It){var Wt=35044,Nt=null,Bt=0,Ht=0,Qt=1;return Array.isArray(It)||xe(It)||t(It)||It instanceof ArrayBuffer?Nt=It:typeof It=="number"?Bt=0|It:It&&("data"in It&&(Nt=It.data),"usage"in It&&(Wt=_e[It.usage]),"type"in It&&(Ht=we[It.type]),"dimension"in It&&(Qt=0|It.dimension),"length"in It&&(Bt=0|It.length)),Ct.bind(),Nt?nt(Ct,Nt,Wt,Ht,Qt,Mt):(Bt&&Be.bufferData(Ct.type,Bt,Wt),Ct.dtype=Ht||5121,Ct.usage=Wt,Ct.dimension=Qt,Ct.byteLength=Bt),it.profile&&(Ct.stats.size=Ct.byteLength*fe[Ct.dtype]),Lt}Ge.bufferCount++;var Ct=new Re(kt);return pt[Ct.id]=Ct,yt||Lt(ut),Lt._reglType="buffer",Lt._buffer=Ct,Lt.subdata=function(It,Wt){var Nt,Bt=0|(Wt||0);if(Ct.bind(),xe(It)||It instanceof ArrayBuffer)Be.bufferSubData(Ct.type,Bt,It);else if(Array.isArray(It)){if(0<It.length)if(typeof It[0]=="number"){var Ht=he.allocType(Ct.dtype,It.length);i(Ht,It),Be.bufferSubData(Ct.type,Bt,Ht),he.freeType(Ht)}else(Array.isArray(It[0])||xe(It[0]))&&(Nt=ie(It),Ht=se(It,Nt,Ct.dtype),Be.bufferSubData(Ct.type,Bt,Ht),he.freeType(Ht))}else if(t(It)){Nt=It.shape;var Qt=It.stride,Cn=Ht=0,Tn=0,hn=0;Nt.length===1?(Ht=Nt[0],Cn=1,Tn=Qt[0],hn=0):Nt.length===2&&(Ht=Nt[0],Cn=Nt[1],Tn=Qt[0],hn=Qt[1]),Nt=Array.isArray(It.data)?Ct.dtype:r(It.data),l(Nt=he.allocType(Nt,Ht*Cn),It.data,Ht,Cn,Tn,hn,It.offset),Be.bufferSubData(Ct.type,Bt,Nt),he.freeType(Nt)}return Lt},it.profile&&(Lt.stats=Ct.stats),Lt.destroy=function(){We(Ct)},Lt},createStream:function(ut,kt){var yt=gt.pop();return yt||(yt=new Re(ut)),yt.bind(),nt(yt,kt,35040,0,1,!1),yt},destroyStream:function(ut){gt.push(ut)},clear:function(){be(pt).forEach(We),gt.forEach(We)},getBuffer:function(ut){return ut&&ut._buffer instanceof Re?ut._buffer:null},restore:function(){be(pt).forEach(function(ut){ut.buffer=Be.createBuffer(),Be.bindBuffer(ut.type,ut.buffer),Be.bufferData(ut.type,ut.persistentData||ut.byteLength,ut.usage)})},_initBuffer:nt}}function p(Be,Ge,it,tt){function Re(ut){this.id=ct++,We[this.id]=this,this.buffer=ut,this.primType=4,this.type=this.vertCount=0}function Fe(ut,kt,yt,Mt,Lt,Ct,It){var Wt;if(ut.buffer.bind(),kt?((Wt=It)||xe(kt)&&(!t(kt)||xe(kt.data))||(Wt=Ge.oes_element_index_uint?5125:5123),it._initBuffer(ut.buffer,kt,yt,Wt,3)):(Be.bufferData(34963,Ct,yt),ut.buffer.dtype=Wt||5121,ut.buffer.usage=yt,ut.buffer.dimension=3,ut.buffer.byteLength=Ct),Wt=It,!It){switch(ut.buffer.dtype){case 5121:case 5120:Wt=5121;break;case 5123:case 5122:Wt=5123;break;case 5125:case 5124:Wt=5125}ut.buffer.dtype=Wt}ut.type=Wt,0>(kt=Lt)&&(kt=ut.buffer.byteLength,Wt===5123?kt>>=1:Wt===5125&&(kt>>=2)),ut.vertCount=kt,kt=Mt,0>Mt&&(kt=4,(Mt=ut.buffer.dimension)===1&&(kt=0),Mt===2&&(kt=1),Mt===3&&(kt=4)),ut.primType=kt}function nt(ut){tt.elementsCount--,delete We[ut.id],ut.buffer.destroy(),ut.buffer=null}var We={},ct=0,pt={uint8:5121,uint16:5123};Ge.oes_element_index_uint&&(pt.uint32=5125),Re.prototype.bind=function(){this.buffer.bind()};var gt=[];return{create:function(ut,kt){function yt(Ct){if(Ct)if(typeof Ct=="number")Mt(Ct),Lt.primType=4,Lt.vertCount=0|Ct,Lt.type=5121;else{var It=null,Wt=35044,Nt=-1,Bt=-1,Ht=0,Qt=0;Array.isArray(Ct)||xe(Ct)||t(Ct)?It=Ct:("data"in Ct&&(It=Ct.data),"usage"in Ct&&(Wt=_e[Ct.usage]),"primitive"in Ct&&(Nt=Ee[Ct.primitive]),"count"in Ct&&(Bt=0|Ct.count),"type"in Ct&&(Qt=pt[Ct.type]),"length"in Ct?Ht=0|Ct.length:(Ht=Bt,Qt===5123||Qt===5122?Ht*=2:Qt!==5125&&Qt!==5124||(Ht*=4))),Fe(Lt,It,Wt,Nt,Bt,Ht,Qt)}else Mt(),Lt.primType=4,Lt.vertCount=0,Lt.type=5121;return yt}var Mt=it.create(null,34963,!0),Lt=new Re(Mt._buffer);return tt.elementsCount++,yt(ut),yt._reglType="elements",yt._elements=Lt,yt.subdata=function(Ct,It){return Mt.subdata(Ct,It),yt},yt.destroy=function(){nt(Lt)},yt},createStream:function(ut){var kt=gt.pop();return kt||(kt=new Re(it.create(null,34963,!0,!1)._buffer)),Fe(kt,ut,35040,-1,-1,0,0),kt},destroyStream:function(ut){gt.push(ut)},getElements:function(ut){return typeof ut=="function"&&ut._elements instanceof Re?ut._elements:null},clear:function(){be(We).forEach(nt)}}}function c(Be){for(var Ge=he.allocType(5123,Be.length),it=0;it<Be.length;++it)if(isNaN(Be[it]))Ge[it]=65535;else if(Be[it]===1/0)Ge[it]=31744;else if(Be[it]===-1/0)Ge[it]=64512;else{Te[0]=Be[it];var tt=(Fe=Ae[0])>>>31<<15,Re=(Fe<<1>>>24)-127,Fe=Fe>>13&1023;Ge[it]=-24>Re?tt:-14>Re?tt+(Fe+1024>>-14-Re):15<Re?tt+31744:tt+(Re+15<<10)+Fe}return Ge}function x(Be){return Array.isArray(Be)||xe(Be)}function d(Be){return"[object "+Be+"]"}function g(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function v(Be){return!(!Array.isArray(Be)||Be.length===0||!x(Be[0]))}function y(Be){return Object.prototype.toString.call(Be)}function m(Be){if(!Be)return!1;var Ge=y(Be);return 0<=Ve.indexOf(Ge)||g(Be)||v(Be)||t(Be)}function _(Be,Ge){Be.type===36193?(Be.data=c(Ge),he.freeType(Ge)):Be.data=Ge}function f(Be,Ge,it,tt,Re,Fe){if(Be=at[Be]!==void 0?at[Be]:De[Be]*Ye[Ge],Fe&&(Be*=6),Re){for(tt=0;1<=it;)tt+=Be*it*it,it/=2;return tt}return Be*it*tt}function S(Be,Ge,it,tt,Re,Fe,nt){function We(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ct(Xt,pn){Xt.internalformat=pn.internalformat,Xt.format=pn.format,Xt.type=pn.type,Xt.compressed=pn.compressed,Xt.premultiplyAlpha=pn.premultiplyAlpha,Xt.flipY=pn.flipY,Xt.unpackAlignment=pn.unpackAlignment,Xt.colorSpace=pn.colorSpace,Xt.width=pn.width,Xt.height=pn.height,Xt.channels=pn.channels}function pt(Xt,pn){if(typeof pn=="object"&&pn){"premultiplyAlpha"in pn&&(Xt.premultiplyAlpha=pn.premultiplyAlpha),"flipY"in pn&&(Xt.flipY=pn.flipY),"alignment"in pn&&(Xt.unpackAlignment=pn.alignment),"colorSpace"in pn&&(Xt.colorSpace=Mn[pn.colorSpace]),"type"in pn&&(Xt.type=_n[pn.type]);var bt=Xt.width,Ut=Xt.height,Kt=Xt.channels,un=!1;"shape"in pn?(bt=pn.shape[0],Ut=pn.shape[1],pn.shape.length===3&&(Kt=pn.shape[2],un=!0)):("radius"in pn&&(bt=Ut=pn.radius),"width"in pn&&(bt=pn.width),"height"in pn&&(Ut=pn.height),"channels"in pn&&(Kt=pn.channels,un=!0)),Xt.width=0|bt,Xt.height=0|Ut,Xt.channels=0|Kt,bt=!1,"format"in pn&&(bt=pn.format,Ut=Xt.internalformat=Rn[bt],Xt.format=En[Ut],bt in _n&&!("type"in pn)&&(Xt.type=_n[bt]),bt in In&&(Xt.compressed=!0),bt=!0),!un&&bt?Xt.channels=De[Xt.format]:un&&!bt&&Xt.channels!==Oe[Xt.format]&&(Xt.format=Xt.internalformat=Oe[Xt.channels])}}function gt(Xt){Be.pixelStorei(37440,Xt.flipY),Be.pixelStorei(37441,Xt.premultiplyAlpha),Be.pixelStorei(37443,Xt.colorSpace),Be.pixelStorei(3317,Xt.unpackAlignment)}function ut(){We.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(Xt,pn){var bt=null;if(m(pn)?bt=pn:pn&&(pt(Xt,pn),"x"in pn&&(Xt.xOffset=0|pn.x),"y"in pn&&(Xt.yOffset=0|pn.y),m(pn.data)&&(bt=pn.data)),pn.copy){var Ut=Re.viewportWidth,Kt=Re.viewportHeight;Xt.width=Xt.width||Ut-Xt.xOffset,Xt.height=Xt.height||Kt-Xt.yOffset,Xt.needsCopy=!0}else if(bt){if(xe(bt))Xt.channels=Xt.channels||4,Xt.data=bt,"type"in pn||Xt.type!==5121||(Xt.type=0|ge[Object.prototype.toString.call(bt)]);else if(g(bt)){switch(Xt.channels=Xt.channels||4,Kt=(Ut=bt).length,Xt.type){case 5121:case 5123:case 5125:case 5126:(Kt=he.allocType(Xt.type,Kt)).set(Ut),Xt.data=Kt;break;case 36193:Xt.data=c(Ut)}Xt.alignment=1,Xt.needsFree=!0}else if(t(bt)){Ut=bt.data,Array.isArray(Ut)||Xt.type!==5121||(Xt.type=0|ge[Object.prototype.toString.call(Ut)]),Kt=bt.shape;var un,cn,vn,tn,Vt=bt.stride;Kt.length===3?(vn=Kt[2],tn=Vt[2]):tn=vn=1,un=Kt[0],cn=Kt[1],Kt=Vt[0],Vt=Vt[1],Xt.alignment=1,Xt.width=un,Xt.height=cn,Xt.channels=vn,Xt.format=Xt.internalformat=Oe[vn],Xt.needsFree=!0,un=tn,bt=bt.offset,vn=Xt.width,tn=Xt.height,cn=Xt.channels;for(var Gt=he.allocType(Xt.type===36193?5126:Xt.type,vn*tn*cn),nn=0,sn=0;sn<tn;++sn)for(var wn=0;wn<vn;++wn)for(var An=0;An<cn;++An)Gt[nn++]=Ut[Kt*wn+Vt*sn+un*An+bt];_(Xt,Gt)}else if(y(bt)===de||y(bt)===me||y(bt)===Me)y(bt)===de||y(bt)===me?Xt.element=bt:Xt.element=bt.canvas,Xt.width=Xt.element.width,Xt.height=Xt.element.height,Xt.channels=4;else if(y(bt)===ze)Xt.element=bt,Xt.width=bt.width,Xt.height=bt.height,Xt.channels=4;else if(y(bt)===Pe)Xt.element=bt,Xt.width=bt.naturalWidth,Xt.height=bt.naturalHeight,Xt.channels=4;else if(y(bt)===Ne)Xt.element=bt,Xt.width=bt.videoWidth,Xt.height=bt.videoHeight,Xt.channels=4;else if(v(bt)){for(Ut=Xt.width||bt[0].length,Kt=Xt.height||bt.length,Vt=Xt.channels,Vt=x(bt[0][0])?Vt||bt[0][0].length:Vt||1,un=ve.shape(bt),vn=1,tn=0;tn<un.length;++tn)vn*=un[tn];vn=he.allocType(Xt.type===36193?5126:Xt.type,vn),ve.flatten(bt,un,"",vn),_(Xt,vn),Xt.alignment=1,Xt.width=Ut,Xt.height=Kt,Xt.channels=Vt,Xt.format=Xt.internalformat=Oe[Vt],Xt.needsFree=!0}}else Xt.width=Xt.width||1,Xt.height=Xt.height||1,Xt.channels=Xt.channels||4}function yt(Xt,pn,bt,Ut,Kt){var un=Xt.element,cn=Xt.data,vn=Xt.internalformat,tn=Xt.format,Vt=Xt.type,Gt=Xt.width,nn=Xt.height;gt(Xt),un?Be.texSubImage2D(pn,Kt,bt,Ut,tn,Vt,un):Xt.compressed?Be.compressedTexSubImage2D(pn,Kt,bt,Ut,vn,Gt,nn,cn):Xt.needsCopy?(tt(),Be.copyTexSubImage2D(pn,Kt,bt,Ut,Xt.xOffset,Xt.yOffset,Gt,nn)):Be.texSubImage2D(pn,Kt,bt,Ut,Gt,nn,tn,Vt,cn)}function Mt(){return gn.pop()||new ut}function Lt(Xt){Xt.needsFree&&he.freeType(Xt.data),ut.call(Xt),gn.push(Xt)}function Ct(){We.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function It(Xt,pn,bt){var Ut=Xt.images[0]=Mt();Xt.mipmask=1,Ut.width=Xt.width=pn,Ut.height=Xt.height=bt,Ut.channels=Xt.channels=4}function Wt(Xt,pn){var bt=null;if(m(pn))ct(bt=Xt.images[0]=Mt(),Xt),kt(bt,pn),Xt.mipmask=1;else if(pt(Xt,pn),Array.isArray(pn.mipmap))for(var Ut=pn.mipmap,Kt=0;Kt<Ut.length;++Kt)ct(bt=Xt.images[Kt]=Mt(),Xt),bt.width>>=Kt,bt.height>>=Kt,kt(bt,Ut[Kt]),Xt.mipmask|=1<<Kt;else ct(bt=Xt.images[0]=Mt(),Xt),kt(bt,pn),Xt.mipmask=1;ct(Xt,Xt.images[0])}function Nt(Xt,pn){for(var bt=Xt.images,Ut=0;Ut<bt.length&&bt[Ut];++Ut){var Kt=bt[Ut],un=pn,cn=Ut,vn=Kt.element,tn=Kt.data,Vt=Kt.internalformat,Gt=Kt.format,nn=Kt.type,sn=Kt.width,wn=Kt.height;gt(Kt),vn?Be.texImage2D(un,cn,Gt,Gt,nn,vn):Kt.compressed?Be.compressedTexImage2D(un,cn,Vt,sn,wn,0,tn):Kt.needsCopy?(tt(),Be.copyTexImage2D(un,cn,Gt,Kt.xOffset,Kt.yOffset,sn,wn,0)):Be.texImage2D(un,cn,Gt,sn,wn,0,Gt,nn,tn||null)}}function Bt(){var Xt=Ln.pop()||new Ct;We.call(Xt);for(var pn=Xt.mipmask=0;16>pn;++pn)Xt.images[pn]=null;return Xt}function Ht(Xt){for(var pn=Xt.images,bt=0;bt<pn.length;++bt)pn[bt]&&Lt(pn[bt]),pn[bt]=null;Ln.push(Xt)}function Qt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Cn(Xt,pn){"min"in pn&&(Xt.minFilter=Pn[pn.min],0<=Se.indexOf(Xt.minFilter)&&!("faces"in pn)&&(Xt.genMipmaps=!0)),"mag"in pn&&(Xt.magFilter=xn[pn.mag]);var bt=Xt.wrapS,Ut=Xt.wrapT;if("wrap"in pn){var Kt=pn.wrap;typeof Kt=="string"?bt=Ut=mn[Kt]:Array.isArray(Kt)&&(bt=mn[Kt[0]],Ut=mn[Kt[1]])}else"wrapS"in pn&&(bt=mn[pn.wrapS]),"wrapT"in pn&&(Ut=mn[pn.wrapT]);if(Xt.wrapS=bt,Xt.wrapT=Ut,"anisotropic"in pn&&(Xt.anisotropic=pn.anisotropic),"mipmap"in pn){switch(bt=!1,typeof pn.mipmap){case"string":Xt.mipmapHint=ln[pn.mipmap],bt=Xt.genMipmaps=!0;break;case"boolean":bt=Xt.genMipmaps=pn.mipmap;break;case"object":Xt.genMipmaps=!1,bt=!0}!bt||"min"in pn||(Xt.minFilter=9984)}}function Tn(Xt,pn){Be.texParameteri(pn,10241,Xt.minFilter),Be.texParameteri(pn,10240,Xt.magFilter),Be.texParameteri(pn,10242,Xt.wrapS),Be.texParameteri(pn,10243,Xt.wrapT),Ge.ext_texture_filter_anisotropic&&Be.texParameteri(pn,34046,Xt.anisotropic),Xt.genMipmaps&&(Be.hint(33170,Xt.mipmapHint),Be.generateMipmap(pn))}function hn(Xt){We.call(this),this.mipmask=0,this.internalformat=6408,this.id=Hn++,this.refCount=1,this.target=Xt,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qt,nt.profile&&(this.stats={size:0})}function Zt(Xt){Be.activeTexture(33984),Be.bindTexture(Xt.target,Xt.texture)}function an(){var Xt=fr[0];Xt?Be.bindTexture(Xt.target,Xt.texture):Be.bindTexture(3553,null)}function $t(Xt){var pn=Xt.texture,bt=Xt.unit,Ut=Xt.target;0<=bt&&(Be.activeTexture(33984+bt),Be.bindTexture(Ut,null),fr[bt]=null),Be.deleteTexture(pn),Xt.texture=null,Xt.params=null,Xt.pixels=null,Xt.refCount=0,delete Nn[Xt.id],Fe.textureCount--}var ln={"don't care":4352,"dont care":4352,nice:4354,fast:4353},mn={repeat:10497,clamp:33071,mirror:33648},xn={nearest:9728,linear:9729},Pn=Z({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},xn),Mn={none:0,browser:37444},_n={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Rn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},In={};Ge.ext_srgb&&(Rn.srgb=35904,Rn.srgba=35906),Ge.oes_texture_float&&(_n.float32=_n.float=5126),Ge.oes_texture_half_float&&(_n.float16=_n["half float"]=36193),Ge.webgl_depth_texture&&(Z(Rn,{depth:6402,"depth stencil":34041}),Z(_n,{uint16:5123,uint32:5125,"depth stencil":34042})),Ge.webgl_compressed_texture_s3tc&&Z(In,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ge.webgl_compressed_texture_atc&&Z(In,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ge.webgl_compressed_texture_pvrtc&&Z(In,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ge.webgl_compressed_texture_etc1&&(In["rgb etc1"]=36196);var Vn=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(In).forEach(function(Xt){var pn=In[Xt];0<=Vn.indexOf(pn)&&(Rn[Xt]=pn)});var tr=Object.keys(Rn);it.textureFormats=tr;var er=[];Object.keys(Rn).forEach(function(Xt){er[Rn[Xt]]=Xt});var Wn=[];Object.keys(_n).forEach(function(Xt){Wn[_n[Xt]]=Xt});var or=[];Object.keys(xn).forEach(function(Xt){or[xn[Xt]]=Xt});var Jt=[];Object.keys(Pn).forEach(function(Xt){Jt[Pn[Xt]]=Xt});var en=[];Object.keys(mn).forEach(function(Xt){en[mn[Xt]]=Xt});var En=tr.reduce(function(Xt,pn){var bt=Rn[pn];return bt===6409||bt===6406||bt===6409||bt===6410||bt===6402||bt===34041||Ge.ext_srgb&&(bt===35904||bt===35906)?Xt[bt]=bt:bt===32855||0<=pn.indexOf("rgba")?Xt[bt]=6408:Xt[bt]=6407,Xt},{}),gn=[],Ln=[],Hn=0,Nn={},Yn=it.maxTextureUnits,fr=Array(Yn).map(function(){return null});return Z(hn.prototype,{bind:function(){this.bindCount+=1;var Xt=this.unit;if(0>Xt){for(var pn=0;pn<Yn;++pn){var bt=fr[pn];if(bt){if(0<bt.bindCount)continue;bt.unit=-1}fr[pn]=this,Xt=pn;break}nt.profile&&Fe.maxTextureUnits<Xt+1&&(Fe.maxTextureUnits=Xt+1),this.unit=Xt,Be.activeTexture(33984+Xt),Be.bindTexture(this.target,this.texture)}return Xt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&$t(this)}}),nt.profile&&(Fe.getTotalTextureSize=function(){var Xt=0;return Object.keys(Nn).forEach(function(pn){Xt+=Nn[pn].stats.size}),Xt}),{create2D:function(Xt,pn){function bt(Kt,un){var cn=Ut.texInfo;Qt.call(cn);var vn=Bt();return typeof Kt=="number"?It(vn,0|Kt,typeof un=="number"?0|un:0|Kt):Kt?(Cn(cn,Kt),Wt(vn,Kt)):It(vn,1,1),cn.genMipmaps&&(vn.mipmask=(vn.width<<1)-1),Ut.mipmask=vn.mipmask,ct(Ut,vn),Ut.internalformat=vn.internalformat,bt.width=vn.width,bt.height=vn.height,Zt(Ut),Nt(vn,3553),Tn(cn,3553),an(),Ht(vn),nt.profile&&(Ut.stats.size=f(Ut.internalformat,Ut.type,vn.width,vn.height,cn.genMipmaps,!1)),bt.format=er[Ut.internalformat],bt.type=Wn[Ut.type],bt.mag=or[cn.magFilter],bt.min=Jt[cn.minFilter],bt.wrapS=en[cn.wrapS],bt.wrapT=en[cn.wrapT],bt}var Ut=new hn(3553);return Nn[Ut.id]=Ut,Fe.textureCount++,bt(Xt,pn),bt.subimage=function(Kt,un,cn,vn){un|=0,cn|=0,vn|=0;var tn=Mt();return ct(tn,Ut),tn.width=0,tn.height=0,kt(tn,Kt),tn.width=tn.width||(Ut.width>>vn)-un,tn.height=tn.height||(Ut.height>>vn)-cn,Zt(Ut),yt(tn,3553,un,cn,vn),an(),Lt(tn),bt},bt.resize=function(Kt,un){var cn=0|Kt,vn=0|un||cn;if(cn===Ut.width&&vn===Ut.height)return bt;bt.width=Ut.width=cn,bt.height=Ut.height=vn,Zt(Ut);for(var tn=0;Ut.mipmask>>tn;++tn){var Vt=cn>>tn,Gt=vn>>tn;if(!Vt||!Gt)break;Be.texImage2D(3553,tn,Ut.format,Vt,Gt,0,Ut.format,Ut.type,null)}return an(),nt.profile&&(Ut.stats.size=f(Ut.internalformat,Ut.type,cn,vn,!1,!1)),bt},bt._reglType="texture2d",bt._texture=Ut,nt.profile&&(bt.stats=Ut.stats),bt.destroy=function(){Ut.decRef()},bt},createCube:function(Xt,pn,bt,Ut,Kt,un){function cn(Vt,Gt,nn,sn,wn,An){var zn,Fn=vn.texInfo;for(Qt.call(Fn),zn=0;6>zn;++zn)tn[zn]=Bt();if(typeof Vt!="number"&&Vt){if(typeof Vt=="object")if(Gt)Wt(tn[0],Vt),Wt(tn[1],Gt),Wt(tn[2],nn),Wt(tn[3],sn),Wt(tn[4],wn),Wt(tn[5],An);else if(Cn(Fn,Vt),pt(vn,Vt),"faces"in Vt)for(Vt=Vt.faces,zn=0;6>zn;++zn)ct(tn[zn],vn),Wt(tn[zn],Vt[zn]);else for(zn=0;6>zn;++zn)Wt(tn[zn],Vt)}else for(Vt=0|Vt||1,zn=0;6>zn;++zn)It(tn[zn],Vt,Vt);for(ct(vn,tn[0]),vn.mipmask=Fn.genMipmaps?(tn[0].width<<1)-1:tn[0].mipmask,vn.internalformat=tn[0].internalformat,cn.width=tn[0].width,cn.height=tn[0].height,Zt(vn),zn=0;6>zn;++zn)Nt(tn[zn],34069+zn);for(Tn(Fn,34067),an(),nt.profile&&(vn.stats.size=f(vn.internalformat,vn.type,cn.width,cn.height,Fn.genMipmaps,!0)),cn.format=er[vn.internalformat],cn.type=Wn[vn.type],cn.mag=or[Fn.magFilter],cn.min=Jt[Fn.minFilter],cn.wrapS=en[Fn.wrapS],cn.wrapT=en[Fn.wrapT],zn=0;6>zn;++zn)Ht(tn[zn]);return cn}var vn=new hn(34067);Nn[vn.id]=vn,Fe.cubeCount++;var tn=Array(6);return cn(Xt,pn,bt,Ut,Kt,un),cn.subimage=function(Vt,Gt,nn,sn,wn){nn|=0,sn|=0,wn|=0;var An=Mt();return ct(An,vn),An.width=0,An.height=0,kt(An,Gt),An.width=An.width||(vn.width>>wn)-nn,An.height=An.height||(vn.height>>wn)-sn,Zt(vn),yt(An,34069+Vt,nn,sn,wn),an(),Lt(An),cn},cn.resize=function(Vt){if((Vt|=0)!==vn.width){cn.width=vn.width=Vt,cn.height=vn.height=Vt,Zt(vn);for(var Gt=0;6>Gt;++Gt)for(var nn=0;vn.mipmask>>nn;++nn)Be.texImage2D(34069+Gt,nn,vn.format,Vt>>nn,Vt>>nn,0,vn.format,vn.type,null);return an(),nt.profile&&(vn.stats.size=f(vn.internalformat,vn.type,cn.width,cn.height,!1,!0)),cn}},cn._reglType="textureCube",cn._texture=vn,nt.profile&&(cn.stats=vn.stats),cn.destroy=function(){vn.decRef()},cn},clear:function(){for(var Xt=0;Xt<Yn;++Xt)Be.activeTexture(33984+Xt),Be.bindTexture(3553,null),fr[Xt]=null;be(Nn).forEach($t),Fe.cubeCount=0,Fe.textureCount=0},getTexture:function(Xt){return null},restore:function(){for(var Xt=0;Xt<Yn;++Xt){var pn=fr[Xt];pn&&(pn.bindCount=0,pn.unit=-1,fr[Xt]=null)}be(Nn).forEach(function(bt){bt.texture=Be.createTexture(),Be.bindTexture(bt.target,bt.texture);for(var Ut=0;32>Ut;++Ut)if((bt.mipmask&1<<Ut)!=0)if(bt.target===3553)Be.texImage2D(3553,Ut,bt.internalformat,bt.width>>Ut,bt.height>>Ut,0,bt.internalformat,bt.type,null);else for(var Kt=0;6>Kt;++Kt)Be.texImage2D(34069+Kt,Ut,bt.internalformat,bt.width>>Ut,bt.height>>Ut,0,bt.internalformat,bt.type,null);Tn(bt.texInfo,bt.target)})},refresh:function(){for(var Xt=0;Xt<Yn;++Xt){var pn=fr[Xt];pn&&(pn.bindCount=0,pn.unit=-1,fr[Xt]=null),Be.activeTexture(33984+Xt),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}function w(Be,Ge,it,tt,Re,Fe){function nt(hn,Zt,an){this.target=hn,this.texture=Zt,this.renderbuffer=an;var $t=hn=0;Zt?(hn=Zt.width,$t=Zt.height):an&&(hn=an.width,$t=an.height),this.width=hn,this.height=$t}function We(hn){hn&&(hn.texture&&hn.texture._texture.decRef(),hn.renderbuffer&&hn.renderbuffer._renderbuffer.decRef())}function ct(hn,Zt,an){hn&&(hn.texture?hn.texture._texture.refCount+=1:hn.renderbuffer._renderbuffer.refCount+=1)}function pt(hn,Zt){Zt&&(Zt.texture?Be.framebufferTexture2D(36160,hn,Zt.target,Zt.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,hn,36161,Zt.renderbuffer._renderbuffer.renderbuffer))}function gt(hn){var Zt=3553,an=null,$t=null,ln=hn;return typeof hn=="object"&&(ln=hn.data,"target"in hn&&(Zt=0|hn.target)),(hn=ln._reglType)==="texture2d"||hn==="textureCube"?an=ln:hn==="renderbuffer"&&($t=ln,Zt=36161),new nt(Zt,an,$t)}function ut(hn,Zt,an,$t,ln){return an?((hn=tt.create2D({width:hn,height:Zt,format:$t,type:ln}))._texture.refCount=0,new nt(3553,hn,null)):((hn=Re.create({width:hn,height:Zt,format:$t}))._renderbuffer.refCount=0,new nt(36161,null,hn))}function kt(hn){return hn&&(hn.texture||hn.renderbuffer)}function yt(hn,Zt,an){hn&&(hn.texture?hn.texture.resize(Zt,an):hn.renderbuffer&&hn.renderbuffer.resize(Zt,an),hn.width=Zt,hn.height=an)}function Mt(){this.id=Cn++,Tn[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Lt(hn){hn.colorAttachments.forEach(We),We(hn.depthAttachment),We(hn.stencilAttachment),We(hn.depthStencilAttachment)}function Ct(hn){Be.deleteFramebuffer(hn.framebuffer),hn.framebuffer=null,Fe.framebufferCount--,delete Tn[hn.id]}function It(hn){var Zt;Be.bindFramebuffer(36160,hn.framebuffer);var an=hn.colorAttachments;for(Zt=0;Zt<an.length;++Zt)pt(36064+Zt,an[Zt]);for(Zt=an.length;Zt<it.maxColorAttachments;++Zt)Be.framebufferTexture2D(36160,36064+Zt,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),pt(36096,hn.depthAttachment),pt(36128,hn.stencilAttachment),pt(33306,hn.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,Nt.next?Nt.next.framebuffer:null),Nt.cur=Nt.next,Be.getError()}function Wt(hn,Zt){function an(ln,mn){var xn,Pn=0,Mn=0,_n=!0,Rn=!0;xn=null;var In=!0,Vn="rgba",tr="uint8",er=1,Wn=null,or=null,Jt=null,en=!1;typeof ln=="number"?(Pn=0|ln,Mn=0|mn||Pn):ln?("shape"in ln?(Pn=(Mn=ln.shape)[0],Mn=Mn[1]):("radius"in ln&&(Pn=Mn=ln.radius),"width"in ln&&(Pn=ln.width),"height"in ln&&(Mn=ln.height)),("color"in ln||"colors"in ln)&&(xn=ln.color||ln.colors,Array.isArray(xn)),xn||("colorCount"in ln&&(er=0|ln.colorCount),"colorTexture"in ln&&(In=!!ln.colorTexture,Vn="rgba4"),"colorType"in ln&&(tr=ln.colorType,!In)&&(tr==="half float"||tr==="float16"?Vn="rgba16f":tr!=="float"&&tr!=="float32"||(Vn="rgba32f")),"colorFormat"in ln&&(Vn=ln.colorFormat,0<=Bt.indexOf(Vn)?In=!0:0<=Ht.indexOf(Vn)&&(In=!1))),("depthTexture"in ln||"depthStencilTexture"in ln)&&(en=!(!ln.depthTexture&&!ln.depthStencilTexture)),"depth"in ln&&(typeof ln.depth=="boolean"?_n=ln.depth:(Wn=ln.depth,Rn=!1)),"stencil"in ln&&(typeof ln.stencil=="boolean"?Rn=ln.stencil:(or=ln.stencil,_n=!1)),"depthStencil"in ln&&(typeof ln.depthStencil=="boolean"?_n=Rn=ln.depthStencil:(Jt=ln.depthStencil,Rn=_n=!1))):Pn=Mn=1;var En=null,gn=null,Ln=null,Hn=null;if(Array.isArray(xn))En=xn.map(gt);else if(xn)En=[gt(xn)];else for(En=Array(er),xn=0;xn<er;++xn)En[xn]=ut(Pn,Mn,In,Vn,tr);for(Pn=Pn||En[0].width,Mn=Mn||En[0].height,Wn?gn=gt(Wn):_n&&!Rn&&(gn=ut(Pn,Mn,en,"depth","uint32")),or?Ln=gt(or):Rn&&!_n&&(Ln=ut(Pn,Mn,!1,"stencil","uint8")),Jt?Hn=gt(Jt):!Wn&&!or&&Rn&&_n&&(Hn=ut(Pn,Mn,en,"depth stencil","depth stencil")),_n=null,xn=0;xn<En.length;++xn)ct(En[xn]),En[xn]&&En[xn].texture&&(Rn=vt[En[xn].texture._texture.format]*ht[En[xn].texture._texture.type],_n===null&&(_n=Rn));return ct(gn),ct(Ln),ct(Hn),Lt($t),$t.width=Pn,$t.height=Mn,$t.colorAttachments=En,$t.depthAttachment=gn,$t.stencilAttachment=Ln,$t.depthStencilAttachment=Hn,an.color=En.map(kt),an.depth=kt(gn),an.stencil=kt(Ln),an.depthStencil=kt(Hn),an.width=$t.width,an.height=$t.height,It($t),an}var $t=new Mt;return Fe.framebufferCount++,an(hn,Zt),Z(an,{resize:function(ln,mn){var xn=Math.max(0|ln,1),Pn=Math.max(0|mn||xn,1);if(xn===$t.width&&Pn===$t.height)return an;for(var Mn=$t.colorAttachments,_n=0;_n<Mn.length;++_n)yt(Mn[_n],xn,Pn);return yt($t.depthAttachment,xn,Pn),yt($t.stencilAttachment,xn,Pn),yt($t.depthStencilAttachment,xn,Pn),$t.width=an.width=xn,$t.height=an.height=Pn,It($t),an},_reglType:"framebuffer",_framebuffer:$t,destroy:function(){Ct($t),Lt($t)},use:function(ln){Nt.setFBO({framebuffer:an},ln)}})}var Nt={cur:null,next:null,dirty:!1,setFBO:null},Bt=["rgba"],Ht=["rgba4","rgb565","rgb5 a1"];Ge.ext_srgb&&Ht.push("srgba"),Ge.ext_color_buffer_half_float&&Ht.push("rgba16f","rgb16f"),Ge.webgl_color_buffer_float&&Ht.push("rgba32f");var Qt=["uint8"];Ge.oes_texture_half_float&&Qt.push("half float","float16"),Ge.oes_texture_float&&Qt.push("float","float32");var Cn=0,Tn={};return Z(Nt,{getFramebuffer:function(hn){return typeof hn=="function"&&hn._reglType==="framebuffer"&&(hn=hn._framebuffer)instanceof Mt?hn:null},create:Wt,createCube:function(hn){function Zt($t){var ln,mn={color:null},xn=0,Pn=null;ln="rgba";var Mn="uint8",_n=1;if(typeof $t=="number"?xn=0|$t:$t?("shape"in $t?xn=$t.shape[0]:("radius"in $t&&(xn=0|$t.radius),"width"in $t?xn=0|$t.width:"height"in $t&&(xn=0|$t.height)),("color"in $t||"colors"in $t)&&(Pn=$t.color||$t.colors,Array.isArray(Pn)),Pn||("colorCount"in $t&&(_n=0|$t.colorCount),"colorType"in $t&&(Mn=$t.colorType),"colorFormat"in $t&&(ln=$t.colorFormat)),"depth"in $t&&(mn.depth=$t.depth),"stencil"in $t&&(mn.stencil=$t.stencil),"depthStencil"in $t&&(mn.depthStencil=$t.depthStencil)):xn=1,Pn)if(Array.isArray(Pn))for($t=[],ln=0;ln<Pn.length;++ln)$t[ln]=Pn[ln];else $t=[Pn];else for($t=Array(_n),Pn={radius:xn,format:ln,type:Mn},ln=0;ln<_n;++ln)$t[ln]=tt.createCube(Pn);for(mn.color=Array($t.length),ln=0;ln<$t.length;++ln)_n=$t[ln],xn=xn||_n.width,mn.color[ln]={target:34069,data:$t[ln]};for(ln=0;6>ln;++ln){for(_n=0;_n<$t.length;++_n)mn.color[_n].target=34069+ln;0<ln&&(mn.depth=an[0].depth,mn.stencil=an[0].stencil,mn.depthStencil=an[0].depthStencil),an[ln]?an[ln](mn):an[ln]=Wt(mn)}return Z(Zt,{width:xn,height:xn,color:$t})}var an=Array(6);return Zt(hn),Z(Zt,{faces:an,resize:function($t){var ln=0|$t;if(ln===Zt.width)return Zt;var mn=Zt.color;for($t=0;$t<mn.length;++$t)mn[$t].resize(ln);for($t=0;6>$t;++$t)an[$t].resize(ln);return Zt.width=Zt.height=ln,Zt},_reglType:"framebufferCube",destroy:function(){an.forEach(function($t){$t.destroy()})}})},clear:function(){be(Tn).forEach(Ct)},restore:function(){Nt.cur=null,Nt.next=null,Nt.dirty=!0,be(Tn).forEach(function(hn){hn.framebuffer=Be.createFramebuffer(),It(hn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(Be,Ge,it,tt,Re,Fe,nt){function We(){this.id=++gt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var yt=Ge.oes_vertex_array_object;this.vao=yt?yt.createVertexArrayOES():null,ut[this.id]=this,this.buffers=[]}var ct=it.maxAttributes,pt=Array(ct);for(it=0;it<ct;++it)pt[it]=new E;var gt=0,ut={},kt={Record:E,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:Ge.oes_vertex_array_object?function(){Ge.oes_vertex_array_object&&be(ut).forEach(function(yt){yt.refresh()})}:function(){},createVAO:function(yt){function Mt(Ct){var It;Array.isArray(Ct)?(It=Ct,Lt.elements&&Lt.ownsElements&&Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1,Lt.offset=0,Lt.count=0,Lt.instances=-1,Lt.primitive=4):(Ct.elements?(It=Ct.elements,Lt.ownsElements?(typeof It=="function"&&It._reglType==="elements"?Lt.elements.destroy():Lt.elements(It),Lt.ownsElements=!1):Fe.getElements(Ct.elements)?(Lt.elements=Ct.elements,Lt.ownsElements=!1):(Lt.elements=Fe.create(Ct.elements),Lt.ownsElements=!0)):(Lt.elements=null,Lt.ownsElements=!1),It=Ct.attributes,Lt.offset=0,Lt.count=-1,Lt.instances=-1,Lt.primitive=4,Lt.elements&&(Lt.count=Lt.elements._elements.vertCount,Lt.primitive=Lt.elements._elements.primType),"offset"in Ct&&(Lt.offset=0|Ct.offset),"count"in Ct&&(Lt.count=0|Ct.count),"instances"in Ct&&(Lt.instances=0|Ct.instances),"primitive"in Ct&&(Lt.primitive=Ee[Ct.primitive])),Ct={};var Wt=Lt.attributes;Wt.length=It.length;for(var Nt=0;Nt<It.length;++Nt){var Bt,Ht=It[Nt],Qt=Wt[Nt]=new E,Cn=Ht.data||Ht;Array.isArray(Cn)||xe(Cn)||t(Cn)?(Lt.buffers[Nt]&&(Bt=Lt.buffers[Nt],xe(Cn)&&Bt._buffer.byteLength>=Cn.byteLength?Bt.subdata(Cn):(Bt.destroy(),Lt.buffers[Nt]=null)),Lt.buffers[Nt]||(Bt=Lt.buffers[Nt]=Re.create(Ht,34962,!1,!0)),Qt.buffer=Re.getBuffer(Bt),Qt.size=0|Qt.buffer.dimension,Qt.normalized=!1,Qt.type=Qt.buffer.dtype,Qt.offset=0,Qt.stride=0,Qt.divisor=0,Qt.state=1,Ct[Nt]=1):Re.getBuffer(Ht)?(Qt.buffer=Re.getBuffer(Ht),Qt.size=0|Qt.buffer.dimension,Qt.normalized=!1,Qt.type=Qt.buffer.dtype,Qt.offset=0,Qt.stride=0,Qt.divisor=0,Qt.state=1):Re.getBuffer(Ht.buffer)?(Qt.buffer=Re.getBuffer(Ht.buffer),Qt.size=0|(+Ht.size||Qt.buffer.dimension),Qt.normalized=!!Ht.normalized||!1,Qt.type="type"in Ht?we[Ht.type]:Qt.buffer.dtype,Qt.offset=0|(Ht.offset||0),Qt.stride=0|(Ht.stride||0),Qt.divisor=0|(Ht.divisor||0),Qt.state=1):"x"in Ht&&(Qt.x=+Ht.x||0,Qt.y=+Ht.y||0,Qt.z=+Ht.z||0,Qt.w=+Ht.w||0,Qt.state=2)}for(Bt=0;Bt<Lt.buffers.length;++Bt)!Ct[Bt]&&Lt.buffers[Bt]&&(Lt.buffers[Bt].destroy(),Lt.buffers[Bt]=null);return Lt.refresh(),Mt}var Lt=new We;return tt.vaoCount+=1,Mt.destroy=function(){for(var Ct=0;Ct<Lt.buffers.length;++Ct)Lt.buffers[Ct]&&Lt.buffers[Ct].destroy();Lt.buffers.length=0,Lt.ownsElements&&(Lt.elements.destroy(),Lt.elements=null,Lt.ownsElements=!1),Lt.destroy()},Mt._vao=Lt,Mt._reglType="vao",Mt(yt)},getVAO:function(yt){return typeof yt=="function"&&yt._vao?yt._vao:null},destroyBuffer:function(yt){for(var Mt=0;Mt<pt.length;++Mt){var Lt=pt[Mt];Lt.buffer===yt&&(Be.disableVertexAttribArray(Mt),Lt.buffer=null)}},setVAO:Ge.oes_vertex_array_object?function(yt){if(yt!==kt.currentVAO){var Mt=Ge.oes_vertex_array_object;yt?Mt.bindVertexArrayOES(yt.vao):Mt.bindVertexArrayOES(null),kt.currentVAO=yt}}:function(yt){if(yt!==kt.currentVAO){if(yt)yt.bindAttrs();else{for(var Mt=Ge.angle_instanced_arrays,Lt=0;Lt<pt.length;++Lt){var Ct=pt[Lt];Ct.buffer?(Be.enableVertexAttribArray(Lt),Ct.buffer.bind(),Be.vertexAttribPointer(Lt,Ct.size,Ct.type,Ct.normalized,Ct.stride,Ct.offfset),Mt&&Ct.divisor&&Mt.vertexAttribDivisorANGLE(Lt,Ct.divisor)):(Be.disableVertexAttribArray(Lt),Be.vertexAttrib4f(Lt,Ct.x,Ct.y,Ct.z,Ct.w))}nt.elements?Be.bindBuffer(34963,nt.elements.buffer.buffer):Be.bindBuffer(34963,null)}kt.currentVAO=yt}},clear:Ge.oes_vertex_array_object?function(){be(ut).forEach(function(yt){yt.destroy()})}:function(){}};return We.prototype.bindAttrs=function(){for(var yt=Ge.angle_instanced_arrays,Mt=this.attributes,Lt=0;Lt<Mt.length;++Lt){var Ct=Mt[Lt];Ct.buffer?(Be.enableVertexAttribArray(Lt),Be.bindBuffer(34962,Ct.buffer.buffer),Be.vertexAttribPointer(Lt,Ct.size,Ct.type,Ct.normalized,Ct.stride,Ct.offset),yt&&Ct.divisor&&yt.vertexAttribDivisorANGLE(Lt,Ct.divisor)):(Be.disableVertexAttribArray(Lt),Be.vertexAttrib4f(Lt,Ct.x,Ct.y,Ct.z,Ct.w))}for(yt=Mt.length;yt<ct;++yt)Be.disableVertexAttribArray(yt);(yt=Fe.getElements(this.elements))?Be.bindBuffer(34963,yt.buffer.buffer):Be.bindBuffer(34963,null)},We.prototype.refresh=function(){var yt=Ge.oes_vertex_array_object;yt&&(yt.bindVertexArrayOES(this.vao),this.bindAttrs(),kt.currentVAO=null,yt.bindVertexArrayOES(null))},We.prototype.destroy=function(){if(this.vao){var yt=Ge.oes_vertex_array_object;this===kt.currentVAO&&(kt.currentVAO=null,yt.bindVertexArrayOES(null)),yt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ut[this.id]&&(delete ut[this.id],--tt.vaoCount)},kt}function C(Be,Ge,it,tt){function Re(Mt,Lt,Ct,It){this.name=Mt,this.id=Lt,this.location=Ct,this.info=It}function Fe(Mt,Lt){for(var Ct=0;Ct<Mt.length;++Ct)if(Mt[Ct].id===Lt.id)return void(Mt[Ct].location=Lt.location);Mt.push(Lt)}function nt(Mt,Lt,Ct){if(!(Wt=(Ct=Mt===35632?pt:gt)[Lt])){var It=Ge.str(Lt),Wt=Be.createShader(Mt);Be.shaderSource(Wt,It),Be.compileShader(Wt),Ct[Lt]=Wt}return Wt}function We(Mt,Lt){this.id=yt++,this.fragId=Mt,this.vertId=Lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,tt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ct(Mt,Lt,Ct){var It;It=nt(35632,Mt.fragId);var Wt=nt(35633,Mt.vertId);if(Lt=Mt.program=Be.createProgram(),Be.attachShader(Lt,It),Be.attachShader(Lt,Wt),Ct)for(It=0;It<Ct.length;++It)Wt=Ct[It],Be.bindAttribLocation(Lt,Wt[0],Wt[1]);Be.linkProgram(Lt),Wt=Be.getProgramParameter(Lt,35718),tt.profile&&(Mt.stats.uniformsCount=Wt);var Nt=Mt.uniforms;for(It=0;It<Wt;++It)if(Ct=Be.getActiveUniform(Lt,It))if(1<Ct.size)for(var Bt=0;Bt<Ct.size;++Bt){var Ht=Ct.name.replace("[0]","["+Bt+"]");Fe(Nt,new Re(Ht,Ge.id(Ht),Be.getUniformLocation(Lt,Ht),Ct))}else Fe(Nt,new Re(Ct.name,Ge.id(Ct.name),Be.getUniformLocation(Lt,Ct.name),Ct));for(Wt=Be.getProgramParameter(Lt,35721),tt.profile&&(Mt.stats.attributesCount=Wt),Mt=Mt.attributes,It=0;It<Wt;++It)(Ct=Be.getActiveAttrib(Lt,It))&&Fe(Mt,new Re(Ct.name,Ge.id(Ct.name),Be.getAttribLocation(Lt,Ct.name),Ct))}var pt={},gt={},ut={},kt=[],yt=0;return tt.profile&&(it.getMaxUniformsCount=function(){var Mt=0;return kt.forEach(function(Lt){Lt.stats.uniformsCount>Mt&&(Mt=Lt.stats.uniformsCount)}),Mt},it.getMaxAttributesCount=function(){var Mt=0;return kt.forEach(function(Lt){Lt.stats.attributesCount>Mt&&(Mt=Lt.stats.attributesCount)}),Mt}),{clear:function(){var Mt=Be.deleteShader.bind(Be);be(pt).forEach(Mt),pt={},be(gt).forEach(Mt),gt={},kt.forEach(function(Lt){Be.deleteProgram(Lt.program)}),kt.length=0,ut={},it.shaderCount=0},program:function(Mt,Lt,Ct,It){var Wt=ut[Lt];Wt||(Wt=ut[Lt]={});var Nt=Wt[Mt];if(Nt&&(Nt.refCount++,!It))return Nt;var Bt=new We(Lt,Mt);return it.shaderCount++,ct(Bt,Ct,It),Nt||(Wt[Mt]=Bt),kt.push(Bt),Z(Bt,{destroy:function(){if(Bt.refCount--,0>=Bt.refCount){Be.deleteProgram(Bt.program);var Ht=kt.indexOf(Bt);kt.splice(Ht,1),it.shaderCount--}0>=Wt[Bt.vertId].refCount&&(Be.deleteShader(gt[Bt.vertId]),delete gt[Bt.vertId],delete ut[Bt.fragId][Bt.vertId]),Object.keys(ut[Bt.fragId]).length||(Be.deleteShader(pt[Bt.fragId]),delete pt[Bt.fragId],delete ut[Bt.fragId])}})},restore:function(){pt={},gt={};for(var Mt=0;Mt<kt.length;++Mt)ct(kt[Mt],null,kt[Mt].attributes.map(function(Lt){return[Lt.location,Lt.name]}))},shader:nt,frag:-1,vert:-1}}function P(Be,Ge,it,tt,Re,Fe,nt){function We(ct){var pt;pt=Ge.next===null?5121:Ge.next.colorAttachments[0].texture._texture.type;var gt=0,ut=0,kt=tt.framebufferWidth,yt=tt.framebufferHeight,Mt=null;return xe(ct)?Mt=ct:ct&&(gt=0|ct.x,ut=0|ct.y,kt=0|(ct.width||tt.framebufferWidth-gt),yt=0|(ct.height||tt.framebufferHeight-ut),Mt=ct.data||null),it(),ct=kt*yt*4,Mt||(pt===5121?Mt=new Uint8Array(ct):pt===5126&&(Mt=Mt||new Float32Array(ct))),Be.pixelStorei(3333,4),Be.readPixels(gt,ut,kt,yt,6408,pt,Mt),Mt}return function(ct){return ct&&"framebuffer"in ct?function(pt){var gt;return Ge.setFBO({framebuffer:pt.framebuffer},function(){gt=We(pt)}),gt}(ct):We(ct)}}function R(Be,Ge){return Be>>>Ge|Be<<32-Ge}function j(Be,Ge){var it=(65535&Be)+(65535&Ge);return(Be>>16)+(Ge>>16)+(it>>16)<<16|65535&it}function D(Be){return Array.prototype.slice.call(Be)}function N(Be){return D(Be).join("")}function W(Be){function Ge(){var gt=[],ut=[];return Z(function(){gt.push.apply(gt,D(arguments))},{def:function(){var kt="v"+Re++;return ut.push(kt),0<arguments.length&&(gt.push(kt,"="),gt.push.apply(gt,D(arguments)),gt.push(";")),kt},toString:function(){return N([0<ut.length?"var "+ut.join(",")+";":"",N(gt)])}})}function it(){function gt(Lt,Ct){kt(Lt,Ct,"=",ut.def(Lt,Ct),";")}var ut=Ge(),kt=Ge(),yt=ut.toString,Mt=kt.toString;return Z(function(){ut.apply(ut,D(arguments))},{def:ut.def,entry:ut,exit:kt,save:gt,set:function(Lt,Ct,It){gt(Lt,Ct),ut(Lt,Ct,"=",It,";")},toString:function(){return yt()+Mt()}})}var tt=Be&&Be.cache,Re=0,Fe=[],nt=[],We=[],ct=Ge(),pt={};return{global:ct,link:function(gt,ut){var kt=ut&&ut.stable;if(!kt){for(var yt=0;yt<nt.length;++yt)if(nt[yt]===gt&&!We[yt])return Fe[yt]}return yt="g"+Re++,Fe.push(yt),nt.push(gt),We.push(kt),yt},block:Ge,proc:function(gt,ut){function kt(){var Ct="a"+yt.length;return yt.push(Ct),Ct}var yt=[];ut=ut||0;for(var Mt=0;Mt<ut;++Mt)kt();var Lt=(Mt=it()).toString;return pt[gt]=Z(Mt,{arg:kt,toString:function(){return N(["function(",yt.join(),"){",Lt(),"}"])}})},scope:it,cond:function(){var gt=N(arguments),ut=it(),kt=it(),yt=ut.toString,Mt=kt.toString;return Z(ut,{then:function(){return ut.apply(ut,D(arguments)),this},else:function(){return kt.apply(kt,D(arguments)),this},toString:function(){var Lt=Mt();return Lt&&(Lt="else{"+Lt+"}"),N(["if(",gt,"){",yt(),"}",Lt])}})},compile:function(){var gt=['"use strict";',ct,"return {"];Object.keys(pt).forEach(function(yt){gt.push('"',yt,'":',pt[yt].toString(),",")}),gt.push("}");var ut,kt=N(gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return tt&&(ut=function(yt){for(var Mt,Lt="",Ct=0;Ct<yt.length;Ct++)Mt=yt.charCodeAt(Ct),Lt+="0123456789abcdef".charAt(Mt>>>4&15)+"0123456789abcdef".charAt(15&Mt);return Lt}(function(yt){for(var Mt=Array(yt.length>>2),Lt=0;Lt<Mt.length;Lt++)Mt[Lt]=0;for(Lt=0;Lt<8*yt.length;Lt+=8)Mt[Lt>>5]|=(255&yt.charCodeAt(Lt/8))<<24-Lt%32;var Ct,It,Wt,Nt,Bt,Ht,Qt,Cn,Tn,hn,Zt,an=8*yt.length;for(yt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Lt=Array(64),Mt[an>>5]|=128<<24-an%32,Mt[15+(an+64>>9<<4)]=an,Cn=0;Cn<Mt.length;Cn+=16){for(an=yt[0],Ct=yt[1],It=yt[2],Wt=yt[3],Nt=yt[4],Bt=yt[5],Ht=yt[6],Qt=yt[7],Tn=0;64>Tn;Tn++){var $t;16>Tn?Lt[Tn]=Mt[Tn+Cn]:(hn=Tn,Zt=j(Zt=R(Zt=Lt[Tn-2],17)^R(Zt,19)^Zt>>>10,Lt[Tn-7]),$t=R($t=Lt[Tn-15],7)^R($t,18)^$t>>>3,Lt[hn]=j(j(Zt,$t),Lt[Tn-16])),hn=j(j(j(j(Qt,hn=R(hn=Nt,6)^R(hn,11)^R(hn,25)),Nt&Bt^~Nt&Ht),et[Tn]),Lt[Tn]),Zt=j(Qt=R(Qt=an,2)^R(Qt,13)^R(Qt,22),an&Ct^an&It^Ct&It),Qt=Ht,Ht=Bt,Bt=Nt,Nt=j(Wt,hn),Wt=It,It=Ct,Ct=an,an=j(hn,Zt)}yt[0]=j(an,yt[0]),yt[1]=j(Ct,yt[1]),yt[2]=j(It,yt[2]),yt[3]=j(Wt,yt[3]),yt[4]=j(Nt,yt[4]),yt[5]=j(Bt,yt[5]),yt[6]=j(Ht,yt[6]),yt[7]=j(Qt,yt[7])}for(Mt="",Lt=0;Lt<32*yt.length;Lt+=8)Mt+=String.fromCharCode(yt[Lt>>5]>>>24-Lt%32&255);return Mt}(function(yt){for(var Mt,Lt,Ct="",It=-1;++It<yt.length;)Mt=yt.charCodeAt(It),Lt=It+1<yt.length?yt.charCodeAt(It+1):0,55296<=Mt&&56319>=Mt&&56320<=Lt&&57343>=Lt&&(Mt=65536+((1023&Mt)<<10)+(1023&Lt),It++),127>=Mt?Ct+=String.fromCharCode(Mt):2047>=Mt?Ct+=String.fromCharCode(192|Mt>>>6&31,128|63&Mt):65535>=Mt?Ct+=String.fromCharCode(224|Mt>>>12&15,128|Mt>>>6&63,128|63&Mt):2097151>=Mt&&(Ct+=String.fromCharCode(240|Mt>>>18&7,128|Mt>>>12&63,128|Mt>>>6&63,128|63&Mt));return Ct}(kt))),tt[ut])?tt[ut].apply(null,nt):(kt=Function.apply(null,Fe.concat(kt)),tt&&(tt[ut]=kt),kt.apply(null,nt))}}}function F(Be){return Array.isArray(Be)||xe(Be)||t(Be)}function V(Be){return Be.sort(function(Ge,it){return Ge==="viewport"?-1:it==="viewport"?1:Ge<it?-1:1})}function U(Be,Ge,it,tt){this.thisDep=Be,this.contextDep=Ge,this.propDep=it,this.append=tt}function te(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function J(Be){return new U(!1,!1,!1,Be)}function X(Be,Ge){var it=Be.type;if(it===0)return new U(!0,1<=(it=Be.data.length),2<=it,Ge);if(it===4)return new U((it=Be.data).thisDep,it.contextDep,it.propDep,Ge);if(it===5)return new U(!1,!1,!1,Ge);if(it===6){for(var tt=it=!1,Re=!1,Fe=0;Fe<Be.data.length;++Fe){var nt=Be.data[Fe];nt.type===1?Re=!0:nt.type===2?tt=!0:nt.type===3?it=!0:nt.type===0?(it=!0,1<=(nt=nt.data)&&(tt=!0),2<=nt&&(Re=!0)):nt.type===4&&(it=it||nt.data.thisDep,tt=tt||nt.data.contextDep,Re=Re||nt.data.propDep)}return new U(it,tt,Re,Ge)}return new U(it===3,it===2,it===1,Ge)}function K(Be,Ge,it,tt,Re,Fe,nt,We,ct,pt,gt,ut,kt,yt,Mt,Lt){function Ct(bt){return bt.replace(".","_")}function It(bt,Ut,Kt){var un=Ct(bt);Hn.push(bt),Ln[un]=gn[un]=!!Kt,Nn[un]=Ut}function Wt(bt,Ut,Kt){var un=Ct(bt);Hn.push(bt),Array.isArray(Kt)?(gn[un]=Kt.slice(),Ln[un]=Kt.slice()):gn[un]=Ln[un]=Kt,Yn[un]=Ut}function Nt(){var bt=W({cache:Mt}),Ut=bt.link,Kt=bt.global;bt.id=pn++,bt.batchId="0";var un=Ut(fr),cn=bt.shared={props:"a0"};Object.keys(fr).forEach(function(nn){cn[nn]=Kt.def(un,".",nn)});var vn=bt.next={},tn=bt.current={};Object.keys(Yn).forEach(function(nn){Array.isArray(gn[nn])&&(vn[nn]=Kt.def(cn.next,".",nn),tn[nn]=Kt.def(cn.current,".",nn))});var Vt=bt.constants={};Object.keys(Xt).forEach(function(nn){Vt[nn]=Kt.def(JSON.stringify(Xt[nn]))}),bt.invoke=function(nn,sn){switch(sn.type){case 0:var wn=["this",cn.context,cn.props,bt.batchId];return nn.def(Ut(sn.data),".call(",wn.slice(0,Math.max(sn.data.length+1,4)),")");case 1:return nn.def(cn.props,sn.data);case 2:return nn.def(cn.context,sn.data);case 3:return nn.def("this",sn.data);case 4:return sn.data.append(bt,nn),sn.data.ref;case 5:return sn.data.toString();case 6:return sn.data.map(function(An){return bt.invoke(nn,An)})}},bt.attribCache={};var Gt={};return bt.scopeAttrib=function(nn){if((nn=Ge.id(nn))in Gt)return Gt[nn];var sn=pt.scope[nn];return sn||(sn=pt.scope[nn]=new Wn),Gt[nn]=Ut(sn)},bt}function Bt(bt,Ut){var Kt=bt.static,un=bt.dynamic;if("framebuffer"in Kt){var cn=Kt.framebuffer;return cn?(cn=We.getFramebuffer(cn),J(function(tn,Vt){var Gt=tn.link(cn),nn=tn.shared;return Vt.set(nn.framebuffer,".next",Gt),nn=nn.context,Vt.set(nn,".framebufferWidth",Gt+".width"),Vt.set(nn,".framebufferHeight",Gt+".height"),Gt})):J(function(tn,Vt){var Gt=tn.shared;return Vt.set(Gt.framebuffer,".next","null"),Gt=Gt.context,Vt.set(Gt,".framebufferWidth",Gt+".drawingBufferWidth"),Vt.set(Gt,".framebufferHeight",Gt+".drawingBufferHeight"),"null"})}if("framebuffer"in un){var vn=un.framebuffer;return X(vn,function(tn,Vt){var Gt=tn.invoke(Vt,vn),nn=tn.shared,sn=nn.framebuffer;return Gt=Vt.def(sn,".getFramebuffer(",Gt,")"),Vt.set(sn,".next",Gt),nn=nn.context,Vt.set(nn,".framebufferWidth",Gt+"?"+Gt+".width:"+nn+".drawingBufferWidth"),Vt.set(nn,".framebufferHeight",Gt+"?"+Gt+".height:"+nn+".drawingBufferHeight"),Gt})}return null}function Ht(bt,Ut,Kt){function un(nn){if(nn in cn){var sn=Ge.id(cn[nn]);return(nn=J(function(){return sn})).id=sn,nn}if(nn in vn){var wn=vn[nn];return X(wn,function(An,zn){var Fn=An.invoke(zn,wn);return zn.def(An.shared.strings,".id(",Fn,")")})}return null}var cn=bt.static,vn=bt.dynamic,tn=un("frag"),Vt=un("vert"),Gt=null;return te(tn)&&te(Vt)?(Gt=gt.program(Vt.id,tn.id,null,Kt),bt=J(function(nn,sn){return nn.link(Gt)})):bt=new U(tn&&tn.thisDep||Vt&&Vt.thisDep,tn&&tn.contextDep||Vt&&Vt.contextDep,tn&&tn.propDep||Vt&&Vt.propDep,function(nn,sn){var wn,An,zn=nn.shared.shader;return wn=tn?tn.append(nn,sn):sn.def(zn,".","frag"),An=Vt?Vt.append(nn,sn):sn.def(zn,".","vert"),sn.def(zn+".program("+An+","+wn+")")}),{frag:tn,vert:Vt,progVar:bt,program:Gt}}function Qt(bt,Ut){function Kt(Fn,Xn){if(Fn in un){var jn=0|un[Fn];return Xn?vn.offset=jn:vn.instances=jn,J(function(Jn,Zn){return Xn&&(Jn.OFFSET=jn),jn})}if(Fn in cn){var Qn=cn[Fn];return X(Qn,function(Jn,Zn){var ur=Jn.invoke(Zn,Qn);return Xn&&(Jn.OFFSET=ur),ur})}if(Xn){if(Gt)return J(function(Jn,Zn){return Jn.OFFSET=0});if(tn)return new U(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Jn,Zn){return Zn.def(Jn.shared.vao+".currentVAO?"+Jn.shared.vao+".currentVAO.offset:0")})}else if(tn)return new U(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Jn,Zn){return Zn.def(Jn.shared.vao+".currentVAO?"+Jn.shared.vao+".currentVAO.instances:-1")});return null}var un=bt.static,cn=bt.dynamic,vn={},tn=!1,Vt=function(){if("vao"in un){var Fn=un.vao;return Fn!==null&&pt.getVAO(Fn)===null&&(Fn=pt.createVAO(Fn)),tn=!0,vn.vao=Fn,J(function(jn){var Qn=pt.getVAO(Fn);return Qn?jn.link(Qn):"null"})}if("vao"in cn){tn=!0;var Xn=cn.vao;return X(Xn,function(jn,Qn){var Jn=jn.invoke(Qn,Xn);return Qn.def(jn.shared.vao+".getVAO("+Jn+")")})}return null}(),Gt=!1,nn=function(){if("elements"in un){var Fn=un.elements;if(vn.elements=Fn,F(Fn)){var Xn=vn.elements=Fe.create(Fn,!0);Fn=Fe.getElements(Xn),Gt=!0}else Fn&&(Fn=Fe.getElements(Fn),Gt=!0);return Xn=J(function(Qn,Jn){if(Fn){var Zn=Qn.link(Fn);return Qn.ELEMENTS=Zn}return Qn.ELEMENTS=null}),Xn.value=Fn,Xn}if("elements"in cn){Gt=!0;var jn=cn.elements;return X(jn,function(Qn,Jn){var Zn=(ur=Qn.shared).isBufferArgs,ur=ur.elements,mr=Qn.invoke(Jn,jn),hr=Jn.def("null");return Zn=Jn.def(Zn,"(",mr,")"),mr=Qn.cond(Zn).then(hr,"=",ur,".createStream(",mr,");").else(hr,"=",ur,".getElements(",mr,");"),Jn.entry(mr),Jn.exit(Qn.cond(Zn).then(ur,".destroyStream(",hr,");")),Qn.ELEMENTS=hr})}return tn?new U(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Qn,Jn){return Jn.def(Qn.shared.vao+".currentVAO?"+Qn.shared.elements+".getElements("+Qn.shared.vao+".currentVAO.elements):null")}):null}(),sn=Kt("offset",!0),wn=function(){if("primitive"in un){var Fn=un.primitive;return vn.primitive=Fn,J(function(jn,Qn){return Ee[Fn]})}if("primitive"in cn){var Xn=cn.primitive;return X(Xn,function(jn,Qn){var Jn=jn.constants.primTypes,Zn=jn.invoke(Qn,Xn);return Qn.def(Jn,"[",Zn,"]")})}return Gt?te(nn)?nn.value?J(function(jn,Qn){return Qn.def(jn.ELEMENTS,".primType")}):J(function(){return 4}):new U(nn.thisDep,nn.contextDep,nn.propDep,function(jn,Qn){var Jn=jn.ELEMENTS;return Qn.def(Jn,"?",Jn,".primType:",4)}):tn?new U(Vt.thisDep,Vt.contextDep,Vt.propDep,function(jn,Qn){return Qn.def(jn.shared.vao+".currentVAO?"+jn.shared.vao+".currentVAO.primitive:4")}):null}(),An=function(){if("count"in un){var Fn=0|un.count;return vn.count=Fn,J(function(){return Fn})}if("count"in cn){var Xn=cn.count;return X(Xn,function(jn,Qn){return jn.invoke(Qn,Xn)})}return Gt?te(nn)?nn?sn?new U(sn.thisDep,sn.contextDep,sn.propDep,function(jn,Qn){return Qn.def(jn.ELEMENTS,".vertCount-",jn.OFFSET)}):J(function(jn,Qn){return Qn.def(jn.ELEMENTS,".vertCount")}):J(function(){return-1}):new U(nn.thisDep||sn.thisDep,nn.contextDep||sn.contextDep,nn.propDep||sn.propDep,function(jn,Qn){var Jn=jn.ELEMENTS;return jn.OFFSET?Qn.def(Jn,"?",Jn,".vertCount-",jn.OFFSET,":-1"):Qn.def(Jn,"?",Jn,".vertCount:-1")}):tn?new U(Vt.thisDep,Vt.contextDep,Vt.propDep,function(jn,Qn){return Qn.def(jn.shared.vao,".currentVAO?",jn.shared.vao,".currentVAO.count:-1")}):null}(),zn=Kt("instances",!1);return{elements:nn,primitive:wn,count:An,instances:zn,offset:sn,vao:Vt,vaoActive:tn,elementsActive:Gt,static:vn}}function Cn(bt,Ut){var Kt=bt.static,un=bt.dynamic,cn={};return Object.keys(Kt).forEach(function(vn){var tn=Kt[vn],Vt=Ge.id(vn),Gt=new Wn;if(F(tn))Gt.state=1,Gt.buffer=Re.getBuffer(Re.create(tn,34962,!1,!0)),Gt.type=0;else if(sn=Re.getBuffer(tn))Gt.state=1,Gt.buffer=sn,Gt.type=0;else if("constant"in tn){var nn=tn.constant;Gt.buffer="null",Gt.state=2,typeof nn=="number"?Gt.x=nn:$e.forEach(function(jn,Qn){Qn<nn.length&&(Gt[jn]=nn[Qn])})}else{var sn=F(tn.buffer)?Re.getBuffer(Re.create(tn.buffer,34962,!1,!0)):Re.getBuffer(tn.buffer),wn=0|tn.offset,An=0|tn.stride,zn=0|tn.size,Fn=!!tn.normalized,Xn=0;"type"in tn&&(Xn=we[tn.type]),tn=0|tn.divisor,Gt.buffer=sn,Gt.state=1,Gt.size=zn,Gt.normalized=Fn,Gt.type=Xn||sn.dtype,Gt.offset=wn,Gt.stride=An,Gt.divisor=tn}cn[vn]=J(function(jn,Qn){var Jn=jn.attribCache;if(Vt in Jn)return Jn[Vt];var Zn={isStream:!1};return Object.keys(Gt).forEach(function(ur){Zn[ur]=Gt[ur]}),Gt.buffer&&(Zn.buffer=jn.link(Gt.buffer),Zn.type=Zn.type||Zn.buffer+".dtype"),Jn[Vt]=Zn})}),Object.keys(un).forEach(function(vn){var tn=un[vn];cn[vn]=X(tn,function(Vt,Gt){function nn(Jn){Gt(Fn[Jn],"=",sn,".",Jn,"|0;")}var sn=Vt.invoke(Gt,tn),wn=Vt.shared,An=Vt.constants,zn=wn.isBufferArgs,Fn=(wn=wn.buffer,{isStream:Gt.def(!1)}),Xn=new Wn;Xn.state=1,Object.keys(Xn).forEach(function(Jn){Fn[Jn]=Gt.def(""+Xn[Jn])});var jn=Fn.buffer,Qn=Fn.type;return Gt("if(",zn,"(",sn,")){",Fn.isStream,"=true;",jn,"=",wn,".createStream(",34962,",",sn,");",Qn,"=",jn,".dtype;","}else{",jn,"=",wn,".getBuffer(",sn,");","if(",jn,"){",Qn,"=",jn,".dtype;",'}else if("constant" in ',sn,"){",Fn.state,"=",2,";","if(typeof "+sn+'.constant === "number"){',Fn[$e[0]],"=",sn,".constant;",$e.slice(1).map(function(Jn){return Fn[Jn]}).join("="),"=0;","}else{",$e.map(function(Jn,Zn){return Fn[Jn]+"="+sn+".constant.length>"+Zn+"?"+sn+".constant["+Zn+"]:0;"}).join(""),"}}else{","if(",zn,"(",sn,".buffer)){",jn,"=",wn,".createStream(",34962,",",sn,".buffer);","}else{",jn,"=",wn,".getBuffer(",sn,".buffer);","}",Qn,'="type" in ',sn,"?",An.glTypes,"[",sn,".type]:",jn,".dtype;",Fn.normalized,"=!!",sn,".normalized;"),nn("size"),nn("offset"),nn("stride"),nn("divisor"),Gt("}}"),Gt.exit("if(",Fn.isStream,"){",wn,".destroyStream(",jn,");","}"),Fn})}),cn}function Tn(bt,Ut,Kt,un,cn){function vn(Xn){var jn=Vt[Xn];jn&&(nn[Xn]=jn)}var tn=function(Xn,jn){if(typeof(Qn=Xn.static).frag=="string"&&typeof Qn.vert=="string"){if(0<Object.keys(jn.dynamic).length)return null;var Qn=jn.static,Jn=Object.keys(Qn);if(0<Jn.length&&typeof Qn[Jn[0]]=="number"){for(var Zn=[],ur=0;ur<Jn.length;++ur)Zn.push([0|Qn[Jn[ur]],Jn[ur]]);return Zn}}return null}(bt,Ut),Vt=function(Xn,jn,Qn){function Jn(hr){if(hr in Zn){var rr=Zn[hr];hr=!0;var gr,xr,Or=0|rr.x,aa=0|rr.y;return"width"in rr?gr=0|rr.width:hr=!1,"height"in rr?xr=0|rr.height:hr=!1,new U(!hr&&jn&&jn.thisDep,!hr&&jn&&jn.contextDep,!hr&&jn&&jn.propDep,function(Ua,ta){var ka=Ua.shared.context,Pr=gr;"width"in rr||(Pr=ta.def(ka,".","framebufferWidth","-",Or));var ha=xr;return"height"in rr||(ha=ta.def(ka,".","framebufferHeight","-",aa)),[Or,aa,Pr,ha]})}if(hr in ur){var oa=ur[hr];return hr=X(oa,function(Ua,ta){var ka=Ua.invoke(ta,oa),Pr=Ua.shared.context,ha=ta.def(ka,".x|0"),oi=ta.def(ka,".y|0");return[ha,oi,ta.def('"width" in ',ka,"?",ka,".width|0:","(",Pr,".","framebufferWidth","-",ha,")"),ka=ta.def('"height" in ',ka,"?",ka,".height|0:","(",Pr,".","framebufferHeight","-",oi,")")]}),jn&&(hr.thisDep=hr.thisDep||jn.thisDep,hr.contextDep=hr.contextDep||jn.contextDep,hr.propDep=hr.propDep||jn.propDep),hr}return jn?new U(jn.thisDep,jn.contextDep,jn.propDep,function(Ua,ta){var ka=Ua.shared.context;return[0,0,ta.def(ka,".","framebufferWidth"),ta.def(ka,".","framebufferHeight")]}):null}var Zn=Xn.static,ur=Xn.dynamic;if(Xn=Jn("viewport")){var mr=Xn;Xn=new U(Xn.thisDep,Xn.contextDep,Xn.propDep,function(hr,rr){var gr=mr.append(hr,rr),xr=hr.shared.context;return rr.set(xr,".viewportWidth",gr[2]),rr.set(xr,".viewportHeight",gr[3]),gr})}return{viewport:Xn,scissor_box:Jn("scissor.box")}}(bt,wn=Bt(bt)),Gt=Qt(bt),nn=function(Xn,jn){var Qn=Xn.static,Jn=Xn.dynamic,Zn={};return Hn.forEach(function(ur){function mr(rr,gr){if(ur in Qn){var xr=rr(Qn[ur]);Zn[hr]=J(function(){return xr})}else if(ur in Jn){var Or=Jn[ur];Zn[hr]=X(Or,function(aa,oa){return gr(aa,oa,aa.invoke(oa,Or))})}}var hr=Ct(ur);switch(ur){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return mr(function(rr){return rr},function(rr,gr,xr){return xr});case"depth.func":return mr(function(rr){return Ot[rr]},function(rr,gr,xr){return gr.def(rr.constants.compareFuncs,"[",xr,"]")});case"depth.range":return mr(function(rr){return rr},function(rr,gr,xr){return[gr.def("+",xr,"[0]"),gr=gr.def("+",xr,"[1]")]});case"blend.func":return mr(function(rr){return[Pt["srcRGB"in rr?rr.srcRGB:rr.src],Pt["dstRGB"in rr?rr.dstRGB:rr.dst],Pt["srcAlpha"in rr?rr.srcAlpha:rr.src],Pt["dstAlpha"in rr?rr.dstAlpha:rr.dst]]},function(rr,gr,xr){function Or(ta,ka){return gr.def('"',ta,ka,'" in ',xr,"?",xr,".",ta,ka,":",xr,".",ta)}rr=rr.constants.blendFuncs;var aa=Or("src","RGB"),oa=Or("dst","RGB"),Ua=(aa=gr.def(rr,"[",aa,"]"),gr.def(rr,"[",Or("src","Alpha"),"]"));return[aa,oa=gr.def(rr,"[",oa,"]"),Ua,rr=gr.def(rr,"[",Or("dst","Alpha"),"]")]});case"blend.equation":return mr(function(rr){return typeof rr=="string"?[or[rr],or[rr]]:typeof rr=="object"?[or[rr.rgb],or[rr.alpha]]:void 0},function(rr,gr,xr){var Or=rr.constants.blendEquations,aa=gr.def(),oa=gr.def();return(rr=rr.cond("typeof ",xr,'==="string"')).then(aa,"=",oa,"=",Or,"[",xr,"];"),rr.else(aa,"=",Or,"[",xr,".rgb];",oa,"=",Or,"[",xr,".alpha];"),gr(rr),[aa,oa]});case"blend.color":return mr(function(rr){return b(4,function(gr){return+rr[gr]})},function(rr,gr,xr){return b(4,function(Or){return gr.def("+",xr,"[",Or,"]")})});case"stencil.mask":return mr(function(rr){return 0|rr},function(rr,gr,xr){return gr.def(xr,"|0")});case"stencil.func":return mr(function(rr){return[Ot[rr.cmp||"keep"],rr.ref||0,"mask"in rr?rr.mask:-1]},function(rr,gr,xr){return[rr=gr.def('"cmp" in ',xr,"?",rr.constants.compareFuncs,"[",xr,".cmp]",":",7680),gr.def(xr,".ref|0"),gr=gr.def('"mask" in ',xr,"?",xr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return mr(function(rr){return[ur==="stencil.opBack"?1029:1028,At[rr.fail||"keep"],At[rr.zfail||"keep"],At[rr.zpass||"keep"]]},function(rr,gr,xr){function Or(oa){return gr.def('"',oa,'" in ',xr,"?",aa,"[",xr,".",oa,"]:",7680)}var aa=rr.constants.stencilOps;return[ur==="stencil.opBack"?1029:1028,Or("fail"),Or("zfail"),Or("zpass")]});case"polygonOffset.offset":return mr(function(rr){return[0|rr.factor,0|rr.units]},function(rr,gr,xr){return[gr.def(xr,".factor|0"),gr=gr.def(xr,".units|0")]});case"cull.face":return mr(function(rr){var gr=0;return rr==="front"?gr=1028:rr==="back"&&(gr=1029),gr},function(rr,gr,xr){return gr.def(xr,'==="front"?',1028,":",1029)});case"frontFace":return mr(function(rr){return He[rr]},function(rr,gr,xr){return gr.def(xr+'==="cw"?2304:2305')});case"colorMask":return mr(function(rr){return rr.map(function(gr){return!!gr})},function(rr,gr,xr){return b(4,function(Or){return"!!"+xr+"["+Or+"]"})});case"sample.coverage":return mr(function(rr){return["value"in rr?rr.value:1,!!rr.invert]},function(rr,gr,xr){return[gr.def('"value" in ',xr,"?+",xr,".value:1"),gr=gr.def("!!",xr,".invert")]})}}),Zn}(bt),sn=Ht(bt,0,tn);vn("viewport"),vn(Ct("scissor.box"));var wn,An=0<Object.keys(nn).length;if((wn={framebuffer:wn,draw:Gt,shader:sn,state:nn,dirty:An,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Xn){var jn,Qn=Xn.static;if(Xn=Xn.dynamic,"profile"in Qn){var Jn=!!Qn.profile;(jn=J(function(ur,mr){return Jn})).enable=Jn}else if("profile"in Xn){var Zn=Xn.profile;jn=X(Zn,function(ur,mr){return ur.invoke(mr,Zn)})}return jn}(bt),wn.uniforms=function(Xn,jn){var Qn=Xn.static,Jn=Xn.dynamic,Zn={};return Object.keys(Qn).forEach(function(ur){var mr,hr=Qn[ur];if(typeof hr=="number"||typeof hr=="boolean")mr=J(function(){return hr});else if(typeof hr=="function"){var rr=hr._reglType;rr==="texture2d"||rr==="textureCube"?mr=J(function(gr){return gr.link(hr)}):rr!=="framebuffer"&&rr!=="framebufferCube"||(mr=J(function(gr){return gr.link(hr.color[0])}))}else x(hr)&&(mr=J(function(gr){return gr.global.def("[",b(hr.length,function(xr){return hr[xr]}),"]")}));mr.value=hr,Zn[ur]=mr}),Object.keys(Jn).forEach(function(ur){var mr=Jn[ur];Zn[ur]=X(mr,function(hr,rr){return hr.invoke(rr,mr)})}),Zn}(Kt),wn.drawVAO=wn.scopeVAO=Gt.vao,!wn.drawVAO&&sn.program&&!tn&&it.angle_instanced_arrays&&Gt.static.elements){var zn=!0;if(bt=sn.program.attributes.map(function(Xn){return Xn=Ut.static[Xn],zn=zn&&!!Xn,Xn}),zn&&0<bt.length){var Fn=pt.getVAO(pt.createVAO({attributes:bt,elements:Gt.static.elements}));wn.drawVAO=new U(null,null,null,function(Xn,jn){return Xn.link(Fn)}),wn.useVAO=!0}}return tn?wn.useVAO=!0:wn.attributes=Cn(Ut),wn.context=function(Xn){var jn=Xn.static,Qn=Xn.dynamic,Jn={};return Object.keys(jn).forEach(function(Zn){var ur=jn[Zn];Jn[Zn]=J(function(mr,hr){return typeof ur=="number"||typeof ur=="boolean"?""+ur:mr.link(ur)})}),Object.keys(Qn).forEach(function(Zn){var ur=Qn[Zn];Jn[Zn]=X(ur,function(mr,hr){return mr.invoke(hr,ur)})}),Jn}(un),wn}function hn(bt,Ut,Kt){var un=bt.shared.context,cn=bt.scope();Object.keys(Kt).forEach(function(vn){Ut.save(un,"."+vn);var tn=Kt[vn].append(bt,Ut);Array.isArray(tn)?cn(un,".",vn,"=[",tn.join(),"];"):cn(un,".",vn,"=",tn,";")}),Ut(cn)}function Zt(bt,Ut,Kt,un){var cn,vn=(Vt=bt.shared).gl,tn=Vt.framebuffer;en&&(cn=Ut.def(Vt.extensions,".webgl_draw_buffers"));var Vt=(Gt=bt.constants).drawBuffer,Gt=Gt.backBuffer;bt=Kt?Kt.append(bt,Ut):Ut.def(tn,".next"),un||Ut("if(",bt,"!==",tn,".cur){"),Ut("if(",bt,"){",vn,".bindFramebuffer(",36160,",",bt,".framebuffer);"),en&&Ut(cn,".drawBuffersWEBGL(",Vt,"[",bt,".colorAttachments.length]);"),Ut("}else{",vn,".bindFramebuffer(",36160,",null);"),en&&Ut(cn,".drawBuffersWEBGL(",Gt,");"),Ut("}",tn,".cur=",bt,";"),un||Ut("}")}function an(bt,Ut,Kt){var un=bt.shared,cn=un.gl,vn=bt.current,tn=bt.next,Vt=un.current,Gt=un.next,nn=bt.cond(Vt,".dirty");Hn.forEach(function(sn){var wn,An;if(!((sn=Ct(sn))in Kt.state))if(sn in tn){wn=tn[sn],An=vn[sn];var zn=b(gn[sn].length,function(Fn){return nn.def(wn,"[",Fn,"]")});nn(bt.cond(zn.map(function(Fn,Xn){return Fn+"!=="+An+"["+Xn+"]"}).join("||")).then(cn,".",Yn[sn],"(",zn,");",zn.map(function(Fn,Xn){return An+"["+Xn+"]="+Fn}).join(";"),";"))}else wn=nn.def(Gt,".",sn),zn=bt.cond(wn,"!==",Vt,".",sn),nn(zn),sn in Nn?zn(bt.cond(wn).then(cn,".enable(",Nn[sn],");").else(cn,".disable(",Nn[sn],");"),Vt,".",sn,"=",wn,";"):zn(cn,".",Yn[sn],"(",wn,");",Vt,".",sn,"=",wn,";")}),Object.keys(Kt.state).length===0&&nn(Vt,".dirty=false;"),Ut(nn)}function $t(bt,Ut,Kt,un){var cn,vn=bt.shared,tn=bt.current,Vt=vn.current,Gt=vn.gl;V(Object.keys(Kt)).forEach(function(nn){var sn=Kt[nn];if(!un||un(sn)){var wn=sn.append(bt,Ut);if(Nn[nn]){var An=Nn[nn];te(sn)?(cn=bt.link(wn,{stable:!0}),Ut(bt.cond(cn).then(Gt,".enable(",An,");").else(Gt,".disable(",An,");")),Ut(Vt,".",nn,"=",cn,";")):(Ut(bt.cond(wn).then(Gt,".enable(",An,");").else(Gt,".disable(",An,");")),Ut(Vt,".",nn,"=",wn,";"))}else if(x(wn)){var zn=tn[nn];Ut(Gt,".",Yn[nn],"(",wn,");",wn.map(function(Fn,Xn){return zn+"["+Xn+"]="+Fn}).join(";"),";")}else te(sn)?(cn=bt.link(wn,{stable:!0}),Ut(Gt,".",Yn[nn],"(",cn,");",Vt,".",nn,"=",cn,";")):Ut(Gt,".",Yn[nn],"(",wn,");",Vt,".",nn,"=",wn,";")}})}function ln(bt,Ut){Jt&&(bt.instancing=Ut.def(bt.shared.extensions,".angle_instanced_arrays"))}function mn(bt,Ut,Kt,un,cn){function vn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function tn(Xn){Xn(nn=Ut.def(),"=",vn(),";"),typeof cn=="string"?Xn(An,".count+=",cn,";"):Xn(An,".count++;"),yt&&(un?Xn(sn=Ut.def(),"=",Fn,".getNumPendingQueries();"):Xn(Fn,".beginQuery(",An,");"))}function Vt(Xn){Xn(An,".cpuTime+=",vn(),"-",nn,";"),yt&&(un?Xn(Fn,".pushScopeStats(",sn,",",Fn,".getNumPendingQueries(),",An,");"):Xn(Fn,".endQuery();"))}function Gt(Xn){var jn=Ut.def(zn,".profile");Ut(zn,".profile=",Xn,";"),Ut.exit(zn,".profile=",jn,";")}var nn,sn,wn=bt.shared,An=bt.stats,zn=wn.current,Fn=wn.timer;if(Kt=Kt.profile){if(te(Kt))return void(Kt.enable?(tn(Ut),Vt(Ut.exit),Gt("true")):Gt("false"));Gt(Kt=Kt.append(bt,Ut))}else Kt=Ut.def(zn,".profile");tn(wn=bt.block()),Ut("if(",Kt,"){",wn,"}"),Vt(bt=bt.block()),Ut.exit("if(",Kt,"){",bt,"}")}function xn(bt,Ut,Kt,un,cn){function vn(Vt,Gt,nn){function sn(){Ut("if(!",Fn,".buffer){",An,".enableVertexAttribArray(",zn,");}");var Jn,Zn=nn.type;Jn=nn.size?Ut.def(nn.size,"||",Gt):Gt,Ut("if(",Fn,".type!==",Zn,"||",Fn,".size!==",Jn,"||",Qn.map(function(ur){return Fn+"."+ur+"!=="+nn[ur]}).join("||"),"){",An,".bindBuffer(",34962,",",Xn,".buffer);",An,".vertexAttribPointer(",[zn,Jn,Zn,nn.normalized,nn.stride,nn.offset],");",Fn,".type=",Zn,";",Fn,".size=",Jn,";",Qn.map(function(ur){return Fn+"."+ur+"="+nn[ur]+";"}).join(""),"}"),Jt&&(Zn=nn.divisor,Ut("if(",Fn,".divisor!==",Zn,"){",bt.instancing,".vertexAttribDivisorANGLE(",[zn,Zn],");",Fn,".divisor=",Zn,";}"))}function wn(){Ut("if(",Fn,".buffer){",An,".disableVertexAttribArray(",zn,");",Fn,".buffer=null;","}if(",$e.map(function(Jn,Zn){return Fn+"."+Jn+"!=="+jn[Zn]}).join("||"),"){",An,".vertexAttrib4f(",zn,",",jn,");",$e.map(function(Jn,Zn){return Fn+"."+Jn+"="+jn[Zn]+";"}).join(""),"}")}var An=tn.gl,zn=Ut.def(Vt,".location"),Fn=Ut.def(tn.attributes,"[",zn,"]");Vt=nn.state;var Xn=nn.buffer,jn=[nn.x,nn.y,nn.z,nn.w],Qn=["buffer","normalized","offset","stride"];Vt===1?sn():Vt===2?wn():(Ut("if(",Vt,"===",1,"){"),sn(),Ut("}else{"),wn(),Ut("}"))}var tn=bt.shared;un.forEach(function(Vt){var Gt,nn=Vt.name,sn=Kt.attributes[nn];if(sn){if(!cn(sn))return;Gt=sn.append(bt,Ut)}else{if(!cn(Ze))return;var wn=bt.scopeAttrib(nn);Gt={},Object.keys(new Wn).forEach(function(An){Gt[An]=Ut.def(wn,".",An)})}vn(bt.link(Vt),function(An){switch(An){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Vt.info.type),Gt)})}function Pn(bt,Ut,Kt,un,cn,vn){for(var tn,Vt=bt.shared,Gt=Vt.gl,nn=0;nn<un.length;++nn){var sn,wn=(Fn=un[nn]).name,An=Fn.info.type,zn=Kt.uniforms[wn],Fn=bt.link(Fn)+".location";if(zn){if(!cn(zn))continue;if(te(zn)){if(wn=zn.value,An===35678||An===35680)Ut(Gt,".uniform1i(",Fn,",",(An=bt.link(wn._texture||wn.color[0]._texture))+".bind());"),Ut.exit(An,".unbind();");else if(An===35674||An===35675||An===35676)zn=2,An===35675?zn=3:An===35676&&(zn=4),Ut(Gt,".uniformMatrix",zn,"fv(",Fn,",false,",wn=bt.global.def("new Float32Array(["+Array.prototype.slice.call(wn)+"])"),");");else{switch(An){case 5126:tn="1f";break;case 35664:tn="2f";break;case 35665:tn="3f";break;case 35666:tn="4f";break;case 35670:case 5124:tn="1i";break;case 35671:case 35667:tn="2i";break;case 35672:case 35668:tn="3i";break;case 35673:case 35669:tn="4i"}Ut(Gt,".uniform",tn,"(",Fn,",",x(wn)?Array.prototype.slice.call(wn):wn,");")}continue}sn=zn.append(bt,Ut)}else{if(!cn(Ze))continue;sn=Ut.def(Vt.uniforms,"[",Ge.id(wn),"]")}switch(An===35678?Ut("if(",sn,"&&",sn,'._reglType==="framebuffer"){',sn,"=",sn,".color[0];","}"):An===35680&&Ut("if(",sn,"&&",sn,'._reglType==="framebufferCube"){',sn,"=",sn,".color[0];","}"),wn=1,An){case 35678:case 35680:An=Ut.def(sn,"._texture"),Ut(Gt,".uniform1i(",Fn,",",An,".bind());"),Ut.exit(An,".unbind();");continue;case 5124:case 35670:tn="1i";break;case 35667:case 35671:tn="2i",wn=2;break;case 35668:case 35672:tn="3i",wn=3;break;case 35669:case 35673:tn="4i",wn=4;break;case 5126:tn="1f";break;case 35664:tn="2f",wn=2;break;case 35665:tn="3f",wn=3;break;case 35666:tn="4f",wn=4;break;case 35674:tn="Matrix2fv";break;case 35675:tn="Matrix3fv";break;case 35676:tn="Matrix4fv"}if(tn.charAt(0)==="M"){Ut(Gt,".uniform",tn,"(",Fn,","),Fn=Math.pow(An-35674+2,2);var Xn=bt.global.def("new Float32Array(",Fn,")");Array.isArray(sn)?Ut("false,(",b(Fn,function(Qn){return Xn+"["+Qn+"]="+sn[Qn]}),",",Xn,")"):Ut("false,(Array.isArray(",sn,")||",sn," instanceof Float32Array)?",sn,":(",b(Fn,function(Qn){return Xn+"["+Qn+"]="+sn+"["+Qn+"]"}),",",Xn,")"),Ut(");")}else{if(1<wn){An=[];var jn=[];for(zn=0;zn<wn;++zn)Array.isArray(sn)?jn.push(sn[zn]):jn.push(Ut.def(sn+"["+zn+"]")),vn&&An.push(Ut.def());vn&&Ut("if(!",bt.batchId,"||",An.map(function(Qn,Jn){return Qn+"!=="+jn[Jn]}).join("||"),"){",An.map(function(Qn,Jn){return Qn+"="+jn[Jn]+";"}).join("")),Ut(Gt,".uniform",tn,"(",Fn,",",jn.join(","),");")}else vn&&(An=Ut.def(),Ut("if(!",bt.batchId,"||",An,"!==",sn,"){",An,"=",sn,";")),Ut(Gt,".uniform",tn,"(",Fn,",",sn,");");vn&&Ut("}")}}}function Mn(bt,Ut,Kt,un){function cn(Zn){var ur=An[Zn];return ur?ur.contextDep&&un.contextDynamic||ur.propDep?ur.append(bt,Kt):ur.append(bt,Ut):Ut.def(wn,".",Zn)}function vn(){function Zn(){Kt(Gt,".drawElementsInstancedANGLE(",[Fn,jn,Qn,Xn+"<<(("+Qn+"-5121)>>1)",Vt],");")}function ur(){Kt(Gt,".drawArraysInstancedANGLE(",[Fn,Xn,jn,Vt],");")}zn&&zn!=="null"?Jn?Zn():(Kt("if(",zn,"){"),Zn(),Kt("}else{"),ur(),Kt("}")):ur()}function tn(){function Zn(){Kt(sn+".drawElements("+[Fn,jn,Qn,Xn+"<<(("+Qn+"-5121)>>1)"]+");")}function ur(){Kt(sn+".drawArrays("+[Fn,Xn,jn]+");")}zn&&zn!=="null"?Jn?Zn():(Kt("if(",zn,"){"),Zn(),Kt("}else{"),ur(),Kt("}")):ur()}var Vt,Gt,nn=bt.shared,sn=nn.gl,wn=nn.draw,An=un.draw,zn=function(){var Zn=An.elements,ur=Ut;return Zn?((Zn.contextDep&&un.contextDynamic||Zn.propDep)&&(ur=Kt),Zn=Zn.append(bt,ur),An.elementsActive&&ur("if("+Zn+")"+sn+".bindBuffer(34963,"+Zn+".buffer.buffer);")):(Zn=ur.def(),ur(Zn,"=",wn,".","elements",";","if(",Zn,"){",sn,".bindBuffer(",34963,",",Zn,".buffer.buffer);}","else if(",nn.vao,".currentVAO){",Zn,"=",bt.shared.elements+".getElements("+nn.vao,".currentVAO.elements);",En?"":"if("+Zn+")"+sn+".bindBuffer(34963,"+Zn+".buffer.buffer);","}")),Zn}(),Fn=cn("primitive"),Xn=cn("offset"),jn=function(){var Zn=An.count,ur=Ut;return Zn?((Zn.contextDep&&un.contextDynamic||Zn.propDep)&&(ur=Kt),Zn=Zn.append(bt,ur)):Zn=ur.def(wn,".","count"),Zn}();if(typeof jn=="number"){if(jn===0)return}else Kt("if(",jn,"){"),Kt.exit("}");Jt&&(Vt=cn("instances"),Gt=bt.instancing);var Qn=zn+".type",Jn=An.elements&&te(An.elements)&&!An.vaoActive;Jt&&(typeof Vt!="number"||0<=Vt)?typeof Vt=="string"?(Kt("if(",Vt,">0){"),vn(),Kt("}else if(",Vt,"<0){"),tn(),Kt("}")):vn():tn()}function _n(bt,Ut,Kt,un,cn){return cn=(Ut=Nt()).proc("body",cn),Jt&&(Ut.instancing=cn.def(Ut.shared.extensions,".angle_instanced_arrays")),bt(Ut,cn,Kt,un),Ut.compile().body}function Rn(bt,Ut,Kt,un){ln(bt,Ut),Kt.useVAO?Kt.drawVAO?Ut(bt.shared.vao,".setVAO(",Kt.drawVAO.append(bt,Ut),");"):Ut(bt.shared.vao,".setVAO(",bt.shared.vao,".targetVAO);"):(Ut(bt.shared.vao,".setVAO(null);"),xn(bt,Ut,Kt,un.attributes,function(){return!0})),Pn(bt,Ut,Kt,un.uniforms,function(){return!0},!1),Mn(bt,Ut,Ut,Kt)}function In(bt,Ut,Kt,un){function cn(){return!0}bt.batchId="a1",ln(bt,Ut),xn(bt,Ut,Kt,un.attributes,cn),Pn(bt,Ut,Kt,un.uniforms,cn,!1),Mn(bt,Ut,Ut,Kt)}function Vn(bt,Ut,Kt,un){function cn(wn){return wn.contextDep&&tn||wn.propDep}function vn(wn){return!cn(wn)}ln(bt,Ut);var tn=Kt.contextDep,Vt=Ut.def(),Gt=Ut.def();bt.shared.props=Gt,bt.batchId=Vt;var nn=bt.scope(),sn=bt.scope();Ut(nn.entry,"for(",Vt,"=0;",Vt,"<","a1",";++",Vt,"){",Gt,"=","a0","[",Vt,"];",sn,"}",nn.exit),Kt.needsContext&&hn(bt,sn,Kt.context),Kt.needsFramebuffer&&Zt(bt,sn,Kt.framebuffer),$t(bt,sn,Kt.state,cn),Kt.profile&&cn(Kt.profile)&&mn(bt,sn,Kt,!1,!0),un?(Kt.useVAO?Kt.drawVAO?cn(Kt.drawVAO)?sn(bt.shared.vao,".setVAO(",Kt.drawVAO.append(bt,sn),");"):nn(bt.shared.vao,".setVAO(",Kt.drawVAO.append(bt,nn),");"):nn(bt.shared.vao,".setVAO(",bt.shared.vao,".targetVAO);"):(nn(bt.shared.vao,".setVAO(null);"),xn(bt,nn,Kt,un.attributes,vn),xn(bt,sn,Kt,un.attributes,cn)),Pn(bt,nn,Kt,un.uniforms,vn,!1),Pn(bt,sn,Kt,un.uniforms,cn,!0),Mn(bt,nn,sn,Kt)):(Ut=bt.global.def("{}"),un=Kt.shader.progVar.append(bt,sn),Gt=sn.def(un,".id"),nn=sn.def(Ut,"[",Gt,"]"),sn(bt.shared.gl,".useProgram(",un,".program);","if(!",nn,"){",nn,"=",Ut,"[",Gt,"]=",bt.link(function(wn){return _n(In,bt,Kt,wn,2)}),"(",un,");}",nn,".call(this,a0[",Vt,"],",Vt,");"))}function tr(bt,Ut){function Kt(Vt){var Gt=Ut.shader[Vt];Gt&&(Gt=Gt.append(bt,un),isNaN(Gt)?un.set(cn.shader,"."+Vt,Gt):un.set(cn.shader,"."+Vt,bt.link(Gt,{stable:!0})))}var un=bt.proc("scope",3);bt.batchId="a2";var cn=bt.shared,vn=cn.current;if(hn(bt,un,Ut.context),Ut.framebuffer&&Ut.framebuffer.append(bt,un),V(Object.keys(Ut.state)).forEach(function(Vt){var Gt=Ut.state[Vt],nn=Gt.append(bt,un);x(nn)?nn.forEach(function(sn,wn){isNaN(sn)?un.set(bt.next[Vt],"["+wn+"]",sn):un.set(bt.next[Vt],"["+wn+"]",bt.link(sn,{stable:!0}))}):te(Gt)?un.set(cn.next,"."+Vt,bt.link(nn,{stable:!0})):un.set(cn.next,"."+Vt,nn)}),mn(bt,un,Ut,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Vt){var Gt=Ut.draw[Vt];Gt&&(Gt=Gt.append(bt,un),isNaN(Gt)?un.set(cn.draw,"."+Vt,Gt):un.set(cn.draw,"."+Vt,bt.link(Gt),{stable:!0}))}),Object.keys(Ut.uniforms).forEach(function(Vt){var Gt=Ut.uniforms[Vt].append(bt,un);Array.isArray(Gt)&&(Gt="["+Gt.map(function(nn){return isNaN(nn)?nn:bt.link(nn,{stable:!0})})+"]"),un.set(cn.uniforms,"["+bt.link(Ge.id(Vt),{stable:!0})+"]",Gt)}),Object.keys(Ut.attributes).forEach(function(Vt){var Gt=Ut.attributes[Vt].append(bt,un),nn=bt.scopeAttrib(Vt);Object.keys(new Wn).forEach(function(sn){un.set(nn,"."+sn,Gt[sn])})}),Ut.scopeVAO){var tn=Ut.scopeVAO.append(bt,un);isNaN(tn)?un.set(cn.vao,".targetVAO",tn):un.set(cn.vao,".targetVAO",bt.link(tn,{stable:!0}))}Kt("vert"),Kt("frag"),0<Object.keys(Ut.state).length&&(un(vn,".dirty=true;"),un.exit(vn,".dirty=true;")),un("a1(",bt.shared.context,",a0,",bt.batchId,");")}function er(bt,Ut,Kt){var un=Ut.static[Kt];if(un&&function(sn){if(typeof sn=="object"&&!x(sn)){for(var wn=Object.keys(sn),An=0;An<wn.length;++An)if(oe.isDynamic(sn[wn[An]]))return!0;return!1}}(un)){var cn=bt.global,vn=Object.keys(un),tn=!1,Vt=!1,Gt=!1,nn=bt.global.def("{}");vn.forEach(function(sn){var wn=un[sn];if(oe.isDynamic(wn))typeof wn=="function"&&(wn=un[sn]=oe.unbox(wn)),sn=X(wn,null),tn=tn||sn.thisDep,Gt=Gt||sn.propDep,Vt=Vt||sn.contextDep;else{switch(cn(nn,".",sn,"="),typeof wn){case"number":cn(wn);break;case"string":cn('"',wn,'"');break;case"object":Array.isArray(wn)&&cn("[",wn.join(),"]");break;default:cn(bt.link(wn))}cn(";")}}),Ut.dynamic[Kt]=new oe.DynamicVariable(4,{thisDep:tn,contextDep:Vt,propDep:Gt,ref:nn,append:function(sn,wn){vn.forEach(function(An){var zn=un[An];oe.isDynamic(zn)&&(zn=sn.invoke(wn,zn),wn(nn,".",An,"=",zn,";"))})}}),delete Ut.static[Kt]}}var Wn=pt.Record,or={add:32774,subtract:32778,"reverse subtract":32779};it.ext_blend_minmax&&(or.min=32775,or.max=32776);var Jt=it.angle_instanced_arrays,en=it.webgl_draw_buffers,En=it.oes_vertex_array_object,gn={dirty:!0,profile:Lt.profile},Ln={},Hn=[],Nn={},Yn={};It("dither",3024),It("blend.enable",3042),Wt("blend.color","blendColor",[0,0,0,0]),Wt("blend.equation","blendEquationSeparate",[32774,32774]),Wt("blend.func","blendFuncSeparate",[1,0,1,0]),It("depth.enable",2929,!0),Wt("depth.func","depthFunc",513),Wt("depth.range","depthRange",[0,1]),Wt("depth.mask","depthMask",!0),Wt("colorMask","colorMask",[!0,!0,!0,!0]),It("cull.enable",2884),Wt("cull.face","cullFace",1029),Wt("frontFace","frontFace",2305),Wt("lineWidth","lineWidth",1),It("polygonOffset.enable",32823),Wt("polygonOffset.offset","polygonOffset",[0,0]),It("sample.alpha",32926),It("sample.enable",32928),Wt("sample.coverage","sampleCoverage",[1,!1]),It("stencil.enable",2960),Wt("stencil.mask","stencilMask",-1),Wt("stencil.func","stencilFunc",[519,0,-1]),Wt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Wt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),It("scissor.enable",3089),Wt("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Wt("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var fr={gl:Be,context:kt,strings:Ge,next:Ln,current:gn,draw:ut,elements:Fe,buffer:Re,shader:gt,attributes:pt.state,vao:pt,uniforms:ct,framebuffer:We,extensions:it,timer:yt,isBufferArgs:F},Xt={primTypes:Ee,compareFuncs:Ot,blendFuncs:Pt,blendEquations:or,stencilOps:At,glTypes:we,orientationType:He};en&&(Xt.backBuffer=[1029],Xt.drawBuffer=b(tt.maxDrawbuffers,function(bt){return bt===0?[0]:b(bt,function(Ut){return 36064+Ut})}));var pn=0;return{next:Ln,current:gn,procs:function(){var bt=Nt(),Ut=bt.proc("poll"),Kt=bt.proc("refresh"),un=bt.block();Ut(un),Kt(un);var cn,vn=(Gt=bt.shared).gl,tn=Gt.next,Vt=Gt.current;un(Vt,".dirty=false;"),Zt(bt,Ut),Zt(bt,Kt,null,!0),Jt&&(cn=bt.link(Jt)),it.oes_vertex_array_object&&Kt(bt.link(it.oes_vertex_array_object),".bindVertexArrayOES(null);");var Gt=Kt.def(Gt.attributes),nn=Kt.def(0),sn=bt.cond(nn,".buffer");sn.then(vn,".enableVertexAttribArray(i);",vn,".bindBuffer(",34962,",",nn,".buffer.buffer);",vn,".vertexAttribPointer(i,",nn,".size,",nn,".type,",nn,".normalized,",nn,".stride,",nn,".offset);").else(vn,".disableVertexAttribArray(i);",vn,".vertexAttrib4f(i,",nn,".x,",nn,".y,",nn,".z,",nn,".w);",nn,".buffer=null;");var wn=bt.link(tt.maxAttributes,{stable:!0});return Kt("for(var i=0;i<",wn,";++i){",nn,"=",Gt,"[i];",sn,"}"),Jt&&Kt("for(var i=0;i<",wn,";++i){",cn,".vertexAttribDivisorANGLE(i,",Gt,"[i].divisor);","}"),Kt(bt.shared.vao,".currentVAO=null;",bt.shared.vao,".setVAO(",bt.shared.vao,".targetVAO);"),Object.keys(Nn).forEach(function(An){var zn=Nn[An],Fn=un.def(tn,".",An),Xn=bt.block();Xn("if(",Fn,"){",vn,".enable(",zn,")}else{",vn,".disable(",zn,")}",Vt,".",An,"=",Fn,";"),Kt(Xn),Ut("if(",Fn,"!==",Vt,".",An,"){",Xn,"}")}),Object.keys(Yn).forEach(function(An){var zn,Fn,Xn=Yn[An],jn=gn[An],Qn=bt.block();Qn(vn,".",Xn,"("),x(jn)?(Xn=jn.length,zn=bt.global.def(tn,".",An),Fn=bt.global.def(Vt,".",An),Qn(b(Xn,function(Jn){return zn+"["+Jn+"]"}),");",b(Xn,function(Jn){return Fn+"["+Jn+"]="+zn+"["+Jn+"];"}).join("")),Ut("if(",b(Xn,function(Jn){return zn+"["+Jn+"]!=="+Fn+"["+Jn+"]"}).join("||"),"){",Qn,"}")):(zn=un.def(tn,".",An),Fn=un.def(Vt,".",An),Qn(zn,");",Vt,".",An,"=",zn,";"),Ut("if(",zn,"!==",Fn,"){",Qn,"}")),Kt(Qn)}),bt.compile()}(),compile:function(bt,Ut,Kt,un,cn){var vn=Nt();vn.stats=vn.link(cn),Object.keys(Ut.static).forEach(function(Vt){er(vn,Ut,Vt)}),wt.forEach(function(Vt){er(vn,bt,Vt)});var tn=Tn(bt,Ut,Kt,un);return tn.shader.program&&(tn.shader.program.attributes.sort(function(Vt,Gt){return Vt.name<Gt.name?-1:1}),tn.shader.program.uniforms.sort(function(Vt,Gt){return Vt.name<Gt.name?-1:1})),function(Vt,Gt){var nn=Vt.proc("draw",1);ln(Vt,nn),hn(Vt,nn,Gt.context),Zt(Vt,nn,Gt.framebuffer),an(Vt,nn,Gt),$t(Vt,nn,Gt.state),mn(Vt,nn,Gt,!1,!0);var sn=Gt.shader.progVar.append(Vt,nn);if(nn(Vt.shared.gl,".useProgram(",sn,".program);"),Gt.shader.program)Rn(Vt,nn,Gt,Gt.shader.program);else{nn(Vt.shared.vao,".setVAO(null);");var wn=Vt.global.def("{}"),An=nn.def(sn,".id"),zn=nn.def(wn,"[",An,"]");nn(Vt.cond(zn).then(zn,".call(this,a0);").else(zn,"=",wn,"[",An,"]=",Vt.link(function(Fn){return _n(Rn,Vt,Gt,Fn,1)}),"(",sn,");",zn,".call(this,a0);"))}0<Object.keys(Gt.state).length&&nn(Vt.shared.current,".dirty=true;"),Vt.shared.vao&&nn(Vt.shared.vao,".setVAO(null);")}(vn,tn),tr(vn,tn),function(Vt,Gt){function nn(jn){return jn.contextDep&&wn||jn.propDep}var sn=Vt.proc("batch",2);Vt.batchId="0",ln(Vt,sn);var wn=!1,An=!0;Object.keys(Gt.context).forEach(function(jn){wn=wn||Gt.context[jn].propDep}),wn||(hn(Vt,sn,Gt.context),An=!1);var zn=!1;if((Fn=Gt.framebuffer)?(Fn.propDep?wn=zn=!0:Fn.contextDep&&wn&&(zn=!0),zn||Zt(Vt,sn,Fn)):Zt(Vt,sn,null),Gt.state.viewport&&Gt.state.viewport.propDep&&(wn=!0),an(Vt,sn,Gt),$t(Vt,sn,Gt.state,function(jn){return!nn(jn)}),Gt.profile&&nn(Gt.profile)||mn(Vt,sn,Gt,!1,"a1"),Gt.contextDep=wn,Gt.needsContext=An,Gt.needsFramebuffer=zn,(An=Gt.shader.progVar).contextDep&&wn||An.propDep)Vn(Vt,sn,Gt,null);else if(An=An.append(Vt,sn),sn(Vt.shared.gl,".useProgram(",An,".program);"),Gt.shader.program)Vn(Vt,sn,Gt,Gt.shader.program);else{sn(Vt.shared.vao,".setVAO(null);");var Fn=Vt.global.def("{}"),Xn=(zn=sn.def(An,".id"),sn.def(Fn,"[",zn,"]"));sn(Vt.cond(Xn).then(Xn,".call(this,a0,a1);").else(Xn,"=",Fn,"[",zn,"]=",Vt.link(function(jn){return _n(Vn,Vt,Gt,jn,2)}),"(",An,");",Xn,".call(this,a0,a1);"))}0<Object.keys(Gt.state).length&&sn(Vt.shared.current,".dirty=true;"),Vt.shared.vao&&sn(Vt.shared.vao,".setVAO(null);")}(vn,tn),Z(vn.compile(),{destroy:function(){tn.shader.program.destroy()}})}}}function Q(Be,Ge){for(var it=0;it<Be.length;++it)if(Be[it]===Ge)return it;return-1}var Z=function(Be,Ge){for(var it=Object.keys(Ge),tt=0;tt<it.length;++tt)Be[it[tt]]=Ge[it[tt]];return Be},re=0,oe={DynamicVariable:z,define:function(Be,Ge){return new z(Be,M(Ge+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof z},unbox:function Be(Ge,it){return typeof Ge=="function"?new z(0,Ge):typeof Ge=="number"||typeof Ge=="boolean"?new z(5,Ge):Array.isArray(Ge)?new z(6,Ge.map(function(tt,Re){return Be(tt)})):Ge instanceof z?Ge:void 0},accessor:M},ae={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},ce=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},he=s();he.zero=s();var pe=function(Be,Ge){var it=1;Ge.ext_texture_filter_anisotropic&&(it=Be.getParameter(34047));var tt=1,Re=1;Ge.webgl_draw_buffers&&(tt=Be.getParameter(34852),Re=Be.getParameter(36063));var Fe=!!Ge.oes_texture_float;if(Fe){Fe=Be.createTexture(),Be.bindTexture(3553,Fe),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var nt=Be.createFramebuffer();if(Be.bindFramebuffer(36160,nt),Be.framebufferTexture2D(36160,36064,3553,Fe,0),Be.bindTexture(3553,null),Be.checkFramebufferStatus(36160)!==36053)Fe=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var We=he.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,We),Be.getError()?Fe=!1:(Be.deleteFramebuffer(nt),Be.deleteTexture(Fe),Fe=We[0]===1),he.freeType(We)}}return We=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(We=Be.createTexture(),nt=he.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,We),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,nt),he.freeType(nt),Be.bindTexture(34067,null),Be.deleteTexture(We),We=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(Ge).filter(function(ct){return!!Ge[ct]}),maxAnisotropic:it,maxDrawbuffers:tt,maxColorAttachments:Re,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:Fe,npotTextureCube:We}},xe=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},be=function(Be){return Object.keys(Be).map(function(Ge){return Be[Ge]})},ve={shape:function(Be){for(var Ge=[];Be.length;Be=Be[0])Ge.push(Be.length);return Ge},flatten:function(Be,Ge,it,tt){var Re=1;if(Ge.length)for(var Fe=0;Fe<Ge.length;++Fe)Re*=Ge[Fe];else Re=0;switch(it=tt||he.allocType(it,Re),Ge.length){case 0:break;case 1:for(tt=Ge[0],Ge=0;Ge<tt;++Ge)it[Ge]=Be[Ge];break;case 2:for(tt=Ge[0],Ge=Ge[1],Fe=Re=0;Fe<tt;++Fe)for(var nt=Be[Fe],We=0;We<Ge;++We)it[Re++]=nt[We];break;case 3:a(Be,Ge[0],Ge[1],Ge[2],it,0);break;default:n(Be,Ge,0,it,0)}return it}},ge={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},we={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},_e={dynamic:35048,stream:35040,static:35044},se=ve.flatten,ie=ve.shape,fe=[];fe[5120]=1,fe[5122]=2,fe[5124]=4,fe[5121]=1,fe[5123]=2,fe[5125]=4,fe[5126]=4;var Ee={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Te=new Float32Array(1),Ae=new Uint32Array(Te.buffer),Se=[9984,9986,9985,9987],Oe=[0,6409,6410,6407,6408],De={};De[6409]=De[6406]=De[6402]=1,De[34041]=De[6410]=2,De[6407]=De[35904]=3,De[6408]=De[35906]=4;var de=d("HTMLCanvasElement"),me=d("OffscreenCanvas"),Me=d("CanvasRenderingContext2D"),ze=d("ImageBitmap"),Pe=d("HTMLImageElement"),Ne=d("HTMLVideoElement"),Ve=Object.keys(ge).concat([de,me,Me,ze,Pe,Ne]),Ye=[];Ye[5121]=1,Ye[5126]=4,Ye[36193]=2,Ye[5123]=2,Ye[5125]=4;var at=[];at[32854]=2,at[32855]=2,at[36194]=2,at[34041]=4,at[33776]=.5,at[33777]=.5,at[33778]=1,at[33779]=1,at[35986]=.5,at[35987]=1,at[34798]=1,at[35840]=.5,at[35841]=.25,at[35842]=.5,at[35843]=.25,at[36196]=.5;var rt=[];rt[32854]=2,rt[32855]=2,rt[36194]=2,rt[33189]=2,rt[36168]=1,rt[34041]=4,rt[35907]=4,rt[34836]=16,rt[34842]=8,rt[34843]=6;var dt=function(Be,Ge,it,tt,Re){function Fe(ut){this.id=pt++,this.refCount=1,this.renderbuffer=ut,this.format=32854,this.height=this.width=0,Re.profile&&(this.stats={size:0})}function nt(ut){var kt=ut.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(kt),ut.renderbuffer=null,ut.refCount=0,delete gt[ut.id],tt.renderbufferCount--}var We={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ge.ext_srgb&&(We.srgba=35907),Ge.ext_color_buffer_half_float&&(We.rgba16f=34842,We.rgb16f=34843),Ge.webgl_color_buffer_float&&(We.rgba32f=34836);var ct=[];Object.keys(We).forEach(function(ut){ct[We[ut]]=ut});var pt=0,gt={};return Fe.prototype.decRef=function(){0>=--this.refCount&&nt(this)},Re.profile&&(tt.getTotalRenderbufferSize=function(){var ut=0;return Object.keys(gt).forEach(function(kt){ut+=gt[kt].stats.size}),ut}),{create:function(ut,kt){function yt(Lt,Ct){var It=0,Wt=0,Nt=32854;if(typeof Lt=="object"&&Lt?("shape"in Lt?(It=0|(Wt=Lt.shape)[0],Wt=0|Wt[1]):("radius"in Lt&&(It=Wt=0|Lt.radius),"width"in Lt&&(It=0|Lt.width),"height"in Lt&&(Wt=0|Lt.height)),"format"in Lt&&(Nt=We[Lt.format])):typeof Lt=="number"?(It=0|Lt,Wt=typeof Ct=="number"?0|Ct:It):Lt||(It=Wt=1),It!==Mt.width||Wt!==Mt.height||Nt!==Mt.format)return yt.width=Mt.width=It,yt.height=Mt.height=Wt,Mt.format=Nt,Be.bindRenderbuffer(36161,Mt.renderbuffer),Be.renderbufferStorage(36161,Nt,It,Wt),Re.profile&&(Mt.stats.size=rt[Mt.format]*Mt.width*Mt.height),yt.format=ct[Mt.format],yt}var Mt=new Fe(Be.createRenderbuffer());return gt[Mt.id]=Mt,tt.renderbufferCount++,yt(ut,kt),yt.resize=function(Lt,Ct){var It=0|Lt,Wt=0|Ct||It;return It===Mt.width&&Wt===Mt.height||(yt.width=Mt.width=It,yt.height=Mt.height=Wt,Be.bindRenderbuffer(36161,Mt.renderbuffer),Be.renderbufferStorage(36161,Mt.format,It,Wt),Re.profile&&(Mt.stats.size=rt[Mt.format]*Mt.width*Mt.height)),yt},yt._reglType="renderbuffer",yt._renderbuffer=Mt,Re.profile&&(yt.stats=Mt.stats),yt.destroy=function(){Mt.decRef()},yt},clear:function(){be(gt).forEach(nt)},restore:function(){be(gt).forEach(function(ut){ut.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,ut.renderbuffer),Be.renderbufferStorage(36161,ut.format,ut.width,ut.height)}),Be.bindRenderbuffer(36161,null)}}},vt=[];vt[6408]=4,vt[6407]=3;var ht=[];ht[5121]=1,ht[5126]=4,ht[36193]=2;var et=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],$e=["x","y","z","w"],wt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Pt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ot={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},At={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},He={cw:2304,ccw:2305},Ze=new U(!1,!1,!1,function(){});return function(Be){function Ge(){if(In.length===0)Bt&&Bt.update(),Wn=null;else{Wn=ae.next(Ge),gt();for(var Jt=In.length-1;0<=Jt;--Jt){var en=In[Jt];en&&en(Tn,null,0)}yt.flush(),Bt&&Bt.update()}}function it(){!Wn&&0<In.length&&(Wn=ae.next(Ge))}function tt(){Wn&&(ae.cancel(Ge),Wn=null)}function Re(Jt){Jt.preventDefault(),tt(),Vn.forEach(function(en){en()})}function Fe(Jt){yt.getError(),Lt.restore(),ln.restore(),Zt.restore(),mn.restore(),xn.restore(),Pn.restore(),$t.restore(),Bt&&Bt.restore(),Mn.procs.refresh(),it(),tr.forEach(function(en){en()})}function nt(Jt){function en(bt,Ut){var Kt={},un={};return Object.keys(bt).forEach(function(cn){var vn=bt[cn];if(oe.isDynamic(vn))un[cn]=oe.unbox(vn,cn);else{if(Ut&&Array.isArray(vn)){for(var tn=0;tn<vn.length;++tn)if(oe.isDynamic(vn[tn]))return void(un[cn]=oe.unbox(vn,cn))}Kt[cn]=vn}}),{dynamic:un,static:Kt}}var En=en(Jt.context||{},!0),gn=en(Jt.uniforms||{},!0),Ln=en(Jt.attributes||{},!1);Jt=en(function(bt){function Ut(un){if(un in Kt){var cn=Kt[un];delete Kt[un],Object.keys(cn).forEach(function(vn){Kt[un+"."+vn]=cn[vn]})}}var Kt=Z({},bt);return delete Kt.uniforms,delete Kt.attributes,delete Kt.context,delete Kt.vao,"stencil"in Kt&&Kt.stencil.op&&(Kt.stencil.opBack=Kt.stencil.opFront=Kt.stencil.op,delete Kt.stencil.op),Ut("blend"),Ut("depth"),Ut("cull"),Ut("stencil"),Ut("polygonOffset"),Ut("scissor"),Ut("sample"),"vao"in bt&&(Kt.vao=bt.vao),Kt}(Jt),!1);var Hn={gpuTime:0,cpuTime:0,count:0},Nn=Mn.compile(Jt,Ln,gn,En,Hn),Yn=Nn.draw,fr=Nn.batch,Xt=Nn.scope,pn=[];return Z(function(bt,Ut){var Kt;if(typeof bt=="function")return Xt.call(this,null,bt,0);if(typeof Ut=="function")if(typeof bt=="number")for(Kt=0;Kt<bt;++Kt)Xt.call(this,null,Ut,Kt);else{if(!Array.isArray(bt))return Xt.call(this,bt,Ut,0);for(Kt=0;Kt<bt.length;++Kt)Xt.call(this,bt[Kt],Ut,Kt)}else if(typeof bt=="number"){if(0<bt)return fr.call(this,function(un){for(;pn.length<un;)pn.push(null);return pn}(0|bt),0|bt)}else{if(!Array.isArray(bt))return Yn.call(this,bt);if(bt.length)return fr.call(this,bt,bt.length)}},{stats:Hn,destroy:function(){Nn.destroy()}})}function We(Jt,en){var En=0;Mn.procs.poll();var gn=en.color;gn&&(yt.clearColor(+gn[0]||0,+gn[1]||0,+gn[2]||0,+gn[3]||0),En|=16384),"depth"in en&&(yt.clearDepth(+en.depth),En|=256),"stencil"in en&&(yt.clearStencil(0|en.stencil),En|=1024),yt.clear(En)}function ct(Jt){return In.push(Jt),it(),{cancel:function(){var en=Q(In,Jt);In[en]=function En(){var gn=Q(In,En);In[gn]=In[In.length-1],--In.length,0>=In.length&&tt()}}}}function pt(){var Jt=_n.viewport,en=_n.scissor_box;Jt[0]=Jt[1]=en[0]=en[1]=0,Tn.viewportWidth=Tn.framebufferWidth=Tn.drawingBufferWidth=Jt[2]=en[2]=yt.drawingBufferWidth,Tn.viewportHeight=Tn.framebufferHeight=Tn.drawingBufferHeight=Jt[3]=en[3]=yt.drawingBufferHeight}function gt(){Tn.tick+=1,Tn.time=kt(),pt(),Mn.procs.poll()}function ut(){mn.refresh(),pt(),Mn.procs.refresh(),Bt&&Bt.update()}function kt(){return(ce()-Ht)/1e3}if(!(Be=T(Be)))return null;var yt=Be.gl,Mt=yt.getContextAttributes();yt.isContextLost();var Lt=function(Jt,en){function En(Nn){var Yn;Nn=Nn.toLowerCase();try{Yn=gn[Nn]=Jt.getExtension(Nn)}catch{}return!!Yn}for(var gn={},Ln=0;Ln<en.extensions.length;++Ln){var Hn=en.extensions[Ln];if(!En(Hn))return en.onDestroy(),en.onDone('"'+Hn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return en.optionalExtensions.forEach(En),{extensions:gn,restore:function(){Object.keys(gn).forEach(function(Nn){if(gn[Nn]&&!En(Nn))throw Error("(regl): error restoring extension "+Nn)})}}}(yt,Be);if(!Lt)return null;var Ct=function(){var Jt={"":0},en=[""];return{id:function(En){var gn=Jt[En];return gn||(gn=Jt[En]=en.length,en.push(En),gn)},str:function(En){return en[En]}}}(),It={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Wt=Be.cachedCode||{},Nt=Lt.extensions,Bt=function(Jt,en){function En(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function gn(pn,bt,Ut){var Kt=Nn.pop()||new En;Kt.startQueryIndex=pn,Kt.endQueryIndex=bt,Kt.sum=0,Kt.stats=Ut,Yn.push(Kt)}if(!en.ext_disjoint_timer_query)return null;var Ln=[],Hn=[],Nn=[],Yn=[],fr=[],Xt=[];return{beginQuery:function(pn){var bt=Ln.pop()||en.ext_disjoint_timer_query.createQueryEXT();en.ext_disjoint_timer_query.beginQueryEXT(35007,bt),Hn.push(bt),gn(Hn.length-1,Hn.length,pn)},endQuery:function(){en.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:gn,update:function(){var pn,bt;if((pn=Hn.length)!==0){Xt.length=Math.max(Xt.length,pn+1),fr.length=Math.max(fr.length,pn+1),fr[0]=0;var Ut=Xt[0]=0;for(bt=pn=0;bt<Hn.length;++bt){var Kt=Hn[bt];en.ext_disjoint_timer_query.getQueryObjectEXT(Kt,34919)?(Ut+=en.ext_disjoint_timer_query.getQueryObjectEXT(Kt,34918),Ln.push(Kt)):Hn[pn++]=Kt,fr[bt+1]=Ut,Xt[bt+1]=pn}for(Hn.length=pn,bt=pn=0;bt<Yn.length;++bt){var un=(Ut=Yn[bt]).startQueryIndex;Kt=Ut.endQueryIndex,Ut.sum+=fr[Kt]-fr[un],un=Xt[un],(Kt=Xt[Kt])===un?(Ut.stats.gpuTime+=Ut.sum/1e6,Nn.push(Ut)):(Ut.startQueryIndex=un,Ut.endQueryIndex=Kt,Yn[pn++]=Ut)}Yn.length=pn}},getNumPendingQueries:function(){return Hn.length},clear:function(){Ln.push.apply(Ln,Hn);for(var pn=0;pn<Ln.length;pn++)en.ext_disjoint_timer_query.deleteQueryEXT(Ln[pn]);Hn.length=0,Ln.length=0},restore:function(){Hn.length=0,Ln.length=0}}}(0,Nt),Ht=ce(),Qt=yt.drawingBufferWidth,Cn=yt.drawingBufferHeight,Tn={tick:0,time:0,viewportWidth:Qt,viewportHeight:Cn,framebufferWidth:Qt,framebufferHeight:Cn,drawingBufferWidth:Qt,drawingBufferHeight:Cn,pixelRatio:Be.pixelRatio},hn=(Qt={elements:null,primitive:4,count:-1,offset:0,instances:-1},pe(yt,Nt)),Zt=u(yt,It,Be,function(Jt){return $t.destroyBuffer(Jt)}),an=p(yt,Nt,Zt,It),$t=O(yt,Nt,hn,It,Zt,an,Qt),ln=C(yt,Ct,It,Be),mn=S(yt,Nt,hn,function(){Mn.procs.poll()},Tn,It,Be),xn=dt(yt,Nt,0,It,Be),Pn=w(yt,Nt,hn,mn,xn,It),Mn=K(yt,Ct,Nt,hn,Zt,an,0,Pn,{},$t,ln,Qt,Tn,Bt,Wt,Be),_n=(Ct=P(yt,Pn,Mn.procs.poll,Tn),Mn.next),Rn=yt.canvas,In=[],Vn=[],tr=[],er=[Be.onDestroy],Wn=null;Rn&&(Rn.addEventListener("webglcontextlost",Re,!1),Rn.addEventListener("webglcontextrestored",Fe,!1));var or=Pn.setFBO=nt({framebuffer:oe.define.call(null,1,"framebuffer")});return ut(),Mt=Z(nt,{clear:function(Jt){if("framebuffer"in Jt)if(Jt.framebuffer&&Jt.framebuffer_reglType==="framebufferCube")for(var en=0;6>en;++en)or(Z({framebuffer:Jt.framebuffer.faces[en]},Jt),We);else or(Jt,We);else We(0,Jt)},prop:oe.define.bind(null,1),context:oe.define.bind(null,2),this:oe.define.bind(null,3),draw:nt({}),buffer:function(Jt){return Zt.create(Jt,34962,!1,!1)},elements:function(Jt){return an.create(Jt,!1)},texture:mn.create2D,cube:mn.createCube,renderbuffer:xn.create,framebuffer:Pn.create,framebufferCube:Pn.createCube,vao:$t.createVAO,attributes:Mt,frame:ct,on:function(Jt,en){var En;switch(Jt){case"frame":return ct(en);case"lost":En=Vn;break;case"restore":En=tr;break;case"destroy":En=er}return En.push(en),{cancel:function(){for(var gn=0;gn<En.length;++gn)if(En[gn]===en){En[gn]=En[En.length-1],En.pop();break}}}},limits:hn,hasExtension:function(Jt){return 0<=hn.extensions.indexOf(Jt.toLowerCase())},read:Ct,destroy:function(){In.length=0,tt(),Rn&&(Rn.removeEventListener("webglcontextlost",Re),Rn.removeEventListener("webglcontextrestored",Fe)),ln.clear(),Pn.clear(),xn.clear(),$t.clear(),mn.clear(),an.clear(),Zt.clear(),Bt&&Bt.clear(),er.forEach(function(Jt){Jt()})},_gl:yt,_refresh:ut,poll:function(){gt(),Bt&&Bt.update()},now:kt,stats:It,getCachedCode:function(){return Wt},preloadCachedCode:function(Jt){Object.entries(Jt).forEach(function(en){Wt[en[0]]=en[1]})}}),Be.onDone(null,Mt),Mt}}()},30456:function(ee,z,e){var M=e(33576),k=M.Buffer;function o(b,h){for(var s in b)h[s]=b[s]}function T(b,h,s){return k(b,h,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ee.exports=M:(o(M,z),z.Buffer=T),T.prototype=Object.create(k.prototype),o(k,T),T.from=function(b,h,s){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,h,s)},T.alloc=function(b,h,s){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=k(b);return h!==void 0?typeof s=="string"?t.fill(h,s):t.fill(h):t.fill(0),t},T.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(b)}},14500:function(ee,z,e){var M=e(53664),k=e(64348),o=e(39640)(),T=e(2304),b=M("%TypeError%"),h=M("%Math.floor%");ee.exports=function(s,t){if(typeof s!="function")throw new b("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||h(t)!==t)throw new b("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],n=!0,r=!0;if("length"in s&&T){var i=T(s,"length");i&&!i.configurable&&(n=!1),i&&!i.writable&&(r=!1)}return(n||r||!a)&&(o?k(s,"length",t,!0,!0):k(s,"length",t)),s}},29936:function(ee,z,e){ee.exports=k;var M=e(61252).EventEmitter;function k(){M.call(this)}e(6768)(k,M),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(o,T){var b=this;function h(l){o.writable&&o.write(l)===!1&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",h),o.on("drain",s),o._isStdio||T&&T.end===!1||(b.on("end",a),b.on("close",n));var t=!1;function a(){t||(t=!0,o.end())}function n(){t||(t=!0,typeof o.destroy=="function"&&o.destroy())}function r(l){if(i(),M.listenerCount(this,"error")===0)throw l}function i(){b.removeListener("data",h),o.removeListener("drain",s),b.removeListener("end",a),b.removeListener("close",n),b.removeListener("error",r),o.removeListener("error",r),b.removeListener("end",i),b.removeListener("close",i),o.removeListener("close",i)}return b.on("error",r),o.on("error",r),b.on("end",i),b.on("close",i),o.on("close",i),o.emit("pipe",b),o}},92784:function(ee){var z={};function e(k,o,T){T||(T=Error);var b=function(h){var s,t;function a(n,r,i){return h.call(this,function(l,u,p){return typeof o=="string"?o:o(l,u,p)}(n,r,i))||this}return t=h,(s=a).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,a}(T);b.prototype.name=T.name,b.prototype.code=k,z[k]=b}function M(k,o){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(o," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(o," ").concat(k[0]," or ").concat(k[1]):"of ".concat(o," ").concat(k[0])}return"of ".concat(o," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,o){return'The value "'+o+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,o,T){var b,h,s,t,a;if(typeof o=="string"&&(h="not ",o.substr(0,4)===h)?(b="must not be",o=o.replace(/^not /,"")):b="must be",function(r,i,l){return(l===void 0||l>r.length)&&(l=r.length),r.substring(l-9,l)===i}(k," argument"))s="The ".concat(k," ").concat(b," ").concat(M(o,"type"));else{var n=(typeof a!="number"&&(a=0),a+1>(t=k).length||t.indexOf(".",a)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(n," ").concat(b," ").concat(M(o,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.i=z},15316:function(ee,z,e){var M=e(4168),k=Object.keys||function(r){var i=[];for(var l in r)i.push(l);return i};ee.exports=t;var o=e(12348),T=e(11288);e(6768)(t,o);for(var b=k(T.prototype),h=0;h<b.length;h++){var s=b[h];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(r){if(!(this instanceof t))return new t(r);o.call(this,r),T.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||M.nextTick(n,this)}function n(r){r.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},27136:function(ee,z,e){ee.exports=k;var M=e(22477);function k(o){if(!(this instanceof k))return new k(o);M.call(this,o)}e(6768)(k,M),k.prototype._transform=function(o,T,b){b(null,o)}},12348:function(ee,z,e){var M,k=e(4168);ee.exports=_,_.ReadableState=m,e(61252).EventEmitter;var o,T=function(J,X){return J.listeners(X).length},b=e(4776),h=e(33576).Buffer,s=e.g.Uint8Array||function(){},t=e(19768);o=t&&t.debuglog?t.debuglog("stream"):function(){};var a,n,r,i=e(47264),l=e(55324),u=e(24888).getHighWaterMark,p=e(92784).i,c=p.ERR_INVALID_ARG_TYPE,x=p.ERR_STREAM_PUSH_AFTER_EOF,d=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(_,b);var v=l.errorOrDestroy,y=["error","close","destroy","pause","resume"];function m(J,X,K){M=M||e(15316),J=J||{},typeof K!="boolean"&&(K=X instanceof M),this.objectMode=!!J.objectMode,K&&(this.objectMode=this.objectMode||!!J.readableObjectMode),this.highWaterMark=u(this,J,"readableHighWaterMark",K),this.buffer=new i,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.destroyed=!1,this.defaultEncoding=J.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,J.encoding&&(a||(a=e(86032).o),this.decoder=new a(J.encoding),this.encoding=J.encoding)}function _(J){if(M=M||e(15316),!(this instanceof _))return new _(J);var X=this instanceof M;this._readableState=new m(J,this,X),this.readable=!0,J&&(typeof J.read=="function"&&(this._read=J.read),typeof J.destroy=="function"&&(this._destroy=J.destroy)),b.call(this)}function f(J,X,K,Q,Z){o("readableAddChunk",X);var re,oe=J._readableState;if(X===null)oe.reading=!1,function(ae,ce){if(o("onEofChunk"),!ce.ended){if(ce.decoder){var he=ce.decoder.end();he&&he.length&&(ce.buffer.push(he),ce.length+=ce.objectMode?1:he.length)}ce.ended=!0,ce.sync?O(ae):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,C(ae)))}}(J,oe);else if(Z||(re=function(ae,ce){var he,pe;return pe=ce,h.isBuffer(pe)||pe instanceof s||typeof ce=="string"||ce===void 0||ae.objectMode||(he=new c("chunk",["string","Buffer","Uint8Array"],ce)),he}(oe,X)),re)v(J,re);else if(oe.objectMode||X&&X.length>0)if(typeof X=="string"||oe.objectMode||Object.getPrototypeOf(X)===h.prototype||(X=function(ae){return h.from(ae)}(X)),Q)oe.endEmitted?v(J,new g):S(J,oe,X,!0);else if(oe.ended)v(J,new x);else{if(oe.destroyed)return!1;oe.reading=!1,oe.decoder&&!K?(X=oe.decoder.write(X),oe.objectMode||X.length!==0?S(J,oe,X,!1):P(J,oe)):S(J,oe,X,!1)}else Q||(oe.reading=!1,P(J,oe));return!oe.ended&&(oe.length<oe.highWaterMark||oe.length===0)}function S(J,X,K,Q){X.flowing&&X.length===0&&!X.sync?(X.awaitDrain=0,J.emit("data",K)):(X.length+=X.objectMode?1:K.length,Q?X.buffer.unshift(K):X.buffer.push(K),X.needReadable&&O(J)),P(J,X)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(J){this._readableState&&(this._readableState.destroyed=J)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function(J,X){X(J)},_.prototype.push=function(J,X){var K,Q=this._readableState;return Q.objectMode?K=!0:typeof J=="string"&&((X=X||Q.defaultEncoding)!==Q.encoding&&(J=h.from(J,X),X=""),K=!0),f(this,J,X,!1,K)},_.prototype.unshift=function(J){return f(this,J,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(J){a||(a=e(86032).o);var X=new a(J);this._readableState.decoder=X,this._readableState.encoding=this._readableState.decoder.encoding;for(var K=this._readableState.buffer.head,Q="";K!==null;)Q+=X.write(K.data),K=K.next;return this._readableState.buffer.clear(),Q!==""&&this._readableState.buffer.push(Q),this._readableState.length=Q.length,this};var w=1073741824;function E(J,X){return J<=0||X.length===0&&X.ended?0:X.objectMode?1:J!=J?X.flowing&&X.length?X.buffer.head.data.length:X.length:(J>X.highWaterMark&&(X.highWaterMark=function(K){return K>=w?K=w:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}(J)),J<=X.length?J:X.ended?X.length:(X.needReadable=!0,0))}function O(J){var X=J._readableState;o("emitReadable",X.needReadable,X.emittedReadable),X.needReadable=!1,X.emittedReadable||(o("emitReadable",X.flowing),X.emittedReadable=!0,k.nextTick(C,J))}function C(J){var X=J._readableState;o("emitReadable_",X.destroyed,X.length,X.ended),X.destroyed||!X.length&&!X.ended||(J.emit("readable"),X.emittedReadable=!1),X.needReadable=!X.flowing&&!X.ended&&X.length<=X.highWaterMark,W(J)}function P(J,X){X.readingMore||(X.readingMore=!0,k.nextTick(R,J,X))}function R(J,X){for(;!X.reading&&!X.ended&&(X.length<X.highWaterMark||X.flowing&&X.length===0);){var K=X.length;if(o("maybeReadMore read 0"),J.read(0),K===X.length)break}X.readingMore=!1}function j(J){var X=J._readableState;X.readableListening=J.listenerCount("readable")>0,X.resumeScheduled&&!X.paused?X.flowing=!0:J.listenerCount("data")>0&&J.resume()}function D(J){o("readable nexttick read 0"),J.read(0)}function N(J,X){o("resume",X.reading),X.reading||J.read(0),X.resumeScheduled=!1,J.emit("resume"),W(J),X.flowing&&!X.reading&&J.read(0)}function W(J){var X=J._readableState;for(o("flow",X.flowing);X.flowing&&J.read()!==null;);}function F(J,X){return X.length===0?null:(X.objectMode?K=X.buffer.shift():!J||J>=X.length?(K=X.decoder?X.buffer.join(""):X.buffer.length===1?X.buffer.first():X.buffer.concat(X.length),X.buffer.clear()):K=X.buffer.consume(J,X.decoder),K);var K}function V(J){var X=J._readableState;o("endReadable",X.endEmitted),X.endEmitted||(X.ended=!0,k.nextTick(U,X,J))}function U(J,X){if(o("endReadableNT",J.endEmitted,J.length),!J.endEmitted&&J.length===0&&(J.endEmitted=!0,X.readable=!1,X.emit("end"),J.autoDestroy)){var K=X._writableState;(!K||K.autoDestroy&&K.finished)&&X.destroy()}}function te(J,X){for(var K=0,Q=J.length;K<Q;K++)if(J[K]===X)return K;return-1}_.prototype.read=function(J){o("read",J),J=parseInt(J,10);var X=this._readableState,K=J;if(J!==0&&(X.emittedReadable=!1),J===0&&X.needReadable&&((X.highWaterMark!==0?X.length>=X.highWaterMark:X.length>0)||X.ended))return o("read: emitReadable",X.length,X.ended),X.length===0&&X.ended?V(this):O(this),null;if((J=E(J,X))===0&&X.ended)return X.length===0&&V(this),null;var Q,Z=X.needReadable;return o("need readable",Z),(X.length===0||X.length-J<X.highWaterMark)&&o("length less than watermark",Z=!0),X.ended||X.reading?o("reading or ended",Z=!1):Z&&(o("do read"),X.reading=!0,X.sync=!0,X.length===0&&(X.needReadable=!0),this._read(X.highWaterMark),X.sync=!1,X.reading||(J=E(K,X))),(Q=J>0?F(J,X):null)===null?(X.needReadable=X.length<=X.highWaterMark,J=0):(X.length-=J,X.awaitDrain=0),X.length===0&&(X.ended||(X.needReadable=!0),K!==J&&X.ended&&V(this)),Q!==null&&this.emit("data",Q),Q},_.prototype._read=function(J){v(this,new d("_read()"))},_.prototype.pipe=function(J,X){var K=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=J;break;case 1:Q.pipes=[Q.pipes,J];break;default:Q.pipes.push(J)}Q.pipesCount+=1,o("pipe count=%d opts=%j",Q.pipesCount,X);var Z=X&&X.end===!1||J===k.stdout||J===k.stderr?be:re;function re(){o("onend"),J.end()}Q.endEmitted?k.nextTick(Z):K.once("end",Z),J.on("unpipe",function ve(ge,we){o("onunpipe"),ge===K&&we&&we.hasUnpiped===!1&&(we.hasUnpiped=!0,o("cleanup"),J.removeListener("close",pe),J.removeListener("finish",xe),J.removeListener("drain",oe),J.removeListener("error",he),J.removeListener("unpipe",ve),K.removeListener("end",re),K.removeListener("end",be),K.removeListener("data",ce),ae=!0,!Q.awaitDrain||J._writableState&&!J._writableState.needDrain||oe())});var oe=function(ve){return function(){var ge=ve._readableState;o("pipeOnDrain",ge.awaitDrain),ge.awaitDrain&&ge.awaitDrain--,ge.awaitDrain===0&&T(ve,"data")&&(ge.flowing=!0,W(ve))}}(K);J.on("drain",oe);var ae=!1;function ce(ve){o("ondata");var ge=J.write(ve);o("dest.write",ge),ge===!1&&((Q.pipesCount===1&&Q.pipes===J||Q.pipesCount>1&&te(Q.pipes,J)!==-1)&&!ae&&(o("false write response, pause",Q.awaitDrain),Q.awaitDrain++),K.pause())}function he(ve){o("onerror",ve),be(),J.removeListener("error",he),T(J,"error")===0&&v(J,ve)}function pe(){J.removeListener("finish",xe),be()}function xe(){o("onfinish"),J.removeListener("close",pe),be()}function be(){o("unpipe"),K.unpipe(J)}return K.on("data",ce),function(ve,ge,we){if(typeof ve.prependListener=="function")return ve.prependListener(ge,we);ve._events&&ve._events[ge]?Array.isArray(ve._events[ge])?ve._events[ge].unshift(we):ve._events[ge]=[we,ve._events[ge]]:ve.on(ge,we)}(J,"error",he),J.once("close",pe),J.once("finish",xe),J.emit("pipe",K),Q.flowing||(o("pipe resume"),K.resume()),J},_.prototype.unpipe=function(J){var X=this._readableState,K={hasUnpiped:!1};if(X.pipesCount===0)return this;if(X.pipesCount===1)return J&&J!==X.pipes||(J||(J=X.pipes),X.pipes=null,X.pipesCount=0,X.flowing=!1,J&&J.emit("unpipe",this,K)),this;if(!J){var Q=X.pipes,Z=X.pipesCount;X.pipes=null,X.pipesCount=0,X.flowing=!1;for(var re=0;re<Z;re++)Q[re].emit("unpipe",this,{hasUnpiped:!1});return this}var oe=te(X.pipes,J);return oe===-1||(X.pipes.splice(oe,1),X.pipesCount-=1,X.pipesCount===1&&(X.pipes=X.pipes[0]),J.emit("unpipe",this,K)),this},_.prototype.on=function(J,X){var K=b.prototype.on.call(this,J,X),Q=this._readableState;return J==="data"?(Q.readableListening=this.listenerCount("readable")>0,Q.flowing!==!1&&this.resume()):J==="readable"&&(Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,o("on readable",Q.length,Q.reading),Q.length?O(this):Q.reading||k.nextTick(D,this))),K},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(J,X){var K=b.prototype.removeListener.call(this,J,X);return J==="readable"&&k.nextTick(j,this),K},_.prototype.removeAllListeners=function(J){var X=b.prototype.removeAllListeners.apply(this,arguments);return J!=="readable"&&J!==void 0||k.nextTick(j,this),X},_.prototype.resume=function(){var J=this._readableState;return J.flowing||(o("resume"),J.flowing=!J.readableListening,function(X,K){K.resumeScheduled||(K.resumeScheduled=!0,k.nextTick(N,X,K))}(this,J)),J.paused=!1,this},_.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(J){var X=this,K=this._readableState,Q=!1;for(var Z in J.on("end",function(){if(o("wrapped end"),K.decoder&&!K.ended){var oe=K.decoder.end();oe&&oe.length&&X.push(oe)}X.push(null)}),J.on("data",function(oe){o("wrapped data"),K.decoder&&(oe=K.decoder.write(oe)),K.objectMode&&oe==null||(K.objectMode||oe&&oe.length)&&(X.push(oe)||(Q=!0,J.pause()))}),J)this[Z]===void 0&&typeof J[Z]=="function"&&(this[Z]=function(oe){return function(){return J[oe].apply(J,arguments)}}(Z));for(var re=0;re<y.length;re++)J.on(y[re],this.emit.bind(this,y[re]));return this._read=function(oe){o("wrapped _read",oe),Q&&(Q=!1,J.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return n===void 0&&(n=e(60328)),n(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(J){this._readableState&&(this._readableState.flowing=J)}}),_._fromList=F,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function(J,X){return r===void 0&&(r=e(90555)),r(_,J,X)})},22477:function(ee,z,e){ee.exports=t;var M=e(92784).i,k=M.ERR_METHOD_NOT_IMPLEMENTED,o=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=M.ERR_TRANSFORM_WITH_LENGTH_0,h=e(15316);function s(r,i){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(u===null)return this.emit("error",new o);l.writechunk=null,l.writecb=null,i!=null&&this.push(i),u(r);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function t(r){if(!(this instanceof t))return new t(r);h.call(this,r),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",a)}function a(){var r=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(i,l){n(r,i,l)})}function n(r,i,l){if(i)return r.emit("error",i);if(l!=null&&r.push(l),r._writableState.length)throw new b;if(r._transformState.transforming)throw new T;return r.push(null)}e(6768)(t,h),t.prototype.push=function(r,i){return this._transformState.needTransform=!1,h.prototype.push.call(this,r,i)},t.prototype._transform=function(r,i,l){l(new k("_transform()"))},t.prototype._write=function(r,i,l){var u=this._transformState;if(u.writecb=l,u.writechunk=r,u.writeencoding=i,!u.transforming){var p=this._readableState;(u.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},t.prototype._read=function(r){var i=this._transformState;i.writechunk===null||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},t.prototype._destroy=function(r,i){h.prototype._destroy.call(this,r,function(l){i(l)})}},11288:function(ee,z,e){var M,k=e(4168);function o(P){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(j,D,N){var W=j.entry;for(j.entry=null;W;){var F=W.callback;D.pendingcb--,F(void 0),W=W.next}D.corkedRequestsFree.next=j})(R,P)}}ee.exports=_,_.WritableState=m;var T,b={deprecate:e(96656)},h=e(4776),s=e(33576).Buffer,t=e.g.Uint8Array||function(){},a=e(55324),n=e(24888).getHighWaterMark,r=e(92784).i,i=r.ERR_INVALID_ARG_TYPE,l=r.ERR_METHOD_NOT_IMPLEMENTED,u=r.ERR_MULTIPLE_CALLBACK,p=r.ERR_STREAM_CANNOT_PIPE,c=r.ERR_STREAM_DESTROYED,x=r.ERR_STREAM_NULL_VALUES,d=r.ERR_STREAM_WRITE_AFTER_END,g=r.ERR_UNKNOWN_ENCODING,v=a.errorOrDestroy;function y(){}function m(P,R,j){M=M||e(15316),P=P||{},typeof j!="boolean"&&(j=R instanceof M),this.objectMode=!!P.objectMode,j&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=n(this,P,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=P.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){(function(W,F){var V=W._writableState,U=V.sync,te=V.writecb;if(typeof te!="function")throw new u;if(function(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0}(V),F)(function(X,K,Q,Z,re){--K.pendingcb,Q?(k.nextTick(re,Z),k.nextTick(C,X,K),X._writableState.errorEmitted=!0,v(X,Z)):(re(Z),X._writableState.errorEmitted=!0,v(X,Z),C(X,K))})(W,V,U,F,te);else{var J=E(V)||W.destroyed;J||V.corked||V.bufferProcessing||!V.bufferedRequest||w(W,V),U?k.nextTick(S,W,V,J,te):S(W,V,J,te)}})(R,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(P){var R=this instanceof(M=M||e(15316));if(!R&&!T.call(_,this))return new _(P);this._writableState=new m(P,this,R),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),h.call(this)}function f(P,R,j,D,N,W,F){R.writelen=D,R.writecb=F,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new c("write")):j?P._writev(N,R.onwrite):P._write(N,W,R.onwrite),R.sync=!1}function S(P,R,j,D){j||function(N,W){W.length===0&&W.needDrain&&(W.needDrain=!1,N.emit("drain"))}(P,R),R.pendingcb--,D(),C(P,R)}function w(P,R){R.bufferProcessing=!0;var j=R.bufferedRequest;if(P._writev&&j&&j.next){var D=R.bufferedRequestCount,N=new Array(D),W=R.corkedRequestsFree;W.entry=j;for(var F=0,V=!0;j;)N[F]=j,j.isBuf||(V=!1),j=j.next,F+=1;N.allBuffers=V,f(P,R,!0,R.length,N,"",W.finish),R.pendingcb++,R.lastBufferedRequest=null,W.next?(R.corkedRequestsFree=W.next,W.next=null):R.corkedRequestsFree=new o(R),R.bufferedRequestCount=0}else{for(;j;){var U=j.chunk,te=j.encoding,J=j.callback;if(f(P,R,!1,R.objectMode?1:U.length,U,te,J),j=j.next,R.bufferedRequestCount--,R.writing)break}j===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=j,R.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function O(P,R){P._final(function(j){R.pendingcb--,j&&v(P,j),R.prefinished=!0,P.emit("prefinish"),C(P,R)})}function C(P,R){var j=E(R);if(j&&(function(N,W){W.prefinished||W.finalCalled||(typeof N._final!="function"||W.destroyed?(W.prefinished=!0,N.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,k.nextTick(O,N,W)))}(P,R),R.pendingcb===0&&(R.finished=!0,P.emit("finish"),R.autoDestroy))){var D=P._readableState;(!D||D.autoDestroy&&D.endEmitted)&&P.destroy()}return j}e(6768)(_,h),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,R=[];P;)R.push(P),P=P.next;return R},function(){try{Object.defineProperty(m.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===_&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},_.prototype.pipe=function(){v(this,new p)},_.prototype.write=function(P,R,j){var D,N=this._writableState,W=!1,F=!N.objectMode&&(D=P,s.isBuffer(D)||D instanceof t);return F&&!s.isBuffer(P)&&(P=function(V){return s.from(V)}(P)),typeof R=="function"&&(j=R,R=null),F?R="buffer":R||(R=N.defaultEncoding),typeof j!="function"&&(j=y),N.ending?function(V,U){var te=new d;v(V,te),k.nextTick(U,te)}(this,j):(F||function(V,U,te,J){var X;return te===null?X=new x:typeof te=="string"||U.objectMode||(X=new i("chunk",["string","Buffer"],te)),!X||(v(V,X),k.nextTick(J,X),!1)}(this,N,P,j))&&(N.pendingcb++,W=function(V,U,te,J,X,K){if(!te){var Q=function(ae,ce,he){return ae.objectMode||ae.decodeStrings===!1||typeof ce!="string"||(ce=s.from(ce,he)),ce}(U,J,X);J!==Q&&(te=!0,X="buffer",J=Q)}var Z=U.objectMode?1:J.length;U.length+=Z;var re=U.length<U.highWaterMark;if(re||(U.needDrain=!0),U.writing||U.corked){var oe=U.lastBufferedRequest;U.lastBufferedRequest={chunk:J,encoding:X,isBuf:te,callback:K,next:null},oe?oe.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else f(V,U,!1,Z,J,X,K);return re}(this,N,F,P,R,j)),W},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||w(this,P))},_.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new g(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(P,R,j){j(new l("_write()"))},_.prototype._writev=null,_.prototype.end=function(P,R,j){var D=this._writableState;return typeof P=="function"?(j=P,P=null,R=null):typeof R=="function"&&(j=R,R=null),P!=null&&this.write(P,R),D.corked&&(D.corked=1,this.uncork()),D.ending||function(N,W,F){W.ending=!0,C(N,W),F&&(W.finished?k.nextTick(F):N.once("finish",F)),W.ended=!0,N.writable=!1}(this,D,j),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),_.prototype.destroy=a.destroy,_.prototype._undestroy=a.undestroy,_.prototype._destroy=function(P,R){R(P)}},60328:function(ee,z,e){var M,k=e(4168);function o(x,d,g){return d in x?Object.defineProperty(x,d,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[d]=g,x}var T=e(15932),b=Symbol("lastResolve"),h=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),a=Symbol("lastPromise"),n=Symbol("handlePromise"),r=Symbol("stream");function i(x,d){return{value:x,done:d}}function l(x){var d=x[b];if(d!==null){var g=x[r].read();g!==null&&(x[a]=null,x[b]=null,x[h]=null,d(i(g,!1)))}}function u(x){k.nextTick(l,x)}var p=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((o(M={get stream(){return this[r]},next:function(){var x=this,d=this[s];if(d!==null)return Promise.reject(d);if(this[t])return Promise.resolve(i(void 0,!0));if(this[r].destroyed)return new Promise(function(m,_){k.nextTick(function(){x[s]?_(x[s]):m(i(void 0,!0))})});var g,v=this[a];if(v)g=new Promise(function(m,_){return function(f,S){m.then(function(){_[t]?f(i(void 0,!0)):_[n](f,S)},S)}}(v,this));else{var y=this[r].read();if(y!==null)return Promise.resolve(i(y,!1));g=new Promise(this[n])}return this[a]=g,g}},Symbol.asyncIterator,function(){return this}),o(M,"return",function(){var x=this;return new Promise(function(d,g){x[r].destroy(null,function(v){v?g(v):d(i(void 0,!0))})})}),M),p);ee.exports=function(x){var d,g=Object.create(c,(o(d={},r,{value:x,writable:!0}),o(d,b,{value:null,writable:!0}),o(d,h,{value:null,writable:!0}),o(d,s,{value:null,writable:!0}),o(d,t,{value:x._readableState.endEmitted,writable:!0}),o(d,n,{value:function(v,y){var m=g[r].read();m?(g[a]=null,g[b]=null,g[h]=null,v(i(m,!1))):(g[b]=v,g[h]=y)},writable:!0}),d));return g[a]=null,T(x,function(v){if(v&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=g[h];return y!==null&&(g[a]=null,g[b]=null,g[h]=null,y(v)),void(g[s]=v)}var m=g[b];m!==null&&(g[a]=null,g[b]=null,g[h]=null,m(i(void 0,!0))),g[t]=!0}),x.on("readable",u.bind(null,g)),g}},47264:function(ee,z,e){function M(s,t){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),a.push.apply(a,n)}return a}function k(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function o(s,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}var T=e(33576).Buffer,b=e(21576).inspect,h=b&&b.custom||"inspect";ee.exports=function(){function s(){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,a;return t=s,a=[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=n+r.data;return i}},{key:"concat",value:function(n){if(this.length===0)return T.alloc(0);for(var r,i,l,u=T.allocUnsafe(n>>>0),p=this.head,c=0;p;)r=p.data,i=u,l=c,T.prototype.copy.call(r,i,l),c+=p.data.length,p=p.next;return u}},{key:"consume",value:function(n,r){var i;return n<this.head.data.length?(i=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):i=n===this.head.data.length?this.shift():r?this._getString(n):this._getBuffer(n),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,i=1,l=r.data;for(n-=l.length;r=r.next;){var u=r.data,p=n>u.length?u.length:n;if(p===u.length?l+=u:l+=u.slice(0,n),(n-=p)==0){p===u.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=u.slice(p));break}++i}return this.length-=i,l}},{key:"_getBuffer",value:function(n){var r=T.allocUnsafe(n),i=this.head,l=1;for(i.data.copy(r),n-=i.data.length;i=i.next;){var u=i.data,p=n>u.length?u.length:n;if(u.copy(r,r.length-n,0,p),(n-=p)==0){p===u.length?(++l,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=u.slice(p));break}++l}return this.length-=l,r}},{key:h,value:function(n,r){return b(this,function(i){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?M(Object(u),!0).forEach(function(p){k(i,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(u)):M(Object(u)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(u,p))})}return i}({},r,{depth:0,customInspect:!1}))}}],a&&o(t.prototype,a),s}()},55324:function(ee,z,e){var M=e(4168);function k(b,h){T(b,h),o(b)}function o(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,h){b.emit("error",h)}ee.exports={destroy:function(b,h){var s=this,t=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return t||a?(h?h(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(T,this,b)):M.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(n){!h&&n?s._writableState?s._writableState.errorEmitted?M.nextTick(o,s):(s._writableState.errorEmitted=!0,M.nextTick(k,s,n)):M.nextTick(k,s,n):h?(M.nextTick(o,s),h(n)):M.nextTick(o,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,h){var s=b._readableState,t=b._writableState;s&&s.autoDestroy||t&&t.autoDestroy?b.destroy(h):b.emit("error",h)}}},15932:function(ee,z,e){var M=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}ee.exports=function o(T,b,h){if(typeof b=="function")return o(T,null,b);b||(b={}),h=function(x){var d=!1;return function(){if(!d){d=!0;for(var g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];x.apply(this,v)}}}(h||k);var s=b.readable||b.readable!==!1&&T.readable,t=b.writable||b.writable!==!1&&T.writable,a=function(){T.writable||r()},n=T._writableState&&T._writableState.finished,r=function(){t=!1,n=!0,s||h.call(T)},i=T._readableState&&T._readableState.endEmitted,l=function(){s=!1,i=!0,t||h.call(T)},u=function(x){h.call(T,x)},p=function(){var x;return s&&!i?(T._readableState&&T._readableState.ended||(x=new M),h.call(T,x)):t&&!n?(T._writableState&&T._writableState.ended||(x=new M),h.call(T,x)):void 0},c=function(){T.req.on("finish",r)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",r),T.on("abort",p),T.req?c():T.on("request",c)):t&&!T._writableState&&(T.on("end",a),T.on("close",a)),T.on("end",l),T.on("finish",r),b.error!==!1&&T.on("error",u),T.on("close",p),function(){T.removeListener("complete",r),T.removeListener("abort",p),T.removeListener("request",c),T.req&&T.req.removeListener("finish",r),T.removeListener("end",a),T.removeListener("close",a),T.removeListener("finish",r),T.removeListener("end",l),T.removeListener("error",u),T.removeListener("close",p)}}},90555:function(ee){ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(ee,z,e){var M,k=e(92784).i,o=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function h(t){t()}function s(t,a){return t.pipe(a)}ee.exports=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var r,i=function(u){return u.length?typeof u[u.length-1]!="function"?b:u.pop():b}(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new o("streams");var l=a.map(function(u,p){var c=p<a.length-1;return function(x,d,g,v){v=function(_){var f=!1;return function(){f||(f=!0,_.apply(void 0,arguments))}}(v);var y=!1;x.on("close",function(){y=!0}),M===void 0&&(M=e(15932)),M(x,{readable:d,writable:g},function(_){if(_)return v(_);y=!0,v()});var m=!1;return function(_){if(!y&&!m)return m=!0,function(f){return f.setHeader&&typeof f.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void v(_||new T("pipe"))}}(u,c,p>0,function(x){r||(r=x),x&&l.forEach(h),c||(l.forEach(h),i(r))})});return a.reduce(s)}},24888:function(ee,z,e){var M=e(92784).i.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function(k,o,T,b){var h=function(s,t,a){return s.highWaterMark!=null?s.highWaterMark:t?s[a]:null}(o,b,T);if(h!=null){if(!isFinite(h)||Math.floor(h)!==h||h<0)throw new M(b?T:"highWaterMark",h);return Math.floor(h)}return k.objectMode?16:16384}}},4776:function(ee,z,e){ee.exports=e(61252).EventEmitter},86032:function(ee,z,e){var M=e(30456).Buffer,k=M.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(i){var l;switch(this.encoding=function(u){var p=function(c){if(!c)return"utf8";for(var x;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(x)return;c=(""+c).toLowerCase(),x=!0}}(u);if(typeof p!="string"&&(M.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return p||u}(i),this.encoding){case"utf16le":this.text=h,this.end=s,l=4;break;case"utf8":this.fillLast=b,l=4;break;case"base64":this.text=t,this.end=a,l=3;break;default:return this.write=n,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(l)}function T(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function b(i){var l=this.lastTotal-this.lastNeed,u=function(p,c,x){if((192&c[0])!=128)return p.lastNeed=0,"";if(p.lastNeed>1&&c.length>1){if((192&c[1])!=128)return p.lastNeed=1,"";if(p.lastNeed>2&&c.length>2&&(192&c[2])!=128)return p.lastNeed=2,""}}(this,i);return u!==void 0?u:this.lastNeed<=i.length?(i.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,l,0,i.length),void(this.lastNeed-=i.length))}function h(i,l){if((i.length-l)%2==0){var u=i.toString("utf16le",l);if(u){var p=u.charCodeAt(u.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",l,i.length-1)}function s(i){var l=i&&i.length?this.write(i):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,u)}return l}function t(i,l){var u=(i.length-l)%3;return u===0?i.toString("base64",l):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",l,i.length-u))}function a(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function n(i){return i.toString(this.encoding)}function r(i){return i&&i.length?this.write(i):""}z.o=o,o.prototype.write=function(i){if(i.length===0)return"";var l,u;if(this.lastNeed){if((l=this.fillLast(i))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<i.length?l?l+this.text(i,u):this.text(i,u):l||""},o.prototype.end=function(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+"":l},o.prototype.text=function(i,l){var u=function(c,x,d){var g=x.length-1;if(g<d)return 0;var v=T(x[g]);return v>=0?(v>0&&(c.lastNeed=v-1),v):--g<d||v===-2?0:(v=T(x[g]))>=0?(v>0&&(c.lastNeed=v-2),v):--g<d||v===-2?0:(v=T(x[g]))>=0?(v>0&&(v===2?v=0:c.lastNeed=v-3),v):0}(this,i,l);if(!this.lastNeed)return i.toString("utf8",l);this.lastTotal=u;var p=i.length-(u-this.lastNeed);return i.copy(this.lastChar,0,p),i.toString("utf8",l,p)},o.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},55619:function(ee,z,e){var M=e(45408),k=e(86844)("stream-parser");ee.exports=function(c){var x=c&&typeof c._transform=="function",d=c&&typeof c._write=="function";if(!x&&!d)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),c._bytes=t,c._skipBytes=a,x&&(c._passthrough=n),x?c._transform=i:c._write=r};var o=-1,T=0,b=1,h=2;function s(c){k("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=o,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||s(this),k("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=T}function a(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=b}function n(c,x){M(!this._parserCallback,'There is already a "callback" set!'),M(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=h}function r(c,x,d){this._parserInit||s(this),k("write(%o bytes)",c.length),typeof x=="function"&&(d=x),u(this,c,null,d)}function i(c,x,d){this._parserInit||s(this),k("transform(%o bytes)",c.length),typeof x!="function"&&(x=this._parserOutput),u(this,c,x,d)}function l(c,x,d,g){if(c._parserBytesLeft-=x.length,k("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(x),c._parserBuffered+=x.length):c._parserState===h&&d(x),c._parserBytesLeft!==0)return g;var v=c._parserCallback;if(v&&c._parserState===T&&c._parserBuffers.length>1&&(x=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(x=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=o,c._parserBuffers.splice(0),v){var y=[];x&&y.push(x),d&&y.push(d);var m=v.length>y.length;m&&y.push(p(g));var _=v.apply(c,y);if(!m||g===_)return g}}var u=p(function c(x,d,g,v){return x._parserBytesLeft<=0?v(new Error("got data but not currently parsing anything")):d.length<=x._parserBytesLeft?function(){return l(x,d,g,v)}:function(){var y=d.slice(0,x._parserBytesLeft);return l(x,y,g,function(m){return m?v(m):d.length>y.length?function(){return c(x,d.slice(y.length),g,v)}:void 0})}});function p(c){return function(){for(var x=c.apply(this,arguments);typeof x=="function";)x=x();return x}}},86844:function(ee,z,e){var M=e(4168);function k(){var o;try{o=z.storage.debug}catch{}return!o&&M!==void 0&&"env"in M&&(o=M.env.DEBUG),o}(z=ee.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},z.formatArgs=function(o){var T=this.useColors;if(o[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+o[0]+(T?"%c ":" ")+"+"+z.humanize(this.diff),T){var b="color: "+this.color;o.splice(1,0,b,"color: inherit");var h=0,s=0;o[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(h++,t==="%c"&&(s=h))}),o.splice(s,0,b)}},z.save=function(o){try{o==null?z.storage.removeItem("debug"):z.storage.debug=o}catch{}},z.load=k,z.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},z.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),z.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],z.formatters.j=function(o){try{return JSON.stringify(o)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},z.enable(k())},89416:function(ee,z,e){var M;function k(o){function T(){if(T.enabled){var b=T,h=+new Date,s=h-(M||h);b.diff=s,b.prev=M,b.curr=h,M=h;for(var t=new Array(arguments.length),a=0;a<t.length;a++)t[a]=arguments[a];t[0]=z.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(r,i){if(r==="%%")return r;n++;var l=z.formatters[i];if(typeof l=="function"){var u=t[n];r=l.call(b,u),t.splice(n,1),n--}return r}),z.formatArgs.call(b,t),(T.log||z.log||console.log.bind(console)).apply(b,t)}}return T.namespace=o,T.enabled=z.enabled(o),T.useColors=z.useColors(),T.color=function(b){var h,s=0;for(h in b)s=(s<<5)-s+b.charCodeAt(h),s|=0;return z.colors[Math.abs(s)%z.colors.length]}(o),typeof z.init=="function"&&z.init(T),T}(z=ee.exports=k.debug=k.default=k).coerce=function(o){return o instanceof Error?o.stack||o.message:o},z.disable=function(){z.enable("")},z.enable=function(o){z.save(o),z.names=[],z.skips=[];for(var T=(typeof o=="string"?o:"").split(/[\s,]+/),b=T.length,h=0;h<b;h++)T[h]&&((o=T[h].replace(/\*/g,".*?"))[0]==="-"?z.skips.push(new RegExp("^"+o.substr(1)+"$")):z.names.push(new RegExp("^"+o+"$")))},z.enabled=function(o){var T,b;for(T=0,b=z.skips.length;T<b;T++)if(z.skips[T].test(o))return!1;for(T=0,b=z.names.length;T<b;T++)if(z.names[T].test(o))return!0;return!1},z.humanize=e(93744),z.names=[],z.skips=[],z.formatters={}},93744:function(ee){var z=1e3,e=60*z,M=60*e,k=24*M;function o(T,b,h){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+h:Math.ceil(T/b)+" "+h+"s"}ee.exports=function(T,b){b=b||{};var h,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(a){var n=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*k;case"hours":case"hour":case"hrs":case"hr":case"h":return n*M;case"minutes":case"minute":case"mins":case"min":case"m":return n*e;case"seconds":case"second":case"secs":case"sec":case"s":return n*z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return b.long?o(h=T,k,"day")||o(h,M,"hour")||o(h,e,"minute")||o(h,z,"second")||h+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=M?Math.round(t/M)+"h":t>=e?Math.round(t/e)+"m":t>=z?Math.round(t/z)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(ee,z,e){var M=e(32868);ee.exports=function(k,o,T){if(k==null)throw Error("First argument should be a string");if(o==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(r){return r.length===1&&(r+=r),r}));var b=M.parse(k,{flat:!0,brackets:T.ignore}),h=b[0].split(o);if(T.escape){for(var s=[],t=0;t<h.length;t++){var a=h[t],n=h[t+1];a[a.length-1]==="\\"&&a[a.length-2]!=="\\"?(s.push(a+o+n),t++):s.push(a)}h=s}for(t=0;t<h.length;t++)b[0]=h[t],h[t]=M.stringify(b,{flat:!0});return h}},78484:function(ee){ee.exports=function(z){for(var e=z.length,M=new Array(e),k=new Array(e),o=new Array(e),T=new Array(e),b=new Array(e),h=new Array(e),s=0;s<e;++s)M[s]=-1,k[s]=0,o[s]=!1,T[s]=0,b[s]=-1,h[s]=[];var t,a=0,n=[],r=[];function i(p){var c=[p],x=[p];for(M[p]=k[p]=a,o[p]=!0,a+=1;x.length>0;){p=x[x.length-1];var d=z[p];if(T[p]<d.length){for(var g=T[p];g<d.length;++g){var v=d[g];if(M[v]<0){M[v]=k[v]=a,o[v]=!0,a+=1,c.push(v),x.push(v);break}o[v]&&(k[p]=0|Math.min(k[p],k[v])),b[v]>=0&&h[p].push(b[v])}T[p]=g}else{if(k[p]===M[p]){var y=[],m=[],_=0;for(g=c.length-1;g>=0;--g){var f=c[g];if(o[f]=!1,y.push(f),m.push(h[f]),_+=h[f].length,b[f]=n.length,f===p){c.length=g;break}}n.push(y);var S=new Array(_);for(g=0;g<m.length;g++)for(var w=0;w<m[g].length;w++)S[--_]=m[g][w];r.push(S)}x.pop()}}}for(s=0;s<e;++s)M[s]<0&&i(s);for(s=0;s<r.length;s++){var l=r[s];if(l.length!==0){l.sort(function(p,c){return p-c}),t=[l[0]];for(var u=1;u<l.length;u++)l[u]!==l[u-1]&&t.push(l[u]);r[s]=t}}return{components:n,adjacencyList:r}}},92848:function(ee,z,e){e.r(z);var M=2*Math.PI,k=function(b,h,s,t,a,n,r){var i=b.x,l=b.y;return{x:t*(i*=h)-a*(l*=s)+n,y:a*i+t*l+r}},o=function(b,h){var s=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),t=Math.cos(b),a=Math.sin(b),n=Math.cos(b+h),r=Math.sin(b+h);return[{x:t-a*s,y:a+t*s},{x:n+r*s,y:r-n*s},{x:n,y:r}]},T=function(b,h,s,t){var a=b*s+h*t;return a>1&&(a=1),a<-1&&(a=-1),(b*t-h*s<0?-1:1)*Math.acos(a)};z.default=function(b){var h=b.px,s=b.py,t=b.cx,a=b.cy,n=b.rx,r=b.ry,i=b.xAxisRotation,l=i===void 0?0:i,u=b.largeArcFlag,p=u===void 0?0:u,c=b.sweepFlag,x=c===void 0?0:c,d=[];if(n===0||r===0)return[];var g=Math.sin(l*M/360),v=Math.cos(l*M/360),y=v*(h-t)/2+g*(s-a)/2,m=-g*(h-t)/2+v*(s-a)/2;if(y===0&&m===0)return[];n=Math.abs(n),r=Math.abs(r);var _=Math.pow(y,2)/Math.pow(n,2)+Math.pow(m,2)/Math.pow(r,2);_>1&&(n*=Math.sqrt(_),r*=Math.sqrt(_));var f=function(D,N,W,F,V,U,te,J,X,K,Q,Z){var re=Math.pow(V,2),oe=Math.pow(U,2),ae=Math.pow(Q,2),ce=Math.pow(Z,2),he=re*oe-re*ce-oe*ae;he<0&&(he=0),he/=re*ce+oe*ae;var pe=(he=Math.sqrt(he)*(te===J?-1:1))*V/U*Z,xe=he*-U/V*Q,be=K*pe-X*xe+(D+W)/2,ve=X*pe+K*xe+(N+F)/2,ge=(Q-pe)/V,we=(Z-xe)/U,_e=(-Q-pe)/V,se=(-Z-xe)/U,ie=T(1,0,ge,we),fe=T(ge,we,_e,se);return J===0&&fe>0&&(fe-=M),J===1&&fe<0&&(fe+=M),[be,ve,ie,fe]}(h,s,t,a,n,r,p,x,g,v,y,m),S=function(D,N){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return function(W,F){var V=[],U=!0,te=!1,J=void 0;try{for(var X,K=W[Symbol.iterator]();!(U=(X=K.next()).done)&&(V.push(X.value),!F||V.length!==F);U=!0);}catch(Q){te=!0,J=Q}finally{try{!U&&K.return&&K.return()}finally{if(te)throw J}}return V}(D,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(f,4),w=S[0],E=S[1],O=S[2],C=S[3],P=Math.abs(C)/(M/4);Math.abs(1-P)<1e-7&&(P=1);var R=Math.max(Math.ceil(P),1);C/=R;for(var j=0;j<R;j++)d.push(o(O,C)),O+=C;return d.map(function(D){var N=k(D[0],n,r,v,g,w,E),W=N.x,F=N.y,V=k(D[1],n,r,v,g,w,E),U=V.x,te=V.y,J=k(D[2],n,r,v,g,w,E);return{x1:W,y1:F,x2:U,y2:te,x:J.x,y:J.y}})}},74840:function(ee,z,e){var M=e(21984),k=e(49972),o=e(41976),T=e(53520),b=e(45408);ee.exports=function(h){if(Array.isArray(h)&&h.length===1&&typeof h[0]=="string"&&(h=h[0]),typeof h=="string"&&(b(T(h),"String is not an SVG path."),h=M(h)),b(Array.isArray(h),"Argument should be a string or an array of path segments."),h=k(h),!(h=o(h)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,a=h.length;t<a;t++)for(var n=h[t].slice(1),r=0;r<n.length;r+=2)n[r+0]<s[0]&&(s[0]=n[r+0]),n[r+1]<s[1]&&(s[1]=n[r+1]),n[r+0]>s[2]&&(s[2]=n[r+0]),n[r+1]>s[3]&&(s[3]=n[r+1]);return s}},41976:function(ee,z,e){ee.exports=function(T){for(var b,h=[],s=0,t=0,a=0,n=0,r=null,i=null,l=0,u=0,p=0,c=T.length;p<c;p++){var x=T[p],d=x[0];switch(d){case"M":a=x[1],n=x[2];break;case"A":var g=M({px:l,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!g.length)continue;for(var v,y=0;y<g.length;y++)x=["C",(v=g[y]).x1,v.y1,v.x2,v.y2,v.x,v.y],y<g.length-1&&h.push(x);break;case"S":var m=l,_=u;b!="C"&&b!="S"||(m+=m-s,_+=_-t),x=["C",m,_,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(r=2*l-r,i=2*u-i):(r=l,i=u),x=o(l,u,r,i,x[1],x[2]);break;case"Q":r=x[1],i=x[2],x=o(l,u,x[1],x[2],x[3],x[4]);break;case"L":x=k(l,u,x[1],x[2]);break;case"H":x=k(l,u,x[1],u);break;case"V":x=k(l,u,l,x[1]);break;case"Z":x=k(l,u,a,n)}b=d,l=x[x.length-2],u=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=l,t=u),h.push(x)}return h};var M=e(92848);function k(T,b,h,s){return["C",T,b,h,s,h,s]}function o(T,b,h,s,t,a){return["C",T/3+.6666666666666666*h,b/3+.6666666666666666*s,t/3+.6666666666666666*h,a/3+.6666666666666666*s,t,a]}},20472:function(ee,z,e){var M,k=e(74840),o=e(21984),T=e(22235),b=e(53520),h=e(29620),s=document.createElement("canvas"),t=s.getContext("2d");ee.exports=function(a,n){if(!b(a))throw Error("Argument should be valid svg path string");var r,i;n||(n={}),n.shape?(r=n.shape[0],i=n.shape[1]):(r=s.width=n.w||n.width||200,i=s.height=n.h||n.height||200);var l=Math.min(r,i),u=n.stroke||0,p=n.viewbox||n.viewBox||k(a),c=[r/(p[2]-p[0]),i/(p[3]-p[1])],x=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,r,i),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*r,.5*i),t.scale(x,x),function(){if(M!=null)return M;var v=document.createElement("canvas").getContext("2d");if(v.canvas.width=v.canvas.height=1,!window.Path2D)return M=!1;var y=new Path2D("M0,0h1v1h-1v-1Z");v.fillStyle="black",v.fill(y);var m=v.getImageData(0,0,1,1);return M=m&&m.data&&m.data[3]===255}()){var d=new Path2D(a);t.fill(d),u&&t.stroke(d)}else{var g=o(a);T(t,g),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),h(t,{cutoff:n.cutoff!=null?n.cutoff:.5,radius:n.radius!=null?n.radius:.5*l})}},49760:function(ee,z,e){var M;(function(k){var o=/^\s+/,T=/\s+$/,b=0,h=k.round,s=k.min,t=k.max,a=k.random;function n(Q,Z){if(Z=Z||{},(Q=Q||"")instanceof n)return Q;if(!(this instanceof n))return new n(Q,Z);var re=function(oe){var ae,ce,he,pe={r:0,g:0,b:0},xe=1,be=null,ve=null,ge=null,we=!1,_e=!1;return typeof oe=="string"&&(oe=function(se){se=se.replace(o,"").replace(T,"").toLowerCase();var ie,fe=!1;if(O[se])se=O[se],fe=!0;else if(se=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ie=X.rgb.exec(se))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=X.rgba.exec(se))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=X.hsl.exec(se))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=X.hsla.exec(se))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=X.hsv.exec(se))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=X.hsva.exec(se))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=X.hex8.exec(se))?{r:D(ie[1]),g:D(ie[2]),b:D(ie[3]),a:V(ie[4]),format:fe?"name":"hex8"}:(ie=X.hex6.exec(se))?{r:D(ie[1]),g:D(ie[2]),b:D(ie[3]),format:fe?"name":"hex"}:(ie=X.hex4.exec(se))?{r:D(ie[1]+""+ie[1]),g:D(ie[2]+""+ie[2]),b:D(ie[3]+""+ie[3]),a:V(ie[4]+""+ie[4]),format:fe?"name":"hex8"}:!!(ie=X.hex3.exec(se))&&{r:D(ie[1]+""+ie[1]),g:D(ie[2]+""+ie[2]),b:D(ie[3]+""+ie[3]),format:fe?"name":"hex"}}(oe)),typeof oe=="object"&&(K(oe.r)&&K(oe.g)&&K(oe.b)?(ae=oe.r,ce=oe.g,he=oe.b,pe={r:255*R(ae,255),g:255*R(ce,255),b:255*R(he,255)},we=!0,_e=String(oe.r).substr(-1)==="%"?"prgb":"rgb"):K(oe.h)&&K(oe.s)&&K(oe.v)?(be=W(oe.s),ve=W(oe.v),pe=function(se,ie,fe){se=6*R(se,360),ie=R(ie,100),fe=R(fe,100);var Ee=k.floor(se),Te=se-Ee,Ae=fe*(1-ie),Se=fe*(1-Te*ie),Oe=fe*(1-(1-Te)*ie),De=Ee%6;return{r:255*[fe,Se,Ae,Ae,Oe,fe][De],g:255*[Oe,fe,fe,Se,Ae,Ae][De],b:255*[Ae,Ae,Oe,fe,fe,Se][De]}}(oe.h,be,ve),we=!0,_e="hsv"):K(oe.h)&&K(oe.s)&&K(oe.l)&&(be=W(oe.s),ge=W(oe.l),pe=function(se,ie,fe){var Ee,Te,Ae;function Se(de,me,Me){return Me<0&&(Me+=1),Me>1&&(Me-=1),Me<1/6?de+6*(me-de)*Me:Me<.5?me:Me<2/3?de+(me-de)*(2/3-Me)*6:de}if(se=R(se,360),ie=R(ie,100),fe=R(fe,100),ie===0)Ee=Te=Ae=fe;else{var Oe=fe<.5?fe*(1+ie):fe+ie-fe*ie,De=2*fe-Oe;Ee=Se(De,Oe,se+1/3),Te=Se(De,Oe,se),Ae=Se(De,Oe,se-1/3)}return{r:255*Ee,g:255*Te,b:255*Ae}}(oe.h,be,ge),we=!0,_e="hsl"),oe.hasOwnProperty("a")&&(xe=oe.a)),xe=P(xe),{ok:we,format:oe.format||_e,r:s(255,t(pe.r,0)),g:s(255,t(pe.g,0)),b:s(255,t(pe.b,0)),a:xe}}(Q);this._originalInput=Q,this._r=re.r,this._g=re.g,this._b=re.b,this._a=re.a,this._roundA=h(100*this._a)/100,this._format=Z.format||re.format,this._gradientType=Z.gradientType,this._r<1&&(this._r=h(this._r)),this._g<1&&(this._g=h(this._g)),this._b<1&&(this._b=h(this._b)),this._ok=re.ok,this._tc_id=b++}function r(Q,Z,re){Q=R(Q,255),Z=R(Z,255),re=R(re,255);var oe,ae,ce=t(Q,Z,re),he=s(Q,Z,re),pe=(ce+he)/2;if(ce==he)oe=ae=0;else{var xe=ce-he;switch(ae=pe>.5?xe/(2-ce-he):xe/(ce+he),ce){case Q:oe=(Z-re)/xe+(Z<re?6:0);break;case Z:oe=(re-Q)/xe+2;break;case re:oe=(Q-Z)/xe+4}oe/=6}return{h:oe,s:ae,l:pe}}function i(Q,Z,re){Q=R(Q,255),Z=R(Z,255),re=R(re,255);var oe,ae,ce=t(Q,Z,re),he=s(Q,Z,re),pe=ce,xe=ce-he;if(ae=ce===0?0:xe/ce,ce==he)oe=0;else{switch(ce){case Q:oe=(Z-re)/xe+(Z<re?6:0);break;case Z:oe=(re-Q)/xe+2;break;case re:oe=(Q-Z)/xe+4}oe/=6}return{h:oe,s:ae,v:pe}}function l(Q,Z,re,oe){var ae=[N(h(Q).toString(16)),N(h(Z).toString(16)),N(h(re).toString(16))];return oe&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function u(Q,Z,re,oe){return[N(F(oe)),N(h(Q).toString(16)),N(h(Z).toString(16)),N(h(re).toString(16))].join("")}function p(Q,Z){Z=Z===0?0:Z||10;var re=n(Q).toHsl();return re.s-=Z/100,re.s=j(re.s),n(re)}function c(Q,Z){Z=Z===0?0:Z||10;var re=n(Q).toHsl();return re.s+=Z/100,re.s=j(re.s),n(re)}function x(Q){return n(Q).desaturate(100)}function d(Q,Z){Z=Z===0?0:Z||10;var re=n(Q).toHsl();return re.l+=Z/100,re.l=j(re.l),n(re)}function g(Q,Z){Z=Z===0?0:Z||10;var re=n(Q).toRgb();return re.r=t(0,s(255,re.r-h(-Z/100*255))),re.g=t(0,s(255,re.g-h(-Z/100*255))),re.b=t(0,s(255,re.b-h(-Z/100*255))),n(re)}function v(Q,Z){Z=Z===0?0:Z||10;var re=n(Q).toHsl();return re.l-=Z/100,re.l=j(re.l),n(re)}function y(Q,Z){var re=n(Q).toHsl(),oe=(re.h+Z)%360;return re.h=oe<0?360+oe:oe,n(re)}function m(Q){var Z=n(Q).toHsl();return Z.h=(Z.h+180)%360,n(Z)}function _(Q){var Z=n(Q).toHsl(),re=Z.h;return[n(Q),n({h:(re+120)%360,s:Z.s,l:Z.l}),n({h:(re+240)%360,s:Z.s,l:Z.l})]}function f(Q){var Z=n(Q).toHsl(),re=Z.h;return[n(Q),n({h:(re+90)%360,s:Z.s,l:Z.l}),n({h:(re+180)%360,s:Z.s,l:Z.l}),n({h:(re+270)%360,s:Z.s,l:Z.l})]}function S(Q){var Z=n(Q).toHsl(),re=Z.h;return[n(Q),n({h:(re+72)%360,s:Z.s,l:Z.l}),n({h:(re+216)%360,s:Z.s,l:Z.l})]}function w(Q,Z,re){Z=Z||6,re=re||30;var oe=n(Q).toHsl(),ae=360/re,ce=[n(Q)];for(oe.h=(oe.h-(ae*Z>>1)+720)%360;--Z;)oe.h=(oe.h+ae)%360,ce.push(n(oe));return ce}function E(Q,Z){Z=Z||6;for(var re=n(Q).toHsv(),oe=re.h,ae=re.s,ce=re.v,he=[],pe=1/Z;Z--;)he.push(n({h:oe,s:ae,v:ce})),ce=(ce+pe)%1;return he}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Q=this.toRgb();return(299*Q.r+587*Q.g+114*Q.b)/1e3},getLuminance:function(){var Q,Z,re,oe=this.toRgb();return Q=oe.r/255,Z=oe.g/255,re=oe.b/255,.2126*(Q<=.03928?Q/12.92:k.pow((Q+.055)/1.055,2.4))+.7152*(Z<=.03928?Z/12.92:k.pow((Z+.055)/1.055,2.4))+.0722*(re<=.03928?re/12.92:k.pow((re+.055)/1.055,2.4))},setAlpha:function(Q){return this._a=P(Q),this._roundA=h(100*this._a)/100,this},toHsv:function(){var Q=i(this._r,this._g,this._b);return{h:360*Q.h,s:Q.s,v:Q.v,a:this._a}},toHsvString:function(){var Q=i(this._r,this._g,this._b),Z=h(360*Q.h),re=h(100*Q.s),oe=h(100*Q.v);return this._a==1?"hsv("+Z+", "+re+"%, "+oe+"%)":"hsva("+Z+", "+re+"%, "+oe+"%, "+this._roundA+")"},toHsl:function(){var Q=r(this._r,this._g,this._b);return{h:360*Q.h,s:Q.s,l:Q.l,a:this._a}},toHslString:function(){var Q=r(this._r,this._g,this._b),Z=h(360*Q.h),re=h(100*Q.s),oe=h(100*Q.l);return this._a==1?"hsl("+Z+", "+re+"%, "+oe+"%)":"hsla("+Z+", "+re+"%, "+oe+"%, "+this._roundA+")"},toHex:function(Q){return l(this._r,this._g,this._b,Q)},toHexString:function(Q){return"#"+this.toHex(Q)},toHex8:function(Q){return function(Z,re,oe,ae,ce){var he=[N(h(Z).toString(16)),N(h(re).toString(16)),N(h(oe).toString(16)),N(F(ae))];return ce&&he[0].charAt(0)==he[0].charAt(1)&&he[1].charAt(0)==he[1].charAt(1)&&he[2].charAt(0)==he[2].charAt(1)&&he[3].charAt(0)==he[3].charAt(1)?he[0].charAt(0)+he[1].charAt(0)+he[2].charAt(0)+he[3].charAt(0):he.join("")}(this._r,this._g,this._b,this._a,Q)},toHex8String:function(Q){return"#"+this.toHex8(Q)},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:h(100*R(this._r,255))+"%",g:h(100*R(this._g,255))+"%",b:h(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+h(100*R(this._r,255))+"%, "+h(100*R(this._g,255))+"%, "+h(100*R(this._b,255))+"%)":"rgba("+h(100*R(this._r,255))+"%, "+h(100*R(this._g,255))+"%, "+h(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Q){var Z="#"+u(this._r,this._g,this._b,this._a),re=Z,oe=this._gradientType?"GradientType = 1, ":"";if(Q){var ae=n(Q);re="#"+u(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+oe+"startColorstr="+Z+",endColorstr="+re+")"},toString:function(Q){var Z=!!Q;Q=Q||this._format;var re=!1,oe=this._a<1&&this._a>=0;return Z||!oe||Q!=="hex"&&Q!=="hex6"&&Q!=="hex3"&&Q!=="hex4"&&Q!=="hex8"&&Q!=="name"?(Q==="rgb"&&(re=this.toRgbString()),Q==="prgb"&&(re=this.toPercentageRgbString()),Q!=="hex"&&Q!=="hex6"||(re=this.toHexString()),Q==="hex3"&&(re=this.toHexString(!0)),Q==="hex4"&&(re=this.toHex8String(!0)),Q==="hex8"&&(re=this.toHex8String()),Q==="name"&&(re=this.toName()),Q==="hsl"&&(re=this.toHslString()),Q==="hsv"&&(re=this.toHsvString()),re||this.toHexString()):Q==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(Q,Z){var re=Q.apply(null,[this].concat([].slice.call(Z)));return this._r=re._r,this._g=re._g,this._b=re._b,this.setAlpha(re._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(Q,Z){return Q.apply(null,[this].concat([].slice.call(Z)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(f,arguments)}},n.fromRatio=function(Q,Z){if(typeof Q=="object"){var re={};for(var oe in Q)Q.hasOwnProperty(oe)&&(re[oe]=oe==="a"?Q[oe]:W(Q[oe]));Q=re}return n(Q,Z)},n.equals=function(Q,Z){return!(!Q||!Z)&&n(Q).toRgbString()==n(Z).toRgbString()},n.random=function(){return n.fromRatio({r:a(),g:a(),b:a()})},n.mix=function(Q,Z,re){re=re===0?0:re||50;var oe=n(Q).toRgb(),ae=n(Z).toRgb(),ce=re/100;return n({r:(ae.r-oe.r)*ce+oe.r,g:(ae.g-oe.g)*ce+oe.g,b:(ae.b-oe.b)*ce+oe.b,a:(ae.a-oe.a)*ce+oe.a})},n.readability=function(Q,Z){var re=n(Q),oe=n(Z);return(k.max(re.getLuminance(),oe.getLuminance())+.05)/(k.min(re.getLuminance(),oe.getLuminance())+.05)},n.isReadable=function(Q,Z,re){var oe,ae,ce,he,pe,xe=n.readability(Q,Z);switch(ae=!1,(ce=re,(he=((ce=ce||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&he!=="AAA"&&(he="AA"),(pe=(ce.size||"small").toLowerCase())!=="small"&&pe!=="large"&&(pe="small"),oe={level:he,size:pe}).level+oe.size){case"AAsmall":case"AAAlarge":ae=xe>=4.5;break;case"AAlarge":ae=xe>=3;break;case"AAAsmall":ae=xe>=7}return ae},n.mostReadable=function(Q,Z,re){var oe,ae,ce,he,pe=null,xe=0;ae=(re=re||{}).includeFallbackColors,ce=re.level,he=re.size;for(var be=0;be<Z.length;be++)(oe=n.readability(Q,Z[be]))>xe&&(xe=oe,pe=n(Z[be]));return n.isReadable(Q,pe,{level:ce,size:he})||!ae?pe:(re.includeFallbackColors=!1,n.mostReadable(Q,["#fff","#000"],re))};var O=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=n.hexNames=function(Q){var Z={};for(var re in Q)Q.hasOwnProperty(re)&&(Z[Q[re]]=re);return Z}(O);function P(Q){return Q=parseFloat(Q),(isNaN(Q)||Q<0||Q>1)&&(Q=1),Q}function R(Q,Z){(function(oe){return typeof oe=="string"&&oe.indexOf(".")!=-1&&parseFloat(oe)===1})(Q)&&(Q="100%");var re=function(oe){return typeof oe=="string"&&oe.indexOf("%")!=-1}(Q);return Q=s(Z,t(0,parseFloat(Q))),re&&(Q=parseInt(Q*Z,10)/100),k.abs(Q-Z)<1e-6?1:Q%Z/parseFloat(Z)}function j(Q){return s(1,t(0,Q))}function D(Q){return parseInt(Q,16)}function N(Q){return Q.length==1?"0"+Q:""+Q}function W(Q){return Q<=1&&(Q=100*Q+"%"),Q}function F(Q){return k.round(255*parseFloat(Q)).toString(16)}function V(Q){return D(Q)/255}var U,te,J,X=(te="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",J="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+J),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+J),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+J),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function K(Q){return!!X.CSS_UNIT.exec(Q)}ee.exports?ee.exports=n:(M=(function(){return n}).call(z,e,z,ee))===void 0||(ee.exports=M)})(Math)},37816:function(ee){ee.exports=e,ee.exports.float32=ee.exports.float=e,ee.exports.fract32=ee.exports.fract=function(M,k){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);k instanceof Float32Array||(k=e(M));for(var o=0,T=k.length;o<T;o++)k[o]=M[o]-k[o];return k}return e(M-e(M))};var z=new Float32Array(1);function e(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(z[0]=M,z[0])}},23464:function(ee,z,e){var M=e(65819);ee.exports=T;var k=96;function o(b,h){var s=M(getComputedStyle(b).getPropertyValue(h));return s[0]*T(s[1],b)}function T(b,h){switch(h=h||document.body,b=(b||"px").trim().toLowerCase(),h!==window&&h!==document||(h=document.body),b){case"%":return h.clientHeight/100;case"ch":case"ex":return function(s,t){var a=document.createElement("div");a.style["font-size"]="128"+s,t.appendChild(a);var n=o(a,"font-size")/128;return t.removeChild(a),n}(b,h);case"em":return o(h,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(ee,z,e){function M(T){return T}function k(T,b){return typeof b=="string"&&(b=T.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(h){return o(T,h)})}:o(T,b)}function o(T,b){var h=b.id,s=b.bbox,t=b.properties==null?{}:b.properties,a=function(n,r){var i=function(g){if(g==null)return M;var v,y,m=g.scale[0],_=g.scale[1],f=g.translate[0],S=g.translate[1];return function(w,E){E||(v=y=0);var O=2,C=w.length,P=new Array(C);for(P[0]=(v+=w[0])*m+f,P[1]=(y+=w[1])*_+S;O<C;)P[O]=w[O],++O;return P}}(n.transform),l=n.arcs;function u(g,v){v.length&&v.pop();for(var y=l[g<0?~g:g],m=0,_=y.length;m<_;++m)v.push(i(y[m],m));g<0&&function(f,S){for(var w,E=f.length,O=E-S;O<--E;)w=f[O],f[O++]=f[E],f[E]=w}(v,_)}function p(g){return i(g)}function c(g){for(var v=[],y=0,m=g.length;y<m;++y)u(g[y],v);return v.length<2&&v.push(v[0]),v}function x(g){for(var v=c(g);v.length<4;)v.push(v[0]);return v}function d(g){return g.map(x)}return function g(v){var y,m=v.type;switch(m){case"GeometryCollection":return{type:m,geometries:v.geometries.map(g)};case"Point":y=p(v.coordinates);break;case"MultiPoint":y=v.coordinates.map(p);break;case"LineString":y=c(v.arcs);break;case"MultiLineString":y=v.arcs.map(c);break;case"Polygon":y=d(v.arcs);break;case"MultiPolygon":y=v.arcs.map(d);break;default:return null}return{type:m,coordinates:y}}(r)}(T,b);return h==null&&s==null?{type:"Feature",properties:t,geometry:a}:s==null?{type:"Feature",id:h,properties:t,geometry:a}:{type:"Feature",id:h,bbox:s,properties:t,geometry:a}}e.d(z,{NO:function(){return k}})},73384:function(ee,z,e){var M=e(54612);ee.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!M(k)}},57980:function(ee,z,e){var M=e(81680),k=e(7328),o=e(33940),T=e(18856),b=function(h,s){return h.replace("%v",T(s))};ee.exports=function(h,s,t){if(!k(t))throw new TypeError(b(s,h));if(!M(h)){if("default"in t)return t.default;if(t.isOptional)return null}var a=o(t.errorMessage);throw M(a)||(a=s),new TypeError(b(a,h))}},32336:function(ee){ee.exports=function(z){try{return z.toString()}catch{try{return String(z)}catch{return null}}}},18856:function(ee,z,e){var M=e(32336),k=/[\n\r\u2028\u2029]/g;ee.exports=function(o){var T=M(o);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+""),T=T.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(ee,z,e){var M=e(81680),k={object:!0,function:!0,undefined:!0};ee.exports=function(o){return!!M(o)&&hasOwnProperty.call(k,typeof o)}},87396:function(ee,z,e){var M=e(57980),k=e(85488);ee.exports=function(o){return k(o)?o:M(o,"%v is not a plain function",arguments[1])}},85488:function(ee,z,e){var M=e(73384),k=/^\s*class[\s{/}]/,o=Function.prototype.toString;ee.exports=function(T){return!!M(T)&&!k.test(o.call(T))}},54612:function(ee,z,e){var M=e(7328);ee.exports=function(k){if(!M(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},33940:function(ee,z,e){var M=e(81680),k=e(7328),o=Object.prototype.toString;ee.exports=function(T){if(!M(T))return null;if(k(T)){var b=T.toString;if(typeof b!="function"||b===o)return null}try{return""+T}catch{return null}}},18496:function(ee,z,e){var M=e(57980),k=e(81680);ee.exports=function(o){return k(o)?o:M(o,"Cannot use %v",arguments[1])}},81680:function(ee){ee.exports=function(z){return z!=null}},14144:function(ee,z,e){var M=e(308),k=e(10352),o=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",h=typeof BigInt64Array<"u",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,a=s.BUFFER;function n(S){if(S){var w=S.length||S.byteLength,E=M.log2(w);t[E].push(S)}}function r(S){S=M.nextPow2(S);var w=M.log2(S),E=t[w];return E.length>0?E.pop():new ArrayBuffer(S)}function i(S){return new Uint8Array(r(S),0,S)}function l(S){return new Uint16Array(r(2*S),0,S)}function u(S){return new Uint32Array(r(4*S),0,S)}function p(S){return new Int8Array(r(S),0,S)}function c(S){return new Int16Array(r(2*S),0,S)}function x(S){return new Int32Array(r(4*S),0,S)}function d(S){return new Float32Array(r(4*S),0,S)}function g(S){return new Float64Array(r(8*S),0,S)}function v(S){return T?new Uint8ClampedArray(r(S),0,S):i(S)}function y(S){return b?new BigUint64Array(r(8*S),0,S):null}function m(S){return h?new BigInt64Array(r(8*S),0,S):null}function _(S){return new DataView(r(S),0,S)}function f(S){S=M.nextPow2(S);var w=M.log2(S),E=a[w];return E.length>0?E.pop():new o(S)}z.free=function(S){if(o.isBuffer(S))a[M.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var w=S.length||S.byteLength,E=0|M.log2(w);t[E].push(S)}},z.freeUint8=z.freeUint16=z.freeUint32=z.freeBigUint64=z.freeInt8=z.freeInt16=z.freeInt32=z.freeBigInt64=z.freeFloat32=z.freeFloat=z.freeFloat64=z.freeDouble=z.freeUint8Clamped=z.freeDataView=function(S){n(S.buffer)},z.freeArrayBuffer=n,z.freeBuffer=function(S){a[M.log2(S.length)].push(S)},z.malloc=function(S,w){if(w===void 0||w==="arraybuffer")return r(S);switch(w){case"uint8":return i(S);case"uint16":return l(S);case"uint32":return u(S);case"int8":return p(S);case"int16":return c(S);case"int32":return x(S);case"float":case"float32":return d(S);case"double":case"float64":return g(S);case"uint8_clamped":return v(S);case"bigint64":return m(S);case"biguint64":return y(S);case"buffer":return f(S);case"data":case"dataview":return _(S);default:return null}return null},z.mallocArrayBuffer=r,z.mallocUint8=i,z.mallocUint16=l,z.mallocUint32=u,z.mallocInt8=p,z.mallocInt16=c,z.mallocInt32=x,z.mallocFloat32=z.mallocFloat=d,z.mallocFloat64=z.mallocDouble=g,z.mallocUint8Clamped=v,z.mallocBigUint64=y,z.mallocBigInt64=m,z.mallocDataView=_,z.mallocBuffer=f,z.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,a[S].length=0}},92384:function(ee){var z=/[\'\"]/;ee.exports=function(e){return e?(z.test(e.charAt(0))&&(e=e.substr(1)),z.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(ee){ee.exports=function(z,e,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var k=0,o=M.length;k<o;k++){var T=M[k];for(var b in T)if((e[b]===void 0||Array.isArray(e[b])||z[b]!==e[b])&&b in e){var h;if(T[b]===!0)h=e[b];else if(T[b]===!1||typeof T[b]=="function"&&(h=T[b](e[b],z,e))===void 0)continue;z[b]=h}}return z}},96656:function(ee,z,e){function M(k){try{if(!e.g.localStorage)return!1}catch{return!1}var o=e.g.localStorage[k];return o!=null&&String(o).toLowerCase()==="true"}ee.exports=function(k,o){if(M("noDeprecation"))return k;var T=!1;return function(){if(!T){if(M("throwDeprecation"))throw new Error(o);M("traceDeprecation")?console.trace(o):console.warn(o),T=!0}return k.apply(this,arguments)}}},75272:function(ee){ee.exports=function(z){return z&&typeof z=="object"&&typeof z.copy=="function"&&typeof z.fill=="function"&&typeof z.readUInt8=="function"}},41088:function(ee,z,e){var M=e(91148),k=e(84420),o=e(96632),T=e(7728);function b(R){return R.call.bind(R)}var h=typeof BigInt<"u",s=typeof Symbol<"u",t=b(Object.prototype.toString),a=b(Number.prototype.valueOf),n=b(String.prototype.valueOf),r=b(Boolean.prototype.valueOf);if(h)var i=b(BigInt.prototype.valueOf);if(s)var l=b(Symbol.prototype.valueOf);function u(R,j){if(typeof R!="object")return!1;try{return j(R),!0}catch{return!1}}function p(R){return t(R)==="[object Map]"}function c(R){return t(R)==="[object Set]"}function x(R){return t(R)==="[object WeakMap]"}function d(R){return t(R)==="[object WeakSet]"}function g(R){return t(R)==="[object ArrayBuffer]"}function v(R){return typeof ArrayBuffer<"u"&&(g.working?g(R):R instanceof ArrayBuffer)}function y(R){return t(R)==="[object DataView]"}function m(R){return typeof DataView<"u"&&(y.working?y(R):R instanceof DataView)}z.isArgumentsObject=M,z.isGeneratorFunction=k,z.isTypedArray=T,z.isPromise=function(R){return typeof Promise<"u"&&R instanceof Promise||R!==null&&typeof R=="object"&&typeof R.then=="function"&&typeof R.catch=="function"},z.isArrayBufferView=function(R){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(R):T(R)||m(R)},z.isUint8Array=function(R){return o(R)==="Uint8Array"},z.isUint8ClampedArray=function(R){return o(R)==="Uint8ClampedArray"},z.isUint16Array=function(R){return o(R)==="Uint16Array"},z.isUint32Array=function(R){return o(R)==="Uint32Array"},z.isInt8Array=function(R){return o(R)==="Int8Array"},z.isInt16Array=function(R){return o(R)==="Int16Array"},z.isInt32Array=function(R){return o(R)==="Int32Array"},z.isFloat32Array=function(R){return o(R)==="Float32Array"},z.isFloat64Array=function(R){return o(R)==="Float64Array"},z.isBigInt64Array=function(R){return o(R)==="BigInt64Array"},z.isBigUint64Array=function(R){return o(R)==="BigUint64Array"},p.working=typeof Map<"u"&&p(new Map),z.isMap=function(R){return typeof Map<"u"&&(p.working?p(R):R instanceof Map)},c.working=typeof Set<"u"&&c(new Set),z.isSet=function(R){return typeof Set<"u"&&(c.working?c(R):R instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),z.isWeakMap=function(R){return typeof WeakMap<"u"&&(x.working?x(R):R instanceof WeakMap)},d.working=typeof WeakSet<"u"&&d(new WeakSet),z.isWeakSet=function(R){return d(R)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),z.isArrayBuffer=v,y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&y(new DataView(new ArrayBuffer(1),0,1)),z.isDataView=m;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function f(R){return t(R)==="[object SharedArrayBuffer]"}function S(R){return _!==void 0&&(f.working===void 0&&(f.working=f(new _)),f.working?f(R):R instanceof _)}function w(R){return u(R,a)}function E(R){return u(R,n)}function O(R){return u(R,r)}function C(R){return h&&u(R,i)}function P(R){return s&&u(R,l)}z.isSharedArrayBuffer=S,z.isAsyncFunction=function(R){return t(R)==="[object AsyncFunction]"},z.isMapIterator=function(R){return t(R)==="[object Map Iterator]"},z.isSetIterator=function(R){return t(R)==="[object Set Iterator]"},z.isGeneratorObject=function(R){return t(R)==="[object Generator]"},z.isWebAssemblyCompiledModule=function(R){return t(R)==="[object WebAssembly.Module]"},z.isNumberObject=w,z.isStringObject=E,z.isBooleanObject=O,z.isBigIntObject=C,z.isSymbolObject=P,z.isBoxedPrimitive=function(R){return w(R)||E(R)||O(R)||C(R)||P(R)},z.isAnyArrayBuffer=function(R){return typeof Uint8Array<"u"&&(v(R)||S(R))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(R){Object.defineProperty(z,R,{enumerable:!1,value:function(){throw new Error(R+" is not supported in userland")}})})},35840:function(ee,z,e){var M=e(4168),k=Object.getOwnPropertyDescriptors||function(P){for(var R=Object.keys(P),j={},D=0;D<R.length;D++)j[R[D]]=Object.getOwnPropertyDescriptor(P,R[D]);return j},o=/%[sdj%]/g;z.format=function(P){if(!x(P)){for(var R=[],j=0;j<arguments.length;j++)R.push(s(arguments[j]));return R.join(" ")}j=1;for(var D=arguments,N=D.length,W=String(P).replace(o,function(V){if(V==="%%")return"%";if(j>=N)return V;switch(V){case"%s":return String(D[j++]);case"%d":return Number(D[j++]);case"%j":try{return JSON.stringify(D[j++])}catch{return"[Circular]"}default:return V}}),F=D[j];j<N;F=D[++j])p(F)||!v(F)?W+=" "+F:W+=" "+s(F);return W},z.deprecate=function(P,R){if(M!==void 0&&M.noDeprecation===!0)return P;if(M===void 0)return function(){return z.deprecate(P,R).apply(this,arguments)};var j=!1;return function(){if(!j){if(M.throwDeprecation)throw new Error(R);M.traceDeprecation?console.trace(R):console.error(R),j=!0}return P.apply(this,arguments)}};var T={},b=/^$/;if(M.env.NODE_DEBUG){var h=M.env.NODE_DEBUG;h=h.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+h+"$","i")}function s(P,R){var j={seen:[],stylize:a};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),u(R)?j.showHidden=R:R&&z._extend(j,R),d(j.showHidden)&&(j.showHidden=!1),d(j.depth)&&(j.depth=2),d(j.colors)&&(j.colors=!1),d(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=t),n(j,P,j.depth)}function t(P,R){var j=s.styles[R];return j?"\x1B["+s.colors[j][0]+"m"+P+"\x1B["+s.colors[j][1]+"m":P}function a(P,R){return P}function n(P,R,j){if(P.customInspect&&R&&_(R.inspect)&&R.inspect!==z.inspect&&(!R.constructor||R.constructor.prototype!==R)){var D=R.inspect(j,P);return x(D)||(D=n(P,D,j)),D}var N=function(K,Q){if(d(Q))return K.stylize("undefined","undefined");if(x(Q)){var Z="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return K.stylize(Z,"string")}return c(Q)?K.stylize(""+Q,"number"):u(Q)?K.stylize(""+Q,"boolean"):p(Q)?K.stylize("null","null"):void 0}(P,R);if(N)return N;var W=Object.keys(R),F=function(K){var Q={};return K.forEach(function(Z,re){Q[Z]=!0}),Q}(W);if(P.showHidden&&(W=Object.getOwnPropertyNames(R)),m(R)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return r(R);if(W.length===0){if(_(R)){var V=R.name?": "+R.name:"";return P.stylize("[Function"+V+"]","special")}if(g(R))return P.stylize(RegExp.prototype.toString.call(R),"regexp");if(y(R))return P.stylize(Date.prototype.toString.call(R),"date");if(m(R))return r(R)}var U,te="",J=!1,X=["{","}"];return l(R)&&(J=!0,X=["[","]"]),_(R)&&(te=" [Function"+(R.name?": "+R.name:"")+"]"),g(R)&&(te=" "+RegExp.prototype.toString.call(R)),y(R)&&(te=" "+Date.prototype.toUTCString.call(R)),m(R)&&(te=" "+r(R)),W.length!==0||J&&R.length!=0?j<0?g(R)?P.stylize(RegExp.prototype.toString.call(R),"regexp"):P.stylize("[Object]","special"):(P.seen.push(R),U=J?function(K,Q,Z,re,oe){for(var ae=[],ce=0,he=Q.length;ce<he;++ce)E(Q,String(ce))?ae.push(i(K,Q,Z,re,String(ce),!0)):ae.push("");return oe.forEach(function(pe){pe.match(/^\d+$/)||ae.push(i(K,Q,Z,re,pe,!0))}),ae}(P,R,j,F,W):W.map(function(K){return i(P,R,j,F,K,J)}),P.seen.pop(),function(K,Q,Z){return K.reduce(function(re,oe){return oe.indexOf(`
`),re+oe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Z[0]+(Q===""?"":Q+`
 `)+" "+K.join(`,
  `)+" "+Z[1]:Z[0]+Q+" "+K.join(", ")+" "+Z[1]}(U,te,X)):X[0]+te+X[1]}function r(P){return"["+Error.prototype.toString.call(P)+"]"}function i(P,R,j,D,N,W){var F,V,U;if((U=Object.getOwnPropertyDescriptor(R,N)||{value:R[N]}).get?V=U.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):U.set&&(V=P.stylize("[Setter]","special")),E(D,N)||(F="["+N+"]"),V||(P.seen.indexOf(U.value)<0?(V=p(j)?n(P,U.value,null):n(P,U.value,j-1)).indexOf(`
`)>-1&&(V=W?V.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+V.split(`
`).map(function(te){return"   "+te}).join(`
`)):V=P.stylize("[Circular]","special")),d(F)){if(W&&N.match(/^\d+$/))return V;(F=JSON.stringify(""+N)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=P.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=P.stylize(F,"string"))}return F+": "+V}function l(P){return Array.isArray(P)}function u(P){return typeof P=="boolean"}function p(P){return P===null}function c(P){return typeof P=="number"}function x(P){return typeof P=="string"}function d(P){return P===void 0}function g(P){return v(P)&&f(P)==="[object RegExp]"}function v(P){return typeof P=="object"&&P!==null}function y(P){return v(P)&&f(P)==="[object Date]"}function m(P){return v(P)&&(f(P)==="[object Error]"||P instanceof Error)}function _(P){return typeof P=="function"}function f(P){return Object.prototype.toString.call(P)}function S(P){return P<10?"0"+P.toString(10):P.toString(10)}z.debuglog=function(P){if(P=P.toUpperCase(),!T[P])if(b.test(P)){var R=M.pid;T[P]=function(){var j=z.format.apply(z,arguments);console.error("%s %d: %s",P,R,j)}}else T[P]=function(){};return T[P]},z.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},z.types=e(41088),z.isArray=l,z.isBoolean=u,z.isNull=p,z.isNullOrUndefined=function(P){return P==null},z.isNumber=c,z.isString=x,z.isSymbol=function(P){return typeof P=="symbol"},z.isUndefined=d,z.isRegExp=g,z.types.isRegExp=g,z.isObject=v,z.isDate=y,z.types.isDate=y,z.isError=m,z.types.isNativeError=m,z.isFunction=_,z.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},z.isBuffer=e(75272);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(P,R){return Object.prototype.hasOwnProperty.call(P,R)}z.log=function(){var P,R;console.log("%s - %s",(R=[S((P=new Date).getHours()),S(P.getMinutes()),S(P.getSeconds())].join(":"),[P.getDate(),w[P.getMonth()],R].join(" ")),z.format.apply(z,arguments))},z.inherits=e(6768),z._extend=function(P,R){if(!R||!v(R))return P;for(var j=Object.keys(R),D=j.length;D--;)P[j[D]]=R[j[D]];return P};var O=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function C(P,R){if(!P){var j=new Error("Promise was rejected with a falsy value");j.reason=P,P=j}return R(P)}z.promisify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');if(O&&P[O]){var R;if(typeof(R=P[O])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(R,O,{value:R,enumerable:!1,writable:!1,configurable:!0}),R}function R(){for(var j,D,N=new Promise(function(V,U){j=V,D=U}),W=[],F=0;F<arguments.length;F++)W.push(arguments[F]);W.push(function(V,U){V?D(V):j(U)});try{P.apply(this,W)}catch(V){D(V)}return N}return Object.setPrototypeOf(R,Object.getPrototypeOf(P)),O&&Object.defineProperty(R,O,{value:R,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(R,k(P))},z.promisify.custom=O,z.callbackify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');function R(){for(var j=[],D=0;D<arguments.length;D++)j.push(arguments[D]);var N=j.pop();if(typeof N!="function")throw new TypeError("The last argument must be of type Function");var W=this,F=function(){return N.apply(W,arguments)};P.apply(this,j).then(function(V){M.nextTick(F.bind(null,null,V))},function(V){M.nextTick(C.bind(null,V,F))})}return Object.setPrototypeOf(R,Object.getPrototypeOf(P)),Object.defineProperties(R,k(P)),R}},5408:function(ee,z,e){var M=e(13380);ee.exports=function(k){return M("webgl",k)}},96632:function(ee,z,e){var M=e(46492),k=e(63436),o=e(57916),T=e(99676),b=e(2304),h=T("Object.prototype.toString"),s=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,a=k(),n=T("String.prototype.slice"),r=Object.getPrototypeOf,i=T("Array.prototype.indexOf",!0)||function(u,p){for(var c=0;c<u.length;c+=1)if(u[c]===p)return c;return-1},l={__proto__:null};M(a,s&&b&&r?function(u){var p=new t[u];if(Symbol.toStringTag in p){var c=r(p),x=b(c,Symbol.toStringTag);if(!x){var d=r(c);x=b(d,Symbol.toStringTag)}l["$"+u]=o(x.get)}}:function(u){var p=new t[u],c=p.slice||p.set;c&&(l["$"+u]=o(c))}),ee.exports=function(u){if(!u||typeof u!="object")return!1;if(!s){var p=n(h(u),8,-1);return i(a,p)>-1?p:p==="Object"&&function(c){var x=!1;return M(l,function(d,g){if(!x)try{d(c),x=n(g,1)}catch{}}),x}(u)}return b?function(c){var x=!1;return M(l,function(d,g){if(!x)try{"$"+d(c)===g&&(x=n(g,1))}catch{}}),x}(u):null}},67020:function(ee,z,e){var M=e(38700),k=e(50896),o=M.instance();function T(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,i){if(typeof r=="string"){var l=r.match(h);return l?l[0]:""}var u=this._validateYear(r),p=r.month(),c=""+this.toChineseMonth(u,p);return i&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,p)&&(c+="i"),c},monthNames:function(r){if(typeof r=="string"){var i=r.match(s);return i?i[0]:""}var l=this._validateYear(r),u=r.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(p=""+p),p},monthNamesShort:function(r){if(typeof r=="string"){var i=r.match(t);return i?i[0]:""}var l=this._validateYear(r),u=r.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(p=""+p),p},parseMonth:function(r,i){r=this._validateYear(r);var l,u=parseInt(i);if(isNaN(u))i[0]===""&&(l=!0,i=i.substring(1)),i[i.length-1]===""&&(i=i.substring(0,i.length-1)),u=1+["","","","","","","","","","","",""].indexOf(i);else{var p=i[i.length-1];l=p==="i"||p==="I"}return this.toMonthIndex(r,u,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,i){if(r.year&&(r=r.year()),typeof r!="number"||r<1888||r>2111)throw i.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,i,l){var u=this.intercalaryMonth(r);if(l&&i!==u||i<1||i>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!l&&i<=u?i-1:i:i-1},toChineseMonth:function(r,i){r.year&&(i=(r=r.year()).month());var l=this.intercalaryMonth(r);if(i<0||i>(l?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?i<l?i+1:i:i+1},intercalaryMonth:function(r){return r=this._validateYear(r),a[r-a[0]]>>13},isIntercalaryMonth:function(r,i){r.year&&(i=(r=r.year()).month());var l=this.intercalaryMonth(r);return!!l&&l===i},leapYear:function(r){return this.intercalaryMonth(r)!==0},weekOfYear:function(r,i,l){var u,p=this._validateYear(r,M.local.invalidyear),c=n[p-n[0]],x=c>>9&4095,d=c>>5&15,g=31&c;(u=o.newDate(x,d,g)).add(4-(u.dayOfWeek()||7),"d");var v=this.toJD(r,i,l)-u.toJD();return 1+Math.floor(v/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,i){r.year&&(i=r.month(),r=r.year()),r=this._validateYear(r);var l=a[r-a[0]];if(i>(l>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-i?30:29},weekDay:function(r,i,l){return(this.dayOfWeek(r,i,l)||7)<6},toJD:function(r,i,l){var u=this._validate(r,c,l,M.local.invalidDate);r=this._validateYear(u.year()),i=u.month(),l=u.day();var p=this.isIntercalaryMonth(r,i),c=this.toChineseMonth(r,i),x=function(d,g,v,y,m){var _,f,S;if(typeof d=="object")f=d,_=g||{};else{var w;if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof g=="number"&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof v=="number"&&v>=1&&v<=30))throw new Error("Lunar day outside range 1 - 30");typeof y=="object"?(w=!1,_=y):(w=!!y,_={}),f={year:d,month:g,day:v,isIntercalary:w}}S=f.day-1;var E,O=a[f.year-a[0]],C=O>>13;E=C&&(f.month>C||f.isIntercalary)?f.month:f.month-1;for(var P=0;P<E;P++)S+=O&1<<12-P?30:29;var R=n[f.year-n[0]],j=new Date(R>>9&4095,(R>>5&15)-1,(31&R)+S);return _.year=j.getFullYear(),_.month=1+j.getMonth(),_.day=j.getDate(),_}(r,c,l,p);return o.toJD(x.year,x.month,x.day)},fromJD:function(r){var i=o.fromJD(r),l=function(p,c,x,d){var g,v;if(typeof p=="object")g=p,v=c||{};else{if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");g={year:p,month:c,day:x},v={}}var y=n[g.year-n[0]],m=g.year<<9|g.month<<5|g.day;v.year=m>=y?g.year:g.year-1,y=n[v.year-n[0]];var _,f=new Date(y>>9&4095,(y>>5&15)-1,31&y),S=new Date(g.year,g.month-1,g.day);_=Math.round((S-f)/864e5);var w,E=a[v.year-a[0]];for(w=0;w<13;w++){var O=E&1<<12-w?30:29;if(_<O)break;_-=O}var C=E>>13;return!C||w<C?(v.isIntercalary=!1,v.month=1+w):w===C?(v.isIntercalary=!0,v.month=w):(v.isIntercalary=!1,v.month=w),v.day=1+_,v}(i.year(),i.month(),i.day()),u=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,u,l.day)},fromString:function(r){var i=r.match(b),l=this._validateYear(+i[1]),u=+i[2],p=!!i[3],c=this.toMonthIndex(l,u,p),x=+i[4];return this.newDate(l,c,x)},add:function(r,i,l){var u=r.year(),p=r.month(),c=this.isIntercalaryMonth(u,p),x=this.toChineseMonth(u,p),d=Object.getPrototypeOf(T.prototype).add.call(this,r,i,l);if(l==="y"){var g=d.year(),v=d.month(),y=this.isIntercalaryMonth(g,x),m=c&&y?this.toMonthIndex(g,x,!0):this.toMonthIndex(g,x,!1);m!==v&&d.month(m)}return d}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,h=/^\d?\d[iI]?/m,s=/^??[]?/m,t=/^??[]?/m;M.calendars.chinese=T;var a=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return(this.dayOfWeek(T,b,h)||7)<6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,h=Math.floor((b-Math.floor((b+366)/1461))/365)+1;h<=0&&h--,b=Math.floor(T)+.5-this.newDate(h,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(h,s,t)}}),M.calendars.coptic=o},55668:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,h,s){return(this._validate(b,h,s,M.local.invalidDate).day()+1)%8},weekDay:function(b,h,s){var t=this.dayOfWeek(b,h,s);return t>=2&&t<=6},extraInfo:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return b=t.year()+(t.year()<0?1:0),h=t.month(),(s=t.day())+(h>1?16:0)+(h>2?32*(h-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var h=Math.floor(b/400)+1;b-=400*(h-1),b+=b>15?16:0;var s=Math.floor(b/32)+1,t=b-32*(s-1)+1;return this.newDate(h<=0?h-1:h,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=o},65168:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return(this.dayOfWeek(T,b,h)||7)<6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,h=Math.floor((b-Math.floor((b+366)/1461))/365)+1;h<=0&&h--,b=Math.floor(T)+.5-this.newDate(h,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(h,s,t)}}),M.calendars.ethiopian=o},2084:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,h){return b-h*Math.floor(b/h)}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,h){return b.year&&(h=b.month(),b=b.year()),this._validate(b,h,this.minDay,M.local.invalidMonth),h===12&&this.leapYear(b)||h===8&&T(this.daysInYear(b),10)===5?30:h===9&&T(this.daysInYear(b),10)===3?29:this.daysPerMonth[h-1]},weekDay:function(b,h,s){return this.dayOfWeek(b,h,s)!==6},extraInfo:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);b=t.year(),h=t.month(),s=t.day();var a=b<=0?b+1:b,n=this.jdEpoch+this._delay1(a)+this._delay2(a)+s+1;if(h<7){for(var r=7;r<=this.monthsInYear(b);r++)n+=this.daysInMonth(b,r);for(r=1;r<h;r++)n+=this.daysInMonth(b,r)}else for(r=7;r<h;r++)n+=this.daysInMonth(b,r);return n},_delay1:function(b){var h=Math.floor((235*b-234)/19),s=12084+13753*h,t=29*h+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var h=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-h==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var h=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(h===-1?1:h+1,7,1);)h++;for(var s=b<this.toJD(h,1,1)?7:1;b>this.toJD(h,s,this.daysInMonth(h,s));)s++;var t=b-this.toJD(h,s,1)+1;return this.newDate(h,s,t)}}),M.calendars.hebrew=o},26368:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===12&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return this.dayOfWeek(T,b,h)!==5},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return T=s.year(),b=s.month(),T=T<=0?T+1:T,(h=s.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var h=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),s=T-this.toJD(b,h,1)+1;return this.newDate(b,h,s)}}),M.calendars.islamic=o},24747:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return(this.dayOfWeek(T,b,h)||7)<6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return T=s.year(),b=s.month(),h=s.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+h-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,h=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*h),t=Math.floor((b-s)/30.6001),a=t-Math.floor(t<14?1:13),n=h-Math.floor(a>2?4716:4715),r=b-s-Math.floor(30.6001*t);return n<=0&&n--,this.newDate(n,a,r)}}),M.calendars.julian=o},65616:function(ee,z,e){var M=e(38700),k=e(50896);function o(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function T(h,s){return h-s*Math.floor(h/s)}function b(h,s){return T(h-1,s)+1}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,M.local.invalidYear).year();var s=Math.floor(h/400);return h%=400,h+=h<0?400:0,s+"."+Math.floor(h/20)+"."+h%20},forYear:function(h){if((h=h.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<h.length;t++){var a=parseInt(h[t],10);if(Math.abs(a)>19||t>0&&a<0)throw"Invalid Mayan year";s=20*s+a}return s},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(h,s,t){return this._validate(h,s,t,M.local.invalidDate),0},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(h,s){return this._validate(h,s,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(h,s,t){return this._validate(h,s,t,M.local.invalidDate).day()},weekDay:function(h,s,t){return this._validate(h,s,t,M.local.invalidDate),!0},extraInfo:function(h,s,t){var a=this._validate(h,s,t,M.local.invalidDate).toJD(),n=this._toHaab(a),r=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[r[0]-1],tzolkinDay:r[0],tzolkinTrecena:r[1]}},_toHaab:function(h){var s=T(8+(h-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(h){return[b(20+(h-=this.jdEpoch),20),b(h+4,13)]},toJD:function(h,s,t){var a=this._validate(h,s,t,M.local.invalidDate);return a.day()+20*a.month()+360*a.year()+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var s=Math.floor(h/360);h%=360,h+=h<0?360:0;var t=Math.floor(h/20),a=h%20;return this.newDate(s,t,a)}}),M.calendars.mayan=o},30632:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar;var T=M.instance("gregorian");k(o.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(h.year()+(h.year()<1?1:0)+1469)},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return(this.dayOfWeek(b,h,s)||7)<6},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidMonth);(b=t.year())<0&&b++;for(var a=t.day(),n=1;n<t.month();n++)a+=this.daysPerMonth[n-1];return a+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var h=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(h+1,1,1);)h++;for(var s=b-Math.floor(this.toJD(h,1,1)+.5)+1,t=1;s>this.daysInMonth(h,t);)s-=this.daysInMonth(h,t),t++;return this.newDate(h,t,s)}}),M.calendars.nanakshahi=o},73040:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var b=0,h=this.minMonth;h<=12;h++)b+=this.NEPALI_CALENDAR_DATA[T][h];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,M.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,h){return this.dayOfWeek(T,b,h)!==6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);T=s.year(),b=s.month(),h=s.day();var t=M.instance(),a=0,n=b,r=T;this._createMissingCalendarData(T);var i=T-(n>9||n===9&&h>=this.NEPALI_CALENDAR_DATA[r][0]?56:57);for(b!==9&&(a=h,n--);n!==9;)n<=0&&(n=12,r--),a+=this.NEPALI_CALENDAR_DATA[r][n],n--;return b===9?(a+=h-this.NEPALI_CALENDAR_DATA[r][0])<0&&(a+=t.daysInYear(i)):a+=this.NEPALI_CALENDAR_DATA[r][9]-this.NEPALI_CALENDAR_DATA[r][0],t.newDate(i,1,1).add(a,"d").toJD()},fromJD:function(T){var b=M.instance().fromJD(T),h=b.year(),s=b.dayOfYear(),t=h+56;this._createMissingCalendarData(t);for(var a=9,n=this.NEPALI_CALENDAR_DATA[t][0],r=this.NEPALI_CALENDAR_DATA[t][a]-n+1;s>r;)++a>12&&(a=1,t++),r+=this.NEPALI_CALENDAR_DATA[t][a];var i=this.NEPALI_CALENDAR_DATA[t][a]-(r-s);return this.newDate(t,a,i)},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var h=T-1;h<T+2;h++)this.NEPALI_CALENDAR_DATA[h]===void 0&&(this.NEPALI_CALENDAR_DATA[h]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=o},1104:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,h){return b-h*Math.floor(b/h)}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return 682*((h.year()-(h.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return this.dayOfWeek(b,h,s)!==5},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);b=t.year(),h=t.month(),s=t.day();var a=b-(b>=0?474:473),n=474+T(a,2820);return s+(h<=7?31*(h-1):30*(h-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(a/2820)+this.jdEpoch-1},fromJD:function(b){var h=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(h/1029983),t=T(h,1029983),a=2820;if(t!==1029982){var n=Math.floor(t/366),r=T(t,366);a=Math.floor((2134*n+2816*r+2815)/1028522)+n+1}var i=a+2820*s+474;i=i<=0?i-1:i;var l=b-this.toJD(i,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),p=b-this.toJD(i,u,1)+1;return this.newDate(i,u,p)}}),M.calendars.persian=o,M.calendars.jalali=o},51456:function(ee,z,e){var M=e(38700),k=e(50896),o=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(h.year()),o.leapYear(b)},weekOfYear:function(b,h,s){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return(this.dayOfWeek(b,h,s)||7)<6},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var h=o.fromJD(b),s=this._g2tYear(h.year());return this.newDate(s,h.month(),h.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},4592:function(ee,z,e){var M=e(38700),k=e(50896),o=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(h.year()),o.leapYear(b)},weekOfYear:function(b,h,s){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return(this.dayOfWeek(b,h,s)||7)<6},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var h=o.fromJD(b),s=this._g2tYear(h.year());return this.newDate(s,h.month(),h.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),M.calendars.thai=T},45348:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(h.year())===355},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var h=0,s=1;s<=12;s++)h+=this.daysInMonth(b,s);return h},daysInMonth:function(b,h){for(var s=this._validate(b,h,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,t=0,a=0;a<T.length;a++){if(T[a]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(b,h,s){return this.dayOfWeek(b,h,s)!==5},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate),a=12*(t.year()-1)+t.month()-15292;return t.day()+T[a-1]-1+24e5-.5},fromJD:function(b){for(var h=b-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>h);t++)s++;var a=s+15292,n=Math.floor((a-1)/12),r=n+1,i=a-12*n,l=h-T[s-1]+1;return this.newDate(r,i,l)},isValid:function(b,h,s){var t=M.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,h,s,t){var a=M.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500)throw t.replace(/\{0\}/,this.local.name);return a}}),M.calendars.ummalqura=o;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(ee,z,e){var M=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(t,a,n,r){if(this._calendar=t,this._year=a,this._month=n,this._day=r,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,a){return"000000".substring(0,a-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function h(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}M(k.prototype,{instance:function(t,a){t=(t||"gregorian").toLowerCase(),a=a||"";var n=this._localCals[t+"-"+a];if(!n&&this.calendars[t]&&(n=new this.calendars[t](a),this._localCals[t+"-"+a]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return n},newDate:function(t,a,n,r,i){return(r=(t!=null&&t.year?t.calendar():typeof r=="string"?this.instance(r,i):r)||this.instance()).newDate(t,a,n)},substituteDigits:function(t){return function(a){return(a+"").replace(/[0-9]/g,function(n){return t[n]})}},substituteChineseDigits:function(t,a){return function(n){for(var r="",i=0;n>0;){var l=n%10;r=(l===0?"":t[l]+a[i])+r,i++,n=Math.floor(n/10)}return r.indexOf(t[1]+a[1])===0&&(r=r.substr(1)),r||t[0]}}}),M(o.prototype,{newDate:function(t,a,n){return this._calendar.newDate(t??this,a,n)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,a,n){if(!this._calendar.isValid(t,a,n))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=a,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,a){return this._calendar.add(this,t,a)},set:function(t,a){return this._calendar.set(this,t,a)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var a=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return a===0?0:a<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(b.prototype,{_validateLevel:0,newDate:function(t,a,n){return t==null?this.today():(t.year&&(this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),n=t.day(),a=t.month(),t=t.year()),new o(this,t,a,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(a.year()<0?"-":"")+T(Math.abs(a.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,a){var n=this._validate(t,a,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(t,a){var n=(a+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,n,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),n},daysInYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(a)?366:365},dayOfYear:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(t,a,n){return this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,a,n){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,a,n),a,n)},_add:function(t,a,n){if(this._validateLevel++,n==="d"||n==="w"){var r=t.toJD()+a*(n==="w"?this.daysInWeek():1),i=t.calendar().fromJD(r);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var l=t.year()+(n==="y"?a:0),u=t.monthOfYear()+(n==="m"?a:0);i=t.day(),n==="y"?(t.month()!==this.fromMonthOfYear(l,u)&&(u=this.newDate(l,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(l)),i=Math.min(i,this.daysInMonth(l,this.fromMonthOfYear(l,u)))):n==="m"&&(function(c){for(;u<c.minMonth;)l--,u+=c.monthsInYear(l);for(var x=c.monthsInYear(l);u>x-1+c.minMonth;)l++,u-=x,x=c.monthsInYear(l)}(this),i=Math.min(i,this.daysInMonth(l,this.fromMonthOfYear(l,u))));var p=[l,this.fromMonthOfYear(l,u),i];return this._validateLevel--,p}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,a,n,r){if(!(this.hasYearZero||r!=="y"&&r!=="m"||a[0]!==0&&t.year()>0==a[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],l=n<0?-1:1;a=this._add(t,n*i[0]+l*i[1],i[2])}return t.date(a[0],a[1],a[2])},set:function(t,a,n){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var r=n==="y"?a:t.year(),i=n==="m"?a:t.month(),l=n==="d"?a:t.day();return n!=="y"&&n!=="m"||(l=Math.min(l,this.daysInMonth(r,i))),t.date(r,i,l)},isValid:function(t,a,n){this._validateLevel++;var r=this.hasYearZero||t!==0;if(r){var i=this.newDate(t,a,this.minDay);r=a>=this.minMonth&&a-this.minMonth<this.monthsInYear(i)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(i)}return this._validateLevel--,r},toJSDate:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,a,n,r){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,a,n))throw r.replace(/\{0\}/,this.local.name);var i=this.newDate(t,a,n);return this._validateLevel--,i}catch(l){throw this._validateLevel--,l}}}),h.prototype=new b,M(h.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=a.year()+(a.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,a,n){var r=this.newDate(t,a,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,a){var n=this._validate(t,a,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,a,n){return(this.dayOfWeek(t,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=r.year(),a=r.month(),n=r.day(),t<0&&t++,a<3&&(a+=12,t--);var i=Math.floor(t/100),l=2-i+Math.floor(i/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(a+1))+n+l-1524.5},fromJD:function(t){var a=Math.floor(t+.5),n=Math.floor((a-186721625e-2)/36524.25),r=1524+(n=a+1+n-Math.floor(n/4)),i=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*i),u=Math.floor((r-l)/30.6001),p=r-l-Math.floor(30.6001*u),c=u-(u>13.5?13:1),x=i-(c>2.5?4716:4715);return x<=0&&x--,this.newDate(x,c,p)},toJSDate:function(t,a,n){var r=this._validate(t,a,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),i=new Date(r.year(),r.month()-1,r.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=ee.exports=new k;s.cdate=o,s.baseCalendar=b,s.calendars.gregorian=h},15168:function(ee,z,e){var M=e(50896),k=e(38700);M(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],M(k.cdate.prototype,{formatDate:function(o,T){return typeof o!="string"&&(T=o,o=""),this._calendar.formatDate(o||"",this,T)}}),M(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,T,b){if(typeof o!="string"&&(b=T,T=o,o=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat;for(var h,s,t,a=(b=b||{}).dayNamesShort||this.local.dayNamesShort,n=b.dayNames||this.local.dayNames,r=b.monthNumbers||this.local.monthNumbers,i=b.monthNamesShort||this.local.monthNamesShort,l=b.monthNames||this.local.monthNames,u=(b.calculateWeek||this.local.calculateWeek,function(f,S){for(var w=1;_+w<o.length&&o.charAt(_+w)===f;)w++;return _+=w-1,Math.floor(w/(S||1))>1}),p=function(f,S,w,E){var O=""+S;if(u(f,E))for(;O.length<w;)O="0"+O;return O},c=this,x=function(f){return typeof r=="function"?r.call(c,f,u("m")):v(p("m",f.month(),2))},d=function(f,S){return S?typeof l=="function"?l.call(c,f):l[f.month()-c.minMonth]:typeof i=="function"?i.call(c,f):i[f.month()-c.minMonth]},g=this.local.digits,v=function(f){return b.localNumbers&&g?g(f):f},y="",m=!1,_=0;_<o.length;_++)if(m)o.charAt(_)!=="'"||u("'")?y+=o.charAt(_):m=!1;else switch(o.charAt(_)){case"d":y+=v(p("d",T.day(),2));break;case"D":y+=(h=T.dayOfWeek(),s=a,t=n,u("D")?t[h]:s[h]);break;case"o":y+=p("o",T.dayOfYear(),3);break;case"w":y+=p("w",T.weekOfYear(),2);break;case"m":y+=x(T);break;case"M":y+=d(T,u("M"));break;case"y":y+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),y+=T.formatYear();break;case"J":y+=T.toJD();break;case"@":y+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?y+="'":m=!0;break;default:y+=o.charAt(_)}return y},parseDate:function(o,T,b){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;o=o||this.local.dateFormat;var h=(b=b||{}).shortYearCutoff||this.shortYearCutoff;h=typeof h!="string"?h:this.today().year()%100+parseInt(h,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,a=b.parseMonth||this.local.parseMonth,n=b.monthNumbers||this.local.monthNumbers,r=b.monthNamesShort||this.local.monthNamesShort,i=b.monthNames||this.local.monthNames,l=-1,u=-1,p=-1,c=-1,x=-1,d=!1,g=!1,v=function(R,j){for(var D=1;O+D<o.length&&o.charAt(O+D)===R;)D++;return O+=D-1,Math.floor(D/(j||1))>1},y=function(R,j){var D=v(R,j),N=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(R)+1],W=new RegExp("^-?\\d{1,"+N+"}"),F=T.substring(E).match(W);if(!F)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},m=this,_=function(){if(typeof n=="function"){v("m");var R=n.call(m,T.substring(E));return E+=R.length,R}return y("m")},f=function(R,j,D,N){for(var W=v(R,N)?D:j,F=0;F<W.length;F++)if(T.substr(E,W[F].length).toLowerCase()===W[F].toLowerCase())return E+=W[F].length,F+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof i=="function"){var R=v("M")?i.call(m,T.substring(E)):r.call(m,T.substring(E));return E+=R.length,R}return f("M",r,i)},w=function(){if(T.charAt(E)!==o.charAt(O))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,O=0;O<o.length;O++)if(g)o.charAt(O)!=="'"||v("'")?w():g=!1;else switch(o.charAt(O)){case"d":c=y("d");break;case"D":f("D",s,t);break;case"o":x=y("o");break;case"w":y("w");break;case"m":p=_();break;case"M":p=S();break;case"y":var C=O;d=!v("y",2),O=C,u=y("y",2);break;case"Y":u=y("Y",2);break;case"J":l=y("J")+.5,T.charAt(E)==="."&&(E++,y("J"));break;case"@":l=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":v("'")?w():g=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&d&&(u+=h===-1?1900:this.today().year()-this.today().year()%100-(u<=h?0:100)),typeof p=="string"&&(p=a.call(this,u,p)),x>-1){p=1,c=x;for(var P=this.daysInMonth(u,p);c>P;P=this.daysInMonth(u,p))p++,c-=P}return l>-1?this.fromJD(l):this.newDate(u,p,c)},determineDate:function(o,T,b,h,s){b&&typeof b!="object"&&(s=h,h=b,b=null),typeof h!="string"&&(s=h,h="");var t=this;return T=T?T.newDate():null,o==null?T:typeof o=="string"?function(a){try{return t.parseDate(h,a,s)}catch{}for(var n=((a=a.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=r.exec(a);i;)n.add(parseInt(i[1],10),i[2]||"d"),i=r.exec(a);return n}(o):typeof o=="number"?isNaN(o)||o===1/0||o===-1/0?T:t.today().add(o,"d"):t.newDate(o)}})},21576:function(){},19768:function(){},63436:function(ee,z,e){var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;ee.exports=function(){for(var o=[],T=0;T<M.length;T++)typeof k[M[T]]=="function"&&(o[o.length]=M[T]);return o}},67756:function(ee,z,e){function M(he,pe,xe){he.prototype=pe.prototype=xe,xe.constructor=he}function k(he,pe){var xe=Object.create(he.prototype);for(var be in pe)xe[be]=pe[be];return xe}function o(){}e.d(z,{qy:function(){return ce},Gz:function(){return J}});var T=.7,b=1/T,h="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\(".concat(h,",").concat(h,",").concat(h,"\\)$")),r=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),i=new RegExp("^rgba\\(".concat(h,",").concat(h,",").concat(h,",").concat(s,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),p=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function g(he){var pe,xe;return he=(he+"").trim().toLowerCase(),(pe=a.exec(he))?(xe=pe[1].length,pe=parseInt(pe[1],16),xe===6?v(pe):xe===3?new _(pe>>8&15|pe>>4&240,pe>>4&15|240&pe,(15&pe)<<4|15&pe,1):xe===8?y(pe>>24&255,pe>>16&255,pe>>8&255,(255&pe)/255):xe===4?y(pe>>12&15|pe>>8&240,pe>>8&15|pe>>4&240,pe>>4&15|240&pe,((15&pe)<<4|15&pe)/255):null):(pe=n.exec(he))?new _(pe[1],pe[2],pe[3],1):(pe=r.exec(he))?new _(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,1):(pe=i.exec(he))?y(pe[1],pe[2],pe[3],pe[4]):(pe=l.exec(he))?y(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,pe[4]):(pe=u.exec(he))?C(pe[1],pe[2]/100,pe[3]/100,1):(pe=p.exec(he))?C(pe[1],pe[2]/100,pe[3]/100,pe[4]):c.hasOwnProperty(he)?v(c[he]):he==="transparent"?new _(NaN,NaN,NaN,0):null}function v(he){return new _(he>>16&255,he>>8&255,255&he,1)}function y(he,pe,xe,be){return be<=0&&(he=pe=xe=NaN),new _(he,pe,xe,be)}function m(he,pe,xe,be){return arguments.length===1?((ve=he)instanceof o||(ve=g(ve)),ve?new _((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new _):new _(he,pe,xe,be??1);var ve}function _(he,pe,xe,be){this.r=+he,this.g=+pe,this.b=+xe,this.opacity=+be}function f(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b))}function S(){var he=w(this.opacity);return"".concat(he===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(he===1?")":", ".concat(he,")"))}function w(he){return isNaN(he)?1:Math.max(0,Math.min(1,he))}function E(he){return Math.max(0,Math.min(255,Math.round(he)||0))}function O(he){return((he=E(he))<16?"0":"")+he.toString(16)}function C(he,pe,xe,be){return be<=0?he=pe=xe=NaN:xe<=0||xe>=1?he=pe=NaN:pe<=0&&(he=NaN),new R(he,pe,xe,be)}function P(he){if(he instanceof R)return new R(he.h,he.s,he.l,he.opacity);if(he instanceof o||(he=g(he)),!he)return new R;if(he instanceof R)return he;var pe=(he=he.rgb()).r/255,xe=he.g/255,be=he.b/255,ve=Math.min(pe,xe,be),ge=Math.max(pe,xe,be),we=NaN,_e=ge-ve,se=(ge+ve)/2;return _e?(we=pe===ge?(xe-be)/_e+6*(xe<be):xe===ge?(be-pe)/_e+2:(pe-xe)/_e+4,_e/=se<.5?ge+ve:2-ge-ve,we*=60):_e=se>0&&se<1?0:we,new R(we,_e,se,he.opacity)}function R(he,pe,xe,be){this.h=+he,this.s=+pe,this.l=+xe,this.opacity=+be}function j(he){return(he=(he||0)%360)<0?he+360:he}function D(he){return Math.max(0,Math.min(1,he||0))}function N(he,pe,xe){return 255*(he<60?pe+(xe-pe)*he/60:he<180?xe:he<240?pe+(xe-pe)*(240-he)/60:pe)}M(o,g,{copy:function(he){return Object.assign(new this.constructor,this,he)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:d,toString:d}),M(_,m,k(o,{brighter:function(he){return he=he==null?b:Math.pow(b,he),new _(this.r*he,this.g*he,this.b*he,this.opacity)},darker:function(he){return he=he==null?T:Math.pow(T,he),new _(this.r*he,this.g*he,this.b*he,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f,formatHex:f,formatHex8:function(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b)).concat(O(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),M(R,function(he,pe,xe,be){return arguments.length===1?P(he):new R(he,pe,xe,be??1)},k(o,{brighter:function(he){return he=he==null?b:Math.pow(b,he),new R(this.h,this.s,this.l*he,this.opacity)},darker:function(he){return he=he==null?T:Math.pow(T,he),new R(this.h,this.s,this.l*he,this.opacity)},rgb:function(){var he=this.h%360+360*(this.h<0),pe=isNaN(he)||isNaN(this.s)?0:this.s,xe=this.l,be=xe+(xe<.5?xe:1-xe)*pe,ve=2*xe-be;return new _(N(he>=240?he-240:he+120,ve,be),N(he,ve,be),N(he<120?he+240:he-120,ve,be),this.opacity)},clamp:function(){return new R(j(this.h),D(this.s),D(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var he=w(this.opacity);return"".concat(he===1?"hsl(":"hsla(").concat(j(this.h),", ").concat(100*D(this.s),"%, ").concat(100*D(this.l),"%").concat(he===1?")":", ".concat(he,")"))}}));var W=function(he){return function(){return he}};function F(he,pe){var xe=pe-he;return xe?function(be,ve){return function(ge){return be+ge*ve}}(he,xe):W(isNaN(he)?pe:he)}var V=function he(pe){var xe=function(ve){return(ve=+ve)==1?F:function(ge,we){return we-ge?function(_e,se,ie){return _e=Math.pow(_e,ie),se=Math.pow(se,ie)-_e,ie=1/ie,function(fe){return Math.pow(_e+fe*se,ie)}}(ge,we,ve):W(isNaN(ge)?we:ge)}}(pe);function be(ve,ge){var we=xe((ve=m(ve)).r,(ge=m(ge)).r),_e=xe(ve.g,ge.g),se=xe(ve.b,ge.b),ie=F(ve.opacity,ge.opacity);return function(fe){return ve.r=we(fe),ve.g=_e(fe),ve.b=se(fe),ve.opacity=ie(fe),ve+""}}return be.gamma=he,be}(1);function U(he,pe){var xe,be=pe?pe.length:0,ve=he?Math.min(be,he.length):0,ge=new Array(ve),we=new Array(be);for(xe=0;xe<ve;++xe)ge[xe]=ce(he[xe],pe[xe]);for(;xe<be;++xe)we[xe]=pe[xe];return function(_e){for(xe=0;xe<ve;++xe)we[xe]=ge[xe](_e);return we}}function te(he,pe){var xe=new Date;return he=+he,pe=+pe,function(be){return xe.setTime(he*(1-be)+pe*be),xe}}function J(he,pe){return he=+he,pe=+pe,function(xe){return he*(1-xe)+pe*xe}}function X(he){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},X(he)}function K(he,pe){var xe,be={},ve={};for(xe in he!==null&&X(he)==="object"||(he={}),pe!==null&&X(pe)==="object"||(pe={}),pe)xe in he?be[xe]=ce(he[xe],pe[xe]):ve[xe]=pe[xe];return function(ge){for(xe in be)ve[xe]=be[xe](ge);return ve}}var Q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z=new RegExp(Q.source,"g");function re(he,pe){var xe,be,ve,ge=Q.lastIndex=Z.lastIndex=0,we=-1,_e=[],se=[];for(he+="",pe+="";(xe=Q.exec(he))&&(be=Z.exec(pe));)(ve=be.index)>ge&&(ve=pe.slice(ge,ve),_e[we]?_e[we]+=ve:_e[++we]=ve),(xe=xe[0])===(be=be[0])?_e[we]?_e[we]+=be:_e[++we]=be:(_e[++we]=null,se.push({i:we,x:J(xe,be)})),ge=Z.lastIndex;return ge<pe.length&&(ve=pe.slice(ge),_e[we]?_e[we]+=ve:_e[++we]=ve),_e.length<2?se[0]?function(ie){return function(fe){return ie(fe)+""}}(se[0].x):function(ie){return function(){return ie}}(pe):(pe=se.length,function(ie){for(var fe,Ee=0;Ee<pe;++Ee)_e[(fe=se[Ee]).i]=fe.x(ie);return _e.join("")})}function oe(he,pe){pe||(pe=[]);var xe,be=he?Math.min(pe.length,he.length):0,ve=pe.slice();return function(ge){for(xe=0;xe<be;++xe)ve[xe]=he[xe]*(1-ge)+pe[xe]*ge;return ve}}function ae(he){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},ae(he)}function ce(he,pe){var xe,be,ve=ae(pe);return pe==null||ve==="boolean"?W(pe):(ve==="number"?J:ve==="string"?(xe=g(pe))?(pe=xe,V):re:pe instanceof g?V:pe instanceof Date?te:(be=pe,!ArrayBuffer.isView(be)||be instanceof DataView?Array.isArray(pe)?U:typeof pe.valueOf!="function"&&typeof pe.toString!="function"||isNaN(pe)?K:J:oe))(he,pe)}},30584:function(ee){ee.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(ee){ee.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(ee){ee.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(ee){ee.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(ee){ee.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(ee){ee.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Cu={};function Fs(ee){var z=Cu[ee];if(z!==void 0)return z.exports;var e=Cu[ee]={exports:{}};return of[ee].call(e.exports,e,e.exports,Fs),e.exports}return Fs.n=function(ee){var z=ee&&ee.__esModule?function(){return ee.default}:function(){return ee};return Fs.d(z,{a:z}),z},Fs.d=function(ee,z){for(var e in z)Fs.o(z,e)&&!Fs.o(ee,e)&&Object.defineProperty(ee,e,{enumerable:!0,get:z[e]})},Fs.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Fs.o=function(ee,z){return Object.prototype.hasOwnProperty.call(ee,z)},Fs.r=function(ee){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})},Fs(13792)}()})}(af)),af.exports}var Cd=Ld();const Pd=Ed(Cd);console.log("theory-loader.js executing and importing Plotly...");window.Plotly=Pd;console.log("Plotly assigned to window.Plotly:",window.Plotly);
